[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/254802761","html_url":"https://github.com/elastic/elasticsearch/issues/21000#issuecomment-254802761","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21000","id":254802761,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDgwMjc2MQ==","user":{"login":"sikron","id":2979076,"node_id":"MDQ6VXNlcjI5NzkwNzY=","avatar_url":"https://avatars2.githubusercontent.com/u/2979076?v=4","gravatar_id":"","url":"https://api.github.com/users/sikron","html_url":"https://github.com/sikron","followers_url":"https://api.github.com/users/sikron/followers","following_url":"https://api.github.com/users/sikron/following{/other_user}","gists_url":"https://api.github.com/users/sikron/gists{/gist_id}","starred_url":"https://api.github.com/users/sikron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sikron/subscriptions","organizations_url":"https://api.github.com/users/sikron/orgs","repos_url":"https://api.github.com/users/sikron/repos","events_url":"https://api.github.com/users/sikron/events{/privacy}","received_events_url":"https://api.github.com/users/sikron/received_events","type":"User","site_admin":false},"created_at":"2016-10-19T12:50:39Z","updated_at":"2016-10-19T12:50:39Z","author_association":"NONE","body":"Hi again,\njust a little workaround, maybe this helps someone:\n\nWhen searching for \"Gesundheit\" (or a part of it with at least 3 consecutive characters), just perform the ngram-ification yourself and build the according bool-query:\n\n`\n{\n   \"query\":{\n      \"bool\":{\n         \"should\":[\n            {\n               \"bool\":{\n                  \"must\":[\n                     {\n                        \"term\":{\n                           \"text\":\"ges\"\n                        }\n                     },\n                     {\n                        \"term\":{\n                           \"text\":\"esu\"\n                        }\n                     },\n                     {\n                        \"term\":{\n                           \"text\":\"sun\"\n                        }\n                     },\n                     {\n                        \"term\":{\n                           \"text\":\"und\"\n                        }\n                     },\n                     {\n                        \"term\":{\n                           \"text\":\"ndh\"\n                        }\n                     },\n                     {\n                        \"term\":{\n                           \"text\":\"dhe\"\n                        }\n                     },\n                     {\n                        \"term\":{\n                           \"text\":\"hei\"\n                        }\n                     },\n                     {\n                        \"term\":{\n                           \"text\":\"eit\"\n                        }\n                     }\n                  ]\n               }\n            }\n         ]\n      }\n   }\n}\n`\n\nBut i nevertheless think, that it is a bug, that the `minimum_should_match` like in the example is not obeyed. It should be fixed.\n\nbye\nSimon\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/255039529","html_url":"https://github.com/elastic/elasticsearch/issues/21000#issuecomment-255039529","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21000","id":255039529,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTAzOTUyOQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2016-10-20T08:17:06Z","updated_at":"2016-10-20T08:17:06Z","author_association":"MEMBER","body":"Thanks for the report @sikron \nSince this is a problem in the guide and not in elasticsearch I opened an issue here:\nhttps://github.com/elastic/elasticsearch-definitive-guide/issues/619\n\nThe `ngram_filter` does not change the position of the tokens and for this reason it cannot work with `minimum_should_match` that uses the position to build the query. As a workaround you can change the analyzer of this field to use an `ngram_tokenizer` that will increment the position for every ngram.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/255040636","html_url":"https://github.com/elastic/elasticsearch/issues/21000#issuecomment-255040636","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21000","id":255040636,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTA0MDYzNg==","user":{"login":"sikron","id":2979076,"node_id":"MDQ6VXNlcjI5NzkwNzY=","avatar_url":"https://avatars2.githubusercontent.com/u/2979076?v=4","gravatar_id":"","url":"https://api.github.com/users/sikron","html_url":"https://github.com/sikron","followers_url":"https://api.github.com/users/sikron/followers","following_url":"https://api.github.com/users/sikron/following{/other_user}","gists_url":"https://api.github.com/users/sikron/gists{/gist_id}","starred_url":"https://api.github.com/users/sikron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sikron/subscriptions","organizations_url":"https://api.github.com/users/sikron/orgs","repos_url":"https://api.github.com/users/sikron/repos","events_url":"https://api.github.com/users/sikron/events{/privacy}","received_events_url":"https://api.github.com/users/sikron/received_events","type":"User","site_admin":false},"created_at":"2016-10-20T08:22:19Z","updated_at":"2016-10-20T08:22:19Z","author_association":"NONE","body":"@jimferenczi thx! i will give it a try :-)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/255177080","html_url":"https://github.com/elastic/elasticsearch/issues/21000#issuecomment-255177080","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21000","id":255177080,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTE3NzA4MA==","user":{"login":"sikron","id":2979076,"node_id":"MDQ6VXNlcjI5NzkwNzY=","avatar_url":"https://avatars2.githubusercontent.com/u/2979076?v=4","gravatar_id":"","url":"https://api.github.com/users/sikron","html_url":"https://github.com/sikron","followers_url":"https://api.github.com/users/sikron/followers","following_url":"https://api.github.com/users/sikron/following{/other_user}","gists_url":"https://api.github.com/users/sikron/gists{/gist_id}","starred_url":"https://api.github.com/users/sikron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sikron/subscriptions","organizations_url":"https://api.github.com/users/sikron/orgs","repos_url":"https://api.github.com/users/sikron/repos","events_url":"https://api.github.com/users/sikron/events{/privacy}","received_events_url":"https://api.github.com/users/sikron/received_events","type":"User","site_admin":false},"created_at":"2016-10-20T17:45:47Z","updated_at":"2016-10-20T17:45:47Z","author_association":"NONE","body":"Hi,\njust wanted to confirm that the `ngram_tokenizer` works. Way better approach than my \"ngram-ification\" of the search-term!\n\nthx!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274279707","html_url":"https://github.com/elastic/elasticsearch/issues/21000#issuecomment-274279707","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21000","id":274279707,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDI3OTcwNw==","user":{"login":"thigg","id":7593137,"node_id":"MDQ6VXNlcjc1OTMxMzc=","avatar_url":"https://avatars2.githubusercontent.com/u/7593137?v=4","gravatar_id":"","url":"https://api.github.com/users/thigg","html_url":"https://github.com/thigg","followers_url":"https://api.github.com/users/thigg/followers","following_url":"https://api.github.com/users/thigg/following{/other_user}","gists_url":"https://api.github.com/users/thigg/gists{/gist_id}","starred_url":"https://api.github.com/users/thigg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thigg/subscriptions","organizations_url":"https://api.github.com/users/thigg/orgs","repos_url":"https://api.github.com/users/thigg/repos","events_url":"https://api.github.com/users/thigg/events{/privacy}","received_events_url":"https://api.github.com/users/thigg/received_events","type":"User","site_admin":false},"created_at":"2017-01-21T18:38:21Z","updated_at":"2017-01-21T18:38:21Z","author_association":"NONE","body":"@sikron Could you post your solution?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274422932","html_url":"https://github.com/elastic/elasticsearch/issues/21000#issuecomment-274422932","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21000","id":274422932,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDQyMjkzMg==","user":{"login":"sikron","id":2979076,"node_id":"MDQ6VXNlcjI5NzkwNzY=","avatar_url":"https://avatars2.githubusercontent.com/u/2979076?v=4","gravatar_id":"","url":"https://api.github.com/users/sikron","html_url":"https://github.com/sikron","followers_url":"https://api.github.com/users/sikron/followers","following_url":"https://api.github.com/users/sikron/following{/other_user}","gists_url":"https://api.github.com/users/sikron/gists{/gist_id}","starred_url":"https://api.github.com/users/sikron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sikron/subscriptions","organizations_url":"https://api.github.com/users/sikron/orgs","repos_url":"https://api.github.com/users/sikron/repos","events_url":"https://api.github.com/users/sikron/events{/privacy}","received_events_url":"https://api.github.com/users/sikron/received_events","type":"User","site_admin":false},"created_at":"2017-01-23T08:06:51Z","updated_at":"2017-01-23T08:06:51Z","author_association":"NONE","body":"Hi @thigg,\r\nplease find a working example here: \r\n- [java-test](https://github.com/sikron/elasticsearch-examples/blob/master/pocs/ngram/src/test/java/com/skronawi/elasticsearch/examples/poc/ngram/NgramTokenizerMinShouldMatchScenario.java) showing a few use-cases and effects of the ngram tokenizer\r\n- [index-definition](https://github.com/sikron/elasticsearch-examples/blob/master/pocs/ngram/src/test/resources/index-settings_ngram-tokenizer.json) with the ngram tokenizer\r\n- [document-definition](https://github.com/sikron/elasticsearch-examples/blob/master/pocs/ngram/src/test/resources/ngram-entry.json), here i copied the fields \"name\" and \"content\" to a common fulltextsearch field, which uses the ngram tokenizer\r\n\r\nbye","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274886056","html_url":"https://github.com/elastic/elasticsearch/issues/21000#issuecomment-274886056","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21000","id":274886056,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDg4NjA1Ng==","user":{"login":"thigg","id":7593137,"node_id":"MDQ6VXNlcjc1OTMxMzc=","avatar_url":"https://avatars2.githubusercontent.com/u/7593137?v=4","gravatar_id":"","url":"https://api.github.com/users/thigg","html_url":"https://github.com/thigg","followers_url":"https://api.github.com/users/thigg/followers","following_url":"https://api.github.com/users/thigg/following{/other_user}","gists_url":"https://api.github.com/users/thigg/gists{/gist_id}","starred_url":"https://api.github.com/users/thigg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thigg/subscriptions","organizations_url":"https://api.github.com/users/thigg/orgs","repos_url":"https://api.github.com/users/thigg/repos","events_url":"https://api.github.com/users/thigg/events{/privacy}","received_events_url":"https://api.github.com/users/thigg/received_events","type":"User","site_admin":false},"created_at":"2017-01-24T18:07:12Z","updated_at":"2017-01-24T18:07:12Z","author_association":"NONE","body":"I used your examples to fix the example from the documentation:\r\nThis works with Elasticsearch 2.3.3\r\n```\r\nPUT /my_index\r\n{\r\n    \"settings\": {\r\n    \"analysis\": {\r\n      \"analyzer\": {\r\n        \"trigrams\": {\r\n          \"tokenizer\": \"my_ngram_tokenizer\"\r\n        }\r\n      },\r\n      \"tokenizer\": {\r\n        \"my_ngram_tokenizer\": {\r\n          \"type\": \"nGram\",\r\n          \"min_gram\": \"3\",\r\n          \"max_gram\": \"3\",\r\n          \"token_chars\": [\r\n            \"letter\",\r\n            \"digit\",\r\n            \"symbol\",\r\n            \"punctuation\"\r\n          ]\r\n        }\r\n      }\r\n    }\r\n},\r\n    \"mappings\": {\r\n        \"my_type\": {\r\n            \"properties\": {\r\n                \"text\": {\r\n                    \"type\":     \"string\",\r\n                    \"analyzer\": \"trigrams\" \r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nPOST /my_index/my_type/_bulk\r\n{ \"index\": { \"_id\": 1 }}\r\n{ \"text\": \"Aussprachewörterbuch\" }\r\n{ \"index\": { \"_id\": 2 }}\r\n{ \"text\": \"Militärgeschichte\" }\r\n{ \"index\": { \"_id\": 3 }}\r\n{ \"text\": \"Weißkopfseeadler\" }\r\n{ \"index\": { \"_id\": 4 }}\r\n{ \"text\": \"Weltgesundheitsorganisation\" }\r\n{ \"index\": { \"_id\": 5 }}\r\n{ \"text\": \"Rindfleischetikettierungsüberwachungsaufgabenübertragungsgesetz\" }\r\n\r\nGET /my_index/my_type/_search\r\n{\r\n    \"query\": {\r\n        \"match\": {\r\n            \"text\": {\r\n                \"query\":                \"gesund\",\r\n                \"minimum_should_match\": \"80%\"\r\n            }\r\n        }\r\n    }\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/302675744","html_url":"https://github.com/elastic/elasticsearch/issues/21000#issuecomment-302675744","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21000","id":302675744,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjY3NTc0NA==","user":{"login":"Goltergaul","id":34413,"node_id":"MDQ6VXNlcjM0NDEz","avatar_url":"https://avatars3.githubusercontent.com/u/34413?v=4","gravatar_id":"","url":"https://api.github.com/users/Goltergaul","html_url":"https://github.com/Goltergaul","followers_url":"https://api.github.com/users/Goltergaul/followers","following_url":"https://api.github.com/users/Goltergaul/following{/other_user}","gists_url":"https://api.github.com/users/Goltergaul/gists{/gist_id}","starred_url":"https://api.github.com/users/Goltergaul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Goltergaul/subscriptions","organizations_url":"https://api.github.com/users/Goltergaul/orgs","repos_url":"https://api.github.com/users/Goltergaul/repos","events_url":"https://api.github.com/users/Goltergaul/events{/privacy}","received_events_url":"https://api.github.com/users/Goltergaul/received_events","type":"User","site_admin":false},"created_at":"2017-05-19T11:11:17Z","updated_at":"2017-05-19T11:11:30Z","author_association":"NONE","body":"@jimczi can you give me some more insight into the difference between the ngram tokenizer and filter related to this issue? ","performed_via_github_app":null}]