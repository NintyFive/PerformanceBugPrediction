{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/47240","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47240/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47240/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47240/events","html_url":"https://github.com/elastic/elasticsearch/issues/47240","id":499571946,"node_id":"MDU6SXNzdWU0OTk1NzE5NDY=","number":47240,"title":"Add action that checks whether a specific ILM policy is compatible with indices","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"labels":[{"id":912828538,"node_id":"MDU6TGFiZWw5MTI4Mjg1Mzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/ILM+SLM","name":":Core/Features/ILM+SLM","color":"0e8a16","default":false,"description":"Index and Snapshot lifecycle management"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":929267538,"node_id":"MDU6TGFiZWw5MjkyNjc1Mzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/team-discuss","name":"team-discuss","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2019-09-27T17:53:49Z","updated_at":"2020-03-12T14:43:12Z","closed_at":"2020-03-12T14:43:11Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### Proposal\r\n\r\nnew endpoint like `_ilm/check` that takes in a policy, index-template, and writing index and checks that all the alias setup is correct.\r\n\r\n### Reason\r\nDocumentation has been added to help debug issues, but it would be nice to help popular clients of ILM like APM, Beats, Logstash to verify that things are set up correctly before continuing to index.\r\n\r\nIt is common to run into errors mentioning that the `rollover_alias` is incorrectly set for a managed index\r\n\r\n```\r\nillegal_argument_exception: index.lifecycle.rollover_alias [ilm-alias] does not point to index [ilm-managed-index-2020.01.01] \r\n```\r\n\r\nSince there are a few moving pieces (index templates + bootstrapped index setting) that are required to get exactly write for things to operate well, it may be nice to have an endpoint that can sanity check the setup so clients can leverage this to determine whether to continue using the index expecting it will be properly managed by ILM.\r\n\r\nFor example, Beats with ILM enabled can verify that the indices are properly set up and prevent beats from starting up until things are fixed. The endpoint can provide details of why things were incorrect, etc.","closed_by":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"performed_via_github_app":null}