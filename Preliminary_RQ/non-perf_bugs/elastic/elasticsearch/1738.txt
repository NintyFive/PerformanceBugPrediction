{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1738","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1738/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1738/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1738/events","html_url":"https://github.com/elastic/elasticsearch/issues/1738","id":3377876,"node_id":"MDU6SXNzdWUzMzc3ODc2","number":1738,"title":"`_routing` in child type mapping prevents indexing","user":{"login":"kevingessner","id":569461,"node_id":"MDQ6VXNlcjU2OTQ2MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/569461?v=4","gravatar_id":"","url":"https://api.github.com/users/kevingessner","html_url":"https://github.com/kevingessner","followers_url":"https://api.github.com/users/kevingessner/followers","following_url":"https://api.github.com/users/kevingessner/following{/other_user}","gists_url":"https://api.github.com/users/kevingessner/gists{/gist_id}","starred_url":"https://api.github.com/users/kevingessner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevingessner/subscriptions","organizations_url":"https://api.github.com/users/kevingessner/orgs","repos_url":"https://api.github.com/users/kevingessner/repos","events_url":"https://api.github.com/users/kevingessner/events{/privacy}","received_events_url":"https://api.github.com/users/kevingessner/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2012-02-24T19:30:56Z","updated_at":"2015-06-08T00:09:02Z","closed_at":"2014-11-27T11:50:59Z","author_association":"NONE","active_lock_reason":null,"body":"It appears that the child document's routing value is, by default, its parent's ID. Thus, if the parent has a `_routing` path set in its mapping, the child and parent will be mapped to different shards (which is bad).\n\nAdding `_routing` to the child mapping does not help, as the value from the document does not override the default routing value (i.e. the parent's ID). Instead, it causes an exception while indexing the child document.\n\nReproduced in 0.19.0.RC3: https://gist.github.com/1902998\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}