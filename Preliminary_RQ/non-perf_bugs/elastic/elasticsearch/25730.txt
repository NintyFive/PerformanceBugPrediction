{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25730","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25730/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25730/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25730/events","html_url":"https://github.com/elastic/elasticsearch/issues/25730","id":243027801,"node_id":"MDU6SXNzdWUyNDMwMjc4MDE=","number":25730,"title":"java.lang.ClassNotFoundException: org.elasticsearch.plugins.NetworkPlugin","user":{"login":"ziadloo","id":3235521,"node_id":"MDQ6VXNlcjMyMzU1MjE=","avatar_url":"https://avatars2.githubusercontent.com/u/3235521?v=4","gravatar_id":"","url":"https://api.github.com/users/ziadloo","html_url":"https://github.com/ziadloo","followers_url":"https://api.github.com/users/ziadloo/followers","following_url":"https://api.github.com/users/ziadloo/following{/other_user}","gists_url":"https://api.github.com/users/ziadloo/gists{/gist_id}","starred_url":"https://api.github.com/users/ziadloo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ziadloo/subscriptions","organizations_url":"https://api.github.com/users/ziadloo/orgs","repos_url":"https://api.github.com/users/ziadloo/repos","events_url":"https://api.github.com/users/ziadloo/events{/privacy}","received_events_url":"https://api.github.com/users/ziadloo/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-07-14T15:18:15Z","updated_at":"2017-12-29T06:08:42Z","closed_at":"2017-07-14T18:09:12Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Feature request -->\r\n\r\n**Describe the feature**:\r\n\r\nUnable to add Elasticsearch to a Spring Boot project, facing `java.lang.ClassNotFoundException: org.elasticsearch.plugins.NetworkPlugin`\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version**: 5.5.0\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`):\r\n```\r\njava version \"1.8.0_131\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_131-b11)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)\r\n```\r\n**OS version** (`uname -a` if on a Unix-like system):\r\n```\r\nLinux flash 4.4.0-83-generic #106~14.04.1-Ubuntu SMP Mon Jun 26 18:10:19 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n```\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nAdding the Elasticsearch's dependencies to a Spring Boot project and trying to instantiate a `TransportClient` object leads to `java.lang.ClassNotFoundException: org.elasticsearch.plugins.NetworkPlugin`.\r\n\r\nThe expected result is that it shouldn't throw a ClassNotFoundException exception.\r\n\r\n**Steps to reproduce**:\r\n\r\n 1. Download a Spring [sample project](https://github.com/spring-guides/gs-rest-service.git)\r\n 2. Modify the pom.xml to add Elasticsearch dependencies:\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n    <modelVersion>4.0.0</modelVersion>\r\n\r\n    <groupId>org.springframework</groupId>\r\n    <artifactId>gs-rest-service</artifactId>\r\n    <version>0.1.0</version>\r\n\r\n    <parent>\r\n        <groupId>org.springframework.boot</groupId>\r\n        <artifactId>spring-boot-starter-parent</artifactId>\r\n        <version>1.5.3.RELEASE</version>\r\n    </parent>\r\n\r\n    <dependencies>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-web</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-test</artifactId>\r\n            <scope>test</scope>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>com.jayway.jsonpath</groupId>\r\n            <artifactId>json-path</artifactId>\r\n            <scope>test</scope>\r\n        </dependency>\r\n\r\n        <dependency>\r\n            <groupId>org.elasticsearch.client</groupId>\r\n            <artifactId>transport</artifactId>\r\n            <version>5.5.0</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.elasticsearch</groupId>\r\n            <artifactId>elasticsearch</artifactId>\r\n            <version>5.5.0</version>\r\n        </dependency>\r\n\r\n        <dependency>\r\n            <groupId>org.apache.logging.log4j</groupId>\r\n            <artifactId>log4j-core</artifactId>\r\n            <version>2.8.2</version>\r\n        </dependency>\r\n    </dependencies>\r\n\r\n    <properties>\r\n        <java.version>1.8</java.version>\r\n        <elasticsearch.version>5.5.0</elasticsearch.version>\r\n    </properties>\r\n\r\n    <build>\r\n        <plugins>\r\n            <plugin>\r\n                <groupId>org.springframework.boot</groupId>\r\n                <artifactId>spring-boot-maven-plugin</artifactId>\r\n            </plugin>\r\n        </plugins>\r\n    </build>\r\n\r\n    <repositories>\r\n        <repository>\r\n            <id>spring-releases</id>\r\n            <url>https://repo.spring.io/libs-release</url>\r\n        </repository>\r\n    </repositories>\r\n\r\n    <pluginRepositories>\r\n        <pluginRepository>\r\n            <id>spring-releases</id>\r\n            <url>https://repo.spring.io/libs-release</url>\r\n        </pluginRepository>\r\n    </pluginRepositories>\r\n</project>\r\n```\r\n 3. Try to instantiate a TransportClient object like this:\r\n```\r\nSettings settings = Settings\r\n    .builder()\r\n    .build();\r\n\r\nTransportClient client = new PreBuiltTransportClient(settings)\r\n    .addTransportAddress(new InetSocketTransportAddress(\r\n        InetAddress.getByName(\"localhost\"), 9300\r\n    ));\r\n```\r\n**Provide logs (if relevant)**:\r\n```\r\nCaused by: java.lang.ClassNotFoundException: org.elasticsearch.plugins.NetworkPlugin\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:381) ~[na:1.8.0_131]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_131]\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335) ~[na:1.8.0_131]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_131]\r\n\t... 56 common frames omitted\r\n```\r\n","closed_by":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"performed_via_github_app":null}