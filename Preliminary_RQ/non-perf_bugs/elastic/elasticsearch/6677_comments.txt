[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/47754860","html_url":"https://github.com/elastic/elasticsearch/issues/6677#issuecomment-47754860","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6677","id":47754860,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzU0ODYw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-02T09:27:28Z","updated_at":"2014-07-02T09:27:28Z","author_association":"CONTRIBUTOR","body":"++\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/47756072","html_url":"https://github.com/elastic/elasticsearch/issues/6677#issuecomment-47756072","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6677","id":47756072,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzU2MDcy","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-07-02T09:40:47Z","updated_at":"2014-07-02T09:41:20Z","author_association":"CONTRIBUTOR","body":"huge +1 IMO we should start rejecting this setting on new created indices!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/47756730","html_url":"https://github.com/elastic/elasticsearch/issues/6677#issuecomment-47756730","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6677","id":47756730,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzU2NzMw","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2014-07-02T09:47:57Z","updated_at":"2014-07-02T09:47:57Z","author_association":"MEMBER","body":"Yes! Deprecate in 1.3 and remove in master?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/47756774","html_url":"https://github.com/elastic/elasticsearch/issues/6677#issuecomment-47756774","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6677","id":47756774,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzU2Nzc0","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-07-02T09:48:30Z","updated_at":"2014-07-02T09:48:30Z","author_association":"CONTRIBUTOR","body":"the removal is a problem IMO since this is a index level BWC issue :/\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64779945","html_url":"https://github.com/elastic/elasticsearch/issues/6677#issuecomment-64779945","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6677","id":64779945,"node_id":"MDEyOklzc3VlQ29tbWVudDY0Nzc5OTQ1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-27T11:40:10Z","updated_at":"2014-11-27T11:40:10Z","author_association":"CONTRIBUTOR","body":"The `index_name` and `path` parameters are no longer needed now that we have `copy_to`.  From 2.0, we should:\n- refuse to create new indices which contain these mappings\n- maintain the ability to understand `index_name` and `path` on existing indices\n- change the `upgrade` API to complain about the use of deprecated params (see #8682)\n\nFrom 3.0: \n- remove `index_name` and `path` completely\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/67341534","html_url":"https://github.com/elastic/elasticsearch/issues/6677#issuecomment-67341534","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6677","id":67341534,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MzQxNTM0","user":{"login":"InfinitiesLoop","id":202632,"node_id":"MDQ6VXNlcjIwMjYzMg==","avatar_url":"https://avatars3.githubusercontent.com/u/202632?v=4","gravatar_id":"","url":"https://api.github.com/users/InfinitiesLoop","html_url":"https://github.com/InfinitiesLoop","followers_url":"https://api.github.com/users/InfinitiesLoop/followers","following_url":"https://api.github.com/users/InfinitiesLoop/following{/other_user}","gists_url":"https://api.github.com/users/InfinitiesLoop/gists{/gist_id}","starred_url":"https://api.github.com/users/InfinitiesLoop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/InfinitiesLoop/subscriptions","organizations_url":"https://api.github.com/users/InfinitiesLoop/orgs","repos_url":"https://api.github.com/users/InfinitiesLoop/repos","events_url":"https://api.github.com/users/InfinitiesLoop/events{/privacy}","received_events_url":"https://api.github.com/users/InfinitiesLoop/received_events","type":"User","site_admin":false},"created_at":"2014-12-17T15:48:08Z","updated_at":"2014-12-17T15:48:08Z","author_association":"NONE","body":"For your consideration, please review this issue. Perhaps removing index_name will have a greater impact than intended.\nhttps://github.com/elasticsearch/elasticsearch/issues/8980\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/72827495","html_url":"https://github.com/elastic/elasticsearch/issues/6677#issuecomment-72827495","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6677","id":72827495,"node_id":"MDEyOklzc3VlQ29tbWVudDcyODI3NDk1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-02-04T09:54:06Z","updated_at":"2015-02-04T09:54:06Z","author_association":"CONTRIBUTOR","body":"In 2.0, I think we can upgrade the mapping in a way that is not perfect, but will cover most use cases and help users to upgrade without reindexing.\n\n`index_name` and `path` are used for two main purposes:\n- the old way to do `copy_to`\n- provide fieldname aliases, eg `tag` points to `tags`\n\nWe can't distinguish between these two use cases automatically, but we can handle the first use case gracefully, and the second use case is an easy change to make application side (ie just change all use of `tags` to `tag` in searches)\n\nA mapping that looks like this (with `path` set to `just_name`):\n\n```\n{\n  \"mappings\": {\n    \"test\": {\n      \"properties\": {\n        \"name\": {\n          \"type\": \"object\",\n          \"path\": \"just_name\", \n          \"properties\": {\n            \"first\": {\n              \"type\": \"string\",\n              \"index_name\": \"fullname\"\n            },\n            \"last\": {\n              \"type\": \"string\",\n              \"index_name\": \"fullname\"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\ncould be rewritten to:\n\n```\n{\n  \"mappings\": {\n    \"test\": {\n      \"properties\": {\n        \"fullname\": {\n          \"type\": \"string\"\n        },\n        \"name\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"first\": {\n              \"index\": \"no\",\n              \"copy_to\": \"fullname\"\n            },\n            \"last\": {\n              \"index\": \"no\",\n              \"copy_to\": \"fullname\"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nThe mapping for the new `fullname` field can just be the same as the mapping of the first field which uses `index_name` (without the `index_name`) setting.  The original field will not be indexed (or searchable).\n\nIn the case where `path`  is set to `full`, the same rules apply, but the new field uses the full path name, ie this:\n\n```\n{\n  \"mappings\": {\n    \"test\": {\n      \"properties\": {\n        \"name\": {\n          \"type\": \"object\",\n          \"path\": \"full\", \n          \"properties\": {\n            \"first\": {\n              \"type\": \"string\",\n              \"index_name\": \"fullname\"\n            },\n            \"last\": {\n              \"type\": \"string\",\n              \"index_name\": \"fullname\"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\ncould be rewritten as:   \n\n```\n{\n  \"mappings\": {\n    \"test\": {\n      \"properties\": {\n        \"name\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"first\": {\n              \"index\": \"no\",\n              \"copy_to\": \"name.fullname\"\n            },\n            \"last\": {\n              \"index\": \"no\",\n              \"copy_to\": \"name.fullname\"\n            },\n            \"fullname\": {\n              \"type\": \"string\"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n","performed_via_github_app":null}]