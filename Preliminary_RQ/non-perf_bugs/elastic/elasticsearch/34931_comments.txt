[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/433509294","html_url":"https://github.com/elastic/elasticsearch/issues/34931#issuecomment-433509294","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34931","id":433509294,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzUwOTI5NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-10-26T18:53:53Z","updated_at":"2018-10-26T18:53:53Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/433514766","html_url":"https://github.com/elastic/elasticsearch/issues/34931#issuecomment-433514766","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34931","id":433514766,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzUxNDc2Ng==","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2018-10-26T19:14:24Z","updated_at":"2018-10-26T19:14:24Z","author_association":"MEMBER","body":"where are you configuring ssl in your settings? What other settings have you configured?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/433531857","html_url":"https://github.com/elastic/elasticsearch/issues/34931#issuecomment-433531857","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34931","id":433531857,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzUzMTg1Nw==","user":{"login":"bsturg","id":43001889,"node_id":"MDQ6VXNlcjQzMDAxODg5","avatar_url":"https://avatars3.githubusercontent.com/u/43001889?v=4","gravatar_id":"","url":"https://api.github.com/users/bsturg","html_url":"https://github.com/bsturg","followers_url":"https://api.github.com/users/bsturg/followers","following_url":"https://api.github.com/users/bsturg/following{/other_user}","gists_url":"https://api.github.com/users/bsturg/gists{/gist_id}","starred_url":"https://api.github.com/users/bsturg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bsturg/subscriptions","organizations_url":"https://api.github.com/users/bsturg/orgs","repos_url":"https://api.github.com/users/bsturg/repos","events_url":"https://api.github.com/users/bsturg/events{/privacy}","received_events_url":"https://api.github.com/users/bsturg/received_events","type":"User","site_admin":false},"created_at":"2018-10-26T20:20:51Z","updated_at":"2018-10-26T20:20:51Z","author_association":"NONE","body":"This is a simple cluster with only SSL configured on transport within elasticsearch.yml\r\n\r\nxpack.security.enabled: true\r\nxpack.security.transport.ssl.enabled: true\r\nxpack.security.transport.ssl.verification_mode: none\r\nxpack.security.transport.ssl.keystore.path: certs/elastic-certificates.p12\r\nxpack.security.transport.ssl.truststore.path: certs/elastic-certificates.p12","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/438057669","html_url":"https://github.com/elastic/elasticsearch/issues/34931#issuecomment-438057669","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34931","id":438057669,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODA1NzY2OQ==","user":{"login":"gpanula","id":4266790,"node_id":"MDQ6VXNlcjQyNjY3OTA=","avatar_url":"https://avatars3.githubusercontent.com/u/4266790?v=4","gravatar_id":"","url":"https://api.github.com/users/gpanula","html_url":"https://github.com/gpanula","followers_url":"https://api.github.com/users/gpanula/followers","following_url":"https://api.github.com/users/gpanula/following{/other_user}","gists_url":"https://api.github.com/users/gpanula/gists{/gist_id}","starred_url":"https://api.github.com/users/gpanula/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpanula/subscriptions","organizations_url":"https://api.github.com/users/gpanula/orgs","repos_url":"https://api.github.com/users/gpanula/repos","events_url":"https://api.github.com/users/gpanula/events{/privacy}","received_events_url":"https://api.github.com/users/gpanula/received_events","type":"User","site_admin":false},"created_at":"2018-11-12T22:53:14Z","updated_at":"2018-11-12T23:43:51Z","author_association":"NONE","body":"I have also encountered this bug.  My understanding is the SSL is now part of the basic license per https://www.elastic.co/products/x-pack/open\r\n\r\nConfigs bits from _/etc/elasticsearch/elasticsearch.yml_\r\n```\r\nxpack.security.enabled: true\r\nxpack.security.transport.ssl.enabled: true\r\nxpack.security.transport.ssl.verification_mode: certificate\r\nxpack.security.transport.ssl.keystore.path: /etc/elasticsearch/certs/elastic-certificates.p12\r\nxpack.security.transport.ssl.truststore.path: /etc/elasticsearch/certs/elastic-certificates.p12\r\nxpack.security.http.ssl.enabled: true\r\nxpack.security.http.ssl.keystore.path: /etc/elasticsearch/certs/elastic-certificates.p12\r\nxpack.security.http.ssl.truststore.path: /etc/elasticsearch/certs/elastic-certificates.p12\r\n```\r\n\r\nExplicitly set license to basic\r\n```\r\nxpack.license.self_generated.type: basic\r\n```\r\n\r\nUsing a single certificate for the nodes created with the _elasticsearch-certutil_ utility\r\n\r\nOnce a master has been elected, other new nodes can **not** join the cluster.\r\n\r\nMaybe a catch-22 with the basic license and ssl?  \r\n\r\nOnce a master has been elected, the basic license is generated.  New nodes get their license info from the elected master but they can't talk to that node because they lack the ssl authentication token?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/438371350","html_url":"https://github.com/elastic/elasticsearch/issues/34931#issuecomment-438371350","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34931","id":438371350,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODM3MTM1MA==","user":{"login":"gpanula","id":4266790,"node_id":"MDQ6VXNlcjQyNjY3OTA=","avatar_url":"https://avatars3.githubusercontent.com/u/4266790?v=4","gravatar_id":"","url":"https://api.github.com/users/gpanula","html_url":"https://github.com/gpanula","followers_url":"https://api.github.com/users/gpanula/followers","following_url":"https://api.github.com/users/gpanula/following{/other_user}","gists_url":"https://api.github.com/users/gpanula/gists{/gist_id}","starred_url":"https://api.github.com/users/gpanula/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpanula/subscriptions","organizations_url":"https://api.github.com/users/gpanula/orgs","repos_url":"https://api.github.com/users/gpanula/repos","events_url":"https://api.github.com/users/gpanula/events{/privacy}","received_events_url":"https://api.github.com/users/gpanula/received_events","type":"User","site_admin":false},"created_at":"2018-11-13T17:54:07Z","updated_at":"2018-11-13T17:54:07Z","author_association":"NONE","body":"Maybe useful bit from elected master's log when a new master tried to join the cluster.\r\n\r\n```\r\nCaused by: java.lang.IllegalStateException: handshake failed with {i-0435f7d28253346f9}{TZ6EyTmhQiarzEm_Z-RuHA}{ZGGY-z3cQ5uIRO6U7XK5cg}{1.2.6.154}{1.2.6.154:9300}{aws_availability_zone=us-east-1a, xpack.installed=true}\r\n        at org.elasticsearch.transport.TransportService.handshake(TransportService.java:400) ~[elasticsearch-6.4.2.jar:6.4.2]\r\n        at org.elasticsearch.transport.TransportService.lambda$connectToNode$4(TransportService.java:331) ~[elasticsearch-6.4.2.jar:6.4.2]\r\n        at org.elasticsearch.transport.TcpTransport.connectToNode(TcpTransport.java:543) ~[elasticsearch-6.4.2.jar:6.4.2]\r\n        ... 9 more\r\nCaused by: org.elasticsearch.transport.RemoteTransportException: [i-0435f7d28253346f9][10.225.196.154:9300][internal:transport/handshake]\r\nCaused by: org.elasticsearch.ElasticsearchSecurityException: missing authentication token for action [internal:transport/handshake]\r\n        at org.elasticsearch.xpack.core.security.support.Exceptions.authenticationError(Exceptions.java:18) ~[?:?]\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/438388632","html_url":"https://github.com/elastic/elasticsearch/issues/34931#issuecomment-438388632","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34931","id":438388632,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODM4ODYzMg==","user":{"login":"gpanula","id":4266790,"node_id":"MDQ6VXNlcjQyNjY3OTA=","avatar_url":"https://avatars3.githubusercontent.com/u/4266790?v=4","gravatar_id":"","url":"https://api.github.com/users/gpanula","html_url":"https://github.com/gpanula","followers_url":"https://api.github.com/users/gpanula/followers","following_url":"https://api.github.com/users/gpanula/following{/other_user}","gists_url":"https://api.github.com/users/gpanula/gists{/gist_id}","starred_url":"https://api.github.com/users/gpanula/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpanula/subscriptions","organizations_url":"https://api.github.com/users/gpanula/orgs","repos_url":"https://api.github.com/users/gpanula/repos","events_url":"https://api.github.com/users/gpanula/events{/privacy}","received_events_url":"https://api.github.com/users/gpanula/received_events","type":"User","site_admin":false},"created_at":"2018-11-13T18:42:19Z","updated_at":"2018-11-13T18:42:19Z","author_association":"NONE","body":"Error persists with version 6.4.3\r\n```\r\nCaused by: java.lang.IllegalStateException: handshake failed with {i-0cd1ed6437cffe351}{FNhm7WZnRMq5y2JLL9KdYg}{_PCd1tfGQkKdnLTjp_MCFw}{1.2.6.232}{1.2.6.232:9300}{aws_availability_zone=us-east-1d, xpack.installed=true}\r\n        at org.elasticsearch.transport.TransportService.handshake(TransportService.java:400) ~[elasticsearch-6.4.3.jar:6.4.3]\r\n        at org.elasticsearch.transport.TransportService.lambda$connectToNode$4(TransportService.java:331) ~[elasticsearch-6.4.3.jar:6.4.3]\r\n        at org.elasticsearch.transport.TcpTransport.connectToNode(TcpTransport.java:543) ~[elasticsearch-6.4.3.jar:6.4.3]\r\n        ... 9 more\r\nCaused by: org.elasticsearch.transport.RemoteTransportException: [i-0cd1ed6437cffe351][1.2.6.232:9300][internal:transport/handshake]\r\nCaused by: org.elasticsearch.ElasticsearchSecurityException: missing authentication token for action [internal:transport/handshake]\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/438405142","html_url":"https://github.com/elastic/elasticsearch/issues/34931#issuecomment-438405142","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34931","id":438405142,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODQwNTE0Mg==","user":{"login":"inqueue","id":6099128,"node_id":"MDQ6VXNlcjYwOTkxMjg=","avatar_url":"https://avatars2.githubusercontent.com/u/6099128?v=4","gravatar_id":"","url":"https://api.github.com/users/inqueue","html_url":"https://github.com/inqueue","followers_url":"https://api.github.com/users/inqueue/followers","following_url":"https://api.github.com/users/inqueue/following{/other_user}","gists_url":"https://api.github.com/users/inqueue/gists{/gist_id}","starred_url":"https://api.github.com/users/inqueue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inqueue/subscriptions","organizations_url":"https://api.github.com/users/inqueue/orgs","repos_url":"https://api.github.com/users/inqueue/repos","events_url":"https://api.github.com/users/inqueue/events{/privacy}","received_events_url":"https://api.github.com/users/inqueue/received_events","type":"User","site_admin":false},"created_at":"2018-11-13T19:30:36Z","updated_at":"2018-11-13T19:30:36Z","author_association":"MEMBER","body":"Secure communications is only included with a Gold or Platinum license- see https://www.elastic.co/subscriptions and click Security. \r\n\r\nWhat makes this issue particularly strange is ES will start successfully and form a multi-node cluster with transport TLS configured while operating under a Basic license, though TLS is not actually enabled--which is expected under that license. However, a node that is restarted is unable to join the cluster without a full cluster restart as mentioned in the original description. \r\n\r\nI really like that ES, under a Basic license, ignores `security` settings because it means you don't have to restart the cluster to enable security when a Gold or Platinum is installed. A way to improve the experience would be to allow a node to rejoin the cluster under the same configuration.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/438414568","html_url":"https://github.com/elastic/elasticsearch/issues/34931#issuecomment-438414568","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34931","id":438414568,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODQxNDU2OA==","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2018-11-13T19:57:36Z","updated_at":"2018-11-13T19:57:36Z","author_association":"MEMBER","body":"> My understanding is the SSL is now part of the basic license per https://www.elastic.co/products/x-pack/open \r\n\r\n@gpanula TLS (SSL) is not part of the basic license. The code is open, as in we are developing it in a repository that is publicly accessible. However, certain features like TLS are still licensed and require a higher license level than basic.\r\n\r\nThat said, if TLS is enabled on a cluster with a basic license, you'll probably encounter some odd behavior. I suggest you remove the TLS settings when operating with a basic license.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/438481859","html_url":"https://github.com/elastic/elasticsearch/issues/34931#issuecomment-438481859","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34931","id":438481859,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODQ4MTg1OQ==","user":{"login":"gpanula","id":4266790,"node_id":"MDQ6VXNlcjQyNjY3OTA=","avatar_url":"https://avatars3.githubusercontent.com/u/4266790?v=4","gravatar_id":"","url":"https://api.github.com/users/gpanula","html_url":"https://github.com/gpanula","followers_url":"https://api.github.com/users/gpanula/followers","following_url":"https://api.github.com/users/gpanula/following{/other_user}","gists_url":"https://api.github.com/users/gpanula/gists{/gist_id}","starred_url":"https://api.github.com/users/gpanula/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpanula/subscriptions","organizations_url":"https://api.github.com/users/gpanula/orgs","repos_url":"https://api.github.com/users/gpanula/repos","events_url":"https://api.github.com/users/gpanula/events{/privacy}","received_events_url":"https://api.github.com/users/gpanula/received_events","type":"User","site_admin":false},"created_at":"2018-11-13T23:44:55Z","updated_at":"2018-11-13T23:44:55Z","author_association":"NONE","body":"Ahhh, my fault for not scrolling down far enough in the announcement.   Thank you for the clarification.","performed_via_github_app":null}]