[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233958833","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-233958833","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":233958833,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzk1ODgzMw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-07-20T14:04:04Z","updated_at":"2016-07-20T16:06:54Z","author_association":"MEMBER","body":"Good points!\n\nI think we should re-evaluate what we use REST tests for and how we want to move forward, especially now that we have a REST client.\n\nA bit of history: REST tests were first introduced to have all language clients run the same tests. Core elasticsearch started running those same tests as well to test the otherwise untested elasticsearch REST layer (integration tests used solely the java api). Core started to add REST tests too in order to increase coverage for the REST layer too, and those tests made sense for the clients too, as they effectively meant more coverage for the clients too. \n\nA while ago we decided to move away from testing against an internal cluster, which runs in the same jvm as the tests, as that is a scenario that's far from reality. The closer thing we had at the time to a real integration test relying on an external cluster was the REST tests, so we started using those more and more. We are now in a situation where we use REST tests for a lot of different situations, and clients can run only a subset of those. But REST tests come with limitations, as the infra wasn't made to run full blown integration tests with complicated setups, plus if we have REST tests that are only run by us to test core and integrations, I am wondering if it still make sense to write them in yaml format. Shouldn't we have proper java integration tests for that purpose? Maybe we should invest in some other test infra that programmatically uses the REST client to send requests. I think we are where we are because we didn't have a java REST client, and REST tests were the easier way to write a test that was http based. Maybe other reasons too?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234000761","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234000761","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234000761,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDAwMDc2MQ==","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2016-07-20T16:18:44Z","updated_at":"2016-07-20T16:18:44Z","author_association":"CONTRIBUTOR","body":"Chiming in here with @javanna. I think we should open up a discussion about the REST (YAML) test suite, asking ourselves questions such as \"what is exactly the position of these tests within the Elasticsearch core suite\", and \"what goals should these tests fulfill\".\n\nAs Luca writes, the REST (YAML) tests were historically a device to ensure all language clients, or \"anything that talks to Elasticsearch over HTTP\", can be verified in a shared way in its correctness. There's a tremendous value in that, however technically trivial and \"small\" it ultimately is.\n\nOf course, over time, there are many specific things within the context of Elasticsearch core to test, and these things require a much more flexible and powerful infrastructure to support them. The question is, in my mind, whether we should \"bend\" the REST (YAML) tests for this purpose, or as Luca suggests, come up with a _different_ infrastructure for these. This other infrastructure could indeed leverage our knowledge and code implementations of the YAML tests, but could be something different, more flexible in terms of Elasticsearch core integration testing.\n\nIn other words, there's a big benefit in eg. randomizing the number of nodes the REST tests are run against, but that is more _interesting_ for Elasticsearch itself, than to various language clients we have. \n\nEven strictly pragmatically, imagine the Ruby test suite fails because the test assumed to be run against a single node, not two (as happened to me [the other day](https://github.com/elastic/elasticsearch/commit/9b1a4771207f21ca275cf10c3a4e8717c9e45311)). Now I'm probably left confused, sometimes the suite runs, sometimes it fails, I have to ask somebody about the problem, ... \n\nIn summary, I think we should ask if what we need aren't _two different REST test suites_:\n1. a common REST (YAML) test suite, which tests correctness of language clients and serves as their integration tests, and\n2. an Elasticsearch core integration test suite, which might or might not be encoded in YAML, which is run only by Elasticsearch core, to serve as its integration tests suite, with all the nice things like randomized number of nodes, custom configurations, specific plugins installed, and so on.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234001750","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234001750","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234001750,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDAwMTc1MA==","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2016-07-20T16:22:15Z","updated_at":"2016-07-20T16:22:15Z","author_association":"CONTRIBUTOR","body":"CC: @elastic/es-clients\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234014885","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234014885","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234014885,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDAxNDg4NQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-07-20T17:08:23Z","updated_at":"2016-07-20T17:08:23Z","author_association":"CONTRIBUTOR","body":"So, yeah, I just had another conversation about this with @clintongormley. I think we should move away from putting _all_ of the testing of REST things that we do for Elasticsearch into the REST tests. They function very well as smoke tests for Elasticsearch's REST behavior and for the client's interaction but their lack of power, specifically lack of arbitrary loops and methods, means we copy and paste things all over the place. _And_ we keep adding more and more complexity to them and that adds more and more burden on the language clients.\n\nI still think Elasticsearch should randomize the configuration when it runs the yaml rest tests because it can get more value out of that. I don't think the clients should need to worry about that. Their goal isn't to find Elasticsearch bugs, but instead to find bugs they might have in interacting with Elasticsearch.\n\nSo I'm going to spend some time this afternoon putting together some REST level tests for Elasticsearch in Java using the its client, probably by reverting the REST changes I made in https://github.com/elastic/elasticsearch/pull/19509 and redoing the checks as other tests.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234029608","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234029608","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234029608,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDAyOTYwOA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-07-20T17:59:09Z","updated_at":"2016-07-20T17:59:09Z","author_association":"MEMBER","body":"> I still think Elasticsearch should randomize the configuration when it runs the yaml rest tests because it can get more value out of that\n\nThe point of using rest tests for integTest was to test _integration_ of all the componenents, not to test individual behavior. Eg, we should not be testing every variation of a feature, only that that feature is hooked in correctly (the integration of the components). I don't think randomizing is going to help, it will only be then like it was when we had more ESIntegTestCases: sporadic failures that have nothing to do with the feature/test that failed. Let's instead invest in more unit tests, and keep the integration testing to a bare minimum. I don't think randomizing the number of nodes is useful, but if we want to first run the rest tests on a single node cluster, and then run them on a two node cluster, I think that would be fine to ensure eg distributed actions are hooked up correctly.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234030172","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234030172","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234030172,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDAzMDE3Mg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-07-20T18:00:55Z","updated_at":"2016-07-20T18:00:55Z","author_association":"MEMBER","body":"Also note, we already have a multi node test that runs all the rest tests, but that is only with the core rest tests (not those for plugins/modules). Making it a standard part of rest testing (test on one node cluster, then test on two node cluster) would be good, and we could remove the multi node smoke test.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234037018","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234037018","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234037018,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDAzNzAxOA==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-07-20T18:24:09Z","updated_at":"2016-07-20T18:24:09Z","author_association":"CONTRIBUTOR","body":"I don't think integration tests should be randomized. It is a good approach for unit tests.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234070820","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234070820","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234070820,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDA3MDgyMA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-07-20T20:24:52Z","updated_at":"2016-07-20T20:24:52Z","author_association":"CONTRIBUTOR","body":"> I don't think integration tests should be randomized. It is a good approach for unit tests.\n\n++\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234250945","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234250945","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234250945,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDI1MDk0NQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-07-21T13:21:20Z","updated_at":"2016-07-21T13:21:20Z","author_association":"MEMBER","body":"> I don't think integration tests should be randomized. It is a good approach for unit tests.\n\nWe strive to make all our API work in multiple cluster setups - for example, with or without dedicated master nodes. I think it make sense to run the integration with all of those configurations and I don't think we need to test all of them all the time, or is that what you suggest? There is a combinatorial explosion issue here - dedicated coordinating nodes, dedicate ingest ndoes etc. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234252232","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234252232","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234252232,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDI1MjIzMg==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-07-21T13:26:23Z","updated_at":"2016-07-21T13:26:23Z","author_association":"CONTRIBUTOR","body":"I dont recommend using randomization for this purpose, myself. As far as there being too many possibilities, perhaps there shouldnt be so much complexity/so many damn settings :)\n\nI definitely don't think randomization it should be applied to integration tests: nobody wants to debug that. Keep integration tests as simple as possible.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234252570","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234252570","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234252570,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDI1MjU3MA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-07-21T13:27:45Z","updated_at":"2016-07-21T13:27:45Z","author_association":"CONTRIBUTOR","body":"> So I'm going to spend some time this afternoon putting together some REST level tests for Elasticsearch in Java using the its client, probably by reverting the REST changes I made in #19509 and redoing the checks as other tests.\n\nI added a few commits to #19509 that make it relatively simple to use the REST client to test Elasticsearch with java code. It feels like the right tool for the job of testing the new header proposed in that PR, mostly because not all clients expose headers at all. It might be the right tool for other similar jobs. Anyone interested in that (admittedly small portion of this conversation) please review over there.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234254351","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234254351","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234254351,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDI1NDM1MQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-07-21T13:34:34Z","updated_at":"2016-07-21T13:34:34Z","author_association":"CONTRIBUTOR","body":"If we aren't going to randomize while running the REST tests we should certainly run more than one node. That is a much more consistent test that things hook together.\n\nI think some of the point of my opening this issue is lost in the question of randomization. I'd like to point out that the REST tests also have significantly less strong assertions around things like in flight contexts leaking out of the test. `ESIntegTestCase` has a handful of similar assertions that are quite helpful.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234280047","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234280047","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234280047,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDI4MDA0Nw==","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2016-07-21T14:56:57Z","updated_at":"2016-07-21T14:56:57Z","author_association":"CONTRIBUTOR","body":"> If we aren't going to randomize while running the REST tests we should certainly run more than one node. That is a much more consistent test that things hook together.\n\n+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234285364","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234285364","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234285364,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDI4NTM2NA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-07-21T15:13:43Z","updated_at":"2016-07-21T15:13:43Z","author_association":"CONTRIBUTOR","body":"we do run `smoke-test-multinode` and `backwards-5.0` with multiple nodes I think we are doing ok here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234287839","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234287839","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234287839,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDI4NzgzOQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-07-21T15:21:50Z","updated_at":"2016-07-21T15:21:50Z","author_association":"CONTRIBUTOR","body":"`smoke-test-multinode` doesn't run _all_ the rest tests, just the ones from core, right? If we ran all rest tests with multiple nodes we could drop `smoke-test-multinode` I think.\n\nI'd like us to think about the search context leaks and whatever other things that `ESIntegTestCase` adds that I can't name off hand as well.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234295414","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234295414","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234295414,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDI5NTQxNA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-07-21T15:45:24Z","updated_at":"2016-07-21T15:45:24Z","author_association":"CONTRIBUTOR","body":"@nik9000 for stuff like this we still have `ESIntegTestCase`? we can still write stress tests in there etc? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234298330","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-234298330","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":234298330,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDI5ODMzMA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-07-21T15:54:29Z","updated_at":"2016-07-21T15:54:29Z","author_association":"CONTRIBUTOR","body":"I remember the hanging search context checker catching all kinds of little mistakes when I was working on stuff in the past. I don't recall exactly what, but I'm fairly sure it wasn't stress tests.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235732386","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-235732386","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":235732386,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTczMjM4Ng==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-07-27T21:50:05Z","updated_at":"2016-07-27T21:50:05Z","author_association":"CONTRIBUTOR","body":"Another thing we should think about along these lines: should we run the rest tests with assertions enabled on the cluster we're testing?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/263205076","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-263205076","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":263205076,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzIwNTA3Ng==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-11-28T07:55:07Z","updated_at":"2016-11-28T07:55:07Z","author_association":"MEMBER","body":"@nik9000 introduced the ESRestTestCase base class, that allows to send rest requests via java to an external cluster. What else do we want to do/change in our test infra?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/263295045","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-263295045","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":263295045,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzI5NTA0NQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-11-28T15:08:53Z","updated_at":"2016-11-28T15:08:53Z","author_association":"CONTRIBUTOR","body":"The two points in the description are still valid, I think. We only use a single node for rest tests by default and we don't have any of the fancy leak detection. If we're fine with losing those as we write more rest tests then we should close the issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299460767","html_url":"https://github.com/elastic/elasticsearch/issues/19517#issuecomment-299460767","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19517","id":299460767,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTQ2MDc2Nw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-05-05T13:12:10Z","updated_at":"2017-05-05T13:12:10Z","author_association":"MEMBER","body":"I think we are fine with the current limitations of our yaml tests. Closing.","performed_via_github_app":null}]