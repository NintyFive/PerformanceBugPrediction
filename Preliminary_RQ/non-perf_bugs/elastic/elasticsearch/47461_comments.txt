[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537572568","html_url":"https://github.com/elastic/elasticsearch/issues/47461#issuecomment-537572568","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47461","id":537572568,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzU3MjU2OA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2019-10-02T16:25:57Z","updated_at":"2019-10-02T16:25:57Z","author_association":"MEMBER","body":"`index.query.default_field` accept a list of fields since https://github.com/elastic/elasticsearch/pull/26320, would that solve your issue ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537572765","html_url":"https://github.com/elastic/elasticsearch/issues/47461#issuecomment-537572765","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47461","id":537572765,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzU3Mjc2NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-10-02T16:26:25Z","updated_at":"2019-10-02T16:26:25Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search (:Search/Search)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537646111","html_url":"https://github.com/elastic/elasticsearch/issues/47461#issuecomment-537646111","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47461","id":537646111,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzY0NjExMQ==","user":{"login":"raicast","id":20226556,"node_id":"MDQ6VXNlcjIwMjI2NTU2","avatar_url":"https://avatars3.githubusercontent.com/u/20226556?v=4","gravatar_id":"","url":"https://api.github.com/users/raicast","html_url":"https://github.com/raicast","followers_url":"https://api.github.com/users/raicast/followers","following_url":"https://api.github.com/users/raicast/following{/other_user}","gists_url":"https://api.github.com/users/raicast/gists{/gist_id}","starred_url":"https://api.github.com/users/raicast/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raicast/subscriptions","organizations_url":"https://api.github.com/users/raicast/orgs","repos_url":"https://api.github.com/users/raicast/repos","events_url":"https://api.github.com/users/raicast/events{/privacy}","received_events_url":"https://api.github.com/users/raicast/received_events","type":"User","site_admin":false},"created_at":"2019-10-02T19:35:23Z","updated_at":"2019-10-02T19:35:23Z","author_association":"NONE","body":"@jimczi It's better than nothing but what about performance (time, space)? E.g. if I have 100 fields in an index, specifying a list of all 100 (or 99) fields in `index.query.default_field` is equivalent to set it to `*`? \r\n\r\nBy the way, in many cases it would be easier to specify the few fields to be excluded (often initially defined and fixed) than specifying a long list of (and possibly dynamic) fields to be included. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537674107","html_url":"https://github.com/elastic/elasticsearch/issues/47461#issuecomment-537674107","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47461","id":537674107,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzY3NDEwNw==","user":{"login":"raicast","id":20226556,"node_id":"MDQ6VXNlcjIwMjI2NTU2","avatar_url":"https://avatars3.githubusercontent.com/u/20226556?v=4","gravatar_id":"","url":"https://api.github.com/users/raicast","html_url":"https://github.com/raicast","followers_url":"https://api.github.com/users/raicast/followers","following_url":"https://api.github.com/users/raicast/following{/other_user}","gists_url":"https://api.github.com/users/raicast/gists{/gist_id}","starred_url":"https://api.github.com/users/raicast/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raicast/subscriptions","organizations_url":"https://api.github.com/users/raicast/orgs","repos_url":"https://api.github.com/users/raicast/repos","events_url":"https://api.github.com/users/raicast/events{/privacy}","received_events_url":"https://api.github.com/users/raicast/received_events","type":"User","site_admin":false},"created_at":"2019-10-02T20:48:50Z","updated_at":"2019-10-02T20:53:06Z","author_association":"NONE","body":"It's not clear to me (I'm doing some experiments with ES 6.2 because I did not find a clear documentation)... is it possible to set `index.query.default_field` to a special value to match every fields except for specified fields that need to be excluded (e.g. using a regular expression)? \r\nE.g.:\r\n`\"index.query.default_field\": [\"my*\"]` => to match all and only fields starting with \"my\"\r\n`\"index.query.default_field\": [\"*\", \"-crn\"]` => to match all fields but excluding \"crn\"\r\n\r\nActually I do not understand if it is required to explicitly enumerate the full list of fields to take into account (with the only exception of `*`) or if there are some wild-cards and/or special characters to allow to select subsets of fields (it seems so but there is no documentation about it).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537675949","html_url":"https://github.com/elastic/elasticsearch/issues/47461#issuecomment-537675949","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47461","id":537675949,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzY3NTk0OQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2019-10-02T20:53:27Z","updated_at":"2019-10-02T20:53:27Z","author_association":"MEMBER","body":">  do not understand if now it is required to explicitly enumerate the full list of fields to take into account (with the only exception of *) or if there are some wild-cards and/or special characters to select subsets of fields (it seems so but there is no documentation about it).\r\n\r\nThe list accepts the same syntax than the `fields` option in `multi_match` or `query_string` query so simple wildcards are accepted (e.g: `[\"a*\", \"*_foo_*\", \"title\"]`)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537677437","html_url":"https://github.com/elastic/elasticsearch/issues/47461#issuecomment-537677437","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47461","id":537677437,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzY3NzQzNw==","user":{"login":"raicast","id":20226556,"node_id":"MDQ6VXNlcjIwMjI2NTU2","avatar_url":"https://avatars3.githubusercontent.com/u/20226556?v=4","gravatar_id":"","url":"https://api.github.com/users/raicast","html_url":"https://github.com/raicast","followers_url":"https://api.github.com/users/raicast/followers","following_url":"https://api.github.com/users/raicast/following{/other_user}","gists_url":"https://api.github.com/users/raicast/gists{/gist_id}","starred_url":"https://api.github.com/users/raicast/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raicast/subscriptions","organizations_url":"https://api.github.com/users/raicast/orgs","repos_url":"https://api.github.com/users/raicast/repos","events_url":"https://api.github.com/users/raicast/events{/privacy}","received_events_url":"https://api.github.com/users/raicast/received_events","type":"User","site_admin":false},"created_at":"2019-10-02T20:57:23Z","updated_at":"2019-10-02T20:57:23Z","author_association":"NONE","body":"So, there is no way to exclude fields (e.g. \"-crn\" or \"^crn\")? This would be useful...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537682500","html_url":"https://github.com/elastic/elasticsearch/issues/47461#issuecomment-537682500","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47461","id":537682500,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzY4MjUwMA==","user":{"login":"raicast","id":20226556,"node_id":"MDQ6VXNlcjIwMjI2NTU2","avatar_url":"https://avatars3.githubusercontent.com/u/20226556?v=4","gravatar_id":"","url":"https://api.github.com/users/raicast","html_url":"https://github.com/raicast","followers_url":"https://api.github.com/users/raicast/followers","following_url":"https://api.github.com/users/raicast/following{/other_user}","gists_url":"https://api.github.com/users/raicast/gists{/gist_id}","starred_url":"https://api.github.com/users/raicast/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raicast/subscriptions","organizations_url":"https://api.github.com/users/raicast/orgs","repos_url":"https://api.github.com/users/raicast/repos","events_url":"https://api.github.com/users/raicast/events{/privacy}","received_events_url":"https://api.github.com/users/raicast/received_events","type":"User","site_admin":false},"created_at":"2019-10-02T21:10:29Z","updated_at":"2019-10-02T21:10:29Z","author_association":"NONE","body":"If I have a field with this mapping:\r\n```\r\n          \"myfield\": {\r\n            \"type\": \"text\",\r\n            \"index\": false\r\n          },\r\n```\r\nand the index setting: \r\n```\r\n{\r\n  \"settings\": {\r\n    \"index.query.default_field\": [\"my*\"]\r\n  }\r\n}\r\n```\r\nthen I always get an error when performing any `query_string` query without specifying a prefix:\r\n```\r\n{\r\n    \"query\": {\r\n        \"query_string\" : {\r\n           \"query\" : \"test\"\r\n        }\r\n    }\r\n}\r\n```\r\nthis is because: \r\n```\r\n          \"caused_by\": {\r\n            \"type\": \"illegal_argument_exception\",\r\n            \"reason\": \"Cannot search on field [myfield] since it is not indexed.\"\r\n          }\r\n```\r\nThis is just an example (maybe a bug?) that shows the difficulty and problems without having something similar to the old `include_in_all`... ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537686787","html_url":"https://github.com/elastic/elasticsearch/issues/47461#issuecomment-537686787","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47461","id":537686787,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzY4Njc4Nw==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2019-10-02T21:21:50Z","updated_at":"2019-10-02T21:21:50Z","author_association":"MEMBER","body":"By default the `query_string` query is lenient only if no fields are provided and the default field in the settings is left unchanged (`*`). You can control the leniency on a per request basis by setting `\"lenient\": true` to ignore these errors if you have a custom list of fields, or on an entire index by setting the dynamic index setting `index.query_string.lenient` to true.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537714829","html_url":"https://github.com/elastic/elasticsearch/issues/47461#issuecomment-537714829","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47461","id":537714829,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzcxNDgyOQ==","user":{"login":"raicast","id":20226556,"node_id":"MDQ6VXNlcjIwMjI2NTU2","avatar_url":"https://avatars3.githubusercontent.com/u/20226556?v=4","gravatar_id":"","url":"https://api.github.com/users/raicast","html_url":"https://github.com/raicast","followers_url":"https://api.github.com/users/raicast/followers","following_url":"https://api.github.com/users/raicast/following{/other_user}","gists_url":"https://api.github.com/users/raicast/gists{/gist_id}","starred_url":"https://api.github.com/users/raicast/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raicast/subscriptions","organizations_url":"https://api.github.com/users/raicast/orgs","repos_url":"https://api.github.com/users/raicast/repos","events_url":"https://api.github.com/users/raicast/events{/privacy}","received_events_url":"https://api.github.com/users/raicast/received_events","type":"User","site_admin":false},"created_at":"2019-10-02T22:53:56Z","updated_at":"2019-10-02T22:53:56Z","author_association":"NONE","body":"@jimczi But to understand the impact on the performance: it's better to set a list of 100 fields in `index.query.default_field` (i.e. an array of a long number of field names) or is better to add in the mapping `copy_to: my_all` to all those 100 fields and set `index.query.default_field: my_all`? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/538461780","html_url":"https://github.com/elastic/elasticsearch/issues/47461#issuecomment-538461780","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47461","id":538461780,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODQ2MTc4MA==","user":{"login":"raicast","id":20226556,"node_id":"MDQ6VXNlcjIwMjI2NTU2","avatar_url":"https://avatars3.githubusercontent.com/u/20226556?v=4","gravatar_id":"","url":"https://api.github.com/users/raicast","html_url":"https://github.com/raicast","followers_url":"https://api.github.com/users/raicast/followers","following_url":"https://api.github.com/users/raicast/following{/other_user}","gists_url":"https://api.github.com/users/raicast/gists{/gist_id}","starred_url":"https://api.github.com/users/raicast/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raicast/subscriptions","organizations_url":"https://api.github.com/users/raicast/orgs","repos_url":"https://api.github.com/users/raicast/repos","events_url":"https://api.github.com/users/raicast/events{/privacy}","received_events_url":"https://api.github.com/users/raicast/received_events","type":"User","site_admin":false},"created_at":"2019-10-04T16:08:17Z","updated_at":"2019-10-04T16:08:17Z","author_association":"NONE","body":"I think that the feature is important if there is a significant difference in the performance. Can you provide some info about the last question?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/538470005","html_url":"https://github.com/elastic/elasticsearch/issues/47461#issuecomment-538470005","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47461","id":538470005,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODQ3MDAwNQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2019-10-04T16:31:37Z","updated_at":"2019-10-04T16:31:37Z","author_association":"MEMBER","body":"The parsing and resolving of the fields in the query shouldn't make a big difference. If the resulting query is the same it shouldn't make a difference to select fields via a wildcard or an exclusion list. \r\nIf you have a list of 100 fields it would be faster to create one big copy field at index time. \r\n\r\nWe try to keep GitHub focused on development efforts like bug reports and feature requests so I hope you don't mind if I close this issue. I'd be happy to continue the discussion in the [forum](https://discuss.elastic.co/t/) which is more appropriate for these kind of questions.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/565184420","html_url":"https://github.com/elastic/elasticsearch/issues/47461#issuecomment-565184420","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47461","id":565184420,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTE4NDQyMA==","user":{"login":"androidkencai","id":1441830,"node_id":"MDQ6VXNlcjE0NDE4MzA=","avatar_url":"https://avatars2.githubusercontent.com/u/1441830?v=4","gravatar_id":"","url":"https://api.github.com/users/androidkencai","html_url":"https://github.com/androidkencai","followers_url":"https://api.github.com/users/androidkencai/followers","following_url":"https://api.github.com/users/androidkencai/following{/other_user}","gists_url":"https://api.github.com/users/androidkencai/gists{/gist_id}","starred_url":"https://api.github.com/users/androidkencai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/androidkencai/subscriptions","organizations_url":"https://api.github.com/users/androidkencai/orgs","repos_url":"https://api.github.com/users/androidkencai/repos","events_url":"https://api.github.com/users/androidkencai/events{/privacy}","received_events_url":"https://api.github.com/users/androidkencai/received_events","type":"User","site_admin":false},"created_at":"2019-12-12T20:59:41Z","updated_at":"2019-12-13T02:35:56Z","author_association":"NONE","body":"@jimczi Sorry for replying here, understood it should continue the discussion in the forum, but I couldn't find the continued topic there. \r\n\r\nI am facing the same issue here -- need to do exclude in \"index.query.default_field\" and tried `\"index.query.default_field\": [\"-entry_time\"]` to have the field `\"entry_time\": {\"type\": \"date\", \"format\": \"strict_date_optional_time||epoch_millis\"}` excluded from query. but didn't seem to work.  whitelisting all the fields doesn't work as we want to exclude <10 fields from total 500+ fields. `copy_to` doesn't work either unfortunately","performed_via_github_app":null}]