[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/10694377","html_url":"https://github.com/elastic/elasticsearch/issues/2443#issuecomment-10694377","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2443","id":10694377,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNjk0Mzc3","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2012-11-25T15:12:46Z","updated_at":"2012-11-25T15:12:46Z","author_association":"MEMBER","body":"You can just use indices instead of shards and aliases instead of indices. Every 1000 users just create a new index and add it to the alias of all indices with user info. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/10694458","html_url":"https://github.com/elastic/elasticsearch/issues/2443#issuecomment-10694458","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2443","id":10694458,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNjk0NDU4","user":{"login":"wojons","id":139396,"node_id":"MDQ6VXNlcjEzOTM5Ng==","avatar_url":"https://avatars2.githubusercontent.com/u/139396?v=4","gravatar_id":"","url":"https://api.github.com/users/wojons","html_url":"https://github.com/wojons","followers_url":"https://api.github.com/users/wojons/followers","following_url":"https://api.github.com/users/wojons/following{/other_user}","gists_url":"https://api.github.com/users/wojons/gists{/gist_id}","starred_url":"https://api.github.com/users/wojons/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojons/subscriptions","organizations_url":"https://api.github.com/users/wojons/orgs","repos_url":"https://api.github.com/users/wojons/repos","events_url":"https://api.github.com/users/wojons/events{/privacy}","received_events_url":"https://api.github.com/users/wojons/received_events","type":"User","site_admin":false},"created_at":"2012-11-25T15:20:00Z","updated_at":"2012-11-25T15:20:00Z","author_association":"NONE","body":"That was the first thought that I was having but i was thinking that the price of a shard is less then the price of an index but I could be wrong. The other reason why I was suggesting this was for a multi-client logging system. It would be nice to have 1 index per week/month of logs and just add shards when i get 1000 new users instead of having 1 index per week of logs per 1000 users. I feel like tat code will get pretty hard to handle generating all the alieses for something like.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/10695036","html_url":"https://github.com/elastic/elasticsearch/issues/2443#issuecomment-10695036","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2443","id":10695036,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNjk1MDM2","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2012-11-25T16:13:10Z","updated_at":"2012-11-25T16:13:10Z","author_association":"CONTRIBUTOR","body":">  I feel like tat code will get pretty hard to handle generating all the alieses for something like.\n\n@wojons, no, [not at all](https://github.com/karmi/tire/blob/master/test/integration/index_aliases_test.rb#L66-L120).\n\n@imotov is right that the proper way how to look at it is to free your mind from fixating on the \"index\" as some static entity. Create indices with 1 shard when you're starting have little users. When you start to gain more users, just create an index with more number of shards, and add it to the alias.\n\nThat way it's a) opaque to your application (it just hits whatever virtual \"index\" you tell it), b) you can scale with the demand -- and not pick up some magical number of shards from the start...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/10695354","html_url":"https://github.com/elastic/elasticsearch/issues/2443#issuecomment-10695354","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2443","id":10695354,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNjk1MzU0","user":{"login":"wojons","id":139396,"node_id":"MDQ6VXNlcjEzOTM5Ng==","avatar_url":"https://avatars2.githubusercontent.com/u/139396?v=4","gravatar_id":"","url":"https://api.github.com/users/wojons","html_url":"https://github.com/wojons","followers_url":"https://api.github.com/users/wojons/followers","following_url":"https://api.github.com/users/wojons/following{/other_user}","gists_url":"https://api.github.com/users/wojons/gists{/gist_id}","starred_url":"https://api.github.com/users/wojons/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojons/subscriptions","organizations_url":"https://api.github.com/users/wojons/orgs","repos_url":"https://api.github.com/users/wojons/repos","events_url":"https://api.github.com/users/wojons/events{/privacy}","received_events_url":"https://api.github.com/users/wojons/received_events","type":"User","site_admin":false},"created_at":"2012-11-25T16:42:28Z","updated_at":"2012-11-25T16:42:28Z","author_association":"NONE","body":"Okay that sounds like it could work i would like to know how much an alies cost in the system if i have +1 million alies on the system how does that effect my performance. Can i put an alies on an alies there for it makes managing them easier.? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/10695467","html_url":"https://github.com/elastic/elasticsearch/issues/2443#issuecomment-10695467","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2443","id":10695467,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNjk1NDY3","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2012-11-25T16:54:21Z","updated_at":"2012-11-25T16:54:21Z","author_association":"CONTRIBUTOR","body":"> if I have +1 million alies on the system how does that effect my performance (...)\n\nLess then +1 million of indices...\n\n> Can i put an alies on an alies there for it makes managing them easier?\n\nNo, you can't point and alias to another alias. The API for alias management is very easy to work with.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/10695662","html_url":"https://github.com/elastic/elasticsearch/issues/2443#issuecomment-10695662","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2443","id":10695662,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNjk1NjYy","user":{"login":"wojons","id":139396,"node_id":"MDQ6VXNlcjEzOTM5Ng==","avatar_url":"https://avatars2.githubusercontent.com/u/139396?v=4","gravatar_id":"","url":"https://api.github.com/users/wojons","html_url":"https://github.com/wojons","followers_url":"https://api.github.com/users/wojons/followers","following_url":"https://api.github.com/users/wojons/following{/other_user}","gists_url":"https://api.github.com/users/wojons/gists{/gist_id}","starred_url":"https://api.github.com/users/wojons/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojons/subscriptions","organizations_url":"https://api.github.com/users/wojons/orgs","repos_url":"https://api.github.com/users/wojons/repos","events_url":"https://api.github.com/users/wojons/events{/privacy}","received_events_url":"https://api.github.com/users/wojons/received_events","type":"User","site_admin":false},"created_at":"2012-11-25T17:10:57Z","updated_at":"2012-11-25T17:10:57Z","author_association":"NONE","body":"When you say less than 1 million indeces you mean a lot less or a little less I am going to guess a lot. I is there anyway the system can be changed to allow pointing one alias to another I looked at how easy the is to use I am more worried about as the system grows and it's time to change the alias mapping its going to take modifying maybe 3 to 5 alias per user in a short period of time. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/10696355","html_url":"https://github.com/elastic/elasticsearch/issues/2443#issuecomment-10696355","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2443","id":10696355,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNjk2MzU1","user":{"login":"hazzadous","id":128561,"node_id":"MDQ6VXNlcjEyODU2MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/128561?v=4","gravatar_id":"","url":"https://api.github.com/users/hazzadous","html_url":"https://github.com/hazzadous","followers_url":"https://api.github.com/users/hazzadous/followers","following_url":"https://api.github.com/users/hazzadous/following{/other_user}","gists_url":"https://api.github.com/users/hazzadous/gists{/gist_id}","starred_url":"https://api.github.com/users/hazzadous/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hazzadous/subscriptions","organizations_url":"https://api.github.com/users/hazzadous/orgs","repos_url":"https://api.github.com/users/hazzadous/repos","events_url":"https://api.github.com/users/hazzadous/events{/privacy}","received_events_url":"https://api.github.com/users/hazzadous/received_events","type":"User","site_admin":false},"created_at":"2012-11-25T18:11:53Z","updated_at":"2012-11-25T18:12:43Z","author_association":"NONE","body":"To go back to your original suggestion about adding shards to an index, I'm not sure how the routing internals work but I should imagine its based on being able to hash against the number of shards there are in the index.  Adding a shard to an index would obviously invalidate all previous routing within that index.  You'd have to reindex all data in that index to a larger sharded index to repartition your data.\n\nI wouldn't suggest adding aliases per user, just use routing values in your requests rather than adding implicit aliases for these.  You'd only be talking about having:\n- an alias that points to all indicies with which you can query your entire dataset.  However, searches over this will hit #indices shards when using a routing value.\n- one for the most recent index, to which you use for indexing operations\n- another pointing to indicies from the last week, thereby reducing the number of shards you hit.  Given that you're indexing logging data it makes a lot of sense to structure it like this, and gives you lots of ways to optimize your operations over your data.  You could for instance reindex your historical data into an index with larger shard count...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/10701527","html_url":"https://github.com/elastic/elasticsearch/issues/2443#issuecomment-10701527","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2443","id":10701527,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNzAxNTI3","user":{"login":"wojons","id":139396,"node_id":"MDQ6VXNlcjEzOTM5Ng==","avatar_url":"https://avatars2.githubusercontent.com/u/139396?v=4","gravatar_id":"","url":"https://api.github.com/users/wojons","html_url":"https://github.com/wojons","followers_url":"https://api.github.com/users/wojons/followers","following_url":"https://api.github.com/users/wojons/following{/other_user}","gists_url":"https://api.github.com/users/wojons/gists{/gist_id}","starred_url":"https://api.github.com/users/wojons/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojons/subscriptions","organizations_url":"https://api.github.com/users/wojons/orgs","repos_url":"https://api.github.com/users/wojons/repos","events_url":"https://api.github.com/users/wojons/events{/privacy}","received_events_url":"https://api.github.com/users/wojons/received_events","type":"User","site_admin":false},"created_at":"2012-11-26T01:05:39Z","updated_at":"2012-11-26T01:05:39Z","author_association":"NONE","body":"Okay that makes sense that I put a few aliases in place and just use routes\nwhen working with an exact user. This does mean an extra database look up\ndepending on how i set it up. Now I was looking into having larger users\nhave more than one route. This way a users request can end up across a few\nshards, i wanted to know if there is anyway to setup the route so i can\ncontrol that it's on different shards then it's friend. I am questing it\nmay just be a mod of the number of shards on the route.\n\nAlso i see the point on the issue of adding a new shard would not work very\nwell, is there anyway that can happen when optimizing an index let's look\nat it the other way, I have some very old data its not getting accessed\nvery much and I don't mind it not being accessible for hours maybe even a\nfew days, just so I can lower the shard count while optimizing the index\nand maybe even move it to my archive machine with spinning disks instead of\nssd\nOn Nov 25, 2012 10:12 AM, \"hazzadous\" notifications@github.com wrote:\n\n> To go back to your original suggestion about adding shards to an index,\n> I'm not sure how the routing internals work but I should imagine its based\n> on being able to hash against the number of shards there are in the index.\n> Adding a shard to an index would obviously invalidate all previous routing\n> within that index. You'd have to reindex all data in that index to a larger\n> sharded index to repartition you're data.\n> \n> I wouldn't suggest adding aliases per user, just use routing values in\n> your requests rather than adding implicit aliases for these. You'd only be\n> talking about having:\n> - an alias that points to all indicies with which you can query your\n>   entire dataset. However, searches over this will hit #indices shards when\n>   using a routing value.\n> - one for the most recent index, to which you use for indexing\n>   operations\n> - another pointing to indicies from the last week, thereby reducing\n>   the number of shards you hit. Given that you're indexing logging data it\n>   makes a lot of sense to structure it like this, and gives you lots of ways\n>   to optimize your operations over your data. You could for instance reindex\n>   your historical data into an index with larger shard count...\n>   \n>   —\n>   Reply to this email directly or view it on GitHubhttps://github.com/elasticsearch/elasticsearch/issues/2443#issuecomment-10696355.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20984394","html_url":"https://github.com/elastic/elasticsearch/issues/2443#issuecomment-20984394","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2443","id":20984394,"node_id":"MDEyOklzc3VlQ29tbWVudDIwOTg0Mzk0","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-07-15T17:08:49Z","updated_at":"2013-07-15T17:08:49Z","author_association":"MEMBER","body":"closing this one as it is a bit stale and not an issue, but rather a helping thread. Pleae use the google group next time, as simply more eyes will have a look there...\n","performed_via_github_app":null}]