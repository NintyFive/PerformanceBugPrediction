{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/13059","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13059/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13059/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13059/events","html_url":"https://github.com/elastic/elasticsearch/issues/13059","id":102570030,"node_id":"MDU6SXNzdWUxMDI1NzAwMzA=","number":13059,"title":"Rethink plugin modules and services","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"labels":[{"id":146832994,"node_id":"MDU6TGFiZWwxNDY4MzI5OTQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Plugins","name":":Core/Infra/Plugins","color":"0e8a16","default":false,"description":"Plugin API and infrastructure"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-08-22T22:01:14Z","updated_at":"2016-10-06T00:57:15Z","closed_at":"2016-10-06T00:57:15Z","author_association":"MEMBER","active_lock_reason":null,"body":"We currently allow creating modules per node, per index, and per shard. It is unclear if any plugins actually use this, or conceivably need it (see https://github.com/elastic/elasticsearch/pull/13034#discussion_r37699770).\n\nThere are two reasons for modules:\n- Some extension points require constructing a class which gets an injected existing service to add custom functionality (for example, adding custom mapping types). This is being fixed by moving all extension points to be handled through existing modules.\n- To create a new service, the new service must be bound in a module, and then returned with `nodeServices()`, `indexServices()` or `shardServices()`.\n\nWe should simplify the latter, and in general think how we could provide the ability to add services without injection. IMO this would mean clearly defining what services each type of extension has access to. For example, discovery plugins probably need access to NetworkService, but do they really need to be allowed to grab RepositoryService in their ctor?\n","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}