[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265821919","html_url":"https://github.com/elastic/elasticsearch/issues/22056#issuecomment-265821919","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22056","id":265821919,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTgyMTkxOQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-12-08T18:52:09Z","updated_at":"2016-12-08T18:52:09Z","author_association":"MEMBER","body":"You can use the containsKey method on the doc to see if the field exists (`doc` implements `Map`):\r\n```\r\ndoc.containsKey('foo') ? doc['foo'] : /* some default for indexes without foo */\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265845411","html_url":"https://github.com/elastic/elasticsearch/issues/22056#issuecomment-265845411","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22056","id":265845411,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTg0NTQxMQ==","user":{"login":"Bargs","id":6239176,"node_id":"MDQ6VXNlcjYyMzkxNzY=","avatar_url":"https://avatars3.githubusercontent.com/u/6239176?v=4","gravatar_id":"","url":"https://api.github.com/users/Bargs","html_url":"https://github.com/Bargs","followers_url":"https://api.github.com/users/Bargs/followers","following_url":"https://api.github.com/users/Bargs/following{/other_user}","gists_url":"https://api.github.com/users/Bargs/gists{/gist_id}","starred_url":"https://api.github.com/users/Bargs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bargs/subscriptions","organizations_url":"https://api.github.com/users/Bargs/orgs","repos_url":"https://api.github.com/users/Bargs/repos","events_url":"https://api.github.com/users/Bargs/events{/privacy}","received_events_url":"https://api.github.com/users/Bargs/received_events","type":"User","site_admin":false},"created_at":"2016-12-08T20:24:33Z","updated_at":"2016-12-08T20:24:33Z","author_association":"NONE","body":"Ah interesting, is that documented anywhere? My natural inclination was to try a null check (`doc['foo'] === null ? ...`) but that still throws an error. I suspect other devs would expect a null check to suffice as well, it's odd for a missing key to throw an error instead of simply returning null. Is that something you might consider changing?\r\n\r\nAlso, is there an equivalent to `containsKey` when using lucene expressions?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265852771","html_url":"https://github.com/elastic/elasticsearch/issues/22056#issuecomment-265852771","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22056","id":265852771,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTg1Mjc3MQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-12-08T20:55:25Z","updated_at":"2016-12-08T20:55:25Z","author_association":"CONTRIBUTOR","body":"> Is that something you might consider changing?\r\n\r\nThe nice thing about throwing the exception is that you know *why* the you got null. I *think* this one is probably best solved with documented examples or a change to the error message in the exception or both.\r\n\r\nI don't know about expressions though.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265856392","html_url":"https://github.com/elastic/elasticsearch/issues/22056#issuecomment-265856392","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22056","id":265856392,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTg1NjM5Mg==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2016-12-08T21:10:19Z","updated_at":"2016-12-08T21:15:49Z","author_association":"CONTRIBUTOR","body":"I can't remember off the top of my head for expressions, but if I had to guess it will just be 0.0 since expressions assumes all values are doubles and can't represent null.\r\n\r\nEdit: I take that back.  I think it will be a run-time error where it can't bind the appropriate field.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265859359","html_url":"https://github.com/elastic/elasticsearch/issues/22056#issuecomment-265859359","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22056","id":265859359,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTg1OTM1OQ==","user":{"login":"Bargs","id":6239176,"node_id":"MDQ6VXNlcjYyMzkxNzY=","avatar_url":"https://avatars3.githubusercontent.com/u/6239176?v=4","gravatar_id":"","url":"https://api.github.com/users/Bargs","html_url":"https://github.com/Bargs","followers_url":"https://api.github.com/users/Bargs/followers","following_url":"https://api.github.com/users/Bargs/following{/other_user}","gists_url":"https://api.github.com/users/Bargs/gists{/gist_id}","starred_url":"https://api.github.com/users/Bargs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bargs/subscriptions","organizations_url":"https://api.github.com/users/Bargs/orgs","repos_url":"https://api.github.com/users/Bargs/repos","events_url":"https://api.github.com/users/Bargs/events{/privacy}","received_events_url":"https://api.github.com/users/Bargs/received_events","type":"User","site_admin":false},"created_at":"2016-12-08T21:22:36Z","updated_at":"2016-12-08T21:22:36Z","author_association":"NONE","body":"@jdconrad I'm not sure I follow. When I write an expression script that accesses a field with no mapping in the index, I get the same error, not a value of 0.0 or null.\r\n\r\n@nik9000 Re-reading Ryan's comment I realized he mentioned that `doc` implements `Map`. Out of curiosity I tried a script like `doc.get('foo')` where foo has no mapping. I got the same error about missing mappings. Doesn't this break Map's contract, which specifies that `get` should return `null` if the map contains no mapping for a given key?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265860018","html_url":"https://github.com/elastic/elasticsearch/issues/22056#issuecomment-265860018","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22056","id":265860018,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTg2MDAxOA==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2016-12-08T21:25:21Z","updated_at":"2016-12-08T21:26:09Z","author_association":"CONTRIBUTOR","body":"Yes, my first comment was incorrect about expressions, hence the edit :)\r\n\r\nAll the 'doc' classes extend Map, and the get method is overridden to have that error instead of returning null.  Using containsKey will use the default Map method, so the error won't appear.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265894609","html_url":"https://github.com/elastic/elasticsearch/issues/22056#issuecomment-265894609","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22056","id":265894609,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTg5NDYwOQ==","user":{"login":"Bargs","id":6239176,"node_id":"MDQ6VXNlcjYyMzkxNzY=","avatar_url":"https://avatars3.githubusercontent.com/u/6239176?v=4","gravatar_id":"","url":"https://api.github.com/users/Bargs","html_url":"https://github.com/Bargs","followers_url":"https://api.github.com/users/Bargs/followers","following_url":"https://api.github.com/users/Bargs/following{/other_user}","gists_url":"https://api.github.com/users/Bargs/gists{/gist_id}","starred_url":"https://api.github.com/users/Bargs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bargs/subscriptions","organizations_url":"https://api.github.com/users/Bargs/orgs","repos_url":"https://api.github.com/users/Bargs/repos","events_url":"https://api.github.com/users/Bargs/events{/privacy}","received_events_url":"https://api.github.com/users/Bargs/received_events","type":"User","site_admin":false},"created_at":"2016-12-09T00:09:45Z","updated_at":"2016-12-09T00:09:45Z","author_association":"NONE","body":"Ah, I missed the edit :)\r\n\r\nWell, I'd be ok with just improving the docs, throwing an error on a missing key just felt a little strange to me. It would be nice if we had a way to handle this gracefully with expressions as well though.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/266127372","html_url":"https://github.com/elastic/elasticsearch/issues/22056#issuecomment-266127372","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22056","id":266127372,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjEyNzM3Mg==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2016-12-09T21:24:04Z","updated_at":"2016-12-09T21:24:04Z","author_association":"CONTRIBUTOR","body":"Agree completely about the documentation.  It's on a long list of things to help with scripting.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/320845979","html_url":"https://github.com/elastic/elasticsearch/issues/22056#issuecomment-320845979","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22056","id":320845979,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMDg0NTk3OQ==","user":{"login":"zyong812","id":11305113,"node_id":"MDQ6VXNlcjExMzA1MTEz","avatar_url":"https://avatars1.githubusercontent.com/u/11305113?v=4","gravatar_id":"","url":"https://api.github.com/users/zyong812","html_url":"https://github.com/zyong812","followers_url":"https://api.github.com/users/zyong812/followers","following_url":"https://api.github.com/users/zyong812/following{/other_user}","gists_url":"https://api.github.com/users/zyong812/gists{/gist_id}","starred_url":"https://api.github.com/users/zyong812/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyong812/subscriptions","organizations_url":"https://api.github.com/users/zyong812/orgs","repos_url":"https://api.github.com/users/zyong812/repos","events_url":"https://api.github.com/users/zyong812/events{/privacy}","received_events_url":"https://api.github.com/users/zyong812/received_events","type":"User","site_admin":false},"created_at":"2017-08-08T04:20:13Z","updated_at":"2017-08-08T04:20:13Z","author_association":"NONE","body":"Nice, this has solved my problem. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372782287","html_url":"https://github.com/elastic/elasticsearch/issues/22056#issuecomment-372782287","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22056","id":372782287,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mjc4MjI4Nw==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2018-03-13T19:03:53Z","updated_at":"2018-03-13T19:03:53Z","author_association":"CONTRIBUTOR","body":"This just needs to be part of the documentation update.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387028206","html_url":"https://github.com/elastic/elasticsearch/issues/22056#issuecomment-387028206","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22056","id":387028206,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzAyODIwNg==","user":{"login":"kripafixstream","id":19481256,"node_id":"MDQ6VXNlcjE5NDgxMjU2","avatar_url":"https://avatars0.githubusercontent.com/u/19481256?v=4","gravatar_id":"","url":"https://api.github.com/users/kripafixstream","html_url":"https://github.com/kripafixstream","followers_url":"https://api.github.com/users/kripafixstream/followers","following_url":"https://api.github.com/users/kripafixstream/following{/other_user}","gists_url":"https://api.github.com/users/kripafixstream/gists{/gist_id}","starred_url":"https://api.github.com/users/kripafixstream/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kripafixstream/subscriptions","organizations_url":"https://api.github.com/users/kripafixstream/orgs","repos_url":"https://api.github.com/users/kripafixstream/repos","events_url":"https://api.github.com/users/kripafixstream/events{/privacy}","received_events_url":"https://api.github.com/users/kripafixstream/received_events","type":"User","site_admin":false},"created_at":"2018-05-07T10:46:36Z","updated_at":"2018-05-07T10:46:36Z","author_association":"NONE","body":"Thanks so much this really help solve my problem !!!!","performed_via_github_app":null}]