{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26426","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26426/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26426/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26426/events","html_url":"https://github.com/elastic/elasticsearch/issues/26426","id":253794031,"node_id":"MDU6SXNzdWUyNTM3OTQwMzE=","number":26426,"title":"Kibana unable to connect to Elasticsearch even when ssl keys/certs passed in as env variables","user":{"login":"ocofaigh","id":29608224,"node_id":"MDQ6VXNlcjI5NjA4MjI0","avatar_url":"https://avatars2.githubusercontent.com/u/29608224?v=4","gravatar_id":"","url":"https://api.github.com/users/ocofaigh","html_url":"https://github.com/ocofaigh","followers_url":"https://api.github.com/users/ocofaigh/followers","following_url":"https://api.github.com/users/ocofaigh/following{/other_user}","gists_url":"https://api.github.com/users/ocofaigh/gists{/gist_id}","starred_url":"https://api.github.com/users/ocofaigh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ocofaigh/subscriptions","organizations_url":"https://api.github.com/users/ocofaigh/orgs","repos_url":"https://api.github.com/users/ocofaigh/repos","events_url":"https://api.github.com/users/ocofaigh/events{/privacy}","received_events_url":"https://api.github.com/users/ocofaigh/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-08-29T20:29:20Z","updated_at":"2017-08-29T20:34:56Z","closed_at":"2017-08-29T20:34:48Z","author_association":"NONE","active_lock_reason":null,"body":"**Kibana version**: 5.5.2\r\n\r\n**Elasticsearch version**: 2.4.1\r\n\r\n**Server OS version**: Red Hat Enterprise Linux Server release 7.4 (Maipo)\r\n\r\n**Browser version**: n/a\r\n\r\n**Browser OS version**: n/a\r\n\r\n**Original install method (e.g. download page, yum, from source, etc.)**: docker pull kibana:latest\r\n\r\n**Description of the problem including expected versus actual behavior**: Unable to connect to Elasticsearch at https://<ip_address>:8743\r\nI understand that ES is now proxied by an nginx instance running on the master node alongside ES. It runs on port 8743. This nginx instance has keys/certs that are now needed to get kibana to connect successfully. I was able to get them from the the nginx instance in order to pass in as enviornment variables to the docker run command. But this does not seem to be working. Kibana still cannot connect to ES.\r\n\r\n**Steps to reproduce**:\r\n 1. `docker pull kibana:latest`\r\n 2. Get the docker container id: \r\n![image](https://user-images.githubusercontent.com/29608224/29836440-2b506a52-8ced-11e7-8d0d-680a957da3d9.png)\r\n 3. Grab the keys and certs from the docker container, placing them in /tmp: \r\n`docker cp $id:/etc/cfc/conf /tmp/kibana`\r\n4. Docker run Kibana, passing in the keys/certs as env variables:\r\n`docker run -d --name kibana -p 5601:5601 -e ELASTICSEARCH_URL=\"https://<ip_address>:8743\" -e ELASTICSEARCH_SSL_CERT=\"/tmp/kibana/conf/es/server.pem\" -e ELASTICSEARCH_SSL_KEY=\"/tmp/kibana/conf/es/server-key.pem\" -e ELASTICSEARCH_SSL_VERIFY=\"false\" -e ELASTICSEARCH_SSL_CA=\"/tmp/kibana/conf/es/ca.pem\" kibana:latest`\r\n5. Log into kibana dashbaord - Unable to connect to Elasticsearch at https://<ip_address>:8743\r\n\r\n**Errors in browser console (if relevant)**: Unable to connect to Elasticsearch at https://<ip_address>:8743\r\n\r\n**Provide logs and/or server output (if relevant)**:\r\n[kibana_latest_logs.txt](https://github.com/elastic/elasticsearch/files/1261638/kibana_latest_logs.txt)\r\n (I have replaced the IP address of the server with <ip_address>)\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}