[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/526850218","html_url":"https://github.com/elastic/elasticsearch/issues/46205#issuecomment-526850218","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46205","id":526850218,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjg1MDIxOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-08-31T17:28:23Z","updated_at":"2019-08-31T17:28:23Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/527039494","html_url":"https://github.com/elastic/elasticsearch/issues/46205#issuecomment-527039494","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46205","id":527039494,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzAzOTQ5NA==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-09-02T07:42:49Z","updated_at":"2019-09-02T07:43:52Z","author_association":"MEMBER","body":"@dakrone is there a specific reason these tests have to be REST tests in the first place? Can we maybe just make them `ESIntegTestCase` tests and use `MockRepository` like we do to test similar things in ES core?\r\nPorting tests to that would be easier and give us more stable tests than trying to fix the abort logic (which might be worth while in and of itself but def. isn't so trivial for now).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/527485227","html_url":"https://github.com/elastic/elasticsearch/issues/46205#issuecomment-527485227","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46205","id":527485227,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzQ4NTIyNw==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2019-09-03T14:31:56Z","updated_at":"2019-09-03T14:31:56Z","author_association":"MEMBER","body":"@original-brownbear the reason they're REST tests is the general recommendation to move away from transport-client based tests and prefer REST-based tests. I haven't used `MockRepository` before, but it appears that it would support what we need with its `block*`/`unblock` methods.\r\n\r\nIf we're okay with adding a new feature relying on `ESIntegTestCase`, then we can move the tests to be transport-based.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/527486888","html_url":"https://github.com/elastic/elasticsearch/issues/46205#issuecomment-527486888","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46205","id":527486888,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzQ4Njg4OA==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-09-03T14:35:32Z","updated_at":"2019-09-03T14:35:32Z","author_association":"MEMBER","body":"@dakrone I think it's to depend on `EsIntegTestCase` here. You can still get coverage of the REST layer by other tests, but setting up the blocking safely in these YAML tests is hard.\r\n\r\nAssuming we go ahead with this, want me to port these tests or do you want to do it? :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/527499461","html_url":"https://github.com/elastic/elasticsearch/issues/46205#issuecomment-527499461","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46205","id":527499461,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzQ5OTQ2MQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2019-09-03T15:03:33Z","updated_at":"2019-09-03T15:03:33Z","author_association":"MEMBER","body":"@original-brownbear not sure I follow where you are getting YAML from? None of these are YAML tests?\r\n\r\n> Assuming we go ahead with this, want me to port these tests or do you want to do it? :)\r\n\r\nI think this should wait until the `slm-retention` branch has been merged to master (which I can work on shortly now that we have a 7.5 branch), otherwise the merge conflicts are going to be hideous and the tests will have to be rewritten twice. Once it's merged then we can rewrite the tests (either me or you)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/527521197","html_url":"https://github.com/elastic/elasticsearch/issues/46205#issuecomment-527521197","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46205","id":527521197,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzUyMTE5Nw==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-09-03T15:53:57Z","updated_at":"2019-09-03T15:54:52Z","author_association":"MEMBER","body":"@dakrone sorry, I meant `REST` instead of YAML. Getting up at 4am didn't do me much good today it seems :) But yea, I'm fine waiting here. I'll assign you then, so since you'll do the merging of the `slm-retention` branch as well so you can time things accordingly.\r\n\r\nThanks!","performed_via_github_app":null}]