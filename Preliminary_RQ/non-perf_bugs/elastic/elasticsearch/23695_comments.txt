[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288383237","html_url":"https://github.com/elastic/elasticsearch/issues/23695#issuecomment-288383237","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23695","id":288383237,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODM4MzIzNw==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2017-03-22T12:26:49Z","updated_at":"2017-03-22T12:26:49Z","author_association":"MEMBER","body":"Couldn't reproduce, but here's the line in any case:\r\n```\r\ngradle :core:integTest -Dtests.seed=CB45553B395B1BE4 -Dtests.class=org.elasticsearch.tribe.TribeIT -Dtests.method=\"testClusterStateNodes\" -Dtests.security.manager=true -Dtests.locale=es-UY -Dtests.timezone=Asia/Bangkok\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288385714","html_url":"https://github.com/elastic/elasticsearch/issues/23695#issuecomment-288385714","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23695","id":288385714,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODM4NTcxNA==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2017-03-22T12:38:05Z","updated_at":"2017-03-22T12:38:05Z","author_association":"MEMBER","body":"@ywelsch can you take a look at this and re-assign if needed?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288418525","html_url":"https://github.com/elastic/elasticsearch/issues/23695#issuecomment-288418525","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23695","id":288418525,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODQxODUyNQ==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2017-03-22T14:36:37Z","updated_at":"2017-03-22T14:36:37Z","author_association":"CONTRIBUTOR","body":"This exhibits a real issue (but I'm not sure yet why the test fails) with the `minimum_master_nodes` dynamic setting update check.\r\n\r\nTo reproduce the issue:\r\n- Start 2 nodes\r\n- Dynamically update cluster settings by setting `minimum_master_nodes` to 2\r\n- Start another node\r\n- When that third node joins the cluster, it will throw said exception because it will check if the number of master nodes in the *previous* cluster state is at least as high as the `minimum_master_nodes` setting in the new cluster state. The number of master nodes in the previous cluster state is 0 (cluster state before the node joins the cluster) and the setting is 2.\r\n\r\n```\r\nCaused by: java.lang.IllegalArgumentException: cannot set discovery.zen.minimum_master_nodes to more than the current master nodes count [0]\r\n\tat org.elasticsearch.discovery.zen.ZenDiscovery.lambda$new$2(ZenDiscovery.java:176) ~[main/:?]\r\n\tat org.elasticsearch.common.settings.Setting$Updater.getValue(Setting.java:592) ~[main/:?]\r\n\t... 11 more\r\n```\r\n\r\nWhat's bad about this is that the node will not apply any of the other cluster settings in that cluster state publishing round.\r\n\r\n/cc: @bleskes","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/291534801","html_url":"https://github.com/elastic/elasticsearch/issues/23695#issuecomment-291534801","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23695","id":291534801,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MTUzNDgwMQ==","user":{"login":"tbrooks8","id":862472,"node_id":"MDQ6VXNlcjg2MjQ3Mg==","avatar_url":"https://avatars3.githubusercontent.com/u/862472?v=4","gravatar_id":"","url":"https://api.github.com/users/tbrooks8","html_url":"https://github.com/tbrooks8","followers_url":"https://api.github.com/users/tbrooks8/followers","following_url":"https://api.github.com/users/tbrooks8/following{/other_user}","gists_url":"https://api.github.com/users/tbrooks8/gists{/gist_id}","starred_url":"https://api.github.com/users/tbrooks8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbrooks8/subscriptions","organizations_url":"https://api.github.com/users/tbrooks8/orgs","repos_url":"https://api.github.com/users/tbrooks8/repos","events_url":"https://api.github.com/users/tbrooks8/events{/privacy}","received_events_url":"https://api.github.com/users/tbrooks8/received_events","type":"User","site_admin":false},"created_at":"2017-04-04T15:22:38Z","updated_at":"2017-04-04T15:22:38Z","author_association":"CONTRIBUTOR","body":"It looks like there was a failure related to this today. On the G1Gc master build.\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+g1gc/2327/console\r\n\r\ngradle :core:integTest -Dtests.seed=8C71214509D0E0F4 -Dtests.class=org.elasticsearch.tribe.TribeIT -Dtests.method=\"testClusterStateNodes\" -Dtests.security.manager=true -Dtests.jvm.argline=\"-XX:-UseConcMarkSweepGC -XX:+UseG1GC\" -Dtests.locale=es-PE -Dtests.timezone=Africa/Gaborone","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292102721","html_url":"https://github.com/elastic/elasticsearch/issues/23695#issuecomment-292102721","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23695","id":292102721,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjEwMjcyMQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2017-04-06T08:18:50Z","updated_at":"2017-04-06T08:18:50Z","author_association":"MEMBER","body":"This test failed again after @bleskes fix was applied: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+java9-periodic/2051/console\r\n\r\nThe failure is different, but I want to make sure that it has nothing do with the original failure or the fix itself before opening a new issue.\r\n\r\n```\r\nFAILURE 11.0s J0 | TribeIT.testClusterStateNodes <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: \r\n   > Expected: iterable over [\"node_sm3\", \"node_sm3/xYJvJwAAQAC2eure_____w\", \"cluster_10\", \"cluster_11\"] in any order\r\n   >      but: No item matches: \"node_sm3/xYJvJwAAQAC2eure_____w\", \"cluster_10\", \"cluster_11\" in [\"node_sm3\"]\r\n   > \tat __randomizedtesting.SeedInfo.seed([7A44EACBF5B6FDAE:4E005C96EDD99B29]:0)\r\n   > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \tat org.elasticsearch.tribe.TribeIT.lambda$assertNodes$28(TribeIT.java:648)\r\n   > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:715)\r\n   > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:689)\r\n   > \tat org.elasticsearch.tribe.TribeIT.assertNodes(TribeIT.java:645)\r\n   > \tat org.elasticsearch.tribe.TribeIT.testClusterStateNodes(TribeIT.java:484)\r\n   > \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n   > \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n   > \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n   > \tat java.base/java.lang.reflect.Method.invoke(Method.java:547)\r\n   > \tat java.base/java.lang.Thread.run(Thread.java:844)\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/294021980","html_url":"https://github.com/elastic/elasticsearch/issues/23695#issuecomment-294021980","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23695","id":294021980,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDAyMTk4MA==","user":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"created_at":"2017-04-13T21:08:05Z","updated_at":"2017-04-13T21:08:05Z","author_association":"CONTRIBUTOR","body":"Another failure today:\r\n```\r\nFAILURE 11.6s J1 | TribeIT.testClusterStateNodes <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: \r\n   > Expected: iterable over [\"node_sm3/jBfHUQAAQACHJdt7AAAAAA\", \"cluster_12\", \"cluster_2d4\", \"cluster_2d3\", \"cluster_10\", \"cluster_11\", \"cluster_2d5\", \"cluster_2m1\", \"node_sm3\", \"cluster_2m0\", \"node_sm3/h1AqCAAAQACMK6UyAAAAAA\", \"cluster_2m2\"] in any order\r\n   >      but: No item matches: \"cluster_12\", \"cluster_10\", \"cluster_11\", \"node_sm3/h1AqCAAAQACMK6UyAAAAAA\" in [\"node_sm3/jBfHUQAAQACHJdt7AAAAAA\", \"cluster_2d4\", \"cluster_2d3\", \"cluster_2d5\", \"cluster_2m1\", \"node_sm3\", \"cluster_2m0\", \"cluster_2m2\"]\r\n   > \tat __randomizedtesting.SeedInfo.seed([4ED3B7B6E28F9E27:7A9701EBFAE0F8A0]:0)\r\n   > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \tat org.elasticsearch.tribe.TribeIT.lambda$assertNodes$28(TribeIT.java:648)\r\n   > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:715)\r\n   > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:689)\r\n   > \tat org.elasticsearch.tribe.TribeIT.assertNodes(TribeIT.java:645)\r\n   > \tat org.elasticsearch.tribe.TribeIT.testClusterStateNodes(TribeIT.java:484)\r\n   > \tat java.lang.Thread.run(Thread.java:745)\r\n   > \tSuppressed: java.lang.AssertionError: \r\n   > Expected: iterable over [\"node_sm3/jBfHUQAAQACHJdt7AAAAAA\", \"cluster_12\", \"cluster_2d4\", \"cluster_2d3\", \"cluster_10\", \"cluster_11\", \"cluster_2d5\", \"cluster_2m1\", \"node_sm3\", \"cluster_2m0\", \"node_sm3/h1AqCAAAQACMK6UyAAAAAA\", \"cluster_2m2\"] in any order\r\n   >      but: No item matches: \"cluster_12\", \"cluster_10\", \"cluster_11\", \"node_sm3/h1AqCAAAQACMK6UyAAAAAA\" in [\"node_sm3/jBfHUQAAQACHJdt7AAAAAA\", \"cluster_2d4\", \"cluster_2d3\", \"cluster_2d5\", \"cluster_2m1\", \"node_sm3\", \"cluster_2m0\", \"cluster_2m2\"]\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.tribe.TribeIT.lambda$assertNodes$28(TribeIT.java:648)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:703)\r\n   > \t\t... 40 more\r\n   > \tSuppressed: java.lang.AssertionError: \r\n```\r\n\r\nSee https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility/os=debian/839/consoleFull","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/294022103","html_url":"https://github.com/elastic/elasticsearch/issues/23695#issuecomment-294022103","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23695","id":294022103,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDAyMjEwMw==","user":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"created_at":"2017-04-13T21:08:37Z","updated_at":"2017-04-13T21:08:37Z","author_association":"CONTRIBUTOR","body":"Reopening as the issue is still failing\r\n/cc @bleskes ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/296612318","html_url":"https://github.com/elastic/elasticsearch/issues/23695#issuecomment-296612318","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23695","id":296612318,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NjYxMjMxOA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2017-04-24T10:34:50Z","updated_at":"2017-04-24T10:34:50Z","author_association":"CONTRIBUTOR","body":"I've looked into this failure (which is unrelated to the first one that was fixed here). What I think is happening here is that the tribe node `node_sm0/LfM1LgAAQACUzI9-AAAAAA` is being shutdown by the test while a publishing round (that adds the node to `cluster_2`) is not completed yet (i.e. the node itself knows that it became part of the cluster, and the test shuts the tribe node down, but another node (`cluster_2m1`) has not applied the cluster state yet, which makes that node hang while trying to connect to the node that is shutting down (due to connect_timeout being 30 seconds), delaying publishing for 30 seconds.\r\nThis trips an assertion, as the test subsequently starts another tribe node that also wants to join the cluster, and has only 10 seconds to join said cluster before the assertion trips. The master is blocked however for 30 seconds to complete the previous publishing round.\r\n\r\nRelevant log lines:\r\n\r\n```\r\n1> [2017-04-18T02:48:31,991][INFO ][o.e.c.s.ClusterService   ] [cluster_2m1] added {{node_sm0/LfM1LgAAQACUzI9-AAAAAA}{GBlwfM8rSk2dE1mQ3nJJ5A}{ONCmCnYQReK35DcZ13C60g}{127.0.0.1}{127.0.0.1:9300},}, reason: zen-disco-receive(from master [master {cluster_2m2}{CzEgKG_WQy6cAFNA9B31vw}{HNBvClr0T0SNeetgGZJHOA}{127.0.0.1}{127.0.0.1:9540} committed version [52]])\r\n\r\n\r\n1> [2017-04-18T02:49:01,990][WARN ][o.e.d.z.PublishClusterStateAction] [cluster_2m2] timed out waiting for all nodes to process published state [52] (timeout [30s], pending nodes: [{cluster_2m1}{EGHcShPYTaSMgSmJBv8-ig}{suB_qk87R1esfD5HnJEhhQ}{127.0.0.1}{127.0.0.1:9544}])\r\n  1> [2017-04-18T02:49:01,992][WARN ][o.e.c.s.ClusterService   ] [cluster_2m2] cluster state update task [zen-disco-node-join[{node_sm0/LfM1LgAAQACUzI9-AAAAAA}{GBlwfM8rSk2dE1mQ3nJJ5A}{ONCmCnYQReK35DcZ13C60g}{127.0.0.1}{127.0.0.1:9300}]] took [30s] above the warn threshold of 30s\r\n  1> [2017-04-18T02:49:01,994][INFO ][o.e.c.s.ClusterService   ] [cluster_2m2] removed {{node_sm0/LfM1LgAAQACUzI9-AAAAAA}{GBlwfM8rSk2dE1mQ3nJJ5A}{ONCmCnYQReK35DcZ13C60g}{127.0.0.1}{127.0.0.1:9300},}, reason: zen-disco-node-left({node_sm0/LfM1LgAAQACUzI9-AAAAAA}{GBlwfM8rSk2dE1mQ3nJJ5A}{ONCmCnYQReK35DcZ13C60g}{127.0.0.1}{127.0.0.1:9300}), reason(left)[{node_sm0/LfM1LgAAQACUzI9-AAAAAA}{GBlwfM8rSk2dE1mQ3nJJ5A}{ONCmCnYQReK35DcZ13C60g}{127.0.0.1}{127.0.0.1:9300} left], zen-disco-node-failed({node_sm0/LfM1LgAAQACUzI9-AAAAAA}{GBlwfM8rSk2dE1mQ3nJJ5A}{ONCmCnYQReK35DcZ13C60g}{127.0.0.1}{127.0.0.1:9300}), reason(transport disconnected)[{node_sm0/LfM1LgAAQACUzI9-AAAAAA}{GBlwfM8rSk2dE1mQ3nJJ5A}{ONCmCnYQReK35DcZ13C60g}{127.0.0.1}{127.0.0.1:9300} transport disconnected]\r\n\r\n\r\n1> [2017-04-18T02:49:02,013][WARN ][o.e.c.NodeConnectionsService] [cluster_2m1] failed to connect to node {node_sm0/LfM1LgAAQACUzI9-AAAAAA}{GBlwfM8rSk2dE1mQ3nJJ5A}{ONCmCnYQReK35DcZ13C60g}{127.0.0.1}{127.0.0.1:9300} (tried [1] times)\r\n  1> org.elasticsearch.transport.ConnectTransportException: [node_sm0/LfM1LgAAQACUzI9-AAAAAA][127.0.0.1:9300] general node connection failure\r\n  1> \tat org.elasticsearch.transport.TcpTransport.connectToNode(TcpTransport.java:471) ~[main/:?]\r\n  1> \tat org.elasticsearch.transport.TransportService.connectToNode(TransportService.java:311) ~[main/:?]\r\n  1> \tat org.elasticsearch.transport.TransportService.connectToNode(TransportService.java:298) ~[main/:?]\r\n  1> \tat org.elasticsearch.cluster.NodeConnectionsService.validateAndConnectIfNeeded(NodeConnectionsService.java:154) ~[main/:?]\r\n  1> \tat org.elasticsearch.cluster.NodeConnectionsService$1.doRun(NodeConnectionsService.java:107) ~[main/:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:638) ~[main/:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[main/:?]\r\n  1> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[?:1.8.0_121]\r\n  1> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[?:1.8.0_121]\r\n  1> \tat java.lang.Thread.run(Thread.java:745) ~[?:1.8.0_121]\r\n  1> Caused by: java.lang.IllegalStateException: handshake failed with {node_sm0/LfM1LgAAQACUzI9-AAAAAA}{GBlwfM8rSk2dE1mQ3nJJ5A}{ONCmCnYQReK35DcZ13C60g}{127.0.0.1}{127.0.0.1:9300}\r\n  1> \tat org.elasticsearch.transport.TransportService.handshake(TransportService.java:382) ~[main/:?]\r\n  1> \tat org.elasticsearch.transport.TransportService.lambda$connectToNode$3(TransportService.java:313) ~[main/:?]\r\n  1> \tat org.elasticsearch.transport.TcpTransport.connectToNode(TcpTransport.java:454) ~[main/:?]\r\n  1> \t... 9 more\r\n  1> Caused by: org.elasticsearch.transport.ReceiveTimeoutTransportException: [node_sm0/LfM1LgAAQACUzI9-AAAAAA][127.0.0.1:9300][internal:transport/handshake] request_id [25] timed out after [30000ms]\r\n  1> \tat org.elasticsearch.transport.TransportService$TimeoutHandler.run(TransportService.java:921) ~[main/:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:569) ~[main/:?]\r\n  1> \t... 3 more\r\n  1> [2017-04-18T02:49:02,016][WARN ][o.e.c.s.ClusterService   ] [cluster_2m1] cluster state update task [zen-disco-receive(from master [master {cluster_2m2}{CzEgKG_WQy6cAFNA9B31vw}{HNBvClr0T0SNeetgGZJHOA}{127.0.0.1}{127.0.0.1:9540} committed version [52]])] took [30s] above the warn threshold of 30s\r\n  1> [2017-04-18T02:49:02,016][INFO ][o.e.c.s.ClusterService   ] [cluster_2m1] removed {{node_sm0/LfM1LgAAQACUzI9-AAAAAA}{GBlwfM8rSk2dE1mQ3nJJ5A}{ONCmCnYQReK35DcZ13C60g}{127.0.0.1}{127.0.0.1:9300},}, reason: zen-disco-receive(from master [master {cluster_2m2}{CzEgKG_WQy6cAFNA9B31vw}{HNBvClr0T0SNeetgGZJHOA}{127.0.0.1}{127.0.0.1:9540} committed version [53]])\r\n```\r\n\r\nI've pushed 7c395070e2 to address this.","performed_via_github_app":null}]