[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/511288923","html_url":"https://github.com/elastic/elasticsearch/issues/44327#issuecomment-511288923","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44327","id":511288923,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI4ODkyMw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-07-15T06:40:11Z","updated_at":"2019-07-15T06:40:11Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/511289304","html_url":"https://github.com/elastic/elasticsearch/issues/44327#issuecomment-511289304","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44327","id":511289304,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI4OTMwNA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-07-15T06:42:09Z","updated_at":"2019-07-15T06:42:09Z","author_association":"CONTRIBUTOR","body":"also https://elasticsearch-ci.elastic.co/view/Elasticsearch%20master/job/elastic+elasticsearch+master+bwc-tests/145/ is a suspect","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/512171449","html_url":"https://github.com/elastic/elasticsearch/issues/44327#issuecomment-512171449","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44327","id":512171449,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjE3MTQ0OQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-07-17T09:11:12Z","updated_at":"2019-07-17T09:11:12Z","author_association":"CONTRIBUTOR","body":"Looking at the failure at #43971  runbld set appears to have set build metadata  \r\n```\r\nBUILD_METADATA: bwc_refspec_distribution:bwc:bugfix=7c9aa15746b1bf48740df2390bb3066b59148832;bwc_refspec_distribution:bwc:minor=553f783e735b24a5eea3730d3ce97c7af74bfcc2\r\n```\r\nand the build picked that up properly \r\n```\r\n02:24:40 > Task :distribution:bwc:bugfix:checkoutBwcBranch\r\n02:24:40 Checking out elasticsearch 7c9aa15746b1bf48740df2390bb3066b59148832 for branch 7.2\r\n02:24:40 \r\n02:24:40 > Task :distribution:bwc:minor:checkoutBwcBranch\r\n02:24:40 Checking out elasticsearch 553f783e735b24a5eea3730d3ce97c7af74bfcc2 for branch 7.x\r\n02:24:40 \r\n```\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/512172643","html_url":"https://github.com/elastic/elasticsearch/issues/44327#issuecomment-512172643","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44327","id":512172643,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjE3MjY0Mw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-07-17T09:14:36Z","updated_at":"2019-07-17T09:14:36Z","author_association":"CONTRIBUTOR","body":"This is the intake build acting as last good commit: \r\nhttps://build-stats.elastic.co/app/kibana#/doc/b646ed00-7efc-11e8-bf69-63c8ef516157/build-1531848254847/t?id=20190703181815-589A85DE&_g=()\r\n\r\n`e84a79a8fb309d608f7ebb9fefb6f1a9ec61304e`  is the commit that build ran on and \r\n```\r\n:distribution:bwc:minor:writeBuildMetadata\r\n--\r\nChecked out elasticsearch commit 50e96f9f0e9a967fb5e368c05287ea8d0e8e1316\r\nÂ \r\n:distribution:bwc:minor:buildBwcDarwinTar\r\nPicked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8\r\n:distribution:bwc:bugfix:writeBuildMetadata\r\nChecked out elasticsearch commit 7c9aa15746b1bf48740df2390bb3066b59148832 \r\n```\r\nis the metadata it produced based on the scan at: https://scans.gradle.com/s/7bxf2pb4mafac/console-log","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/512176281","html_url":"https://github.com/elastic/elasticsearch/issues/44327#issuecomment-512176281","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44327","id":512176281,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjE3NjI4MQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-07-17T09:24:35Z","updated_at":"2019-07-17T09:24:35Z","author_association":"CONTRIBUTOR","body":"https://build-stats.elastic.co/app/kibana#/doc/b646ed00-7efc-11e8-bf69-63c8ef516157/build-1531848254847/t/?id=20190703231934-26691C32 is the build that failed.\r\nThe registered metadata in build-stats looks to be the same as what was passed to that build, even trough the build that produced the metadata seems to have produced something different","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/512178248","html_url":"https://github.com/elastic/elasticsearch/issues/44327#issuecomment-512178248","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44327","id":512178248,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjE3ODI0OA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-07-17T09:30:04Z","updated_at":"2019-07-17T09:30:04Z","author_association":"CONTRIBUTOR","body":"```\r\n:distribution:bwc:minor:checkoutBwcBranch\r\n--\r\nChecking out elasticsearch elastic/7.x for branch 7.x\r\n:distribution:bwc:minor:writeBuildMetadata\r\nChecked out elasticsearch commit 553f783e735b24a5eea3730d3ce97c7af74bfcc2\r\n\r\n:distribution:bwc:bugfix:checkoutBwcBranch\r\n--\r\nChecking out elasticsearch elastic/7.2 for branch 7.2\r\n:distribution:bwc:bugfix:writeBuildMetadata\r\nChecked out elasticsearch commit 7c9aa15746b1bf48740df2390bb3066b59148832\r\n```\r\nfrom https://scans.gradle.com/s/3otqrma5vxmha/console-log note that the previus commit included messages from our invocation of Gradle with parallel, between then and the second invocation it seems there was a push to the branch so it got updated again when we invoked Gradle again this time without  parallel, so it blew away our optimization but still shouldn't have failed ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/512181291","html_url":"https://github.com/elastic/elasticsearch/issues/44327#issuecomment-512181291","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44327","id":512181291,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjE4MTI5MQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-07-17T09:38:50Z","updated_at":"2019-07-17T09:38:50Z","author_association":"CONTRIBUTOR","body":"`553f783e735b24a5eea3730d3ce97c7af74bfcc2` has the current version set to `7.4.0` but last good commit is  `e84a79a` that expects `7.x` to still be at `7.3.0` .\r\nIn other words it's expected that the mac build would fail, it's strange that the intake build didn't fail in the same way.  \r\n\r\nThe reason the intake build didn't fail is that we don't do a clean between the Gradle invocations  so the first run that build bwc in parallel created the `7.3.0` artifacts that were still there when the second one ran, but the metadata was stored for the second one causing the subsequent mac build using last goot commit to fail even trough the intake build it was based on did not. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/512192700","html_url":"https://github.com/elastic/elasticsearch/issues/44327#issuecomment-512192700","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44327","id":512192700,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjE5MjcwMA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-07-17T10:12:19Z","updated_at":"2019-07-17T10:12:19Z","author_association":"CONTRIBUTOR","body":"The problem in release tests seem to be different @leathekd  runbld seems to have simply missed last good commit info. The config of the job did not change, yet, there's no indication in the log that last good commit as missed in this specific build: \r\nhttps://elasticsearch-ci.elastic.co/view/Elasticsearch%20master/job/elastic+elasticsearch+master+release-tests/145/\r\n\r\nhere's another where it did work: https://elasticsearch-ci.elastic.co/view/Elasticsearch%20master/job/elastic+elasticsearch+master+release-tests/154/consoleFull","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/512222898","html_url":"https://github.com/elastic/elasticsearch/issues/44327#issuecomment-512222898","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44327","id":512222898,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjIyMjg5OA==","user":{"login":"leathekd","id":44396,"node_id":"MDQ6VXNlcjQ0Mzk2","avatar_url":"https://avatars1.githubusercontent.com/u/44396?v=4","gravatar_id":"","url":"https://api.github.com/users/leathekd","html_url":"https://github.com/leathekd","followers_url":"https://api.github.com/users/leathekd/followers","following_url":"https://api.github.com/users/leathekd/following{/other_user}","gists_url":"https://api.github.com/users/leathekd/gists{/gist_id}","starred_url":"https://api.github.com/users/leathekd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leathekd/subscriptions","organizations_url":"https://api.github.com/users/leathekd/orgs","repos_url":"https://api.github.com/users/leathekd/repos","events_url":"https://api.github.com/users/leathekd/events{/privacy}","received_events_url":"https://api.github.com/users/leathekd/received_events","type":"User","site_admin":false},"created_at":"2019-07-17T11:57:33Z","updated_at":"2019-07-17T11:57:33Z","author_association":"CONTRIBUTOR","body":"The behavior here is that build 145 (the failing one) was kicked off by elasticmachine with an overridden `branch_specifier` ([see the params here](https://elasticsearch-ci.elastic.co/view/Elasticsearch%20master/job/elastic+elasticsearch+master+release-tests/145/parameters/)).  In this case runbld assumes that the user has set the branch specifically and on purpose and doesn't attempt to do anything with the last good commit.  Unfortunately, the downstream effect is that build metadata isn't loaded.\r\n\r\nDo you know how build 145 was started?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/512254224","html_url":"https://github.com/elastic/elasticsearch/issues/44327#issuecomment-512254224","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44327","id":512254224,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjI1NDIyNA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-07-17T13:28:25Z","updated_at":"2019-07-17T13:28:25Z","author_association":"CONTRIBUTOR","body":"Thanks ! I have no idea how it was started ... Jenkins said it was elasticmachine . Is it possible we have some automation ?  ","performed_via_github_app":null}]