{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/50323","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50323/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50323/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50323/events","html_url":"https://github.com/elastic/elasticsearch/issues/50323","id":539801253,"node_id":"MDU6SXNzdWU1Mzk4MDEyNTM=","number":50323,"title":"Disk usage doubled when upgrading from 5.4 to 5.6","user":{"login":"jmwilkinson","id":17836030,"node_id":"MDQ6VXNlcjE3ODM2MDMw","avatar_url":"https://avatars0.githubusercontent.com/u/17836030?v=4","gravatar_id":"","url":"https://api.github.com/users/jmwilkinson","html_url":"https://github.com/jmwilkinson","followers_url":"https://api.github.com/users/jmwilkinson/followers","following_url":"https://api.github.com/users/jmwilkinson/following{/other_user}","gists_url":"https://api.github.com/users/jmwilkinson/gists{/gist_id}","starred_url":"https://api.github.com/users/jmwilkinson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmwilkinson/subscriptions","organizations_url":"https://api.github.com/users/jmwilkinson/orgs","repos_url":"https://api.github.com/users/jmwilkinson/repos","events_url":"https://api.github.com/users/jmwilkinson/events{/privacy}","received_events_url":"https://api.github.com/users/jmwilkinson/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-12-18T16:53:40Z","updated_at":"2019-12-19T18:10:39Z","closed_at":"2019-12-19T18:10:39Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`): 5.6.16\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`): 1.8.0_201\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): Centos 7.4 (Docker)\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\n*Expected behavior*: After full cluster upgrade & green status, all old data would be removed, releasing disk space. Even better, after a single successful node upgrade, old disk usage would be released.\r\n\r\n*Actual behavior*: After a full cluster upgrade from 5.4 -> 5.6, every node's disk usage doubled and was not released.\r\n\r\n**Steps to reproduce**: Upgrade a cluster from 5.4 -> 5.6\r\n\r\n","closed_by":{"login":"jmwilkinson","id":17836030,"node_id":"MDQ6VXNlcjE3ODM2MDMw","avatar_url":"https://avatars0.githubusercontent.com/u/17836030?v=4","gravatar_id":"","url":"https://api.github.com/users/jmwilkinson","html_url":"https://github.com/jmwilkinson","followers_url":"https://api.github.com/users/jmwilkinson/followers","following_url":"https://api.github.com/users/jmwilkinson/following{/other_user}","gists_url":"https://api.github.com/users/jmwilkinson/gists{/gist_id}","starred_url":"https://api.github.com/users/jmwilkinson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmwilkinson/subscriptions","organizations_url":"https://api.github.com/users/jmwilkinson/orgs","repos_url":"https://api.github.com/users/jmwilkinson/repos","events_url":"https://api.github.com/users/jmwilkinson/events{/privacy}","received_events_url":"https://api.github.com/users/jmwilkinson/received_events","type":"User","site_admin":false},"performed_via_github_app":null}