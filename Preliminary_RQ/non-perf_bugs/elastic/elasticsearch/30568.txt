{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/30568","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30568/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30568/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30568/events","html_url":"https://github.com/elastic/elasticsearch/issues/30568","id":322761683,"node_id":"MDU6SXNzdWUzMjI3NjE2ODM=","number":30568,"title":"Error while creating repository type:azure| RepositoryVerificationException","user":{"login":"ritxos","id":8845297,"node_id":"MDQ6VXNlcjg4NDUyOTc=","avatar_url":"https://avatars3.githubusercontent.com/u/8845297?v=4","gravatar_id":"","url":"https://api.github.com/users/ritxos","html_url":"https://github.com/ritxos","followers_url":"https://api.github.com/users/ritxos/followers","following_url":"https://api.github.com/users/ritxos/following{/other_user}","gists_url":"https://api.github.com/users/ritxos/gists{/gist_id}","starred_url":"https://api.github.com/users/ritxos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ritxos/subscriptions","organizations_url":"https://api.github.com/users/ritxos/orgs","repos_url":"https://api.github.com/users/ritxos/repos","events_url":"https://api.github.com/users/ritxos/events{/privacy}","received_events_url":"https://api.github.com/users/ritxos/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-14T10:39:00Z","updated_at":"2018-05-14T10:41:55Z","closed_at":"2018-05-14T10:41:55Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Feature request -->\r\n\r\n**Describe the feature**:\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): 2.4.1\r\n\r\n**Plugins installed**: [cloud-azure -->  2.4.1]\r\n\r\n**JVM version** (`java -version`):openjdk version \"1.8.0_171\"\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): CentOS 6.7  x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\ncloud azure plugin for ES backup is not able to create reposotiry type azure --curl -XPUT http://localhost:9200/_snapshot/backup-test -d '{ \"type\": \"azure\" }'\r\n\r\nIts throwing error shown in logs.\r\n**Important:** it is able to create a default container called elasticsearch-snapshots under specified storage account\r\n\r\n**Steps to reproduce**:\r\n**tail of elasticsearch.yml**\r\n\r\nhttp.cors.enabled: true\r\nhttp.cors.allow-origin: \"*\"\r\n\r\ncloud.azure.storage.default.account: xxxxxxxxxxxxxxxxx\r\ncloud.azure.storage.default.key: xxxxxxxxxxxxxxxxx\r\n\r\n**Provide logs (if relevant)**:\r\n```\r\n[2018-05-14 09:55:37,262][WARN ][rest.suppressed          ] path: /_snapshot/backup-test, params: {repository=backup-test}\r\nRepositoryVerificationException[[backup-test] [-ig2axJpTRKq_cnvDlk0jQ, 'RepositoryVerificationException[[backup-test] a file written by master to the store [elasticsearch-snapshots] cannot be accessed on the node [{Adobeidx-dev-elasticsearch-master-AS0}{-ig2axJpTRKq_cnvDlk0jQ}{10.67.1.201}{10.67.1.201:9300}{max_local_storage_nodes=1, data=false, master=true}]. This might indicate that the store [elasticsearch-snapshots] is not shared between this node and the master node or that permissions on the store don't allow reading files written by the master node]'], [qEfi7CbFRzixLG1lb-_wpg, 'RemoteTransportException[[Adobeidx-dev-elasticsearch-master-AS2][10.67.1.203:9300][internal:admin/repository/verify]]; nested: RepositoryVerificationException[[backup-test] a file written by master to the store [elasticsearch-snapshots] cannot be accessed on the node [{Adobeidx-dev-elasticsearch-master-AS2}{qEfi7CbFRzixLG1lb-_wpg}{10.67.1.203}{10.67.1.203:9300}{max_local_storage_nodes=1, data=false, master=true}]. This might indicate that the store [elasticsearch-snapshots] is not shared between this node and the master node or that permissions on the store don't allow reading files written by the master node];'], [0k66VNK5R9-JkE3ILVYyXw, 'RemoteTransportException[[Adobeidx-dev-elasticsearch-master-AS1][10.67.1.202:9300][internal:admin/repository/verify]]; nested: RepositoryVerificationException[[backup-test] a file written by master to the store [elasticsearch-snapshots] cannot be accessed on the node [{Adobeidx-dev-elasticsearch-master-AS1}{0k66VNK5R9-JkE3ILVYyXw}{10.67.1.202}{10.67.1.202:9300}{max_local_storage_nodes=1, data=false, master=true}]. This might indicate that the store [elasticsearch-snapshots] is not shared between this node and the master node or that permissions on the store don't allow reading files written by the master node];'], [Q605qroUTYiJtJWZdEVkdA, 'RemoteTransportException[[adobeidx-dev-elasticsearch-data-SS000000.1u5kw5wmbcsuncze0uc1yey2xb.cx.internal.cloudapp.net][10.67.1.196:9300][internal:admin/repository/verify]]; nested: RepositoryVerificationException[[backup-test] a file written by master to the store [elasticsearch-snapshots] cannot be accessed on the node [{adobeidx-dev-elasticsearch-data-SS000000.1u5kw5wmbcsuncze0uc1yey2xb.cx.internal.cloudapp.net}{Q605qroUTYiJtJWZdEVkdA}{10.67.1.196}{10.67.1.196:9300}{max_local_storage_nodes=1, master=false}]. This might indicate that the store [elasticsearch-snapshots] is not shared between this node and the master node or that permissions on the store don't allow reading files written by the master node];'], [vcVys6hXTKO6z8qwSqucKQ, 'RemoteTransportException[[adobeidx-dev-elasticsearch-data-SS000001.1u5kw5wmbcsuncze0uc1yey2xb.cx.internal.cloudapp.net][10.67.1.197:9300][internal:admin/repository/verify]]; nested: RepositoryVerificationException[[backup-test] a file written by master to the store [elasticsearch-snapshots] cannot be accessed on the node [{adobeidx-dev-elasticsearch-data-SS000001.1u5kw5wmbcsuncze0uc1yey2xb.cx.internal.cloudapp.net}{vcVys6hXTKO6z8qwSqucKQ}{10.67.1.197}{10.67.1.197:9300}{max_local_storage_nodes=1, master=false}]. This might indicate that the store [elasticsearch-snapshots] is not shared between this node and the master node or that permissions on the store don't allow reading files written by the master node];'], [biturw8YQEqmW0XuhU2ZTw, 'RemoteTransportException[[adobeidx-dev-elasticsearch-data-SS000002.1u5kw5wmbcsuncze0uc1yey2xb.cx.internal.cloudapp.net][10.67.1.198:9300][internal:admin/repository/verify]]; nested: RepositoryVerificationException[[backup-test] a file written by master to the store [elasticsearch-snapshots] cannot be accessed on the node [{adobeidx-dev-elasticsearch-data-SS000002.1u5kw5wmbcsuncze0uc1yey2xb.cx.internal.cloudapp.net}{biturw8YQEqmW0XuhU2ZTw}{10.67.1.198}{10.67.1.198:9300}{max_local_storage_nodes=1, master=false}]. This might indicate that the store [elasticsearch-snapshots] is not shared between this node and the master node or that permissions on the store don't allow reading files written by the master node];']]]\r\n\tat org.elasticsearch.repositories.RepositoriesService$VerifyingRegisterRepositoryListener$1.onResponse(RepositoriesService.java:440)\r\n\tat org.elasticsearch.repositories.RepositoriesService$VerifyingRegisterRepositoryListener$1.onResponse(RepositoriesService.java:436)\r\n\tat org.elasticsearch.repositories.RepositoriesService$3.onResponse(RepositoriesService.java:224)\r\n\tat org.elasticsearch.repositories.RepositoriesService$3.onResponse(RepositoriesService.java:214)\r\n\tat org.elasticsearch.repositories.VerifyNodeRepositoryAction.finishVerification(VerifyNodeRepositoryAction.java:116)\r\n\tat org.elasticsearch.repositories.VerifyNodeRepositoryAction$1.handleException(VerifyNodeRepositoryAction.java:107)\r\n\tat org.elasticsearch.transport.netty.MessageChannelHandler.handleException(MessageChannelHandler.java:184)\r\n\tat org.elasticsearch.transport.netty.MessageChannelHandler.handlerResponseError(MessageChannelHandler.java:174)\r\n\tat org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:122)\r\n\tat org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)\r\n\tat org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:462)\r\n\tat org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:443)\r\n\tat org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)\r\n\tat org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)\r\n\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)\r\n\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)\r\n\tat org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)\r\n\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)\r\n\tat org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)\r\n\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\r\n\tat org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\r\n\tat org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\r\n\tat org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}