[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18444985","html_url":"https://github.com/elastic/elasticsearch/issues/3092#issuecomment-18444985","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3092","id":18444985,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDQ0OTg1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-05-25T10:29:14Z","updated_at":"2013-05-25T10:29:14Z","author_association":"CONTRIBUTOR","body":"Hi Stefan\n\nSingle document or bulk indexing is no different.  Also, the default codec that we use in 0.90 to write new segments compresses stored fields and term vectors by default.\n\nYou don't need to enable anything for this to work - it's the default now.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18445168","html_url":"https://github.com/elastic/elasticsearch/issues/3092#issuecomment-18445168","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3092","id":18445168,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDQ1MTY4","user":{"login":"acmeguy","id":395419,"node_id":"MDQ6VXNlcjM5NTQxOQ==","avatar_url":"https://avatars0.githubusercontent.com/u/395419?v=4","gravatar_id":"","url":"https://api.github.com/users/acmeguy","html_url":"https://github.com/acmeguy","followers_url":"https://api.github.com/users/acmeguy/followers","following_url":"https://api.github.com/users/acmeguy/following{/other_user}","gists_url":"https://api.github.com/users/acmeguy/gists{/gist_id}","starred_url":"https://api.github.com/users/acmeguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acmeguy/subscriptions","organizations_url":"https://api.github.com/users/acmeguy/orgs","repos_url":"https://api.github.com/users/acmeguy/repos","events_url":"https://api.github.com/users/acmeguy/events{/privacy}","received_events_url":"https://api.github.com/users/acmeguy/received_events","type":"User","site_admin":false},"created_at":"2013-05-25T10:46:33Z","updated_at":"2013-05-25T10:46:33Z","author_association":"NONE","body":"Hi,\n\nSo ES is using a single common LZW dictionary for all _source documents already?\n\nRegards,\n -Stfan\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18445200","html_url":"https://github.com/elastic/elasticsearch/issues/3092#issuecomment-18445200","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3092","id":18445200,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDQ1MjAw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-05-25T10:48:51Z","updated_at":"2013-05-25T10:48:51Z","author_association":"CONTRIBUTOR","body":"For all _source documents in a segment, yes.  If you want to make that a single dictionary for a shard, then optimize the shard down to one segment. Of course, if you keep indexing, then it is pointless to do that - new segments will be created, but smaller segments get merged into a bigger segment automatically, so you can just leave it up to ES to handle.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18445209","html_url":"https://github.com/elastic/elasticsearch/issues/3092#issuecomment-18445209","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3092","id":18445209,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDQ1MjA5","user":{"login":"acmeguy","id":395419,"node_id":"MDQ6VXNlcjM5NTQxOQ==","avatar_url":"https://avatars0.githubusercontent.com/u/395419?v=4","gravatar_id":"","url":"https://api.github.com/users/acmeguy","html_url":"https://github.com/acmeguy","followers_url":"https://api.github.com/users/acmeguy/followers","following_url":"https://api.github.com/users/acmeguy/following{/other_user}","gists_url":"https://api.github.com/users/acmeguy/gists{/gist_id}","starred_url":"https://api.github.com/users/acmeguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acmeguy/subscriptions","organizations_url":"https://api.github.com/users/acmeguy/orgs","repos_url":"https://api.github.com/users/acmeguy/repos","events_url":"https://api.github.com/users/acmeguy/events{/privacy}","received_events_url":"https://api.github.com/users/acmeguy/received_events","type":"User","site_admin":false},"created_at":"2013-05-25T10:49:25Z","updated_at":"2013-05-25T10:49:25Z","author_association":"NONE","body":"Great, thank you!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18447757","html_url":"https://github.com/elastic/elasticsearch/issues/3092#issuecomment-18447757","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3092","id":18447757,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDQ3NzU3","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2013-05-25T14:11:33Z","updated_at":"2013-05-25T14:11:33Z","author_association":"CONTRIBUTOR","body":"I'll try to give a little more information on how stored fields compression works under the cover.\n\nThe stored fields file is compressed into blocks of 16K or more, and Lucene maintains a very compact in-memory data-structure that maps every document ID to the start offset of the block that contains it (a document cannot span across several blocks). All blocks are independent, meaning there is no shared dictionary, and are compressed using LZ4 (https://code.google.com/p/lz4/), an LZ77-based compression codec which trades CPU for compression ratio.\n\nAt reading time, there is an optimization that allows to decompress as little data as needed. For example, if you are looking for the 2nd document of a block that contains 7 documents, it is very likely that the block will only be partially decoded.\n\nThere are a few optimizations that would allow to improve the compression ratio, but it is likely that they will bring a few drawbacks too. For example, the doc->offset mapping that Lucene stores in memory is very compact because it only actually stores only the address for the first document of a block (and uses a binary-search like approach to find the block offset for a given doc ID). If documents were not stored in large blocks anymore, this will likely require more memory.\n\nAdditionally, the fact that there is no shared state across segments is great for merging, since in a few common cases Lucene can directly copy the compressed data without having to decompress and then compress it again.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18447886","html_url":"https://github.com/elastic/elasticsearch/issues/3092#issuecomment-18447886","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3092","id":18447886,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDQ3ODg2","user":{"login":"acmeguy","id":395419,"node_id":"MDQ6VXNlcjM5NTQxOQ==","avatar_url":"https://avatars0.githubusercontent.com/u/395419?v=4","gravatar_id":"","url":"https://api.github.com/users/acmeguy","html_url":"https://github.com/acmeguy","followers_url":"https://api.github.com/users/acmeguy/followers","following_url":"https://api.github.com/users/acmeguy/following{/other_user}","gists_url":"https://api.github.com/users/acmeguy/gists{/gist_id}","starred_url":"https://api.github.com/users/acmeguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acmeguy/subscriptions","organizations_url":"https://api.github.com/users/acmeguy/orgs","repos_url":"https://api.github.com/users/acmeguy/repos","events_url":"https://api.github.com/users/acmeguy/events{/privacy}","received_events_url":"https://api.github.com/users/acmeguy/received_events","type":"User","site_admin":false},"created_at":"2013-05-25T14:21:25Z","updated_at":"2013-05-25T14:23:35Z","author_association":"NONE","body":"Thank you.\n\nThis also means that the _real answer_ to my question is no :). (if I understand you correctly).\n\nI know I'm nitpicking here (this is more a curiosity rather than a requirement) but the data I'm working with would really benefit from being compresses using a single, common, compression dictionary.\n\nI understand the logic behind the current approach and am in no position to state that a common dictionary has enough benefits to warrant an inquiry.\n\nVery best regards,\n  -Stefan\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18449160","html_url":"https://github.com/elastic/elasticsearch/issues/3092#issuecomment-18449160","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3092","id":18449160,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDQ5MTYw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-05-25T15:46:22Z","updated_at":"2013-05-25T15:46:22Z","author_association":"CONTRIBUTOR","body":"OK, so I fudged it a bit :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18453724","html_url":"https://github.com/elastic/elasticsearch/issues/3092#issuecomment-18453724","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3092","id":18453724,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDUzNzI0","user":{"login":"acmeguy","id":395419,"node_id":"MDQ6VXNlcjM5NTQxOQ==","avatar_url":"https://avatars0.githubusercontent.com/u/395419?v=4","gravatar_id":"","url":"https://api.github.com/users/acmeguy","html_url":"https://github.com/acmeguy","followers_url":"https://api.github.com/users/acmeguy/followers","following_url":"https://api.github.com/users/acmeguy/following{/other_user}","gists_url":"https://api.github.com/users/acmeguy/gists{/gist_id}","starred_url":"https://api.github.com/users/acmeguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acmeguy/subscriptions","organizations_url":"https://api.github.com/users/acmeguy/orgs","repos_url":"https://api.github.com/users/acmeguy/repos","events_url":"https://api.github.com/users/acmeguy/events{/privacy}","received_events_url":"https://api.github.com/users/acmeguy/received_events","type":"User","site_admin":false},"created_at":"2013-05-25T20:52:21Z","updated_at":"2013-05-25T20:52:21Z","author_association":"NONE","body":"NP.\n\nDealing effectively with highly redundant data should be quite valuable.\nI hope an opportunity will present it self for you guys to investigate it further :)\n\nRegards,\n -Stefan\n","performed_via_github_app":null}]