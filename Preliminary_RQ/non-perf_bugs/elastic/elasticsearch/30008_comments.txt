[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384193261","html_url":"https://github.com/elastic/elasticsearch/issues/30008#issuecomment-384193261","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30008","id":384193261,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDE5MzI2MQ==","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2018-04-25T07:51:37Z","updated_at":"2018-04-25T07:51:37Z","author_association":"MEMBER","body":"@CamiloSierraH I cannot confirm this, the headers being configured are just added to the other headers which are set internally by the HTTP client. This unit test passes (which shows that the Host header is set despite custom headers being configured)\r\n\r\n```\r\n    public void testThatExistingHeadersAreNotRemoved() throws Exception {\r\n        webServer.enqueue(new MockResponse().setResponseCode(200).setBody(\"whatever\"));\r\n\r\n        httpClient.execute(HttpRequest.builder(\"localhost\", webServer.getPort()).path(\"/\").build());\r\n        assertThat(webServer.requests(), hasSize(1));\r\n        assertThat(webServer.requests().get(0).getHeader(\"Host\"), is(\"localhost:\" + webServer.getPort()));\r\n\r\n        webServer.enqueue(new MockResponse().setResponseCode(200).setBody(\"whatever\"));\r\n\r\n        HttpRequest request = HttpRequest.builder(\"localhost\", webServer.getPort()).setHeader(\"Foo\", \"bar\").path(\"/\").build();\r\n        httpClient.execute(request);\r\n        assertThat(webServer.requests(), hasSize(2));\r\n        assertThat(webServer.requests().get(1).getHeader(\"Host\"), is(\"localhost:\" + webServer.getPort()));\r\n        assertThat(webServer.requests().get(1).getHeader(\"Foo\"), is(\"bar\"));\r\n    }\r\n```\r\n\r\nCan you provide an example, please?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402134078","html_url":"https://github.com/elastic/elasticsearch/issues/30008#issuecomment-402134078","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30008","id":402134078,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjEzNDA3OA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2018-07-03T12:13:55Z","updated_at":"2018-07-03T12:13:55Z","author_association":"MEMBER","body":"Closing this for lack of feedback, we couldn't reproduce the issue. Feel free to reopen with a complete recreation that demonstrate the issue.","performed_via_github_app":null}]