[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/321497347","html_url":"https://github.com/elastic/elasticsearch/issues/26133#issuecomment-321497347","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26133","id":321497347,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMTQ5NzM0Nw==","user":{"login":"costin","id":76245,"node_id":"MDQ6VXNlcjc2MjQ1","avatar_url":"https://avatars3.githubusercontent.com/u/76245?v=4","gravatar_id":"","url":"https://api.github.com/users/costin","html_url":"https://github.com/costin","followers_url":"https://api.github.com/users/costin/followers","following_url":"https://api.github.com/users/costin/following{/other_user}","gists_url":"https://api.github.com/users/costin/gists{/gist_id}","starred_url":"https://api.github.com/users/costin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/costin/subscriptions","organizations_url":"https://api.github.com/users/costin/orgs","repos_url":"https://api.github.com/users/costin/repos","events_url":"https://api.github.com/users/costin/events{/privacy}","received_events_url":"https://api.github.com/users/costin/received_events","type":"User","site_admin":false},"created_at":"2017-08-10T09:15:05Z","updated_at":"2017-08-10T09:15:05Z","author_association":"MEMBER","body":"I've been able to reproduce the issue (thanks for the nice instructions) and it looks like a bug related to index queries.\r\nI think that, index queries being [deprecated](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-indices-query.html) (in 5.x and removed in 6), they somehow exclude the nested documents altogether from the results, hence why inner hits are empty (basically it doesn't matter if they are specified or not).\r\n\r\nI'll leave @martijnvg comment more on this; in the meantime the workaround (as indicated in the original issue) and my recommendation is to specify the indices in the URL (which looks like it already does) instead of using index queries. \r\nEven if this bug is fixed, upgrading from 5.x (whenever that will be) will require the queries to be rewritten again...\r\n\r\nCheers,\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/321526387","html_url":"https://github.com/elastic/elasticsearch/issues/26133#issuecomment-321526387","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26133","id":321526387,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMTUyNjM4Nw==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2017-08-10T11:33:22Z","updated_at":"2017-08-10T11:33:22Z","author_association":"MEMBER","body":"@unknownlighter Thanks for reporting this bug. I'll merge a fix soon for this. Please note like @costin said, that you will have migrate away from the `indices` query at some point, because this query will no longer exist in 6.0 and up.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/321533181","html_url":"https://github.com/elastic/elasticsearch/issues/26133#issuecomment-321533181","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26133","id":321533181,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMTUzMzE4MQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2017-08-10T12:09:10Z","updated_at":"2017-08-10T12:09:10Z","author_association":"MEMBER","body":"Fixed via #26138","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/321767876","html_url":"https://github.com/elastic/elasticsearch/issues/26133#issuecomment-321767876","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26133","id":321767876,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMTc2Nzg3Ng==","user":{"login":"AlexanderOtt85","id":30925287,"node_id":"MDQ6VXNlcjMwOTI1Mjg3","avatar_url":"https://avatars0.githubusercontent.com/u/30925287?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderOtt85","html_url":"https://github.com/AlexanderOtt85","followers_url":"https://api.github.com/users/AlexanderOtt85/followers","following_url":"https://api.github.com/users/AlexanderOtt85/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderOtt85/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderOtt85/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderOtt85/subscriptions","organizations_url":"https://api.github.com/users/AlexanderOtt85/orgs","repos_url":"https://api.github.com/users/AlexanderOtt85/repos","events_url":"https://api.github.com/users/AlexanderOtt85/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderOtt85/received_events","type":"User","site_admin":false},"created_at":"2017-08-11T09:28:38Z","updated_at":"2017-08-11T09:28:38Z","author_association":"NONE","body":"Is this issue related to my topic https://discuss.elastic.co/t/highlight-query-nested-query-with-wildcard-search/96610/2?u=alexander_ott","performed_via_github_app":null}]