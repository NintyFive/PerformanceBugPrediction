[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/386028906","html_url":"https://github.com/elastic/elasticsearch/issues/30326#issuecomment-386028906","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30326","id":386028906,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NjAyODkwNg==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-05-02T15:58:51Z","updated_at":"2018-05-02T15:58:51Z","author_association":"CONTRIBUTOR","body":"A little, the logs from other intermittent packaging test failures on opensuse (for example see https://github.com/elastic/elasticsearch/issues/30053#issuecomment-384137430) showed that the cluster was failing to start because of monitoring not initializing, which seemed to be caused by cluster state publishing timing out. I'll follow up with the distributed team","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/386175049","html_url":"https://github.com/elastic/elasticsearch/issues/30326#issuecomment-386175049","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30326","id":386175049,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NjE3NTA0OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-03T02:16:32Z","updated_at":"2018-05-03T02:16:32Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/386739978","html_url":"https://github.com/elastic/elasticsearch/issues/30326#issuecomment-386739978","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30326","id":386739978,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NjczOTk3OA==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-05-04T21:28:39Z","updated_at":"2018-05-04T21:29:01Z","author_association":"CONTRIBUTOR","body":"This is in a different test but it's a similar kind of failure so documenting here\r\n\r\n[build-2654-opensuse.txt](https://github.com/elastic/elasticsearch/files/1975946/build-2654-opensuse.txt)\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+packaging-tests/2654/console\r\n\r\nSimilar connection refused symptom\r\n\r\n```\r\nnot ok 113 [RPM] test elasticsearch\r\n# (from function `run_elasticsearch_tests' in file /project/build/packaging/bats/utils/utils.bash, line 539,\r\n# (from function `run_elasticsearch_tests' in file /project/build/packaging/bats/utils/utils.bash, line 539,\r\n#  in test file /project/build/packaging/bats/tests/40_rpm_package.bats, line 100)\r\n#  in test file /project/build/packaging/bats/tests/40_rpm_package.bats, line 100)\r\n#   `run_elasticsearch_tests' failed\r\n#   `run_elasticsearch_tests' failed\r\n# Making sure elasticsearch is up...\r\n# --2018-05-04 05:30:49--  http://localhost:9200/_cluster/health\r\n# Resolving localhost (localhost)... 127.0.0.1, ::1\r\n# Connecting to localhost (localhost)|127.0.0.1|:9200... failed: Connection refused.\r\n# Connecting to localhost (localhost)|::1|:9200... failed: Cannot assign requested address.\r\n# Retrying.\r\n```\r\n\r\nAnother interesting response after it does connect at one point\r\n\r\n```\r\n# {\r\n#   \"error\" : {\r\n#     \"root_cause\" : [\r\n#       {\r\n#         \"type\" : \"index_not_found_exception\",\r\n#         \"reason\" : \"no such index\",\r\n#         \"resource.type\" : \"index_expression\",\r\n#         \"resource.id\" : \"library\",\r\n#         \"index_uuid\" : \"_na_\",\r\n#         \"index\" : \"library\"\r\n#       }\r\n#     ],\r\n#     \"type\" : \"index_not_found_exception\",\r\n#     \"reason\" : \"no such index\",\r\n#     \"resource.type\" : \"index_expression\",\r\n#     \"resource.id\" : \"library\",\r\n#     \"index_uuid\" : \"_na_\",\r\n#     \"index\" : \"library\"\r\n#   },\r\n#   \"status\" : 404\r\n# }\r\n# {\r\n#   \"error\" : {\r\n#     \"root_cause\" : [\r\n#       {\r\n#         \"type\" : \"unavailable_shards_exception\",\r\n#         \"reason\" : \"[library][3] primary shard is not active Timeout: [1m], request: [BulkShardRequest [[library][3]] containing [index {[library][book][2], source[{\\n      \\\"title\\\": \\\"Book #2\\\",\\n      \\\"pages\\\": 456\\n    }]}] and a refresh]\"\r\n#       }\r\n#     ],\r\n#     \"type\" : \"unavailable_shards_exception\",\r\n#     \"reason\" : \"[library][3] primary shard is not active Timeout: [1m], request: [BulkShardRequest [[library][3]] containing [index {[library][book][2], source[{\\n      \\\"title\\\": \\\"Book #2\\\",\\n      \\\"pages\\\": 456\\n    }]}] and a refresh]\"\r\n#   },\r\n#   \"status\" : 503\r\n# }\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401951435","html_url":"https://github.com/elastic/elasticsearch/issues/30326#issuecomment-401951435","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30326","id":401951435,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTk1MTQzNQ==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-07-02T22:01:51Z","updated_at":"2018-07-02T22:01:51Z","author_association":"CONTRIBUTOR","body":"This is an ongoing issue that only happens on opensuse and sles, it's caused by the cluster starting very slowly, the root cause for which we've been unable to determine.\r\n\r\nThere are a few issues open for this and I'm fairly certain they all share the same cause so I'm going to close them in favor of #30295 since there's more discussion there","performed_via_github_app":null}]