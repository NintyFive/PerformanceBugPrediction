[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/117812454","html_url":"https://github.com/elastic/elasticsearch/issues/11934#issuecomment-117812454","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11934","id":117812454,"node_id":"MDEyOklzc3VlQ29tbWVudDExNzgxMjQ1NA==","user":{"login":"xuzha","id":1799964,"node_id":"MDQ6VXNlcjE3OTk5NjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1799964?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzha","html_url":"https://github.com/xuzha","followers_url":"https://api.github.com/users/xuzha/followers","following_url":"https://api.github.com/users/xuzha/following{/other_user}","gists_url":"https://api.github.com/users/xuzha/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzha/subscriptions","organizations_url":"https://api.github.com/users/xuzha/orgs","repos_url":"https://api.github.com/users/xuzha/repos","events_url":"https://api.github.com/users/xuzha/events{/privacy}","received_events_url":"https://api.github.com/users/xuzha/received_events","type":"User","site_admin":false},"created_at":"2015-07-01T20:15:31Z","updated_at":"2015-07-01T20:15:31Z","author_association":"CONTRIBUTOR","body":"I don't think we need to add this jitter logic. The exponential backoff policy with max 3 times retry is already in default retry logic, which is the default configuration for S3 client and EC2 client.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120340031","html_url":"https://github.com/elastic/elasticsearch/issues/11934#issuecomment-120340031","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11934","id":120340031,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDM0MDAzMQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-07-10T10:07:55Z","updated_at":"2015-07-10T10:07:55Z","author_association":"CONTRIBUTOR","body":"Adding a bit of randomization is pretty easy, and certainly won't hurt. I think we should do it\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/124353985","html_url":"https://github.com/elastic/elasticsearch/issues/11934#issuecomment-124353985","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11934","id":124353985,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNDM1Mzk4NQ==","user":{"login":"xuzha","id":1799964,"node_id":"MDQ6VXNlcjE3OTk5NjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1799964?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzha","html_url":"https://github.com/xuzha","followers_url":"https://api.github.com/users/xuzha/followers","following_url":"https://api.github.com/users/xuzha/following{/other_user}","gists_url":"https://api.github.com/users/xuzha/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzha/subscriptions","organizations_url":"https://api.github.com/users/xuzha/orgs","repos_url":"https://api.github.com/users/xuzha/repos","events_url":"https://api.github.com/users/xuzha/events{/privacy}","received_events_url":"https://api.github.com/users/xuzha/received_events","type":"User","site_admin":false},"created_at":"2015-07-24T06:42:20Z","updated_at":"2015-07-24T06:42:20Z","author_association":"CONTRIBUTOR","body":"Do you mean we add extra randomization and plus exponential back-off latency? \n\nPlease correct me if I'm wrong, I'm pretty to new to this. From my understanding, for right now we are using default exponential backoff policy, which is not configurable for our aws plugin users. But for S3 client, we make max number of retries configurable, and we also pass this number into our [S3 client](https://github.com/elastic/elasticsearch/blob/4c981ff4bfc250080d521af105b5e8589c9fc517/plugins/cloud-aws/src/main/java/org/elasticsearch/cloud/aws/InternalAwsS3Service.java#L126) when we creating it ( I don't think we should do it )\n\nSo for example, if user put 3 for max number of tries into the setting, aws java client will do 3 times retries for us (hopefully) . AND PLUS, during doing snapshot, we would do another 3 times retries at our side if we got retryable exception, which is 9 times retryies (3 exponential retries ) \\* 3. \n\nI think we probably need make max number of retries configurable for our EC2 client. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/124356914","html_url":"https://github.com/elastic/elasticsearch/issues/11934#issuecomment-124356914","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11934","id":124356914,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNDM1NjkxNA==","user":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"created_at":"2015-07-24T06:44:31Z","updated_at":"2015-07-24T06:44:31Z","author_association":"MEMBER","body":"We should add randomisation, yes.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/125165372","html_url":"https://github.com/elastic/elasticsearch/issues/11934#issuecomment-125165372","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11934","id":125165372,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNTE2NTM3Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-07-27T10:57:25Z","updated_at":"2015-07-27T10:57:25Z","author_association":"CONTRIBUTOR","body":"> Do you mean we add extra randomization and plus exponential back-off latency?\n\nThe problem with the backoff is that all requests can be backed off and then retried at exactly the same time.  with a little randomization, it'll spread the retries out a bit.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/127307109","html_url":"https://github.com/elastic/elasticsearch/issues/11934#issuecomment-127307109","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11934","id":127307109,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNzMwNzEwOQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-08-03T16:26:31Z","updated_at":"2015-08-03T16:26:31Z","author_association":"CONTRIBUTOR","body":"Actually, there is already some randomization happening with the default client configuration, see https://github.com/aws/aws-sdk-java/blob/master/aws-java-sdk-core/src/main/java/com/amazonaws/retry/PredefinedRetryPolicies.java#L232\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/236125727","html_url":"https://github.com/elastic/elasticsearch/issues/11934#issuecomment-236125727","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11934","id":236125727,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjEyNTcyNw==","user":{"login":"petemounce","id":69720,"node_id":"MDQ6VXNlcjY5NzIw","avatar_url":"https://avatars2.githubusercontent.com/u/69720?v=4","gravatar_id":"","url":"https://api.github.com/users/petemounce","html_url":"https://github.com/petemounce","followers_url":"https://api.github.com/users/petemounce/followers","following_url":"https://api.github.com/users/petemounce/following{/other_user}","gists_url":"https://api.github.com/users/petemounce/gists{/gist_id}","starred_url":"https://api.github.com/users/petemounce/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/petemounce/subscriptions","organizations_url":"https://api.github.com/users/petemounce/orgs","repos_url":"https://api.github.com/users/petemounce/repos","events_url":"https://api.github.com/users/petemounce/events{/privacy}","received_events_url":"https://api.github.com/users/petemounce/received_events","type":"User","site_admin":false},"created_at":"2016-07-29T08:37:44Z","updated_at":"2016-07-29T08:37:44Z","author_association":"NONE","body":"https://www.awsarchitectureblog.com/2015/03/backoff.html is an interesting analysis on different retry strategies.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/551305863","html_url":"https://github.com/elastic/elasticsearch/issues/11934#issuecomment-551305863","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11934","id":551305863,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTMwNTg2Mw==","user":{"login":"yashdatre","id":12400651,"node_id":"MDQ6VXNlcjEyNDAwNjUx","avatar_url":"https://avatars1.githubusercontent.com/u/12400651?v=4","gravatar_id":"","url":"https://api.github.com/users/yashdatre","html_url":"https://github.com/yashdatre","followers_url":"https://api.github.com/users/yashdatre/followers","following_url":"https://api.github.com/users/yashdatre/following{/other_user}","gists_url":"https://api.github.com/users/yashdatre/gists{/gist_id}","starred_url":"https://api.github.com/users/yashdatre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yashdatre/subscriptions","organizations_url":"https://api.github.com/users/yashdatre/orgs","repos_url":"https://api.github.com/users/yashdatre/repos","events_url":"https://api.github.com/users/yashdatre/events{/privacy}","received_events_url":"https://api.github.com/users/yashdatre/received_events","type":"User","site_admin":false},"created_at":"2019-11-07T23:01:11Z","updated_at":"2019-11-07T23:01:11Z","author_association":"NONE","body":"I could not find the jitter logic in .net SDK. I believe we should add it there too!","performed_via_github_app":null}]