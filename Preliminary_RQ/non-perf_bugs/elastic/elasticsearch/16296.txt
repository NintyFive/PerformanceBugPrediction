{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/16296","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16296/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16296/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16296/events","html_url":"https://github.com/elastic/elasticsearch/issues/16296","id":129526770,"node_id":"MDU6SXNzdWUxMjk1MjY3NzA=","number":16296,"title":"index if not deleted / non-partial updates / index if doc exists / consistency","user":{"login":"mrkamel","id":165645,"node_id":"MDQ6VXNlcjE2NTY0NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/165645?v=4","gravatar_id":"","url":"https://api.github.com/users/mrkamel","html_url":"https://github.com/mrkamel","followers_url":"https://api.github.com/users/mrkamel/followers","following_url":"https://api.github.com/users/mrkamel/following{/other_user}","gists_url":"https://api.github.com/users/mrkamel/gists{/gist_id}","starred_url":"https://api.github.com/users/mrkamel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrkamel/subscriptions","organizations_url":"https://api.github.com/users/mrkamel/orgs","repos_url":"https://api.github.com/users/mrkamel/repos","events_url":"https://api.github.com/users/mrkamel/events{/privacy}","received_events_url":"https://api.github.com/users/mrkamel/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-01-28T17:58:48Z","updated_at":"2016-01-29T09:26:12Z","closed_at":"2016-01-29T09:26:12Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Hi,\n\na) for the sake of consistency, it would be super awesome if ES could permanently store a list of IDs of deleted docs, such that one could ensure to not re-index already deleted docs. E.g. PUT /.../_create?if_not_deleted=true. It seems the only current possible way to achieve consistency regarding deleted records is to not really delete these docs but instead mark them as deleted and exclude them from search queries,\n\nb) Similarly, i don't find a way to do non-partial updates, i.e. use the update api without merging the already existing attributes into the provided ones. E.g.\n\n```\nPUT /my-index/my-type/1/_update\n{\n  \"full_doc\": {\n    ...\n  }\n}\n```\n\nI could of course use the index api, but for the sake of consistency i want to be sure to not re-index already deleted documents. Something like\n\n```\nPUT /my-index/my-type/1?if_not_exists=true\n{\n  ...\n}\n```\n\nThanks\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}