{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/53188","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53188/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53188/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53188/events","html_url":"https://github.com/elastic/elasticsearch/issues/53188","id":576510462,"node_id":"MDU6SXNzdWU1NzY1MTA0NjI=","number":53188,"title":"RegressionIT. testTwoJobsWithSameRandomizeSeedUseSameTrainingSet fails on master","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"assignees":[{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2020-03-05T20:26:36Z","updated_at":"2020-03-10T11:28:41Z","closed_at":"2020-03-10T11:28:41Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"This failure came in today running on the master branch. I was able to reproduce the failure locally 100% of the runs I tried:\r\n\r\n```\r\norg.elasticsearch.xpack.ml.integration.RegressionIT > testTwoJobsWithSameRandomizeSeedUseSameTrainingSet {seed=[FC6B2FF692026E68:60F2C02B52CBCBBF]} FAILED\r\n    org.elasticsearch.ElasticsearchStatusException: Could not start data frame analytics task, allocation explanation [Not opening data frame analytics job [regression_two_jobs_with_same_randomize_seed_2], because not all primary shards are active for the following indices [.ml-state-000001]]\r\n        at __randomizedtesting.SeedInfo.seed([FC6B2FF692026E68:60F2C02B52CBCBBF]:0)\r\n        at org.elasticsearch.xpack.ml.action.TransportStartDataFrameAnalyticsAction$AnalyticsPredicate.test(TransportStartDataFrameAnalyticsAction.java:457)\r\n        at org.elasticsearch.xpack.ml.action.TransportStartDataFrameAnalyticsAction$AnalyticsPredicate.test(TransportStartDataFrameAnalyticsAction.java:436)\r\n        at org.elasticsearch.persistent.PersistentTasksService.lambda$waitForPersistentTaskCondition$1(PersistentTasksService.java:153)\r\n        at org.elasticsearch.persistent.PersistentTasksService.waitForPersistentTaskCondition(PersistentTasksService.java:157)\r\n        at org.elasticsearch.xpack.ml.action.TransportStartDataFrameAnalyticsAction.waitForAnalyticsStarted(TransportStartDataFrameAnalyticsAction.java:390)\r\n        at org.elasticsearch.xpack.ml.action.TransportStartDataFrameAnalyticsAction$1.onResponse(TransportStartDataFrameAnalyticsAction.java:167)\r\n        at org.elasticsearch.xpack.ml.action.TransportStartDataFrameAnalyticsAction$1.onResponse(TransportStartDataFrameAnalyticsAction.java:164)\r\n        at org.elasticsearch.action.ActionListener$4.onResponse(ActionListener.java:163)\r\n        at org.elasticsearch.action.ActionListener$4.onResponse(ActionListener.java:163)\r\n        at org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:43)\r\n        at org.elasticsearch.client.node.NodeClient.lambda$executeLocally$0(NodeClient.java:97)\r\n        at org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:144)\r\n        at org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:138)\r\n        at org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:43)\r\n        at org.elasticsearch.action.ActionListener$2.onResponse(ActionListener.java:89)\r\n        at org.elasticsearch.persistent.StartPersistentTaskAction$TransportAction.lambda$masterOperation$0(StartPersistentTaskAction.java:213)\r\n        at org.elasticsearch.action.ActionListener$3.onResponse(ActionListener.java:113)\r\n        at org.elasticsearch.persistent.PersistentTasksClusterService$1.clusterStateProcessed(PersistentTasksClusterService.java:121)\r\n        at org.elasticsearch.cluster.service.MasterService$SafeClusterStateTaskListener.clusterStateProcessed(MasterService.java:529)\r\n        at org.elasticsearch.cluster.service.MasterService$TaskOutputs.lambda$processedDifferentClusterState$1(MasterService.java:416)\r\n        at java.util.ArrayList.forEach(ArrayList.java:1540)\r\n        at org.elasticsearch.cluster.service.MasterService$TaskOutputs.processedDifferentClusterState(MasterService.java:416)\r\n        at org.elasticsearch.cluster.service.MasterService.onPublicationSuccess(MasterService.java:276)\r\n        at org.elasticsearch.cluster.service.MasterService.publish(MasterService.java:268)\r\n        at org.elasticsearch.cluster.service.MasterService.runTasks(MasterService.java:245)\r\n        at org.elasticsearch.cluster.service.MasterService$Batcher.run(MasterService.java:151)\r\n        at org.elasticsearch.cluster.service.TaskBatcher.runIfNotProcessed(TaskBatcher.java:150)\r\n        at org.elasticsearch.cluster.service.TaskBatcher$BatchedTask.run(TaskBatcher.java:188)\r\n        at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:688)\r\n        at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:252)\r\n        at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:215)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n        at java.lang.Thread.run(Thread.java:834)\r\n```\r\nhttps://gradle-enterprise.elastic.co/s/6akvzoza2fmuc\r\n\r\nSince it reproduces so consistently on my local run, I'm going to go ahead and mute the test.","closed_by":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"performed_via_github_app":null}