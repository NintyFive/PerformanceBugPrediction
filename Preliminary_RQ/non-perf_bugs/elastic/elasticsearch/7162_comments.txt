[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51328673","html_url":"https://github.com/elastic/elasticsearch/issues/7162#issuecomment-51328673","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7162","id":51328673,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzI4Njcz","user":{"login":"JamesDooley","id":1665724,"node_id":"MDQ6VXNlcjE2NjU3MjQ=","avatar_url":"https://avatars3.githubusercontent.com/u/1665724?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesDooley","html_url":"https://github.com/JamesDooley","followers_url":"https://api.github.com/users/JamesDooley/followers","following_url":"https://api.github.com/users/JamesDooley/following{/other_user}","gists_url":"https://api.github.com/users/JamesDooley/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesDooley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesDooley/subscriptions","organizations_url":"https://api.github.com/users/JamesDooley/orgs","repos_url":"https://api.github.com/users/JamesDooley/repos","events_url":"https://api.github.com/users/JamesDooley/events{/privacy}","received_events_url":"https://api.github.com/users/JamesDooley/received_events","type":"User","site_admin":false},"created_at":"2014-08-06T12:40:47Z","updated_at":"2014-08-06T12:40:47Z","author_association":"NONE","body":"I did some additional testing in my dev cluster today. It looks like _host, _name, _id all appear to work properly.\n\nIp specifically seems to be the issue. Looking at the node status I am seeing that the ip is set to 127.0.0.1 on the archive server, in production. But the transport and http are both set to the private IP 192.168.0.51.\n\n``` json\n{\n  \"cluster_name\" : \"-\",\n  \"nodes\" : {\n    \"bR6msifgSL-yibrS6wYFdg\" : {\n      \"name\" : \"Archive 1\",\n      \"transport_address\" : \"inet[/192.168.0.51:9300]\",\n      \"host\" : \"-\",\n      \"ip\" : \"127.0.0.1\",\n      \"version\" : \"1.3.1\",\n      \"build\" : \"2de6dc5\",\n      \"http_address\" : \"inet[/192.168.0.51:9200]\",\n      \"attributes\" : {\n        \"tag\" : \"backup\",\n        \"master\" : \"false\"\n      }\n    }\n  }\n}\n```\n\nThe only setting that I have (related to ip addresses) in my configuration for that node is the network.publish_host. This setting is used in both the production and dev environments. The only difference is that the dev environment has a publicly routeable ip, the production environment only has private IP addresses.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52566599","html_url":"https://github.com/elastic/elasticsearch/issues/7162#issuecomment-52566599","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7162","id":52566599,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTY2NTk5","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2014-08-18T22:51:07Z","updated_at":"2014-08-18T22:51:07Z","author_association":"MEMBER","body":"@JamesDooley the allocation filtering mechanism is using host address of a node to check if a shard should be allocated on this node or not. This is the same address that is getting returned by node info in the `ip` field, which is `127.0.0.1` in your case. When node starts, this address is obtained by [InetAddress.html#getLocalHost](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#getLocalHost%28%29) method. So, the issue here is why this method returns you `127.0.0.1` instead of non-loopback IP address.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52797464","html_url":"https://github.com/elastic/elasticsearch/issues/7162#issuecomment-52797464","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7162","id":52797464,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzk3NDY0","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2014-08-20T15:45:42Z","updated_at":"2014-08-20T15:45:42Z","author_association":"MEMBER","body":"Since it looks like network configuration issue rather than an elasticsearch issue, I am going to close it. Please feel free to reopen it if you have any additional details. Thanks!\n","performed_via_github_app":null}]