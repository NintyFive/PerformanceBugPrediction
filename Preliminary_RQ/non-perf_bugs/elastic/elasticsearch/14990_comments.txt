[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/160180999","html_url":"https://github.com/elastic/elasticsearch/issues/14990#issuecomment-160180999","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14990","id":160180999,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MDE4MDk5OQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-11-27T17:39:50Z","updated_at":"2015-11-27T19:26:49Z","author_association":"MEMBER","body":"About how to refer to _source and metadata: There should be no need to add special variable prefixes in templates like: `ctx.*` or `ctx._source.*`. A regular field name in ES can't have the same name is metadata (like `_index`, `_id` or `_routing`)\n\nSo referring to routing can just be done like this: `some string {{_routing}}` and a normal field  is just `some string {{my_field}}`. We can just use the convention that already exists in ES' mapping.\n\nFor ingest specific pipeline variables we can add a special `_ingest` field to document while it is in the pipeline. So the ingest timestamp can just be accessed like this in templates: `some string {{_ingest.ingest_timestamp}}`. The `_ingest` field will only be available during the pipeline execution and will not end up in the actual index request that is being send to the ES. (only ES metadata will end up being added to the index request send to the index / bulk api)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162826373","html_url":"https://github.com/elastic/elasticsearch/issues/14990#issuecomment-162826373","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14990","id":162826373,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjgyNjM3Mw==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T09:27:23Z","updated_at":"2015-12-08T09:27:23Z","author_association":"MEMBER","body":"The plan forward with templating:\n- Since many processors will allow templating for a subset of settings there should be template infrastructure for this. The idea is now that `IngestDocument` will accept a value type instead of a map of maps. This value type can be a simple string, map of maps, templated string or a map of maps with a bunch of templated values. A processor implementation is responsible for providing the right value type implementation. So if tempating is allowed for an specific setting and an templated string is provided then the value type impl makes sure that when the value type is going to be resolved into its native representation the templates string gets resolved too.\n- Both template config keys and values can be temptable, but this is up to the processor. \n- The syntax in previous comment will be used. There is a conflict with the `_ingest` field that will hold pipeline specific variables, because there can also be a field in the _source named `_ingest`. In ES only meta data fields are disallowed to be used in the source of a document. In any case if `_ingest.*` is being used in a template then we will assume is referred to pipeline metadata. If there is also a field with the name `_ingest` it has to be prefixed with `_source`. In all cases the `_source` prefix can be prepended to refer to any field in the source. Since `_source` is also a meta field in ES this can never be used as a field in the source itself. So we can safely use it as prefix for referencing fields in the source of a document.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170620391","html_url":"https://github.com/elastic/elasticsearch/issues/14990#issuecomment-170620391","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14990","id":170620391,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDYyMDM5MQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-01-11T17:07:23Z","updated_at":"2016-01-11T17:07:23Z","author_association":"MEMBER","body":"This has been implemented\n","performed_via_github_app":null}]