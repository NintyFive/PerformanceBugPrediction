[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/560249777","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-560249777","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":560249777,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDI0OTc3Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-12-02T06:18:12Z","updated_at":"2019-12-02T06:18:12Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security (:Security/Authentication)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/560282265","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-560282265","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":560282265,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDI4MjI2NQ==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2019-12-02T08:12:28Z","updated_at":"2019-12-02T08:12:28Z","author_association":"CONTRIBUTOR","body":"Underlying exception is \r\n```\r\nCaused by:\r\n        java.security.AccessControlException: access denied (\"java.security.SecurityPermission\" \"com.sun.org.apache.xml.internal.security.register\")\r\n            at java.security.AccessControlContext.checkPermission(AccessControlContext.java:472)\r\n            at java.security.AccessController.checkPermission(AccessController.java:886)\r\n            at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)\r\n            at com.sun.org.apache.xml.internal.security.utils.JavaUtils.checkRegisterPermission(JavaUtils.java:222)\r\n            at com.sun.org.apache.xml.internal.security.utils.XMLUtils.setDsPrefix(XMLUtils.java:103)\r\n            at com.sun.org.apache.xml.internal.security.utils.ElementProxy.setNamespacePrefix(ElementProxy.java:499)\r\n            at com.sun.org.apache.xml.internal.security.utils.ElementProxy.registerDefaultPrefixes(ElementProxy.java:512)\r\n            at com.sun.org.apache.xml.internal.security.Init.dynamicInit(Init.java:118)\r\n            at com.sun.org.apache.xml.internal.security.Init.init(Init.java:94)\r\n            at org.jcp.xml.dsig.internal.dom.ApacheTransform.<clinit>(ApacheTransform.java:56)\r\n            ... 8 more\r\n```\r\n\r\npossibly related to the latest Azul Zulu update in https://github.com/elastic/infra/pull/16252/files","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/564058614","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-564058614","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":564058614,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDA1ODYxNA==","user":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"created_at":"2019-12-10T14:30:45Z","updated_at":"2019-12-10T14:30:45Z","author_association":"MEMBER","body":"```\r\n./gradlew ':x-pack:plugin:security:unitTest' -Dtests.seed=B2DB8D45606A2857 -Dtests.class=org.elasticsearch.xpack.security.authc.saml.SamlAuthenticatorTests -Dtests.method=\"testAssetionWithoutBearerSubjectConfirmationMethodIsRejected\" -Dtests.security.manager=true -Dtests.locale=es-PA -Dtests.timezone=Africa/Maseru -Dcompiler.java=12 -Druntime.java=8\r\n```\r\n\r\nNew build failure: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+matrix-java-periodic/ES_BUILD_JAVA=openjdk12,ES_RUNTIME_JAVA=zulu8,nodes=general-purpose/378/console\r\n\r\n\r\ntrace:\r\n```\r\n08:28:13 ERROR   0.02s J4  | SamlAuthenticatorTests.testExpiredSubjectConfirmationDataIsRejected <<< FAILURES!\r\n08:28:13    > Throwable #1: java.lang.NoClassDefFoundError: Could not initialize class org.jcp.xml.dsig.internal.dom.DOMEnvelopedTransform\r\n08:28:13    > \tat __randomizedtesting.SeedInfo.seed([B2DB8D45606A2857:FB9658AEAD7098F9]:0)\r\n08:28:13    > \tat org.jcp.xml.dsig.internal.dom.XMLDSigRI$ProviderService.newInstance(XMLDSigRI.java:111)\r\n08:28:13    > \tat sun.security.jca.GetInstance.getInstance(GetInstance.java:236)\r\n08:28:13    > \tat javax.xml.crypto.dsig.TransformService.getInstance(TransformService.java:215)\r\n08:28:13    > \tat org.jcp.xml.dsig.internal.dom.DOMXMLSignatureFactory.newTransform(DOMXMLSignatureFactory.java:314)\r\n08:28:13    > \tat org.elasticsearch.xpack.security.authc.saml.SamlAuthenticatorTests.signElement(SamlAuthenticatorTests.java:1888)\r\n08:28:13    > \tat org.elasticsearch.xpack.security.authc.saml.SamlAuthenticatorTests.signDoc(SamlAuthenticatorTests.java:1794)\r\n08:28:13    > \tat org.elasticsearch.xpack.security.authc.saml.SamlAuthenticatorTests.signDoc(SamlAuthenticatorTests.java:1781)\r\n08:28:13    > \tat org.elasticsearch.xpack.security.authc.saml.SamlAuthenticatorTests.testExpiredSubjectConfirmationDataIsRejected(SamlAuthenticatorTests.java:1012)\r\n08:28:13    > \tat java.lang.Thread.run(Thread.java:748)\r\n08:28:13   1> [2019-12-10T15:28:12,118][INFO ][o.e.x.s.a.s.SamlAuthenticatorTests] [testAssetionWithoutBearerSubjectConfirmationMethodIsRejected] before test\r\n08:28:13   1> [2019-12-10T15:28:12,125][INFO ][o.e.x.s.a.s.SamlAuthenticatorTests] [testAssetionWithoutBearerSubjectConfirmationMethodIsRejected] after test\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/564513682","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-564513682","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":564513682,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDUxMzY4Mg==","user":{"login":"costin","id":76245,"node_id":"MDQ6VXNlcjc2MjQ1","avatar_url":"https://avatars3.githubusercontent.com/u/76245?v=4","gravatar_id":"","url":"https://api.github.com/users/costin","html_url":"https://github.com/costin","followers_url":"https://api.github.com/users/costin/followers","following_url":"https://api.github.com/users/costin/following{/other_user}","gists_url":"https://api.github.com/users/costin/gists{/gist_id}","starred_url":"https://api.github.com/users/costin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/costin/subscriptions","organizations_url":"https://api.github.com/users/costin/orgs","repos_url":"https://api.github.com/users/costin/repos","events_url":"https://api.github.com/users/costin/events{/privacy}","received_events_url":"https://api.github.com/users/costin/received_events","type":"User","site_admin":false},"created_at":"2019-12-11T12:14:37Z","updated_at":"2019-12-11T12:14:37Z","author_association":"MEMBER","body":"More failures here:\r\nhttps://gradle-enterprise.elastic.co/s/ehawjietnkici\r\nhttps://gradle-enterprise.elastic.co/s/qgihyqngvatsc\r\n6.8.6: https://gradle-enterprise.elastic.co/s/6u6gdrd3orlly\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/566975958","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-566975958","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":566975958,"node_id":"MDEyOklzc3VlQ29tbWVudDU2Njk3NTk1OA==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2019-12-18T10:37:19Z","updated_at":"2019-12-18T13:54:35Z","author_association":"MEMBER","body":"Other instances of this failure:\r\n* https://gradle-enterprise.elastic.co/s/7cizpde2pdbta (7.5)\r\n* https://gradle-enterprise.elastic.co/s/46tgc6weixs2a (7.x)\r\n* https://gradle-enterprise.elastic.co/s/5wtiy5o47qth4 (6.8)\r\n* https://gradle-enterprise.elastic.co/s/ldk2jihaaebbw/console-log#L7346 (6.8)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/567128527","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-567128527","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":567128527,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzEyODUyNw==","user":{"login":"albertzaharovits","id":4568420,"node_id":"MDQ6VXNlcjQ1Njg0MjA=","avatar_url":"https://avatars2.githubusercontent.com/u/4568420?v=4","gravatar_id":"","url":"https://api.github.com/users/albertzaharovits","html_url":"https://github.com/albertzaharovits","followers_url":"https://api.github.com/users/albertzaharovits/followers","following_url":"https://api.github.com/users/albertzaharovits/following{/other_user}","gists_url":"https://api.github.com/users/albertzaharovits/gists{/gist_id}","starred_url":"https://api.github.com/users/albertzaharovits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertzaharovits/subscriptions","organizations_url":"https://api.github.com/users/albertzaharovits/orgs","repos_url":"https://api.github.com/users/albertzaharovits/repos","events_url":"https://api.github.com/users/albertzaharovits/events{/privacy}","received_events_url":"https://api.github.com/users/albertzaharovits/received_events","type":"User","site_admin":false},"created_at":"2019-12-18T17:19:32Z","updated_at":"2019-12-18T17:19:32Z","author_association":"CONTRIBUTOR","body":"I looked into it a bit, I can repro with `zulu8` on MacOS.\r\nWhat I _believe_ is going on is that in `zulu8` a different XML signature provider is picked up compared to the other VMs. Usually it should be the one from `xmlsec-2.1.4.jar`, but `zulu8` picks one from `javax.xml.crypto` . This is odd, because I believe that packet is added in a module in java 9 but it's somehow available in `zulu8` ? \r\n@tvernum Maybe you have an idea about what's actually going on here?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/567184805","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-567184805","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":567184805,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzE4NDgwNQ==","user":{"login":"albertzaharovits","id":4568420,"node_id":"MDQ6VXNlcjQ1Njg0MjA=","avatar_url":"https://avatars2.githubusercontent.com/u/4568420?v=4","gravatar_id":"","url":"https://api.github.com/users/albertzaharovits","html_url":"https://github.com/albertzaharovits","followers_url":"https://api.github.com/users/albertzaharovits/followers","following_url":"https://api.github.com/users/albertzaharovits/following{/other_user}","gists_url":"https://api.github.com/users/albertzaharovits/gists{/gist_id}","starred_url":"https://api.github.com/users/albertzaharovits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertzaharovits/subscriptions","organizations_url":"https://api.github.com/users/albertzaharovits/orgs","repos_url":"https://api.github.com/users/albertzaharovits/repos","events_url":"https://api.github.com/users/albertzaharovits/events{/privacy}","received_events_url":"https://api.github.com/users/albertzaharovits/received_events","type":"User","site_admin":false},"created_at":"2019-12-18T19:49:41Z","updated_at":"2019-12-18T19:49:41Z","author_association":"CONTRIBUTOR","body":"Digging further, looks like `zulu8` has a different provider for XML signatures; other VMs use the provider from the `xmlsec-2.1.4.jar` (somehow without asking for special permissions). But `zulu8` requires the java security `\"java.security.SecurityPermission\" \"com.sun.org.apache.xml.internal.security.register\"`  to instantiate its provider, disregarding `xmlsec-2.1.4.jar` - its own provider is based on Apache Santuario anyway.\r\n\r\nThing is, I think this is not only a problem in the test, it must be a problem with the main code running on `zulu8` (it shouldn't be able to load the provider).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/567212738","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-567212738","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":567212738,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzIxMjczOA==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2019-12-18T21:05:54Z","updated_at":"2019-12-18T21:05:54Z","author_association":"CONTRIBUTOR","body":"I'll try and find some cycles to get my head around the details & options but I agree that the likely situation is that _right now_ zulu-latest doesn't work with ES-SAML.\r\n\r\nI'm going to ping @elastic/es-core-infra here because if it is the case that the latest Zulu release isn't compatible with some ES features then we need to think about what that means (Zulu is [official supported](https://www.elastic.co/support/matrix#matrix_jvm) for ES). Fixing it in ES is a good option (assuming we can) but we might consider raising it with Azul as well.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/567453187","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-567453187","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":567453187,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzQ1MzE4Nw==","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"created_at":"2019-12-19T11:33:06Z","updated_at":"2019-12-19T11:33:06Z","author_association":"MEMBER","body":"More occurrences:\r\n\r\nhttps://gradle-enterprise.elastic.co/s/6qyoiuxqvjzes\r\nhttps://gradle-enterprise.elastic.co/s/zqkvzbffbaacg \r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/570243012","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-570243012","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":570243012,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDI0MzAxMg==","user":{"login":"ebadyano","id":26631211,"node_id":"MDQ6VXNlcjI2NjMxMjEx","avatar_url":"https://avatars0.githubusercontent.com/u/26631211?v=4","gravatar_id":"","url":"https://api.github.com/users/ebadyano","html_url":"https://github.com/ebadyano","followers_url":"https://api.github.com/users/ebadyano/followers","following_url":"https://api.github.com/users/ebadyano/following{/other_user}","gists_url":"https://api.github.com/users/ebadyano/gists{/gist_id}","starred_url":"https://api.github.com/users/ebadyano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebadyano/subscriptions","organizations_url":"https://api.github.com/users/ebadyano/orgs","repos_url":"https://api.github.com/users/ebadyano/repos","events_url":"https://api.github.com/users/ebadyano/events{/privacy}","received_events_url":"https://api.github.com/users/ebadyano/received_events","type":"User","site_admin":false},"created_at":"2020-01-02T15:34:25Z","updated_at":"2020-01-02T23:04:49Z","author_association":"CONTRIBUTOR","body":"another one: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+matrix-java-periodic/ES_BUILD_JAVA=openjdk12,ES_RUNTIME_JAVA=zulu8,nodes=general-purpose/424/console\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.5+matrix-java-periodic/ES_BUILD_JAVA=openjdk12,ES_RUNTIME_JAVA=zulu8,nodes=general-purpose/157/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/570389072","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-570389072","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":570389072,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDM4OTA3Mg==","user":{"login":"ebadyano","id":26631211,"node_id":"MDQ6VXNlcjI2NjMxMjEx","avatar_url":"https://avatars0.githubusercontent.com/u/26631211?v=4","gravatar_id":"","url":"https://api.github.com/users/ebadyano","html_url":"https://github.com/ebadyano","followers_url":"https://api.github.com/users/ebadyano/followers","following_url":"https://api.github.com/users/ebadyano/following{/other_user}","gists_url":"https://api.github.com/users/ebadyano/gists{/gist_id}","starred_url":"https://api.github.com/users/ebadyano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebadyano/subscriptions","organizations_url":"https://api.github.com/users/ebadyano/orgs","repos_url":"https://api.github.com/users/ebadyano/repos","events_url":"https://api.github.com/users/ebadyano/events{/privacy}","received_events_url":"https://api.github.com/users/ebadyano/received_events","type":"User","site_admin":false},"created_at":"2020-01-02T23:00:36Z","updated_at":"2020-01-02T23:06:20Z","author_association":"CONTRIBUTOR","body":"Seems similar but not on zulu8: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.5+matrix-java-periodic/ES_BUILD_JAVA=openjdk12,ES_RUNTIME_JAVA=openjdk14,nodes=general-purpose/157/console\r\n\r\nActually it looks slightly different so might not be related.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/570525690","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-570525690","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":570525690,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDUyNTY5MA==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2020-01-03T10:03:47Z","updated_at":"2020-01-03T10:03:47Z","author_association":"MEMBER","body":"This looks similar to me too, on 7.5 branch:\r\n\r\n\r\nLog | https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.5+matrix-java-periodic/ES_BUILD_JAVA=openjdk12,ES_RUNTIME_JAVA=zulu8,nodes=general-purpose/158/console\r\n-- | --\r\nBuild Scans | [6.8.7] https://gradle-enterprise.elastic.co/s/ypgxnqoofbr5o [6.8.7] https://gradle-enterprise.elastic.co/s/6hhr54afwetnshttps://gradle-enterprise.elastic.co/s/dndprlv75g26q\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/570599865","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-570599865","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":570599865,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDU5OTg2NQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2020-01-03T15:13:19Z","updated_at":"2020-01-03T15:13:19Z","author_association":"MEMBER","body":"And there are similar looking failures on 6.8 as well i think. Looks like its using `ES_RUNTIME_JAVA=zulu8` as well. \r\n```\r\nFAILURE elastic/elasticsearch#6.8 fcb62f2 matrix-java-periodic/ES_BUILD_JAVA=openjdk12,ES_RUNTIME_JAVA=zulu8,nodes=general-purpose - 20200103114858-C621E61F\r\n```\r\n```\r\njava.lang.NoClassDefFoundError: Could not initialize class org.jcp.xml.dsig.internal.dom.DOMEnvelopedTransform\r\n\tat __randomizedtesting.SeedInfo.seed([343C023B414D657F:263C06ACA002A7E8]:0)\r\n\tat org.jcp.xml.dsig.internal.dom.XMLDSigRI$ProviderService.newInstance(XMLDSigRI.java:111)\r\n\tat sun.security.jca.GetInstance.getInstance(GetInstance.java:236)\r\n\tat javax.xml.crypto.dsig.TransformService.getInstance(TransformService.java:215)\r\n\tat org.jcp.xml.dsig.internal.dom.DOMXMLSignatureFactory.newTransform(DOMXMLSignatureFactory.java:314)\r\n\tat org.elasticsearch.xpack.security.authc.saml.SamlAuthenticatorTests.signElement(SamlAuthenticatorTests.java:1888)\r\n\tat org.elasticsearch.xpack.security.authc.saml.SamlAuthenticatorTests.signElement(SamlAuthenticatorTests.java:1848)\r\n[...]\r\n```\r\n\r\nLog | https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+matrix-java-periodic/ES_BUILD_JAVA=openjdk12,ES_RUNTIME_JAVA=zulu8,nodes=general-purpose/426/console\r\n-- | --\r\nBuild Scans | https://gradle-enterprise.elastic.co/s/c2dijmeatmnx4\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/571100385","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-571100385","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":571100385,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTEwMDM4NQ==","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"created_at":"2020-01-06T11:10:32Z","updated_at":"2020-01-06T11:10:32Z","author_association":"MEMBER","body":"Another failure\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.5+matrix-java-periodic/ES_BUILD_JAVA=openjdk12,ES_RUNTIME_JAVA=zulu8,nodes=general-purpose/164/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/571527090","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-571527090","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":571527090,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTUyNzA5MA==","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"created_at":"2020-01-07T10:23:21Z","updated_at":"2020-01-07T10:23:21Z","author_association":"CONTRIBUTOR","body":"there is another failure on 7.5 and zulu.\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.5+matrix-java-periodic/ES_BUILD_JAVA=openjdk12,ES_RUNTIME_JAVA=zulu8,nodes=general-purpose/166/console\r\n\r\nhttps://gradle-enterprise.elastic.co/s/sp2pwionxkl4w/tests/g5u3xltc4r2du-f6oqpzngs7vbw\r\n\r\n```\r\nREPRODUCE WITH: ./gradlew ':x-pack:plugin:security:test' --tests \"org.elasticsearch.xpack.security.authc.saml.SamlAuthenticatorTests.testIncorrectDestinationIsRejected\" -Dtests.seed=5F02BE6FC9DEAEC2 -Dtests.security.manager=true -Dtests.locale=en -Dtests.timezone=MET -Dcompiler.java=12 -Druntime.java=8\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/571559464","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-571559464","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":571559464,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTU1OTQ2NA==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2020-01-07T12:03:46Z","updated_at":"2020-01-07T12:03:46Z","author_association":"CONTRIBUTOR","body":"This is a test issue and doesn't affect our SAML functionality in Azul Zulu JVM.\r\n\r\nThis fails in `SamlAuthenticatorTests#signElement` were we are using `javax.xml.crypto.dsig.Transform` directly while \"manually\" creating signatures of SAML messages ( as opposed to using the opensaml API ) as it was deemed more appropriate when we first wrote the tests. In contrast, `SamlRedirectTests` where we are creating signed Authentication request messages using OpenSAML ( org.opensaml.xmlsec.crypto.XMLSigningUtil ) as our code does, this is not an issue. \r\n\r\nAs a matter of fact, `SamlAuthenticatorTests#signElement` is also the reason ( slightly different root cause regarding the lack of `XMLSignatureFactory` in BouncyCastle ) why we have SamlAuthenticator tests muted in FIPS 140. \r\n\r\nWe should resolve [this long standing TODO](https://github.com/elastic/elasticsearch/blob/c64f80b1f7149ee00e79f345c0edc6e2b605b515/x-pack/plugin/security/src/test/java/org/elasticsearch/xpack/security/authc/saml/SamlAuthenticatorTests.java#L132) and fix both problems at teh same time. I'll assign this to me.  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/571639821","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-571639821","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":571639821,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTYzOTgyMQ==","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"created_at":"2020-01-07T15:38:37Z","updated_at":"2020-01-07T15:38:37Z","author_association":"CONTRIBUTOR","body":"another failure but it is on 6.8, build with openjdk12 and run with zulu8 \r\nhttps://gradle-enterprise.elastic.co/s/bzgtd6uyt5abm","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572175093","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-572175093","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":572175093,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjE3NTA5Mw==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2020-01-08T17:33:09Z","updated_at":"2020-01-08T17:33:09Z","author_association":"MEMBER","body":"Another on 7.x: https://gradle-enterprise.elastic.co/s/zviozoqxyvcao","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572326459","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-572326459","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":572326459,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjMyNjQ1OQ==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2020-01-09T00:40:48Z","updated_at":"2020-01-09T00:40:48Z","author_association":"CONTRIBUTOR","body":"I think we should mute this test on Zulu until we fix it.\r\nI would do that, but I don't have a Zulu VM installed right now so I can't test it.\r\n\r\nA simple \r\n```\r\nassumeFalse(\"https://github.com/elastic/elasticsearch/issues/49742\",\r\n   System.getProperty(\"java.vendor\", \"unknown\").contains(\"azul\"));\r\n```\r\nshould do it (but we'd need to check exactly how Zulu identifies itself in the system properties, including case sensitivity, etc).\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572399590","html_url":"https://github.com/elastic/elasticsearch/issues/49742#issuecomment-572399590","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49742","id":572399590,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjM5OTU5MA==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2020-01-09T05:48:32Z","updated_at":"2020-01-09T05:48:32Z","author_association":"CONTRIBUTOR","body":"Started working on the necessary changes yesterday but didn't get to complete them, I'll wrap it up today but raised https://github.com/elastic/elasticsearch/pull/50779 to mute the failures in the meantime either way.","performed_via_github_app":null}]