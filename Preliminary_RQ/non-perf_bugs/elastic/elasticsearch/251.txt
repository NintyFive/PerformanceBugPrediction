{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/251","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/251/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/251/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/251/events","html_url":"https://github.com/elastic/elasticsearch/issues/251","id":244565,"node_id":"MDU6SXNzdWUyNDQ1NjU=","number":251,"title":"NPE in NettyTransport when HTTP is enabled","user":{"login":"oravecz","id":297712,"node_id":"MDQ6VXNlcjI5NzcxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/297712?v=4","gravatar_id":"","url":"https://api.github.com/users/oravecz","html_url":"https://github.com/oravecz","followers_url":"https://api.github.com/users/oravecz/followers","following_url":"https://api.github.com/users/oravecz/following{/other_user}","gists_url":"https://api.github.com/users/oravecz/gists{/gist_id}","starred_url":"https://api.github.com/users/oravecz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oravecz/subscriptions","organizations_url":"https://api.github.com/users/oravecz/orgs","repos_url":"https://api.github.com/users/oravecz/repos","events_url":"https://api.github.com/users/oravecz/events{/privacy}","received_events_url":"https://api.github.com/users/oravecz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2010-07-11T22:00:11Z","updated_at":"2010-07-14T08:31:48Z","closed_at":"2010-07-14T08:31:48Z","author_association":"NONE","active_lock_reason":null,"body":"I'm connecting to an Elastic Search server started in the same VM with my client. The server does not have http enabled. \n\nI am able to connect and index documents when I create a client using this approach:\n    localNode = nodeBuilder().client(true).node();\n    return localNode.client();\n\nWhen I try to disable http on the client, I get the stacktrace shown at the end of this post:\n    localNode = nodeBuilder().client(true).settings(settingsBuilder().put(\"http.enabled\", false)).build();\n    return localNode.client();\n# Stacktrace\n\n WARN thread-1                    ElasticSearchListener: 138 - Failed to index [bucket][key]\norg.elasticsearch.transport.SendRequestTransportException: [indices/createIndex]\n    at org.elasticsearch.transport.RemoteTransportException.fillStack(RemoteTransportException.java:58)\n    at org.elasticsearch.transport.SendRequestTransportException.fillInStackTrace(SendRequestTransportException.java:34)\n    at java.lang.Throwable.<init>(Throwable.java:218)\n    at java.lang.Exception.<init>(Exception.java:59)\n    at java.lang.RuntimeException.<init>(RuntimeException.java:61)\n    at org.elasticsearch.ElasticSearchException.<init>(ElasticSearchException.java:46)\n    at org.elasticsearch.transport.TransportException.<init>(TransportException.java:34)\n    at org.elasticsearch.transport.RemoteTransportException.<init>(RemoteTransportException.java:39)\n    at org.elasticsearch.transport.SendRequestTransportException.<init>(SendRequestTransportException.java:30)\n    at org.elasticsearch.transport.TransportService$2.run(TransportService.java:197)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:637)\nCaused by: java.lang.NullPointerException\n    at org.elasticsearch.transport.netty.NettyTransport.nodeChannel(NettyTransport.java:487)\n    at org.elasticsearch.transport.netty.NettyTransport.sendRequest(NettyTransport.java:383)\n    at org.elasticsearch.transport.TransportService.sendRequest(TransportService.java:183)\n    at org.elasticsearch.transport.TransportService.sendRequest(TransportService.java:171)\n    at org.elasticsearch.action.support.master.TransportMasterNodeOperationAction.doExecute(TransportMasterNodeOperationAction.java:76)\n    at org.elasticsearch.action.support.master.TransportMasterNodeOperationAction.doExecute(TransportMasterNodeOperationAction.java:37)\n    at org.elasticsearch.action.support.BaseAction.execute(BaseAction.java:54)\n    at org.elasticsearch.action.index.TransportIndexAction.doExecute(TransportIndexAction.java:85)\n    at org.elasticsearch.action.index.TransportIndexAction.doExecute(TransportIndexAction.java:56)\n    at org.elasticsearch.action.support.BaseAction.execute(BaseAction.java:54)\n    at org.elasticsearch.client.node.NodeClient.index(NodeClient.java:115)\n    at com.tracermedia.hazelcast.ElasticSearchListener.store(ElasticSearchListener.java:131)\n    at com.tracermedia.hazelcast.ElasticSearchListenerContainer.store(ElasticSearchListenerContainer.java:148)\n    at BridgeTest.testOnValueChangedAndRemoved(BridgeTest.java:65)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.testng.internal.MethodHelper.invokeMethod(MethodHelper.java:643)\n    at org.testng.internal.MethodHelper$1.runTestMethod(MethodHelper.java:761)\n    at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.run(AbstractTestNGSpringContextTests.java:158)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.testng.internal.MethodHelper.invokeHookable(MethodHelper.java:769)\n    at org.testng.internal.Invoker.invokeMethod(Invoker.java:552)\n    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:723)\n    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1027)\n    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:137)\n    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:121)\n    at org.testng.TestRunner.runWorkers(TestRunner.java:1030)\n    at org.testng.TestRunner.privateRun(TestRunner.java:709)\n    at org.testng.TestRunner.run(TestRunner.java:579)\n    at org.testng.SuiteRunner.runTest(SuiteRunner.java:331)\n    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:326)\n    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:288)\n    at org.testng.SuiteRunner.run(SuiteRunner.java:193)\n    at org.testng.TestNG.createAndRunSuiteRunners(TestNG.java:910)\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:879)\n    at org.testng.TestNG.run(TestNG.java:787)\n    at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:62)\n    at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:141)\n    at org.apache.maven.surefire.Surefire.run(Surefire.java:177)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:345)\n    at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1009)\n","closed_by":null,"performed_via_github_app":null}