{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23144","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23144/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23144/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23144/events","html_url":"https://github.com/elastic/elasticsearch/issues/23144","id":207219078,"node_id":"MDU6SXNzdWUyMDcyMTkwNzg=","number":23144,"title":"ClassCastException with ES 5.2 and reindex requests","user":{"login":"salyh","id":3762447,"node_id":"MDQ6VXNlcjM3NjI0NDc=","avatar_url":"https://avatars1.githubusercontent.com/u/3762447?v=4","gravatar_id":"","url":"https://api.github.com/users/salyh","html_url":"https://github.com/salyh","followers_url":"https://api.github.com/users/salyh/followers","following_url":"https://api.github.com/users/salyh/following{/other_user}","gists_url":"https://api.github.com/users/salyh/gists{/gist_id}","starred_url":"https://api.github.com/users/salyh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/salyh/subscriptions","organizations_url":"https://api.github.com/users/salyh/orgs","repos_url":"https://api.github.com/users/salyh/repos","events_url":"https://api.github.com/users/salyh/events{/privacy}","received_events_url":"https://api.github.com/users/salyh/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-02-13T13:31:15Z","updated_at":"2017-02-13T19:15:19Z","closed_at":"2017-02-13T19:15:19Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Elasticsearch Version: 5.2.0\r\n\r\nI write a plugin where i need to check if a request is a `ReindexRequest` and if so i like to cast the `ActionRequest` type to `ReindexRequest` type and do something with it.\r\n\r\nWithin an `ActionFilter` implementation in the `apply()` method i check if `request instanceof ReindexRequest` but it appears that this _instanceof_ comparison fails because `request` and `ReindexRequest` seems to be the same class but loaded by different classloaders. Looks like one side of the comparison is loaded by the plugin classloader and the other by the \"main\" elasticsearch classloader or the reindex module classloader.\r\n\r\nIn the my plugin dependencies i added a dep to org.elasticsearch.plugin:reindex-client:5.2.0","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}