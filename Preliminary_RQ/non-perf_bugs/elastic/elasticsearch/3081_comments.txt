[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18365085","html_url":"https://github.com/elastic/elasticsearch/issues/3081#issuecomment-18365085","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3081","id":18365085,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MzY1MDg1","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-05-23T19:09:01Z","updated_at":"2013-05-23T19:09:01Z","author_association":"CONTRIBUTOR","body":"which version are you using?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18598637","html_url":"https://github.com/elastic/elasticsearch/issues/3081#issuecomment-18598637","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3081","id":18598637,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NTk4NjM3","user":{"login":"matte","id":2851,"node_id":"MDQ6VXNlcjI4NTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2851?v=4","gravatar_id":"","url":"https://api.github.com/users/matte","html_url":"https://github.com/matte","followers_url":"https://api.github.com/users/matte/followers","following_url":"https://api.github.com/users/matte/following{/other_user}","gists_url":"https://api.github.com/users/matte/gists{/gist_id}","starred_url":"https://api.github.com/users/matte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matte/subscriptions","organizations_url":"https://api.github.com/users/matte/orgs","repos_url":"https://api.github.com/users/matte/repos","events_url":"https://api.github.com/users/matte/events{/privacy}","received_events_url":"https://api.github.com/users/matte/received_events","type":"User","site_admin":false},"created_at":"2013-05-29T06:41:20Z","updated_at":"2013-05-29T06:41:52Z","author_association":"NONE","body":"ElasticSearch 0.90\n java -version\njava version \"1.6.0_43\"\nJava(TM) SE Runtime Environment (build 1.6.0_43-b01-447-11M4203)\nJava HotSpot(TM) 64-Bit Server VM (build 20.14-b01-447, mixed mode)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18606969","html_url":"https://github.com/elastic/elasticsearch/issues/3081#issuecomment-18606969","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3081","id":18606969,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NjA2OTY5","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-05-29T10:09:21Z","updated_at":"2013-05-29T10:09:21Z","author_association":"CONTRIBUTOR","body":"you are running with`\"all_terms\" = true` I don't think this is going to work though. do you really need all terms here? Can you afford to not load low frequent terms like users that only occur once?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18638113","html_url":"https://github.com/elastic/elasticsearch/issues/3081#issuecomment-18638113","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3081","id":18638113,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NjM4MTEz","user":{"login":"matte","id":2851,"node_id":"MDQ6VXNlcjI4NTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2851?v=4","gravatar_id":"","url":"https://api.github.com/users/matte","html_url":"https://github.com/matte","followers_url":"https://api.github.com/users/matte/followers","following_url":"https://api.github.com/users/matte/following{/other_user}","gists_url":"https://api.github.com/users/matte/gists{/gist_id}","starred_url":"https://api.github.com/users/matte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matte/subscriptions","organizations_url":"https://api.github.com/users/matte/orgs","repos_url":"https://api.github.com/users/matte/repos","events_url":"https://api.github.com/users/matte/events{/privacy}","received_events_url":"https://api.github.com/users/matte/received_events","type":"User","site_admin":false},"created_at":"2013-05-29T18:54:02Z","updated_at":"2013-05-29T18:54:02Z","author_association":"NONE","body":"Yes  I am running with all_term and have 16gb of ram on a 16gb maching. Elastic search's  java is only taking 1gb and I get a heap exception?  I only have 5mil unique ints for the id which is in the order of megabytes in size.\n\nAlso this simple query gives a heap exception\n{\n          \"from\": 0,\n          \"size\": 1000,\n         \"query\" : {\n              \"match\" : { \"sp_user\": 21884751 }\n          },\n          \"sort\" : [\n                  { \"at\" : {\"order\" : \"asc\" } }\n          ]\n\n  }\n\nif I remove the sort get 14 results back.\n\nany ideas?\n\n[2013-05-29 11:51:16,903][DEBUG][action.search.type       ] [ap_master_a] [touches][0], node[ekcir6kyRJOeC3K6AoQ9uA], [P], s[STARTED]: Failed to execute [org.elasticsearch.action.search.SearchRequest@63630762]\norg.elasticsearch.search.query.QueryPhaseExecutionException: [touches][0]: query[filtered(sp_user:[21884751 TO 21884751])->cache(_type:touch)],from[0],size[1000],sort[<custom:\"at\": org.elasticsearch.index.fielddata.fieldcomparator.LongValuesComparatorSource@5d29be53>]: Query Failed [Failed to execute main query]\n    at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:138)\n    at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:239)\n    at org.elasticsearch.search.action.SearchServiceTransportAction.sendExecuteQuery(SearchServiceTransportAction.java:141)\n    at org.elasticsearch.action.search.type.TransportSearchQueryThenFetchAction$AsyncAction.sendExecuteFirstPhase(TransportSearchQueryThenFetchAction.java:80)\n    at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.performFirstPhase(TransportSearchTypeAction.java:205)\n    at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.performFirstPhase(TransportSearchTypeAction.java:192)\n    at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$2.run(TransportSearchTypeAction.java:178)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)\n    at java.lang.Thread.run(Thread.java:680)\nCaused by: org.elasticsearch.ElasticSearchException: java.lang.OutOfMemoryError: Java heap space\n    at org.elasticsearch.index.fielddata.plain.LongArrayIndexFieldData.load(LongArrayIndexFieldData.java:81)\n    at org.elasticsearch.index.fielddata.fieldcomparator.LongValuesComparatorBase.setNextReader(LongValuesComparatorBase.java:68)\n    at org.apache.lucene.search.TopFieldCollector$OneComparatorNonScoringCollector.setNextReader(TopFieldCollector.java:97)\n    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:602)\n    at org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:161)\n    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:572)\n    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:524)\n    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:501)\n    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:345)\n    at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:127)\n    ... 9 more\nCaused by: org.elasticsearch.common.util.concurrent.ExecutionError: java.lang.OutOfMemoryError: Java heap space\n    at org.elasticsearch.common.cache.LocalCache$Segment.get(LocalCache.java:2261)\n    at org.elasticsearch.common.cache.LocalCache.get(LocalCache.java:4000)\n    at org.elasticsearch.common.cache.LocalCache$LocalManualCache.get(LocalCache.java:4789)\n    at org.elasticsearch.indices.fielddata.cache.IndicesFieldDataCache$IndexFieldCache.load(IndicesFieldDataCache.java:144)\n    at org.elasticsearch.index.fielddata.plain.LongArrayIndexFieldData.load(LongArrayIndexFieldData.java:76)\n    ... 18 more\nCaused by: java.lang.OutOfMemoryError: Java heap space\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18638429","html_url":"https://github.com/elastic/elasticsearch/issues/3081#issuecomment-18638429","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3081","id":18638429,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NjM4NDI5","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-05-29T18:58:19Z","updated_at":"2013-05-29T18:58:19Z","author_association":"CONTRIBUTOR","body":"do you configure the heap for ES? how much heap are you giving it via ES_HEAP_SIZE ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18641910","html_url":"https://github.com/elastic/elasticsearch/issues/3081#issuecomment-18641910","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3081","id":18641910,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NjQxOTEw","user":{"login":"matte","id":2851,"node_id":"MDQ6VXNlcjI4NTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2851?v=4","gravatar_id":"","url":"https://api.github.com/users/matte","html_url":"https://github.com/matte","followers_url":"https://api.github.com/users/matte/followers","following_url":"https://api.github.com/users/matte/following{/other_user}","gists_url":"https://api.github.com/users/matte/gists{/gist_id}","starred_url":"https://api.github.com/users/matte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matte/subscriptions","organizations_url":"https://api.github.com/users/matte/orgs","repos_url":"https://api.github.com/users/matte/repos","events_url":"https://api.github.com/users/matte/events{/privacy}","received_events_url":"https://api.github.com/users/matte/received_events","type":"User","site_admin":false},"created_at":"2013-05-29T19:56:51Z","updated_at":"2013-05-29T19:56:51Z","author_association":"NONE","body":"Thanks for the quick response!  I'm at idiot and did not set it for the test server!\n\nSorry to waste your time.\n\nKeep being awesome!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18642043","html_url":"https://github.com/elastic/elasticsearch/issues/3081#issuecomment-18642043","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3081","id":18642043,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NjQyMDQz","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-05-29T19:59:27Z","updated_at":"2013-05-29T19:59:27Z","author_association":"CONTRIBUTOR","body":"don't worry! thanks for bringing closure to this. It's important for us to get this feedback and things like this make us think about the defaults and keeps on improving the system. Just hypothetically we could issue a warning to prevent these kind of errors in the future. just another example of how tricky this stuff still is!\n\nsimon\n","performed_via_github_app":null}]