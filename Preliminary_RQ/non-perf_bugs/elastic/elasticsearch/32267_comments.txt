[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/406849892","html_url":"https://github.com/elastic/elasticsearch/issues/32267#issuecomment-406849892","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32267","id":406849892,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjg0OTg5Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-07-22T08:29:05Z","updated_at":"2018-07-22T08:29:05Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/407630939","html_url":"https://github.com/elastic/elasticsearch/issues/32267#issuecomment-407630939","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32267","id":407630939,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzYzMDkzOQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-07-25T04:38:50Z","updated_at":"2018-07-25T05:13:22Z","author_association":"MEMBER","body":"`index.store.type` is a per-index setting which means that even if all existing indices are created with `index.store.type` set to `niofs`, later indices could be created with the default setting of `mmapfs` which could still run into a problem of not having enough virtual address space or allowed memory maps (the point of the max map count check). Moreover, index settings are not readily available to us when executing the bootstrap checks.\r\n\r\nI think that we can and should solve this though. I think that we can add a new setting which enumerates the permitted index store types. If `mmapfs` is not included in the permitted index store types, then we can skip the bootstrap checks that ensure that we have sufficient limits for memory mapping files. We will then not allow indices with a non-permitted store type.\r\n\r\nHowever, this will require a refactoring of how plugins provide additional store types, otherwise we would not be able to validate the list of permitted store types.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/407858714","html_url":"https://github.com/elastic/elasticsearch/issues/32267#issuecomment-407858714","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32267","id":407858714,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzg1ODcxNA==","user":{"login":"jibbe","id":22945729,"node_id":"MDQ6VXNlcjIyOTQ1NzI5","avatar_url":"https://avatars0.githubusercontent.com/u/22945729?v=4","gravatar_id":"","url":"https://api.github.com/users/jibbe","html_url":"https://github.com/jibbe","followers_url":"https://api.github.com/users/jibbe/followers","following_url":"https://api.github.com/users/jibbe/following{/other_user}","gists_url":"https://api.github.com/users/jibbe/gists{/gist_id}","starred_url":"https://api.github.com/users/jibbe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jibbe/subscriptions","organizations_url":"https://api.github.com/users/jibbe/orgs","repos_url":"https://api.github.com/users/jibbe/repos","events_url":"https://api.github.com/users/jibbe/events{/privacy}","received_events_url":"https://api.github.com/users/jibbe/received_events","type":"User","site_admin":false},"created_at":"2018-07-25T18:53:31Z","updated_at":"2018-07-25T18:59:35Z","author_association":"NONE","body":"That's a great approach and thanks for the interest (and work already).\r\n\r\nI recompiled 6.3.1 and built the ES docker image with the maxmapcheck commended out for a test (it took a while to set up that dev environment, mostly around the ES docker build process). I then extended that image for config and have it deployed into Openshift Origin (with no privileged containers) for a 3 pod master deployment. That seems to work and the masters see each other. Still working on a StatefulSet for the data pods to verify it will all work.\r\n\r\nI'm basing the kubernetes config off https://github.com/pires/kubernetes-elasticsearch-cluster, however with the official ES docker image and will probably convert to Openshift DeploymentConfig for imagestream support.  Getting this working in Openshift Online will be a HUGE bonus for us.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/414859457","html_url":"https://github.com/elastic/elasticsearch/issues/32267#issuecomment-414859457","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32267","id":414859457,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDg1OTQ1Nw==","user":{"login":"jibbe","id":22945729,"node_id":"MDQ6VXNlcjIyOTQ1NzI5","avatar_url":"https://avatars0.githubusercontent.com/u/22945729?v=4","gravatar_id":"","url":"https://api.github.com/users/jibbe","html_url":"https://github.com/jibbe","followers_url":"https://api.github.com/users/jibbe/followers","following_url":"https://api.github.com/users/jibbe/following{/other_user}","gists_url":"https://api.github.com/users/jibbe/gists{/gist_id}","starred_url":"https://api.github.com/users/jibbe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jibbe/subscriptions","organizations_url":"https://api.github.com/users/jibbe/orgs","repos_url":"https://api.github.com/users/jibbe/repos","events_url":"https://api.github.com/users/jibbe/events{/privacy}","received_events_url":"https://api.github.com/users/jibbe/received_events","type":"User","site_admin":false},"created_at":"2018-08-21T23:54:52Z","updated_at":"2018-08-21T23:54:52Z","author_association":"NONE","body":"you rock @jasontedor !! thankyou.\r\n\r\nwill build new images of master and test shortly.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/414901924","html_url":"https://github.com/elastic/elasticsearch/issues/32267#issuecomment-414901924","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32267","id":414901924,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDkwMTkyNA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-08-22T03:54:47Z","updated_at":"2018-08-22T03:54:47Z","author_association":"MEMBER","body":"Thanks a lot for that @jibbe. Please let us know how the testing goes, this use-case is important to us.","performed_via_github_app":null}]