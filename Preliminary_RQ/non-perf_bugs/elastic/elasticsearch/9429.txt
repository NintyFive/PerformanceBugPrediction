{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9429","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9429/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9429/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9429/events","html_url":"https://github.com/elastic/elasticsearch/issues/9429","id":55547379,"node_id":"MDU6SXNzdWU1NTU0NzM3OQ==","number":9429,"title":"Multiple connections to the cluster raises exceptions.","user":{"login":"opgalarza","id":10526489,"node_id":"MDQ6VXNlcjEwNTI2NDg5","avatar_url":"https://avatars1.githubusercontent.com/u/10526489?v=4","gravatar_id":"","url":"https://api.github.com/users/opgalarza","html_url":"https://github.com/opgalarza","followers_url":"https://api.github.com/users/opgalarza/followers","following_url":"https://api.github.com/users/opgalarza/following{/other_user}","gists_url":"https://api.github.com/users/opgalarza/gists{/gist_id}","starred_url":"https://api.github.com/users/opgalarza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opgalarza/subscriptions","organizations_url":"https://api.github.com/users/opgalarza/orgs","repos_url":"https://api.github.com/users/opgalarza/repos","events_url":"https://api.github.com/users/opgalarza/events{/privacy}","received_events_url":"https://api.github.com/users/opgalarza/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-01-26T22:31:43Z","updated_at":"2015-01-27T01:04:30Z","closed_at":"2015-01-27T01:04:30Z","author_association":"NONE","active_lock_reason":null,"body":"Hi, \n\nThe issue is that I have an application which spawn multiple threads and each thread gets a connection to the cluster. Then each thread sends many lines to be persisted in elasticsearch and then suddenly i start getting exceptions.\n\nI wrote a small client to show this issue so you can be able to replicate it. Just clone it and run mvn install and then you can execute the jar file.  The code can be found here :\n\nhttps://github.com/opgalarza/ESWriter\n\nCommand to execute jar :\n\njava -jar jar-file numberOfLinesToSend portNumber hostName clusterName\n\nThe poc sends the number of lines that you input as a parameter.\n\nThe exception I am getting is the following :\n\norg.elasticsearch.client.transport.NoNodeAvailableException: None of the configured nodes are available: []\n    at org.elasticsearch.client.transport.TransportClientNodesService.ensureNodesAreAvailable(TransportClientNodesService.java:278)\n    at org.elasticsearch.client.transport.TransportClientNodesService.execute(TransportClientNodesService.java:197)\n    at org.elasticsearch.client.transport.support.InternalTransportClient.execute(InternalTransportClient.java:106)\n    at org.elasticsearch.client.support.AbstractClient.index(AbstractClient.java:98)\n    at org.elasticsearch.client.transport.TransportClient.index(TransportClient.java:334)\n    at org.elasticsearch.action.index.IndexRequestBuilder.doExecute(IndexRequestBuilder.java:313)\n    at org.elasticsearch.action.ActionRequestBuilder.execute(ActionRequestBuilder.java:91)\n    at org.elasticsearch.action.ActionRequestBuilder.execute(ActionRequestBuilder.java:65)\n    at com.mindgeek.service.GetService.putDocument(GetService.java:24)\n    at com.mindgeek.worker.ElasticSearchPersistentWorker.run(ElasticSearchPersistentWorker.java:34)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:262)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\n\nwhat am I doing wrong???\n\nCheers\nOmar\n","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}