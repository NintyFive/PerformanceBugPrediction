[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/415452989","html_url":"https://github.com/elastic/elasticsearch/issues/33096#issuecomment-415452989","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33096","id":415452989,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNTQ1Mjk4OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-08-23T15:08:45Z","updated_at":"2018-08-23T15:08:45Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/415519850","html_url":"https://github.com/elastic/elasticsearch/issues/33096#issuecomment-415519850","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33096","id":415519850,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNTUxOTg1MA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-08-23T18:23:32Z","updated_at":"2018-08-23T18:23:32Z","author_association":"CONTRIBUTOR","body":"This is almost certainly a networking issue, and may not be detectable by `ping` alone. It indicates that TCP traffic is dropped on a connection after it's been open for a while, which is quite different from what `ping` determines.\r\n\r\nWe prefer to keep Github issues for confirmed bug reports and as this seems, on the face of it, to be an environmental issue I'm going to close this and ask you to open a thread on https://discuss.elastic.co/c/elasticsearch. In your post there could you share more of your logs, including the timestamps, so we can see if there is any kind of pattern to the traffic getting dropped. If there are any other related log messages that suggest connectivity issues then also share them there.\r\n\r\nThis doesn't sound like an _idle_ connection problem, but please note that [Elasticsearch expects connections to remain open for extended periods](https://www.elastic.co/guide/en/elasticsearch/reference/6.3/modules-transport.html#_long_lived_idle_connections) so make sure there's nothing configured to interfere with this expectation.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/417208578","html_url":"https://github.com/elastic/elasticsearch/issues/33096#issuecomment-417208578","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33096","id":417208578,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNzIwODU3OA==","user":{"login":"eranhirs","id":3372820,"node_id":"MDQ6VXNlcjMzNzI4MjA=","avatar_url":"https://avatars1.githubusercontent.com/u/3372820?v=4","gravatar_id":"","url":"https://api.github.com/users/eranhirs","html_url":"https://github.com/eranhirs","followers_url":"https://api.github.com/users/eranhirs/followers","following_url":"https://api.github.com/users/eranhirs/following{/other_user}","gists_url":"https://api.github.com/users/eranhirs/gists{/gist_id}","starred_url":"https://api.github.com/users/eranhirs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eranhirs/subscriptions","organizations_url":"https://api.github.com/users/eranhirs/orgs","repos_url":"https://api.github.com/users/eranhirs/repos","events_url":"https://api.github.com/users/eranhirs/events{/privacy}","received_events_url":"https://api.github.com/users/eranhirs/received_events","type":"User","site_admin":false},"created_at":"2018-08-30T06:48:35Z","updated_at":"2018-08-30T06:48:35Z","author_association":"NONE","body":"Just in case anyone runs into this, we eventually solved this.\r\n\r\n(1) Apparently, in Google Compute connections get disconnected after 10 minutes, which is pretty low (the default for ubuntu is 2 hours keep alive pings).\r\nThe source for this is [here](https://cloud.google.com/compute/docs/troubleshooting/general-tips).\r\nThey even recommend in this link which values to actually use, which are lower than our initial try.\r\n\r\n(2) Another problem we had, is that `docker` requires it's own definition of `sysctl`, so changing ubuntu's config didn't actually do anything.\r\n\r\nWe didn't have one disconnect in 5 days.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/417341274","html_url":"https://github.com/elastic/elasticsearch/issues/33096#issuecomment-417341274","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33096","id":417341274,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNzM0MTI3NA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-08-30T14:33:02Z","updated_at":"2018-08-30T14:33:02Z","author_association":"CONTRIBUTOR","body":"Excellent, thanks for reporting back @eranhirs. Glad to hear it's resolved.","performed_via_github_app":null}]