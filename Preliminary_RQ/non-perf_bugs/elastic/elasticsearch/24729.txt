{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/24729","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24729/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24729/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24729/events","html_url":"https://github.com/elastic/elasticsearch/issues/24729","id":229249672,"node_id":"MDU6SXNzdWUyMjkyNDk2NzI=","number":24729,"title":"Misleading behavior with invalid Content-Length header","user":{"login":"jsmucr","id":7695853,"node_id":"MDQ6VXNlcjc2OTU4NTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7695853?v=4","gravatar_id":"","url":"https://api.github.com/users/jsmucr","html_url":"https://github.com/jsmucr","followers_url":"https://api.github.com/users/jsmucr/followers","following_url":"https://api.github.com/users/jsmucr/following{/other_user}","gists_url":"https://api.github.com/users/jsmucr/gists{/gist_id}","starred_url":"https://api.github.com/users/jsmucr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsmucr/subscriptions","organizations_url":"https://api.github.com/users/jsmucr/orgs","repos_url":"https://api.github.com/users/jsmucr/repos","events_url":"https://api.github.com/users/jsmucr/events{/privacy}","received_events_url":"https://api.github.com/users/jsmucr/received_events","type":"User","site_admin":false},"labels":[{"id":146854632,"node_id":"MDU6TGFiZWwxNDY4NTQ2MzI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Network","name":":Distributed/Network","color":"0e8a16","default":false,"description":"Http and internode communication implementations"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":113234020,"node_id":"MDU6TGFiZWwxMTMyMzQwMjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/stalled","name":"stalled","color":"fef2c0","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"assignees":[{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2017-05-17T06:27:48Z","updated_at":"2017-07-06T19:37:01Z","closed_at":"2017-07-06T19:37:01Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: 5.4.0\r\n\r\n**Plugins installed**: Netty4Plugin, GroovyPlugin\r\n\r\n**JVM version**: 1.8.0_45\r\n\r\n**OS version**: Windows 8.1\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nIf you accidentally replace `Content-Type: application/json` with `Content-Length: application/json` (may happen with some REST clients easily) in the `search` query, ES behaves as if you queried for all the data, not just the subset.\r\n\r\n* Expected behavior: ES returns `400 Bad Request`\r\n* Actual behavior: ES returns the full result set (`match_all` query).\r\n\r\n**Steps to reproduce**:\r\nSend `Content-Length: application/json` header instead of `Content-Type: application/json` querying a specific subset of data. For example:\r\n\r\n    POST http://localhost:9200/messages/artifact/_search\r\n    Content-Length: application/json\r\n\r\n    {\r\n        \"query\": {\r\n            \"term\": {\r\n                \"type\": \"vda\"\r\n            }\r\n        }\r\n    }\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}