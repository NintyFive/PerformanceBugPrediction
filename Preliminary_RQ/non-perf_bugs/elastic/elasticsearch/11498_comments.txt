[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/112601597","html_url":"https://github.com/elastic/elasticsearch/issues/11498#issuecomment-112601597","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11498","id":112601597,"node_id":"MDEyOklzc3VlQ29tbWVudDExMjYwMTU5Nw==","user":{"login":"szroland","id":10174523,"node_id":"MDQ6VXNlcjEwMTc0NTIz","avatar_url":"https://avatars2.githubusercontent.com/u/10174523?v=4","gravatar_id":"","url":"https://api.github.com/users/szroland","html_url":"https://github.com/szroland","followers_url":"https://api.github.com/users/szroland/followers","following_url":"https://api.github.com/users/szroland/following{/other_user}","gists_url":"https://api.github.com/users/szroland/gists{/gist_id}","starred_url":"https://api.github.com/users/szroland/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szroland/subscriptions","organizations_url":"https://api.github.com/users/szroland/orgs","repos_url":"https://api.github.com/users/szroland/repos","events_url":"https://api.github.com/users/szroland/events{/privacy}","received_events_url":"https://api.github.com/users/szroland/received_events","type":"User","site_admin":false},"created_at":"2015-06-16T23:28:01Z","updated_at":"2015-06-16T23:28:01Z","author_association":"CONTRIBUTOR","body":"This will not only fail with booleans, but with other non-numeric values as well, e.g.\n\n```\n{\n  a: 3,\n  foo: {\n    value: []\n  }\n}\n```\n\n```\ntype: \"json_parse_exception\"\nreason: \"Current token (START_ARRAY) not numeric, can not use numeric value accessors at [Source: org.elasticsearch.common.io.stream.InputStreamStreamInput@2725adf1; line: 4, column: 13]\"\n```\n\nIgnoring malformed values depends on the code throwing an `IllegalArgumentException` or `MapperParsingException` but here a `JsonParseException` is thrown. The solution would be to check the token type in `AbstractXContentParser.intValue()`, `shortValue()`, etc. after the String check, and if it is not numeric, do not even try parsing the value, throw an `IllegalArgumentException` immediately.\n\nThis touches the same area of code as #11513. Happy to take a stab if you all agree.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162243371","html_url":"https://github.com/elastic/elasticsearch/issues/11498#issuecomment-162243371","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11498","id":162243371,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjI0MzM3MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-12-05T20:25:31Z","updated_at":"2015-12-05T20:25:31Z","author_association":"CONTRIBUTOR","body":"Closing in favour of #11513\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219199001","html_url":"https://github.com/elastic/elasticsearch/issues/11498#issuecomment-219199001","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11498","id":219199001,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTE5OTAwMQ==","user":{"login":"lwiskowski","id":14267862,"node_id":"MDQ6VXNlcjE0MjY3ODYy","avatar_url":"https://avatars1.githubusercontent.com/u/14267862?v=4","gravatar_id":"","url":"https://api.github.com/users/lwiskowski","html_url":"https://github.com/lwiskowski","followers_url":"https://api.github.com/users/lwiskowski/followers","following_url":"https://api.github.com/users/lwiskowski/following{/other_user}","gists_url":"https://api.github.com/users/lwiskowski/gists{/gist_id}","starred_url":"https://api.github.com/users/lwiskowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lwiskowski/subscriptions","organizations_url":"https://api.github.com/users/lwiskowski/orgs","repos_url":"https://api.github.com/users/lwiskowski/repos","events_url":"https://api.github.com/users/lwiskowski/events{/privacy}","received_events_url":"https://api.github.com/users/lwiskowski/received_events","type":"User","site_admin":false},"created_at":"2016-05-14T04:00:45Z","updated_at":"2016-05-14T04:00:45Z","author_association":"NONE","body":"I changed AbstactXContentParser.java to address this issue. I will do a pull request with the updated code\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/309729595","html_url":"https://github.com/elastic/elasticsearch/issues/11498#issuecomment-309729595","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11498","id":309729595,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTcyOTU5NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-06-20T11:51:00Z","updated_at":"2017-06-20T11:51:00Z","author_association":"CONTRIBUTOR","body":"Related to https://github.com/elastic/elasticsearch/issues/12366","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372755009","html_url":"https://github.com/elastic/elasticsearch/issues/11498#issuecomment-372755009","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11498","id":372755009,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mjc1NTAwOQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2018-03-13T17:42:37Z","updated_at":"2018-03-13T17:42:37Z","author_association":"CONTRIBUTOR","body":"cc @elastic/es-search-aggs ","performed_via_github_app":null}]