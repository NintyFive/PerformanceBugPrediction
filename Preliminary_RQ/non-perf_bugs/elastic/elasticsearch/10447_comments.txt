[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90245390","html_url":"https://github.com/elastic/elasticsearch/issues/10447#issuecomment-90245390","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10447","id":90245390,"node_id":"MDEyOklzc3VlQ29tbWVudDkwMjQ1Mzkw","user":{"login":"seang-es","id":6352850,"node_id":"MDQ6VXNlcjYzNTI4NTA=","avatar_url":"https://avatars1.githubusercontent.com/u/6352850?v=4","gravatar_id":"","url":"https://api.github.com/users/seang-es","html_url":"https://github.com/seang-es","followers_url":"https://api.github.com/users/seang-es/followers","following_url":"https://api.github.com/users/seang-es/following{/other_user}","gists_url":"https://api.github.com/users/seang-es/gists{/gist_id}","starred_url":"https://api.github.com/users/seang-es/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seang-es/subscriptions","organizations_url":"https://api.github.com/users/seang-es/orgs","repos_url":"https://api.github.com/users/seang-es/repos","events_url":"https://api.github.com/users/seang-es/events{/privacy}","received_events_url":"https://api.github.com/users/seang-es/received_events","type":"User","site_admin":false},"created_at":"2015-04-06T21:10:22Z","updated_at":"2015-04-06T21:10:22Z","author_association":"NONE","body":"The same tests performed by our customer on a non-EC2 cluster did not result in the same error.  This seems to be an edge case around EC2's networking and the load they are using to drive the client node.\n\nConfiguration is completely vanilla except for the use of unicast discovery.  No plugins installed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90263060","html_url":"https://github.com/elastic/elasticsearch/issues/10447#issuecomment-90263060","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10447","id":90263060,"node_id":"MDEyOklzc3VlQ29tbWVudDkwMjYzMDYw","user":{"login":"nornagon","id":172800,"node_id":"MDQ6VXNlcjE3MjgwMA==","avatar_url":"https://avatars2.githubusercontent.com/u/172800?v=4","gravatar_id":"","url":"https://api.github.com/users/nornagon","html_url":"https://github.com/nornagon","followers_url":"https://api.github.com/users/nornagon/followers","following_url":"https://api.github.com/users/nornagon/following{/other_user}","gists_url":"https://api.github.com/users/nornagon/gists{/gist_id}","starred_url":"https://api.github.com/users/nornagon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nornagon/subscriptions","organizations_url":"https://api.github.com/users/nornagon/orgs","repos_url":"https://api.github.com/users/nornagon/repos","events_url":"https://api.github.com/users/nornagon/events{/privacy}","received_events_url":"https://api.github.com/users/nornagon/received_events","type":"User","site_admin":false},"created_at":"2015-04-06T22:22:31Z","updated_at":"2015-04-06T22:22:31Z","author_association":"NONE","body":"I'm seeing what appears to be a similar issue. 1.4.4 and logstash 1.5.0rc2. I have 4 total nodes (m3.large), 3 data-only (data: true, master: false) and one client/master (data: false, master: false). Logstash (also hosted on ec2) is sending around 50 messages/sec via the \"transport\" protocol to the client node.\n\nAfter a while, searches stop working and the client node no longer responds to `GET /_status` — the request just hangs. It's still responsive to `/_cluster/health`, though. Restarting the client node fixes it for a while.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90268550","html_url":"https://github.com/elastic/elasticsearch/issues/10447#issuecomment-90268550","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10447","id":90268550,"node_id":"MDEyOklzc3VlQ29tbWVudDkwMjY4NTUw","user":{"login":"nornagon","id":172800,"node_id":"MDQ6VXNlcjE3MjgwMA==","avatar_url":"https://avatars2.githubusercontent.com/u/172800?v=4","gravatar_id":"","url":"https://api.github.com/users/nornagon","html_url":"https://github.com/nornagon","followers_url":"https://api.github.com/users/nornagon/followers","following_url":"https://api.github.com/users/nornagon/following{/other_user}","gists_url":"https://api.github.com/users/nornagon/gists{/gist_id}","starred_url":"https://api.github.com/users/nornagon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nornagon/subscriptions","organizations_url":"https://api.github.com/users/nornagon/orgs","repos_url":"https://api.github.com/users/nornagon/repos","events_url":"https://api.github.com/users/nornagon/events{/privacy}","received_events_url":"https://api.github.com/users/nornagon/received_events","type":"User","site_admin":false},"created_at":"2015-04-06T22:39:57Z","updated_at":"2015-04-06T22:39:57Z","author_association":"NONE","body":"The `/_cat/{nodes, shards, indices}` behaviour matches what @seang-es is seeing also (nodes succeeds sometimes, shards/indices fail always)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90295492","html_url":"https://github.com/elastic/elasticsearch/issues/10447#issuecomment-90295492","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10447","id":90295492,"node_id":"MDEyOklzc3VlQ29tbWVudDkwMjk1NDky","user":{"login":"nornagon","id":172800,"node_id":"MDQ6VXNlcjE3MjgwMA==","avatar_url":"https://avatars2.githubusercontent.com/u/172800?v=4","gravatar_id":"","url":"https://api.github.com/users/nornagon","html_url":"https://github.com/nornagon","followers_url":"https://api.github.com/users/nornagon/followers","following_url":"https://api.github.com/users/nornagon/following{/other_user}","gists_url":"https://api.github.com/users/nornagon/gists{/gist_id}","starred_url":"https://api.github.com/users/nornagon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nornagon/subscriptions","organizations_url":"https://api.github.com/users/nornagon/orgs","repos_url":"https://api.github.com/users/nornagon/repos","events_url":"https://api.github.com/users/nornagon/events{/privacy}","received_events_url":"https://api.github.com/users/nornagon/received_events","type":"User","site_admin":false},"created_at":"2015-04-07T00:24:40Z","updated_at":"2015-04-07T00:25:30Z","author_association":"NONE","body":"Possibly related: https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1317811 (I'm running 3.13.0-36 and seeing some 'rides the rocket' messages in syslog)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90303768","html_url":"https://github.com/elastic/elasticsearch/issues/10447#issuecomment-90303768","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10447","id":90303768,"node_id":"MDEyOklzc3VlQ29tbWVudDkwMzAzNzY4","user":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"created_at":"2015-04-07T01:16:58Z","updated_at":"2015-04-07T01:16:58Z","author_association":"MEMBER","body":"Just to note, @nornagon mentioned he was seeing no disconnects after he upgraded his kernel;\n\n> nornagon\n> 11:01 warkolm: fwiw, updating my (ubuntu) kernel from 3.13.0-36 to 3.13.0-48 seems to have fixed the issue (at least, it hasn't happened in the last hour or so, where before it was happening every 10 minutes or so)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90983773","html_url":"https://github.com/elastic/elasticsearch/issues/10447#issuecomment-90983773","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10447","id":90983773,"node_id":"MDEyOklzc3VlQ29tbWVudDkwOTgzNzcz","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2015-04-08T17:37:38Z","updated_at":"2015-04-08T17:37:38Z","author_association":"MEMBER","body":"Hey,\n\nindeed this is a kernel issue, which has been introduced in kernel 3.7. It is resolved upstream in 3.18 but I guess some vendors patched this in their own releases, ubuntu being one them, by fixing it in `3.13.0-46.75`\n\nIf you dont want to restart, you could also run `sudo ethtool -K eth0 sg off` - but this has a performance impact, as the kernel has to do things, that the NIC is supposed to do resulting in copying of more data.\n\nthx to @nornagon for pointing into the right direction.\n\n### Further Resources\n- https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1317811\n- https://bugs.launchpad.net/ubuntu/+source/linux-lts-raring/+bug/1195474\n- http://ubuntu.5.x6.nabble.com/Trusty-Utopic-SRU-Avoid-quot-rides-the-rocket-quot-and-dropped-packages-td5091302.html\n- http://packages.ubuntu.com/trusty/kernel/linux-image-3.13.0-48-generic and the [changelog](http://changelogs.ubuntu.com/changelogs/pool/main/l/linux/linux_3.13.0-48.80/changelog) mentioning it\n- https://lkml.org/lkml/2014/8/11/416\n- http://patchwork.ozlabs.org/patch/379108/\n- https://www.kernel.org/pub/linux/kernel/v3.0/ChangeLog-3.18.1\n- http://vger.kernel.org/~davem/skb.html\n- http://www.brendangregg.com/blog/2014-09-11/perf-kernel-line-tracing.html\n- https://github.com/elastic/elasticsearch/issues/10447\n","performed_via_github_app":null}]