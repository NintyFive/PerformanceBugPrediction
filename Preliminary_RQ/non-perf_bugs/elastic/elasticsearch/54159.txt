{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/54159","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54159/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54159/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54159/events","html_url":"https://github.com/elastic/elasticsearch/issues/54159","id":587584334,"node_id":"MDU6SXNzdWU1ODc1ODQzMzQ=","number":54159,"title":"How to simulate long running search requests","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23172,"node_id":"MDU6TGFiZWwyMzE3Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Efeature","name":">feature","color":"006b75","default":false,"description":null},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"},{"id":1967498216,"node_id":"MDU6TGFiZWwxOTY3NDk4MjE2","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Search","name":"Team:Search","color":"fef2c0","default":false,"description":"Meta label for search team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2020-03-25T10:12:28Z","updated_at":"2020-11-11T21:36:38Z","closed_at":"2020-09-15T09:05:06Z","author_association":"MEMBER","active_lock_reason":null,"body":"For the development of the [`async_search` APIs](https://www.elastic.co/guide/en/elasticsearch/reference/master/async-search.html) we needed a way to simulate long running queries. For this purpose we wrote a [small module](https://github.com/jimczi/elasticsearch/tree/delayed_aggs_async_search/modules/delayed-aggs) that can simulate such long running queries on shards.  We used it for demo and monkey testing but we've also shared it with Kibana to help them integrating the new feature. While sharing a plugin/module is ok when developing a feature in master, we think that this module could be used outside of the development phase by other solutions to simulate long running queries.\r\nA question was raised whether we want to provide this plugin/module in our distribution automatically in order to let users play with long running queries without requiring to index billions of documents.\r\nThe way we simulate long running queries can be discussed in a follow up, the current module uses `Thread.sleep` but it's an implementation details at this point. I opened this issue to discuss two points:\r\n\r\n- Does that sound useful to provide a way for users to simulate long running queries easily in Elasticsearch.\r\n\r\n- If so, how should we expose such functionality. \r\n\r\nWe probably don't want this module to be available in production deployment so @jasontedor proposed that we ship the module automatically in the distribution only if the build is a snapshot build. \r\nAnother option would be to provide such functionalities as an example plugin only available in our build.\r\n","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}