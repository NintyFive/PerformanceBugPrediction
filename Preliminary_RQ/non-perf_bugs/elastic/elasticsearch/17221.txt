{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/17221","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17221/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17221/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17221/events","html_url":"https://github.com/elastic/elasticsearch/issues/17221","id":142363439,"node_id":"MDU6SXNzdWUxNDIzNjM0Mzk=","number":17221,"title":"Ingest Attachment - OCR support for images","user":{"login":"miguelxpn","id":12788275,"node_id":"MDQ6VXNlcjEyNzg4Mjc1","avatar_url":"https://avatars3.githubusercontent.com/u/12788275?v=4","gravatar_id":"","url":"https://api.github.com/users/miguelxpn","html_url":"https://github.com/miguelxpn","followers_url":"https://api.github.com/users/miguelxpn/followers","following_url":"https://api.github.com/users/miguelxpn/following{/other_user}","gists_url":"https://api.github.com/users/miguelxpn/gists{/gist_id}","starred_url":"https://api.github.com/users/miguelxpn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miguelxpn/subscriptions","organizations_url":"https://api.github.com/users/miguelxpn/orgs","repos_url":"https://api.github.com/users/miguelxpn/repos","events_url":"https://api.github.com/users/miguelxpn/events{/privacy}","received_events_url":"https://api.github.com/users/miguelxpn/received_events","type":"User","site_admin":false},"labels":[{"id":268963484,"node_id":"MDU6TGFiZWwyNjg5NjM0ODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Ingest","name":":Core/Features/Ingest","color":"0e8a16","default":false,"description":"Execution or management of Ingest Pipelines"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-03-21T14:21:46Z","updated_at":"2018-03-13T16:29:35Z","closed_at":"2018-03-13T16:29:35Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\n\nthe ingest attachment plugin uses Tika for content extraction, Tika supports OCR by default if Tesseract OCR is installed.\n\nI took a look at the Ingest Attachment code to see how hard it would be to add Tika's OCR functionalities to it and I found that I would need to add a new parser (org.apache.tika.parser.ocr.TesseractOCRParser) and the appropriate security policies. \n\nI forked the code and did that to see if it would work, the way Tika calls Tesseract is by forking a new process, so Elasticsearch's default seccomp config makes it fail. After disabling seccomp it works. \n\nWould you guys be willing to accept a pull request to add that in? The changes in the code are small, the only problem is that to work seccomp will have to be disabled in the Ingest Node if the user wants OCR.\n","closed_by":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}