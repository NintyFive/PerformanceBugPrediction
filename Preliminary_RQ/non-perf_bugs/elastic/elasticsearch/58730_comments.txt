[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651724220","html_url":"https://github.com/elastic/elasticsearch/issues/58730#issuecomment-651724220","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58730","id":651724220,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTcyNDIyMA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-06-30T11:06:31Z","updated_at":"2020-06-30T11:06:31Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Packaging)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651724229","html_url":"https://github.com/elastic/elasticsearch/issues/58730#issuecomment-651724229","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58730","id":651724229,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTcyNDIyOQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-06-30T11:06:33Z","updated_at":"2020-06-30T11:06:33Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core (:ml)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651740948","html_url":"https://github.com/elastic/elasticsearch/issues/58730#issuecomment-651740948","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58730","id":651740948,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTc0MDk0OA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-06-30T11:44:34Z","updated_at":"2020-06-30T11:44:34Z","author_association":"CONTRIBUTOR","body":"I don't think it's `ml-cpp` this time:\r\n\r\n```\r\ndave@vm-ubuntu-1804-64-1:~$ lintian --fail-on-warnings elasticsearch-8.0.0-SNAPSHOT-amd64.deb\r\nwarning: --fail-on-warnings is deprecated\r\nW: elasticsearch: non-standard-file-perm usr/share/elasticsearch/NOTICE.txt 0664 != 0644\r\nW: elasticsearch: package-installs-java-bytecode usr/share/elasticsearch/lib/tools/security-cli/org/apache/lucene/analysis/miscellaneous/DeDuplicatingTokenFilter$DuplicateTaggingFilter.class\r\nW: elasticsearch: package-installs-java-bytecode usr/share/elasticsearch/lib/tools/security-cli/org/apache/lucene/analysis/miscellaneous/DeDuplicatingTokenFilter.class\r\nW: elasticsearch: package-installs-java-bytecode usr/share/elasticsearch/lib/tools/security-cli/org/apache/lucene/analysis/miscellaneous/DisableGraphAttribute.class\r\nW: elasticsearch: package-installs-java-bytecode ... use --no-tag-display-limit to see all (or pipe to a file/program)\r\nW: elasticsearch: non-standard-file-perm usr/share/lintian/overrides/elasticsearch 0664 != 0644\r\nN: 301 tags overridden (177 errors, 93 warnings, 31 info)\r\n```\r\n\r\nPresumably with \"--no-tag-display-limit to see all (or pipe to a file/program)\" it lists every single Java class's `.class` file, explaining why the output is so huge.\r\n\r\nRunning it like this avoids the Java bytecode warnings:\r\n\r\n```\r\ndave@vm-ubuntu-1804-64-1:~$ lintian --fail-on-warnings --suppress-tags package-installs-java-bytecode elasticsearch-8.0.0-SNAPSHOT-amd64.deb\r\nwarning: --fail-on-warnings is deprecated\r\nW: elasticsearch: non-standard-file-perm usr/share/elasticsearch/NOTICE.txt 0664 != 0644\r\nW: elasticsearch: non-standard-file-perm usr/share/lintian/overrides/elasticsearch 0664 != 0644\r\nN: 301 tags overridden (177 errors, 93 warnings, 31 info)\r\n```\r\n\r\nI guess the two remaining file permissions warnings should be fixed.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/653208578","html_url":"https://github.com/elastic/elasticsearch/issues/58730#issuecomment-653208578","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58730","id":653208578,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzIwODU3OA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-07-02T20:33:57Z","updated_at":"2020-07-02T20:33:57Z","author_association":"CONTRIBUTOR","body":"@rjernst @williamrandolph any thoughts on this? Looks to be isolated to Ubuntu 18.04 an Debian 10.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/653235652","html_url":"https://github.com/elastic/elasticsearch/issues/58730#issuecomment-653235652","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58730","id":653235652,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzIzNTY1Mg==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2020-07-02T21:53:43Z","updated_at":"2020-07-02T21:53:43Z","author_association":"CONTRIBUTOR","body":"two more cases:\r\n7.8 Debian 10 : https://gradle-enterprise.elastic.co/s/ewtdkfa63qkbc\r\n7.8 Ubuntu 18.04: https://gradle-enterprise.elastic.co/s/2youkxk6yruse","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/653669833","html_url":"https://github.com/elastic/elasticsearch/issues/58730#issuecomment-653669833","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58730","id":653669833,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzY2OTgzMw==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-07-03T20:27:58Z","updated_at":"2020-07-03T20:27:58Z","author_association":"CONTRIBUTOR","body":"When I saw the warnings I assumed that Lintian was looking _inside_ `.jar` files. But it seems that actually the ES build is now accidentally shipping loose `.class` files not inside `.jar` files, in particular those from Lucene. This is a blocker for the 7.8.1 release because Microsoft installer cannot install files with `$` in the name, like `DeDuplicatingTokenFilter$DuplicateTaggingFilter.class`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/653731245","html_url":"https://github.com/elastic/elasticsearch/issues/58730#issuecomment-653731245","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58730","id":653731245,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzczMTI0NQ==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-07-04T07:03:00Z","updated_at":"2020-07-04T07:03:00Z","author_association":"CONTRIBUTOR","body":"> it seems that actually the ES build is now accidentally shipping loose `.class` files not inside `.jar` files\r\n\r\nConfirmed:\r\n\r\n```\r\ndave@vm-ubuntu-1804-64-1:~$ dpkg-deb -c elasticsearch-8.0.0-SNAPSHOT-amd64.deb | grep '\\.class$' | wc -l\r\n6398\r\ndave@vm-ubuntu-1804-64-1:~$ dpkg-deb -c elasticsearch-8.0.0-SNAPSHOT-amd64.deb | grep '\\.class$' | head\r\n-rw-r--r-- root/root     13074 2020-06-30 11:46 ./usr/share/elasticsearch/lib/tools/security-cli/org/joda/time/format/StrictISODateTimeFormat$Constants.class\r\n-rw-r--r-- root/root     10724 2020-06-30 11:46 ./usr/share/elasticsearch/lib/tools/security-cli/org/joda/time/format/StrictISODateTimeFormat.class\r\n-rw-r--r-- root/root      9293 2020-06-30 11:46 ./usr/share/elasticsearch/lib/tools/security-cli/org/elasticsearch/cluster/NodeConnectionsService$ConnectionTarget.class\r\n-rw-r--r-- root/root      2585 2020-06-30 11:46 ./usr/share/elasticsearch/lib/tools/security-cli/org/elasticsearch/cluster/DiffableUtils$VIntKeySerializer.class\r\n-rw-r--r-- root/root      3217 2020-06-30 11:46 ./usr/share/elasticsearch/lib/tools/security-cli/org/elasticsearch/cluster/InternalClusterInfoService$1.class\r\n-rw-r--r-- root/root     10323 2020-06-30 11:46 ./usr/share/elasticsearch/lib/tools/security-cli/org/elasticsearch/cluster/ClusterChangedEvent.class\r\n-rw-r--r-- root/root       940 2020-06-30 11:46 ./usr/share/elasticsearch/lib/tools/security-cli/org/elasticsearch/cluster/ClusterStateTaskConfig$Basic.class\r\n-rw-r--r-- root/root       530 2020-06-30 11:46 ./usr/share/elasticsearch/lib/tools/security-cli/org/elasticsearch/cluster/AckedClusterStateTaskListener.class\r\n-rw-r--r-- root/root     19116 2020-06-30 11:46 ./usr/share/elasticsearch/lib/tools/security-cli/org/elasticsearch/cluster/SnapshotsInProgress$Entry.class\r\n-rw-r--r-- root/root       847 2020-06-30 11:46 ./usr/share/elasticsearch/lib/tools/security-cli/org/elasticsearch/cluster/ClusterInfoService.class\r\n```\r\n\r\nSo this issue doesn't imply some weird update to Lintian, but a change to the way Elasticsearch is being packaged for distribution.\r\n\r\nPresumably this must have been caused by a commit that was made on 29th June.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/654088120","html_url":"https://github.com/elastic/elasticsearch/issues/58730#issuecomment-654088120","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58730","id":654088120,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDA4ODEyMA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-07-06T08:18:09Z","updated_at":"2020-07-06T08:18:09Z","author_association":"CONTRIBUTOR","body":"The problem with class files should be fixed by #59048.  So we are back to just the minor problem of the two text files with `0664` rather than `0644` permissions.","performed_via_github_app":null}]