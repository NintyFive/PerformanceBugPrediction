[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219807419","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-219807419","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":219807419,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTgwNzQxOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T18:19:36Z","updated_at":"2016-05-17T18:19:36Z","author_association":"CONTRIBUTOR","body":"I tried setting the tmpdir with `ES_JAVA_OPTS=\"-Djna.tmpdir=/var/lib/elasticsearch/tmp\"` and it worked just fine.\n\n> We have elasticsearch homedir in custom location and we link that custom location into /var/lib/elasticsearch.\n\nDo you mean symlinked?  That's probably your problem.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219809882","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-219809882","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":219809882,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTgwOTg4Mg==","user":{"login":"bubo77","id":16542004,"node_id":"MDQ6VXNlcjE2NTQyMDA0","avatar_url":"https://avatars1.githubusercontent.com/u/16542004?v=4","gravatar_id":"","url":"https://api.github.com/users/bubo77","html_url":"https://github.com/bubo77","followers_url":"https://api.github.com/users/bubo77/followers","following_url":"https://api.github.com/users/bubo77/following{/other_user}","gists_url":"https://api.github.com/users/bubo77/gists{/gist_id}","starred_url":"https://api.github.com/users/bubo77/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bubo77/subscriptions","organizations_url":"https://api.github.com/users/bubo77/orgs","repos_url":"https://api.github.com/users/bubo77/repos","events_url":"https://api.github.com/users/bubo77/events{/privacy}","received_events_url":"https://api.github.com/users/bubo77/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T18:28:06Z","updated_at":"2016-05-17T18:45:23Z","author_association":"NONE","body":"Yeah i mean we have a symlink. \nBut interestingly it can create read/write the indicies but can't write tmp\n\n```\nls -alZ /var/lib/elasticsearch/\ndrwxr-xr-x. elasticsearch elasticsearch system_u:object_r:usr_t:s0       .\ndrwxr-xr-x. root          root          unconfined_u:object_r:usr_t:s0   ..\ndrwxr-xr-x. elasticsearch elasticsearch system_u:object_r:usr_t:s0       graylog2\ndrwxr-xr-x. elasticsearch elasticsearch system_u:object_r:usr_t:s0       tmp \n```\n\nI have tried without a symlink fails the same way\n\nHave you checked the kernel dump i've attached to the original post?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220561788","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-220561788","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":220561788,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDU2MTc4OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-20T09:40:47Z","updated_at":"2016-05-20T09:40:47Z","author_association":"CONTRIBUTOR","body":"Looks like a duplicate of https://github.com/elastic/elasticsearch/issues/18406\n\nClosing\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261427007","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-261427007","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":261427007,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTQyNzAwNw==","user":{"login":"FlorianHeigl","id":2828955,"node_id":"MDQ6VXNlcjI4Mjg5NTU=","avatar_url":"https://avatars1.githubusercontent.com/u/2828955?v=4","gravatar_id":"","url":"https://api.github.com/users/FlorianHeigl","html_url":"https://github.com/FlorianHeigl","followers_url":"https://api.github.com/users/FlorianHeigl/followers","following_url":"https://api.github.com/users/FlorianHeigl/following{/other_user}","gists_url":"https://api.github.com/users/FlorianHeigl/gists{/gist_id}","starred_url":"https://api.github.com/users/FlorianHeigl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FlorianHeigl/subscriptions","organizations_url":"https://api.github.com/users/FlorianHeigl/orgs","repos_url":"https://api.github.com/users/FlorianHeigl/repos","events_url":"https://api.github.com/users/FlorianHeigl/events{/privacy}","received_events_url":"https://api.github.com/users/FlorianHeigl/received_events","type":"User","site_admin":false},"created_at":"2016-11-18T01:53:10Z","updated_at":"2016-11-18T01:53:10Z","author_association":"NONE","body":"You closed this with reference to itself. :-)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261715932","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-261715932","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":261715932,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTcxNTkzMg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-19T14:09:37Z","updated_at":"2016-11-19T14:09:37Z","author_association":"CONTRIBUTOR","body":"Whoops. Reopening.\n\n@jasontedor any thoughts?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261887996","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-261887996","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":261887996,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTg4Nzk5Ng==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2016-11-21T09:32:36Z","updated_at":"2016-11-21T09:32:36Z","author_association":"MEMBER","body":"This looks similar to #18272","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261899146","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-261899146","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":261899146,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTg5OTE0Ng==","user":{"login":"FlorianHeigl","id":2828955,"node_id":"MDQ6VXNlcjI4Mjg5NTU=","avatar_url":"https://avatars1.githubusercontent.com/u/2828955?v=4","gravatar_id":"","url":"https://api.github.com/users/FlorianHeigl","html_url":"https://github.com/FlorianHeigl","followers_url":"https://api.github.com/users/FlorianHeigl/followers","following_url":"https://api.github.com/users/FlorianHeigl/following{/other_user}","gists_url":"https://api.github.com/users/FlorianHeigl/gists{/gist_id}","starred_url":"https://api.github.com/users/FlorianHeigl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FlorianHeigl/subscriptions","organizations_url":"https://api.github.com/users/FlorianHeigl/orgs","repos_url":"https://api.github.com/users/FlorianHeigl/repos","events_url":"https://api.github.com/users/FlorianHeigl/events{/privacy}","received_events_url":"https://api.github.com/users/FlorianHeigl/received_events","type":"User","site_admin":false},"created_at":"2016-11-21T10:24:37Z","updated_at":"2016-11-21T10:24:37Z","author_association":"NONE","body":"Thanks! sounds like the right thing. Not sure why google liked the duplicate better.\r\nI think you can re-close with that reference!\r\n\r\nIn summary that bug says:\r\n\r\n- you cannot run ElasticSearch on a system that follows standard and basic security practices.\r\n- The issue is not in ES, but in the JNA thing (but obviously testing does not include systems that are secure)\r\n- The issue is related to the combination of JNA, noexec mounts and SELinux\r\n- It will **not** help to set a different ElasticSearch tmpdir since the problem isn't in ES itself.\r\n- There's no mention of a JNA issue for that. I'll try to find out about that. Expecting to end up in 10 year old stale code ;-)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261905929","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-261905929","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":261905929,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTkwNTkyOQ==","user":{"login":"FlorianHeigl","id":2828955,"node_id":"MDQ6VXNlcjI4Mjg5NTU=","avatar_url":"https://avatars1.githubusercontent.com/u/2828955?v=4","gravatar_id":"","url":"https://api.github.com/users/FlorianHeigl","html_url":"https://github.com/FlorianHeigl","followers_url":"https://api.github.com/users/FlorianHeigl/followers","following_url":"https://api.github.com/users/FlorianHeigl/following{/other_user}","gists_url":"https://api.github.com/users/FlorianHeigl/gists{/gist_id}","starred_url":"https://api.github.com/users/FlorianHeigl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FlorianHeigl/subscriptions","organizations_url":"https://api.github.com/users/FlorianHeigl/orgs","repos_url":"https://api.github.com/users/FlorianHeigl/repos","events_url":"https://api.github.com/users/FlorianHeigl/events{/privacy}","received_events_url":"https://api.github.com/users/FlorianHeigl/received_events","type":"User","site_admin":false},"created_at":"2016-11-21T10:55:38Z","updated_at":"2016-11-21T10:55:38Z","author_association":"NONE","body":"I think my last comment was lost. Sounds you found the right reference.\r\n(Sounds also like a hopeless case right now) ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261906248","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-261906248","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":261906248,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTkwNjI0OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-21T10:57:08Z","updated_at":"2016-11-21T10:57:08Z","author_association":"CONTRIBUTOR","body":"Reclosing in favour of https://github.com/elastic/elasticsearch/issues/18272","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/262149807","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-262149807","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":262149807,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjE0OTgwNw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-11-22T05:15:52Z","updated_at":"2016-11-23T00:54:14Z","author_association":"MEMBER","body":"> you cannot run ElasticSearch on a system that follows standard and basic security practices.\r\n\r\nThis is false. It's not clear exactly what the poor interaction is because no one can provide a clear reproduction, but it does run fine on some systems with SELinux set to enforcing and `/tmp` mounted with `noexec`. \r\n\r\n> The issue is not in ES, but in the JNA thing (but obviously testing does not include systems that are secure)\r\n\r\nThis is false. We have CI machines, VMs for our packaging tests, and my workstation (and likely other developer's workstations) that all run SELinux in enforcing mode. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/262149915","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-262149915","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":262149915,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjE0OTkxNQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-11-22T05:16:36Z","updated_at":"2016-11-22T05:16:36Z","author_association":"MEMBER","body":"> (Sounds also like a hopeless case right now)\r\n\r\nYes, until someone can provide a 100% reliable reproduction. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/282683232","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-282683232","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":282683232,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MjY4MzIzMg==","user":{"login":"Fabian1976","id":9444852,"node_id":"MDQ6VXNlcjk0NDQ4NTI=","avatar_url":"https://avatars2.githubusercontent.com/u/9444852?v=4","gravatar_id":"","url":"https://api.github.com/users/Fabian1976","html_url":"https://github.com/Fabian1976","followers_url":"https://api.github.com/users/Fabian1976/followers","following_url":"https://api.github.com/users/Fabian1976/following{/other_user}","gists_url":"https://api.github.com/users/Fabian1976/gists{/gist_id}","starred_url":"https://api.github.com/users/Fabian1976/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fabian1976/subscriptions","organizations_url":"https://api.github.com/users/Fabian1976/orgs","repos_url":"https://api.github.com/users/Fabian1976/repos","events_url":"https://api.github.com/users/Fabian1976/events{/privacy}","received_events_url":"https://api.github.com/users/Fabian1976/received_events","type":"User","site_admin":false},"created_at":"2017-02-27T10:28:35Z","updated_at":"2017-02-27T11:25:39Z","author_association":"NONE","body":"It does seem to be related to the noexec mount options. I've had the same issue on 1 of our servers. When the noexec mount option is active on the /tmp directory, I get this error:\r\n```\r\n[2017-02-27T11:27:17,588][WARN ][o.e.b.Natives            ] unable to load JNA native support library, native methods will be disabled.\r\njava.lang.UnsatisfiedLinkError: /tmp/jna--1985354563/jna3776152293556606246.tmp: /tmp/jna--1985354563/jna3776152293556606246.tmp: failed to map segment from shared object: Operation not permitted\r\n        at java.lang.ClassLoader$NativeLibrary.load(Native Method) ~[?:1.8.0_111]\r\n        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1941) ~[?:1.8.0_111]\r\n        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1824) ~[?:1.8.0_111]\r\n        at java.lang.Runtime.load0(Runtime.java:809) ~[?:1.8.0_111]\r\n        at java.lang.System.load(System.java:1086) ~[?:1.8.0_111]\r\n        at com.sun.jna.Native.loadNativeDispatchLibraryFromClasspath(Native.java:851) ~[jna-4.2.2.jar:4.2.2 (b0)]\r\n        at com.sun.jna.Native.loadNativeDispatchLibrary(Native.java:826) ~[jna-4.2.2.jar:4.2.2 (b0)]\r\n        at com.sun.jna.Native.<clinit>(Native.java:140) ~[jna-4.2.2.jar:4.2.2 (b0)]\r\n        at java.lang.Class.forName0(Native Method) ~[?:1.8.0_111]\r\n        at java.lang.Class.forName(Class.java:264) ~[?:1.8.0_111]\r\n        at org.elasticsearch.bootstrap.Natives.<clinit>(Natives.java:45) [elasticsearch-5.2.1.jar:5.2.1]\r\n        at org.elasticsearch.bootstrap.Bootstrap.initializeNatives(Bootstrap.java:104) [elasticsearch-5.2.1.jar:5.2.1]\r\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:203) [elasticsearch-5.2.1.jar:5.2.1]\r\n        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:333) [elasticsearch-5.2.1.jar:5.2.1]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:121) [elasticsearch-5.2.1.jar:5.2.1]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:112) [elasticsearch-5.2.1.jar:5.2.1]\r\n        at org.elasticsearch.cli.SettingCommand.execute(SettingCommand.java:54) [elasticsearch-5.2.1.jar:5.2.1]\r\n        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:122) [elasticsearch-5.2.1.jar:5.2.1]\r\n        at org.elasticsearch.cli.Command.main(Command.java:88) [elasticsearch-5.2.1.jar:5.2.1]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:89) [elasticsearch-5.2.1.jar:5.2.1]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:82) [elasticsearch-5.2.1.jar:5.2.1]\r\n```\r\n\r\nAfter that I removed the noexec mount option, and it works fine.\r\nSetting de -Djna.tmpdir of -Djava.io.tmpdir to something different also didn't work on my server.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/286176490","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-286176490","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":286176490,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjE3NjQ5MA==","user":{"login":"jcmcken","id":1117819,"node_id":"MDQ6VXNlcjExMTc4MTk=","avatar_url":"https://avatars0.githubusercontent.com/u/1117819?v=4","gravatar_id":"","url":"https://api.github.com/users/jcmcken","html_url":"https://github.com/jcmcken","followers_url":"https://api.github.com/users/jcmcken/followers","following_url":"https://api.github.com/users/jcmcken/following{/other_user}","gists_url":"https://api.github.com/users/jcmcken/gists{/gist_id}","starred_url":"https://api.github.com/users/jcmcken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcmcken/subscriptions","organizations_url":"https://api.github.com/users/jcmcken/orgs","repos_url":"https://api.github.com/users/jcmcken/repos","events_url":"https://api.github.com/users/jcmcken/events{/privacy}","received_events_url":"https://api.github.com/users/jcmcken/received_events","type":"User","site_admin":false},"created_at":"2017-03-13T17:13:47Z","updated_at":"2017-03-13T17:13:47Z","author_association":"NONE","body":"Just chiming in here to say we have the same problem. We use ``-Djna.tmpdir`` with other applications just fine. Only Elasticsearch seems not to work, requiring us to set ``exec`` on ``/tmp``.\r\n\r\n**ES**: elasticsearch-5.2.0-1.noarch (RPM distribution)\r\n**OS**: CentOS Linux release 7.3.1611 (Core)\r\n**JVM**:\r\n\r\n```\r\njava version \"1.8.0_121\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_121-b13)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.121-b13, mixed mode)\r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/286973809","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-286973809","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":286973809,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Njk3MzgwOQ==","user":{"login":"Fabian1976","id":9444852,"node_id":"MDQ6VXNlcjk0NDQ4NTI=","avatar_url":"https://avatars2.githubusercontent.com/u/9444852?v=4","gravatar_id":"","url":"https://api.github.com/users/Fabian1976","html_url":"https://github.com/Fabian1976","followers_url":"https://api.github.com/users/Fabian1976/followers","following_url":"https://api.github.com/users/Fabian1976/following{/other_user}","gists_url":"https://api.github.com/users/Fabian1976/gists{/gist_id}","starred_url":"https://api.github.com/users/Fabian1976/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fabian1976/subscriptions","organizations_url":"https://api.github.com/users/Fabian1976/orgs","repos_url":"https://api.github.com/users/Fabian1976/repos","events_url":"https://api.github.com/users/Fabian1976/events{/privacy}","received_events_url":"https://api.github.com/users/Fabian1976/received_events","type":"User","site_admin":false},"created_at":"2017-03-16T07:00:26Z","updated_at":"2017-03-16T07:00:26Z","author_association":"NONE","body":"@jasontedor Reproduction was quite simple for me. Place noexec mount options on /tmp, installations fails. Even if a seperate tmp dir is defined (it is not respected or used). Remove noexec mount options, installation works fine.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/287031542","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-287031542","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":287031542,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzAzMTU0Mg==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2017-03-16T11:36:01Z","updated_at":"2017-03-16T11:36:01Z","author_association":"MEMBER","body":"@Fabian1976  @jcmcken Can you please share more about your OS, versions of elasticsearch and java, `/proc/mounts`, `/etc/fstab`, use of tmpfs etc please? That would help.\r\n\r\n@jcmcken Do the other applications you mentioned also use JNA? Also, I can't reproduce on a fresh CentOS installation (see above) with `noexec`. \r\n\r\n```\r\n$ cat /etc/centos-release\r\nCentOS Linux release 7.3.1611 (Core) \r\n```\r\n```\r\n$ java -version\r\njava version \"1.8.0_121\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_121-b13)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.121-b13, mixed mode)\r\n```\r\n```\r\n$ cat /proc/mounts | grep /tmp\r\ntmpfs /tmp tmpfs rw,noexec 0 0\r\n```\r\n```\r\n$ sudo rpm -i elasticsearch-5.2.0.rpm \r\nwarning: elasticsearch-5.2.0.rpm: Header V4 RSA/SHA512 Signature, key ID d88e42b4: NOKEY\r\nCreating elasticsearch group... OK\r\nCreating elasticsearch user... OK\r\n### NOT starting on installation, please execute the following statements to configure elasticsearch service to start automatically using systemd\r\n sudo systemctl daemon-reload\r\n sudo systemctl enable elasticsearch.service\r\n### You can start elasticsearch service by executing\r\n sudo systemctl start elasticsearch.service\r\n```\r\n```\r\n$ sudo systemctl start elasticsearch\r\n\r\n$ curl -XPOST 'http://localhost:9200/books/book' -d '{\"title\":\"foo\"}'\r\n{\"_index\":\"books\",\"_type\":\"book\",\"_id\":\"AVrW3iFUg6TNDnTr-o09\",\"_version\":1,\"result\":\"created\",\"_shards\":{\"total\":2,\"successful\":1,\"failed\":0},\"created\":true}\r\n\r\n$ curl -XGET 'http://localhost:9200/_search?q=foo'\r\n{\"took\":59,\"timed_out\":false,\"_shards\":{\"total\":5,\"successful\":5,\"failed\":0},\"hits\":{\"total\":1,\"max_score\":0.2876821,\"hits\":[{\"_index\":\"books\",\"_type\":\"book\",\"_id\":\"AVrW3iFUg6TNDnTr-o09\",\"_score\":0.2876821,\"_source\":{\"title\":\"foo\"}}]}}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/287073579","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-287073579","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":287073579,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzA3MzU3OQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-03-16T14:25:46Z","updated_at":"2017-03-20T13:38:36Z","author_association":"MEMBER","body":"@Fabian1976 I know that this thread is quite long, but the stack trace that you provided is different than the one that triggered this issue. I think that we are looking at separate problems. It might be best if you open a separate issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/287080337","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-287080337","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":287080337,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzA4MDMzNw==","user":{"login":"FlorianHeigl","id":2828955,"node_id":"MDQ6VXNlcjI4Mjg5NTU=","avatar_url":"https://avatars1.githubusercontent.com/u/2828955?v=4","gravatar_id":"","url":"https://api.github.com/users/FlorianHeigl","html_url":"https://github.com/FlorianHeigl","followers_url":"https://api.github.com/users/FlorianHeigl/followers","following_url":"https://api.github.com/users/FlorianHeigl/following{/other_user}","gists_url":"https://api.github.com/users/FlorianHeigl/gists{/gist_id}","starred_url":"https://api.github.com/users/FlorianHeigl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FlorianHeigl/subscriptions","organizations_url":"https://api.github.com/users/FlorianHeigl/orgs","repos_url":"https://api.github.com/users/FlorianHeigl/repos","events_url":"https://api.github.com/users/FlorianHeigl/events{/privacy}","received_events_url":"https://api.github.com/users/FlorianHeigl/received_events","type":"User","site_admin":false},"created_at":"2017-03-16T14:47:19Z","updated_at":"2017-03-16T14:47:19Z","author_association":"NONE","body":"@tlrx did you look in your elasticsearch logs too or just run the tests?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/287323866","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-287323866","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":287323866,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzMyMzg2Ng==","user":{"login":"Fabian1976","id":9444852,"node_id":"MDQ6VXNlcjk0NDQ4NTI=","avatar_url":"https://avatars2.githubusercontent.com/u/9444852?v=4","gravatar_id":"","url":"https://api.github.com/users/Fabian1976","html_url":"https://github.com/Fabian1976","followers_url":"https://api.github.com/users/Fabian1976/followers","following_url":"https://api.github.com/users/Fabian1976/following{/other_user}","gists_url":"https://api.github.com/users/Fabian1976/gists{/gist_id}","starred_url":"https://api.github.com/users/Fabian1976/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fabian1976/subscriptions","organizations_url":"https://api.github.com/users/Fabian1976/orgs","repos_url":"https://api.github.com/users/Fabian1976/repos","events_url":"https://api.github.com/users/Fabian1976/events{/privacy}","received_events_url":"https://api.github.com/users/Fabian1976/received_events","type":"User","site_admin":false},"created_at":"2017-03-17T10:50:03Z","updated_at":"2017-03-17T10:50:03Z","author_association":"NONE","body":"@tlrx \r\nMy OS:\r\n```\r\n[root@elasticsearch01 ~]# cat /etc/redhat-release \r\nCentOS Linux release 7.3.1611 (Core) \r\n[root@elasticsearch01 ~]# \r\n```\r\n\r\nElasticsearch version:\r\n```\r\n[root@elasticsearch01 ~]# yum list installed | grep elasticsearch\r\nelasticsearch.noarch       5.2.1-1               @CMC_Elastic_co_5_x            \r\n[root@elasticsearch01 ~]# \r\n```\r\n\r\nJava version:\r\n```\r\n[root@elasticsearch01 ~]# java -version\r\nopenjdk version \"1.8.0_111\"\r\nOpenJDK Runtime Environment (build 1.8.0_111-b15)\r\nOpenJDK 64-Bit Server VM (build 25.111-b15, mixed mode)\r\n[root@elasticsearch01 ~]# \r\n```\r\n\r\nProc mounts:\r\n```\r\n[root@elasticsearch01 ~]# cat /proc/mounts | grep /tmp\r\n/dev/mapper/VolGroup01-tmp /tmp ext4 rw,seclabel,nosuid,nodev,relatime,data=ordered 0 0\r\n/dev/mapper/VolGroup01-tmp /var/tmp ext4 rw,seclabel,nosuid,nodev,relatime,data=ordered 0 0\r\n[root@elasticsearch01 ~]# \r\n```\r\n\r\nFStab:\r\n```\r\n[root@elasticsearch01 ~]# cat /etc/fstab | grep /tmp\r\n/dev/mapper/VolGroup01-tmp\t/tmp\text4\tnodev,nosuid\t0\t2\r\n/tmp\t/var/tmp\text4\tbind,nodev,nosuid,noexec\t0\t0\r\n[root@elasticsearch01 ~]# \r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/287419878","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-287419878","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":287419878,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzQxOTg3OA==","user":{"login":"jcmcken","id":1117819,"node_id":"MDQ6VXNlcjExMTc4MTk=","avatar_url":"https://avatars0.githubusercontent.com/u/1117819?v=4","gravatar_id":"","url":"https://api.github.com/users/jcmcken","html_url":"https://github.com/jcmcken","followers_url":"https://api.github.com/users/jcmcken/followers","following_url":"https://api.github.com/users/jcmcken/following{/other_user}","gists_url":"https://api.github.com/users/jcmcken/gists{/gist_id}","starred_url":"https://api.github.com/users/jcmcken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcmcken/subscriptions","organizations_url":"https://api.github.com/users/jcmcken/orgs","repos_url":"https://api.github.com/users/jcmcken/repos","events_url":"https://api.github.com/users/jcmcken/events{/privacy}","received_events_url":"https://api.github.com/users/jcmcken/received_events","type":"User","site_admin":false},"created_at":"2017-03-17T17:29:35Z","updated_at":"2017-03-17T17:30:35Z","author_association":"NONE","body":"@tlrx \r\n\r\nJust to be clear, because I'm not sure we're talking about the same thing: ES launches just fine when ``/tmp`` is mounted ``noexec`` (which you've demonstrated). That's not my issue.\r\n\r\nThe issue is that it's falling back to NOT using JNA in this configuration, which you can see by examining the logs. But I *would* like to actually use whatever native extensions are available. And so I'm setting ``jna.tmpdir`` system prop to an alternate location on a filesystem that's mounted ``exec`` (e.g. ``ES_JAVA_OPTS=\"-Djna.tmpdir=/some/other/path\"`` in ``/etc/sysconfig/elasticsearch``). In this configuration, ES launches, and then dies a few seconds later.\r\n\r\nJenkins CI is the example that comes to mind where we're setting ``jna.tmpdir`` to an alternate location.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/291488209","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-291488209","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":291488209,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MTQ4ODIwOQ==","user":{"login":"Balajiswz","id":3166097,"node_id":"MDQ6VXNlcjMxNjYwOTc=","avatar_url":"https://avatars1.githubusercontent.com/u/3166097?v=4","gravatar_id":"","url":"https://api.github.com/users/Balajiswz","html_url":"https://github.com/Balajiswz","followers_url":"https://api.github.com/users/Balajiswz/followers","following_url":"https://api.github.com/users/Balajiswz/following{/other_user}","gists_url":"https://api.github.com/users/Balajiswz/gists{/gist_id}","starred_url":"https://api.github.com/users/Balajiswz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Balajiswz/subscriptions","organizations_url":"https://api.github.com/users/Balajiswz/orgs","repos_url":"https://api.github.com/users/Balajiswz/repos","events_url":"https://api.github.com/users/Balajiswz/events{/privacy}","received_events_url":"https://api.github.com/users/Balajiswz/received_events","type":"User","site_admin":false},"created_at":"2017-04-04T12:45:05Z","updated_at":"2017-04-04T12:45:05Z","author_association":"NONE","body":"I am also hitting the same error when we try to define separate TMP folder for elasticsearch with similar configurations. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/300147665","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-300147665","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":300147665,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDE0NzY2NQ==","user":{"login":"c4tom","id":1284875,"node_id":"MDQ6VXNlcjEyODQ4NzU=","avatar_url":"https://avatars3.githubusercontent.com/u/1284875?v=4","gravatar_id":"","url":"https://api.github.com/users/c4tom","html_url":"https://github.com/c4tom","followers_url":"https://api.github.com/users/c4tom/followers","following_url":"https://api.github.com/users/c4tom/following{/other_user}","gists_url":"https://api.github.com/users/c4tom/gists{/gist_id}","starred_url":"https://api.github.com/users/c4tom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/c4tom/subscriptions","organizations_url":"https://api.github.com/users/c4tom/orgs","repos_url":"https://api.github.com/users/c4tom/repos","events_url":"https://api.github.com/users/c4tom/events{/privacy}","received_events_url":"https://api.github.com/users/c4tom/received_events","type":"User","site_admin":false},"created_at":"2017-05-09T12:28:42Z","updated_at":"2017-05-09T12:28:42Z","author_association":"NONE","body":"Try this:\r\n\r\nThe problem can be solved download jars, and copy to elasticsearch lib folder\r\n\r\nhttps://github.com/java-native-access/jna\r\n\r\nVersion 4.4.0\r\nMaven Central   **jna.jar**\r\nMaven Central   **jna-platform.jar**","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/300156540","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-300156540","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":300156540,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDE1NjU0MA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-05-09T13:06:56Z","updated_at":"2017-05-09T13:06:56Z","author_association":"MEMBER","body":"@candido1212 Elasticsearch 5.4.0 ships with JNA 4.4.0 now. Dropping jars into the lib folder is fully unsupported.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/300160632","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-300160632","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":300160632,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDE2MDYzMg==","user":{"login":"FlorianHeigl","id":2828955,"node_id":"MDQ6VXNlcjI4Mjg5NTU=","avatar_url":"https://avatars1.githubusercontent.com/u/2828955?v=4","gravatar_id":"","url":"https://api.github.com/users/FlorianHeigl","html_url":"https://github.com/FlorianHeigl","followers_url":"https://api.github.com/users/FlorianHeigl/followers","following_url":"https://api.github.com/users/FlorianHeigl/following{/other_user}","gists_url":"https://api.github.com/users/FlorianHeigl/gists{/gist_id}","starred_url":"https://api.github.com/users/FlorianHeigl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FlorianHeigl/subscriptions","organizations_url":"https://api.github.com/users/FlorianHeigl/orgs","repos_url":"https://api.github.com/users/FlorianHeigl/repos","events_url":"https://api.github.com/users/FlorianHeigl/events{/privacy}","received_events_url":"https://api.github.com/users/FlorianHeigl/received_events","type":"User","site_admin":false},"created_at":"2017-05-09T13:19:52Z","updated_at":"2017-05-09T13:19:52Z","author_association":"NONE","body":"@candido1212 were you doing that on ES 5.4.0?\r\nIf dropping in the same version did in fact change the behaviour that is at least interesting information.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304421267","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-304421267","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":304421267,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDQyMTI2Nw==","user":{"login":"AverageJoe2","id":25551045,"node_id":"MDQ6VXNlcjI1NTUxMDQ1","avatar_url":"https://avatars2.githubusercontent.com/u/25551045?v=4","gravatar_id":"","url":"https://api.github.com/users/AverageJoe2","html_url":"https://github.com/AverageJoe2","followers_url":"https://api.github.com/users/AverageJoe2/followers","following_url":"https://api.github.com/users/AverageJoe2/following{/other_user}","gists_url":"https://api.github.com/users/AverageJoe2/gists{/gist_id}","starred_url":"https://api.github.com/users/AverageJoe2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AverageJoe2/subscriptions","organizations_url":"https://api.github.com/users/AverageJoe2/orgs","repos_url":"https://api.github.com/users/AverageJoe2/repos","events_url":"https://api.github.com/users/AverageJoe2/events{/privacy}","received_events_url":"https://api.github.com/users/AverageJoe2/received_events","type":"User","site_admin":false},"created_at":"2017-05-27T02:33:45Z","updated_at":"2017-05-27T02:33:45Z","author_association":"NONE","body":"@jasontedor\r\nhi buddy how you make it with version Elasticsearch 5.4.0 now ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/309397010","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-309397010","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":309397010,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTM5NzAxMA==","user":{"login":"yami12376","id":11507472,"node_id":"MDQ6VXNlcjExNTA3NDcy","avatar_url":"https://avatars1.githubusercontent.com/u/11507472?v=4","gravatar_id":"","url":"https://api.github.com/users/yami12376","html_url":"https://github.com/yami12376","followers_url":"https://api.github.com/users/yami12376/followers","following_url":"https://api.github.com/users/yami12376/following{/other_user}","gists_url":"https://api.github.com/users/yami12376/gists{/gist_id}","starred_url":"https://api.github.com/users/yami12376/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yami12376/subscriptions","organizations_url":"https://api.github.com/users/yami12376/orgs","repos_url":"https://api.github.com/users/yami12376/repos","events_url":"https://api.github.com/users/yami12376/events{/privacy}","received_events_url":"https://api.github.com/users/yami12376/received_events","type":"User","site_admin":false},"created_at":"2017-06-19T10:09:30Z","updated_at":"2017-06-19T10:52:27Z","author_association":"NONE","body":"I have the same issue - tried what candido suggested but without success.\r\n (CentOS 5.2 (Final) x64) - i think i have to update to CentOs 6\r\nES 5.4.1\r\njava version \"1.8.0_112\"\r\nInstalled and started as posted in https://www.elastic.co/guide/en/elasticsearch/reference/current/_installation.html\r\n\r\n```\r\n cat /proc/mounts | grep /tmp\r\n<empty>\r\n```\r\n\r\n```\r\ncat /etc/fstab | grep /tmp\r\n<empty>\r\n\r\n```\r\n\r\n```\r\nsudo service elasticsearch start\r\nStarting elasticsearch:                                    [  OK  ]\r\n\r\n```\r\n\r\nafter that:\r\n\r\n```\r\nstarts elasticsearch\r\n\r\nOption                Description\r\n------                -----------\r\n-E <KeyValuePair>     Configure a setting\r\n-V, --version         Prints elasticsearch version information and exits\r\n-d, --daemonize       Starts Elasticsearch in the background\r\n-h, --help            show help\r\n-p, --pidfile <Path>  Creates a pid file in the specified path on start\r\n-q, --quiet           Turns off standard ouput/error streams logging in console\r\n-s, --silent          show minimal output\r\n-v, --verbose         show verbose output\r\nERROR: D is not a recognized option\r\n\r\n```\r\n\r\n```\r\n\r\n[2017-06-19T12:04:30,595][WARN ][o.e.b.Natives            ] unable to load JNA native support library, native methods will be disabled.\r\njava.lang.UnsatisfiedLinkError: /tmp/jna-3506402/jna8670561425318125531.tmp: /lib/libc.so.6: version `GLIBC_2.7' not found (required by /tmp/jna-3506402/jna8670561425318125531.tmp)\r\n        at java.lang.ClassLoader$NativeLibrary.load(Native Method) ~[?:1.8.0_112]\r\n        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1941) ~[?:1.8.0_112]\r\n        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1824) ~[?:1.8.0_112]\r\n        at java.lang.Runtime.load0(Runtime.java:809) ~[?:1.8.0_112]\r\n        at java.lang.System.load(System.java:1086) ~[?:1.8.0_112]\r\n        at com.sun.jna.Native.loadNativeDispatchLibraryFromClasspath(Native.java:947) ~[jna-4.4.0.jar:4.4.0 (b0)]\r\n        at com.sun.jna.Native.loadNativeDispatchLibrary(Native.java:922) ~[jna-4.4.0.jar:4.4.0 (b0)]\r\n        at com.sun.jna.Native.<clinit>(Native.java:190) ~[jna-4.4.0.jar:4.4.0 (b0)]\r\n        at java.lang.Class.forName0(Native Method) ~[?:1.8.0_112]\r\n        at java.lang.Class.forName(Class.java:264) ~[?:1.8.0_112]\r\n        at org.elasticsearch.bootstrap.Natives.<clinit>(Natives.java:45) [elasticsearch-5.4.1.jar:5.4.1]\r\n        at org.elasticsearch.bootstrap.Bootstrap.initializeNatives(Bootstrap.java:105) [elasticsearch-5.4.1.jar:5.4.1]\r\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:194) [elasticsearch-5.4.1.jar:5.4.1]\r\n        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:350) [elasticsearch-5.4.1.jar:5.4.1]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:123) [elasticsearch-5.4.1.jar:5.4.1]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:114) [elasticsearch-5.4.1.jar:5.4.1]\r\n        at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:67) [elasticsearch-5.4.1.jar:5.4.1]\r\n        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:122) [elasticsearch-5.4.1.jar:5.4.1]\r\n        at org.elasticsearch.cli.Command.main(Command.java:88) [elasticsearch-5.4.1.jar:5.4.1]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:91) [elasticsearch-5.4.1.jar:5.4.1]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:84) [elasticsearch-5.4.1.jar:5.4.1]\r\n[2017-06-19T12:04:30,604][WARN ][o.e.b.Natives            ] cannot check if running as root because JNA is not available\r\n[2017-06-19T12:04:30,604][WARN ][o.e.b.Natives            ] cannot install system call filter because JNA is not available\r\n[2017-06-19T12:04:30,605][WARN ][o.e.b.Natives            ] cannot register console handler because JNA is not available\r\n[2017-06-19T12:04:30,607][WARN ][o.e.b.Natives            ] cannot getrlimit RLIMIT_NPROC because JNA is not available\r\n[2017-06-19T12:04:30,608][WARN ][o.e.b.Natives            ] cannot getrlimit RLIMIT_AS beacuse JNA is not available\r\n[2017-06-19T12:04:30,802][INFO ][o.e.n.Node               ] [] initializing ...\r\n[2017-06-19T12:04:30,924][INFO ][o.e.e.NodeEnvironment    ] [c51pvG3] using [1] data paths, mounts [[/ (/dev/mapper/VolGroup00-LogVol00)]], net usable_space [12.4gb], net total_space [31.1gb], spins? [possibly], types [ext3]\r\n[2017-06-19T12:04:30,924][INFO ][o.e.e.NodeEnvironment    ] [c51pvG3] heap size [1.9gb], compressed ordinary object pointers [unknown]\r\n[2017-06-19T12:04:30,934][INFO ][o.e.n.Node               ] node name [c51pvG3] derived from node ID [c51pvG3UT62JdbAwGWOJuQ]; set [node.name] to override\r\n[2017-06-19T12:04:30,935][INFO ][o.e.n.Node               ] version[5.4.1], pid[21917], build[2cfe0df/2017-05-29T16:05:51.443Z], OS[Linux/2.6.18-92.el5/i386], JVM[Oracle Corporation/Java HotSpot(TM) Server VM/1.8.0_112/25.112-b15]\r\n[2017-06-19T12:04:30,935][INFO ][o.e.n.Node               ] JVM arguments [-Xms2g, -Xmx2g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -XX:+DisableExplicitGC, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -Djdk.io.permissionsUseCanonicalPath=true, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j.skipJansi=true, -XX:+HeapDumpOnOutOfMemoryError, -Des.path.home=/opt/install/elasticsearch-5.4.1]\r\n[2017-06-19T12:04:32,221][INFO ][o.e.p.PluginsService     ] [c51pvG3] loaded module [aggs-matrix-stats]\r\n[2017-06-19T12:04:32,221][INFO ][o.e.p.PluginsService     ] [c51pvG3] loaded module [ingest-common]\r\n[2017-06-19T12:04:32,221][INFO ][o.e.p.PluginsService     ] [c51pvG3] loaded module [lang-expression]\r\n[2017-06-19T12:04:32,221][INFO ][o.e.p.PluginsService     ] [c51pvG3] loaded module [lang-groovy]\r\n[2017-06-19T12:04:32,221][INFO ][o.e.p.PluginsService     ] [c51pvG3] loaded module [lang-mustache]\r\n[2017-06-19T12:04:32,222][INFO ][o.e.p.PluginsService     ] [c51pvG3] loaded module [lang-painless]\r\n[2017-06-19T12:04:32,222][INFO ][o.e.p.PluginsService     ] [c51pvG3] loaded module [percolator]\r\n[2017-06-19T12:04:32,222][INFO ][o.e.p.PluginsService     ] [c51pvG3] loaded module [reindex]\r\n[2017-06-19T12:04:32,222][INFO ][o.e.p.PluginsService     ] [c51pvG3] loaded module [transport-netty3]\r\n[2017-06-19T12:04:32,222][INFO ][o.e.p.PluginsService     ] [c51pvG3] loaded module [transport-netty4]\r\n[2017-06-19T12:04:32,223][INFO ][o.e.p.PluginsService     ] [c51pvG3] no plugins loaded\r\n[2017-06-19T12:04:34,468][INFO ][o.e.d.DiscoveryModule    ] [c51pvG3] using discovery type [zen]\r\n[2017-06-19T12:04:35,703][INFO ][o.e.n.Node               ] initialized\r\n[2017-06-19T12:04:35,703][INFO ][o.e.n.Node               ] [c51pvG3] starting ...\r\n[2017-06-19T12:04:37,077][INFO ][o.e.t.TransportService   ] [c51pvG3] publish_address {127.0.0.1:9300}, bound_addresses {[::1]:9300}, {127.0.0.1:9300}\r\n[2017-06-19T12:04:37,140][WARN ][o.e.b.BootstrapChecks    ] [c51pvG3] max file descriptors [1024] for elasticsearch process is too low, increase to at least [65536]\r\n[2017-06-19T12:04:37,140][WARN ][o.e.b.BootstrapChecks    ] [c51pvG3] system call filters failed to install; check the logs and fix your configuration or disable system call filters at your own risk\r\n[2017-06-19T12:04:40,334][INFO ][o.e.c.s.ClusterService   ] [c51pvG3] new_master {c51pvG3}{c51pvG3UT62JdbAwGWOJuQ}{Xk4Yetg-Q3etoZ3YGo6Z5Q}{127.0.0.1}{127.0.0.1:9300}, reason: zen-disco-elected-as-master ([0] nodes joined)\r\n[2017-06-19T12:04:40,486][INFO ][o.e.h.n.Netty4HttpServerTransport] [c51pvG3] publish_address {127.0.0.1:9200}, bound_addresses {[::1]:9200}, {127.0.0.1:9200}\r\n[2017-06-19T12:04:40,490][INFO ][o.e.n.Node               ] [c51pvG3] started\r\n[2017-06-19T12:04:40,614][INFO ][o.e.g.GatewayService     ] [c51pvG3] recovered [1] indices into cluster_state\r\n[2017-06-19T12:04:40,931][INFO ][o.e.c.r.a.AllocationService] [c51pvG3] Cluster health status changed from [RED] to [YELLOW] (reason: [shards started [[.kibana][0]] ...]).\r\n\r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/309476780","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-309476780","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":309476780,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTQ3Njc4MA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-06-19T15:32:04Z","updated_at":"2017-06-19T15:32:04Z","author_association":"MEMBER","body":"@yami12376 As I [mentioned](https://github.com/elastic/elasticsearch/issues/18406#issuecomment-300156540), dropping jars in the lib folder is fully unsupported. The problem that you're running to here is that the official JNA jar from upstream does not support older distributions that do not support newer versions of glibc. This is why we ship with our own build of JNA that does support some of the older distributions that we still support. The only difference between our build and upstream is that the Linux native library is recompiled to support OS that are using older versions of glibc, everything else is identical to upstream so dropping a different version of the jar in the lib folder is not going to help with anything to begin with.\r\n\r\nPlease, stop following the advice to drop a different build into the lib folder. It is not a solution to the problem here, and it is fully unsupported.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/310656995","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-310656995","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":310656995,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDY1Njk5NQ==","user":{"login":"yami12376","id":11507472,"node_id":"MDQ6VXNlcjExNTA3NDcy","avatar_url":"https://avatars1.githubusercontent.com/u/11507472?v=4","gravatar_id":"","url":"https://api.github.com/users/yami12376","html_url":"https://github.com/yami12376","followers_url":"https://api.github.com/users/yami12376/followers","following_url":"https://api.github.com/users/yami12376/following{/other_user}","gists_url":"https://api.github.com/users/yami12376/gists{/gist_id}","starred_url":"https://api.github.com/users/yami12376/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yami12376/subscriptions","organizations_url":"https://api.github.com/users/yami12376/orgs","repos_url":"https://api.github.com/users/yami12376/repos","events_url":"https://api.github.com/users/yami12376/events{/privacy}","received_events_url":"https://api.github.com/users/yami12376/received_events","type":"User","site_admin":false},"created_at":"2017-06-23T12:50:10Z","updated_at":"2017-06-23T12:50:10Z","author_association":"NONE","body":"I updated to CentOs 7 - and it works fine","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/313775097","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-313775097","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":313775097,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzc3NTA5Nw==","user":{"login":"thosfelt","id":2249855,"node_id":"MDQ6VXNlcjIyNDk4NTU=","avatar_url":"https://avatars0.githubusercontent.com/u/2249855?v=4","gravatar_id":"","url":"https://api.github.com/users/thosfelt","html_url":"https://github.com/thosfelt","followers_url":"https://api.github.com/users/thosfelt/followers","following_url":"https://api.github.com/users/thosfelt/following{/other_user}","gists_url":"https://api.github.com/users/thosfelt/gists{/gist_id}","starred_url":"https://api.github.com/users/thosfelt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thosfelt/subscriptions","organizations_url":"https://api.github.com/users/thosfelt/orgs","repos_url":"https://api.github.com/users/thosfelt/repos","events_url":"https://api.github.com/users/thosfelt/events{/privacy}","received_events_url":"https://api.github.com/users/thosfelt/received_events","type":"User","site_admin":false},"created_at":"2017-07-07T19:42:42Z","updated_at":"2017-07-07T19:42:42Z","author_association":"NONE","body":"I'm currently running ES 2.4.0 running on CentOS 6.6 (PPC) and am haveing some of the same issues after our SA's have done some upgrades to the systems.  I can't get past the \"because JNA is not available\" and ES won't use ES_JAVA_OPTS to point to a different jna.tmpdir.  Also /tmp doesn't have the noexec option turned on and still won't start up after the system upgrade.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/329380187","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-329380187","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":329380187,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTM4MDE4Nw==","user":{"login":"chunji08","id":11307533,"node_id":"MDQ6VXNlcjExMzA3NTMz","avatar_url":"https://avatars0.githubusercontent.com/u/11307533?v=4","gravatar_id":"","url":"https://api.github.com/users/chunji08","html_url":"https://github.com/chunji08","followers_url":"https://api.github.com/users/chunji08/followers","following_url":"https://api.github.com/users/chunji08/following{/other_user}","gists_url":"https://api.github.com/users/chunji08/gists{/gist_id}","starred_url":"https://api.github.com/users/chunji08/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chunji08/subscriptions","organizations_url":"https://api.github.com/users/chunji08/orgs","repos_url":"https://api.github.com/users/chunji08/repos","events_url":"https://api.github.com/users/chunji08/events{/privacy}","received_events_url":"https://api.github.com/users/chunji08/received_events","type":"User","site_admin":false},"created_at":"2017-09-14T05:47:54Z","updated_at":"2017-09-14T05:47:54Z","author_association":"NONE","body":"Do we have a solution to this issue. I am using ES ( version 5.6)  now and I have hit the same issue.  Same platform, if I was using my previous installed ES ( version 2.4), I don't have this problem. Thanks. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/339021002","html_url":"https://github.com/elastic/elasticsearch/issues/18406#issuecomment-339021002","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18406","id":339021002,"node_id":"MDEyOklzc3VlQ29tbWVudDMzOTAyMTAwMg==","user":{"login":"bschneiders","id":20167609,"node_id":"MDQ6VXNlcjIwMTY3NjA5","avatar_url":"https://avatars1.githubusercontent.com/u/20167609?v=4","gravatar_id":"","url":"https://api.github.com/users/bschneiders","html_url":"https://github.com/bschneiders","followers_url":"https://api.github.com/users/bschneiders/followers","following_url":"https://api.github.com/users/bschneiders/following{/other_user}","gists_url":"https://api.github.com/users/bschneiders/gists{/gist_id}","starred_url":"https://api.github.com/users/bschneiders/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bschneiders/subscriptions","organizations_url":"https://api.github.com/users/bschneiders/orgs","repos_url":"https://api.github.com/users/bschneiders/repos","events_url":"https://api.github.com/users/bschneiders/events{/privacy}","received_events_url":"https://api.github.com/users/bschneiders/received_events","type":"User","site_admin":false},"created_at":"2017-10-24T15:01:44Z","updated_at":"2017-10-24T15:01:44Z","author_association":"NONE","body":"I encountered this issue on 5.3.3-1 on RHEL 7.4 when relocating multiple ES directories.  I was modifying jvm.options to add -Djava.io.tmpdir=... with a custom directory.  I eventually solved it when I realized that the system still uses /etc/elasticsearch/jvm.options on RHEL7 even if you relocate default.path.conf.  I was modifying copies of jvm.options in my new configuration directories at first.","performed_via_github_app":null}]