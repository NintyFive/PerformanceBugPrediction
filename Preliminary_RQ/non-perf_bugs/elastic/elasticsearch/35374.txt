{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/35374","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35374/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35374/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35374/events","html_url":"https://github.com/elastic/elasticsearch/issues/35374","id":378757163,"node_id":"MDU6SXNzdWUzNzg3NTcxNjM=","number":35374,"title":"CI: OOM in __mock_network_thread","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":1104249379,"node_id":"MDU6TGFiZWwxMTA0MjQ5Mzc5","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.4.4","name":"v6.4.4","color":"Dddddd","default":false,"description":""},{"id":1104252481,"node_id":"MDU6TGFiZWwxMTA0MjUyNDgx","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.5.1","name":"v6.5.1","color":"DDDDDD","default":false,"description":""},{"id":1102494662,"node_id":"MDU6TGFiZWwxMTAyNDk0NjYy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.6.0","name":"v6.6.0","color":"dddddd","default":false,"description":""},{"id":1223177445,"node_id":"MDU6TGFiZWwxMjIzMTc3NDQ1","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.0.0-beta1","name":"v7.0.0-beta1","color":"dddddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-11-08T14:32:37Z","updated_at":"2019-02-07T10:33:10Z","closed_at":"2018-11-09T18:03:26Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"## Example build failure\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+periodic/132/console\r\n\r\n## Reproduction line \r\ndoes not reproduce locally\r\n```\r\n./gradlew :server:integTest \\\r\n  -Dtests.seed=19E21C2B8FC27FC8 \\\r\n  -Dtests.class=org.elasticsearch.persistent.decider.EnableAssignmentDeciderIT \\\r\n  -Dtests.method=\"testEnableAssignmentAfterRestart\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=ar-SD \\\r\n  -Dtests.timezone=America/Danmarkshavn \\\r\n  -Dcompiler.java=11 \\\r\n  -Druntime.java=8\r\n```\r\n\r\n## Example relevant log:\r\n```\r\nCaptured an uncaught exception in thread: Thread[id=1393, name=elasticsearch[node_s2][__mock_network_thread][T#17], state=RUNNABLE, group=TGRP-EnableAssignmentDeciderIT]\r\n--\r\n```\r\n\r\n```\r\ncom.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=1393, name=elasticsearch[node_s2][__mock_network_thread][T#17], state=RUNNABLE, group=TGRP-EnableAssignmentDeciderIT]\r\nCaused by: java.lang.OutOfMemoryError: Java heap space\r\n\tat __randomizedtesting.SeedInfo.seed([19E21C2B8FC27FC8]:0)\r\n\tat org.elasticsearch.transport.MockTcpTransport.readMessage(MockTcpTransport.java:154)\r\n\tat org.elasticsearch.transport.MockTcpTransport.access$800(MockTcpTransport.java:69)\r\n\tat org.elasticsearch.transport.MockTcpTransport$MockChannel$2.lambda$doRun$0(MockTcpTransport.java:334)\r\n\tat org.elasticsearch.transport.MockTcpTransport$MockChannel$2$$Lambda$1501/1218045512.run(Unknown Source)\r\n\tat org.elasticsearch.common.util.CancellableThreads.executeIO(CancellableThreads.java:106)\r\n\tat org.elasticsearch.transport.MockTcpTransport$MockChannel$2.doRun(MockTcpTransport.java:334)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\n## Frequency\r\n\r\nThe OOM for this thread shows up in logs 35 times this week and 95 times last week   across all builds.","closed_by":{"login":"vladimirdolzhenko","id":209440,"node_id":"MDQ6VXNlcjIwOTQ0MA==","avatar_url":"https://avatars0.githubusercontent.com/u/209440?v=4","gravatar_id":"","url":"https://api.github.com/users/vladimirdolzhenko","html_url":"https://github.com/vladimirdolzhenko","followers_url":"https://api.github.com/users/vladimirdolzhenko/followers","following_url":"https://api.github.com/users/vladimirdolzhenko/following{/other_user}","gists_url":"https://api.github.com/users/vladimirdolzhenko/gists{/gist_id}","starred_url":"https://api.github.com/users/vladimirdolzhenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vladimirdolzhenko/subscriptions","organizations_url":"https://api.github.com/users/vladimirdolzhenko/orgs","repos_url":"https://api.github.com/users/vladimirdolzhenko/repos","events_url":"https://api.github.com/users/vladimirdolzhenko/events{/privacy}","received_events_url":"https://api.github.com/users/vladimirdolzhenko/received_events","type":"User","site_admin":false},"performed_via_github_app":null}