[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/438437379","html_url":"https://github.com/elastic/elasticsearch/issues/35518#issuecomment-438437379","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35518","id":438437379,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODQzNzM3OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-11-13T21:09:23Z","updated_at":"2018-11-13T21:09:23Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/439151410","html_url":"https://github.com/elastic/elasticsearch/issues/35518#issuecomment-439151410","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35518","id":439151410,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTE1MTQxMA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-11-15T18:57:00Z","updated_at":"2018-11-15T18:57:00Z","author_association":"MEMBER","body":"The problem is the use of `TimeZone.getDefault()` in setting the timezone of a \"local formatter\":\r\n\r\n```\r\nprivate static final DateTimeFormatter LOCAL_FORMATTER = DateTimeFormat.forPattern(\"EEE, d MMM yyyy HH:mm:ss Z\")\r\n        .withZone(DateTimeZone.forTimeZone(TimeZone.getDefault()));\r\n```\r\n\r\nI wonder if we can remove this local formatter altogether? We go to great lengths to not rely on the local timezone in other parts of the code (which is why randomized runner passes in a random timezone and locale to tests).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/439204003","html_url":"https://github.com/elastic/elasticsearch/issues/35518#issuecomment-439204003","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35518","id":439204003,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTIwNDAwMw==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-11-15T21:53:59Z","updated_at":"2018-11-15T21:53:59Z","author_association":"CONTRIBUTOR","body":"I see the value in supporting non-UTC timezones in this tool. It's for debugging cron expressions, which seem to be evaluated in UTC, and I can imagine one point of confusion is the discrepancy between UTC and the caller's own local timezone. I do however agree it's a pain for testing.\r\n\r\nI think another way of looking at the problem is that it's a Joda/java.time mismatch. `TimeZone.getDefault()` yields a `java.util.TimeZone` which we then try and convert to an `org.joda.time.DateTimeZone` but this conversion is lossy. However Joda has its own method for getting the default time zone directly, `DateTimeZone.forTimeZone(null)`, which may fail less. Another option would be to ditch Joda entirely in this tool.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/439214036","html_url":"https://github.com/elastic/elasticsearch/issues/35518#issuecomment-439214036","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35518","id":439214036,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTIxNDAzNg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-11-15T22:30:10Z","updated_at":"2018-11-15T22:30:10Z","author_association":"MEMBER","body":"For now, I've opened https://github.com/elastic/elasticsearch/pull/35608 to fix this immediate issue. We will be converting everything to java time separately.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/439277015","html_url":"https://github.com/elastic/elasticsearch/issues/35518#issuecomment-439277015","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35518","id":439277015,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTI3NzAxNQ==","user":{"login":"bizybot","id":902768,"node_id":"MDQ6VXNlcjkwMjc2OA==","avatar_url":"https://avatars2.githubusercontent.com/u/902768?v=4","gravatar_id":"","url":"https://api.github.com/users/bizybot","html_url":"https://github.com/bizybot","followers_url":"https://api.github.com/users/bizybot/followers","following_url":"https://api.github.com/users/bizybot/following{/other_user}","gists_url":"https://api.github.com/users/bizybot/gists{/gist_id}","starred_url":"https://api.github.com/users/bizybot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bizybot/subscriptions","organizations_url":"https://api.github.com/users/bizybot/orgs","repos_url":"https://api.github.com/users/bizybot/repos","events_url":"https://api.github.com/users/bizybot/events{/privacy}","received_events_url":"https://api.github.com/users/bizybot/received_events","type":"User","site_admin":false},"created_at":"2018-11-16T04:18:04Z","updated_at":"2018-11-16T04:18:04Z","author_association":"CONTRIBUTOR","body":"Just adding it here so we do not miss that the changes are quite recent and were done in #33215. Thanks.","performed_via_github_app":null}]