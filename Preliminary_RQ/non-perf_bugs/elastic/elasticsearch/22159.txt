{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22159","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22159/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22159/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22159/events","html_url":"https://github.com/elastic/elasticsearch/issues/22159","id":195489918,"node_id":"MDU6SXNzdWUxOTU0ODk5MTg=","number":22159,"title":"change the index allocation makes the loads of cluster very high","user":{"login":"pfctgeorge","id":5453070,"node_id":"MDQ6VXNlcjU0NTMwNzA=","avatar_url":"https://avatars3.githubusercontent.com/u/5453070?v=4","gravatar_id":"","url":"https://api.github.com/users/pfctgeorge","html_url":"https://github.com/pfctgeorge","followers_url":"https://api.github.com/users/pfctgeorge/followers","following_url":"https://api.github.com/users/pfctgeorge/following{/other_user}","gists_url":"https://api.github.com/users/pfctgeorge/gists{/gist_id}","starred_url":"https://api.github.com/users/pfctgeorge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pfctgeorge/subscriptions","organizations_url":"https://api.github.com/users/pfctgeorge/orgs","repos_url":"https://api.github.com/users/pfctgeorge/repos","events_url":"https://api.github.com/users/pfctgeorge/events{/privacy}","received_events_url":"https://api.github.com/users/pfctgeorge/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-12-14T10:10:42Z","updated_at":"2016-12-14T14:08:49Z","closed_at":"2016-12-14T14:08:49Z","author_association":"NONE","active_lock_reason":null,"body":"Hi\r\n\r\nWe have an elasticsearch cluster. The nodes with tag \"hot\" stores the data of recent 3 days, and nodes with tag \"cold\" stores the older data of recent 30 days.\r\nAt every night, we change the index settings of \"index.routing.allocation.require.tag\" to move the data in hot tag which before 3 days into \"cold\" nodes. But recently, we notice that this process makes our loads of \"cold\" nodes very high and the nodes almost down. \r\nCan anybody kindly told us how can we optimize this phase?\r\n\r\nThanks.\r\n\r\nsettings: \r\n```\r\n{\r\n  \"index\": {\r\n     \"routing\": {\r\n        \"allocation\": {\r\n           \"require\": {\r\n              \"tag\": \"cold\"\r\n           },\r\n        }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nElasticsearch Version: 2.4.0\r\nJVM version: 1.8.0_51","closed_by":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"performed_via_github_app":null}