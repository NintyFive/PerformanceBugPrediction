{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2309","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2309/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2309/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2309/events","html_url":"https://github.com/elastic/elasticsearch/issues/2309","id":7415454,"node_id":"MDU6SXNzdWU3NDE1NDU0","number":2309,"title":"Multi-index document GET","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2012-10-08T09:37:11Z","updated_at":"2014-05-20T09:34:04Z","closed_at":"2014-05-20T09:34:04Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"As described in this post https://groups.google.com/d/msg/elasticsearch/lhoG0gE9Kvo/ez3XXIlsAx0J there is one bit missing from the index-per-user model which gets in the way of making things transparent to the application.\n\nThat 'bit' is that, given a document type and ID, you have to know which index the document lives in in order to be able to GET it.\n\nSo when you have documents sitting in your general all-users index and you add a user-specific index, you can't easily know which index to talk to in order to retrieve a document.\n\nWhat about some mechanism for doing a GET from a list of indices? In other words, try index 1, if the document doesn't exist, try index 2, etc\n\nPerhaps it is a `read_priority` setting in an alias? Something like:\n\n```\ncurl -XPOST 'http://127.0.0.1:9200/_aliases?pretty=1'  -d '\n{\n   \"actions\" : [\n      {\n         \"add\" : {\n            \"read_priority\" : 1,\n            \"index\" : \"foo_v1\",\n            \"default\" : 1,\n            \"alias\" : \"foo\"\n         }\n      },\n      {\n         \"add\" : {\n            \"read_priority\" : 2,\n            \"index\" : \"all_users\",\n            \"filter\" : {\n               \"term\" : {\n                  \"user_id\" : \"foo\"\n               }\n            },\n            \"routing\" : \"foo\",\n            \"alias\" : \"foo\"\n         }\n      }\n   ]\n}\n'\n```\n\nI've also added a `default` param which indicates that, when creating new documents, the index `foo_v1` should be used (as opposed to just failing with \"can't write to multiple indices\")\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}