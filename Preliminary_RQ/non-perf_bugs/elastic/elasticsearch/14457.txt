{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14457","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14457/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14457/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14457/events","html_url":"https://github.com/elastic/elasticsearch/issues/14457","id":114692690,"node_id":"MDU6SXNzdWUxMTQ2OTI2OTA=","number":14457,"title":"Unicast hosts port range breaking change in ES 2.0","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":{"login":"debadair","id":362578,"node_id":"MDQ6VXNlcjM2MjU3OA==","avatar_url":"https://avatars1.githubusercontent.com/u/362578?v=4","gravatar_id":"","url":"https://api.github.com/users/debadair","html_url":"https://github.com/debadair","followers_url":"https://api.github.com/users/debadair/followers","following_url":"https://api.github.com/users/debadair/following{/other_user}","gists_url":"https://api.github.com/users/debadair/gists{/gist_id}","starred_url":"https://api.github.com/users/debadair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/debadair/subscriptions","organizations_url":"https://api.github.com/users/debadair/orgs","repos_url":"https://api.github.com/users/debadair/repos","events_url":"https://api.github.com/users/debadair/events{/privacy}","received_events_url":"https://api.github.com/users/debadair/received_events","type":"User","site_admin":false},"assignees":[{"login":"debadair","id":362578,"node_id":"MDQ6VXNlcjM2MjU3OA==","avatar_url":"https://avatars1.githubusercontent.com/u/362578?v=4","gravatar_id":"","url":"https://api.github.com/users/debadair","html_url":"https://github.com/debadair","followers_url":"https://api.github.com/users/debadair/followers","following_url":"https://api.github.com/users/debadair/following{/other_user}","gists_url":"https://api.github.com/users/debadair/gists{/gist_id}","starred_url":"https://api.github.com/users/debadair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/debadair/subscriptions","organizations_url":"https://api.github.com/users/debadair/orgs","repos_url":"https://api.github.com/users/debadair/repos","events_url":"https://api.github.com/users/debadair/events{/privacy}","received_events_url":"https://api.github.com/users/debadair/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2015-11-02T21:54:49Z","updated_at":"2018-03-17T02:03:42Z","closed_at":"2018-03-17T02:03:42Z","author_association":"MEMBER","active_lock_reason":null,"body":"There is a breaking change in ES 2.0 where we changed the unicast.hosts specification.\n\nThere are 2 issues with this change:\n\n1) This is missed in our breaking changes \"network changes\" documentation:\nhttps://www.elastic.co/guide/en/elasticsearch/reference/2.0/_network_changes.html\n\nWhile the new syntax is documented in the [Zen discovery](https://www.elastic.co/guide/en/elasticsearch/reference/2.0/modules-discovery-zen.html#unicast) documentation, it should also be mentioned on the breaking changes page.\n\n2) The change is breaking, but the exception thrown on the failed ES startup is misleading.  Instead of a UnknownHostException, it will be helpful for the error handling to tell the user that the setting specification has changed, and provide an example of the new syntax right in the error message.\n\nWorks in 2.0:\ndiscovery.zen.ping.unicast.hosts: ['127.0.0.1:9300-9400']\n\nWorks in 1.7, breaks in 2.0 (and server will not start up):\ndiscovery.zen.ping.unicast.hosts: ['127.0.0.1[9300-9400]']\n\nAnd it throws the exception:\n\n```\n[2015-11-02 13:48:57,713][INFO ][watcher.trigger.schedule ] [Starhawk] using [ticker] schedule trigger engine\nException in thread \"main\" java.lang.IllegalArgumentException: Failed to resolve address for [127.0.0.1[9300-9400]]\nLikely root cause: java.net.UnknownHostException: 127.0.0.1[9300-9400]: nodename nor servname provided, or not known\n    at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\n    at java.net.InetAddress$1.lookupAllHostAddr(InetAddress.java:901)\n    at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1293)\n    at java.net.InetAddress.getAllByName0(InetAddress.java:1246)\n    at java.net.InetAddress.getAllByName(InetAddress.java:1162)\n    at java.net.InetAddress.getAllByName(InetAddress.java:1098)\n    at org.elasticsearch.transport.netty.NettyTransport.parse(NettyTransport.java:668)\n    at org.elasticsearch.transport.netty.NettyTransport.addressesFromString(NettyTransport.java:620)\n    at org.elasticsearch.transport.TransportService.addressesFromString(TransportService.java:398)\n    at org.elasticsearch.discovery.zen.ping.unicast.UnicastZenPing.<init>(UnicastZenPing.java:141)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n    at <<<guice>>>\n    at org.elasticsearch.node.Node.<init>(Node.java:198)\n    at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:145)\n    at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:170)\n    at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:270)\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35)\n```\n","closed_by":{"login":"debadair","id":362578,"node_id":"MDQ6VXNlcjM2MjU3OA==","avatar_url":"https://avatars1.githubusercontent.com/u/362578?v=4","gravatar_id":"","url":"https://api.github.com/users/debadair","html_url":"https://github.com/debadair","followers_url":"https://api.github.com/users/debadair/followers","following_url":"https://api.github.com/users/debadair/following{/other_user}","gists_url":"https://api.github.com/users/debadair/gists{/gist_id}","starred_url":"https://api.github.com/users/debadair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/debadair/subscriptions","organizations_url":"https://api.github.com/users/debadair/orgs","repos_url":"https://api.github.com/users/debadair/repos","events_url":"https://api.github.com/users/debadair/events{/privacy}","received_events_url":"https://api.github.com/users/debadair/received_events","type":"User","site_admin":false},"performed_via_github_app":null}