[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/263562012","html_url":"https://github.com/elastic/elasticsearch/issues/21854#issuecomment-263562012","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21854","id":263562012,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzU2MjAxMg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-29T12:50:19Z","updated_at":"2016-11-29T12:50:19Z","author_association":"CONTRIBUTOR","body":"> Do we use groovy script correctly?\r\n\r\n\r\nNo, you're hard coding a changing parameter into the script, which causes the script to recompile every time you use it.  Instead, pass in a named parameter, eg:\r\n\r\n    {\r\n      \"script\": {\r\n        \"lang\": \"groovy\",\r\n        \"inline\": \"ctx._source.available_dates = ctx._source.available_dates.minus(ts)\",\r\n        \"params\": {\r\n          \"ts\": 12345\r\n        }\r\n    }\r\n\r\nThis way the script is only compiled once.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/294107624","html_url":"https://github.com/elastic/elasticsearch/issues/21854#issuecomment-294107624","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21854","id":294107624,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDEwNzYyNA==","user":{"login":"hailin0","id":14371345,"node_id":"MDQ6VXNlcjE0MzcxMzQ1","avatar_url":"https://avatars2.githubusercontent.com/u/14371345?v=4","gravatar_id":"","url":"https://api.github.com/users/hailin0","html_url":"https://github.com/hailin0","followers_url":"https://api.github.com/users/hailin0/followers","following_url":"https://api.github.com/users/hailin0/following{/other_user}","gists_url":"https://api.github.com/users/hailin0/gists{/gist_id}","starred_url":"https://api.github.com/users/hailin0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hailin0/subscriptions","organizations_url":"https://api.github.com/users/hailin0/orgs","repos_url":"https://api.github.com/users/hailin0/repos","events_url":"https://api.github.com/users/hailin0/events{/privacy}","received_events_url":"https://api.github.com/users/hailin0/received_events","type":"User","site_admin":false},"created_at":"2017-04-14T07:31:52Z","updated_at":"2017-04-14T07:31:52Z","author_association":"NONE","body":"遇到一样的问题，试试params看看效果。。","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/354412046","html_url":"https://github.com/elastic/elasticsearch/issues/21854#issuecomment-354412046","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21854","id":354412046,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDQxMjA0Ng==","user":{"login":"jarvisxiong","id":12123243,"node_id":"MDQ6VXNlcjEyMTIzMjQz","avatar_url":"https://avatars2.githubusercontent.com/u/12123243?v=4","gravatar_id":"","url":"https://api.github.com/users/jarvisxiong","html_url":"https://github.com/jarvisxiong","followers_url":"https://api.github.com/users/jarvisxiong/followers","following_url":"https://api.github.com/users/jarvisxiong/following{/other_user}","gists_url":"https://api.github.com/users/jarvisxiong/gists{/gist_id}","starred_url":"https://api.github.com/users/jarvisxiong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jarvisxiong/subscriptions","organizations_url":"https://api.github.com/users/jarvisxiong/orgs","repos_url":"https://api.github.com/users/jarvisxiong/repos","events_url":"https://api.github.com/users/jarvisxiong/events{/privacy}","received_events_url":"https://api.github.com/users/jarvisxiong/received_events","type":"User","site_admin":false},"created_at":"2017-12-29T07:56:42Z","updated_at":"2017-12-29T07:56:42Z","author_association":"NONE","body":"@hailin0  I also encountered ，How did you solve the problem? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/380507109","html_url":"https://github.com/elastic/elasticsearch/issues/21854#issuecomment-380507109","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21854","id":380507109,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MDUwNzEwOQ==","user":{"login":"hailin0","id":14371345,"node_id":"MDQ6VXNlcjE0MzcxMzQ1","avatar_url":"https://avatars2.githubusercontent.com/u/14371345?v=4","gravatar_id":"","url":"https://api.github.com/users/hailin0","html_url":"https://github.com/hailin0","followers_url":"https://api.github.com/users/hailin0/followers","following_url":"https://api.github.com/users/hailin0/following{/other_user}","gists_url":"https://api.github.com/users/hailin0/gists{/gist_id}","starred_url":"https://api.github.com/users/hailin0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hailin0/subscriptions","organizations_url":"https://api.github.com/users/hailin0/orgs","repos_url":"https://api.github.com/users/hailin0/repos","events_url":"https://api.github.com/users/hailin0/events{/privacy}","received_events_url":"https://api.github.com/users/hailin0/received_events","type":"User","site_admin":false},"created_at":"2018-04-11T16:05:29Z","updated_at":"2018-04-11T16:05:29Z","author_association":"NONE","body":"@jarvisxiong replacing variables in a script with parameter placeholders\r\n\r\n\r\ne.g\r\n\r\n$ curl -XPOST 'localhost:9200/xiaorui.cc/blog/1/_update' -d '{\r\n    \"script\" : \"ctx._source.counter += count\",\r\n    \"params\" : {\r\n        \"count\" : 4\r\n    }\r\n}'","performed_via_github_app":null}]