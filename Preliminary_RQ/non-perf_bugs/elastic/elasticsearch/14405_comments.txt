[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227721021","html_url":"https://github.com/elastic/elasticsearch/issues/14405#issuecomment-227721021","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14405","id":227721021,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzcyMTAyMQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-06-22T11:54:25Z","updated_at":"2016-06-22T11:54:25Z","author_association":"CONTRIBUTOR","body":"Are you still planning on exposing disk usage stats somewhere?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227778452","html_url":"https://github.com/elastic/elasticsearch/issues/14405#issuecomment-227778452","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14405","id":227778452,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzc3ODQ1Mg==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-06-22T15:20:34Z","updated_at":"2016-06-22T15:20:34Z","author_association":"MEMBER","body":"@clintongormley I'm on the fence about this, on one hand, it'd be nice to have whatever the calculated disk usage is available in the cluster state, on the other hand, I'm not sure it's worth creating a new cluster state every 30 seconds due to the disk changing every time. I wonder if this is less necessary now that the cluster allocation explain API will hopefully give more information about disk usage when a shard fails to be assigned.\n\nWhat do you think? Is it worth trying to add this even though it will cause new cluster states to be sent every thirty seconds?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227839258","html_url":"https://github.com/elastic/elasticsearch/issues/14405#issuecomment-227839258","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14405","id":227839258,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzgzOTI1OA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2016-06-22T18:43:17Z","updated_at":"2016-06-22T18:43:17Z","author_association":"CONTRIBUTOR","body":"@dakrone Why is exposing disk usage and shard size related to cluster state? `/_nodes/stats` just queries each node directly to gather stats?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227853405","html_url":"https://github.com/elastic/elasticsearch/issues/14405#issuecomment-227853405","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14405","id":227853405,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzg1MzQwNQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-06-22T19:37:16Z","updated_at":"2016-06-22T19:37:26Z","author_association":"MEMBER","body":"@ywelsch this would be exposing the master node's _idea_ of the disk state by adding the `InternalClusterInfoService`'s `ClusterInfo` to the state, not the actual disk used (which you are right, could be gathered from the nodes directly)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227969797","html_url":"https://github.com/elastic/elasticsearch/issues/14405#issuecomment-227969797","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14405","id":227969797,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzk2OTc5Nw==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2016-06-23T07:19:34Z","updated_at":"2016-06-23T07:19:34Z","author_association":"CONTRIBUTOR","body":"@dakrone If we're interested in what the master node thinks, we can use an action that fetches it from the master (`TransportMasterNodeAction`). Still doesn't require to add it to the cluster state ;-)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227971024","html_url":"https://github.com/elastic/elasticsearch/issues/14405#issuecomment-227971024","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14405","id":227971024,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzk3MTAyNA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-06-23T07:26:08Z","updated_at":"2016-06-23T07:26:08Z","author_association":"MEMBER","body":"@ywelsch @dakrone I'm a bit confused - the ticket isn't about adding the disk usage to the cluster state but rather expose them through an API? I'm -1 on adding the to the cluster state internals - they have nothing to do with it and it will be indeed a shame to publish it for nothing.\n\nSince we only use those for allocations, how about adding a flag/section to the allocation explain API to return the current cluster info in it's entirety?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/228082132","html_url":"https://github.com/elastic/elasticsearch/issues/14405#issuecomment-228082132","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14405","id":228082132,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODA4MjEzMg==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-06-23T15:12:33Z","updated_at":"2016-06-23T15:12:33Z","author_association":"MEMBER","body":"> I'm a bit confused - the ticket isn't about adding the disk usage to the cluster state but rather expose them through an API? I'm -1 on adding the to the cluster state internals\n\nSorry, there's some history here that wasn't communicated clearly, this comes from things like https://github.com/elastic/elasticsearch/pull/11643 where the cluster info was available to all the nodes as part of the state, which would allow them to make judgments about which path to put a shard on, or shard weight, etc. For what it's worth I'm -1 on adding it to the cluster state also (which is why that PR was closed and not merged).\n\n> Since we only use those for allocations, how about adding a flag/section to the allocation explain API to return the current cluster info in it's entirety?\n\nThis does sound reasonable to me and would be very easy to do, what do you think @ywelsch?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/228088053","html_url":"https://github.com/elastic/elasticsearch/issues/14405#issuecomment-228088053","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14405","id":228088053,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODA4ODA1Mw==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2016-06-23T15:29:48Z","updated_at":"2016-06-23T15:29:48Z","author_association":"CONTRIBUTOR","body":"> > Since we only use those for allocations, how about adding a flag/section to the allocation explain API to return the current cluster info in it's entirety?\n> \n> This does sound reasonable to me and would be very easy to do, what do you think @ywelsch?\n\nsounds good to me!\n","performed_via_github_app":null}]