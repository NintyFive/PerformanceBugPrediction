{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2467","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2467/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2467/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2467/events","html_url":"https://github.com/elastic/elasticsearch/issues/2467","id":9052356,"node_id":"MDU6SXNzdWU5MDUyMzU2","number":2467,"title":"In which cases I should wait for yellow/green status?","user":{"login":"vsespb","id":1210230,"node_id":"MDQ6VXNlcjEyMTAyMzA=","avatar_url":"https://avatars2.githubusercontent.com/u/1210230?v=4","gravatar_id":"","url":"https://api.github.com/users/vsespb","html_url":"https://github.com/vsespb","followers_url":"https://api.github.com/users/vsespb/followers","following_url":"https://api.github.com/users/vsespb/following{/other_user}","gists_url":"https://api.github.com/users/vsespb/gists{/gist_id}","starred_url":"https://api.github.com/users/vsespb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vsespb/subscriptions","organizations_url":"https://api.github.com/users/vsespb/orgs","repos_url":"https://api.github.com/users/vsespb/repos","events_url":"https://api.github.com/users/vsespb/events{/privacy}","received_events_url":"https://api.github.com/users/vsespb/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"assignees":[{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2012-12-06T12:46:57Z","updated_at":"2014-07-08T18:48:56Z","closed_at":"2014-07-08T18:48:56Z","author_association":"NONE","active_lock_reason":null,"body":"Hello.\n\nWe're using elasticsearch in our integration tests (We are using \"tire\" gem for Rails.)\nTypical workflow is:\n\n(I)\n\n1) delete index\n2) add items to index\n3) immediately search in that index\n\nOR (II)\n\n1) delete index\n2) add items\n3) change or remove items\n4) immediately search.\n\nAs I told we use it in unit tests. So, search step executed immediately after updating index.. And we need search to return always same, correct result.\n\nWe are not getting correct results now. Sometimes there are 2 items in index, while we expected one. Sometimes there are errors like HTTP 500 No active shards. Failures are random.\n\nI think you mention here\nhttps://groups.google.com/forum/?fromgroups=#!topic/elasticsearch/wPKUJXiG2mw\nthat wait for yellow/green status should be used in this case.\n\nalso another link\nhttp://grokbase.com/t/gg/elasticsearch/12ag6njpyz/no-active-shards-in-tests-using-the-java-api\n\nIs there any documentation which will explain usage of health request in our workflow?\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}