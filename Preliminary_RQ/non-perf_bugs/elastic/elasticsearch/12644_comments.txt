[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129431101","html_url":"https://github.com/elastic/elasticsearch/issues/12644#issuecomment-129431101","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12644","id":129431101,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTQzMTEwMQ==","user":{"login":"eliranmoyal","id":2933669,"node_id":"MDQ6VXNlcjI5MzM2Njk=","avatar_url":"https://avatars0.githubusercontent.com/u/2933669?v=4","gravatar_id":"","url":"https://api.github.com/users/eliranmoyal","html_url":"https://github.com/eliranmoyal","followers_url":"https://api.github.com/users/eliranmoyal/followers","following_url":"https://api.github.com/users/eliranmoyal/following{/other_user}","gists_url":"https://api.github.com/users/eliranmoyal/gists{/gist_id}","starred_url":"https://api.github.com/users/eliranmoyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eliranmoyal/subscriptions","organizations_url":"https://api.github.com/users/eliranmoyal/orgs","repos_url":"https://api.github.com/users/eliranmoyal/repos","events_url":"https://api.github.com/users/eliranmoyal/events{/privacy}","received_events_url":"https://api.github.com/users/eliranmoyal/received_events","type":"User","site_admin":false},"created_at":"2015-08-10T12:53:12Z","updated_at":"2015-08-10T12:53:12Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129431735","html_url":"https://github.com/elastic/elasticsearch/issues/12644#issuecomment-129431735","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12644","id":129431735,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTQzMTczNQ==","user":{"login":"Ghost93","id":4268710,"node_id":"MDQ6VXNlcjQyNjg3MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/4268710?v=4","gravatar_id":"","url":"https://api.github.com/users/Ghost93","html_url":"https://github.com/Ghost93","followers_url":"https://api.github.com/users/Ghost93/followers","following_url":"https://api.github.com/users/Ghost93/following{/other_user}","gists_url":"https://api.github.com/users/Ghost93/gists{/gist_id}","starred_url":"https://api.github.com/users/Ghost93/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ghost93/subscriptions","organizations_url":"https://api.github.com/users/Ghost93/orgs","repos_url":"https://api.github.com/users/Ghost93/repos","events_url":"https://api.github.com/users/Ghost93/events{/privacy}","received_events_url":"https://api.github.com/users/Ghost93/received_events","type":"User","site_admin":false},"created_at":"2015-08-10T12:56:02Z","updated_at":"2015-08-10T12:56:02Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129830350","html_url":"https://github.com/elastic/elasticsearch/issues/12644#issuecomment-129830350","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12644","id":129830350,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTgzMDM1MA==","user":{"login":"ml4spark","id":12525406,"node_id":"MDQ6VXNlcjEyNTI1NDA2","avatar_url":"https://avatars3.githubusercontent.com/u/12525406?v=4","gravatar_id":"","url":"https://api.github.com/users/ml4spark","html_url":"https://github.com/ml4spark","followers_url":"https://api.github.com/users/ml4spark/followers","following_url":"https://api.github.com/users/ml4spark/following{/other_user}","gists_url":"https://api.github.com/users/ml4spark/gists{/gist_id}","starred_url":"https://api.github.com/users/ml4spark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ml4spark/subscriptions","organizations_url":"https://api.github.com/users/ml4spark/orgs","repos_url":"https://api.github.com/users/ml4spark/repos","events_url":"https://api.github.com/users/ml4spark/events{/privacy}","received_events_url":"https://api.github.com/users/ml4spark/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T10:39:41Z","updated_at":"2015-08-11T10:39:41Z","author_association":"NONE","body":"Hi Nick, have you had a chance to take a look? Our upgrade to a newer version (and security fixes) is blocked until we have this resolved. Thanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129854646","html_url":"https://github.com/elastic/elasticsearch/issues/12644#issuecomment-129854646","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12644","id":129854646,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTg1NDY0Ng==","user":{"login":"sergeant72","id":13748058,"node_id":"MDQ6VXNlcjEzNzQ4MDU4","avatar_url":"https://avatars0.githubusercontent.com/u/13748058?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeant72","html_url":"https://github.com/sergeant72","followers_url":"https://api.github.com/users/sergeant72/followers","following_url":"https://api.github.com/users/sergeant72/following{/other_user}","gists_url":"https://api.github.com/users/sergeant72/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeant72/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeant72/subscriptions","organizations_url":"https://api.github.com/users/sergeant72/orgs","repos_url":"https://api.github.com/users/sergeant72/repos","events_url":"https://api.github.com/users/sergeant72/events{/privacy}","received_events_url":"https://api.github.com/users/sergeant72/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T12:19:43Z","updated_at":"2015-08-11T12:19:43Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129878288","html_url":"https://github.com/elastic/elasticsearch/issues/12644#issuecomment-129878288","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12644","id":129878288,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTg3ODI4OA==","user":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T13:45:26Z","updated_at":"2015-08-11T13:45:26Z","author_association":"CONTRIBUTOR","body":"@ml4spark can you (or anyone else experiencing this behavior) provide an example shape that throws the exception? In short the behavior is related to #9511 where the `ShapeBuilder` formerly failed on valid interior rings, or constructed incorrect base polygons due to shape ambiguity (a nasty form of silent spatial data corruption).\n\nTo eliminate these issues (especially the latter), we made the ShapeBuilder more stringent by ensuring full compliance with the OGC SFA spec.  Since this was a change to 1.4.5, 1.5.2, and 1.6.0 we'll need to make sure your 1.4.4 indexed shapes were interpreted correctly.\n\n> Can I reduce the level of validation checking for geo locations?\n\nFor safety reasons `ignore_malformed` is not yet supported for `geo_shape` fields.  We can certainly add support to accept non-compliant data (if the majority desires) so long as there is an understanding of the associated dangers. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129885856","html_url":"https://github.com/elastic/elasticsearch/issues/12644#issuecomment-129885856","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12644","id":129885856,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTg4NTg1Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T13:58:08Z","updated_at":"2015-08-11T13:58:17Z","author_association":"CONTRIBUTOR","body":"> For safety reasons ignore_malformed is not yet supported for geo_shape fields. We can certainly add support to accept non-compliant data (if the majority desires) so long as there is an understanding of the associated dangers.\n\nI think we should definitely add `ignore_malformed` (default `false`), however I think it should behave in a consistent manner with all other uses of it: don't throw an exception but ignore the invalid value completely.\n\nUsing it to paper over invalid data is trappy and leads to hard to debug problems later on.  Either the data is valid, in which case you can query it, or it isn't, in which case you can't.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129898160","html_url":"https://github.com/elastic/elasticsearch/issues/12644#issuecomment-129898160","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12644","id":129898160,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTg5ODE2MA==","user":{"login":"ml4spark","id":12525406,"node_id":"MDQ6VXNlcjEyNTI1NDA2","avatar_url":"https://avatars3.githubusercontent.com/u/12525406?v=4","gravatar_id":"","url":"https://api.github.com/users/ml4spark","html_url":"https://github.com/ml4spark","followers_url":"https://api.github.com/users/ml4spark/followers","following_url":"https://api.github.com/users/ml4spark/following{/other_user}","gists_url":"https://api.github.com/users/ml4spark/gists{/gist_id}","starred_url":"https://api.github.com/users/ml4spark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ml4spark/subscriptions","organizations_url":"https://api.github.com/users/ml4spark/orgs","repos_url":"https://api.github.com/users/ml4spark/repos","events_url":"https://api.github.com/users/ml4spark/events{/privacy}","received_events_url":"https://api.github.com/users/ml4spark/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T14:16:01Z","updated_at":"2015-08-11T14:16:01Z","author_association":"NONE","body":"Hi Guys, can you help me configure elasticsearch logging such that it provides the information about which document causes the issue. We have many TBs of data and it seems this issue is very seldom. I only know in which shard (~200GB) the issue was encountered based on the above message. We could modify/fix/delete the offending information if the log returned the document id of the offending document.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138729230","html_url":"https://github.com/elastic/elasticsearch/issues/12644#issuecomment-138729230","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12644","id":138729230,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODcyOTIzMA==","user":{"login":"thebabelfish","id":2791611,"node_id":"MDQ6VXNlcjI3OTE2MTE=","avatar_url":"https://avatars1.githubusercontent.com/u/2791611?v=4","gravatar_id":"","url":"https://api.github.com/users/thebabelfish","html_url":"https://github.com/thebabelfish","followers_url":"https://api.github.com/users/thebabelfish/followers","following_url":"https://api.github.com/users/thebabelfish/following{/other_user}","gists_url":"https://api.github.com/users/thebabelfish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebabelfish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebabelfish/subscriptions","organizations_url":"https://api.github.com/users/thebabelfish/orgs","repos_url":"https://api.github.com/users/thebabelfish/repos","events_url":"https://api.github.com/users/thebabelfish/events{/privacy}","received_events_url":"https://api.github.com/users/thebabelfish/received_events","type":"User","site_admin":false},"created_at":"2015-09-08T23:19:58Z","updated_at":"2015-09-08T23:19:58Z","author_association":"NONE","body":"I encountered the same issue using logstash to import some postgis data.   Wanted to note that the geojson data passed the postgis st_isvalid(<column>) despite having duplicate coordinates which I confirmed do exist in my data.\n\nI then bypassed logstash and single indexed the document with the invalid geojson and elaticsearch took it without error.  It was only when I bulk indexed (whether through logstash or \"myself\") that the duplicate coordinate error was raised.\n\nBringing it to attention for elasticsearch as a possible bug and the users looking for a \"workaround\".\n\nI am running elasticsearch v1.7.1.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/144096258","html_url":"https://github.com/elastic/elasticsearch/issues/12644#issuecomment-144096258","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12644","id":144096258,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NDA5NjI1OA==","user":{"login":"ml4spark","id":12525406,"node_id":"MDQ6VXNlcjEyNTI1NDA2","avatar_url":"https://avatars3.githubusercontent.com/u/12525406?v=4","gravatar_id":"","url":"https://api.github.com/users/ml4spark","html_url":"https://github.com/ml4spark","followers_url":"https://api.github.com/users/ml4spark/followers","following_url":"https://api.github.com/users/ml4spark/following{/other_user}","gists_url":"https://api.github.com/users/ml4spark/gists{/gist_id}","starred_url":"https://api.github.com/users/ml4spark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ml4spark/subscriptions","organizations_url":"https://api.github.com/users/ml4spark/orgs","repos_url":"https://api.github.com/users/ml4spark/repos","events_url":"https://api.github.com/users/ml4spark/events{/privacy}","received_events_url":"https://api.github.com/users/ml4spark/received_events","type":"User","site_admin":false},"created_at":"2015-09-29T15:35:32Z","updated_at":"2015-09-29T15:35:32Z","author_association":"NONE","body":"Howdy elastic team,\njust a brief note to let you know that we managed to avoid the issue by re-processing the offending data. We have upgraded all nodes to 1.7.1 now.\nWe do no longer require help with this issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154387928","html_url":"https://github.com/elastic/elasticsearch/issues/12644#issuecomment-154387928","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12644","id":154387928,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM4NzkyOA==","user":{"login":"muka","id":1021269,"node_id":"MDQ6VXNlcjEwMjEyNjk=","avatar_url":"https://avatars2.githubusercontent.com/u/1021269?v=4","gravatar_id":"","url":"https://api.github.com/users/muka","html_url":"https://github.com/muka","followers_url":"https://api.github.com/users/muka/followers","following_url":"https://api.github.com/users/muka/following{/other_user}","gists_url":"https://api.github.com/users/muka/gists{/gist_id}","starred_url":"https://api.github.com/users/muka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muka/subscriptions","organizations_url":"https://api.github.com/users/muka/orgs","repos_url":"https://api.github.com/users/muka/repos","events_url":"https://api.github.com/users/muka/events{/privacy}","received_events_url":"https://api.github.com/users/muka/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T11:31:00Z","updated_at":"2015-11-06T11:31:00Z","author_association":"NONE","body":"+1 \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155888645","html_url":"https://github.com/elastic/elasticsearch/issues/12644#issuecomment-155888645","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12644","id":155888645,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTg4ODY0NQ==","user":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"created_at":"2015-11-11T19:38:03Z","updated_at":"2015-11-11T19:38:49Z","author_association":"CONTRIBUTOR","body":"Thanks to all for the discussion. I'm closing this as a non-issue. For future reference I am including excerpts from the [OGC SFA](http://www.opengeospatial.org/standards/sfa) and  [ISO 19107:2003](http://www.iso.org/iso/catalogue_detail.htm?csnumber=26012) standard that we use for processing `geo_shape` types. \n\n> A Curve is simple if it does not pass through the same Point twice with the possible exception of the two end points (Reference [1], section 3.12.7.3):\n> A Curve is closed if its start Point is equal to its end Point (Reference [1], section 3.12.7.3).\n> A Curve that is simple and closed is a Ring.\n> The boundary of a Polygon consists of a set of LinearRings that make up its exterior and interior boundaries; \n\nNot all geo processing packages interpret the spec the same, and adding leniency tends to introduce different bugs. Perhaps this presents the need for an Elasticsearch geo validator that can be used to preprocess the data.\n","performed_via_github_app":null}]