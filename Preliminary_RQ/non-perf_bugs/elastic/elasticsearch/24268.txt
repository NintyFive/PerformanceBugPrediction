{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/24268","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24268/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24268/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24268/events","html_url":"https://github.com/elastic/elasticsearch/issues/24268","id":223551977,"node_id":"MDU6SXNzdWUyMjM1NTE5Nzc=","number":24268,"title":"Scoring doc should warn about precision","user":{"login":"davidbkemp","id":436456,"node_id":"MDQ6VXNlcjQzNjQ1Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/436456?v=4","gravatar_id":"","url":"https://api.github.com/users/davidbkemp","html_url":"https://github.com/davidbkemp","followers_url":"https://api.github.com/users/davidbkemp/followers","following_url":"https://api.github.com/users/davidbkemp/following{/other_user}","gists_url":"https://api.github.com/users/davidbkemp/gists{/gist_id}","starred_url":"https://api.github.com/users/davidbkemp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidbkemp/subscriptions","organizations_url":"https://api.github.com/users/davidbkemp/orgs","repos_url":"https://api.github.com/users/davidbkemp/repos","events_url":"https://api.github.com/users/davidbkemp/events{/privacy}","received_events_url":"https://api.github.com/users/davidbkemp/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"}],"state":"closed","locked":false,"assignee":{"login":"mayya-sharipova","id":5738841,"node_id":"MDQ6VXNlcjU3Mzg4NDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5738841?v=4","gravatar_id":"","url":"https://api.github.com/users/mayya-sharipova","html_url":"https://github.com/mayya-sharipova","followers_url":"https://api.github.com/users/mayya-sharipova/followers","following_url":"https://api.github.com/users/mayya-sharipova/following{/other_user}","gists_url":"https://api.github.com/users/mayya-sharipova/gists{/gist_id}","starred_url":"https://api.github.com/users/mayya-sharipova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayya-sharipova/subscriptions","organizations_url":"https://api.github.com/users/mayya-sharipova/orgs","repos_url":"https://api.github.com/users/mayya-sharipova/repos","events_url":"https://api.github.com/users/mayya-sharipova/events{/privacy}","received_events_url":"https://api.github.com/users/mayya-sharipova/received_events","type":"User","site_admin":false},"assignees":[{"login":"mayya-sharipova","id":5738841,"node_id":"MDQ6VXNlcjU3Mzg4NDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5738841?v=4","gravatar_id":"","url":"https://api.github.com/users/mayya-sharipova","html_url":"https://github.com/mayya-sharipova","followers_url":"https://api.github.com/users/mayya-sharipova/followers","following_url":"https://api.github.com/users/mayya-sharipova/following{/other_user}","gists_url":"https://api.github.com/users/mayya-sharipova/gists{/gist_id}","starred_url":"https://api.github.com/users/mayya-sharipova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayya-sharipova/subscriptions","organizations_url":"https://api.github.com/users/mayya-sharipova/orgs","repos_url":"https://api.github.com/users/mayya-sharipova/repos","events_url":"https://api.github.com/users/mayya-sharipova/events{/privacy}","received_events_url":"https://api.github.com/users/mayya-sharipova/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2017-04-22T09:16:39Z","updated_at":"2019-05-29T20:09:37Z","closed_at":"2019-05-29T20:09:37Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"<!--\r\nGitHub is reserved for bug reports and feature requests. The best place\r\nto ask a general question is at the Elastic Discourse forums at\r\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\r\na feature request, please include one and only one of the below blocks\r\nin your new issue. Note that whether you're filing a bug report or a\r\nfeature request, ensure that your submission is for an\r\n[OS that we support](https://www.elastic.co/support/matrix#show_os).\r\nBug reports on an OS that we do not support or feature requests\r\nspecific to an OS that we do not support will be closed.\r\n-->\r\n\r\n<!--\r\nIf you are filing a bug report, please remove the below feature\r\nrequest block and provide responses for all of the below items.\r\n-->\r\n\r\n**Elasticsearch version**: 5.3\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version**: N/A\r\n\r\n**OS version**: N/A\r\n\r\n**Describe the feature**:\r\nThe documentation on scoring should warn of the consequences that scores are represented as single precision floating point numbers and hence only have 24 bits of precision.  For example constant score queries assigning scores from 100,000,001 to 100,000,010 will all result in scores rounded to 100,000,000.\r\n\r\nThere doesn't seem to be anywhere obvious to write this in the documentation.  Perhaps a page devoted to the topic could be added after the page on \"Query and filter context\": \r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/5.3/query-filter-context.html\r\n\r\nThe following example highlights the problem:\r\n\r\n```\r\nPOST /foo/foo/_bulk\r\n{\"index\": {}}\r\n{\"a\": \"apple\"}\r\n{\"index\": {}}\r\n{\"a\": \"pear\"}\r\n{\"index\": {}}\r\n{\"a\": \"banana\"}\r\n{\"index\": {}}\r\n{\"a\": \"grape\"}\r\n{\"index\": {}}\r\n\r\n\r\nGET /foo/foo/_search\r\n{\r\n  \"query\": {\r\n    \"bool\": {\r\n      \"should\": [\r\n        {\r\n          \"constant_score\": {\r\n            \"filter\": {\r\n              \"match\": {\r\n                \"a\": \"apple\"\r\n              }\r\n            },\r\n            \"boost\": 100000001\r\n          }\r\n        },\r\n        {\r\n          \"constant_score\": {\r\n            \"filter\": {\r\n              \"match\": {\r\n                \"a\": \"pear\"\r\n              }\r\n            },\r\n            \"boost\": 100000002\r\n          }\r\n        },\r\n        {\r\n          \"constant_score\": {\r\n            \"filter\": {\r\n              \"match\": {\r\n                \"a\": \"banana\"\r\n              }\r\n            },\r\n            \"boost\": 100000003\r\n          }\r\n        },\r\n        {\r\n          \"constant_score\": {\r\n            \"filter\": {\r\n              \"match\": {\r\n                \"a\": \"grape\"\r\n              }\r\n            },\r\n            \"boost\": 100000004\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe scores for all four documents actually end up as 100,000,000 and so the actual ranking becomes arbitrary.\r\n","closed_by":{"login":"mayya-sharipova","id":5738841,"node_id":"MDQ6VXNlcjU3Mzg4NDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5738841?v=4","gravatar_id":"","url":"https://api.github.com/users/mayya-sharipova","html_url":"https://github.com/mayya-sharipova","followers_url":"https://api.github.com/users/mayya-sharipova/followers","following_url":"https://api.github.com/users/mayya-sharipova/following{/other_user}","gists_url":"https://api.github.com/users/mayya-sharipova/gists{/gist_id}","starred_url":"https://api.github.com/users/mayya-sharipova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayya-sharipova/subscriptions","organizations_url":"https://api.github.com/users/mayya-sharipova/orgs","repos_url":"https://api.github.com/users/mayya-sharipova/repos","events_url":"https://api.github.com/users/mayya-sharipova/events{/privacy}","received_events_url":"https://api.github.com/users/mayya-sharipova/received_events","type":"User","site_admin":false},"performed_via_github_app":null}