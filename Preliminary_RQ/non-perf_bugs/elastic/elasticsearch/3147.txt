{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3147","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3147/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3147/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3147/events","html_url":"https://github.com/elastic/elasticsearch/issues/3147","id":15241622,"node_id":"MDU6SXNzdWUxNTI0MTYyMg==","number":3147,"title":"percolator registered on an alias is never triggered ","user":{"login":"iksnalybok","id":3304227,"node_id":"MDQ6VXNlcjMzMDQyMjc=","avatar_url":"https://avatars1.githubusercontent.com/u/3304227?v=4","gravatar_id":"","url":"https://api.github.com/users/iksnalybok","html_url":"https://github.com/iksnalybok","followers_url":"https://api.github.com/users/iksnalybok/followers","following_url":"https://api.github.com/users/iksnalybok/following{/other_user}","gists_url":"https://api.github.com/users/iksnalybok/gists{/gist_id}","starred_url":"https://api.github.com/users/iksnalybok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iksnalybok/subscriptions","organizations_url":"https://api.github.com/users/iksnalybok/orgs","repos_url":"https://api.github.com/users/iksnalybok/repos","events_url":"https://api.github.com/users/iksnalybok/events{/privacy}","received_events_url":"https://api.github.com/users/iksnalybok/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2013-06-06T19:49:34Z","updated_at":"2013-08-01T08:50:47Z","closed_at":"2013-08-01T08:50:47Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Actually, adding a percolator is always successful, regardless whether the targeted index exists or not. Currently, the targeted index should be a real index, and cannot be an alias. I don't know if this is the wanted behavior, but it's confused me; the percolate documentation is silent about this use case.\n\nTo reproduce:\n\n``` bash\n# Create an index (idx), and an alias pointing to it (idxAlias).\ncurl -XPUT localhost:9200/idx\ncurl -XPOST localhost:9200/_aliases -d ' { \"actions\" : [ { \"add\" : { \"index\" : \"idx\", \"alias\" : \"idxAlias\" } } ] }'\n\n# Create a percolator on the index it-self.\n# Percolating a document via the index or the alias works in both cases. This is fine.\ncurl -XPUT localhost:9200/_percolator/idx/kuku -d '{ \"query\" : { \"term\" : { \"field1\" : \"value1\" } } }'\ncurl -XGET localhost:9200/idx/type1/_percolate -d '{ \"doc\" : { \"field1\" : \"value1\" } }'\n    ~> {\"ok\":true,\"matches\":[\"kuku\"]}\ncurl -XGET localhost:9200/idxAlias/type1/_percolate -d '{ \"doc\" : { \"field1\" : \"value1\" } }'\n    ~> {\"ok\":true,\"matches\":[\"kuku\"]}\n\n# Create a percolator on the alias.\n# Percolating a document via the index or the alias fails in both cases.\ncurl -XPUT localhost:9200/_percolator/idxAlias/kiki -d '{ \"query\" : { \"term\" : { \"field2\" : \"value2\" } } }'\n    ~> {\"ok\":true,\"_index\":\"_percolator\",\"_type\":\"idxAlias\",\"_id\":\"kiki\",\"_version\":1}\ncurl -XGET localhost:9200/idx/type1/_percolate -d '{ \"doc\" : { \"field2\" : \"value2\" } }'\n    ~> {\"ok\":true,\"matches\":[]}\ncurl -XGET localhost:9200/idxAlias/type1/_percolate -d '{ \"doc\" : { \"field2\" : \"value2\" } }'\n    ~> {\"ok\":true,\"matches\":[]}\n```\n","closed_by":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"performed_via_github_app":null}