{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/19619","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19619/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19619/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19619/events","html_url":"https://github.com/elastic/elasticsearch/issues/19619","id":167834669,"node_id":"MDU6SXNzdWUxNjc4MzQ2Njk=","number":19619,"title":"Years and months units aren't supported for 'scale' parameter in decay score function","user":{"login":"igorbunova","id":10805589,"node_id":"MDQ6VXNlcjEwODA1NTg5","avatar_url":"https://avatars0.githubusercontent.com/u/10805589?v=4","gravatar_id":"","url":"https://api.github.com/users/igorbunova","html_url":"https://github.com/igorbunova","followers_url":"https://api.github.com/users/igorbunova/followers","following_url":"https://api.github.com/users/igorbunova/following{/other_user}","gists_url":"https://api.github.com/users/igorbunova/gists{/gist_id}","starred_url":"https://api.github.com/users/igorbunova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/igorbunova/subscriptions","organizations_url":"https://api.github.com/users/igorbunova/orgs","repos_url":"https://api.github.com/users/igorbunova/repos","events_url":"https://api.github.com/users/igorbunova/events{/privacy}","received_events_url":"https://api.github.com/users/igorbunova/received_events","type":"User","site_admin":false},"labels":[{"id":141145460,"node_id":"MDU6TGFiZWwxNDExNDU0NjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Mapping","name":":Search/Mapping","color":"0e8a16","default":false,"description":"How fields should be indexed"},{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-07-27T11:46:20Z","updated_at":"2018-02-14T13:32:48Z","closed_at":"2016-07-28T12:35:28Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\nGitHub is reserved for bug reports and feature requests. The best place\nto ask a general question is at the Elastic Discourse forums at\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\na feature request, please include one and only one of the below blocks\nin your new issue. Note that whether you're filing a bug report or a\nfeature request, ensure that your submission is for an\n[OS that we support](https://www.elastic.co/support/matrix#show_os).\nBug reports on an OS that we do not support or feature requests\nspecific to an OS that we do not support will be closed.\n-->\n\n<!--\nIf you are filing a bug report, please remove the below feature\nrequest block and provide responses for all of the below items.\n-->\n\n**Elasticsearch version**: 2.3\n\n**JVM version**: 1.8.0_66\n\n**OS version**: linux 3.2.0-106-generic-pae\n\n**Description of the problem including expected versus actual behavior**:\nThe documentation says that date units expressions work for 'scale' parameter of the decay function, however not all date time units seem work. \n\nAs the user I expect an expression as '10y' or '10Y' work as '10 years'\nAlso I expect an expression as '2M' work as '2 month'.\n\nActually years pattern isn't supported and 'M' unit works as minutes.\n\nThere is a work-around to write '365d' instead of year and '30d' instead of month, however it will produce slightly different results if the current month has 31, 28 or 29 days or the current year is leap.\nIf years and months units can't be supported the documentation should have a complete list of supported units (now it isn't obvious)\n\n**Steps to reproduce**:\n1. Create a mapping with the indexed date field\n2. Put some documents\n3. Perform the fuctional score query with any decay function on your date field and scale with year or month expression \n\n**Logs**:\nCaused by: ElasticsearchParseException[Failed to parse setting [GaussDecayFunctionParser.scale] with value [10y] as a time value: unit is missing or unrecognized]\n\n(see the attachment for stack trace)\n[log.txt](https://github.com/elastic/elasticsearch/files/385902/log.txt)\n\n<!--\nIf you are filing a feature request, please remove the above bug\nreport block and provide responses for all of the below items.\n-->\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}