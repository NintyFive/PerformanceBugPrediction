[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/583958630","html_url":"https://github.com/elastic/elasticsearch/issues/52125#issuecomment-583958630","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52125","id":583958630,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Mzk1ODYzMA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-02-10T05:12:48Z","updated_at":"2020-02-10T05:12:48Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/Snapshot/Restore)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/583980076","html_url":"https://github.com/elastic/elasticsearch/issues/52125#issuecomment-583980076","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52125","id":583980076,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Mzk4MDA3Ng==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2020-02-10T06:48:25Z","updated_at":"2020-02-10T06:48:25Z","author_association":"MEMBER","body":"This looks like a randomly super slow CI run. We have some logging about slow IO operations on the IO loop like e.g.:\r\n\r\n```\r\n  1> [2020-02-10T09:18:23,381][WARN ][o.e.t.n.MockNioTransport ] [node_sd1] Slow execution on network thread [102 milliseconds]\r\n  1> java.lang.RuntimeException: Slow exception on network thread\r\n  1> \tat org.elasticsearch.transport.nio.MockNioTransport$TransportThreadWatchdog.maybeLogElapsedTime(MockNioTransport.java:379) [framework-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.transport.nio.MockNioTransport$TransportThreadWatchdog.unregister(MockNioTransport.java:371) [framework-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.transport.nio.TestEventHandler.handleRead(TestEventHandler.java:154) [framework-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.nio.NioSelector.handleRead(NioSelector.java:420) [elasticsearch-nio-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.nio.NioSelector.processKey(NioSelector.java:246) [elasticsearch-nio-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.nio.NioSelector.singleLoop(NioSelector.java:174) [elasticsearch-nio-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.nio.NioSelector.runLoop(NioSelector.java:131) [elasticsearch-nio-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat java.lang.Thread.run(Thread.java:832) [?:?]\r\n  1> [2020-02-10T09:18:23,387][WARN ][o.e.t.n.MockNioTransport ] [node_sd2] Slow execution on network thread [102 milliseconds]\r\n  1> java.lang.RuntimeException: Slow exception on network thread\r\n  1> \tat org.elasticsearch.transport.nio.MockNioTransport$TransportThreadWatchdog.maybeLogElapsedTime(MockNioTransport.java:379) [framework-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.transport.nio.MockNioTransport$TransportThreadWatchdog.unregister(MockNioTransport.java:371) [framework-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.transport.nio.TestEventHandler.handleRead(TestEventHandler.java:154) [framework-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.nio.NioSelector.handleRead(NioSelector.java:420) [elasticsearch-nio-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.nio.NioSelector.processKey(NioSelector.java:246) [elasticsearch-nio-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.nio.NioSelector.singleLoop(NioSelector.java:174) [elasticsearch-nio-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.nio.NioSelector.runLoop(NioSelector.java:131) [elasticsearch-nio-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat java.lang.Thread.run(Thread.java:832) [?:?]\r\n  1> [2020-02-10T09:18:23,388][WARN ][o.e.t.n.MockNioTransport ] [node_sd1] Slow execution on network thread [100 milliseconds]\r\n  1> java.lang.RuntimeException: Slow exception on network thread\r\n  1> \tat org.elasticsearch.transport.nio.MockNioTransport$TransportThreadWatchdog.maybeLogElapsedTime(MockNioTransport.java:379) [framework-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.transport.nio.MockNioTransport$TransportThreadWatchdog.unregister(MockNioTransport.java:371) [framework-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.transport.nio.TestEventHandler.handleRead(TestEventHandler.java:154) [framework-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.nio.NioSelector.handleRead(NioSelector.java:420) [elasticsearch-nio-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.nio.NioSelector.processKey(NioSelector.java:246) [elasticsearch-nio-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.nio.NioSelector.singleLoop(NioSelector.java:174) [elasticsearch-nio-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.nio.NioSelector.runLoop(NioSelector.java:131) [elasticsearch-nio-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n  1> \tat java.lang.Thread.run(Thread.java:832) [?:?]\r\n```\r\n\r\nand then the test doesn't really fail on any snapshot operation but simply fails to replicate just restored in indices in time (looking at the hot threads dump, it's still actively recovering when the green assertion fails) => nothing we can do here, this seems to be an infra issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/608028991","html_url":"https://github.com/elastic/elasticsearch/issues/52125#issuecomment-608028991","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52125","id":608028991,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODAyODk5MQ==","user":{"login":"williamrandolph","id":3253644,"node_id":"MDQ6VXNlcjMyNTM2NDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/3253644?v=4","gravatar_id":"","url":"https://api.github.com/users/williamrandolph","html_url":"https://github.com/williamrandolph","followers_url":"https://api.github.com/users/williamrandolph/followers","following_url":"https://api.github.com/users/williamrandolph/following{/other_user}","gists_url":"https://api.github.com/users/williamrandolph/gists{/gist_id}","starred_url":"https://api.github.com/users/williamrandolph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/williamrandolph/subscriptions","organizations_url":"https://api.github.com/users/williamrandolph/orgs","repos_url":"https://api.github.com/users/williamrandolph/repos","events_url":"https://api.github.com/users/williamrandolph/events{/privacy}","received_events_url":"https://api.github.com/users/williamrandolph/received_events","type":"User","site_admin":false},"created_at":"2020-04-02T18:28:08Z","updated_at":"2020-04-02T18:28:08Z","author_association":"CONTRIBUTOR","body":"I don't believe we should reopen this issue, but I want to note for the record that this still seems to be happening: https://gradle-enterprise.elastic.co/s/3mj7lhs3dztds","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/608046645","html_url":"https://github.com/elastic/elasticsearch/issues/52125#issuecomment-608046645","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52125","id":608046645,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODA0NjY0NQ==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2020-04-02T19:02:39Z","updated_at":"2020-04-02T19:02:39Z","author_association":"MEMBER","body":"Annoyingly enough all the failures listed here have `WindowsFS` in common. See https://github.com/elastic/elasticsearch/issues/52000 ... I wonder if snapshotting as an action somehow stresses `WindowsFS` more that much more than other tests that it repeatedly triggers this slowness. I'll look into that if it comes up too often.","performed_via_github_app":null}]