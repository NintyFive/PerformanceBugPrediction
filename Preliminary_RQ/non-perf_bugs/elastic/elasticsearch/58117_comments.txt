[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/644184126","html_url":"https://github.com/elastic/elasticsearch/issues/58117#issuecomment-644184126","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58117","id":644184126,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NDE4NDEyNg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-06-15T14:53:28Z","updated_at":"2020-06-15T14:53:28Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Logging)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/644184140","html_url":"https://github.com/elastic/elasticsearch/issues/58117#issuecomment-644184140","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58117","id":644184140,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NDE4NDE0MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-06-15T14:53:29Z","updated_at":"2020-06-15T14:53:29Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security (:Security/Client)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/644184353","html_url":"https://github.com/elastic/elasticsearch/issues/58117#issuecomment-644184353","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58117","id":644184353,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NDE4NDM1Mw==","user":{"login":"pugnascotia","id":8696382,"node_id":"MDQ6VXNlcjg2OTYzODI=","avatar_url":"https://avatars1.githubusercontent.com/u/8696382?v=4","gravatar_id":"","url":"https://api.github.com/users/pugnascotia","html_url":"https://github.com/pugnascotia","followers_url":"https://api.github.com/users/pugnascotia/followers","following_url":"https://api.github.com/users/pugnascotia/following{/other_user}","gists_url":"https://api.github.com/users/pugnascotia/gists{/gist_id}","starred_url":"https://api.github.com/users/pugnascotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pugnascotia/subscriptions","organizations_url":"https://api.github.com/users/pugnascotia/orgs","repos_url":"https://api.github.com/users/pugnascotia/repos","events_url":"https://api.github.com/users/pugnascotia/events{/privacy}","received_events_url":"https://api.github.com/users/pugnascotia/received_events","type":"User","site_admin":false},"created_at":"2020-06-15T14:53:52Z","updated_at":"2020-06-15T14:53:52Z","author_association":"CONTRIBUTOR","body":"Related: https://github.com/elastic/elasticsearch/issues/46106","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/644493011","html_url":"https://github.com/elastic/elasticsearch/issues/58117#issuecomment-644493011","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58117","id":644493011,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NDQ5MzAxMQ==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2020-06-16T02:29:24Z","updated_at":"2020-06-16T02:29:24Z","author_association":"CONTRIBUTOR","body":"I think this should be entirely possible if it follows the same pattern as Tasks - see https://github.com/elastic/elasticsearch/pull/35667","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/644766140","html_url":"https://github.com/elastic/elasticsearch/issues/58117#issuecomment-644766140","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58117","id":644766140,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NDc2NjE0MA==","user":{"login":"albertzaharovits","id":4568420,"node_id":"MDQ6VXNlcjQ1Njg0MjA=","avatar_url":"https://avatars2.githubusercontent.com/u/4568420?v=4","gravatar_id":"","url":"https://api.github.com/users/albertzaharovits","html_url":"https://github.com/albertzaharovits","followers_url":"https://api.github.com/users/albertzaharovits/followers","following_url":"https://api.github.com/users/albertzaharovits/following{/other_user}","gists_url":"https://api.github.com/users/albertzaharovits/gists{/gist_id}","starred_url":"https://api.github.com/users/albertzaharovits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertzaharovits/subscriptions","organizations_url":"https://api.github.com/users/albertzaharovits/orgs","repos_url":"https://api.github.com/users/albertzaharovits/repos","events_url":"https://api.github.com/users/albertzaharovits/events{/privacy}","received_events_url":"https://api.github.com/users/albertzaharovits/received_events","type":"User","site_admin":false},"created_at":"2020-06-16T13:29:12Z","updated_at":"2020-06-16T13:29:12Z","author_association":"CONTRIBUTOR","body":"Thanks @tvernum for pointing to the tasks example. I understand that you mean using the `OriginSettingClient` with some appropriate origin (probably a new one).\r\n\r\nI failed to point @pugnascotia to this class during our discussion. My recommendation was to using `ClientHelper` which, unlike `OriginSettingClient` sits in `xpack` not in `server`, which made it not viable in this case. At first though I did not realise it is trivial to use \"origins\" outside of `xpack`, but my excuse is that I was thrown off by\r\n> We’re thinking that other parts of the Stack will also write to this data stream, and they’ll do so with the normal ES APIs e.g. no dedicated API\r\n\r\nbecause origins outside of `xpack` won't help in this case.\r\n\r\n@pugnascotia Given the description of the issue, I understand that internal ES indexing is sufficient in this stage?\r\n\r\nFor indexing outside of ES, my thoughts were to discuss making the particular index accessible either:\r\n- to some/all built-in users/roles\r\n- to all authenticated users\r\n- to unauthenticated users\r\n\r\n\r\n ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/645003183","html_url":"https://github.com/elastic/elasticsearch/issues/58117#issuecomment-645003183","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58117","id":645003183,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTAwMzE4Mw==","user":{"login":"pugnascotia","id":8696382,"node_id":"MDQ6VXNlcjg2OTYzODI=","avatar_url":"https://avatars1.githubusercontent.com/u/8696382?v=4","gravatar_id":"","url":"https://api.github.com/users/pugnascotia","html_url":"https://github.com/pugnascotia","followers_url":"https://api.github.com/users/pugnascotia/followers","following_url":"https://api.github.com/users/pugnascotia/following{/other_user}","gists_url":"https://api.github.com/users/pugnascotia/gists{/gist_id}","starred_url":"https://api.github.com/users/pugnascotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pugnascotia/subscriptions","organizations_url":"https://api.github.com/users/pugnascotia/orgs","repos_url":"https://api.github.com/users/pugnascotia/repos","events_url":"https://api.github.com/users/pugnascotia/events{/privacy}","received_events_url":"https://api.github.com/users/pugnascotia/received_events","type":"User","site_admin":false},"created_at":"2020-06-16T20:47:15Z","updated_at":"2020-06-16T20:47:15Z","author_association":"CONTRIBUTOR","body":"Thanks both, `OriginSettingClient` looks perfect. I'll use the existing `deprectation` origin, since that's the subject of my changes.\r\n\r\nRegarding external indexing, the data stream should definitely require an authenticated user. I hadn't considered requiring a particular role, but since the data stream is intended for a particular purpose, that sounds like a good idea. I don't know how indexing monitoring data works, but there are similarities with this work.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/645005901","html_url":"https://github.com/elastic/elasticsearch/issues/58117#issuecomment-645005901","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58117","id":645005901,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTAwNTkwMQ==","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2020-06-16T20:53:12Z","updated_at":"2020-06-16T20:53:12Z","author_association":"MEMBER","body":"Monitoring utilizes a dedicated endpoint. The users need roles that grant permission to the monitoring API and internally the monitoring code uses an internal user for the actual indexing into the monitoring index.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/653037149","html_url":"https://github.com/elastic/elasticsearch/issues/58117#issuecomment-653037149","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58117","id":653037149,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzAzNzE0OQ==","user":{"login":"pugnascotia","id":8696382,"node_id":"MDQ6VXNlcjg2OTYzODI=","avatar_url":"https://avatars1.githubusercontent.com/u/8696382?v=4","gravatar_id":"","url":"https://api.github.com/users/pugnascotia","html_url":"https://github.com/pugnascotia","followers_url":"https://api.github.com/users/pugnascotia/followers","following_url":"https://api.github.com/users/pugnascotia/following{/other_user}","gists_url":"https://api.github.com/users/pugnascotia/gists{/gist_id}","starred_url":"https://api.github.com/users/pugnascotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pugnascotia/subscriptions","organizations_url":"https://api.github.com/users/pugnascotia/orgs","repos_url":"https://api.github.com/users/pugnascotia/repos","events_url":"https://api.github.com/users/pugnascotia/events{/privacy}","received_events_url":"https://api.github.com/users/pugnascotia/received_events","type":"User","site_admin":false},"created_at":"2020-07-02T14:24:53Z","updated_at":"2020-07-02T14:24:53Z","author_association":"CONTRIBUTOR","body":"Closing this issue as `OriginSettingClient` does what I need.","performed_via_github_app":null}]