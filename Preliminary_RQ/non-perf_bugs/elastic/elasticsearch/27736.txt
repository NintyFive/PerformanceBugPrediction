{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/27736","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27736/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27736/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27736/events","html_url":"https://github.com/elastic/elasticsearch/issues/27736","id":280639389,"node_id":"MDU6SXNzdWUyODA2MzkzODk=","number":27736,"title":"Warning on _missing_ query_string usage post-5.0?","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-12-08T22:45:04Z","updated_at":"2018-02-14T13:28:22Z","closed_at":"2017-12-15T14:19:54Z","author_association":"MEMBER","active_lock_reason":null,"body":"Related to https://github.com/elastic/elasticsearch/issues/21226.\r\n\r\nI am wondering if there's anything we can do here to help users with migration where they may have Lucene query string using `_missing_`.  Here is the current behavior:\r\n\r\n1.  Yep, we documented it here that `_missing_` has been removed: https://www.elastic.co/guide/en/elasticsearch/reference/5.5/breaking_50_search_changes.html#_deprecated_queries_removed\r\n\r\n2.  Deprecation logging (eg. in 2.x when preparing for migration to 5.0) fails to detect it.  Note that it does detect missing query (in DSL) form, but if `_missing_` is used with query_string, it does not throw any deprecation logging messages.\r\n\r\n3. On 5.x (eg. 5.6), if users continue to use `_missing_` , eg.\r\n\r\n```\r\n    \"query_string\": {\r\n      \"query\": \"_missing_:asdasdasd\"\r\n    }\r\n```\r\n\r\nElasticsearch will simply return 0 documents as if all documents contain the asdasdasd field with no indication that it is returning 0 documents because query syntax with _missing_ is used (and have been removed from product).\r\n\r\nWe are probably not going to go back and change the deprecation logging feature in 2.x, but perhaps there's something we can do in 5.x+ releases to throw a warning to the log file (or even return an error in the response) when someone is using `_missing_` so it is easier for users to tell what is actually happening when 0 documents is returned?","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}