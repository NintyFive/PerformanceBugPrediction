{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14352","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14352/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14352/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14352/events","html_url":"https://github.com/elastic/elasticsearch/issues/14352","id":114025287,"node_id":"MDU6SXNzdWUxMTQwMjUyODc=","number":14352,"title":"Rename the `allow_primary` param of the _reroute API","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"labels":[{"id":837246479,"node_id":"MDU6TGFiZWw4MzcyNDY0Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Allocation","name":":Distributed/Allocation","color":"0e8a16","default":false,"description":"All issues relating to the decision making around placing a shard (both master logic & on the nodes)"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2015-10-29T10:54:03Z","updated_at":"2018-02-14T14:04:57Z","closed_at":"2016-01-26T10:23:50Z","author_association":"MEMBER","active_lock_reason":null,"body":"The allocate command of the [_reroute API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-reroute.html?q=rero#cluster-reroute) takes an `allow_primary` parameter, which allows to force assign a primary shard. Using this parameter is dangerous as it will always result in data loss and the new shard will be created empty. This is well documented, but I still see people use it in an attempt to recover from a scenario where ES does not assign the primary to a node that _has_ shard data on disk. The hope there is that that will trigger an allocation and the data will be salvaged. Sadly this means the data is deleted and any hope of salvaging it in another way (something _is_ wrong with it) is lost.\n\nI suggest we rename the parameter to something that makes the weight of the decision clearer. I can't come up with a concise name though. Some suggestions I had is 'assign_primary_as_empty`,`force_clean_primary` .\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}