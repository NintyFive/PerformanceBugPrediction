[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/398072984","html_url":"https://github.com/elastic/elasticsearch/issues/31395#issuecomment-398072984","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31395","id":398072984,"node_id":"MDEyOklzc3VlQ29tbWVudDM5ODA3Mjk4NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-06-18T14:27:21Z","updated_at":"2018-06-18T14:27:21Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/398186376","html_url":"https://github.com/elastic/elasticsearch/issues/31395#issuecomment-398186376","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31395","id":398186376,"node_id":"MDEyOklzc3VlQ29tbWVudDM5ODE4NjM3Ng==","user":{"login":"tsullivan","id":908371,"node_id":"MDQ6VXNlcjkwODM3MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/908371?v=4","gravatar_id":"","url":"https://api.github.com/users/tsullivan","html_url":"https://github.com/tsullivan","followers_url":"https://api.github.com/users/tsullivan/followers","following_url":"https://api.github.com/users/tsullivan/following{/other_user}","gists_url":"https://api.github.com/users/tsullivan/gists{/gist_id}","starred_url":"https://api.github.com/users/tsullivan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsullivan/subscriptions","organizations_url":"https://api.github.com/users/tsullivan/orgs","repos_url":"https://api.github.com/users/tsullivan/repos","events_url":"https://api.github.com/users/tsullivan/events{/privacy}","received_events_url":"https://api.github.com/users/tsullivan/received_events","type":"User","site_admin":false},"created_at":"2018-06-18T20:34:07Z","updated_at":"2018-06-18T20:34:07Z","author_association":"CONTRIBUTOR","body":"Given that this is more info that what we're displaying in the Monitoring dashboards, it would be great if we can get this data is in to the monitoring indices for telemetry,  but use it for charting in the Monitoring UI as well.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/398725421","html_url":"https://github.com/elastic/elasticsearch/issues/31395#issuecomment-398725421","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31395","id":398725421,"node_id":"MDEyOklzc3VlQ29tbWVudDM5ODcyNTQyMQ==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2018-06-20T12:05:16Z","updated_at":"2018-06-20T12:05:16Z","author_association":"CONTRIBUTOR","body":"After some investigation, I suggest to add forecast stats to `_xpack/ml/anomaly_detectors/{jobid|_all}/_stats` which could look like this:\r\n\r\n![image](https://user-images.githubusercontent.com/7126422/41657108-8abc0acc-7492-11e8-8e22-972a53317843.png)\r\n\r\n**Note**: This is just an example for the job stats integration, categories of interest are to be decided. From there it is easy to expose it to `_usage` and monitoring.\r\n\r\nAn alternative solution would be forecast own `_stats` endpoint. \r\n\r\n@sophiec20 \r\nCC @elastic/ml-core ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/398734113","html_url":"https://github.com/elastic/elasticsearch/issues/31395#issuecomment-398734113","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31395","id":398734113,"node_id":"MDEyOklzc3VlQ29tbWVudDM5ODczNDExMw==","user":{"login":"sophiec20","id":4185750,"node_id":"MDQ6VXNlcjQxODU3NTA=","avatar_url":"https://avatars2.githubusercontent.com/u/4185750?v=4","gravatar_id":"","url":"https://api.github.com/users/sophiec20","html_url":"https://github.com/sophiec20","followers_url":"https://api.github.com/users/sophiec20/followers","following_url":"https://api.github.com/users/sophiec20/following{/other_user}","gists_url":"https://api.github.com/users/sophiec20/gists{/gist_id}","starred_url":"https://api.github.com/users/sophiec20/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophiec20/subscriptions","organizations_url":"https://api.github.com/users/sophiec20/orgs","repos_url":"https://api.github.com/users/sophiec20/repos","events_url":"https://api.github.com/users/sophiec20/events{/privacy}","received_events_url":"https://api.github.com/users/sophiec20/received_events","type":"User","site_admin":false},"created_at":"2018-06-20T12:39:36Z","updated_at":"2018-06-20T12:39:36Z","author_association":"NONE","body":"Interesting, I like the idea of `forecast_stats`. Team discussion required, for API and UI (as stats are shown in the Job List).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/398753194","html_url":"https://github.com/elastic/elasticsearch/issues/31395#issuecomment-398753194","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31395","id":398753194,"node_id":"MDEyOklzc3VlQ29tbWVudDM5ODc1MzE5NA==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2018-06-20T13:44:01Z","updated_at":"2018-06-20T13:44:01Z","author_association":"CONTRIBUTOR","body":"I checked:\r\n\r\nThe UI (I guess you mean the *Counts* tab) is not affected, it looks like it has a an overlay (CC @peteharverson) over the results from the job stats API. So fortunately there is no immediate action required for the UI. Longer term it would be nice to make use of these new stats, of course.\r\n\r\nThe main question, which API endpoint:\r\n\r\n1. Proposal, reuse: `_xpack/ml/anomaly_detectors/{jobid|_all}/_stats`\r\n\r\n2. New: ` _xpack/ml/forecast_stats/{jobid|_all}`\r\n\r\n3. New:  ` _xpack/ml/forecast/{jobid|_all}/_stats`\r\n\r\n4. New:  `_xpack/ml/anomaly_detectors/{jobid|_all}/_forecast_stats`\r\n\r\nNote: The way forecast is triggered is `_xpack/ml/anomaly_detectors/{jobid|_all}/_forecast`, therefore option 2 and 3 are in my opinion not a good choice, except we want to change triggering as well.\r\n\r\n> Interesting, I like the idea of `forecast_stats`\r\n\r\nWhich of the above choices match that?\r\n\r\nI collect a couple more material and then schedule a team discussion but happily receive some more feedback here, maybe there are more options than the above?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/399989779","html_url":"https://github.com/elastic/elasticsearch/issues/31395#issuecomment-399989779","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31395","id":399989779,"node_id":"MDEyOklzc3VlQ29tbWVudDM5OTk4OTc3OQ==","user":{"login":"stevedodson","id":7405463,"node_id":"MDQ6VXNlcjc0MDU0NjM=","avatar_url":"https://avatars0.githubusercontent.com/u/7405463?v=4","gravatar_id":"","url":"https://api.github.com/users/stevedodson","html_url":"https://github.com/stevedodson","followers_url":"https://api.github.com/users/stevedodson/followers","following_url":"https://api.github.com/users/stevedodson/following{/other_user}","gists_url":"https://api.github.com/users/stevedodson/gists{/gist_id}","starred_url":"https://api.github.com/users/stevedodson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevedodson/subscriptions","organizations_url":"https://api.github.com/users/stevedodson/orgs","repos_url":"https://api.github.com/users/stevedodson/repos","events_url":"https://api.github.com/users/stevedodson/events{/privacy}","received_events_url":"https://api.github.com/users/stevedodson/received_events","type":"User","site_admin":false},"created_at":"2018-06-25T15:20:03Z","updated_at":"2018-06-25T15:20:03Z","author_association":"NONE","body":"> 1. Proposal, reuse: _xpack/ml/anomaly_detectors/{jobid|_all}/_stats\r\n\r\n+1 for reusing the endpoint","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/399994787","html_url":"https://github.com/elastic/elasticsearch/issues/31395#issuecomment-399994787","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31395","id":399994787,"node_id":"MDEyOklzc3VlQ29tbWVudDM5OTk5NDc4Nw==","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"created_at":"2018-06-25T15:33:30Z","updated_at":"2018-06-25T15:33:30Z","author_association":"MEMBER","body":"Can we add units to the forecast memory stats (min, max, avg, sum) I presume they are bytes ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/400001594","html_url":"https://github.com/elastic/elasticsearch/issues/31395#issuecomment-400001594","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31395","id":400001594,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMDAwMTU5NA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2018-06-25T15:53:01Z","updated_at":"2018-06-25T15:53:01Z","author_association":"CONTRIBUTOR","body":"> Can we add units to the forecast memory stats (min, max, avg, sum) I presume they are bytes\r\n\r\nThere are two ways that suggestion can be interpreted: add units to the names or add units to the values.  For consistency with `model_size_stats` and `data_counts` I think `_bytes` should be added to the field names rather than units added to the field values.  If we were starting from scratch I think it would be better to add units to the field values, but doing that in this case would create an inconsistency with other fields returned by the same endpoint.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402378110","html_url":"https://github.com/elastic/elasticsearch/issues/31395#issuecomment-402378110","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31395","id":402378110,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjM3ODExMA==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2018-07-04T06:35:23Z","updated_at":"2018-07-04T06:35:23Z","author_association":"CONTRIBUTOR","body":"@tsullivan Regarding your request:\r\n\r\n> Given that this is more info that what we're displaying in the Monitoring dashboards, it would be great if we can get this data is in to the monitoring indices for telemetry, but use it for charting in the Monitoring UI as well.\r\n\r\nAs far as I can see it, the change in #31647 automatically adds the new telemetry data into monitoring as well, because monitoring indexes the jobstats object as is. Querying the `.monitoring-es...` indexes contains the added data points. So this part is fine.\r\n\r\nFor follow up, I suggest a new issue. I think there are several follow up items. Short term (probably easy to implement) would be to add the number of forecasts to the already existing Jobs table. Long term I would like to see charts, but 1st for jobs, 2nd for forecasts. ","performed_via_github_app":null}]