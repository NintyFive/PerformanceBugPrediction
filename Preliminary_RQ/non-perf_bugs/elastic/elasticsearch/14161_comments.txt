[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148736883","html_url":"https://github.com/elastic/elasticsearch/issues/14161#issuecomment-148736883","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14161","id":148736883,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODczNjg4Mw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T14:47:39Z","updated_at":"2015-10-16T14:47:39Z","author_association":"MEMBER","body":"Please ask user questions on discuss.elastic.co. We can better help you there.\nMay be you did not reindex your data after applying your mapping changes?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148750611","html_url":"https://github.com/elastic/elasticsearch/issues/14161#issuecomment-148750611","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14161","id":148750611,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODc1MDYxMQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T15:43:52Z","updated_at":"2015-10-16T15:43:52Z","author_association":"CONTRIBUTOR","body":"@cwithers The type name in your mappings is `incident`, the type name in your docs is `fruit`, so you don't have any `.raw` fields for your data\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148754623","html_url":"https://github.com/elastic/elasticsearch/issues/14161#issuecomment-148754623","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14161","id":148754623,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODc1NDYyMw==","user":{"login":"cwithers","id":15158908,"node_id":"MDQ6VXNlcjE1MTU4OTA4","avatar_url":"https://avatars3.githubusercontent.com/u/15158908?v=4","gravatar_id":"","url":"https://api.github.com/users/cwithers","html_url":"https://github.com/cwithers","followers_url":"https://api.github.com/users/cwithers/followers","following_url":"https://api.github.com/users/cwithers/following{/other_user}","gists_url":"https://api.github.com/users/cwithers/gists{/gist_id}","starred_url":"https://api.github.com/users/cwithers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cwithers/subscriptions","organizations_url":"https://api.github.com/users/cwithers/orgs","repos_url":"https://api.github.com/users/cwithers/repos","events_url":"https://api.github.com/users/cwithers/events{/privacy}","received_events_url":"https://api.github.com/users/cwithers/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T15:59:00Z","updated_at":"2015-10-16T15:59:00Z","author_association":"NONE","body":"re: dadoonet, I definitely created the index before populating it so that's not it, unfortunately.\n\nre: clintongormley, I've tried to change the example here to something non customer data specific and missed one of the uses of \"incident\".\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148755537","html_url":"https://github.com/elastic/elasticsearch/issues/14161#issuecomment-148755537","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14161","id":148755537,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODc1NTUzNw==","user":{"login":"cwithers","id":15158908,"node_id":"MDQ6VXNlcjE1MTU4OTA4","avatar_url":"https://avatars3.githubusercontent.com/u/15158908?v=4","gravatar_id":"","url":"https://api.github.com/users/cwithers","html_url":"https://github.com/cwithers","followers_url":"https://api.github.com/users/cwithers/followers","following_url":"https://api.github.com/users/cwithers/following{/other_user}","gists_url":"https://api.github.com/users/cwithers/gists{/gist_id}","starred_url":"https://api.github.com/users/cwithers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cwithers/subscriptions","organizations_url":"https://api.github.com/users/cwithers/orgs","repos_url":"https://api.github.com/users/cwithers/repos","events_url":"https://api.github.com/users/cwithers/events{/privacy}","received_events_url":"https://api.github.com/users/cwithers/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T16:03:04Z","updated_at":"2015-10-16T16:03:04Z","author_association":"NONE","body":"Can this be re-opened? it is a real issue that I can reproduce on a clean 1.7.2 Elasticsearch install.\n\nIt looks like having a field name (fruit) that matches the name of the type (fruit) can confuse Elasticsearch in certain cases.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148755691","html_url":"https://github.com/elastic/elasticsearch/issues/14161#issuecomment-148755691","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14161","id":148755691,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODc1NTY5MQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T16:03:54Z","updated_at":"2015-10-16T16:03:54Z","author_association":"MEMBER","body":"Can you share your full script which helps to reproduce it?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148756488","html_url":"https://github.com/elastic/elasticsearch/issues/14161#issuecomment-148756488","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14161","id":148756488,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODc1NjQ4OA==","user":{"login":"cwithers","id":15158908,"node_id":"MDQ6VXNlcjE1MTU4OTA4","avatar_url":"https://avatars3.githubusercontent.com/u/15158908?v=4","gravatar_id":"","url":"https://api.github.com/users/cwithers","html_url":"https://github.com/cwithers","followers_url":"https://api.github.com/users/cwithers/followers","following_url":"https://api.github.com/users/cwithers/following{/other_user}","gists_url":"https://api.github.com/users/cwithers/gists{/gist_id}","starred_url":"https://api.github.com/users/cwithers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cwithers/subscriptions","organizations_url":"https://api.github.com/users/cwithers/orgs","repos_url":"https://api.github.com/users/cwithers/repos","events_url":"https://api.github.com/users/cwithers/events{/privacy}","received_events_url":"https://api.github.com/users/cwithers/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T16:07:49Z","updated_at":"2015-10-16T16:07:49Z","author_association":"NONE","body":"I create the mapping using curl, then load the data using curl, then make the request using curl:\n\ncurl -XPOST http://elasticsearch:9200/fruit -d @C:\\src\\Curl\\fruit-type.json\ncurl -XPOST http://elasticsearch:9200/fruit/_bulk --data-binary @C:\\src\\Curl\\fruit-data.json\ncurl -XPOST http://elasticsearch:9200/fruit/_search?pretty -d @C:\\src\\Curl\\ESsearchRequest.json > C:\\src\\Curl\\ESsearchResponse.json\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148756897","html_url":"https://github.com/elastic/elasticsearch/issues/14161#issuecomment-148756897","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14161","id":148756897,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODc1Njg5Nw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T16:09:38Z","updated_at":"2015-10-16T16:09:38Z","author_association":"MEMBER","body":"As Clint said, your example is incorrect. Can you send a full correct script that you run on your end and which reproduces the issue?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148764315","html_url":"https://github.com/elastic/elasticsearch/issues/14161#issuecomment-148764315","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14161","id":148764315,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODc2NDMxNQ==","user":{"login":"cwithers","id":15158908,"node_id":"MDQ6VXNlcjE1MTU4OTA4","avatar_url":"https://avatars3.githubusercontent.com/u/15158908?v=4","gravatar_id":"","url":"https://api.github.com/users/cwithers","html_url":"https://github.com/cwithers","followers_url":"https://api.github.com/users/cwithers/followers","following_url":"https://api.github.com/users/cwithers/following{/other_user}","gists_url":"https://api.github.com/users/cwithers/gists{/gist_id}","starred_url":"https://api.github.com/users/cwithers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cwithers/subscriptions","organizations_url":"https://api.github.com/users/cwithers/orgs","repos_url":"https://api.github.com/users/cwithers/repos","events_url":"https://api.github.com/users/cwithers/events{/privacy}","received_events_url":"https://api.github.com/users/cwithers/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T16:41:27Z","updated_at":"2015-10-16T16:41:27Z","author_association":"NONE","body":"The full script is embedded in a lot of Java code, which uses the Elasticsearch REST API to create templates, containg document type metadata and properties, and from the templates timestamped indices. The code also uses the REST API to bulk index the data and to perform searches with lots of aggregations.\n\nI can successfully reproduce the strange behaviour with the above curl command to perform the search with only two aggregations directly against Elasticsearch.\n\nThe above mapping was exported using Elasticsearch's REST API, I only removed the metadata, additional field definitions and renamed \"incident\" with \"fruit\".\n\nI originally found the issue with Elasticsearch 1.5.1 and to be sure it wasn't already fixed in 1.7.2, I installed 1.7.2 and pointed my Java code at it. Unfortunately, I got the same strange behaviour with one of the terms aggregations.\n\nI didn't know about the discussion forum so thanks for pointing that out.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148764626","html_url":"https://github.com/elastic/elasticsearch/issues/14161#issuecomment-148764626","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14161","id":148764626,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODc2NDYyNg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T16:42:58Z","updated_at":"2015-10-16T16:42:58Z","author_association":"CONTRIBUTOR","body":"> It looks like having a field name (fruit) that matches the name of the type (fruit) can confuse Elasticsearch in certain cases.\n\nYes it can.  This is a known issue which is fixed in 2.0\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148764999","html_url":"https://github.com/elastic/elasticsearch/issues/14161#issuecomment-148764999","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14161","id":148764999,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODc2NDk5OQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T16:44:41Z","updated_at":"2015-10-16T16:44:41Z","author_association":"CONTRIBUTOR","body":"See https://github.com/elastic/elasticsearch/issues/8870\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148771433","html_url":"https://github.com/elastic/elasticsearch/issues/14161#issuecomment-148771433","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14161","id":148771433,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODc3MTQzMw==","user":{"login":"cwithers","id":15158908,"node_id":"MDQ6VXNlcjE1MTU4OTA4","avatar_url":"https://avatars3.githubusercontent.com/u/15158908?v=4","gravatar_id":"","url":"https://api.github.com/users/cwithers","html_url":"https://github.com/cwithers","followers_url":"https://api.github.com/users/cwithers/followers","following_url":"https://api.github.com/users/cwithers/following{/other_user}","gists_url":"https://api.github.com/users/cwithers/gists{/gist_id}","starred_url":"https://api.github.com/users/cwithers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cwithers/subscriptions","organizations_url":"https://api.github.com/users/cwithers/orgs","repos_url":"https://api.github.com/users/cwithers/repos","events_url":"https://api.github.com/users/cwithers/events{/privacy}","received_events_url":"https://api.github.com/users/cwithers/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T16:59:44Z","updated_at":"2015-10-16T16:59:44Z","author_association":"NONE","body":"I was aware of that 2.0 change after it being mentioned at Elastic{on} but didn't realise the issue could manifest in this way when there is only one type in an index.\n\nThanks for all your help 😊\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148772646","html_url":"https://github.com/elastic/elasticsearch/issues/14161#issuecomment-148772646","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14161","id":148772646,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODc3MjY0Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T17:02:23Z","updated_at":"2015-10-16T17:02:23Z","author_association":"CONTRIBUTOR","body":"np :)\n","performed_via_github_app":null}]