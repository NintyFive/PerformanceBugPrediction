[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/263974166","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-263974166","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":263974166,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzk3NDE2Ng==","user":{"login":"eht16","id":617017,"node_id":"MDQ6VXNlcjYxNzAxNw==","avatar_url":"https://avatars3.githubusercontent.com/u/617017?v=4","gravatar_id":"","url":"https://api.github.com/users/eht16","html_url":"https://github.com/eht16","followers_url":"https://api.github.com/users/eht16/followers","following_url":"https://api.github.com/users/eht16/following{/other_user}","gists_url":"https://api.github.com/users/eht16/gists{/gist_id}","starred_url":"https://api.github.com/users/eht16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eht16/subscriptions","organizations_url":"https://api.github.com/users/eht16/orgs","repos_url":"https://api.github.com/users/eht16/repos","events_url":"https://api.github.com/users/eht16/events{/privacy}","received_events_url":"https://api.github.com/users/eht16/received_events","type":"User","site_admin":false},"created_at":"2016-11-30T19:44:05Z","updated_at":"2016-11-30T19:44:05Z","author_association":"NONE","body":"A normal package upgrade in a LXC container is broken as well:\r\n```\r\nSetting up elasticsearch (5.0.2) ...\r\nCouldn't write '262144' to 'vm/max_map_count', ignoring: Read-only file system\r\ndpkg: error processing package elasticsearch (--configure):\r\n subprocess installed post-installation script returned error exit status 1\r\nErrors were encountered while processing:\r\n elasticsearch\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264014726","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-264014726","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":264014726,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDAxNDcyNg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-11-30T22:19:47Z","updated_at":"2016-11-30T22:19:47Z","author_association":"MEMBER","body":"@neoecos @eht16 I opened #21899; please let me know if this would suit your needs.\r\n\r\nAlso, please note the official Elasticsearch Docker image (the one built and supported by Elastic, not the one in Docker Hub that claims to be official but is not affiliated with nor supported by Elastic) does not have this problem. If you're interested, we have some [docs](https://www.elastic.co/guide/en/elasticsearch/reference/5.0/docker.html) and a [GitHub repository](https://github.com/elastic/elasticsearch-docker).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264022060","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-264022060","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":264022060,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDAyMjA2MA==","user":{"login":"eht16","id":617017,"node_id":"MDQ6VXNlcjYxNzAxNw==","avatar_url":"https://avatars3.githubusercontent.com/u/617017?v=4","gravatar_id":"","url":"https://api.github.com/users/eht16","html_url":"https://github.com/eht16","followers_url":"https://api.github.com/users/eht16/followers","following_url":"https://api.github.com/users/eht16/following{/other_user}","gists_url":"https://api.github.com/users/eht16/gists{/gist_id}","starred_url":"https://api.github.com/users/eht16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eht16/subscriptions","organizations_url":"https://api.github.com/users/eht16/orgs","repos_url":"https://api.github.com/users/eht16/repos","events_url":"https://api.github.com/users/eht16/events{/privacy}","received_events_url":"https://api.github.com/users/eht16/received_events","type":"User","site_admin":false},"created_at":"2016-11-30T22:50:43Z","updated_at":"2016-11-30T22:50:43Z","author_association":"NONE","body":"@jasontedor thanks. Setting SKIP_SET_KERNEL_PARAMETERS would fit for me.\r\nEven more convenient would be: /usr/lib/systemd/systemd-sysctl || true\r\nThen setting the value would fail, the error message is shown but the installation will continue.\r\nMaybe an additional hint would be useful in the case `systemd-sysctl` failed to explain to the user that the shown error message is harmless (as long as the user is aware to set `vm.max_map_count` herself on the host).\r\n\r\nBut I'm not really sure what is the better solution, just thinking.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264032359","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-264032359","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":264032359,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDAzMjM1OQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-11-30T23:40:20Z","updated_at":"2016-11-30T23:40:20Z","author_association":"MEMBER","body":"Thanks for the feedback @eht16. I considered that approach, and my concern with it is a lot of users do not read console messages when nothing goes wrong (so if the install does not exit with an error status, such users will just not see that setting the kernel parameters did not take). The upside to that approach is that it is less likely to get in the way of the end-user.\r\n\r\nThat said, I'm glad to know that we have two viable approaches that would be acceptable to at least one of you and @neoecos. I will solicit feedback from others (e.g., @clintongormley) but either way we will get a fix in for you very soon.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264037277","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-264037277","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":264037277,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDAzNzI3Nw==","user":{"login":"neoecos","id":1490677,"node_id":"MDQ6VXNlcjE0OTA2Nzc=","avatar_url":"https://avatars0.githubusercontent.com/u/1490677?v=4","gravatar_id":"","url":"https://api.github.com/users/neoecos","html_url":"https://github.com/neoecos","followers_url":"https://api.github.com/users/neoecos/followers","following_url":"https://api.github.com/users/neoecos/following{/other_user}","gists_url":"https://api.github.com/users/neoecos/gists{/gist_id}","starred_url":"https://api.github.com/users/neoecos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neoecos/subscriptions","organizations_url":"https://api.github.com/users/neoecos/orgs","repos_url":"https://api.github.com/users/neoecos/repos","events_url":"https://api.github.com/users/neoecos/events{/privacy}","received_events_url":"https://api.github.com/users/neoecos/received_events","type":"User","site_admin":false},"created_at":"2016-12-01T00:05:56Z","updated_at":"2016-12-01T00:05:56Z","author_association":"NONE","body":"@jasontedor The setting solves the issue, thank you.\r\n\r\nThe difference between the two builds, is that the dockerhub image is build using the official debian package, meanwhile the elasticsearch image just downloads the binary .tar.gz.\r\n\r\nFor me, using a deb package is definitely more elegant way to do that.\r\n\r\n> RUN wget ${ES_DOWNLOAD_URL}/elasticsearch-${ELASTIC_VERSION}.tar.gz && \\\r\n>     EXPECTED_SHA=$(wget -O - ${ES_DOWNLOAD_URL}/elasticsearch-${ELASTIC_VERSION}.tar.gz.sha1) && \\\r\n>     test $EXPECTED_SHA == $(sha1sum elasticsearch-${ELASTIC_VERSION}.tar.gz | awk '{print $1}') && \\\r\n>     tar zxf elasticsearch-${ELASTIC_VERSION}.tar.gz && \\\r\n>     chown -R elasticsearch:elasticsearch elasticsearch-${ELASTIC_VERSION} && \\\r\n>     mv elasticsearch-${ELASTIC_VERSION}/* . && \\\r\n>     rmdir elasticsearch-${ELASTIC_VERSION} && \\\r\n>     rm elasticsearch-${ELASTIC_VERSION}.tar.gz","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264054268","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-264054268","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":264054268,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDA1NDI2OA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-12-01T01:46:07Z","updated_at":"2016-12-01T01:52:38Z","author_association":"MEMBER","body":"> The difference between the two builds, is that the dockerhub image is build using the official debian package, meanwhile the elasticsearch image just downloads the binary .tar.gz.\r\n\r\nYes, I'm aware of what accounts for the difference. The points that I'm alluding to and making are the following:\r\n - the official Elastic images will work when new releases are made, rather than having to adjust to upstream changes such as the one that led to the problem here for downstream maintainers\r\n - the official Elastic images are supported by Elastic, the downstream images are not","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270732840","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-270732840","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":270732840,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDczMjg0MA==","user":{"login":"C0rn3j","id":1641362,"node_id":"MDQ6VXNlcjE2NDEzNjI=","avatar_url":"https://avatars2.githubusercontent.com/u/1641362?v=4","gravatar_id":"","url":"https://api.github.com/users/C0rn3j","html_url":"https://github.com/C0rn3j","followers_url":"https://api.github.com/users/C0rn3j/followers","following_url":"https://api.github.com/users/C0rn3j/following{/other_user}","gists_url":"https://api.github.com/users/C0rn3j/gists{/gist_id}","starred_url":"https://api.github.com/users/C0rn3j/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/C0rn3j/subscriptions","organizations_url":"https://api.github.com/users/C0rn3j/orgs","repos_url":"https://api.github.com/users/C0rn3j/repos","events_url":"https://api.github.com/users/C0rn3j/events{/privacy}","received_events_url":"https://api.github.com/users/C0rn3j/received_events","type":"User","site_admin":false},"created_at":"2017-01-05T19:21:55Z","updated_at":"2017-01-05T19:21:55Z","author_association":"NONE","body":"For those stumbling upon this and being confused like me- the setting merged ended up being ES_SKIP_SET_KERNEL_PARAMETERS, so set that to true if you want to ignore setting kernel parameters.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270818333","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-270818333","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":270818333,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDgxODMzMw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-01-06T02:47:55Z","updated_at":"2017-01-06T02:47:55Z","author_association":"MEMBER","body":"@C0rn3j Thanks. This is also documented on the [deb](https://www.elastic.co/guide/en/elasticsearch/reference/current/deb.html#deb-repo) and [RPM](https://www.elastic.co/guide/en/elasticsearch/reference/current/rpm.html#install-rpm) installation pages.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/271315246","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-271315246","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":271315246,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTMxNTI0Ng==","user":{"login":"babilen5","id":117961,"node_id":"MDQ6VXNlcjExNzk2MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/117961?v=4","gravatar_id":"","url":"https://api.github.com/users/babilen5","html_url":"https://github.com/babilen5","followers_url":"https://api.github.com/users/babilen5/followers","following_url":"https://api.github.com/users/babilen5/following{/other_user}","gists_url":"https://api.github.com/users/babilen5/gists{/gist_id}","starred_url":"https://api.github.com/users/babilen5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/babilen5/subscriptions","organizations_url":"https://api.github.com/users/babilen5/orgs","repos_url":"https://api.github.com/users/babilen5/repos","events_url":"https://api.github.com/users/babilen5/events{/privacy}","received_events_url":"https://api.github.com/users/babilen5/received_events","type":"User","site_admin":false},"created_at":"2017-01-09T15:36:06Z","updated_at":"2017-01-09T15:36:06Z","author_association":"NONE","body":"@jasontedor I do not quite understand why the issue was fixed in such a way that sysctl is called at all even if `/proc` isn't writable. It looks as if this is a common issue (cf. https://github.com/elastic/elasticsearch/pull/8793) and should be easy to fix. For now it is rather cumbersome to use ES in containers. Requiring every user to ensure that `ES_SKIP_SET_KERNEL_PARAMETERS` is set in the environment is quite suboptimal and might not be easy to achieve if the containers are provisioned automatically.\r\n\r\nI would recommend to not call sysctl if `/proc` isn't writable. One might want to document that users can, for example, run their docker containers in privileged mode.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/271331523","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-271331523","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":271331523,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTMzMTUyMw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-01-09T16:27:22Z","updated_at":"2017-01-09T16:27:22Z","author_association":"MEMBER","body":"> I do not quite understand why the issue was fixed in such a way that sysctl is called at all even if `/proc` isn't writable.\r\n\r\nWe abhor silent failures. Either it succeeds, or it fails and you know about it and you take steps to correct it.\r\n\r\n> Requiring every user to ensure that `ES_SKIP_SET_KERNEL_PARAMETERS` is set in the environment is quite suboptimal and might not be easy to achieve if the containers are provisioned automatically.\r\n\r\nI don't understand this, just bake it into the provisioning.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/271336337","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-271336337","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":271336337,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTMzNjMzNw==","user":{"login":"babilen5","id":117961,"node_id":"MDQ6VXNlcjExNzk2MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/117961?v=4","gravatar_id":"","url":"https://api.github.com/users/babilen5","html_url":"https://github.com/babilen5","followers_url":"https://api.github.com/users/babilen5/followers","following_url":"https://api.github.com/users/babilen5/following{/other_user}","gists_url":"https://api.github.com/users/babilen5/gists{/gist_id}","starred_url":"https://api.github.com/users/babilen5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/babilen5/subscriptions","organizations_url":"https://api.github.com/users/babilen5/orgs","repos_url":"https://api.github.com/users/babilen5/repos","events_url":"https://api.github.com/users/babilen5/events{/privacy}","received_events_url":"https://api.github.com/users/babilen5/received_events","type":"User","site_admin":false},"created_at":"2017-01-09T16:44:15Z","updated_at":"2017-01-09T16:47:55Z","author_association":"NONE","body":"> We abhor silent failures. Either it succeeds, or it fails and you know about it and you take steps to correct it.\r\n\r\nSure, but the service start should (and would) fail rather than the package installation itself.\r\n\r\n> I don't understand this, just bake it into the provisioning.\r\n\r\nNot all provisioning tools allow you to easily define environment variables for package installations and it would be better to rely on the debconf database for `ES_SKIP_SET_KERNEL_PARAMETERS` if you really have to do this.\r\n\r\nUsing debconf would be in line with Debian policy [0] and is easy to preseed in every provisioning system that I'm familiar with.\r\n\r\n[0] https://www.debian.org/doc/debian-policy/ch-binary.html#s-maintscriptprompt","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/271677060","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-271677060","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":271677060,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTY3NzA2MA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-01-10T19:43:15Z","updated_at":"2017-01-10T19:43:15Z","author_association":"MEMBER","body":"> Sure, but the service start should (and would) fail rather than the package installation itself.\r\n\r\nWe also abhor late failures.\r\n\r\n> Not all provisioning tools allow you to easily define environment variables for package installations\r\n\r\nSuch as?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/271822112","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-271822112","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":271822112,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTgyMjExMg==","user":{"login":"babilen5","id":117961,"node_id":"MDQ6VXNlcjExNzk2MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/117961?v=4","gravatar_id":"","url":"https://api.github.com/users/babilen5","html_url":"https://github.com/babilen5","followers_url":"https://api.github.com/users/babilen5/followers","following_url":"https://api.github.com/users/babilen5/following{/other_user}","gists_url":"https://api.github.com/users/babilen5/gists{/gist_id}","starred_url":"https://api.github.com/users/babilen5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/babilen5/subscriptions","organizations_url":"https://api.github.com/users/babilen5/orgs","repos_url":"https://api.github.com/users/babilen5/repos","events_url":"https://api.github.com/users/babilen5/events{/privacy}","received_events_url":"https://api.github.com/users/babilen5/received_events","type":"User","site_admin":false},"created_at":"2017-01-11T09:38:17Z","updated_at":"2017-01-11T10:11:43Z","author_association":"NONE","body":">> Sure, but the service start should (and would) fail rather than the package installation itself.\r\n\r\n> We also abhor late failures.\r\n\r\nFailing during the postinst phase of a package installation is, to put it mildly, a rather unfortunate thing to do.  I totally understand your motivation of making the ES installation as easy for people as possible, but I would recommend to solve these issues in a standard manner as it allows for these packages to integrate well with the rest of the ecosystem.\r\n\r\nI mentioned the standard solution that is being advocated/mandated in the Debian policy in cases like this, namely debconf and would still recommend to adopt it.\r\n\r\n>> Not all provisioning tools allow you to easily define environment variables for package installations\r\n\r\n> Such as?\r\n\r\nI was thinking of Saltstack here (despite `environ.setenv`), but does it really matter? Having to define an environment variable before a package installation is a rather unusual thing to do and should, in my humble opinion, be avoided in favour of more standard approaches.\r\n\r\nI'd also like to mention https://github.com/elastic/elasticsearch/pull/8793 again which seems to have eluded your attention.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/272269780","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-272269780","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":272269780,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjI2OTc4MA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-01-12T20:10:17Z","updated_at":"2017-01-12T20:10:17Z","author_association":"MEMBER","body":"> I was thinking of Saltstack here (despite `environ.setenv`), but does it really matter?\r\n\r\nIt absolutely matters. You are trying to convince us to take another point of view, and in support of that you put out a statement:\r\n\r\n> Not all provisioning tools allow you to easily define environment variables for package installations\r\n\r\nI'm asking for additional context. If, for example, the tool that you had in mind was an obscure tool then I would be less likely to consider your argument as we do not design for special cases.\r\n\r\n> I'd also like to mention https://github.com/elastic/elasticsearch/pull/8793 again which seems to have eluded your attention.\r\n\r\nIt did not elude my attention. I've already read it and considered it. It's a two-year old pull request. The philosophy of the maintainers of this project has evolved considerably in that period (for example, to become less lenient).\r\n\r\n> Having to define an environment variable before a package installation is a rather unusual thing to do and should, in my humble opinion, be avoided in favour of more standard approaches.\r\n\r\nMaybe it is unusual (although it is done, cf. `SUDO_FORCE_REMOVE` on sudo-ldap), but it sure is easy to understand and it's consistent with what we already do.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/272418582","html_url":"https://github.com/elastic/elasticsearch/issues/21877#issuecomment-272418582","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21877","id":272418582,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjQxODU4Mg==","user":{"login":"babilen5","id":117961,"node_id":"MDQ6VXNlcjExNzk2MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/117961?v=4","gravatar_id":"","url":"https://api.github.com/users/babilen5","html_url":"https://github.com/babilen5","followers_url":"https://api.github.com/users/babilen5/followers","following_url":"https://api.github.com/users/babilen5/following{/other_user}","gists_url":"https://api.github.com/users/babilen5/gists{/gist_id}","starred_url":"https://api.github.com/users/babilen5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/babilen5/subscriptions","organizations_url":"https://api.github.com/users/babilen5/orgs","repos_url":"https://api.github.com/users/babilen5/repos","events_url":"https://api.github.com/users/babilen5/events{/privacy}","received_events_url":"https://api.github.com/users/babilen5/received_events","type":"User","site_admin":false},"created_at":"2017-01-13T11:07:24Z","updated_at":"2017-01-13T11:07:24Z","author_association":"NONE","body":">> Having to define an environment variable before a package installation is a rather unusual thing to do and should, in my humble opinion, be avoided in favour of more standard approaches.\r\n\r\n> Maybe it is unusual (although it is done, cf. SUDO_FORCE_REMOVE on sudo-ldap), but it sure is easy to understand and it's consistent with what we already do.\r\n\r\nWhat exactly is consistent with what you already do? I don't quite understand what the problem is with adopting debconf for this. It would be in line with Debian policy, user expectations and it is well supported in all provisioning systems I have worked with.","performed_via_github_app":null}]