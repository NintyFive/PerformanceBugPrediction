[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64050221","html_url":"https://github.com/elastic/elasticsearch/issues/8578#issuecomment-64050221","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8578","id":64050221,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MDUwMjIx","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-11-21T22:46:58Z","updated_at":"2014-11-21T22:46:58Z","author_association":"CONTRIBUTOR","body":"the problem seems to be your mapping not the index settings can we see your mapping?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64053604","html_url":"https://github.com/elastic/elasticsearch/issues/8578#issuecomment-64053604","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8578","id":64053604,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MDUzNjA0","user":{"login":"samatha-kankipati","id":3371949,"node_id":"MDQ6VXNlcjMzNzE5NDk=","avatar_url":"https://avatars2.githubusercontent.com/u/3371949?v=4","gravatar_id":"","url":"https://api.github.com/users/samatha-kankipati","html_url":"https://github.com/samatha-kankipati","followers_url":"https://api.github.com/users/samatha-kankipati/followers","following_url":"https://api.github.com/users/samatha-kankipati/following{/other_user}","gists_url":"https://api.github.com/users/samatha-kankipati/gists{/gist_id}","starred_url":"https://api.github.com/users/samatha-kankipati/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samatha-kankipati/subscriptions","organizations_url":"https://api.github.com/users/samatha-kankipati/orgs","repos_url":"https://api.github.com/users/samatha-kankipati/repos","events_url":"https://api.github.com/users/samatha-kankipati/events{/privacy}","received_events_url":"https://api.github.com/users/samatha-kankipati/received_events","type":"User","site_admin":false},"created_at":"2014-11-21T23:20:19Z","updated_at":"2014-11-21T23:20:19Z","author_association":"NONE","body":"Here is my mapping\n{\n    \"syncRequestDoc\":{\n        \"_source\":{\n            \"enabled\":true\n        },\n        \"properties\":{\n            \"id\":{\n                \"type\":\"string\"\n            },\n            \"documentType\":{\n                \"type\":\"string\",\n                \"analyzer\":\"keyword_lowercase\"\n            },\n            \"documentIds\":{\n                \"type\":\"string\"\n            },\n            \"status\":{\n                \"type\":\"string\",\n                \"analyzer\":\"keyword_lowercase\"\n            },\n            \"documentLastUpdatedAt\":{\n                \"type\":\"date\",\n                \"format\":\"date_time\"\n            },\n            \"createdAt\": {\n                \"type\":\"date\",\n                \"format\":\"date_time\"\n            },\n            \"lastRunAt\": {\n                \"type\":\"date\",\n                \"format\":\"date_time\"\n            },\n            \"lastRunDetails\": {\n                \"type\": \"string\"\n            }\n        }\n    }\n}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64053838","html_url":"https://github.com/elastic/elasticsearch/issues/8578#issuecomment-64053838","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8578","id":64053838,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MDUzODM4","user":{"login":"samatha-kankipati","id":3371949,"node_id":"MDQ6VXNlcjMzNzE5NDk=","avatar_url":"https://avatars2.githubusercontent.com/u/3371949?v=4","gravatar_id":"","url":"https://api.github.com/users/samatha-kankipati","html_url":"https://github.com/samatha-kankipati","followers_url":"https://api.github.com/users/samatha-kankipati/followers","following_url":"https://api.github.com/users/samatha-kankipati/following{/other_user}","gists_url":"https://api.github.com/users/samatha-kankipati/gists{/gist_id}","starred_url":"https://api.github.com/users/samatha-kankipati/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samatha-kankipati/subscriptions","organizations_url":"https://api.github.com/users/samatha-kankipati/orgs","repos_url":"https://api.github.com/users/samatha-kankipati/repos","events_url":"https://api.github.com/users/samatha-kankipati/events{/privacy}","received_events_url":"https://api.github.com/users/samatha-kankipati/received_events","type":"User","site_admin":false},"created_at":"2014-11-21T23:22:50Z","updated_at":"2014-11-21T23:22:50Z","author_association":"NONE","body":"Here is the exception\n\norg.elasticsearch.index.mapper.MapperParsingException: mapping [index]\n    at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$2.execute(MetaDataCreateIndexService.java:405)\n    at org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:329)\n    at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:153)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: \norg.elasticsearch.index.mapper.MapperParsingException: Root type mapping not empty after parsing! Remaining fields:   [analysis : {analyzer={keyword_lowercase={filter=lowercase, type=custom, tokenizer=keyword}}}]\n    at org.elasticsearch.index.mapper.DocumentMapperParser.parse(DocumentMapperParser.java:276)\n    at org.elasticsearch.index.mapper.DocumentMapperParser.parseCompressed(DocumentMapperParser.java:190)\n    at org.elasticsearch.index.mapper.MapperService.parse(MapperService.java:444)\n    at org.elasticsearch.index.mapper.MapperService.merge(MapperService.java:317)\n    at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$2.execute(MetaDataCreateIndexService.java:402)\n    at org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:329)\n    at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:153)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64085179","html_url":"https://github.com/elastic/elasticsearch/issues/8578#issuecomment-64085179","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8578","id":64085179,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MDg1MTc5","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-11-22T16:12:13Z","updated_at":"2014-11-22T16:12:13Z","author_association":"CONTRIBUTOR","body":"hmm can you share the code how you create your index too?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64096191","html_url":"https://github.com/elastic/elasticsearch/issues/8578#issuecomment-64096191","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8578","id":64096191,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MDk2MTkx","user":{"login":"samatha-kankipati","id":3371949,"node_id":"MDQ6VXNlcjMzNzE5NDk=","avatar_url":"https://avatars2.githubusercontent.com/u/3371949?v=4","gravatar_id":"","url":"https://api.github.com/users/samatha-kankipati","html_url":"https://github.com/samatha-kankipati","followers_url":"https://api.github.com/users/samatha-kankipati/followers","following_url":"https://api.github.com/users/samatha-kankipati/following{/other_user}","gists_url":"https://api.github.com/users/samatha-kankipati/gists{/gist_id}","starred_url":"https://api.github.com/users/samatha-kankipati/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samatha-kankipati/subscriptions","organizations_url":"https://api.github.com/users/samatha-kankipati/orgs","repos_url":"https://api.github.com/users/samatha-kankipati/repos","events_url":"https://api.github.com/users/samatha-kankipati/events{/privacy}","received_events_url":"https://api.github.com/users/samatha-kankipati/received_events","type":"User","site_admin":false},"created_at":"2014-11-22T21:29:33Z","updated_at":"2014-11-22T21:29:33Z","author_association":"NONE","body":"Here is the code.. We are using 0.90.2..I tried different versions.. It is working fine till 1.1.0 and started failing from 1.2.1\n\n   private void initMappings() {\n        client.admin().cluster().prepareHealth().setWaitForYellowStatus().execute().actionGet()\n        indicesJson = readJsonFile(indicesStructureJsonFile)\n        if (indicesJson) {\n            initializeIndicesAndMappings();\n        }\n    }\n\n```\nprivate void initializeIndicesAndMappings() {\n    indicesJson.indices.each { index ->\n        setIndex(index.name)\n        index.types.each {documentType ->\n            setIndexMappings(index.name, documentType)\n        }\n    }\n}\n\nprivate void setIndex(String indexName) {\n    def readIndexSettings = {index -> readJsonFile(\"${configLocation}/${mappingsPath}/${indexName}/${indexSettingsFileName}\") }\n\n    logger.info(\"Index does not exist. Creating the Index ${indexName} \")\n    def indicesClient = client.admin().indices()\n    if (!isIndexExists(indexName)) {\n        indicesClient.prepareCreate(indexName).setSettings(readIndexSettings(indexName)).execute().actionGet()\n    }\n    else {\n        indicesClient.prepareClose(indexName).execute().actionGet();\n        indicesClient.prepareUpdateSettings(indexName).setSettings(readIndexSettings(indexName)).execute().actionGet();\n        indicesClient.prepareOpen(indexName).execute().actionGet();\n    }\n    logger.info(\"Successfully setup Index ${indexName} \")\n}\n\nprivate void setIndexMappings(String indexName, String docType) {\n    String source = readJsonFile(\"${configLocation}/${mappingsPath}/${indexName}/${docType}.json\")\n    if (source != null) {\n        logger.info(\"Setting up Mapping for [${indexName}]/[${docType}]: ${source}\")\n        client.admin().indices().preparePutMapping(indexName).setIgnoreConflicts(false).setType(docType).setSource(source).execute().actionGet()\n    }\n}\n\npublic JSONObject readJsonFile(String url) throws Exception {\n    logger.info(\"About to read index setting file : ${url}\")\n    final File jsonFile = new File(url);\n    if (jsonFile.exists() && jsonFile.canRead()) {\n        new JsonSlurper().parse(new FileReader(jsonFile)) as JSONObject\n    }\n    else {\n        InputStream ips = getClass().getResourceAsStream(url);\n        new JsonSlurper().parse(new InputStreamReader(ips)) as JSONObject\n    }\n}\n\nprotected Boolean isIndexExists(String indexName) {\n    ClusterStateResponse response = client.admin().cluster().prepareState().execute().actionGet();\n    response.getState().metaData().hasIndex(indexName)\n\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64256595","html_url":"https://github.com/elastic/elasticsearch/issues/8578#issuecomment-64256595","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8578","id":64256595,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MjU2NTk1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-24T20:15:35Z","updated_at":"2014-11-24T20:15:35Z","author_association":"CONTRIBUTOR","body":"Hi @samatha-kankipati \n\nI have no idea what your code is doing or what the files you're slurping contain, but it looks like you are passing settings to the mapping API.  Previously, this was ignored.  Now we catch the error instead.\n\nYou'll need to debug this to figure out where you're going wrong, but that's the root cause.\n","performed_via_github_app":null}]