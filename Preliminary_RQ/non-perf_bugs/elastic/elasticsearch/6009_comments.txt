[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42172677","html_url":"https://github.com/elastic/elasticsearch/issues/6009#issuecomment-42172677","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6009","id":42172677,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMTcyNjc3","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-05-05T09:42:15Z","updated_at":"2014-05-05T09:42:15Z","author_association":"MEMBER","body":"Hey,\n\ncan you provide some more information what exactly is not working? I just tried this snippet which includes searches and aggregations based on the timestamp field and it worked as expected with es 1.1.1\n\n``` json\nDELETE foo-bar\n\nPUT /_template/foo\n{\n    \"template\" : \"foo-*\",\n    \"settings\" : {\n        \"number_of_shards\" : 1\n    },\n    \"mappings\" : {\n        \"_default_\" : {\n            \"_timestamp\" : { \"enabled\" : true },\n            \"dynamic_templates\": [\n                { \"standard_string\": {\n                      \"match\":              \"*\", \n                      \"match_mapping_type\": \"string\",\n                      \"mapping\": {\n                          \"type\":           \"string\",\n                          \"index\":          \"not_analyzed\"\n                      }\n                }},\n                { \"analyzed_string\": {\n                      \"match\":              \"*_analyzed\", \n                      \"match_mapping_type\": \"string\",\n                      \"mapping\": {\n                          \"type\":           \"string\",\n                          \"analyzer\":       \"english\"\n                      }\n                }}\n            ]\n        }\n    }\n}\n\nPUT foo-bar\n\nGET foo-bar/_mapping\n\nPUT /foo-bar/foo/1\n{\n  \"key\" : \"value\"\n}\n\nGET /foo-bar/_search\n{\n  \"post_filter\" : {\n    \"range\" : {\n      \"_timestamp\" : {\n        \"gte\" : \"2014-05-01\"\n      }\n    }\n  }\n}\n\nGET /foo-bar/_search\n{\n  \"post_filter\" : {\n    \"range\" : {\n      \"_timestamp\" : {\n        \"gte\" : \"2014-06-01\"\n      }\n    }\n  }\n}\n\nGET /foo-bar/_search?size=0\n{\n  \"aggs\": {\n    \"keys\": {\n      \"terms\": {\n        \"field\": \"_timestamp\",\n        \"size\": 10\n      }\n    }\n  }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42445817","html_url":"https://github.com/elastic/elasticsearch/issues/6009#issuecomment-42445817","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6009","id":42445817,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDQ1ODE3","user":{"login":"synhershko","id":212252,"node_id":"MDQ6VXNlcjIxMjI1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/212252?v=4","gravatar_id":"","url":"https://api.github.com/users/synhershko","html_url":"https://github.com/synhershko","followers_url":"https://api.github.com/users/synhershko/followers","following_url":"https://api.github.com/users/synhershko/following{/other_user}","gists_url":"https://api.github.com/users/synhershko/gists{/gist_id}","starred_url":"https://api.github.com/users/synhershko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/synhershko/subscriptions","organizations_url":"https://api.github.com/users/synhershko/orgs","repos_url":"https://api.github.com/users/synhershko/repos","events_url":"https://api.github.com/users/synhershko/events{/privacy}","received_events_url":"https://api.github.com/users/synhershko/received_events","type":"User","site_admin":false},"created_at":"2014-05-07T15:57:37Z","updated_at":"2014-05-07T15:57:37Z","author_association":"CONTRIBUTOR","body":"Just to confirm, issuing `GET /foo-bar/_search` should return results with `_timestamp` next to the `_source` and `_score`, right...?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42450408","html_url":"https://github.com/elastic/elasticsearch/issues/6009#issuecomment-42450408","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6009","id":42450408,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDUwNDA4","user":{"login":"synhershko","id":212252,"node_id":"MDQ6VXNlcjIxMjI1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/212252?v=4","gravatar_id":"","url":"https://api.github.com/users/synhershko","html_url":"https://github.com/synhershko","followers_url":"https://api.github.com/users/synhershko/followers","following_url":"https://api.github.com/users/synhershko/following{/other_user}","gists_url":"https://api.github.com/users/synhershko/gists{/gist_id}","starred_url":"https://api.github.com/users/synhershko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/synhershko/subscriptions","organizations_url":"https://api.github.com/users/synhershko/orgs","repos_url":"https://api.github.com/users/synhershko/repos","events_url":"https://api.github.com/users/synhershko/events{/privacy}","received_events_url":"https://api.github.com/users/synhershko/received_events","type":"User","site_admin":false},"created_at":"2014-05-07T16:34:13Z","updated_at":"2014-05-07T16:34:13Z","author_association":"CONTRIBUTOR","body":"@spinscale I can confirm that using the following actions Kibana shows 0 results once Time Filter is enabled on `/index.html#/dashboard/file/guided.json` (the Sample Dashboard thing)\n\nHere's my exact scenario (modified a bit from yours):\n\n``` json\nDELETE foo-bar\n\nPUT /_template/foo\n{\n    \"template\" : \"foo-*\",\n    \"settings\" : {\n        \"number_of_shards\" : 1\n    },\n    \"mappings\" : {\n        \"_default_\" : {\n            \"_timestamp\" : { \"enabled\" : true },\n            \"dynamic_templates\": [\n                { \"standard_string\": {\n                      \"match\":              \"*\", \n                      \"match_mapping_type\": \"string\",\n                      \"mapping\": {\n                          \"type\":           \"string\",\n                          \"index\":          \"not_analyzed\"\n                      }\n                }},\n                { \"analyzed_string\": {\n                      \"match\":              \"*_analyzed\", \n                      \"match_mapping_type\": \"string\",\n                      \"mapping\": {\n                          \"type\":           \"string\",\n                          \"analyzer\":       \"english\"\n                      }\n                }}\n            ]\n        }\n    }\n}\n\nPOST /foo-bar/foo\n{\n  \"key\" : \"value\"\n}\n\nGET /foo-bar/_search\n\nPOST /foo-bar/_search\n{\n  \"post_filter\" : {\n    \"range\" : {\n      \"_timestamp\" : {\n        \"gte\" : \"2014-05-01\"\n      }\n    }\n  }\n}\n\nPOST /foo-bar/_search\n{\n  \"post_filter\" : {\n    \"range\" : {\n      \"_timestamp\" : {\n        \"gte\" : \"2014-06-01\"\n      }\n    }\n  }\n}\n\nPOST /foo-bar/_search?size=0\n{\n  \"aggs\": {\n    \"keys\": {\n      \"terms\": {\n        \"field\": \"_timestamp\",\n        \"size\": 10\n      }\n    }\n  }\n}\n\nGET foo-bar/_mapping\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42529167","html_url":"https://github.com/elastic/elasticsearch/issues/6009#issuecomment-42529167","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6009","id":42529167,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTI5MTY3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-05-08T09:24:10Z","updated_at":"2014-05-08T09:24:25Z","author_association":"CONTRIBUTOR","body":"> Just to confirm, issuing GET /foo-bar/_search should return results with _timestamp next to the _source and _score, right...?\n\nNo, enabling the timestamp makes it indexed, not stored.  So you can use it in `range` clauses, and you can use it in aggs, but you can't retrieve it unless you change the mapping to:\n\n```\n\"_timestamp\" : { \"enabled\" : true, \"store\": true }\n```\n\nAnd you'd need to request the field in the search request, eg:\n\n```\nGET /_search?fields=_timestamp\n```\n\nor to get all stored fields:\n\n```\nGET /_search?fields=*\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42656020","html_url":"https://github.com/elastic/elasticsearch/issues/6009#issuecomment-42656020","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6009","id":42656020,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjU2MDIw","user":{"login":"synhershko","id":212252,"node_id":"MDQ6VXNlcjIxMjI1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/212252?v=4","gravatar_id":"","url":"https://api.github.com/users/synhershko","html_url":"https://github.com/synhershko","followers_url":"https://api.github.com/users/synhershko/followers","following_url":"https://api.github.com/users/synhershko/following{/other_user}","gists_url":"https://api.github.com/users/synhershko/gists{/gist_id}","starred_url":"https://api.github.com/users/synhershko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/synhershko/subscriptions","organizations_url":"https://api.github.com/users/synhershko/orgs","repos_url":"https://api.github.com/users/synhershko/repos","events_url":"https://api.github.com/users/synhershko/events{/privacy}","received_events_url":"https://api.github.com/users/synhershko/received_events","type":"User","site_admin":false},"created_at":"2014-05-09T11:21:46Z","updated_at":"2014-05-09T11:21:46Z","author_association":"CONTRIBUTOR","body":"@clintongormley @spinscale can you please help me understand why Kibana won't recognize this then? When viewing this in Kibana I get 0 results once I enable the Time Filter, which uses _timestamp by default.\n\nSteps to reproduce:\n\nOn a blank new ES 1.1 installation do:\n\n``` json\nDELETE foo-bar\n\nPUT /_template/foo\n{\n    \"template\" : \"foo-*\",\n    \"settings\" : {\n        \"number_of_shards\" : 1\n    },\n    \"mappings\" : {\n        \"_default_\" : {\n            \"_timestamp\" : { \"enabled\" : true },\n            \"dynamic_templates\": [\n                { \"standard_string\": {\n                      \"match\":              \"*\", \n                      \"match_mapping_type\": \"string\",\n                      \"mapping\": {\n                          \"type\":           \"string\",\n                          \"index\":          \"not_analyzed\"\n                      }\n                }},\n                { \"analyzed_string\": {\n                      \"match\":              \"*_analyzed\", \n                      \"match_mapping_type\": \"string\",\n                      \"mapping\": {\n                          \"type\":           \"string\",\n                          \"analyzer\":       \"english\"\n                      }\n                }}\n            ]\n        }\n    }\n}\n\nPOST /foo-bar/foo\n{\n  \"key\" : \"value\"\n}\n```\n\nUse the last one to post multiple documents for funs\n\nGo to the Kibana Sample dashboard (e.g. http://localhost:3579/index.html#/dashboard/file/guided.json), you will see it shows some data.\n\nClick the Time Filter and set it to `15 minutes ago to a few seconds ago`. The dashboard will now show no data at all.\n\nIf the `_timestamp` field is enabled and indexed, how come Kibana shows no data?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42659450","html_url":"https://github.com/elastic/elasticsearch/issues/6009#issuecomment-42659450","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6009","id":42659450,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjU5NDUw","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-05-09T12:14:22Z","updated_at":"2014-05-09T12:14:22Z","author_association":"MEMBER","body":"Kibana uses the `@timestamp` field by default for timestamps not the built-in timestamp functionality, I guess you changed that? (wondering why you are referring to the guided dashboard then).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42660293","html_url":"https://github.com/elastic/elasticsearch/issues/6009#issuecomment-42660293","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6009","id":42660293,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjYwMjkz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-05-09T12:26:41Z","updated_at":"2014-05-09T12:26:41Z","author_association":"CONTRIBUTOR","body":" You can change the timestamp field that is used by going to: Configure dashboard (top right icon) > Timepicker\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42662343","html_url":"https://github.com/elastic/elasticsearch/issues/6009#issuecomment-42662343","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6009","id":42662343,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjYyMzQz","user":{"login":"synhershko","id":212252,"node_id":"MDQ6VXNlcjIxMjI1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/212252?v=4","gravatar_id":"","url":"https://api.github.com/users/synhershko","html_url":"https://github.com/synhershko","followers_url":"https://api.github.com/users/synhershko/followers","following_url":"https://api.github.com/users/synhershko/following{/other_user}","gists_url":"https://api.github.com/users/synhershko/gists{/gist_id}","starred_url":"https://api.github.com/users/synhershko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/synhershko/subscriptions","organizations_url":"https://api.github.com/users/synhershko/orgs","repos_url":"https://api.github.com/users/synhershko/repos","events_url":"https://api.github.com/users/synhershko/events{/privacy}","received_events_url":"https://api.github.com/users/synhershko/received_events","type":"User","site_admin":false},"created_at":"2014-05-09T12:53:29Z","updated_at":"2014-05-09T12:53:29Z","author_association":"CONTRIBUTOR","body":"Hmm I was over thinking this, thought `@timestamp` is some sort of an alias to `_timestamp`. Just checked and it works with `_timestamp`, thanks!\n\n@spinscale I'm building a demo with a logstash-like functionality for some database system, and I want to provide an easy Kibana experience once data is replicated to ES.\n\nI assume there is good reasoning behind using `@timestamp` and not `_timestamp`? probably because the timestamp field set by logstash might refer to a non-current time (backlog indexing for example)?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42664370","html_url":"https://github.com/elastic/elasticsearch/issues/6009#issuecomment-42664370","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6009","id":42664370,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjY0Mzcw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-05-09T13:17:16Z","updated_at":"2014-05-09T13:17:16Z","author_association":"CONTRIBUTOR","body":"> I assume there is good reasoning behind using @timestamp and not _timestamp? probably because the timestamp field set by logstash might refer to a non-current time (backlog indexing for example)?\n\nCorrect - kibana was originally built as a better GUI for Logstash, which used `@timestamp`.\n","performed_via_github_app":null}]