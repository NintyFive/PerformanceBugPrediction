[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/221549637","html_url":"https://github.com/elastic/elasticsearch/issues/18566#issuecomment-221549637","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18566","id":221549637,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMTU0OTYzNw==","user":{"login":"consulthys","id":1280019,"node_id":"MDQ6VXNlcjEyODAwMTk=","avatar_url":"https://avatars2.githubusercontent.com/u/1280019?v=4","gravatar_id":"","url":"https://api.github.com/users/consulthys","html_url":"https://github.com/consulthys","followers_url":"https://api.github.com/users/consulthys/followers","following_url":"https://api.github.com/users/consulthys/following{/other_user}","gists_url":"https://api.github.com/users/consulthys/gists{/gist_id}","starred_url":"https://api.github.com/users/consulthys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/consulthys/subscriptions","organizations_url":"https://api.github.com/users/consulthys/orgs","repos_url":"https://api.github.com/users/consulthys/repos","events_url":"https://api.github.com/users/consulthys/events{/privacy}","received_events_url":"https://api.github.com/users/consulthys/received_events","type":"User","site_admin":false},"created_at":"2016-05-25T11:47:51Z","updated_at":"2016-05-25T11:47:51Z","author_association":"CONTRIBUTOR","body":"I've figured out that the `as int` type coercion is what's causing the error.\n\nIf I change the script to use the explicit `new Integer(...)` constructor instead of using type coercions, then it works flawlessly.\n\n```\n\"inline\": \"def rparts = ctx._source.myDate.split('T'); def rtime = rparts[1].split(':'); ctx._source.myMinute = (new Integer(rtime[0]) * 60) + new Integer(rtime[1])\"\n```\n\nI still think the class permission should be added to the policy file of the `lang-groovy` module, since type coercion is a perfectly valid groovy construct.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/221549788","html_url":"https://github.com/elastic/elasticsearch/issues/18566#issuecomment-221549788","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18566","id":221549788,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMTU0OTc4OA==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-05-25T11:48:36Z","updated_at":"2016-05-25T11:48:36Z","author_association":"CONTRIBUTOR","body":"These classes are not whitelisted, because groovy \"wrappers\" are extremely insecure. For example they augment any List with an `execute` method.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/221550381","html_url":"https://github.com/elastic/elasticsearch/issues/18566#issuecomment-221550381","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18566","id":221550381,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMTU1MDM4MQ==","user":{"login":"consulthys","id":1280019,"node_id":"MDQ6VXNlcjEyODAwMTk=","avatar_url":"https://avatars2.githubusercontent.com/u/1280019?v=4","gravatar_id":"","url":"https://api.github.com/users/consulthys","html_url":"https://github.com/consulthys","followers_url":"https://api.github.com/users/consulthys/followers","following_url":"https://api.github.com/users/consulthys/following{/other_user}","gists_url":"https://api.github.com/users/consulthys/gists{/gist_id}","starred_url":"https://api.github.com/users/consulthys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/consulthys/subscriptions","organizations_url":"https://api.github.com/users/consulthys/orgs","repos_url":"https://api.github.com/users/consulthys/repos","events_url":"https://api.github.com/users/consulthys/events{/privacy}","received_events_url":"https://api.github.com/users/consulthys/received_events","type":"User","site_admin":false},"created_at":"2016-05-25T11:51:42Z","updated_at":"2016-05-25T11:51:42Z","author_association":"CONTRIBUTOR","body":"That's fair enough, no big deal since I have an alternative.\nThanks much for your input, Robert. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/239155332","html_url":"https://github.com/elastic/elasticsearch/issues/18566#issuecomment-239155332","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18566","id":239155332,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTE1NTMzMg==","user":{"login":"cfuerst","id":1752850,"node_id":"MDQ6VXNlcjE3NTI4NTA=","avatar_url":"https://avatars0.githubusercontent.com/u/1752850?v=4","gravatar_id":"","url":"https://api.github.com/users/cfuerst","html_url":"https://github.com/cfuerst","followers_url":"https://api.github.com/users/cfuerst/followers","following_url":"https://api.github.com/users/cfuerst/following{/other_user}","gists_url":"https://api.github.com/users/cfuerst/gists{/gist_id}","starred_url":"https://api.github.com/users/cfuerst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cfuerst/subscriptions","organizations_url":"https://api.github.com/users/cfuerst/orgs","repos_url":"https://api.github.com/users/cfuerst/repos","events_url":"https://api.github.com/users/cfuerst/events{/privacy}","received_events_url":"https://api.github.com/users/cfuerst/received_events","type":"User","site_admin":false},"created_at":"2016-08-11T13:07:35Z","updated_at":"2016-08-11T13:07:35Z","author_association":"NONE","body":"thnx alot @consulthys for sharing this!\n","performed_via_github_app":null}]