{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1886","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1886/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1886/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1886/events","html_url":"https://github.com/elastic/elasticsearch/issues/1886","id":4306455,"node_id":"MDU6SXNzdWU0MzA2NDU1","number":1886,"title":"transport client disconnected after ping timeout","user":{"login":"davie","id":573,"node_id":"MDQ6VXNlcjU3Mw==","avatar_url":"https://avatars3.githubusercontent.com/u/573?v=4","gravatar_id":"","url":"https://api.github.com/users/davie","html_url":"https://github.com/davie","followers_url":"https://api.github.com/users/davie/followers","following_url":"https://api.github.com/users/davie/following{/other_user}","gists_url":"https://api.github.com/users/davie/gists{/gist_id}","starred_url":"https://api.github.com/users/davie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davie/subscriptions","organizations_url":"https://api.github.com/users/davie/orgs","repos_url":"https://api.github.com/users/davie/repos","events_url":"https://api.github.com/users/davie/events{/privacy}","received_events_url":"https://api.github.com/users/davie/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2012-04-26T16:22:23Z","updated_at":"2015-03-23T16:27:28Z","closed_at":"2012-05-04T14:46:58Z","author_association":"NONE","active_lock_reason":null,"body":"For some requests which return large amounts of data we are seeing the following exception.\n\n```\nJsQS0K1nRNCb8GNgA][inet[/192.168.1.100:9300]], disconnecting... \norg.elasticsearch.transport.ReceiveTimeoutTransportException: [prod-node-prod][inet[/192.168.1.100:9300]][cluster/nodes/info] request_id [143146] timed out after [5002ms] \n        at org.elasticsearch.transport.TransportService$TimeoutHandler.run(TransportService.java:347) \n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) \n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n```\n\nWe have 2 nodes in the cluster, and are connecting using the transport client. \nWe can reproduce this error by running a query that takes tens of seconds to complete. \nWe're currently working around this by increase the value of client.transport.ping_timeout on the client to longer than the query takes to return.\n\nIt looks like this is related to the node disconnect on timeout introduced in https://github.com/elasticsearch/elasticsearch/commit/eb4f6709d97287b0c9de6af9bf5f4a42fcf98991\nand doesn't seem to be fixed by https://github.com/elasticsearch/elasticsearch/commit/ac4aa17e167f74b47fd4862828f75fbcce745ede\n\nWe're running 0.19.0, but I've verified that the problem still exists in 0.19.2, and it was working fine on 0.18.7\nI'll add a standalone re-creation shortly.\n","closed_by":{"login":"davie","id":573,"node_id":"MDQ6VXNlcjU3Mw==","avatar_url":"https://avatars3.githubusercontent.com/u/573?v=4","gravatar_id":"","url":"https://api.github.com/users/davie","html_url":"https://github.com/davie","followers_url":"https://api.github.com/users/davie/followers","following_url":"https://api.github.com/users/davie/following{/other_user}","gists_url":"https://api.github.com/users/davie/gists{/gist_id}","starred_url":"https://api.github.com/users/davie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davie/subscriptions","organizations_url":"https://api.github.com/users/davie/orgs","repos_url":"https://api.github.com/users/davie/repos","events_url":"https://api.github.com/users/davie/events{/privacy}","received_events_url":"https://api.github.com/users/davie/received_events","type":"User","site_admin":false},"performed_via_github_app":null}