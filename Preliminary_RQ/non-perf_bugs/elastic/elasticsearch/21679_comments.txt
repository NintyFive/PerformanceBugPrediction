[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/262405318","html_url":"https://github.com/elastic/elasticsearch/issues/21679#issuecomment-262405318","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21679","id":262405318,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjQwNTMxOA==","user":{"login":"agebhar1","id":2443866,"node_id":"MDQ6VXNlcjI0NDM4NjY=","avatar_url":"https://avatars1.githubusercontent.com/u/2443866?v=4","gravatar_id":"","url":"https://api.github.com/users/agebhar1","html_url":"https://github.com/agebhar1","followers_url":"https://api.github.com/users/agebhar1/followers","following_url":"https://api.github.com/users/agebhar1/following{/other_user}","gists_url":"https://api.github.com/users/agebhar1/gists{/gist_id}","starred_url":"https://api.github.com/users/agebhar1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agebhar1/subscriptions","organizations_url":"https://api.github.com/users/agebhar1/orgs","repos_url":"https://api.github.com/users/agebhar1/repos","events_url":"https://api.github.com/users/agebhar1/events{/privacy}","received_events_url":"https://api.github.com/users/agebhar1/received_events","type":"User","site_admin":false},"created_at":"2016-11-23T00:19:21Z","updated_at":"2016-11-24T09:34:48Z","author_association":"CONTRIBUTOR","body":"Hi, got started to implement this low hanging fruit ... the current output (based on local machine, elastic's data is located under `/home/...`) is:\r\n```\r\n$ df -h | grep home\r\n/dev/sda5                459G    237G  199G   55% /home\r\n\r\n$  http \":9200/_cat/nodes?v&h=id,diskTotal,diskUsed,diskAvail,diskUsedPercent\"\r\nHTTP/1.1 200 OK\r\ncontent-encoding: gzip\r\ncontent-type: text/plain; charset=UTF-8\r\ntransfer-encoding: chunked\r\n\r\nid   diskTotal diskUsed diskAvail diskUsedPercent\r\nfyTu   458.3gb  259.8gb   198.4gb           56.71\r\n\r\n```\r\nThe columns are:\r\n * `diskAvail` (alias d) == (sum) `java.nio.file.FileStore.getUsableSpace()`\r\n * `diskTotal` (alias dt) == (sum) `java.nio.file.FileStore.getTotalSpace()`\r\n * `diskUsed` (alias du) == `diskTotal - diskAvail`\r\n * `diskUsedPercent (alias dup)` == 100 * `diskUsed`/`diskTotal`\r\n\r\nThe used disk space is greater than the ones returned by `df` this is due the fact of Javas `java.nio.file.FileStore.getUsableSpace()`:\r\n\r\n> Returns the number of bytes available to this Java virtual machine on the\r\n> file store.\r\n> \r\n> <p> The returned number of available bytes is a hint, but not a\r\n> guarantee, that it is possible to use most or any of these bytes.  The\r\n> number of usable bytes is most likely to be accurate immediately\r\n> after the space attributes are obtained. It is likely to be made inaccurate\r\n> by any external I/O operations including those made on the system outside\r\n> of this Java virtual machine.","performed_via_github_app":null}]