{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/5541","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5541/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5541/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5541/events","html_url":"https://github.com/elastic/elasticsearch/issues/5541","id":30194407,"node_id":"MDU6SXNzdWUzMDE5NDQwNw==","number":5541,"title":"Could not get correct results when using percolator api?","user":{"login":"Kinghack","id":1154775,"node_id":"MDQ6VXNlcjExNTQ3NzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1154775?v=4","gravatar_id":"","url":"https://api.github.com/users/Kinghack","html_url":"https://github.com/Kinghack","followers_url":"https://api.github.com/users/Kinghack/followers","following_url":"https://api.github.com/users/Kinghack/following{/other_user}","gists_url":"https://api.github.com/users/Kinghack/gists{/gist_id}","starred_url":"https://api.github.com/users/Kinghack/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kinghack/subscriptions","organizations_url":"https://api.github.com/users/Kinghack/orgs","repos_url":"https://api.github.com/users/Kinghack/repos","events_url":"https://api.github.com/users/Kinghack/events{/privacy}","received_events_url":"https://api.github.com/users/Kinghack/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2014-03-26T09:00:12Z","updated_at":"2014-12-30T14:38:08Z","closed_at":"2014-12-30T14:38:08Z","author_association":"NONE","active_lock_reason":null,"body":"Dear all,\n\nI need some help, please..\n\nOur project use percolator in es for subscribe feature since 0.9 version and it works well.\n\nThe code is like follows:\n#### register query step:\n\n_0.9version_\n\n`$url = Config::get(\"env.searcher.cluster\") . '_percolator/subscribe/' . $subscribe;`\n#### percolator step:\n\n_0.9version_\n\n`$url = Config::get(\"env.searcher.cluster\") . 'subscribe/Subscribe/_percolate';`\n\nAnd before we use percolator, first we would create the index and set up the mapping.\n\nLast week, we upgrade our es to 1.0.1 version.\n\nJust like what we did before, we create index subscribe and set up the mapping.\n\nThe new code looks like as follows:\n#### register query step:\n\n_1.0.1version_\n\n`$url = Config::get(\"env.searcher.cluster\") . 'subscribe/.percolator/' . $subscribe;`\n#### percolator step:\n\n_1.0.1version_\n\n`$url = Config::get(\"env.searcher.cluster\") . 'subscribe/.percolator/_percolate?percolate_format=ids';`\n\nWe could register successfully. But we failed to get correct percolator result. Actually we get empty results.\n\nNext , we try to create 'subscribe' index automatically instead of creating manually.\n\nStill, we register successfully. And we could get some results back by percolator.\n\nBut, if there existed some queries registered as \n\n![screen shot 2014-03-26 at 4 46 50 pm](https://f.cloud.github.com/assets/1154775/2522641/3ef13028-b4c4-11e3-85a1-f56704c72b91.png)\n\nWe could not get the correct result.\n\nThe same query works fine in search api.\n\nAny suggestions?\n\nThanks.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}