[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/230147885","html_url":"https://github.com/elastic/elasticsearch/issues/19234#issuecomment-230147885","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19234","id":230147885,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMDE0Nzg4NQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-07-03T11:10:50Z","updated_at":"2016-07-03T11:10:50Z","author_association":"MEMBER","body":"Reindexing behaves in the same way as normal indexing. Looking at the code, we currently don't expose the `consistencyLevel` parameter of the underlying indexing request. IMO we should. @nik9000 any opinion here?\n\nNote that long term we have plans (which will hopefully make it into 5.0 - see discussions on #18985 ) to rename the consistencyLevel parameter to `waitForActiveShards` which reflects how it works. This will be set per request, but also have an index level settings to control the default, which will be updatable dynamically giving you what you want in a better way IMO. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/230148120","html_url":"https://github.com/elastic/elasticsearch/issues/19234#issuecomment-230148120","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19234","id":230148120,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMDE0ODEyMA==","user":{"login":"synhershko","id":212252,"node_id":"MDQ6VXNlcjIxMjI1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/212252?v=4","gravatar_id":"","url":"https://api.github.com/users/synhershko","html_url":"https://github.com/synhershko","followers_url":"https://api.github.com/users/synhershko/followers","following_url":"https://api.github.com/users/synhershko/following{/other_user}","gists_url":"https://api.github.com/users/synhershko/gists{/gist_id}","starred_url":"https://api.github.com/users/synhershko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/synhershko/subscriptions","organizations_url":"https://api.github.com/users/synhershko/orgs","repos_url":"https://api.github.com/users/synhershko/repos","events_url":"https://api.github.com/users/synhershko/events{/privacy}","received_events_url":"https://api.github.com/users/synhershko/received_events","type":"User","site_admin":false},"created_at":"2016-07-03T11:16:46Z","updated_at":"2016-07-03T11:16:46Z","author_association":"CONTRIBUTOR","body":"Sounds good. Might be worthy to mention I was jumping from replicas: 0 to 6, but given the batch mode of reindexing - the default IMO should be 100% async replication.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/230148883","html_url":"https://github.com/elastic/elasticsearch/issues/19234#issuecomment-230148883","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19234","id":230148883,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMDE0ODg4Mw==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-07-03T11:36:34Z","updated_at":"2016-07-03T11:36:34Z","author_association":"MEMBER","body":"Let’s not conflate async replications with the active shards requirement - it’s a different thing. That said async replication presents a challenge for error and such. It is removed and will therefore unlikely to come back.  If it all, we should invest in running the search of reindex concurrently to the indexing but that is another discussions as well (and it creates coordination complexity which I’m not sure at all is needed here).\n\n> On 03 Jul 2016, at 13:16, Itamar Syn-Hershko notifications@github.com wrote:\n> \n> Sounds good. Might be worthy to mention I was jumping from replicas: 0 to 6, but given the batch mode of reindexing - the default IMO should be 100% async replication.\n> \n> —\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/231317483","html_url":"https://github.com/elastic/elasticsearch/issues/19234#issuecomment-231317483","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19234","id":231317483,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTMxNzQ4Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-07-08T09:35:29Z","updated_at":"2016-07-08T09:35:29Z","author_association":"CONTRIBUTOR","body":"This isn't a problem with reindexing, but with any CRUD request.  If you increase replicas to a point where the quorum is not available, CRUD requests will stall and eventually timeout.  I don't think this is a bug that can be fixed.\n\nExposing the consistency level (which would have to be done at the start of reindexing) would be a workaround for this situation and we should probably do that.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/231406285","html_url":"https://github.com/elastic/elasticsearch/issues/19234#issuecomment-231406285","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19234","id":231406285,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTQwNjI4NQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-07-08T16:27:57Z","updated_at":"2016-07-08T16:27:57Z","author_association":"CONTRIBUTOR","body":"> Exposing the consistency level (which would have to be done at the start of reindexing) would be a workaround for this situation and we should probably do that.\n\nYou can set the consistency level on reindex the same way you set it on any other write action. I just never documented it because I'm a doofus. [Here](https://github.com/elastic/elasticsearch/blob/2.4/modules/reindex/src/test/resources/rest-api-spec/test/reindex/60_consistency.yaml) is the test. It is just a request parameter.\n\nSorry I didn't notice this five days ago when you opened it....\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/232416696","html_url":"https://github.com/elastic/elasticsearch/issues/19234#issuecomment-232416696","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19234","id":232416696,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjQxNjY5Ng==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-07-13T16:51:27Z","updated_at":"2016-07-13T16:51:27Z","author_association":"CONTRIBUTOR","body":"Ah. I do mention it in the URL Parameters section.\n","performed_via_github_app":null}]