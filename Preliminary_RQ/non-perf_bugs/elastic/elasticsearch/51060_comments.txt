[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/574899186","html_url":"https://github.com/elastic/elasticsearch/issues/51060#issuecomment-574899186","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51060","id":574899186,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDg5OTE4Ng==","user":{"login":"nnbrandon","id":12700313,"node_id":"MDQ6VXNlcjEyNzAwMzEz","avatar_url":"https://avatars3.githubusercontent.com/u/12700313?v=4","gravatar_id":"","url":"https://api.github.com/users/nnbrandon","html_url":"https://github.com/nnbrandon","followers_url":"https://api.github.com/users/nnbrandon/followers","following_url":"https://api.github.com/users/nnbrandon/following{/other_user}","gists_url":"https://api.github.com/users/nnbrandon/gists{/gist_id}","starred_url":"https://api.github.com/users/nnbrandon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nnbrandon/subscriptions","organizations_url":"https://api.github.com/users/nnbrandon/orgs","repos_url":"https://api.github.com/users/nnbrandon/repos","events_url":"https://api.github.com/users/nnbrandon/events{/privacy}","received_events_url":"https://api.github.com/users/nnbrandon/received_events","type":"User","site_admin":false},"created_at":"2020-01-15T23:07:38Z","updated_at":"2020-01-16T00:47:50Z","author_association":"NONE","body":"Based off of this call stack,\r\n\r\nVersion 6.8: https://github.com/elastic/elasticsearch/blob/6.8/server/src/main/java/org/elasticsearch/node/Node.java#L472, elasticsearch is trying to create a component for ReindexPlugin.\r\n\r\nVersion 6.8: https://github.com/elastic/elasticsearch/blob/6.8/modules/reindex/src/main/java/org/elasticsearch/index/reindex/ReindexPlugin.java#L88, it calls a function ReindexSslConfig() and I am unsure as to why it is trying to config it with SSL.\r\n\r\nVersion 6.5, https://github.com/elastic/elasticsearch/blob/6.5/modules/reindex/src/main/java/org/elasticsearch/index/reindex/ReindexPlugin.java, there is no mentions of ReindexSslConfig() and this is mainly due to version 6.5 not supporting the library ssl-config.\r\n\r\nWhy is elasticsearch trying to configure out ReindexPlugin with SSL even though this is an OSS version?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/574935784","html_url":"https://github.com/elastic/elasticsearch/issues/51060#issuecomment-574935784","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51060","id":574935784,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDkzNTc4NA==","user":{"login":"nnbrandon","id":12700313,"node_id":"MDQ6VXNlcjEyNzAwMzEz","avatar_url":"https://avatars3.githubusercontent.com/u/12700313?v=4","gravatar_id":"","url":"https://api.github.com/users/nnbrandon","html_url":"https://github.com/nnbrandon","followers_url":"https://api.github.com/users/nnbrandon/followers","following_url":"https://api.github.com/users/nnbrandon/following{/other_user}","gists_url":"https://api.github.com/users/nnbrandon/gists{/gist_id}","starred_url":"https://api.github.com/users/nnbrandon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nnbrandon/subscriptions","organizations_url":"https://api.github.com/users/nnbrandon/orgs","repos_url":"https://api.github.com/users/nnbrandon/repos","events_url":"https://api.github.com/users/nnbrandon/events{/privacy}","received_events_url":"https://api.github.com/users/nnbrandon/received_events","type":"User","site_admin":false},"created_at":"2020-01-16T01:20:56Z","updated_at":"2020-01-16T01:20:56Z","author_association":"NONE","body":"@tvernum, do you possibly know what is going on here? I saw that you created this [PR ](https://github.com/elastic/elasticsearch/pull/38292) wanted to get your input if possible. We did not introduce any SSL settings to reindex from remote.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/574956062","html_url":"https://github.com/elastic/elasticsearch/issues/51060#issuecomment-574956062","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51060","id":574956062,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDk1NjA2Mg==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2020-01-16T02:46:11Z","updated_at":"2020-01-16T02:46:11Z","author_association":"CONTRIBUTOR","body":"> Why is elasticsearch trying to configure out ReindexPlugin with SSL even though this is an OSS version?\r\n\r\nOpen Source Elasticsearch has always (well, for a very long time) supported reindexing over `https`. In 6.7 we added support for configuring the SSL parameters for that connection.\r\n\r\nSo it makes sense that you see a differne between 6.8 and 6.5\r\n\r\nCan you give an exact OS version and/or JDK package name?\r\nOS vendors repackage openjdk and CA Certs is one of the areas that they sometimes fiddle with, so if I'm going to reproduce this I'll need some more info on the environment.\r\n\r\n ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/574956152","html_url":"https://github.com/elastic/elasticsearch/issues/51060#issuecomment-574956152","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51060","id":574956152,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDk1NjE1Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-01-16T02:46:31Z","updated_at":"2020-01-16T02:46:31Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/Reindex)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/574956158","html_url":"https://github.com/elastic/elasticsearch/issues/51060#issuecomment-574956158","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51060","id":574956158,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDk1NjE1OA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-01-16T02:46:32Z","updated_at":"2020-01-16T02:46:32Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security (:Security/Network)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/574960599","html_url":"https://github.com/elastic/elasticsearch/issues/51060#issuecomment-574960599","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51060","id":574960599,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDk2MDU5OQ==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2020-01-16T03:06:07Z","updated_at":"2020-01-16T03:06:07Z","author_association":"CONTRIBUTOR","body":"In your log file I see\r\n```\r\n -Djava.security.properties==/ci/hubble/elasticsearch-java.security\r\n```\r\n\r\nMy strong suspicion is that your custom security properties are the root cause of this issue.\r\nAre you able to provide a copy of that file?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/575023128","html_url":"https://github.com/elastic/elasticsearch/issues/51060#issuecomment-575023128","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51060","id":575023128,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NTAyMzEyOA==","user":{"login":"nnbrandon","id":12700313,"node_id":"MDQ6VXNlcjEyNzAwMzEz","avatar_url":"https://avatars3.githubusercontent.com/u/12700313?v=4","gravatar_id":"","url":"https://api.github.com/users/nnbrandon","html_url":"https://github.com/nnbrandon","followers_url":"https://api.github.com/users/nnbrandon/followers","following_url":"https://api.github.com/users/nnbrandon/following{/other_user}","gists_url":"https://api.github.com/users/nnbrandon/gists{/gist_id}","starred_url":"https://api.github.com/users/nnbrandon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nnbrandon/subscriptions","organizations_url":"https://api.github.com/users/nnbrandon/orgs","repos_url":"https://api.github.com/users/nnbrandon/repos","events_url":"https://api.github.com/users/nnbrandon/events{/privacy}","received_events_url":"https://api.github.com/users/nnbrandon/received_events","type":"User","site_admin":false},"created_at":"2020-01-16T07:37:05Z","updated_at":"2020-01-16T07:37:05Z","author_association":"NONE","body":"> In your log file I see\r\n> \r\n> ```\r\n>  -Djava.security.properties==/ci/hubble/elasticsearch-java.security\r\n> ```\r\n> \r\n> My strong suspicion is that your custom security properties are the root cause of this issue.\r\n> Are you able to provide a copy of that file?\r\n\r\nssl.KeyManagerFactory.algorithm=SunX509\r\nssl.TrustManagerFactory.algorithm=PKIX\r\n\r\nI believe that these two lines in there may be the reason why. I'll give it an attempt without it and will ping the results.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/575247536","html_url":"https://github.com/elastic/elasticsearch/issues/51060#issuecomment-575247536","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51060","id":575247536,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NTI0NzUzNg==","user":{"login":"nnbrandon","id":12700313,"node_id":"MDQ6VXNlcjEyNzAwMzEz","avatar_url":"https://avatars3.githubusercontent.com/u/12700313?v=4","gravatar_id":"","url":"https://api.github.com/users/nnbrandon","html_url":"https://github.com/nnbrandon","followers_url":"https://api.github.com/users/nnbrandon/followers","following_url":"https://api.github.com/users/nnbrandon/following{/other_user}","gists_url":"https://api.github.com/users/nnbrandon/gists{/gist_id}","starred_url":"https://api.github.com/users/nnbrandon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nnbrandon/subscriptions","organizations_url":"https://api.github.com/users/nnbrandon/orgs","repos_url":"https://api.github.com/users/nnbrandon/repos","events_url":"https://api.github.com/users/nnbrandon/events{/privacy}","received_events_url":"https://api.github.com/users/nnbrandon/received_events","type":"User","site_admin":false},"created_at":"2020-01-16T17:00:59Z","updated_at":"2020-01-16T17:01:21Z","author_association":"NONE","body":"> > Why is elasticsearch trying to configure out ReindexPlugin with SSL even though this is an OSS version?\r\n> \r\n> Open Source Elasticsearch has always (well, for a very long time) supported reindexing over `https`. In 6.7 we added support for configuring the SSL parameters for that connection.\r\n> \r\n> So it makes sense that you see a differne between 6.8 and 6.5\r\n> \r\n> Can you give an exact OS version and/or JDK package name?\r\n> OS vendors repackage openjdk and CA Certs is one of the areas that they sometimes fiddle with, so if I'm going to reproduce this I'll need some more info on the environment.\r\n\r\nOS Version: \r\n```\r\ncat /etc/os-release\r\nNAME=\"MgmtOS\"\r\nVERSION=\"7 (Core)\"\r\nID=\"centos\"\r\nID_LIKE=\"rhel fedora\"\r\nVERSION_ID=\"7\"\r\nPRETTY_NAME=\"MgmtOS 7 (Core)\"\r\nANSI_COLOR=\"0;31\"\r\nCPE_NAME=\"cpe:/o:centos:centos:7\"\r\nHOME_URL=\"https://www.centos.org/\"\r\nBUG_REPORT_URL=\"https://bugs.centos.org/\"\r\n\r\nCENTOS_MANTISBT_PROJECT=\"CentOS-7\"\r\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"\r\nREDHAT_SUPPORT_PRODUCT=\"centos\"\r\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"\r\n```\r\n\r\nJDK:\r\n```\r\nopenjdk version \"1.8.0_181\"\r\nOpenJDK Runtime Environment (build 1.8.0_181-b13)\r\nOpenJDK 64-Bit Server VM (build 25.181-b13, mixed mode)\r\n```\r\n\r\nThank you @tvernum ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/575266927","html_url":"https://github.com/elastic/elasticsearch/issues/51060#issuecomment-575266927","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51060","id":575266927,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NTI2NjkyNw==","user":{"login":"nnbrandon","id":12700313,"node_id":"MDQ6VXNlcjEyNzAwMzEz","avatar_url":"https://avatars3.githubusercontent.com/u/12700313?v=4","gravatar_id":"","url":"https://api.github.com/users/nnbrandon","html_url":"https://github.com/nnbrandon","followers_url":"https://api.github.com/users/nnbrandon/followers","following_url":"https://api.github.com/users/nnbrandon/following{/other_user}","gists_url":"https://api.github.com/users/nnbrandon/gists{/gist_id}","starred_url":"https://api.github.com/users/nnbrandon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nnbrandon/subscriptions","organizations_url":"https://api.github.com/users/nnbrandon/orgs","repos_url":"https://api.github.com/users/nnbrandon/repos","events_url":"https://api.github.com/users/nnbrandon/events{/privacy}","received_events_url":"https://api.github.com/users/nnbrandon/received_events","type":"User","site_admin":false},"created_at":"2020-01-16T17:46:27Z","updated_at":"2020-01-16T17:46:27Z","author_association":"NONE","body":"@tvernum I didn't have much luck removing the lines I indicated. Here are the contents of the security properties file. Thank you ahead of time for taking a look.\r\n\r\n[security-properties.txt](https://github.com/elastic/elasticsearch/files/4072837/security-properties.txt)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/575443248","html_url":"https://github.com/elastic/elasticsearch/issues/51060#issuecomment-575443248","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51060","id":575443248,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NTQ0MzI0OA==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2020-01-17T03:02:58Z","updated_at":"2020-01-17T03:03:11Z","author_association":"CONTRIBUTOR","body":"I can't reproduce this using the security properties you posted, so it looks like it will be something more subtle.\r\nI'll try and work out a reproduction but I don't have any promises on timeframe. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/575722546","html_url":"https://github.com/elastic/elasticsearch/issues/51060#issuecomment-575722546","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51060","id":575722546,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NTcyMjU0Ng==","user":{"login":"nnbrandon","id":12700313,"node_id":"MDQ6VXNlcjEyNzAwMzEz","avatar_url":"https://avatars3.githubusercontent.com/u/12700313?v=4","gravatar_id":"","url":"https://api.github.com/users/nnbrandon","html_url":"https://github.com/nnbrandon","followers_url":"https://api.github.com/users/nnbrandon/followers","following_url":"https://api.github.com/users/nnbrandon/following{/other_user}","gists_url":"https://api.github.com/users/nnbrandon/gists{/gist_id}","starred_url":"https://api.github.com/users/nnbrandon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nnbrandon/subscriptions","organizations_url":"https://api.github.com/users/nnbrandon/orgs","repos_url":"https://api.github.com/users/nnbrandon/repos","events_url":"https://api.github.com/users/nnbrandon/events{/privacy}","received_events_url":"https://api.github.com/users/nnbrandon/received_events","type":"User","site_admin":false},"created_at":"2020-01-17T17:34:11Z","updated_at":"2020-01-17T17:34:11Z","author_association":"NONE","body":"@tvernum, I was able to find out the problem and it was from the security properties file that you had suspicions on. It was mainly due to a keystore mismatch with Java's keystore. I'll go ahead and close this issue. Thank you for taking a look at it.","performed_via_github_app":null}]