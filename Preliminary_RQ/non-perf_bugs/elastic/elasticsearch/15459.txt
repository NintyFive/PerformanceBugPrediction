{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15459","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15459/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15459/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15459/events","html_url":"https://github.com/elastic/elasticsearch/issues/15459","id":122373011,"node_id":"MDU6SXNzdWUxMjIzNzMwMTE=","number":15459,"title":"Require rest tests to run via gradle","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"labels":[{"id":60445228,"node_id":"MDU6TGFiZWw2MDQ0NTIyOA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest","name":">test","color":"5319e7","default":false,"description":"Issues or PRs that are addressing/adding tests"},{"id":246685314,"node_id":"MDU6TGFiZWwyNDY2ODUzMTQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v5.0.0-alpha1","name":"v5.0.0-alpha1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2015-12-15T21:39:51Z","updated_at":"2016-01-19T01:38:23Z","closed_at":"2016-01-19T01:38:23Z","author_association":"MEMBER","active_lock_reason":null,"body":"Some time ago, we added \"real integration tests\" that run in a separate phase of the build (mvn verify, gradle integTest) after the unit test phase. These tests work differently in that we setup and teardown external test fixtures before it runs: allows for real integration tests with a bin/elasticsearch, and use the rest test framework to perform actions and checks against that server.\n\nIn order to properly test many of our plugins and qa scenarios, we need the ability to have external test fixtures other than bin/elasticsearch. For example, testing repository-s3 should be using an external mock s3 server which responds to the s3 requests the plugin would make, so that the ES server can do a real s3 snapshot and restore.  But in order for this to work, we must shed the fantasyland requirement: rest integ tests will no longer work from the IDE, since they need this external process to be managed (which is done by gradle). Other examples could be hdfs minicluster, email server, http proxy server, ec2 service, ldap/directory service, etc.\n\nThis issue is to remove the hack that was added to make rest integ tests \"work\" from the IDE, in preparation for more external test fixtures beyond bin/elasticsearch.  Unit tests will continue to work from the IDE, and should definitely be improved for all of these plugins to use mocks. Rest integ tests will not be runnable from the IDE, but they should only be testing small parts (ie the integration of ES and s3), not that the code deep inside a plugin works at all.\n\nSee #15439 for the issue to add these external test fixtures.\n","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}