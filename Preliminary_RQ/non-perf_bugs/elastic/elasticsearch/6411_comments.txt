[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52408805","html_url":"https://github.com/elastic/elasticsearch/issues/6411#issuecomment-52408805","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6411","id":52408805,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDA4ODA1","user":{"login":"sakalajuraj","id":5196144,"node_id":"MDQ6VXNlcjUxOTYxNDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/5196144?v=4","gravatar_id":"","url":"https://api.github.com/users/sakalajuraj","html_url":"https://github.com/sakalajuraj","followers_url":"https://api.github.com/users/sakalajuraj/followers","following_url":"https://api.github.com/users/sakalajuraj/following{/other_user}","gists_url":"https://api.github.com/users/sakalajuraj/gists{/gist_id}","starred_url":"https://api.github.com/users/sakalajuraj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sakalajuraj/subscriptions","organizations_url":"https://api.github.com/users/sakalajuraj/orgs","repos_url":"https://api.github.com/users/sakalajuraj/repos","events_url":"https://api.github.com/users/sakalajuraj/events{/privacy}","received_events_url":"https://api.github.com/users/sakalajuraj/received_events","type":"User","site_admin":false},"created_at":"2014-08-16T23:25:42Z","updated_at":"2014-08-16T23:25:42Z","author_association":"NONE","body":"I have same problem on 1.3.1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62539775","html_url":"https://github.com/elastic/elasticsearch/issues/6411#issuecomment-62539775","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6411","id":62539775,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTM5Nzc1","user":{"login":"smorovic","id":5859622,"node_id":"MDQ6VXNlcjU4NTk2MjI=","avatar_url":"https://avatars0.githubusercontent.com/u/5859622?v=4","gravatar_id":"","url":"https://api.github.com/users/smorovic","html_url":"https://github.com/smorovic","followers_url":"https://api.github.com/users/smorovic/followers","following_url":"https://api.github.com/users/smorovic/following{/other_user}","gists_url":"https://api.github.com/users/smorovic/gists{/gist_id}","starred_url":"https://api.github.com/users/smorovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smorovic/subscriptions","organizations_url":"https://api.github.com/users/smorovic/orgs","repos_url":"https://api.github.com/users/smorovic/repos","events_url":"https://api.github.com/users/smorovic/events{/privacy}","received_events_url":"https://api.github.com/users/smorovic/received_events","type":"User","site_admin":false},"created_at":"2014-11-11T12:24:38Z","updated_at":"2014-11-11T12:24:38Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69163070","html_url":"https://github.com/elastic/elasticsearch/issues/6411#issuecomment-69163070","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6411","id":69163070,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTYzMDcw","user":{"login":"smorovic","id":5859622,"node_id":"MDQ6VXNlcjU4NTk2MjI=","avatar_url":"https://avatars0.githubusercontent.com/u/5859622?v=4","gravatar_id":"","url":"https://api.github.com/users/smorovic","html_url":"https://github.com/smorovic","followers_url":"https://api.github.com/users/smorovic/followers","following_url":"https://api.github.com/users/smorovic/following{/other_user}","gists_url":"https://api.github.com/users/smorovic/gists{/gist_id}","starred_url":"https://api.github.com/users/smorovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smorovic/subscriptions","organizations_url":"https://api.github.com/users/smorovic/orgs","repos_url":"https://api.github.com/users/smorovic/repos","events_url":"https://api.github.com/users/smorovic/events{/privacy}","received_events_url":"https://api.github.com/users/smorovic/received_events","type":"User","site_admin":false},"created_at":"2015-01-08T10:42:08Z","updated_at":"2015-01-08T10:42:08Z","author_association":"NONE","body":"I managed to fix this in 1.4.2 codebase (this is unchanged in current master).\nTribe needs to check index close state and do the same as if it was deleted:\n\n``` diff\n--- bak/elasticsearch-1.4.2/src/main/java/org/elasticsearch/tribe/TribeService.java 2014-12-16 15:10:48.000000000 +0100\n+++ ./elasticsearch-1.4.2/src/main/java/org/elasticsearch/tribe/TribeService.java   2015-01-07 18:15:57.000000000 +0100\n@@ -259,6 +259,9 @@\n                             if (tribeIndex == null) {\n                                 logger.info(\"[{}] removing index [{}]\", tribeName, index.index());\n                                 removeIndex(blocks, metaData, routingTable, index);\n+                            } else if (tribeIndex.state() == IndexMetaData.State.CLOSE) {\n+                                logger.info(\"[{}] removing closed index [{}]\", tribeName, index.index());\n+                                removeIndex(blocks, metaData, routingTable, index);\n                             } else {\n                                 // always make sure to update the metadata and routing table, in case\n                                 // there are changes in them (new mapping, shards moving from initializing to started)\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69806847","html_url":"https://github.com/elastic/elasticsearch/issues/6411#issuecomment-69806847","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6411","id":69806847,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODA2ODQ3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-01-13T19:46:44Z","updated_at":"2015-01-13T19:46:44Z","author_association":"CONTRIBUTOR","body":"Hi @smorovic \n\nThanks for looking into this.  Would you like to send a PR with your fix? Please could you also add some tests.\n\nthanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70531638","html_url":"https://github.com/elastic/elasticsearch/issues/6411#issuecomment-70531638","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6411","id":70531638,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTMxNjM4","user":{"login":"smorovic","id":5859622,"node_id":"MDQ6VXNlcjU4NTk2MjI=","avatar_url":"https://avatars0.githubusercontent.com/u/5859622?v=4","gravatar_id":"","url":"https://api.github.com/users/smorovic","html_url":"https://github.com/smorovic","followers_url":"https://api.github.com/users/smorovic/followers","following_url":"https://api.github.com/users/smorovic/following{/other_user}","gists_url":"https://api.github.com/users/smorovic/gists{/gist_id}","starred_url":"https://api.github.com/users/smorovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smorovic/subscriptions","organizations_url":"https://api.github.com/users/smorovic/orgs","repos_url":"https://api.github.com/users/smorovic/repos","events_url":"https://api.github.com/users/smorovic/events{/privacy}","received_events_url":"https://api.github.com/users/smorovic/received_events","type":"User","site_admin":false},"created_at":"2015-01-19T17:35:00Z","updated_at":"2015-01-19T17:35:00Z","author_association":"NONE","body":"I was going to make a PR with a test case for this fix, but you were faster in getting it done.\nThanks for taking care of it!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70623418","html_url":"https://github.com/elastic/elasticsearch/issues/6411#issuecomment-70623418","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6411","id":70623418,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjIzNDE4","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T09:04:35Z","updated_at":"2015-01-20T09:04:35Z","author_association":"MEMBER","body":"Hi @smorovic indeed your fix looked good, it was just a matter of testing it. Thanks anyway and sorry to hear you were working on this, I didn't get that.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70624757","html_url":"https://github.com/elastic/elasticsearch/issues/6411#issuecomment-70624757","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6411","id":70624757,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjI0NzU3","user":{"login":"smorovic","id":5859622,"node_id":"MDQ6VXNlcjU4NTk2MjI=","avatar_url":"https://avatars0.githubusercontent.com/u/5859622?v=4","gravatar_id":"","url":"https://api.github.com/users/smorovic","html_url":"https://github.com/smorovic","followers_url":"https://api.github.com/users/smorovic/followers","following_url":"https://api.github.com/users/smorovic/following{/other_user}","gists_url":"https://api.github.com/users/smorovic/gists{/gist_id}","starred_url":"https://api.github.com/users/smorovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smorovic/subscriptions","organizations_url":"https://api.github.com/users/smorovic/orgs","repos_url":"https://api.github.com/users/smorovic/repos","events_url":"https://api.github.com/users/smorovic/events{/privacy}","received_events_url":"https://api.github.com/users/smorovic/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T09:16:52Z","updated_at":"2015-01-20T09:16:52Z","author_association":"NONE","body":"Hi @javanna, no worries, I didn't do much there. I was adding a couple of lines with \"prepareClose() and prepareOpen() calls in the test. Your test cases are certainly more extensive than what I was doing.\n","performed_via_github_app":null}]