{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10267","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10267/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10267/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10267/events","html_url":"https://github.com/elastic/elasticsearch/issues/10267","id":64367559,"node_id":"MDU6SXNzdWU2NDM2NzU1OQ==","number":10267,"title":"Concurrent recoveries setting applies only to target nodes","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"labels":[{"id":837246479,"node_id":"MDU6TGFiZWw4MzcyNDY0Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Allocation","name":":Distributed/Allocation","color":"0e8a16","default":false,"description":"All issues relating to the decision making around placing a shard (both master logic & on the nodes)"},{"id":152510590,"node_id":"MDU6TGFiZWwxNTI1MTA1OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Recovery","name":":Distributed/Recovery","color":"0e8a16","default":false,"description":"Anything around constructing a new shard, either from a local or a remote source."},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2015-03-25T20:41:00Z","updated_at":"2018-03-20T09:50:14Z","closed_at":"2018-03-20T09:50:14Z","author_association":"MEMBER","active_lock_reason":null,"body":"Test case is to use shard allocation filtering to exclude a single node (node2) from the cluster:\n\nConcurrent recoveries set to 1, “target” nodes are throttled because only 1 shard is initializing on each node due to relocation from node 2.  But this does not seem to apply to the “source” node (node2) where it is relocating 3 at a time.\n\n![image](https://cloud.githubusercontent.com/assets/7216393/6834867/16835a86-d2f4-11e4-978b-8b0dab7118e4.png)\n\nCompare this to concurrent recoveries set to 2 (default), “target” nodes have up to 2 shards relocating to each node (consistent with the concurrent recoveries setting).  Which equates to 6 concurrent relocations from node 2 occurring. \n\n![image](https://cloud.githubusercontent.com/assets/7216393/6834874/21052bb0-d2f4-11e4-98fb-dddcff20e248.png)\n\nHave the impression that concurrent recoveries apply to both source and target nodes.  Is there a way to control the concurrent recoveries for the source node?  Or is this is a special case (for exclusions) where the idea is to get the shards off the node to be decommissioned as fast as possible so we are only applying concurrent recoveries to the “target” nodes and not the source ?  \n","closed_by":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"performed_via_github_app":null}