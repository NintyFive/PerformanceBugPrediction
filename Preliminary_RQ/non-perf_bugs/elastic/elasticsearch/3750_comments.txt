[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/24824124","html_url":"https://github.com/elastic/elasticsearch/issues/3750#issuecomment-24824124","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3750","id":24824124,"node_id":"MDEyOklzc3VlQ29tbWVudDI0ODI0MTI0","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-09-20T16:48:20Z","updated_at":"2013-09-20T16:48:20Z","author_association":"MEMBER","body":"Interesting point @nik9000 ! Did you have the chance to play around with this already? How would we sort the snippets coming from different fields though? I guess score is the only option and depends on the specific scoring algo provided by the highlighter implementation. For instance, this wouldn't work using different highlighters per field (e.g. one field with plain and another one with plain). Also, I'd need to look deeper at how the snippets score is computed to make sure this would work cross-field.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/24824932","html_url":"https://github.com/elastic/elasticsearch/issues/3750#issuecomment-24824932","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3750","id":24824932,"node_id":"MDEyOklzc3VlQ29tbWVudDI0ODI0OTMy","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2013-09-20T17:00:01Z","updated_at":"2013-09-20T17:00:11Z","author_association":"CONTRIBUTOR","body":"> Interesting point @nik9000 ! Did you have the chance to play around with this already?\n\nNot really.  I wanted to make sure that what I was doing in the query made sense.  I'll have a look at some point soon though.\n\n> How would we sort the snippets coming from different fields though?\n\nProbably score.  I imagine you could use document order too.  What is the default?  I never use it.\n\n> this wouldn't work using different highlighters per field\n\nIndeed.  This would be an implementation feature strapped on to each highlighter.  At least, that is how it makes sense to me.\n\n> I'd need to look deeper at how the snippets score is computed to make sure this would work cross-field.\n\nYeah.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/24923188","html_url":"https://github.com/elastic/elasticsearch/issues/3750#issuecomment-24923188","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3750","id":24923188,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTIzMTg4","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2013-09-23T14:22:02Z","updated_at":"2013-09-23T14:22:02Z","author_association":"CONTRIBUTOR","body":"I've put together a proof of concept for this with the FVH which github seems to have referenced above.  It is surprisingly well suited for this.  I'm not sure about the plain highlighter though.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/24937121","html_url":"https://github.com/elastic/elasticsearch/issues/3750#issuecomment-24937121","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3750","id":24937121,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTM3MTIx","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2013-09-23T17:25:14Z","updated_at":"2013-09-24T22:04:09Z","author_association":"CONTRIBUTOR","body":"For the FVH the POC works by adding matches from the child field during the matched term identification step then pretty much letting the FVH do its job from there on out.\nFor the Plain Highlighter the POC works by creating a merged token stream from the parent and child fields and feeding it to the highlighter to highlight.  This currently only works with requireFieldMatch = false.\n\nBoth of these implementations look like they will work but I'm not 100% sure they don't cast too broad a net.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/25406721","html_url":"https://github.com/elastic/elasticsearch/issues/3750#issuecomment-25406721","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3750","id":25406721,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDA2NzIx","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2013-09-30T21:12:06Z","updated_at":"2013-09-30T21:12:06Z","author_association":"CONTRIBUTOR","body":"I know it is a lot of work, but would it be possible for someone to have a look at the proof of concept?  I'm happy spend some time implementing this but I'd love to know if I'm on the right track.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/25528141","html_url":"https://github.com/elastic/elasticsearch/issues/3750#issuecomment-25528141","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3750","id":25528141,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTI4MTQx","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2013-10-02T10:14:48Z","updated_at":"2013-10-02T10:14:48Z","author_association":"CONTRIBUTOR","body":"This feature makes a lot of sense to me, but I think the only way to do it correctly would be to fix the highlighters to support several index fields for a single stored field in Lucene. For example, the merged token stream trick can create broken token streams: token streams are supposed to have consistent positions and offsets (meaning that tokens that start at the same position must have the same start offset and tokens that end at the same position must have the same end offset) which won't be the case if the two fields don't use the same tokenizer.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/25537351","html_url":"https://github.com/elastic/elasticsearch/issues/3750#issuecomment-25537351","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3750","id":25537351,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTM3MzUx","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2013-10-02T13:19:30Z","updated_at":"2013-10-02T13:19:30Z","author_association":"CONTRIBUTOR","body":"> This feature makes a lot of sense to me, but I think the only way to do it correctly would be to fix the highlighters to support several index fields for a single stored field in Lucene. For example, the merged token stream trick can create broken token streams: token streams are supposed to have consistent positions and offsets (meaning that tokens that start at the same position must have the same start offset and tokens that end at the same position must have the same end offset) which won't be the case if the two fields don't use the same tokenizer.\n\nThat makes sense to me.  The merged token stream thing felt more like a hack then the way the I had the FVH doing it.  The FVH actually seems more suited to this then the plain highlighter given the way it separates its decision making.  \n\nI'll have another look at all this in a few hours and see what I can come up with.\n\nFor reference, is this worth doing if it is only possible to cleanly implement it in the FVH?  It might turn out that the plain highlighter just isn't amenable to this without a more serious overhaul that might not be worth implementing.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/25604296","html_url":"https://github.com/elastic/elasticsearch/issues/3750#issuecomment-25604296","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3750","id":25604296,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjA0Mjk2","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2013-10-03T07:55:12Z","updated_at":"2013-10-03T07:55:12Z","author_association":"CONTRIBUTOR","body":"> For reference, is this worth doing if it is only possible to cleanly implement it in the FVH? It might turn out that the plain highlighter just isn't amenable to this without a more serious overhaul that might not be worth implementing.\n\nI think it is ok if only fvh supports it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/25924338","html_url":"https://github.com/elastic/elasticsearch/issues/3750#issuecomment-25924338","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3750","id":25924338,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTI0MzM4","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2013-10-08T20:25:51Z","updated_at":"2013-10-08T20:25:51Z","author_association":"CONTRIBUTOR","body":"I had another look at this today.  I was able to get the fvh working pretty well.  I think the plain highlighter is a lost cause though - it just isn't written for this kind of thing.\n\nI went ahead and plumbed a list of fields to combine.  I called it `child_fields` because those fields ought to be children of the main highlighted field.  I'm not in love with the name but that can be fixed.\n\nI'm not sure exactly what to do when the user sets up a bogus child field - right now I don't check for it and let the fvh blindly try to do its thing which either leads to shard failures with string index out of bounds exceptions or funky highlighting.  Not good.\n\nGiven that I'm likely going to give up on doing this in the plain highlighter I might have to revive #3757.  I think I'll want this field combination in my multi-valued fields.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/30750276","html_url":"https://github.com/elastic/elasticsearch/issues/3750#issuecomment-30750276","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3750","id":30750276,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNzUwMjc2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-12-17T13:27:57Z","updated_at":"2013-12-17T13:27:57Z","author_association":"CONTRIBUTOR","body":"@nik9000 Did you have a look at how feasible it would be to support combining fields on the postings highlighter as well?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/30751047","html_url":"https://github.com/elastic/elasticsearch/issues/3750#issuecomment-30751047","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3750","id":30751047,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNzUxMDQ3","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2013-12-17T13:40:02Z","updated_at":"2013-12-17T13:40:02Z","author_association":"CONTRIBUTOR","body":"@clintongormley I was thinking about it but I haven't had time to work on it.  I'd like to, though.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/30751100","html_url":"https://github.com/elastic/elasticsearch/issues/3750#issuecomment-30751100","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3750","id":30751100,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNzUxMTAw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-12-17T13:40:50Z","updated_at":"2013-12-17T13:40:50Z","author_association":"CONTRIBUTOR","body":"i'd like you to as well :)\n\nGo nik go!\n","performed_via_github_app":null}]