[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/309595875","html_url":"https://github.com/elastic/elasticsearch/issues/25303#issuecomment-309595875","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25303","id":309595875,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTU5NTg3NQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-06-19T22:53:36Z","updated_at":"2017-06-19T22:53:36Z","author_association":"MEMBER","body":"Might be similar to #18790.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/309596209","html_url":"https://github.com/elastic/elasticsearch/issues/25303#issuecomment-309596209","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25303","id":309596209,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTU5NjIwOQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-06-19T22:55:30Z","updated_at":"2017-06-19T22:55:30Z","author_association":"MEMBER","body":"> Note: this could also apply to the GCE + Azure discovery plugins as well. I haven't verified if either of these have multiple port support, but I assume they will have equivalent to the EC2 discovery plugin currently.\r\n\r\nGCE supports this already. See https://www.elastic.co/guide/en/elasticsearch/plugins/current/discovery-gce-usage-port.html","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/309598665","html_url":"https://github.com/elastic/elasticsearch/issues/25303#issuecomment-309598665","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25303","id":309598665,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTU5ODY2NQ==","user":{"login":"CpuID","id":916201,"node_id":"MDQ6VXNlcjkxNjIwMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/916201?v=4","gravatar_id":"","url":"https://api.github.com/users/CpuID","html_url":"https://github.com/CpuID","followers_url":"https://api.github.com/users/CpuID/followers","following_url":"https://api.github.com/users/CpuID/following{/other_user}","gists_url":"https://api.github.com/users/CpuID/gists{/gist_id}","starred_url":"https://api.github.com/users/CpuID/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CpuID/subscriptions","organizations_url":"https://api.github.com/users/CpuID/orgs","repos_url":"https://api.github.com/users/CpuID/repos","events_url":"https://api.github.com/users/CpuID/events{/privacy}","received_events_url":"https://api.github.com/users/CpuID/received_events","type":"User","site_admin":false},"created_at":"2017-06-19T23:10:45Z","updated_at":"2017-06-19T23:10:45Z","author_association":"NONE","body":"Note the difference here between *configurable port* and *multiple ports*... I believe the GCE plugin allows you to change the port, but won't interrogate multiple per host?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/309650358","html_url":"https://github.com/elastic/elasticsearch/issues/25303#issuecomment-309650358","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25303","id":309650358,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTY1MDM1OA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-06-20T05:41:24Z","updated_at":"2017-06-20T05:41:24Z","author_association":"MEMBER","body":"@CpuID That's true. Here we also assign only one port. Instead of trying to get the first available port.\r\n\r\n```java\r\nTransportAddress[] addresses = transportService.addressesFromString(address, 1);\r\n```\r\n\r\nFor my understanding, why do you need to run more than one Elasticsearch instance on your EC2 machine?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/309823397","html_url":"https://github.com/elastic/elasticsearch/issues/25303#issuecomment-309823397","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25303","id":309823397,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTgyMzM5Nw==","user":{"login":"CpuID","id":916201,"node_id":"MDQ6VXNlcjkxNjIwMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/916201?v=4","gravatar_id":"","url":"https://api.github.com/users/CpuID","html_url":"https://github.com/CpuID","followers_url":"https://api.github.com/users/CpuID/followers","following_url":"https://api.github.com/users/CpuID/following{/other_user}","gists_url":"https://api.github.com/users/CpuID/gists{/gist_id}","starred_url":"https://api.github.com/users/CpuID/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CpuID/subscriptions","organizations_url":"https://api.github.com/users/CpuID/orgs","repos_url":"https://api.github.com/users/CpuID/repos","events_url":"https://api.github.com/users/CpuID/events{/privacy}","received_events_url":"https://api.github.com/users/CpuID/received_events","type":"User","site_admin":false},"created_at":"2017-06-20T17:02:44Z","updated_at":"2017-06-20T17:02:44Z","author_association":"NONE","body":"My initial motive is to share a single EC2 instance as a master + a data node, but run it in separate JVMs (to minimise risk of STW GC's on data nodes impacting master operations for the overall cluster). But I am sure there are other motives for running separate JVMs, such as running cross-site-search/tribe JVMs separate to data nodes, etc.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/309862235","html_url":"https://github.com/elastic/elasticsearch/issues/25303#issuecomment-309862235","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25303","id":309862235,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTg2MjIzNQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-06-20T19:25:33Z","updated_at":"2017-06-20T19:25:33Z","author_association":"MEMBER","body":"Fair enough. Thanks for the explanation.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312293745","html_url":"https://github.com/elastic/elasticsearch/issues/25303#issuecomment-312293745","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25303","id":312293745,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjI5Mzc0NQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-06-30T15:10:30Z","updated_at":"2017-06-30T15:10:30Z","author_association":"MEMBER","body":"@clintongormley Can I label this one as `adoptme`? I think it makes sense. May be that instead of scanning one single port (9300), we can ask either for a `discovery.ec2.ports` setting (default to `1`), or ask for an explicit port or range of ports like `9300-9302` (default to `9300`) ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312298119","html_url":"https://github.com/elastic/elasticsearch/issues/25303#issuecomment-312298119","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25303","id":312298119,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjI5ODExOQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-06-30T15:27:46Z","updated_at":"2017-06-30T15:27:46Z","author_association":"MEMBER","body":"We discussed this during Fix-it-Friday. Two thoughts:\r\n \r\nIn general, we think it's better to run a single node per host. Especially in cloud environments where you can easily size hosts appropriately. The use-case here for running a dedicated master node of the same host as a data node is not one that we encourage; the arguments that you given regarding doing this to avoid a STW pause on the data node from impacting the master node do not really hold up well. If the data node is stealing resources (CPU, etc.) from the master node that master node is still going to be prone to impact from being on the same host as the data node. This is, of course, assuming that some form of process isolation is not being used, for example, cgroups; but then in that case it would be better to just run separate hosts.\r\n\r\nWithout a valid use-case, I'm not inclined to make any changes here. If there were a valid use-case, I do not think we would make this change by allowing a port range, but rather specifying specific ports.","performed_via_github_app":null}]