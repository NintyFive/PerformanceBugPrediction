[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304220632","html_url":"https://github.com/elastic/elasticsearch/issues/24898#issuecomment-304220632","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24898","id":304220632,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDIyMDYzMg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-05-26T08:12:47Z","updated_at":"2017-05-26T08:12:47Z","author_association":"MEMBER","body":"What do you mean by partial updates? `doc` is doc values, ie already indexed values.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304221058","html_url":"https://github.com/elastic/elasticsearch/issues/24898#issuecomment-304221058","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24898","id":304221058,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDIyMTA1OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-05-26T08:15:01Z","updated_at":"2017-05-26T08:15:01Z","author_association":"CONTRIBUTOR","body":"No, I mean the `doc` parameter which exists in the update query, as in:\r\n\r\n```\r\nPOST index/type/id/_update\r\n{\r\n  \"doc\": {\r\n    \"status\": \"published\"\r\n  }\r\n}\r\n```\r\n\r\nThis request would merge the `doc` object with the `_source`. It's currently not supported by update-by-query","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304221962","html_url":"https://github.com/elastic/elasticsearch/issues/24898#issuecomment-304221962","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24898","id":304221962,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDIyMTk2Mg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-05-26T08:19:27Z","updated_at":"2017-05-26T08:19:27Z","author_association":"MEMBER","body":"Ok, thanks for the clarification. So this would happen outside of the script itself.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/331631328","html_url":"https://github.com/elastic/elasticsearch/issues/24898#issuecomment-331631328","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24898","id":331631328,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTYzMTMyOA==","user":{"login":"pozhidaevak","id":1496874,"node_id":"MDQ6VXNlcjE0OTY4NzQ=","avatar_url":"https://avatars2.githubusercontent.com/u/1496874?v=4","gravatar_id":"","url":"https://api.github.com/users/pozhidaevak","html_url":"https://github.com/pozhidaevak","followers_url":"https://api.github.com/users/pozhidaevak/followers","following_url":"https://api.github.com/users/pozhidaevak/following{/other_user}","gists_url":"https://api.github.com/users/pozhidaevak/gists{/gist_id}","starred_url":"https://api.github.com/users/pozhidaevak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pozhidaevak/subscriptions","organizations_url":"https://api.github.com/users/pozhidaevak/orgs","repos_url":"https://api.github.com/users/pozhidaevak/repos","events_url":"https://api.github.com/users/pozhidaevak/events{/privacy}","received_events_url":"https://api.github.com/users/pozhidaevak/received_events","type":"User","site_admin":false},"created_at":"2017-09-23T12:39:31Z","updated_at":"2017-09-23T12:39:31Z","author_association":"CONTRIBUTOR","body":"Hi,\r\nI want to make this issue my first contribution to the project. Has anyone started work on this issue? Is it ok if I start working on it? It will probably take some time for me to understand the issue and familiarise myself with the code.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/331909414","html_url":"https://github.com/elastic/elasticsearch/issues/24898#issuecomment-331909414","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24898","id":331909414,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTkwOTQxNA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-09-25T15:00:46Z","updated_at":"2017-09-25T15:00:46Z","author_association":"CONTRIBUTOR","body":"This is two issues:\r\n1. Update-by-query doesn't support `doc` style updates like those mentioned [here](https://github.com/elastic/elasticsearch/issues/24898#issuecomment-304221058).\r\n2. Update-by-query doesn't support a short form for specifying the script.\r\n\r\nThe reasoning behind the first point is that we wanted to keep update-by-query simple. We can do it though. I don't think solving the first point would be a good first contribution, but it is a thing we can do.\r\n\r\nThe second point is fine for a first contribution because it is just extra parsing without any additional changes. I don't know why it doesn't work now but to fix it I'd hunt down how we do parsing with `_update` and see if we can use that for `_update_by_query`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/333078236","html_url":"https://github.com/elastic/elasticsearch/issues/24898#issuecomment-333078236","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24898","id":333078236,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzA3ODIzNg==","user":{"login":"pozhidaevak","id":1496874,"node_id":"MDQ6VXNlcjE0OTY4NzQ=","avatar_url":"https://avatars2.githubusercontent.com/u/1496874?v=4","gravatar_id":"","url":"https://api.github.com/users/pozhidaevak","html_url":"https://github.com/pozhidaevak","followers_url":"https://api.github.com/users/pozhidaevak/followers","following_url":"https://api.github.com/users/pozhidaevak/following{/other_user}","gists_url":"https://api.github.com/users/pozhidaevak/gists{/gist_id}","starred_url":"https://api.github.com/users/pozhidaevak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pozhidaevak/subscriptions","organizations_url":"https://api.github.com/users/pozhidaevak/orgs","repos_url":"https://api.github.com/users/pozhidaevak/repos","events_url":"https://api.github.com/users/pozhidaevak/events{/privacy}","received_events_url":"https://api.github.com/users/pozhidaevak/received_events","type":"User","site_admin":false},"created_at":"2017-09-29T09:27:00Z","updated_at":"2017-09-29T09:27:00Z","author_association":"CONTRIBUTOR","body":"Thanks, @nik9000. \r\nIt seems that `_update_by_query` uses static function `RestUpdateByQueryAction::parseScript(Map<String, Object>)` to parse script tag. This function is used only in this place. \r\nI haven't found parsing of `script` field in `RestUpdateAction` class. \r\nI'll try to find the solution that reuses the same code as in other parts of the project.\r\nFor now, I think the best way is to initialize `XContentParser` and use `Script.parse()` function. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/374629647","html_url":"https://github.com/elastic/elasticsearch/issues/24898#issuecomment-374629647","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24898","id":374629647,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NDYyOTY0Nw==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2018-03-20T14:59:30Z","updated_at":"2018-03-20T14:59:30Z","author_association":"MEMBER","body":"This should be closed by #26841","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/374898682","html_url":"https://github.com/elastic/elasticsearch/issues/24898#issuecomment-374898682","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24898","id":374898682,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NDg5ODY4Mg==","user":{"login":"olee","id":6547794,"node_id":"MDQ6VXNlcjY1NDc3OTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/6547794?v=4","gravatar_id":"","url":"https://api.github.com/users/olee","html_url":"https://github.com/olee","followers_url":"https://api.github.com/users/olee/followers","following_url":"https://api.github.com/users/olee/following{/other_user}","gists_url":"https://api.github.com/users/olee/gists{/gist_id}","starred_url":"https://api.github.com/users/olee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olee/subscriptions","organizations_url":"https://api.github.com/users/olee/orgs","repos_url":"https://api.github.com/users/olee/repos","events_url":"https://api.github.com/users/olee/events{/privacy}","received_events_url":"https://api.github.com/users/olee/received_events","type":"User","site_admin":false},"created_at":"2018-03-21T10:53:17Z","updated_at":"2018-03-21T10:53:17Z","author_association":"NONE","body":"And what about the `doc` parameter that `_update` accepts but not `_update_by_query`?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401849333","html_url":"https://github.com/elastic/elasticsearch/issues/24898#issuecomment-401849333","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24898","id":401849333,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTg0OTMzMw==","user":{"login":"3lnc","id":1926776,"node_id":"MDQ6VXNlcjE5MjY3NzY=","avatar_url":"https://avatars2.githubusercontent.com/u/1926776?v=4","gravatar_id":"","url":"https://api.github.com/users/3lnc","html_url":"https://github.com/3lnc","followers_url":"https://api.github.com/users/3lnc/followers","following_url":"https://api.github.com/users/3lnc/following{/other_user}","gists_url":"https://api.github.com/users/3lnc/gists{/gist_id}","starred_url":"https://api.github.com/users/3lnc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/3lnc/subscriptions","organizations_url":"https://api.github.com/users/3lnc/orgs","repos_url":"https://api.github.com/users/3lnc/repos","events_url":"https://api.github.com/users/3lnc/events{/privacy}","received_events_url":"https://api.github.com/users/3lnc/received_events","type":"User","site_admin":false},"created_at":"2018-07-02T15:49:09Z","updated_at":"2018-07-02T15:49:09Z","author_association":"NONE","body":"@nik9000 any updates on support for `doc`?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401879219","html_url":"https://github.com/elastic/elasticsearch/issues/24898#issuecomment-401879219","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24898","id":401879219,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTg3OTIxOQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2018-07-02T17:36:11Z","updated_at":"2018-07-02T17:36:11Z","author_association":"CONTRIBUTOR","body":"> And what about the doc parameter that _update accepts but not _update_by_query?\r\n\r\nWe've [talked](https://github.com/elastic/elasticsearch/issues/20135) about this in the past and not been too keen on it.","performed_via_github_app":null}]