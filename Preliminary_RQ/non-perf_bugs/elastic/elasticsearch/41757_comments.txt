[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/488746461","html_url":"https://github.com/elastic/elasticsearch/issues/41757#issuecomment-488746461","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41757","id":488746461,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4ODc0NjQ2MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-05-02T16:46:22Z","updated_at":"2019-05-02T16:46:22Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-analytics-geo","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/496664536","html_url":"https://github.com/elastic/elasticsearch/issues/41757#issuecomment-496664536","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41757","id":496664536,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjY2NDUzNg==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2019-05-28T19:54:47Z","updated_at":"2019-05-28T19:54:47Z","author_association":"CONTRIBUTOR","body":"Thanks for opening this, I'll work on it this week. It's definitely something that would be beneficial for a lot of use cases.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/497044786","html_url":"https://github.com/elastic/elasticsearch/issues/41757#issuecomment-497044786","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41757","id":497044786,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NzA0NDc4Ng==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2019-05-29T17:59:49Z","updated_at":"2019-05-29T17:59:49Z","author_association":"CONTRIBUTOR","body":"@polyfractal @colings86 my assumption here is we want to support same class of intervals as Date Histogram Aggregation, fixed intervals as well as calendar. do you have a different opinion?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/497051663","html_url":"https://github.com/elastic/elasticsearch/issues/41757#issuecomment-497051663","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41757","id":497051663,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NzA1MTY2Mw==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2019-05-29T18:18:09Z","updated_at":"2019-05-29T18:18:09Z","author_association":"MEMBER","body":"Hmm that's an interesting question.  What does the auto date histo do right now for intervals since the user only specifies number of buckets?  Calendar?\r\n\r\nI think at a minimum the `min_interval` setting should match whatever the auto date histo is doing internally right now.  Supporting both would probably depend on if there is a way for the user to specify which type of bucket is used.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/497052886","html_url":"https://github.com/elastic/elasticsearch/issues/41757#issuecomment-497052886","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41757","id":497052886,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NzA1Mjg4Ng==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2019-05-29T18:21:32Z","updated_at":"2019-05-29T18:21:43Z","author_association":"CONTRIBUTOR","body":"believe we use a [fixed](https://github.com/elastic/elasticsearch/pull/28993/files#diff-3e11fa29e6680e178fe15d517d160b78R119) calculation for roundings.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/497064157","html_url":"https://github.com/elastic/elasticsearch/issues/41757#issuecomment-497064157","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41757","id":497064157,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NzA2NDE1Nw==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2019-05-29T18:50:51Z","updated_at":"2019-05-29T18:50:51Z","author_association":"MEMBER","body":"Ah, interesting.  It probably makes sense to start with fixed intervals then, and save adding calendar support for a different enhancement.\r\n\r\nIt does make the API a bit tricky.  Do we say `min_fixed_interval`? Or maybe `interval_mode: fixed` and then it's implied that `buckets` and `min_interval` are in that mode?\r\n\r\nAnother interesting bit is that the fixed time parsing used by date_histo and others only [parses up to `days` in fixed time](https://github.com/elastic/elasticsearch/blob/master/libs/core/src/main/java/org/elasticsearch/common/unit/TimeValue.java#L280-L303), whereas auto_date_histo can go up to months/years. The path of least resistance there is to probably add months/years to the fixed time parsing (using the same definitions that auto date histo uses)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/497087338","html_url":"https://github.com/elastic/elasticsearch/issues/41757#issuecomment-497087338","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41757","id":497087338,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NzA4NzMzOA==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2019-05-29T19:59:36Z","updated_at":"2019-05-29T19:59:36Z","author_association":"CONTRIBUTOR","body":"hmmm. it feels a bit weird to have `interval_mode: ` where `fixed` is the only option (\"you can have any color you want, as long as you want black\"), but, if we do add a different mode, then having the parameter named `min_fixed_interval` is bad because we'll want to rename it.\r\n\r\nSo my vote is that we make it clear in the docs that `min_interval` is calculated using fixed (which is how the agg works today anyways), and we can add a mode if we add calendar intervals.\r\n\r\nWDYT?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/497228148","html_url":"https://github.com/elastic/elasticsearch/issues/41757#issuecomment-497228148","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41757","id":497228148,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NzIyODE0OA==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2019-05-30T07:02:49Z","updated_at":"2019-05-30T07:02:49Z","author_association":"MEMBER","body":"The auto date histogram builder uses only calendar intervals (see https://github.com/elastic/elasticsearch/blob/master/server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/AutoDateHistogramAggregationBuilder.java#L72 where we create the roundings). \r\n\r\nWe can only use calendar intervals because merging lower roundings into higher ones would not work well with fixed intervals. This is because the length of a day and moreover the length of a month cannot be assumed regular so if we tried to merge hours into days or days into months we would end up with accumulated error which would make the error in the final result too high.\r\n\r\nI agree that an `interval_mode` option doesn't make much sense while we only support one option so I think we should document that the intervals are calendar based only.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/497228842","html_url":"https://github.com/elastic/elasticsearch/issues/41757#issuecomment-497228842","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41757","id":497228842,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NzIyODg0Mg==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2019-05-30T07:05:42Z","updated_at":"2019-05-30T07:05:42Z","author_association":"MEMBER","body":"I also think we should make the `min_interval` option only take the unit and not a multiple of the unit (so you could specfy `min_interval: hours` as opposed to `min_interval: 5h`. This is for two reasons:\r\n* It save a lot of complexity since we only need to care about min_interval in the aggregator and not in the `internalAutoDateHistogram`\r\n* It saves the user from having to know the specific multiples of the unit we support and therefore cannot pick a `min_interval` we don't support","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/497431969","html_url":"https://github.com/elastic/elasticsearch/issues/41757#issuecomment-497431969","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41757","id":497431969,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NzQzMTk2OQ==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2019-05-30T18:21:39Z","updated_at":"2019-05-30T18:21:39Z","author_association":"CONTRIBUTOR","body":"makes sense @colings86, thanks for clarifying. I was wrong about the fixed calcs, it makes sense now, given it takes a timezone.","performed_via_github_app":null}]