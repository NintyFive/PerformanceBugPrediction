{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/21122","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21122/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21122/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21122/events","html_url":"https://github.com/elastic/elasticsearch/issues/21122","id":185260415,"node_id":"MDU6SXNzdWUxODUyNjA0MTU=","number":21122,"title":"Failed to start tribe node","user":{"login":"obudiman","id":22019114,"node_id":"MDQ6VXNlcjIyMDE5MTE0","avatar_url":"https://avatars3.githubusercontent.com/u/22019114?v=4","gravatar_id":"","url":"https://api.github.com/users/obudiman","html_url":"https://github.com/obudiman","followers_url":"https://api.github.com/users/obudiman/followers","following_url":"https://api.github.com/users/obudiman/following{/other_user}","gists_url":"https://api.github.com/users/obudiman/gists{/gist_id}","starred_url":"https://api.github.com/users/obudiman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/obudiman/subscriptions","organizations_url":"https://api.github.com/users/obudiman/orgs","repos_url":"https://api.github.com/users/obudiman/repos","events_url":"https://api.github.com/users/obudiman/events{/privacy}","received_events_url":"https://api.github.com/users/obudiman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2016-10-25T23:31:09Z","updated_at":"2016-11-28T18:47:51Z","closed_at":"2016-11-16T18:05:14Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: \"5.0.0-rc1\"\n\n**Plugins installed**: [ingest-geoip@5.0.0-rc1, ingest-user-agent@5.0.0-rc1, x-pack@5.0.0-rc1]\n\n**JVM version**: OpenJDK \"1.8.0_101\"\n\n**OS version**: Linux 4.4.11-23.53.amzn1.x86_64\n\n**Description of the problem including expected versus actual behavior**:\n\nWe tried to set up a tribe node to connect to an existing ES cluster (which is working just fine) but the node failed to start and the following error debug messages appears whenever we try to start the node:\n\n> [2016-10-26T10:10:12,814][DEBUG][n.u.i.PlatformDependent0 ] java.nio.Buffer.address: unavailable\n> java.security.AccessControlException: access denied (\"java.lang.RuntimePermission\" \"accessDeclaredMembers\")\n> ...\n> [2016-10-26T10:10:12,942][DEBUG][n.u.NetUtil              ] Failed to get SOMAXCONN from: /proc/sys/net/core/somaxconn\n> java.security.AccessControlException: access denied (\"java.io.FilePermission\" \"/proc/sys/net/core/somaxconn\" \"read\")\n> ...\n> Exception: java.security.AccessControlException thrown from the UncaughtExceptionHandler in thread \"main\"\n> Exception: java.security.AccessControlException thrown from the UncaughtExceptionHandler in thread \"Thread-2\"\n\nNot really sure if we missed anything, but it seems to be a permission issue so we've tried to run the ES tribe node as a root and also tried to reinstall the ES but we still bumped to the same error. There is no issue if we started the node as a normal data node as part of the cluster.\n\n**elasticsearch.yml**\n\n```\nnetwork.host: 0.0.0.0\nhttp.port: 9200\ntransport.tcp.port: 9300\nnode.name: ${HOSTNAME}\ndiscovery.zen.minimum_master_nodes: 2\nbootstrap.memory_lock: true\nindices.fielddata.cache.size: 50%\nindices.queries.cache.size: 20%\nxpack.security.audit.enabled: true\nxpack.security.enabled: true\nxpack.monitoring.enabled: true\nxpack.watcher.enabled: true\n\nxpack.security.authc.realms.file.type: file\nxpack.security.authc.realms.file.order: 0\nxpack.security.authc.realms.file.enabled: false\nxpack.security.authc.realms.native1.type: native\nxpack.security.authc.realms.native1.order: 1\nxpack.security.authc.realms.native1.enabled: true\nxpack.security.authc.realms.ldap1.type: ldap\nxpack.security.authc.realms.ldap1.order: 2\nxpack.security.authc.realms.ldap1.enabled: true\nxpack.security.authc.realms.ldap1.url: ldap://ldap.dcma.epicon.com:389\nxpack.security.authc.realms.ldap1.bind_dn: cn=ldapsearch,ou=users,o=local,dc=dcmaproxy,dc=epicon,dc=com\nxpack.security.authc.realms.ldap1.bind_password: <XXX>\nxpack.security.authc.realms.ldap1.user_search.base_dn: o=external,dc=dcmaproxy,dc=epicon,dc=com\nxpack.security.authc.realms.ldap1.user_search.attribute: sAMAcountName\nxpack.security.authc.realms.ldap1.group_search.base_dn: o=external,dc=dcmaproxy,dc=epicon,dc=com\nxpack.security.authc.realms.ldap1.files.role_mapping: /etc/elasticsearch/x-pack/role_mapping.yml\nxpack.security.authc.realms.ldap1.unmapped_groups_as_roles: false\n\nnode.master: false\nnode.data: false\ntribe.on_conflict: prefer_dc\ntribe.dc.cluster.name: epicon_es_dc\ntribe.dc.network.host: 192.167.168.95\ntribe.dc.discovery.zen.ping.unicast.hosts: [\"192.167.168.91\", \"192.167.168.92\", \"192.167.168.93\", \"192.167.168.95\n```\n\n**Steps to reproduce**:\n1. Set the ES node as a tribe node as configured above\n2. Enable debug level logging and start the tribe node\n3. Check log\n\n**Provide logs (if relevant)**:\n[elasticsearch.txt](https://github.com/elastic/elasticsearch/files/551997/elasticsearch.txt)\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}