{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15529","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15529/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15529/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15529/events","html_url":"https://github.com/elastic/elasticsearch/issues/15529","id":122898976,"node_id":"MDU6SXNzdWUxMjI4OTg5NzY=","number":15529,"title":"Snapshot repository disappears during upgrade","user":{"login":"robin13","id":174291,"node_id":"MDQ6VXNlcjE3NDI5MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/174291?v=4","gravatar_id":"","url":"https://api.github.com/users/robin13","html_url":"https://github.com/robin13","followers_url":"https://api.github.com/users/robin13/followers","following_url":"https://api.github.com/users/robin13/following{/other_user}","gists_url":"https://api.github.com/users/robin13/gists{/gist_id}","starred_url":"https://api.github.com/users/robin13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robin13/subscriptions","organizations_url":"https://api.github.com/users/robin13/orgs","repos_url":"https://api.github.com/users/robin13/repos","events_url":"https://api.github.com/users/robin13/events{/privacy}","received_events_url":"https://api.github.com/users/robin13/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2015-12-18T07:45:12Z","updated_at":"2016-01-17T15:46:20Z","closed_at":"2015-12-22T16:08:24Z","author_association":"MEMBER","active_lock_reason":null,"body":"On my home/test cluster with one node and snapshot to local filesystem, the backup repository definition disappeared when upgrading from 2.0.0 -> 2.1.0, and again when upgrading from 2.1.0 -> 2.1.1\n\nThe snapshot is created like this:\n\n```\ncurl -XPUT 'http://rcl-nas:9200/_snapshot/backup' -d '{\n    \"type\": \"fs\",\n    \"settings\":{\n        \"compression\": true,\n        \"location\": \"/mnt/raid/elasticsearch-snapshots\"\n    }\n}'\n```\n\nNo errors referencing repositories are in the logs.\n\nI was able to re-create the repository again with exactly the same configuration, and the previous snapshots still exist.\n\nI have tried to reproduce this on other test cluster, but have not been able to provoke it...\n","closed_by":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"performed_via_github_app":null}