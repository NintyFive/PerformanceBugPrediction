{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/40264","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40264/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40264/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40264/events","html_url":"https://github.com/elastic/elasticsearch/issues/40264","id":423316191,"node_id":"MDU6SXNzdWU0MjMzMTYxOTE=","number":40264,"title":"Basic model on DFR similarity documents options no longer accepted","user":{"login":"Mpdreamz","id":245275,"node_id":"MDQ6VXNlcjI0NTI3NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/245275?v=4","gravatar_id":"","url":"https://api.github.com/users/Mpdreamz","html_url":"https://github.com/Mpdreamz","followers_url":"https://api.github.com/users/Mpdreamz/followers","following_url":"https://api.github.com/users/Mpdreamz/following{/other_user}","gists_url":"https://api.github.com/users/Mpdreamz/gists{/gist_id}","starred_url":"https://api.github.com/users/Mpdreamz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mpdreamz/subscriptions","organizations_url":"https://api.github.com/users/Mpdreamz/orgs","repos_url":"https://api.github.com/users/Mpdreamz/repos","events_url":"https://api.github.com/users/Mpdreamz/events{/privacy}","received_events_url":"https://api.github.com/users/Mpdreamz/received_events","type":"User","site_admin":false},"labels":[{"id":418189364,"node_id":"MDU6TGFiZWw0MTgxODkzNjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Ranking","name":":Search/Ranking","color":"0e8a16","default":false,"description":"Scoring, rescoring, rank evaluation."},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-03-20T15:26:56Z","updated_at":"2019-03-29T08:34:51Z","closed_at":"2019-03-29T08:34:51Z","author_association":"MEMBER","active_lock_reason":null,"body":"https://www.elastic.co/guide/en/elasticsearch/reference/7.0/index-modules-similarity.html\r\n\r\n`basic_model` still documents the following options:: `be, d, g, if, in, ine and p.` However atleast `d` is no longer supported. \r\n\r\nThe docs mention:\r\n\r\n> be, d and p should be avoided in practice as they might return scores that are equal to 0 or infinite with terms that do not meet the expected random distribution.\r\n\r\nBut it seems these options can no longer be used\r\n\r\n```json\r\n{\r\n  \"error\" : {\r\n    \"root_cause\" : [\r\n      {\r\n        \"type\" : \"illegal_argument_exception\",\r\n        \"reason\" : \"Basic model [d] isn't supported anymore, please use another model.\",\r\n        \"stack_trace\" : \"[Basic model [d] isn't supported anymore, please use another model.]; nested: IllegalArgumentException[Basic model [d] isn't supported anymore, please use another model.];\\r\\n\\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:639)\\r\\n\\tat org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:567)\\r\\n\\tat org.elasticsearch.rest.BytesRestResponse.build(BytesRestResponse.java:138)\\r\\n\\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:96)\\r\\n\\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:91)\\r\\n\\tat org.elasticsearch.rest.action.RestActionListener.onFailure(RestActionListener.java:58)\\r\\n\\tat org.elasticsearch.action.support.TransportAction$1.onFailure(TransportAction.java:74)\\r\\n\\tat org.elasticsearch.action.support.master.TransportMasterNodeAction$AsyncSingleAction$1.onFailure(TransportMasterNodeAction.java:201)\\r\\n\\tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:69)\\r\\n\\tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:69)\\r\\n\\tat org.elasticsearch.cluster.AckedClusterStateUpdateTask.onFailure(AckedClusterStateUpdateTask.java:79)\\r\\n\\tat org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$IndexCreationTask.onFailure(MetaDataCreateIndexService.java:612)\\r\\n\\tat org.elasticsearch.cluster.service.MasterService$SafeClusterStateTaskListener.onFailure(MasterService.java:499)\\r\\n\\tat org.elasticsearch.cluster.service.MasterService$TaskOutputs.notifyFailedTasks(MasterService.java:432)\\r\\n\\tat org.elasticsearch.cluster.service.MasterService.runTasks(MasterService.java:211)\\r\\n\\tat org.elasticsearch.cluster.service.MasterService$Batcher.run(MasterService.java:142)\\r\\n\\tat org.elasticsearch.cluster.service.TaskBatcher.runIfNotProcessed(TaskBatcher.java:150)\\r\\n\\tat org.elasticsearch.cluster.service.TaskBatcher$BatchedTask.run(TaskBatcher.java:188)\\r\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:681)\\r\\n\\tat org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:252)\\r\\n\\tat org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:215)\\r\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\r\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\r\\n\\tat java.base/java.lang.Thread.run(Thread.java:834)\\r\\nCaused by: java.lang.IllegalArgumentException: Basic model [d] isn't supported anymore, please use another model.\\r\\n\\tat org.elasticsearch.index.similarity.SimilarityProviders.parseBasicModel(SimilarityProviders.java:143)\\r\\n\\tat org.elasticsearch.index.similarity.SimilarityProviders.createDfrSimilarity(SimilarityProviders.java:306)\\r\\n\\tat org.elasticsearch.index.similarity.SimilarityService.lambda$static$10(SimilarityService.java:104)\\r\\n\\tat org.elasticsearch.index.similarity.SimilarityService.<init>(SimilarityService.java:141)\\r\\n\\tat org.elasticsearch.index.IndexModule.newIndexService(IndexModule.java:398)\\r\\n\\tat org.elasticsearch.indices.IndicesService.createIndexService(IndicesService.java:518)\\r\\n\\tat org.elasticsearch.indices.IndicesService.createIndex(IndicesService.java:467)\\r\\n\\tat org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$IndexCreationTask.execute(MetaDataCreateIndexService.java:471)\\r\\n\\tat org.elasticsearch.cluster.ClusterStateUpdateTask.execute(ClusterStateUpdateTask.java:47)\\r\\n\\tat org.elasticsearch.cluster.service.MasterService.executeTasks(MasterService.java:687)\\r\\n\\tat org.elasticsearch.cluster.service.MasterService.calculateTaskOutputs(MasterService.java:310)\\r\\n\\tat org.elasticsearch.cluster.service.MasterService.runTasks(MasterService.java:210)\\r\\n\\t... 9 more\\r\\n\"\r\n      }\r\n    ],\r\n    \"type\" : \"illegal_argument_exception\",\r\n    \"reason\" : \"Basic model [d] isn't supported anymore, please use another model.\",\r\n    \"stack_trace\" : \"java.lang.IllegalArgumentException: Basic model [d] isn't supported anymore, please use another model.\\r\\n\\tat org.elasticsearch.index.similarity.SimilarityProviders.parseBasicModel(SimilarityProviders.java:143)\\r\\n\\tat org.elasticsearch.index.similarity.SimilarityProviders.createDfrSimilarity(SimilarityProviders.java:306)\\r\\n\\tat org.elasticsearch.index.similarity.SimilarityService.lambda$static$10(SimilarityService.java:104)\\r\\n\\tat org.elasticsearch.index.similarity.SimilarityService.<init>(SimilarityService.java:141)\\r\\n\\tat org.elasticsearch.index.IndexModule.newIndexService(IndexModule.java:398)\\r\\n\\tat org.elasticsearch.indices.IndicesService.createIndexService(IndicesService.java:518)\\r\\n\\tat org.elasticsearch.indices.IndicesService.createIndex(IndicesService.java:467)\\r\\n\\tat org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$IndexCreationTask.execute(MetaDataCreateIndexService.java:471)\\r\\n\\tat org.elasticsearch.cluster.ClusterStateUpdateTask.execute(ClusterStateUpdateTask.java:47)\\r\\n\\tat org.elasticsearch.cluster.service.MasterService.executeTasks(MasterService.java:687)\\r\\n\\tat org.elasticsearch.cluster.service.MasterService.calculateTaskOutputs(MasterService.java:310)\\r\\n\\tat org.elasticsearch.cluster.service.MasterService.runTasks(MasterService.java:210)\\r\\n\\tat org.elasticsearch.cluster.service.MasterService$Batcher.run(MasterService.java:142)\\r\\n\\tat org.elasticsearch.cluster.service.TaskBatcher.runIfNotProcessed(TaskBatcher.java:150)\\r\\n\\tat org.elasticsearch.cluster.service.TaskBatcher$BatchedTask.run(TaskBatcher.java:188)\\r\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:681)\\r\\n\\tat org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:252)\\r\\n\\tat org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:215)\\r\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\r\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\r\\n\\tat java.base/java.lang.Thread.run(Thread.java:834)\\r\\n\"\r\n  },\r\n  \"status\" : 400\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}