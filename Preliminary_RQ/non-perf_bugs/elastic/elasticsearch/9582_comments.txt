[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73476932","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-73476932","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":73476932,"node_id":"MDEyOklzc3VlQ29tbWVudDczNDc2OTMy","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2015-02-09T09:08:46Z","updated_at":"2015-02-09T09:08:46Z","author_association":"MEMBER","body":"It looks like there are 2 things:\n\nThe connection refused exception indicates that a node cannot connect to another node. This usually happen when 1) the configuration is wrong (check again the configuration, specially multicast/unicast settings), or 2) the other node is running but not reachable (check anything that can block communication between the nodes, usually a firewall rule) or 3) the node is down (not started, or crashed... log messages and stacktrace can help here).\n\nThe second thing is the `permission denied` that has been reported before : https://github.com/elasticsearch/elasticsearch/issues/4978\n\nCan you check if the file `/proc/sys/vm/max_map_count` exists please?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76511600","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-76511600","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":76511600,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTExNjAw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-02-28T05:23:36Z","updated_at":"2015-02-28T05:23:36Z","author_association":"CONTRIBUTOR","body":"@shastox Any more info here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76593511","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-76593511","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":76593511,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTkzNTEx","user":{"login":"shastox","id":1684567,"node_id":"MDQ6VXNlcjE2ODQ1Njc=","avatar_url":"https://avatars0.githubusercontent.com/u/1684567?v=4","gravatar_id":"","url":"https://api.github.com/users/shastox","html_url":"https://github.com/shastox","followers_url":"https://api.github.com/users/shastox/followers","following_url":"https://api.github.com/users/shastox/following{/other_user}","gists_url":"https://api.github.com/users/shastox/gists{/gist_id}","starred_url":"https://api.github.com/users/shastox/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shastox/subscriptions","organizations_url":"https://api.github.com/users/shastox/orgs","repos_url":"https://api.github.com/users/shastox/repos","events_url":"https://api.github.com/users/shastox/events{/privacy}","received_events_url":"https://api.github.com/users/shastox/received_events","type":"User","site_admin":false},"created_at":"2015-03-01T11:50:59Z","updated_at":"2015-03-01T11:50:59Z","author_association":"NONE","body":"Sorry.\n\nALL configuration is default, becide of:\n\n/etc/default/elasticsearch: ES_HEAP_SIZE=4g\n/var/elasticsearch/logging.yml: es.logger.level: DEBUG\n\nThere are no nodes.\n\nES works ~20 days withouth crashing, but yesterday it down every 5-10mins. This problem is in few diffrent servers. \n\n/proc/sys/vm/max_map_count - exists: 65530\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76947888","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-76947888","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":76947888,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTQ3ODg4","user":{"login":"adamcstephens","id":2071575,"node_id":"MDQ6VXNlcjIwNzE1NzU=","avatar_url":"https://avatars2.githubusercontent.com/u/2071575?v=4","gravatar_id":"","url":"https://api.github.com/users/adamcstephens","html_url":"https://github.com/adamcstephens","followers_url":"https://api.github.com/users/adamcstephens/followers","following_url":"https://api.github.com/users/adamcstephens/following{/other_user}","gists_url":"https://api.github.com/users/adamcstephens/gists{/gist_id}","starred_url":"https://api.github.com/users/adamcstephens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamcstephens/subscriptions","organizations_url":"https://api.github.com/users/adamcstephens/orgs","repos_url":"https://api.github.com/users/adamcstephens/repos","events_url":"https://api.github.com/users/adamcstephens/events{/privacy}","received_events_url":"https://api.github.com/users/adamcstephens/received_events","type":"User","site_admin":false},"created_at":"2015-03-03T13:50:05Z","updated_at":"2015-03-03T13:51:07Z","author_association":"NONE","body":"I've been experiencing this same issue on CentOS 6 on top of Virtuozzo (Parallels openvz). I debugged this for a few days before giving up and moving the ES cluster to KVM.\n\nSomething has changed, either in the VZ or ES stack, or both, to cause this to no longer be stable. We ran this configuration for 10 months before it started crashing consistently but at a random runtime. Other JVMs, including tomcat and logstash, are not experiencing this issue.\n\nI have a dev system, and control of the VZ stack if there are any suggested troubleshooting steps.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76955664","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-76955664","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":76955664,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTU1NjY0","user":{"login":"shastox","id":1684567,"node_id":"MDQ6VXNlcjE2ODQ1Njc=","avatar_url":"https://avatars0.githubusercontent.com/u/1684567?v=4","gravatar_id":"","url":"https://api.github.com/users/shastox","html_url":"https://github.com/shastox","followers_url":"https://api.github.com/users/shastox/followers","following_url":"https://api.github.com/users/shastox/following{/other_user}","gists_url":"https://api.github.com/users/shastox/gists{/gist_id}","starred_url":"https://api.github.com/users/shastox/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shastox/subscriptions","organizations_url":"https://api.github.com/users/shastox/orgs","repos_url":"https://api.github.com/users/shastox/repos","events_url":"https://api.github.com/users/shastox/events{/privacy}","received_events_url":"https://api.github.com/users/shastox/received_events","type":"User","site_admin":false},"created_at":"2015-03-03T14:33:22Z","updated_at":"2015-03-03T14:33:22Z","author_association":"NONE","body":"Thank you,  adamcstephens. The problem is, but the reasons are not clear. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/92304836","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-92304836","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":92304836,"node_id":"MDEyOklzc3VlQ29tbWVudDkyMzA0ODM2","user":{"login":"dwerder","id":2126417,"node_id":"MDQ6VXNlcjIxMjY0MTc=","avatar_url":"https://avatars3.githubusercontent.com/u/2126417?v=4","gravatar_id":"","url":"https://api.github.com/users/dwerder","html_url":"https://github.com/dwerder","followers_url":"https://api.github.com/users/dwerder/followers","following_url":"https://api.github.com/users/dwerder/following{/other_user}","gists_url":"https://api.github.com/users/dwerder/gists{/gist_id}","starred_url":"https://api.github.com/users/dwerder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dwerder/subscriptions","organizations_url":"https://api.github.com/users/dwerder/orgs","repos_url":"https://api.github.com/users/dwerder/repos","events_url":"https://api.github.com/users/dwerder/events{/privacy}","received_events_url":"https://api.github.com/users/dwerder/received_events","type":"User","site_admin":false},"created_at":"2015-04-13T10:44:22Z","updated_at":"2015-04-13T11:45:33Z","author_association":"NONE","body":"This ticket should be renamed to \"ES crash on OpenVZ\"\n\nIts also discussed at OpenVZ: https://bugzilla.openvz.org/show_bug.cgi?id=3187\n\nAnd also at https://github.com/elastic/elasticsearch/issues/4978\n\nThe crash has something to do with OpenVZ Kernel newer vzkernel-2.6.32-042stab100 and ploop.\n\n**Quickfix**: dont use ploop (instead use simfs) or\ndowngrade Kernel to some stab9x version.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/92333376","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-92333376","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":92333376,"node_id":"MDEyOklzc3VlQ29tbWVudDkyMzMzMzc2","user":{"login":"VasilyAverin","id":11923443,"node_id":"MDQ6VXNlcjExOTIzNDQz","avatar_url":"https://avatars1.githubusercontent.com/u/11923443?v=4","gravatar_id":"","url":"https://api.github.com/users/VasilyAverin","html_url":"https://github.com/VasilyAverin","followers_url":"https://api.github.com/users/VasilyAverin/followers","following_url":"https://api.github.com/users/VasilyAverin/following{/other_user}","gists_url":"https://api.github.com/users/VasilyAverin/gists{/gist_id}","starred_url":"https://api.github.com/users/VasilyAverin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VasilyAverin/subscriptions","organizations_url":"https://api.github.com/users/VasilyAverin/orgs","repos_url":"https://api.github.com/users/VasilyAverin/repos","events_url":"https://api.github.com/users/VasilyAverin/events{/privacy}","received_events_url":"https://api.github.com/users/VasilyAverin/received_events","type":"User","site_admin":false},"created_at":"2015-04-13T12:24:12Z","updated_at":"2015-04-13T12:24:12Z","author_association":"NONE","body":"Dear ElasticSearch developers,\nI'm OpenVZ kernel developer, I'm investigate OpenVZ bug 3187 and would like to share results.\n1) we got a number reports from different users, all complains on crash of ElasticSearch application inside  OpenVZ container. We have reproducer, on my test node it crashes ES in ~45 minutes after start.\n2) We have collected few core dumps, java crashes in few different places, obviously because of memory corruption.\n3) max_map_count sysctl is not related to this problem. This setting can be adjusted from host but issue is still reproduces after this change.\n4) Obviously the problem was somehow triggered by some changes in our kernel,\nhowever at the moment we can neither confirm kernel problem nor exclude it.\n\nWe need your assistance to clarify the reason of this problem.\nCould you please explain which information you need for investigation?\nI can provide you lot of hs_err_pidXXX.log files and few core dumps.\nCould you please advise some way to troubleshoot memory corruption problems in java?\nPlease let me know if you cannot reproduce the problem locally but want to get an access to affected environment.\n\nThank you,\n      Vasily Averin\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/92337632","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-92337632","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":92337632,"node_id":"MDEyOklzc3VlQ29tbWVudDkyMzM3NjMy","user":{"login":"adamcstephens","id":2071575,"node_id":"MDQ6VXNlcjIwNzE1NzU=","avatar_url":"https://avatars2.githubusercontent.com/u/2071575?v=4","gravatar_id":"","url":"https://api.github.com/users/adamcstephens","html_url":"https://github.com/adamcstephens","followers_url":"https://api.github.com/users/adamcstephens/followers","following_url":"https://api.github.com/users/adamcstephens/following{/other_user}","gists_url":"https://api.github.com/users/adamcstephens/gists{/gist_id}","starred_url":"https://api.github.com/users/adamcstephens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamcstephens/subscriptions","organizations_url":"https://api.github.com/users/adamcstephens/orgs","repos_url":"https://api.github.com/users/adamcstephens/repos","events_url":"https://api.github.com/users/adamcstephens/events{/privacy}","received_events_url":"https://api.github.com/users/adamcstephens/received_events","type":"User","site_admin":false},"created_at":"2015-04-13T12:36:49Z","updated_at":"2015-04-13T12:37:14Z","author_association":"NONE","body":"@dwerder We experienced this with simfs not ploop, so that may not be a fix.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/92417414","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-92417414","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":92417414,"node_id":"MDEyOklzc3VlQ29tbWVudDkyNDE3NDE0","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2015-04-13T16:27:44Z","updated_at":"2015-04-13T16:27:44Z","author_association":"MEMBER","body":"@VasilyAverin hey, how can we help you best? Take a look at the core dumps? Feel free to share them. If you want, just contact me a FIRSTNAME.LASTNAME@elastic.co (just check my profile for my full name) and I'll try to take a look at them or find another Elasticsearch developer\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/92430529","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-92430529","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":92430529,"node_id":"MDEyOklzc3VlQ29tbWVudDkyNDMwNTI5","user":{"login":"VasilyAverin","id":11923443,"node_id":"MDQ6VXNlcjExOTIzNDQz","avatar_url":"https://avatars1.githubusercontent.com/u/11923443?v=4","gravatar_id":"","url":"https://api.github.com/users/VasilyAverin","html_url":"https://github.com/VasilyAverin","followers_url":"https://api.github.com/users/VasilyAverin/followers","following_url":"https://api.github.com/users/VasilyAverin/following{/other_user}","gists_url":"https://api.github.com/users/VasilyAverin/gists{/gist_id}","starred_url":"https://api.github.com/users/VasilyAverin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VasilyAverin/subscriptions","organizations_url":"https://api.github.com/users/VasilyAverin/orgs","repos_url":"https://api.github.com/users/VasilyAverin/repos","events_url":"https://api.github.com/users/VasilyAverin/events{/privacy}","received_events_url":"https://api.github.com/users/VasilyAverin/received_events","type":"User","site_admin":false},"created_at":"2015-04-13T17:17:06Z","updated_at":"2015-04-13T17:17:06Z","author_association":"NONE","body":"@spinscale \nPlease take look at http://fe.parallels.com/c8fdcd56b823534a938983e64604e815/\nI've uploaded hs_err\\* log files and started core dumps uploading, it will be finished in few hours.\nI would like to know what do you think about possible reasons of this problem.\nAs kernel developer, I see that crashes are caused by incorrect data, but I can say nothing about nature of this corruptions and do not understand how it can be related to kernel.\nAt the moment looks like userspace problem for me, but I cannot explain why this happen inside our containers only, and why other environments are not affected.\n\nAlso for our customers it would like to know how its possible to workaround this problem.\nIt would be great if you could advise them something.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/93193768","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-93193768","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":93193768,"node_id":"MDEyOklzc3VlQ29tbWVudDkzMTkzNzY4","user":{"login":"tatsushid","id":5148885,"node_id":"MDQ6VXNlcjUxNDg4ODU=","avatar_url":"https://avatars0.githubusercontent.com/u/5148885?v=4","gravatar_id":"","url":"https://api.github.com/users/tatsushid","html_url":"https://github.com/tatsushid","followers_url":"https://api.github.com/users/tatsushid/followers","following_url":"https://api.github.com/users/tatsushid/following{/other_user}","gists_url":"https://api.github.com/users/tatsushid/gists{/gist_id}","starred_url":"https://api.github.com/users/tatsushid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tatsushid/subscriptions","organizations_url":"https://api.github.com/users/tatsushid/orgs","repos_url":"https://api.github.com/users/tatsushid/repos","events_url":"https://api.github.com/users/tatsushid/events{/privacy}","received_events_url":"https://api.github.com/users/tatsushid/received_events","type":"User","site_admin":false},"created_at":"2015-04-15T05:20:54Z","updated_at":"2015-04-15T05:20:54Z","author_association":"NONE","body":"Hi guys, I'm also investigating the issue and I believe I found the one of the cause of it in sigar library.\n\nToday, I saw odd `open` system calls from elasticsearch like\n\n```\n/root/debug_data2/syscalls.8009:11:17:54.450233 read(42, \"/dev/ploop50957p1 / ext4 rw,relatime,barrier=1,data=ordered,balloon_ino=12 0 0\\nproc /proc proc rw,relatime 0 0\\nsysfs /sys sysfs rw,relatime 0 0\\nnone /dev devtmpfs rw,relatime,size=131072k,nr_inodes=32768,mode=755 0 0\\nnone /dev/pts devpts rw,relatime,gid=5,\"..., 1024) = 405\n/root/debug_data2/syscalls.8009:11:17:54.459160 read(42, \"/dev/ploop50957p1 / ext4 rw,relatime,barrier=1,data=ordered,balloon_ino=12 0 0\\nproc /proc proc rw,relatime 0 0\\nsysfs /sys sysfs rw,relatime 0 0\\nnone /dev devtmpfs rw,relatime,size=131072k,nr_inodes=32768,mode=755 0 0\\nnone /dev/pts devpts rw,relatime,gid=5,\"..., 1024) = 405\n/root/debug_data2/syscalls.8009:11:17:54.459632 open(\"/sys/block/ploop/ploop50957/stat\", O_RDONLY) = -1 ENOENT (No such file or directory)\n/root/debug_data2/syscalls.8128:11:18:35.476467 open(\"/sys/block/ploop/ploop0/stat\", O_RDONLY) = -1 ENOENT (No such file or directory)\n/root/debug_data2/syscalls.8128:11:19:05.461589 open(\"/sys/block/ploop/ploop957/stat\", O_RDONLY) = -1 ENOENT (No such file or directory)\n/root/debug_data2/syscalls.8128:11:19:35.463044 open(\"/sys/block/ploop/ploop57/stat\", O_RDONLY) = -1 ENOENT (No such file or directory)\n/root/debug_data2/syscalls.8128:11:20:05.466241 open(\"/sys/block/ploop/ploop7/stat\", O_RDONLY) = -1 ENOENT (No such file or directory)\n/root/debug_data2/syscalls.8128:11:20:35.467345 open(\"/sys/block/ploop/ploop1/stat\", O_RDONLY) = -1 ENOENT (No such file or directory)\n/root/debug_data2/syscalls.8128:11:21:05.470296 open(\"/sys/block/ploop/ploop0/stat\", O_RDONLY) = -1 ENOENT (No such file or directory)\n```\n\nIt seems the path name is corrupted gradually. This is processed at https://github.com/hyperic/sigar/blob/master/src/os/linux/linux_sigar.c#L1180 and I think the following has something wrong.\n\n``` C\nwhile (!sigar_isdigit(*fsdev)) {\n    fsdev++;\n}\n\npartition = strtoul(fsdev, NULL, 0);\n*fsdev = '\\0';\n```\n\nFor example, if the device name is `ploop50957`, it works but replaces `5` by NULL. The `fsdev` value originates `sigar_iodev_get` function but it keeps the value in a cache so the replaced value is used next time. The second time, it tries to find no number chars but ignores the NULL value set previously (`sigar_isdigit` returns false if the value is NULL char) so this time `0` value is replaced by NULL. It replaces memory by NULL time and time again and finally causes a crash\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/93230755","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-93230755","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":93230755,"node_id":"MDEyOklzc3VlQ29tbWVudDkzMjMwNzU1","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2015-04-15T07:11:59Z","updated_at":"2015-04-15T07:11:59Z","author_association":"MEMBER","body":"@tatsushid awesome, thanks! According your explanation it seems you found the source of this issue :)\n\nDo you think you can create an issue for the Sigar lib and link it here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/93238949","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-93238949","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":93238949,"node_id":"MDEyOklzc3VlQ29tbWVudDkzMjM4OTQ5","user":{"login":"tatsushid","id":5148885,"node_id":"MDQ6VXNlcjUxNDg4ODU=","avatar_url":"https://avatars0.githubusercontent.com/u/5148885?v=4","gravatar_id":"","url":"https://api.github.com/users/tatsushid","html_url":"https://github.com/tatsushid","followers_url":"https://api.github.com/users/tatsushid/followers","following_url":"https://api.github.com/users/tatsushid/following{/other_user}","gists_url":"https://api.github.com/users/tatsushid/gists{/gist_id}","starred_url":"https://api.github.com/users/tatsushid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tatsushid/subscriptions","organizations_url":"https://api.github.com/users/tatsushid/orgs","repos_url":"https://api.github.com/users/tatsushid/repos","events_url":"https://api.github.com/users/tatsushid/events{/privacy}","received_events_url":"https://api.github.com/users/tatsushid/received_events","type":"User","site_admin":false},"created_at":"2015-04-15T07:31:30Z","updated_at":"2015-04-15T07:31:30Z","author_association":"NONE","body":"@tlrx OK, I'll create an issue for Sigar project\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/93241524","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-93241524","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":93241524,"node_id":"MDEyOklzc3VlQ29tbWVudDkzMjQxNTI0","user":{"login":"VasilyAverin","id":11923443,"node_id":"MDQ6VXNlcjExOTIzNDQz","avatar_url":"https://avatars1.githubusercontent.com/u/11923443?v=4","gravatar_id":"","url":"https://api.github.com/users/VasilyAverin","html_url":"https://github.com/VasilyAverin","followers_url":"https://api.github.com/users/VasilyAverin/followers","following_url":"https://api.github.com/users/VasilyAverin/following{/other_user}","gists_url":"https://api.github.com/users/VasilyAverin/gists{/gist_id}","starred_url":"https://api.github.com/users/VasilyAverin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VasilyAverin/subscriptions","organizations_url":"https://api.github.com/users/VasilyAverin/orgs","repos_url":"https://api.github.com/users/VasilyAverin/repos","events_url":"https://api.github.com/users/VasilyAverin/events{/privacy}","received_events_url":"https://api.github.com/users/VasilyAverin/received_events","type":"User","site_admin":false},"created_at":"2015-04-15T07:37:22Z","updated_at":"2015-04-15T07:37:22Z","author_association":"NONE","body":"Dear Tatsushi,\nthank you very much.\nI believe this bug can happen inside simfs containers too,\naccording device file does not have partition number in end of name.\nct # ls /dev/simfs  -al\nb-----x--- 1 root root 0, 24 May 14 10:51 /dev/simfs\n\nOn old openVZ kernels containers had no /sys/block directory.\nWhen it was added on new kernels Sigar library was switched to using of IOSTAT_SYS handler\nthat calls incorrect get_iostat_sys() function.\nhttps://github.com/hyperic/sigar/blob/189843858ecd8da7fb94a6b274269877c2416b3a/src/os/linux/linux_sigar.c#L188\n\n else if (stat(SYS_BLOCK, &sb) == 0) {\n        (*sigar)->iostat = IOSTAT_SYS;\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/93745731","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-93745731","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":93745731,"node_id":"MDEyOklzc3VlQ29tbWVudDkzNzQ1NzMx","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2015-04-16T14:17:38Z","updated_at":"2015-04-16T14:17:38Z","author_association":"MEMBER","body":"thank you so much for digging into this @tatsushid\n\n@VasilyAverin you can test the assumption, by starting an elasticsearch instance, but remove the `lib/sigar` directory before running. This will disable almost all your monitoring capabilities, but should be sufficient to find out if the crashes keep happening.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/93750082","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-93750082","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":93750082,"node_id":"MDEyOklzc3VlQ29tbWVudDkzNzUwMDgy","user":{"login":"VasilyAverin","id":11923443,"node_id":"MDQ6VXNlcjExOTIzNDQz","avatar_url":"https://avatars1.githubusercontent.com/u/11923443?v=4","gravatar_id":"","url":"https://api.github.com/users/VasilyAverin","html_url":"https://github.com/VasilyAverin","followers_url":"https://api.github.com/users/VasilyAverin/followers","following_url":"https://api.github.com/users/VasilyAverin/following{/other_user}","gists_url":"https://api.github.com/users/VasilyAverin/gists{/gist_id}","starred_url":"https://api.github.com/users/VasilyAverin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VasilyAverin/subscriptions","organizations_url":"https://api.github.com/users/VasilyAverin/orgs","repos_url":"https://api.github.com/users/VasilyAverin/repos","events_url":"https://api.github.com/users/VasilyAverin/events{/privacy}","received_events_url":"https://api.github.com/users/VasilyAverin/received_events","type":"User","site_admin":false},"created_at":"2015-04-16T14:35:55Z","updated_at":"2015-04-16T14:35:55Z","author_association":"NONE","body":"@spinscale thank you for hint.\nTo workaround the problem I've \"removed\" /sys/block in my test container,\nSeems it helps, ES testcases worked stable and was not crashed.\nBut your workaround is more simple, I'll advise it to affected OpenVZ users. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/94112085","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-94112085","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":94112085,"node_id":"MDEyOklzc3VlQ29tbWVudDk0MTEyMDg1","user":{"login":"nonotest","id":2551341,"node_id":"MDQ6VXNlcjI1NTEzNDE=","avatar_url":"https://avatars0.githubusercontent.com/u/2551341?v=4","gravatar_id":"","url":"https://api.github.com/users/nonotest","html_url":"https://github.com/nonotest","followers_url":"https://api.github.com/users/nonotest/followers","following_url":"https://api.github.com/users/nonotest/following{/other_user}","gists_url":"https://api.github.com/users/nonotest/gists{/gist_id}","starred_url":"https://api.github.com/users/nonotest/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nonotest/subscriptions","organizations_url":"https://api.github.com/users/nonotest/orgs","repos_url":"https://api.github.com/users/nonotest/repos","events_url":"https://api.github.com/users/nonotest/events{/privacy}","received_events_url":"https://api.github.com/users/nonotest/received_events","type":"User","site_admin":false},"created_at":"2015-04-18T01:29:02Z","updated_at":"2015-04-18T01:29:02Z","author_association":"NONE","body":"hello,\nim sorry im not sure I understand what you mean by \" by starting an elasticsearch instance, but remove the lib/sigar directory before running\" @spinscale \ndo I start the service and just rename the folder right after?\n\nThanks,\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/94162730","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-94162730","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":94162730,"node_id":"MDEyOklzc3VlQ29tbWVudDk0MTYyNzMw","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2015-04-18T12:35:41Z","updated_at":"2015-04-18T12:35:41Z","author_association":"MEMBER","body":"sorry for not being. You need to remove (or move out it out of the `lib` directory) the directory first and then start, and then start elasticsearch.\n\nAgain this will remove a lot of monitoring capabilities and should be considered a workaround, a temporary one! I will monitor the sigar issue and hope someone works on it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/94332199","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-94332199","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":94332199,"node_id":"MDEyOklzc3VlQ29tbWVudDk0MzMyMTk5","user":{"login":"nonotest","id":2551341,"node_id":"MDQ6VXNlcjI1NTEzNDE=","avatar_url":"https://avatars0.githubusercontent.com/u/2551341?v=4","gravatar_id":"","url":"https://api.github.com/users/nonotest","html_url":"https://github.com/nonotest","followers_url":"https://api.github.com/users/nonotest/followers","following_url":"https://api.github.com/users/nonotest/following{/other_user}","gists_url":"https://api.github.com/users/nonotest/gists{/gist_id}","starred_url":"https://api.github.com/users/nonotest/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nonotest/subscriptions","organizations_url":"https://api.github.com/users/nonotest/orgs","repos_url":"https://api.github.com/users/nonotest/repos","events_url":"https://api.github.com/users/nonotest/events{/privacy}","received_events_url":"https://api.github.com/users/nonotest/received_events","type":"User","site_admin":false},"created_at":"2015-04-20T01:23:12Z","updated_at":"2015-04-20T01:23:12Z","author_association":"NONE","body":"thanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/104560242","html_url":"https://github.com/elastic/elasticsearch/issues/9582#issuecomment-104560242","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9582","id":104560242,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNDU2MDI0Mg==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-05-22T08:10:55Z","updated_at":"2015-05-22T08:11:12Z","author_association":"CONTRIBUTOR","body":"I closed this issue since I just added a setting to disable `sigar` loading altogether so on openVZ you can just set this setting instead of removing libraries. see #11293 \n","performed_via_github_app":null}]