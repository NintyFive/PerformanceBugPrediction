{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/12255","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12255/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12255/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12255/events","html_url":"https://github.com/elastic/elasticsearch/issues/12255","id":95101619,"node_id":"MDU6SXNzdWU5NTEwMTYxOQ==","number":12255,"title":"ElasticSearch memory leaks","user":{"login":"dennisgorelik","id":4333866,"node_id":"MDQ6VXNlcjQzMzM4NjY=","avatar_url":"https://avatars2.githubusercontent.com/u/4333866?v=4","gravatar_id":"","url":"https://api.github.com/users/dennisgorelik","html_url":"https://github.com/dennisgorelik","followers_url":"https://api.github.com/users/dennisgorelik/followers","following_url":"https://api.github.com/users/dennisgorelik/following{/other_user}","gists_url":"https://api.github.com/users/dennisgorelik/gists{/gist_id}","starred_url":"https://api.github.com/users/dennisgorelik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dennisgorelik/subscriptions","organizations_url":"https://api.github.com/users/dennisgorelik/orgs","repos_url":"https://api.github.com/users/dennisgorelik/repos","events_url":"https://api.github.com/users/dennisgorelik/events{/privacy}","received_events_url":"https://api.github.com/users/dennisgorelik/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2015-07-15T04:12:46Z","updated_at":"2015-07-17T13:29:44Z","closed_at":"2015-07-15T11:05:31Z","author_association":"NONE","active_lock_reason":null,"body":"We have that pattern (below) long enough that guessing memory leaks in ElasticSearch seem to be the most likely explanation.\nSummary: after running our ElasticSearch for about 5 days we start to get ~exponentially more timeouts with every passing day.\nThese timeouts go away after restarting ElasticSearch service... for another 5 days.\n\nDetails:\n1) We saw that pattern in both Windows (Windows Server 2012 R2) and Linux (CentOs 7) environments.\nWe currently use ElasticSearch 1.6.0, but we observed similar \"~5-days timebomb\" pattern on previous versions such as ElasticSearch 1.4.3 on Windows).\n2) We run about 200,000 ElasticSearch queries per day\n3) We have timeouts at 100s mark.\n4) Normally failing queries should execute in well below 1s (e.g. ~50ms).\n5) Timeouts we are getting usually do not show on slowlog:\nhttps://github.com/elastic/elasticsearch/issues/11919\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}