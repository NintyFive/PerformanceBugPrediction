{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/33150","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33150/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33150/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33150/events","html_url":"https://github.com/elastic/elasticsearch/issues/33150","id":354071295,"node_id":"MDU6SXNzdWUzNTQwNzEyOTU=","number":33150,"title":"The cache metrics always 0","user":{"login":"leeeboo","id":877939,"node_id":"MDQ6VXNlcjg3NzkzOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/877939?v=4","gravatar_id":"","url":"https://api.github.com/users/leeeboo","html_url":"https://github.com/leeeboo","followers_url":"https://api.github.com/users/leeeboo/followers","following_url":"https://api.github.com/users/leeeboo/following{/other_user}","gists_url":"https://api.github.com/users/leeeboo/gists{/gist_id}","starred_url":"https://api.github.com/users/leeeboo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leeeboo/subscriptions","organizations_url":"https://api.github.com/users/leeeboo/orgs","repos_url":"https://api.github.com/users/leeeboo/repos","events_url":"https://api.github.com/users/leeeboo/events{/privacy}","received_events_url":"https://api.github.com/users/leeeboo/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-08-26T06:50:18Z","updated_at":"2018-08-26T18:35:47Z","closed_at":"2018-08-26T18:35:46Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`):6.4.0\r\n\r\n**Plugins installed**: [analysis-ik]\r\n\r\n**JVM version** (`java -version`):1.8.0_181\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):CentOS 7 4.18.3-1.el7.elrepo.x86_64\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nWe have all cache metrics 0, such as:\r\n\r\n/_stats/request_cache?human\r\n\r\n```\r\n{\r\n  \"_shards\" : {\r\n    \"total\" : 27,\r\n    \"successful\" : 27,\r\n    \"failed\" : 0\r\n  },\r\n  \"_all\" : {\r\n    \"primaries\" : {\r\n      \"request_cache\" : {\r\n        \"memory_size_in_bytes\" : 0,\r\n        \"evictions\" : 0,\r\n        \"hit_count\" : 0,\r\n        \"miss_count\" : 0\r\n      }\r\n    },\r\n    \"total\" : {\r\n      \"request_cache\" : {\r\n        \"memory_size_in_bytes\" : 0,\r\n        \"evictions\" : 0,\r\n        \"hit_count\" : 0,\r\n        \"miss_count\" : 0\r\n      }\r\n    }\r\n  },\r\n  \"indices\" : {\r\n    \"material\" : {\r\n      \"uuid\" : \"3S_xJFs8R0SyI516EL68tQ\",\r\n      \"primaries\" : {\r\n        \"request_cache\" : {\r\n          \"memory_size_in_bytes\" : 0,\r\n          \"evictions\" : 0,\r\n          \"hit_count\" : 0,\r\n          \"miss_count\" : 0\r\n        }\r\n      },\r\n      \"total\" : {\r\n        \"request_cache\" : {\r\n          \"memory_size_in_bytes\" : 0,\r\n          \"evictions\" : 0,\r\n          \"hit_count\" : 0,\r\n          \"miss_count\" : 0\r\n        }\r\n      }\r\n    },\r\n    \"INDEX\" : {\r\n      \"uuid\" : \"CeBrVgGRQ42NA4QlgQNiLA\",\r\n      \"primaries\" : {\r\n        \"request_cache\" : {\r\n          \"memory_size_in_bytes\" : 0,\r\n          \"evictions\" : 0,\r\n          \"hit_count\" : 0,\r\n          \"miss_count\" : 0\r\n        }\r\n      },\r\n      \"total\" : {\r\n        \"request_cache\" : {\r\n          \"memory_size_in_bytes\" : 0,\r\n          \"evictions\" : 0,\r\n          \"hit_count\" : 0,\r\n          \"miss_count\" : 0\r\n        }\r\n      }\r\n    },\r\n    \".elastichq\" : {\r\n      \"uuid\" : \"CJsavcFAQ2Kzpv_YJDKegQ\",\r\n      \"primaries\" : {\r\n        \"request_cache\" : {\r\n          \"memory_size_in_bytes\" : 0,\r\n          \"evictions\" : 0,\r\n          \"hit_count\" : 0,\r\n          \"miss_count\" : 0\r\n        }\r\n      },\r\n      \"total\" : {\r\n        \"request_cache\" : {\r\n          \"memory_size_in_bytes\" : 0,\r\n          \"evictions\" : 0,\r\n          \"hit_count\" : 0,\r\n          \"miss_count\" : 0\r\n        }\r\n      }\r\n    },\r\n    \".tasks\" : {\r\n      \"uuid\" : \"x5ZITrgdTmG7o_AP8yfPGw\",\r\n      \"primaries\" : {\r\n        \"request_cache\" : {\r\n          \"memory_size_in_bytes\" : 0,\r\n          \"evictions\" : 0,\r\n          \"hit_count\" : 0,\r\n          \"miss_count\" : 0\r\n        }\r\n      },\r\n      \"total\" : {\r\n        \"request_cache\" : {\r\n          \"memory_size_in_bytes\" : 0,\r\n          \"evictions\" : 0,\r\n          \"hit_count\" : 0,\r\n          \"miss_count\" : 0\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**Steps to reproduce**:\r\n\r\nelasticsearch.yml\r\n\r\n```\r\ncluster.name:XXX\r\nnode.name: node-1\r\npath.data: /elasticsearch/data\r\npath.logs: /elasticsearch/log\r\nnetwork.host: 0.0.0.0\r\nhttp.port: 9200\r\ndiscovery.zen.ping.unicast.hosts: [.............]\r\ndiscovery.zen.minimum_master_nodes: 2\r\nbootstrap.memory_lock: true\r\n```\r\n\r\n/INDEX/_settings\r\n\r\n```\r\n{\r\n  \"INDEX\" : {\r\n    \"settings\" : {\r\n      \"index\" : {\r\n        \"refresh_interval\" : \"10s\",\r\n        \"number_of_shards\" : \"9\",\r\n        \"provided_name\" : \"follower-v2\",\r\n        \"creation_date\" : \"1535191750932\",\r\n        \"requests\" : {\r\n          \"cache\" : {\r\n            \"enable\" : \"true\"\r\n          }\r\n        },\r\n        \"unassigned\" : {\r\n          \"node_left\" : {\r\n            \"delayed_timeout\" : \"5m\"\r\n          }\r\n        },\r\n        \"number_of_replicas\" : \"0\",\r\n        \"queries\" : {\r\n          \"cache\" : {\r\n            \"enabled\" : \"true\"\r\n          }\r\n        },\r\n        \"uuid\" : \"CeBrVgGRQ42NA4QlgQNiLA\",\r\n        \"version\" : {\r\n          \"created\" : \"6030299\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}