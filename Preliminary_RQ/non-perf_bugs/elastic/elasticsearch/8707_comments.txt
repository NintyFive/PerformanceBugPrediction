[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64954834","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-64954834","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":64954834,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTU0ODM0","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-11-29T15:15:48Z","updated_at":"2014-11-29T15:15:48Z","author_association":"CONTRIBUTOR","body":"hey, first of all nothing got lost so that's good. If we detect a corruption we mark the shard as corrupted there should be a `corrupted_?????` on disk that prevent your cluster from allocating the shard on that node. We do that to allow you to backup corrupted data etc. if we can allocate the shard somewhere else we will remove it. yet in your case you can remove the shard from the node it question and then ES will recover from the primary. Yet, I'd want to to know what happened that made the shard go corrupted. Did you upgrade lately? if so from what version?\n\nyou can `rm` the files on `Motormouth` for shard 0 & 1 for the metadata index and then run  `curl -XPOST 'localhost:9200/_cluster/reroute'` this should kick off the recovery. If you are unsure you can post the commands here and I will ahve a look first. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64955063","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-64955063","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":64955063,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTU1MDYz","user":{"login":"mehmetgunturkun","id":3748385,"node_id":"MDQ6VXNlcjM3NDgzODU=","avatar_url":"https://avatars2.githubusercontent.com/u/3748385?v=4","gravatar_id":"","url":"https://api.github.com/users/mehmetgunturkun","html_url":"https://github.com/mehmetgunturkun","followers_url":"https://api.github.com/users/mehmetgunturkun/followers","following_url":"https://api.github.com/users/mehmetgunturkun/following{/other_user}","gists_url":"https://api.github.com/users/mehmetgunturkun/gists{/gist_id}","starred_url":"https://api.github.com/users/mehmetgunturkun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehmetgunturkun/subscriptions","organizations_url":"https://api.github.com/users/mehmetgunturkun/orgs","repos_url":"https://api.github.com/users/mehmetgunturkun/repos","events_url":"https://api.github.com/users/mehmetgunturkun/events{/privacy}","received_events_url":"https://api.github.com/users/mehmetgunturkun/received_events","type":"User","site_admin":false},"created_at":"2014-11-29T15:24:08Z","updated_at":"2014-11-29T15:24:08Z","author_association":"NONE","body":"Actually, last thing I did, querying something which should return 20M documents. I was not expecting that will down ES. After that I restarted ES and it started to giving that exceptions for these shards. \nSo you are suggesting that deleting all data under the folder for shards: 0,1, right?\nBtw, does ES trying to merge two shards when recovering?\nActually I was thinking to reduce number_of_replicas to 0 and then increase the 1 again. But I am not sure if that causes any data loss because primary shards are in different nodes?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64955162","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-64955162","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":64955162,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTU1MTYy","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-11-29T15:27:26Z","updated_at":"2014-11-29T15:27:26Z","author_association":"CONTRIBUTOR","body":"your other replicase are just fine I don't think you need to do that. Yet, you certainly can.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64955282","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-64955282","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":64955282,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTU1Mjgy","user":{"login":"mehmetgunturkun","id":3748385,"node_id":"MDQ6VXNlcjM3NDgzODU=","avatar_url":"https://avatars2.githubusercontent.com/u/3748385?v=4","gravatar_id":"","url":"https://api.github.com/users/mehmetgunturkun","html_url":"https://github.com/mehmetgunturkun","followers_url":"https://api.github.com/users/mehmetgunturkun/followers","following_url":"https://api.github.com/users/mehmetgunturkun/following{/other_user}","gists_url":"https://api.github.com/users/mehmetgunturkun/gists{/gist_id}","starred_url":"https://api.github.com/users/mehmetgunturkun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehmetgunturkun/subscriptions","organizations_url":"https://api.github.com/users/mehmetgunturkun/orgs","repos_url":"https://api.github.com/users/mehmetgunturkun/repos","events_url":"https://api.github.com/users/mehmetgunturkun/events{/privacy}","received_events_url":"https://api.github.com/users/mehmetgunturkun/received_events","type":"User","site_admin":false},"created_at":"2014-11-29T15:31:32Z","updated_at":"2014-11-29T15:31:32Z","author_association":"NONE","body":"which one do you suggest, (reducing number of shards) or (removal shards and recover shards)?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64956293","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-64956293","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":64956293,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTU2Mjkz","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-11-29T16:06:59Z","updated_at":"2014-11-29T16:06:59Z","author_association":"CONTRIBUTOR","body":"I'd got and do a `mv /your/path/to/data/indices/metadata/0  /your/path/to/data/indices/metadata/backup_0`\n\nthen run reroute and wait until the shard is active. remove the backup continue with the second shard.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64956430","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-64956430","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":64956430,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTU2NDMw","user":{"login":"mehmetgunturkun","id":3748385,"node_id":"MDQ6VXNlcjM3NDgzODU=","avatar_url":"https://avatars2.githubusercontent.com/u/3748385?v=4","gravatar_id":"","url":"https://api.github.com/users/mehmetgunturkun","html_url":"https://github.com/mehmetgunturkun","followers_url":"https://api.github.com/users/mehmetgunturkun/followers","following_url":"https://api.github.com/users/mehmetgunturkun/following{/other_user}","gists_url":"https://api.github.com/users/mehmetgunturkun/gists{/gist_id}","starred_url":"https://api.github.com/users/mehmetgunturkun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehmetgunturkun/subscriptions","organizations_url":"https://api.github.com/users/mehmetgunturkun/orgs","repos_url":"https://api.github.com/users/mehmetgunturkun/repos","events_url":"https://api.github.com/users/mehmetgunturkun/events{/privacy}","received_events_url":"https://api.github.com/users/mehmetgunturkun/received_events","type":"User","site_admin":false},"created_at":"2014-11-29T16:10:47Z","updated_at":"2014-11-29T16:10:47Z","author_association":"NONE","body":"ok I will try thanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/65040457","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-65040457","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":65040457,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDQwNDU3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-01T09:43:10Z","updated_at":"2014-12-01T09:43:10Z","author_association":"CONTRIBUTOR","body":"Hi @mehmetgunturkun \n\n> Actually, last thing I did, querying something which should return 20M documents\n\nDo you mean you requested 20M documents in one search response? eg { \"from\": 0, \"size\": 20000000 }`?\n\nIf so, that could have caused an OOM exception.  Please can you look in the logs on each node to see if you had an OOM?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/65040839","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-65040839","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":65040839,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDQwODM5","user":{"login":"mehmetgunturkun","id":3748385,"node_id":"MDQ6VXNlcjM3NDgzODU=","avatar_url":"https://avatars2.githubusercontent.com/u/3748385?v=4","gravatar_id":"","url":"https://api.github.com/users/mehmetgunturkun","html_url":"https://github.com/mehmetgunturkun","followers_url":"https://api.github.com/users/mehmetgunturkun/followers","following_url":"https://api.github.com/users/mehmetgunturkun/following{/other_user}","gists_url":"https://api.github.com/users/mehmetgunturkun/gists{/gist_id}","starred_url":"https://api.github.com/users/mehmetgunturkun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehmetgunturkun/subscriptions","organizations_url":"https://api.github.com/users/mehmetgunturkun/orgs","repos_url":"https://api.github.com/users/mehmetgunturkun/repos","events_url":"https://api.github.com/users/mehmetgunturkun/events{/privacy}","received_events_url":"https://api.github.com/users/mehmetgunturkun/received_events","type":"User","site_admin":false},"created_at":"2014-12-01T09:46:29Z","updated_at":"2014-12-01T09:46:29Z","author_association":"NONE","body":"yeah, it gave an Out of Memory Exception; but still couldn't understand why there is a mismatch?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/65041229","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-65041229","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":65041229,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDQxMjI5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-01T09:49:47Z","updated_at":"2014-12-01T09:49:47Z","author_association":"CONTRIBUTOR","body":"Basically, if you get an OOM exception, all bets are off.  At that stage the JVM is in an undefined state.  That said, it shouldn't write a commit point that includes a file which hasn't been written correctly.  \n\nWas this index originally created with an older version of Elasticsearch? If so, which version?  It would be helpful if you could upload your logs somewhere.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/65045665","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-65045665","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":65045665,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDQ1NjY1","user":{"login":"mehmetgunturkun","id":3748385,"node_id":"MDQ6VXNlcjM3NDgzODU=","avatar_url":"https://avatars2.githubusercontent.com/u/3748385?v=4","gravatar_id":"","url":"https://api.github.com/users/mehmetgunturkun","html_url":"https://github.com/mehmetgunturkun","followers_url":"https://api.github.com/users/mehmetgunturkun/followers","following_url":"https://api.github.com/users/mehmetgunturkun/following{/other_user}","gists_url":"https://api.github.com/users/mehmetgunturkun/gists{/gist_id}","starred_url":"https://api.github.com/users/mehmetgunturkun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehmetgunturkun/subscriptions","organizations_url":"https://api.github.com/users/mehmetgunturkun/orgs","repos_url":"https://api.github.com/users/mehmetgunturkun/repos","events_url":"https://api.github.com/users/mehmetgunturkun/events{/privacy}","received_events_url":"https://api.github.com/users/mehmetgunturkun/received_events","type":"User","site_admin":false},"created_at":"2014-12-01T10:29:03Z","updated_at":"2014-12-01T10:29:03Z","author_association":"NONE","body":"actually, I was almost sure about that this index created on 1.3.2 but I saw a file, \"_avoi_es090_0.doc\",\" does it indicate version, 0.9?\nsample of log file is in the following link:\nhttps://dl.dropboxusercontent.com/u/69632603/New%20folder/elasticsearch.log\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/65138909","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-65138909","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":65138909,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTM4OTA5","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-12-01T21:36:41Z","updated_at":"2014-12-01T21:36:41Z","author_association":"CONTRIBUTOR","body":"> does it indicate version, 0.9?\n\nno that is confusing it only means we added this codec in `0.90` but that is only a naming thing. \n\n> https://dl.dropboxusercontent.com/u/69632603/New%20folder/elasticsearch.log\n\nyou know what this seems like a half written index during a recovery. I think what happened here is you got an OOM and one of the shards was recoverying during that time. Then it got corrupted because you ran into OOM since recovery didn't finish. It left your shard in half baked state. We fixed this in 1.4.0 where we rename files after they all have been written and we rename them such that commitpointer are renamed last. I think that is what happened, that explains the missing file as well as the truncated one?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/65795221","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-65795221","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":65795221,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk1MjIx","user":{"login":"mehmetgunturkun","id":3748385,"node_id":"MDQ6VXNlcjM3NDgzODU=","avatar_url":"https://avatars2.githubusercontent.com/u/3748385?v=4","gravatar_id":"","url":"https://api.github.com/users/mehmetgunturkun","html_url":"https://github.com/mehmetgunturkun","followers_url":"https://api.github.com/users/mehmetgunturkun/followers","following_url":"https://api.github.com/users/mehmetgunturkun/following{/other_user}","gists_url":"https://api.github.com/users/mehmetgunturkun/gists{/gist_id}","starred_url":"https://api.github.com/users/mehmetgunturkun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehmetgunturkun/subscriptions","organizations_url":"https://api.github.com/users/mehmetgunturkun/orgs","repos_url":"https://api.github.com/users/mehmetgunturkun/repos","events_url":"https://api.github.com/users/mehmetgunturkun/events{/privacy}","received_events_url":"https://api.github.com/users/mehmetgunturkun/received_events","type":"User","site_admin":false},"created_at":"2014-12-05T14:19:52Z","updated_at":"2014-12-05T14:19:52Z","author_association":"NONE","body":"yeah this is what happened most probably, because on recovery, my application was still sending documents to index. Thanks a lot guys.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/65915291","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-65915291","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":65915291,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTE1Mjkx","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-12-06T21:44:55Z","updated_at":"2014-12-06T21:44:55Z","author_association":"CONTRIBUTOR","body":"@mehmetgunturkun I assume this got resolved... I am closing it please reopen if you object.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/91160655","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-91160655","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":91160655,"node_id":"MDEyOklzc3VlQ29tbWVudDkxMTYwNjU1","user":{"login":"Bertg","id":1434,"node_id":"MDQ6VXNlcjE0MzQ=","avatar_url":"https://avatars2.githubusercontent.com/u/1434?v=4","gravatar_id":"","url":"https://api.github.com/users/Bertg","html_url":"https://github.com/Bertg","followers_url":"https://api.github.com/users/Bertg/followers","following_url":"https://api.github.com/users/Bertg/following{/other_user}","gists_url":"https://api.github.com/users/Bertg/gists{/gist_id}","starred_url":"https://api.github.com/users/Bertg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bertg/subscriptions","organizations_url":"https://api.github.com/users/Bertg/orgs","repos_url":"https://api.github.com/users/Bertg/repos","events_url":"https://api.github.com/users/Bertg/events{/privacy}","received_events_url":"https://api.github.com/users/Bertg/received_events","type":"User","site_admin":false},"created_at":"2015-04-09T09:01:16Z","updated_at":"2015-04-09T09:01:16Z","author_association":"NONE","body":"@clintongormley First, thanks for the clear (and easy to find) help here. Today we ran into an issue with a corrupted shard as well. As far as we know though, the problems started when our master node and other (not master) node started having communication issues. We are still investigating what happened, but I was wondering if you'd be interested in our logs?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/91162727","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-91162727","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":91162727,"node_id":"MDEyOklzc3VlQ29tbWVudDkxMTYyNzI3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-09T09:04:56Z","updated_at":"2015-04-09T09:04:56Z","author_association":"CONTRIBUTOR","body":"Hi @Bertg \n\nWe may well be.  I'd open a new issue mentioning the version that you're using, plus all of the details including the logs.  Note: if you're using an older version, there's a good chance that we've already fixed the bug, so you may want to trawl through the issues list first, to see if you find something that could explain the problem.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/91184737","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-91184737","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":91184737,"node_id":"MDEyOklzc3VlQ29tbWVudDkxMTg0NzM3","user":{"login":"Bertg","id":1434,"node_id":"MDQ6VXNlcjE0MzQ=","avatar_url":"https://avatars2.githubusercontent.com/u/1434?v=4","gravatar_id":"","url":"https://api.github.com/users/Bertg","html_url":"https://github.com/Bertg","followers_url":"https://api.github.com/users/Bertg/followers","following_url":"https://api.github.com/users/Bertg/following{/other_user}","gists_url":"https://api.github.com/users/Bertg/gists{/gist_id}","starred_url":"https://api.github.com/users/Bertg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bertg/subscriptions","organizations_url":"https://api.github.com/users/Bertg/orgs","repos_url":"https://api.github.com/users/Bertg/repos","events_url":"https://api.github.com/users/Bertg/events{/privacy}","received_events_url":"https://api.github.com/users/Bertg/received_events","type":"User","site_admin":false},"created_at":"2015-04-09T10:22:15Z","updated_at":"2015-04-09T10:22:15Z","author_association":"NONE","body":"@clintongormley Actually investigating it more, I think we figured out what happened. A very complex query got generated, overloaded the master and the slaves \"got confused\" somehow. It does seem that later versions might fix the issue we had. We'll do the update and try to re run the offending query. If it happens again we'll open a ticket.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95511793","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-95511793","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":95511793,"node_id":"MDEyOklzc3VlQ29tbWVudDk1NTExNzkz","user":{"login":"rtoma","id":2914051,"node_id":"MDQ6VXNlcjI5MTQwNTE=","avatar_url":"https://avatars2.githubusercontent.com/u/2914051?v=4","gravatar_id":"","url":"https://api.github.com/users/rtoma","html_url":"https://github.com/rtoma","followers_url":"https://api.github.com/users/rtoma/followers","following_url":"https://api.github.com/users/rtoma/following{/other_user}","gists_url":"https://api.github.com/users/rtoma/gists{/gist_id}","starred_url":"https://api.github.com/users/rtoma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rtoma/subscriptions","organizations_url":"https://api.github.com/users/rtoma/orgs","repos_url":"https://api.github.com/users/rtoma/repos","events_url":"https://api.github.com/users/rtoma/events{/privacy}","received_events_url":"https://api.github.com/users/rtoma/received_events","type":"User","site_admin":false},"created_at":"2015-04-23T09:35:01Z","updated_at":"2015-04-23T09:35:01Z","author_association":"NONE","body":"Had this issue with 1.4.4.\n\nFix mentioned in this issue did work: renaming the .../0 directory to .../0.backup. The 'unassigned' replica became primary, data was accessible again and a new replica was created. Case closed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/103817208","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-103817208","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":103817208,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMzgxNzIwOA==","user":{"login":"nguafogu78","id":12526298,"node_id":"MDQ6VXNlcjEyNTI2Mjk4","avatar_url":"https://avatars3.githubusercontent.com/u/12526298?v=4","gravatar_id":"","url":"https://api.github.com/users/nguafogu78","html_url":"https://github.com/nguafogu78","followers_url":"https://api.github.com/users/nguafogu78/followers","following_url":"https://api.github.com/users/nguafogu78/following{/other_user}","gists_url":"https://api.github.com/users/nguafogu78/gists{/gist_id}","starred_url":"https://api.github.com/users/nguafogu78/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nguafogu78/subscriptions","organizations_url":"https://api.github.com/users/nguafogu78/orgs","repos_url":"https://api.github.com/users/nguafogu78/repos","events_url":"https://api.github.com/users/nguafogu78/events{/privacy}","received_events_url":"https://api.github.com/users/nguafogu78/received_events","type":"User","site_admin":false},"created_at":"2015-05-20T09:04:39Z","updated_at":"2015-05-20T09:04:39Z","author_association":"NONE","body":"Hi,\n\nA similar error happened to me for a 1.3.4 ES version. It seems too there is a broken recovery for one shard (among 5 for the same index). A lot of people suggest it could be resolved by renaming the shard directory. The 'unassigned' replica would become primary so data could be accessible again and a new replica created. Can someone confirm that ?\n\nSomeone in the #10066 suggested that this error would not happen in a 1.5.0 version ? Does someone agree with that ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/104281433","html_url":"https://github.com/elastic/elasticsearch/issues/8707#issuecomment-104281433","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8707","id":104281433,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNDI4MTQzMw==","user":{"login":"epleterte","id":370010,"node_id":"MDQ6VXNlcjM3MDAxMA==","avatar_url":"https://avatars0.githubusercontent.com/u/370010?v=4","gravatar_id":"","url":"https://api.github.com/users/epleterte","html_url":"https://github.com/epleterte","followers_url":"https://api.github.com/users/epleterte/followers","following_url":"https://api.github.com/users/epleterte/following{/other_user}","gists_url":"https://api.github.com/users/epleterte/gists{/gist_id}","starred_url":"https://api.github.com/users/epleterte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epleterte/subscriptions","organizations_url":"https://api.github.com/users/epleterte/orgs","repos_url":"https://api.github.com/users/epleterte/repos","events_url":"https://api.github.com/users/epleterte/events{/privacy}","received_events_url":"https://api.github.com/users/epleterte/received_events","type":"User","site_admin":false},"created_at":"2015-05-21T13:43:00Z","updated_at":"2015-05-21T13:43:00Z","author_association":"NONE","body":"This happened to me with 1.4.5. It could be related to upgrade from 1.4.4 to 1.4.5 - I am sorry to say I am unsure about that. I only had 1 corrupt shard, though - I'd guess I should have more if it was related to the upgrade ... ?\nIn either case: _rm/mv_ + a call to _reroute_ worked like a charm!\n","performed_via_github_app":null}]