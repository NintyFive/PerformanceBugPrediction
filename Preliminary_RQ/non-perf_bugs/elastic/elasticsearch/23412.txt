{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23412","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23412/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23412/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23412/events","html_url":"https://github.com/elastic/elasticsearch/issues/23412","id":210812387,"node_id":"MDU6SXNzdWUyMTA4MTIzODc=","number":23412,"title":"Lost data in Elasticsearch Cluster","user":{"login":"DienNM","id":1940846,"node_id":"MDQ6VXNlcjE5NDA4NDY=","avatar_url":"https://avatars0.githubusercontent.com/u/1940846?v=4","gravatar_id":"","url":"https://api.github.com/users/DienNM","html_url":"https://github.com/DienNM","followers_url":"https://api.github.com/users/DienNM/followers","following_url":"https://api.github.com/users/DienNM/following{/other_user}","gists_url":"https://api.github.com/users/DienNM/gists{/gist_id}","starred_url":"https://api.github.com/users/DienNM/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DienNM/subscriptions","organizations_url":"https://api.github.com/users/DienNM/orgs","repos_url":"https://api.github.com/users/DienNM/repos","events_url":"https://api.github.com/users/DienNM/events{/privacy}","received_events_url":"https://api.github.com/users/DienNM/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-02-28T15:04:38Z","updated_at":"2017-02-28T16:42:46Z","closed_at":"2017-02-28T15:17:37Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\nGitHub is reserved for bug reports and feature requests. The best place\r\nto ask a general question is at the Elastic Discourse forums at\r\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\r\na feature request, please include one and only one of the below blocks\r\nin your new issue. Note that whether you're filing a bug report or a\r\nfeature request, ensure that your submission is for an\r\n[OS that we support](https://www.elastic.co/support/matrix#show_os).\r\nBug reports on an OS that we do not support or feature requests\r\nspecific to an OS that we do not support will be closed.\r\n-->\r\n\r\n<!--\r\nIf you are filing a bug report, please remove the below feature\r\nrequest block and provide responses for all of the below items.\r\n-->\r\n\r\n**Elasticsearch version**: 2.4.1\r\n\r\n**JVM version**: 1.7\r\n\r\n**OS version**: Ubuntu 14.0.10\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\n**Steps to reproduce**:\r\n\r\nI am setting up ES cluster (v.2.4.1). There are 2 nodes in my cluster, called: A, B.\r\nI started 2 nodes and feed data into ES by using java api. My index had 3 shards and 1 replica. I did query from every nodes, I got the same data. Total is 1000 records.\r\n\r\nI stopped Node A. Keep feeding data into ES by my java app. total record I counted from Node B is 1500.\r\n\r\nI stopped Node B. And started Node A. Total records are 1000 in Node A. After some minutes, I started Node B. But total records are 1000 now for both nodes.\r\n\r\nI expected to get 1500 records after Node B started again. But did not. Could you please help on this?\r\n\r\nI just changed the ES config: discovery.zen.ping.multicast.enabled: false discovery.zen.ping.unicast.hosts: [\"Node A\", \"Node B\"]\r\n\r\nMy Java code: servers=ip_nodeA:9300,ip_nodeB:9300\r\n\r\n**Provide logs (if relevant)**:\r\nHere is my java code: \r\nSettings settings = Settings.settingsBuilder()\r\n                .put(\"client.transport.sniff\", true)\r\n                .put(\"cluster.name\", esClusterName)\r\n                //.put(\"client.transport.ping_timeout\", clientPingTimeout)\r\n                .build();\r\n        client = TransportClient.builder().settings(settings).build();\r\n        for (String[] server : servers) {\r\n            String host = server[0];\r\n            int port = Integer.valueOf(server[1]);\r\n            client.addTransportAddress(new InetSocketTransportAddress(InetAddress.getByName(host), port));\r\n        }\r\n<!--\r\nIf you are filing a feature request, please remove the above bug\r\nreport block and provide responses for all of the below items.\r\n-->\r\n\r\n**Describe the feature**:\r\n","closed_by":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"performed_via_github_app":null}