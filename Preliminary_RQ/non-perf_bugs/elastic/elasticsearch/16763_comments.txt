[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/187262539","html_url":"https://github.com/elastic/elasticsearch/issues/16763#issuecomment-187262539","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16763","id":187262539,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NzI2MjUzOQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-02-22T16:53:17Z","updated_at":"2016-02-22T16:53:17Z","author_association":"MEMBER","body":"I suspect that pre-allocating the indices is not working as well with the prediction of shard sizes added in https://github.com/elastic/elasticsearch/pull/11185, @mikemccand does that sound like a good culprit to you?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/187263205","html_url":"https://github.com/elastic/elasticsearch/issues/16763#issuecomment-187263205","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16763","id":187263205,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NzI2MzIwNQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-02-22T16:54:03Z","updated_at":"2016-02-22T16:54:03Z","author_association":"MEMBER","body":"https://github.com/elastic/elasticsearch/pull/12947 may also be at work here too\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/187320823","html_url":"https://github.com/elastic/elasticsearch/issues/16763#issuecomment-187320823","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16763","id":187320823,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NzMyMDgyMw==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2016-02-22T18:59:23Z","updated_at":"2016-02-22T18:59:23Z","author_association":"CONTRIBUTOR","body":"> @mikemccand does that sound like a good culprit to you?\n\nYes.\n\n> the IndexService instance is for per index\n> \n> I feel the \"dataPathToShardCount\" map should be global to all indices on a node, not local to a single index, but maybe there is better solution.\n\nOh this is bad: I agree, the `dataPathToShardCount` should (I and I intended it to be originally in #11185!) be across all indices, not just this one index.  Hrmph.\n\nHowever, I think another fix by @s1monw allowed ES shard balancing to \"see\" individual `path.data` on a single node, and move shards off on of a node's `path.data` that was filling up even if the other `path.data`s on the node had plenty of free space?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/187489212","html_url":"https://github.com/elastic/elasticsearch/issues/16763#issuecomment-187489212","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16763","id":187489212,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NzQ4OTIxMg==","user":{"login":"Dieken","id":2365,"node_id":"MDQ6VXNlcjIzNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/2365?v=4","gravatar_id":"","url":"https://api.github.com/users/Dieken","html_url":"https://github.com/Dieken","followers_url":"https://api.github.com/users/Dieken/followers","following_url":"https://api.github.com/users/Dieken/following{/other_user}","gists_url":"https://api.github.com/users/Dieken/gists{/gist_id}","starred_url":"https://api.github.com/users/Dieken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dieken/subscriptions","organizations_url":"https://api.github.com/users/Dieken/orgs","repos_url":"https://api.github.com/users/Dieken/repos","events_url":"https://api.github.com/users/Dieken/events{/privacy}","received_events_url":"https://api.github.com/users/Dieken/received_events","type":"User","site_admin":false},"created_at":"2016-02-23T02:28:03Z","updated_at":"2016-02-23T02:28:03Z","author_association":"NONE","body":"@mikemccand,  the ability to move shards among different disks on a node is good to have,  we always can't assure different indices have similar sizes,  in fact they usually vary a lot due to hourly or daily traffic pattern.\n\nBut an initial even distribution is still very nice,  it can avoid as more shard moving as possible,  I wouldn't like to see ES node suddenly competes disk access with itself for shard moving, segment refresh, segment merge.\n\nOh, maybe I should just go to RAID :-)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/187791832","html_url":"https://github.com/elastic/elasticsearch/issues/16763#issuecomment-187791832","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16763","id":187791832,"node_id":"MDEyOklzc3VlQ29tbWVudDE4Nzc5MTgzMg==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2016-02-23T17:00:53Z","updated_at":"2016-02-23T17:00:53Z","author_association":"CONTRIBUTOR","body":"@Dieken Yeah I understand ... if you have ideas on how to fix the `dataPathToShardCount` to be across all indices instead, that would be great too ;)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219949647","html_url":"https://github.com/elastic/elasticsearch/issues/16763#issuecomment-219949647","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16763","id":219949647,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTk0OTY0Nw==","user":{"login":"danopia","id":40628,"node_id":"MDQ6VXNlcjQwNjI4","avatar_url":"https://avatars2.githubusercontent.com/u/40628?v=4","gravatar_id":"","url":"https://api.github.com/users/danopia","html_url":"https://github.com/danopia","followers_url":"https://api.github.com/users/danopia/followers","following_url":"https://api.github.com/users/danopia/following{/other_user}","gists_url":"https://api.github.com/users/danopia/gists{/gist_id}","starred_url":"https://api.github.com/users/danopia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danopia/subscriptions","organizations_url":"https://api.github.com/users/danopia/orgs","repos_url":"https://api.github.com/users/danopia/repos","events_url":"https://api.github.com/users/danopia/events{/privacy}","received_events_url":"https://api.github.com/users/danopia/received_events","type":"User","site_admin":false},"created_at":"2016-05-18T07:38:57Z","updated_at":"2016-05-18T07:39:23Z","author_association":"NONE","body":"Any updates on this? I'm working with a write-heavy cluster and I value distributing disk throughput over file size. New indexes were just allocated with all shards a single path.disk out of the 4 due to unbalance in disk usage.\n\nAn API to relocate shards between path.datas would be enough to deal with this. Right now it looks like I have to shut down nodes and manually move folders.\n\nThanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/338061465","html_url":"https://github.com/elastic/elasticsearch/issues/16763#issuecomment-338061465","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16763","id":338061465,"node_id":"MDEyOklzc3VlQ29tbWVudDMzODA2MTQ2NQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2017-10-19T23:02:15Z","updated_at":"2017-10-19T23:02:15Z","author_association":"MEMBER","body":"With #26654 and #27039, the distribution problem should be fixed now.\r\n\r\nThis doesn't add the API to relocate shards between `path.data` paths though, that would be a different thing.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/373313317","html_url":"https://github.com/elastic/elasticsearch/issues/16763#issuecomment-373313317","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16763","id":373313317,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MzMxMzMxNw==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-03-15T09:28:18Z","updated_at":"2018-03-15T09:28:18Z","author_association":"CONTRIBUTOR","body":"@dakrone I'm tempted to close this as there hasn't been overwhelming interest in it and I don't think we are planning on working on sub-node allocation decisions in the foreseeable future. WDYT?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/373426815","html_url":"https://github.com/elastic/elasticsearch/issues/16763#issuecomment-373426815","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16763","id":373426815,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MzQyNjgxNQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2018-03-15T15:56:07Z","updated_at":"2018-03-15T15:56:07Z","author_association":"MEMBER","body":"@DaveCTurner I agree, I think this can be closed for now as we've addressed a portion of it.\r\n\r\nIf anyone disagrees let us know and we can revisit!","performed_via_github_app":null}]