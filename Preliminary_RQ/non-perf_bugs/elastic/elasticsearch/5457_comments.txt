[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/38034905","html_url":"https://github.com/elastic/elasticsearch/issues/5457#issuecomment-38034905","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5457","id":38034905,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MDM0OTA1","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-03-19T10:16:23Z","updated_at":"2014-03-19T10:16:23Z","author_association":"CONTRIBUTOR","body":"I tried to reproduce on Elasticsearch's master branch but it doesn't reproduce. What version of Elasticsearch are you using?\n\nIf you run a search on your index, can you see both field values? (to make sure the problem is not on the client)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/38167126","html_url":"https://github.com/elastic/elasticsearch/issues/5457#issuecomment-38167126","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5457","id":38167126,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MTY3MTI2","user":{"login":"jimmyjones2","id":2991805,"node_id":"MDQ6VXNlcjI5OTE4MDU=","avatar_url":"https://avatars2.githubusercontent.com/u/2991805?v=4","gravatar_id":"","url":"https://api.github.com/users/jimmyjones2","html_url":"https://github.com/jimmyjones2","followers_url":"https://api.github.com/users/jimmyjones2/followers","following_url":"https://api.github.com/users/jimmyjones2/following{/other_user}","gists_url":"https://api.github.com/users/jimmyjones2/gists{/gist_id}","starred_url":"https://api.github.com/users/jimmyjones2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimmyjones2/subscriptions","organizations_url":"https://api.github.com/users/jimmyjones2/orgs","repos_url":"https://api.github.com/users/jimmyjones2/repos","events_url":"https://api.github.com/users/jimmyjones2/events{/privacy}","received_events_url":"https://api.github.com/users/jimmyjones2/received_events","type":"User","site_admin":false},"created_at":"2014-03-20T13:38:25Z","updated_at":"2014-03-20T13:38:25Z","author_association":"CONTRIBUTOR","body":"I've done some further testing:\n\n``` bash\n# Add two documents, _id:1 with a field of length 256, _id:2 with length 255\ncurl -XPUT 'http://localhost:9200/blog/post/1' -d'{\"fuzz\": \"jashdygayusdgyuagsdyugayusdgyuagsyudgayusgdyusagduyguguygyuftftyftksdfkhsdfkushdfkuhsdfkuhsfdkuhskdufhksudhfkushdfkuhsdkfuhsdfksasdiuhsadiuhasdiuahsdiuahsdiuashdiuahsdiuhasiudhaiushdaiushdsdfoijsdfoijsdfoijsdfoijsdfoijsdfoijsdfoijsdoifjsdoifjsdf12345678901\" }'\ncurl -XPUT 'http://localhost:9200/blog/post/2' -d'{\"fuzz\": \"jashdygayusdgyuagsdyugayusdgyuagsyudgayusgdyusagduyguguygyuftftyftksdfkhsdfkushdfkuhsdfkuhsfdkuhskdufhksudhfkushdfkuhsdkfuhsdfksasdiuhsadiuhasdiuahsdiuahsdiuashdiuahsdiuhasiudhaiushdaiushdsdfoijsdfoijsdfoijsdfoijsdfoijsdfoijsdfoijsdoifjsdoifjsdf1234567890\" }'\n\n# Try faceting the long field, only returns _id:2\ncurl -XPOST 'http://localhost:9200/blog/_search?pretty=true' -d '{\"facets\":{\"terms\":{\"terms\":{\"field\":\"fuzz\",\"size\":10,\"order\":\"count\",\"exclude\":[]},\"facet_filter\":{\"fquery\":{\"query\":{\"filtered\":{\"query\":{\"bool\":{\"should\":[{\"query_string\":{\"query\":\"*\"}}]}},\"filter\":{\"bool\":{\"must\":[{\"match_all\":{}}]}}}}}}}},\"size\":0}'\n\n# Try searching for both records, only returns _id:2\ncurl -XPOST 'http://localhost:9200/blog/_search?q=fuzz:jas*&pretty=true'\n\n# Return both documents, as expected\ncurl -XPOST 'http://localhost:9200/blog/_search?q=_id:1%20_id:2&pretty=true'\n```\n\nTested on 1.0.1, 1.0 branch, 1.x branch, and master. Same behaviour on all.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/38168783","html_url":"https://github.com/elastic/elasticsearch/issues/5457#issuecomment-38168783","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5457","id":38168783,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MTY4Nzgz","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2014-03-20T13:53:45Z","updated_at":"2014-03-20T13:54:38Z","author_association":"MEMBER","body":"The default analyzer removes tokens over 255 characters long, are you sure that the `not_analyzed` setting has been correctly applied to your index? What does `curl 'localhost:9200/blog/_mapping'` return?\n\nYou can verify the dropping behavior with:\n\n```\nÂ» curl -XPOST 'localhost:9200/_analyze?pretty' -d'jashdygayusdgyuagsdyugayusdgyuagsyudgayusgdyusagduyguguygyuftftyftksdfkhsdfkushdfkuhsdfkuhsfdkuhskdufhksudhfkushdfkuhsdkfuhsdfksasdiuhsadiuhasdiuahsdiuahsdiuashdiuahsdiuhasiudhaiushdaiushdsdfoijsdfoijsdfoijsdfoijsdfoijsdfoijsdfoijsdoifjsdoifjsdf12345678901'\n{\n  \"tokens\" : [ ]\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/38217472","html_url":"https://github.com/elastic/elasticsearch/issues/5457#issuecomment-38217472","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5457","id":38217472,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MjE3NDcy","user":{"login":"jimmyjones2","id":2991805,"node_id":"MDQ6VXNlcjI5OTE4MDU=","avatar_url":"https://avatars2.githubusercontent.com/u/2991805?v=4","gravatar_id":"","url":"https://api.github.com/users/jimmyjones2","html_url":"https://github.com/jimmyjones2","followers_url":"https://api.github.com/users/jimmyjones2/followers","following_url":"https://api.github.com/users/jimmyjones2/following{/other_user}","gists_url":"https://api.github.com/users/jimmyjones2/gists{/gist_id}","starred_url":"https://api.github.com/users/jimmyjones2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimmyjones2/subscriptions","organizations_url":"https://api.github.com/users/jimmyjones2/orgs","repos_url":"https://api.github.com/users/jimmyjones2/repos","events_url":"https://api.github.com/users/jimmyjones2/events{/privacy}","received_events_url":"https://api.github.com/users/jimmyjones2/received_events","type":"User","site_admin":false},"created_at":"2014-03-20T20:32:36Z","updated_at":"2014-03-20T20:32:36Z","author_association":"CONTRIBUTOR","body":"Don't know what I was doing wrong, but now when setting not_analyzed I get the result I expected. Thanks for both your help!\n","performed_via_github_app":null}]