{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43724","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43724/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43724/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43724/events","html_url":"https://github.com/elastic/elasticsearch/issues/43724","id":461831169,"node_id":"MDU6SXNzdWU0NjE4MzExNjk=","number":43724,"title":"[Docs] refresh_interval change made it unclear","user":{"login":"tbuchier","id":16001560,"node_id":"MDQ6VXNlcjE2MDAxNTYw","avatar_url":"https://avatars0.githubusercontent.com/u/16001560?v=4","gravatar_id":"","url":"https://api.github.com/users/tbuchier","html_url":"https://github.com/tbuchier","followers_url":"https://api.github.com/users/tbuchier/followers","following_url":"https://api.github.com/users/tbuchier/following{/other_user}","gists_url":"https://api.github.com/users/tbuchier/gists{/gist_id}","starred_url":"https://api.github.com/users/tbuchier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbuchier/subscriptions","organizations_url":"https://api.github.com/users/tbuchier/orgs","repos_url":"https://api.github.com/users/tbuchier/repos","events_url":"https://api.github.com/users/tbuchier/events{/privacy}","received_events_url":"https://api.github.com/users/tbuchier/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"}],"state":"closed","locked":false,"assignee":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"assignees":[{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2019-06-28T02:54:00Z","updated_at":"2019-07-15T09:26:56Z","closed_at":"2019-07-15T09:26:56Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Hello, \r\n\r\nThe refresh_interval documentation have changed in 7.0+, making it's new behavior unclear. \r\n\r\n**Describe the Issue**:\r\n\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/master/tune-for-indexing-speed.html#_unset_or_increase_the_refresh_interval\r\n\r\n> By default, Elasticsearch runs this operation every second, but only on indices that have received one search request or more in the last 30 seconds. This is the optimal configuration if you have no or very little search traffic (e.g. less than one search request every 5 minutes) and want to optimize for indexing speed.\r\n> \r\n> On the other hand, if your index experiences regular search requests, this default behavior means that Elasticsearch will refresh your index every 1 second. If you can afford to increase the amount of time between when a document gets indexed and when it becomes visible, increasing the index.refresh_interval to a larger value, e.g. 30s, might help improve indexing speed.\r\n\r\nIf I modify the refresh_interval setting, the documentation isn't clear if the behavior \" but only on indices that have received one search request or more in the last 30 seconds.\" is kept or not.\r\n\r\n**Example :** \r\n\r\nIf I set  refresh_interval to 5s\r\nIf I'll have a refresh:\r\n - every 5 seconds, but only on indices that have received one search request or more in the last 30 seconds.\r\n\r\n- every 5 seconds contact, no matter what\r\n\r\nFrom my testing, the behavior (only on indices that have received one search request or more in the last 30 seconds) \"break\" and isn't applied anymore if I modify the refresh_interval. \r\n\r\nI think documentation should specify that\r\n","closed_by":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"performed_via_github_app":null}