[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219673552","html_url":"https://github.com/elastic/elasticsearch/issues/18391#issuecomment-219673552","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18391","id":219673552,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTY3MzU1Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T10:02:09Z","updated_at":"2016-05-17T10:02:09Z","author_association":"CONTRIBUTOR","body":"Hi @vchalmel \n\nCould you provide a complete (and minimal) curl recreation showing exactly what you're doing, the results you're getting, and how they differ from what you expect?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219675529","html_url":"https://github.com/elastic/elasticsearch/issues/18391#issuecomment-219675529","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18391","id":219675529,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTY3NTUyOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T10:11:13Z","updated_at":"2016-05-17T10:11:13Z","author_association":"CONTRIBUTOR","body":"Just use the analyze API:\nhttps://www.elastic.co/guide/en/elasticsearch/reference/2.3/indices-analyze.html\n\nOn Tue, 17 May 2016 at 12:06 CHALMEL notifications@github.com wrote:\n\n> Hi @clintongormley https://github.com/clintongormley\n> I would be glad to... but I'm afraid I don't know how to get the detail of\n> generated token using curl, I always use kopf to test my analysis...\n> \n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/elastic/elasticsearch/issues/18391#issuecomment-219674522\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219677650","html_url":"https://github.com/elastic/elasticsearch/issues/18391#issuecomment-219677650","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18391","id":219677650,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTY3NzY1MA==","user":{"login":"vchalmel","id":12208673,"node_id":"MDQ6VXNlcjEyMjA4Njcz","avatar_url":"https://avatars0.githubusercontent.com/u/12208673?v=4","gravatar_id":"","url":"https://api.github.com/users/vchalmel","html_url":"https://github.com/vchalmel","followers_url":"https://api.github.com/users/vchalmel/followers","following_url":"https://api.github.com/users/vchalmel/following{/other_user}","gists_url":"https://api.github.com/users/vchalmel/gists{/gist_id}","starred_url":"https://api.github.com/users/vchalmel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vchalmel/subscriptions","organizations_url":"https://api.github.com/users/vchalmel/orgs","repos_url":"https://api.github.com/users/vchalmel/repos","events_url":"https://api.github.com/users/vchalmel/events{/privacy}","received_events_url":"https://api.github.com/users/vchalmel/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T10:21:34Z","updated_at":"2016-05-17T10:44:33Z","author_association":"NONE","body":"Hi @clintongormley \n\n```\ncurl -XGET 'localhost:9200/test_marches_publics/_analyze' -d '\n{\n\"analyzer\":\"test\",\n\"text\" : \"Scandale au pays de Candy\"\n}\n```\n\ngive me, with default \"filler_token\"\n\n``` json\n{\"tokens\":[{\"token\":\"scandale\",\"start_offset\":0,\"end_offset\":8,\"type\":\"<ALPHANUM>\",\"position\":0},\n{\"token\":\"scandale _\",\"start_offset\":0,\"end_offset\":12,\"type\":\"shingle\",\"position\":0},\n{\"token\":\"scandale _ pays\",\"start_offset\":0,\"end_offset\":16,\"type\":\"shingle\",\"position\":0},\n{\"token\":\"scandale _ pays _\",\"start_offset\":0,\"end_offset\":20,\"type\":\"shingle\",\"position\":0},\n{\"token\":\"_ pays\",\"start_offset\":12,\"end_offset\":16,\"type\":\"shingle\",\"position\":1},\n{\"token\":\"_ pays _\",\"start_offset\":12,\"end_offset\":20,\"type\":\"shingle\",\"position\":1},\n{\"token\":\"_ pays _ candy\",\"start_offset\":12,\"end_offset\":25,\"type\":\"shingle\",\"position\":1},\n{\"token\":\"pays\",\"start_offset\":12,\"end_offset\":16,\"type\":\"<ALPHANUM>\",\"position\":2},\n{\"token\":\"pays _\",\"start_offset\":12,\"end_offset\":20,\"type\":\"shingle\",\"position\":2},\n{\"token\":\"pays _ candy\",\"start_offset\":12,\"end_offset\":25,\"type\":\"shingle\",\"position\":2},\n{\"token\":\"_ candy\",\"start_offset\":20,\"end_offset\":25,\"type\":\"shingle\",\"position\":3},\n{\"token\":\"candy\",\"start_offset\":20,\"end_offset\":25,\"type\":\"<ALPHANUM>\",\"position\":4}]}\n```\n\nand with \"filler_token\":\"\"\n\n``` json\n{\"tokens\":[{\"token\":\"scandale\",\"start_offset\":0,\"end_offset\":8,\"type\":\"<ALPHANUM>\",\"position\":0},\n{\"token\":\"scandale  pays\",\"start_offset\":0,\"end_offset\":16,\"type\":\"shingle\",\"position\":0},\n{\"token\":\"pays\",\"start_offset\":12,\"end_offset\":16,\"type\":\"shingle\",\"position\":1},\n{\"token\":\"pays  candy\",\"start_offset\":12,\"end_offset\":25,\"type\":\"shingle\",\"position\":1},\n{\"token\":\"pays\",\"start_offset\":12,\"end_offset\":16,\"type\":\"<ALPHANUM>\",\"position\":2},\n{\"token\":\"pays  candy\",\"start_offset\":12,\"end_offset\":25,\"type\":\"shingle\",\"position\":2},\n{\"token\":\"candy\",\"start_offset\":20,\"end_offset\":25,\"type\":\"shingle\",\"position\":3},\n{\"token\":\"candy\",\"start_offset\":20,\"end_offset\":25,\"type\":\"<ALPHANUM>\",\"position\":4}]}\n```\n\nI would want, for example (among other duplicates), only one token \"pays\", and a token \"scandale pays candy\" which currently overthrow the max shingle size due to deleted stopwords \"ghosts\".\nAnother effect of those deleted stopwords \"ghosts\",  the multiple spaces \"  \" (one for each deleted stopword) instead of \" \" in the shingles.\nWhat I would want :\n\n``` json\n{\"tokens\":[{\"token\":\"scandale\",\"start_offset\":0,\"end_offset\":8,\"type\":\"<ALPHANUM>\",\"position\":0},\n{\"token\":\"scandale pays\",\"start_offset\":0,\"end_offset\":16,\"type\":\"shingle\",\"position\":0},\n{\"token\":\"scandale pays candy\",\"start_offset\":0,\"end_offset\":25,\"type\":\"shingle\",\"position\":0}\n{\"token\":\"pays\",\"start_offset\":12,\"end_offset\":16,\"type\":\"shingle\",\"position\":1},\n{\"token\":\"pays candy\",\"start_offset\":12,\"end_offset\":25,\"type\":\"shingle\",\"position\":1},\n{\"token\":\"candy\",\"start_offset\":20,\"end_offset\":25,\"type\":\"<ALPHANUM>\",\"position\":4}]}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219679932","html_url":"https://github.com/elastic/elasticsearch/issues/18391#issuecomment-219679932","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18391","id":219679932,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTY3OTkzMg==","user":{"login":"vchalmel","id":12208673,"node_id":"MDQ6VXNlcjEyMjA4Njcz","avatar_url":"https://avatars0.githubusercontent.com/u/12208673?v=4","gravatar_id":"","url":"https://api.github.com/users/vchalmel","html_url":"https://github.com/vchalmel","followers_url":"https://api.github.com/users/vchalmel/followers","following_url":"https://api.github.com/users/vchalmel/following{/other_user}","gists_url":"https://api.github.com/users/vchalmel/gists{/gist_id}","starred_url":"https://api.github.com/users/vchalmel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vchalmel/subscriptions","organizations_url":"https://api.github.com/users/vchalmel/orgs","repos_url":"https://api.github.com/users/vchalmel/repos","events_url":"https://api.github.com/users/vchalmel/events{/privacy}","received_events_url":"https://api.github.com/users/vchalmel/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T10:32:08Z","updated_at":"2016-05-17T10:42:21Z","author_association":"NONE","body":"N.b. I had a mistake (now edited) in my first post, in \"custom_unique\", \"only_on_same_position\" is set to true.\nIf this parameter is false, the \"trim\"/\"custom_unique\" get rid of the duplicated tokens, but I don't want to delete identical tokens from distinct parts of the original text and every other issue remains.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219682733","html_url":"https://github.com/elastic/elasticsearch/issues/18391#issuecomment-219682733","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18391","id":219682733,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTY4MjczMw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T10:45:44Z","updated_at":"2016-05-17T10:45:44Z","author_association":"CONTRIBUTOR","body":"@vchalmel positions are used for phrase queries, offsets are used for highlighting. It's a mistake to try to use a shingled field for either of these purposes.  A shingled field is used for finding associated words, and that's it.  You should use a shingled field in a bool.should clause to boost the relevance of docs with matching fields.\n\nAlso, having min=max shingle of 2 is usually all you need. Remove the unigrams.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219686975","html_url":"https://github.com/elastic/elasticsearch/issues/18391#issuecomment-219686975","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18391","id":219686975,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTY4Njk3NQ==","user":{"login":"vchalmel","id":12208673,"node_id":"MDQ6VXNlcjEyMjA4Njcz","avatar_url":"https://avatars0.githubusercontent.com/u/12208673?v=4","gravatar_id":"","url":"https://api.github.com/users/vchalmel","html_url":"https://github.com/vchalmel","followers_url":"https://api.github.com/users/vchalmel/followers","following_url":"https://api.github.com/users/vchalmel/following{/other_user}","gists_url":"https://api.github.com/users/vchalmel/gists{/gist_id}","starred_url":"https://api.github.com/users/vchalmel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vchalmel/subscriptions","organizations_url":"https://api.github.com/users/vchalmel/orgs","repos_url":"https://api.github.com/users/vchalmel/repos","events_url":"https://api.github.com/users/vchalmel/events{/privacy}","received_events_url":"https://api.github.com/users/vchalmel/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T11:07:27Z","updated_at":"2016-05-17T11:11:58Z","author_association":"NONE","body":"I don't understand your objection... Is that only a usecase scenario issue ? Or am I deeply wrong about the rôle of those tokens differing only by offset or position ?\n- If I remove the unigrams and search on a unique word, will it match ?\n- If \"pays\" is duplicated three times here, are you saying that a search on \"pays\" won't get a higher score on this document than on a document where it is not surrounded by stopwords and hence is not duplicated because tokens differing only by positions and offset are only affecting highlighting and phrase queries ?\n\nYou seem also to consider that shingles should only be used in a complementary field to boost score in queries if associated words are found, but that is simply not my use case... I want an index with all these tokens, both unigrams and shingles up to three words at least, because i will use them in a text-mining algorithm... \n\nOn the other hand if min=max shingle=2 in that case \"fox to be quick\" won't generate the shingle \"fox quick\"\nAnd what about the issue with the extras spaces ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219690020","html_url":"https://github.com/elastic/elasticsearch/issues/18391#issuecomment-219690020","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18391","id":219690020,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTY5MDAyMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T11:23:14Z","updated_at":"2016-05-17T11:23:14Z","author_association":"CONTRIBUTOR","body":"> If I remove the unigrams and search on a unique word, will it match ?\n\nNo.  But if you're using shingles as a secondary field for boosting, then the single word will match in the primary field you're searching on.\n\n> If \"pays\" is duplicated three times here, are you saying that a search on \"pays\" won't get a higher score on this document than on a document where it is not surrounded by stopwords and hence is not duplicated because tokens differing only by positions and offset are only affecting highlighting and phrase queries ?\n\nYes it will get a higher score.  But then it is used more frequently, so it should get a higher score.  If you don't want it to match when it is combined with different stopwords, then leave the stopwords there (or use a different filler token).\n\n> You seem also to consider that shingles should only be used in a complementary field to boost score in queries if associated words are found, but that is simply not my use case... I want an index with all these tokens, both unigrams and shingles up to three words at least, because i will use them in a text-mining algorithm...\n\nOk...  then perhaps your requirements are different, but I don't understand what your exact requirements are.  All I'm saying is that this is working correctly as is.  Token filters are not allowed to change positions or offsets. That jobs belongs solely to the tokenizer.  This comes directly from Lucene and isn't something we can change in Elasticsearch.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219693430","html_url":"https://github.com/elastic/elasticsearch/issues/18391#issuecomment-219693430","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18391","id":219693430,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTY5MzQzMA==","user":{"login":"vchalmel","id":12208673,"node_id":"MDQ6VXNlcjEyMjA4Njcz","avatar_url":"https://avatars0.githubusercontent.com/u/12208673?v=4","gravatar_id":"","url":"https://api.github.com/users/vchalmel","html_url":"https://github.com/vchalmel","followers_url":"https://api.github.com/users/vchalmel/followers","following_url":"https://api.github.com/users/vchalmel/following{/other_user}","gists_url":"https://api.github.com/users/vchalmel/gists{/gist_id}","starred_url":"https://api.github.com/users/vchalmel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vchalmel/subscriptions","organizations_url":"https://api.github.com/users/vchalmel/orgs","repos_url":"https://api.github.com/users/vchalmel/repos","events_url":"https://api.github.com/users/vchalmel/events{/privacy}","received_events_url":"https://api.github.com/users/vchalmel/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T11:41:54Z","updated_at":"2016-05-17T11:43:14Z","author_association":"NONE","body":"Thanks for your explanations !\n\n> Token filters are not allowed to change positions or offsets. That jobs belongs solely to the tokenizer.\n\nOh that is something I failed to take into account... \nThat would prevent us to re-calculate the size of the shingle to ignore deleted stopwords with the current formula, am I right ?... But how about a parameter to prevent the creation of a shingle starting or ending with a deleted stopword like these : \n\n```\n{\"token\":\"pays\",\"start_offset\":12,\"end_offset\":16,\"type\":\"shingle\",\"position\":1}, /*virtually start with deleted stopword \"au\"*/\n{\"token\":\"pays  candy\",\"start_offset\":12,\"end_offset\":25,\"type\":\"shingle\",\"position\":1},/*virtually start with deleted stopword \"au\"*/\n{\"token\":\"pays\",\"start_offset\":12,\"end_offset\":16,\"type\":\"<ALPHANUM>\",\"position\":2}, /*this unigram is duplicate with first token because due to stopwords I have shingles of size 2 containing only 1 word*/\n{\"token\":\"pays  candy\",\"start_offset\":12,\"end_offset\":25,\"type\":\"shingle\",\"position\":2}, /*duplicate with second token*/\n```\n\nHow could the size of a stopword being different of the count of words effectively existing in it be \"working correctly as is\" ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/397197862","html_url":"https://github.com/elastic/elasticsearch/issues/18391#issuecomment-397197862","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18391","id":397197862,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NzE5Nzg2Mg==","user":{"login":"alejandro-marques","id":12656205,"node_id":"MDQ6VXNlcjEyNjU2MjA1","avatar_url":"https://avatars0.githubusercontent.com/u/12656205?v=4","gravatar_id":"","url":"https://api.github.com/users/alejandro-marques","html_url":"https://github.com/alejandro-marques","followers_url":"https://api.github.com/users/alejandro-marques/followers","following_url":"https://api.github.com/users/alejandro-marques/following{/other_user}","gists_url":"https://api.github.com/users/alejandro-marques/gists{/gist_id}","starred_url":"https://api.github.com/users/alejandro-marques/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alejandro-marques/subscriptions","organizations_url":"https://api.github.com/users/alejandro-marques/orgs","repos_url":"https://api.github.com/users/alejandro-marques/repos","events_url":"https://api.github.com/users/alejandro-marques/events{/privacy}","received_events_url":"https://api.github.com/users/alejandro-marques/received_events","type":"User","site_admin":false},"created_at":"2018-06-14T07:23:39Z","updated_at":"2018-06-14T07:24:41Z","author_association":"NONE","body":"Hi,\r\n\r\nI would like to bring back this issue as I think one of the main reasons for needing the stop words being removed has not been taken into account.\r\n\r\nI think the main impact of not ignoring the stopwords positions is when you have to aggregate by a shingle analyzed field, in those cases you either end up with underscores in your results or several white spaces making results that should be equal be treated as different values.\r\n\r\nIn fact I don't get the point of having the option of configuring the token used to replace the stopword, but keeping the spaces if you set \"\" as filler token.\r\n\r\nLet's put an easy example of a nice functionallity that could be achieved via shingles and aggregations that can not be done properly due to stop words positions not being ignored. If I want a tag cloud of words and group of words appearing in a text field I could do it by analyzing the field with shingles (let's say 1-3 shingles) and then making an aggregation by that field (setting fielddata=true). However I don't need the stop words for a tag cloud, but removing them will result on having for example, for \"word1 stopword word2\" and \"word1 word2\" different aggregation values (\"word1  word2\" and \"word1 word2\"), which may look the same but one has two whitespaces and the other just one.\r\n\r\nI'm facing this same problem while trying to implement an amazon-like autocomplete that is based on a n-gram search and an aggregation over a shingle analyzed field. Only reasonable way I found of achieving what I need is generating an additional field before sending the document to elasticsearch removing the stopwords so they would not be taken into account. And that is just cause when I try to make that aggregation and remove the stop words, they are removed but their postions are still taken into account when generating the aggregation results.\r\n\r\nTherefore, as there is already a \"filler_token\" parameter I think it makes sense that if you set \"\" as filler the multiple spaces resulting of the stopword removal are removed too.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/457011245","html_url":"https://github.com/elastic/elasticsearch/issues/18391#issuecomment-457011245","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18391","id":457011245,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzAxMTI0NQ==","user":{"login":"fhinze","id":46979818,"node_id":"MDQ6VXNlcjQ2OTc5ODE4","avatar_url":"https://avatars3.githubusercontent.com/u/46979818?v=4","gravatar_id":"","url":"https://api.github.com/users/fhinze","html_url":"https://github.com/fhinze","followers_url":"https://api.github.com/users/fhinze/followers","following_url":"https://api.github.com/users/fhinze/following{/other_user}","gists_url":"https://api.github.com/users/fhinze/gists{/gist_id}","starred_url":"https://api.github.com/users/fhinze/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fhinze/subscriptions","organizations_url":"https://api.github.com/users/fhinze/orgs","repos_url":"https://api.github.com/users/fhinze/repos","events_url":"https://api.github.com/users/fhinze/events{/privacy}","received_events_url":"https://api.github.com/users/fhinze/received_events","type":"User","site_admin":false},"created_at":"2019-01-23T23:46:59Z","updated_at":"2019-01-23T23:46:59Z","author_association":"NONE","body":"Hi,\r\n\r\nyou can remove the redundant whitespaces by using the pattern replace char filter like so:\r\n\r\n`\"whitespace_remove\": {\r\n        \"type\": \"pattern_replace\",\r\n        \"pattern\": \" +\",\r\n        \"replacement\": \" \"\r\n        }`\r\n\r\nHowever, you'll still have the same issue @vchalmel has. \r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/460926958","html_url":"https://github.com/elastic/elasticsearch/issues/18391#issuecomment-460926958","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18391","id":460926958,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDkyNjk1OA==","user":{"login":"alejandro-marques","id":12656205,"node_id":"MDQ6VXNlcjEyNjU2MjA1","avatar_url":"https://avatars0.githubusercontent.com/u/12656205?v=4","gravatar_id":"","url":"https://api.github.com/users/alejandro-marques","html_url":"https://github.com/alejandro-marques","followers_url":"https://api.github.com/users/alejandro-marques/followers","following_url":"https://api.github.com/users/alejandro-marques/following{/other_user}","gists_url":"https://api.github.com/users/alejandro-marques/gists{/gist_id}","starred_url":"https://api.github.com/users/alejandro-marques/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alejandro-marques/subscriptions","organizations_url":"https://api.github.com/users/alejandro-marques/orgs","repos_url":"https://api.github.com/users/alejandro-marques/repos","events_url":"https://api.github.com/users/alejandro-marques/events{/privacy}","received_events_url":"https://api.github.com/users/alejandro-marques/received_events","type":"User","site_admin":false},"created_at":"2019-02-06T07:33:13Z","updated_at":"2019-02-06T07:33:13Z","author_association":"NONE","body":"Thanks for the suggestion @fhinze. I would still prefer something like the \"preserve_position_increments=false\" from completion suggester, but the \"pattern_replace\" filter combined with a \"trim\" one worked perfectly in order to remove those whitespaces left by stopwords.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/493262315","html_url":"https://github.com/elastic/elasticsearch/issues/18391#issuecomment-493262315","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18391","id":493262315,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MzI2MjMxNQ==","user":{"login":"amateurCoder","id":3957998,"node_id":"MDQ6VXNlcjM5NTc5OTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3957998?v=4","gravatar_id":"","url":"https://api.github.com/users/amateurCoder","html_url":"https://github.com/amateurCoder","followers_url":"https://api.github.com/users/amateurCoder/followers","following_url":"https://api.github.com/users/amateurCoder/following{/other_user}","gists_url":"https://api.github.com/users/amateurCoder/gists{/gist_id}","starred_url":"https://api.github.com/users/amateurCoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amateurCoder/subscriptions","organizations_url":"https://api.github.com/users/amateurCoder/orgs","repos_url":"https://api.github.com/users/amateurCoder/repos","events_url":"https://api.github.com/users/amateurCoder/events{/privacy}","received_events_url":"https://api.github.com/users/amateurCoder/received_events","type":"User","site_admin":false},"created_at":"2019-05-16T23:14:10Z","updated_at":"2019-05-16T23:14:10Z","author_association":"NONE","body":"@vchalmel Were you able to find a workaround for this issue? I am facing the same issue when using shingles and stop_words together and want to dedupe shingles based on start_offset.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/566262098","html_url":"https://github.com/elastic/elasticsearch/issues/18391#issuecomment-566262098","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18391","id":566262098,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjI2MjA5OA==","user":{"login":"ABDULAZIZALQATAN","id":47518534,"node_id":"MDQ6VXNlcjQ3NTE4NTM0","avatar_url":"https://avatars3.githubusercontent.com/u/47518534?v=4","gravatar_id":"","url":"https://api.github.com/users/ABDULAZIZALQATAN","html_url":"https://github.com/ABDULAZIZALQATAN","followers_url":"https://api.github.com/users/ABDULAZIZALQATAN/followers","following_url":"https://api.github.com/users/ABDULAZIZALQATAN/following{/other_user}","gists_url":"https://api.github.com/users/ABDULAZIZALQATAN/gists{/gist_id}","starred_url":"https://api.github.com/users/ABDULAZIZALQATAN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ABDULAZIZALQATAN/subscriptions","organizations_url":"https://api.github.com/users/ABDULAZIZALQATAN/orgs","repos_url":"https://api.github.com/users/ABDULAZIZALQATAN/repos","events_url":"https://api.github.com/users/ABDULAZIZALQATAN/events{/privacy}","received_events_url":"https://api.github.com/users/ABDULAZIZALQATAN/received_events","type":"User","site_admin":false},"created_at":"2019-12-16T21:56:05Z","updated_at":"2019-12-16T21:56:05Z","author_association":"NONE","body":"Dear All \r\nI am facing the same issue >>>> I need to remove all of the shingles with fillers >>> How can I do this ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/691492127","html_url":"https://github.com/elastic/elasticsearch/issues/18391#issuecomment-691492127","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18391","id":691492127,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTQ5MjEyNw==","user":{"login":"Sanket-Valani","id":43488796,"node_id":"MDQ6VXNlcjQzNDg4Nzk2","avatar_url":"https://avatars3.githubusercontent.com/u/43488796?v=4","gravatar_id":"","url":"https://api.github.com/users/Sanket-Valani","html_url":"https://github.com/Sanket-Valani","followers_url":"https://api.github.com/users/Sanket-Valani/followers","following_url":"https://api.github.com/users/Sanket-Valani/following{/other_user}","gists_url":"https://api.github.com/users/Sanket-Valani/gists{/gist_id}","starred_url":"https://api.github.com/users/Sanket-Valani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sanket-Valani/subscriptions","organizations_url":"https://api.github.com/users/Sanket-Valani/orgs","repos_url":"https://api.github.com/users/Sanket-Valani/repos","events_url":"https://api.github.com/users/Sanket-Valani/events{/privacy}","received_events_url":"https://api.github.com/users/Sanket-Valani/received_events","type":"User","site_admin":false},"created_at":"2020-09-12T13:53:27Z","updated_at":"2020-09-12T13:53:27Z","author_association":"NONE","body":"That multiple spaces problem can be solved using pattern_replace filter\r\n```\r\n\"space_filter\": { \r\n  \"type\": \"pattern_replace\", \r\n  \"pattern\": \"  *\", \r\n  \"replacement\": \" \" \r\n}\r\n```\r\n This will replace multiple spaces with one space","performed_via_github_app":null}]