[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/575531957","html_url":"https://github.com/elastic/elasticsearch/issues/51136#issuecomment-575531957","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51136","id":575531957,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NTUzMTk1Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-01-17T08:45:00Z","updated_at":"2020-01-17T08:45:00Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/Engine)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/578077514","html_url":"https://github.com/elastic/elasticsearch/issues/51136#issuecomment-578077514","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51136","id":578077514,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODA3NzUxNA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2020-01-24T10:37:49Z","updated_at":"2020-01-24T10:37:49Z","author_association":"CONTRIBUTOR","body":"While what the implementation is doing here is very harsh, it's currently the only way to guarantee that sequence numbers are not leaked. This is a particularly bad kind of event, and as primary and replicas can have different doc count (due to deletes), can hit either copy at an arbitrary point. On the primary, we could start to reject requests at an earlier point (based on some kind of pre-flight check, before generating the sequence number). On the replica, we have no other choice than to fail the copy, otherwise it will be out of sync with the primary.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/673446658","html_url":"https://github.com/elastic/elasticsearch/issues/51136#issuecomment-673446658","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51136","id":673446658,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MzQ0NjY1OA==","user":{"login":"JalehD","id":19384859,"node_id":"MDQ6VXNlcjE5Mzg0ODU5","avatar_url":"https://avatars2.githubusercontent.com/u/19384859?v=4","gravatar_id":"","url":"https://api.github.com/users/JalehD","html_url":"https://github.com/JalehD","followers_url":"https://api.github.com/users/JalehD/followers","following_url":"https://api.github.com/users/JalehD/following{/other_user}","gists_url":"https://api.github.com/users/JalehD/gists{/gist_id}","starred_url":"https://api.github.com/users/JalehD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JalehD/subscriptions","organizations_url":"https://api.github.com/users/JalehD/orgs","repos_url":"https://api.github.com/users/JalehD/repos","events_url":"https://api.github.com/users/JalehD/events{/privacy}","received_events_url":"https://api.github.com/users/JalehD/received_events","type":"User","site_admin":false},"created_at":"2020-08-13T12:25:05Z","updated_at":"2020-08-14T08:45:24Z","author_association":"NONE","body":"I have seen this issue a cloud cluster\r\n\r\nIn this case , cluster kept flipping to RED as the index was sent more and more data aimed at this index. the fact that the index name that hits the issue functionbeat-7.5.0-2020.01.30-000001 suggest we may need better prevention of this issue within ILM policies. \r\n\r\nError \r\n`[instance-0000000012] failing shard [failed shard, shard [functionbeat-7.5.0-2020.01.30-000001][0], node[PmZKd7TcSd-uh1KVX_uOYA], [P], s[STARTED], a[id=Dsmath-YQnySjr66fx7WUQ], message [shard failure, reason [no-op origin[PRIMARY] seq#[2391692890] failed at document level]], failure [IllegalArgumentException[number of documents in the index cannot exceed 2147483519]], markAsStale [true]] java.lang.IllegalArgumentException: number of documents in the index cannot exceed 2147483519 at org.apache.lucene.index.DocumentsWriterPerThread.reserveOneDoc(DocumentsWriterPerThread.java:225) ~[lucene-core-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:03] at org.apache.lucene.index.DocumentsWriterPerThread.updateDocument(DocumentsWriterPerThread.java:234) ~[lucene-core-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:03] at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:495) ~[lucene-core-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:03] at org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1594) ~[lucene-core-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:03]`\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/703783965","html_url":"https://github.com/elastic/elasticsearch/issues/51136#issuecomment-703783965","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51136","id":703783965,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMzc4Mzk2NQ==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2020-10-05T17:42:50Z","updated_at":"2020-10-05T17:42:50Z","author_association":"MEMBER","body":"I've opened https://github.com/elastic/elasticsearch/pull/63273.","performed_via_github_app":null}]