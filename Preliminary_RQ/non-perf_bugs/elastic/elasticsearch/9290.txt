{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9290","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9290/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9290/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9290/events","html_url":"https://github.com/elastic/elasticsearch/issues/9290","id":54299691,"node_id":"MDU6SXNzdWU1NDI5OTY5MQ==","number":9290,"title":"CircuitBreaking Exception: Data Too Large for field parent/chi ld id cache","user":{"login":"bharvidixit","id":10341430,"node_id":"MDQ6VXNlcjEwMzQxNDMw","avatar_url":"https://avatars3.githubusercontent.com/u/10341430?v=4","gravatar_id":"","url":"https://api.github.com/users/bharvidixit","html_url":"https://github.com/bharvidixit","followers_url":"https://api.github.com/users/bharvidixit/followers","following_url":"https://api.github.com/users/bharvidixit/following{/other_user}","gists_url":"https://api.github.com/users/bharvidixit/gists{/gist_id}","starred_url":"https://api.github.com/users/bharvidixit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bharvidixit/subscriptions","organizations_url":"https://api.github.com/users/bharvidixit/orgs","repos_url":"https://api.github.com/users/bharvidixit/repos","events_url":"https://api.github.com/users/bharvidixit/events{/privacy}","received_events_url":"https://api.github.com/users/bharvidixit/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2015-01-14T09:18:44Z","updated_at":"2020-06-15T18:27:57Z","closed_at":"2015-01-15T20:10:04Z","author_association":"NONE","active_lock_reason":null,"body":"Hi, I have following cluster configuration:\n2 data nodes (RAM: 32GB EACH, HEAP SIZE: 16GB EACH)\n3 master nodes \n2 client nodes.\n\nIndex has parent child schema.\n\nOn one of my data node i have got this exception while indexing.\n\n[2015-01-14 12:26:50,264][ERROR][indices.fielddata.breaker] [data_node1] New used memory 10266147967 [9.5gb] from field [parent/child id cache]\n would be larger than configured breaker: 10266083328 [9.5gb], breaking\n[2015-01-14 12:26:50,265][WARN ][index.warmer             ] [data_node1] [es_politics_commonschema_v1.0][0] failed to warm-up fielddata for [_p\narent]\norg.elasticsearch.ElasticsearchException: org.elasticsearch.common.breaker.CircuitBreakingException: Data too large, data for field [parent/chi\nld id cache] would be larger than limit of [10266083328/9.5gb]\n        at org.elasticsearch.index.fielddata.AbstractIndexFieldData.load(AbstractIndexFieldData.java:79)\n        at org.elasticsearch.search.SearchService$FieldDataWarmer$1.run(SearchService.java:814)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at java.lang.Thread.run(Thread.java:744)\nCaused by: org.elasticsearch.common.util.concurrent.UncheckedExecutionException: org.elasticsearch.common.breaker.CircuitBreakingException: Data too large, data for field [parent/child id cache] would be larger than limit of [10266083328/9.5gb]\n        at org.elasticsearch.common.cache.LocalCache$Segment.get(LocalCache.java:2201)\n        at org.elasticsearch.common.cache.LocalCache.get(LocalCache.java:3934)\n        at org.elasticsearch.common.cache.LocalCache$LocalManualCache.get(LocalCache.java:4736)\n        at org.elasticsearch.indices.fielddata.cache.IndicesFieldDataCache$IndexFieldCache.load(IndicesFieldDataCache.java:154)\n        at org.elasticsearch.index.fielddata.AbstractIndexFieldData.load(AbstractIndexFieldData.java:73)\n        ... 4 more\nCaused by: org.elasticsearch.common.breaker.CircuitBreakingException: Data too large, data for field [parent/child id cache] would be larger than limit of [10266083328/9.5gb]\n        at org.elasticsearch.common.breaker.MemoryCircuitBreaker.circuitBreak(MemoryCircuitBreaker.java:82)\n        at org.elasticsearch.common.breaker.MemoryCircuitBreaker.addEstimateBytesAndMaybeBreak(MemoryCircuitBreaker.java:132)\n        at org.elasticsearch.index.fielddata.RamAccountingTermsEnum.flush(RamAccountingTermsEnum.java:70)\n        at org.elasticsearch.index.fielddata.RamAccountingTermsEnum.next(RamAccountingTermsEnum.java:84)\n        at org.elasticsearch.index.fielddata.plain.ParentChildIndexFieldData.loadDirect(ParentChildIndexFieldData.java:112)\n        at org.elasticsearch.index.fielddata.plain.ParentChildIndexFieldData.loadDirect(ParentChildIndexFieldData.java:59)\n        at org.elasticsearch.indices.fielddata.cache.IndicesFieldDataCache$IndexFieldCache$1.call(IndicesFieldDataCache.java:167)\n        at org.elasticsearch.indices.fielddata.cache.IndicesFieldDataCache$IndexFieldCache$1.call(IndicesFieldDataCache.java:154)\n        at org.elasticsearch.common.cache.LocalCache$LocalManualCache$1.load(LocalCache.java:4739)\n        at org.elasticsearch.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3524)\n        at org.elasticsearch.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2317)\n        at org.elasticsearch.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2280)\n        at org.elasticsearch.common.cache.LocalCache$Segment.get(LocalCache.java:2195)\n        ... 8 more\n\nIs it a bug or some other issue.?\n\nRegards\nBharvi\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}