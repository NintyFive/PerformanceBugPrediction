{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15930","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15930/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15930/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15930/events","html_url":"https://github.com/elastic/elasticsearch/issues/15930","id":126193551,"node_id":"MDU6SXNzdWUxMjYxOTM1NTE=","number":15930,"title":"date format field comparing problem..","user":{"login":"q11112345","id":10358392,"node_id":"MDQ6VXNlcjEwMzU4Mzky","avatar_url":"https://avatars3.githubusercontent.com/u/10358392?v=4","gravatar_id":"","url":"https://api.github.com/users/q11112345","html_url":"https://github.com/q11112345","followers_url":"https://api.github.com/users/q11112345/followers","following_url":"https://api.github.com/users/q11112345/following{/other_user}","gists_url":"https://api.github.com/users/q11112345/gists{/gist_id}","starred_url":"https://api.github.com/users/q11112345/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/q11112345/subscriptions","organizations_url":"https://api.github.com/users/q11112345/orgs","repos_url":"https://api.github.com/users/q11112345/repos","events_url":"https://api.github.com/users/q11112345/events{/privacy}","received_events_url":"https://api.github.com/users/q11112345/received_events","type":"User","site_admin":false},"labels":[{"id":141145460,"node_id":"MDU6TGFiZWwxNDExNDU0NjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Mapping","name":":Search/Mapping","color":"0e8a16","default":false,"description":"How fields should be indexed"},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2016-01-12T14:41:00Z","updated_at":"2018-02-13T20:47:55Z","closed_at":"2016-01-12T14:56:06Z","author_association":"NONE","active_lock_reason":null,"body":"here is my xshell log.\nthe problem is gte and lte does not have the same behivor in comparing using two different date format\n\n[BEGIN] 2016/1/12 22:01:27\n[root@4-216 ~]# curl -XDELETE 192.168.4.216:9280/test_red/t6\n{\"error\":\"TypeMissingException[[_all] type[[t6]] missing: No index has the type.]\",\"status\":404}[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# curl -XPUT 192.168.4.216:9280/test_red/t6/_mapping -d '\n\n> ```\n>           {\n>               \"t6\":{\n>                   \"_all\":{\n>                       \"auto_boost\" : true,\n>                       \"index_analyzer\" : \"ik\"\n>                   },\n>                   \"properties\" : {\n>                       \"start_time\" : {\n>                         \"type\" : \"date\",\n>                         \"format\" : \"YYYY-MM-dd\"\n>                       }\n>                   }\n>               }\n>           }'\n> ```\n> \n> {\"acknowledged\":true}[root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_mapping?pretty\n> {\n>   \"test_red\" : {\n>     \"mappings\" : {\n>       \"t6\" : {\n>         \"_all\" : {\n>           \"auto_boost\" : true,\n>           \"index_analyzer\" : \"ik\"\n>         },\n>         \"properties\" : {\n>           \"start_time\" : {\n>             \"type\" : \"date\",\n>             \"format\" : \"YYYY-MM-dd\"\n>           }\n>         }\n>       }\n>     }\n>   }\n> }\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# curl -XPOST 192.168.4.216:9280/test_red/t6/1 -d '{\n>                 \"start_time\":\"2016-01-02\"\n>             }'\n> {\"_index\":\"test_red\",\"_type\":\"t6\",\"_id\":\"1\",\"_version\":1,\"created\":true}[root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# curl -XPOST 192.168.4.216:9280/test_red/t6/2?pretty -d '{\n>                 \"start_time\":\"2016-01-03\"\n>             }'\n> {\n>   \"_index\" : \"test_red\",\n>   \"_type\" : \"t6\",\n>   \"_id\" : \"2\",\n>   \"_version\" : 1,\n>   \"created\" : true\n> }\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# curl -XPOST 192.168.4.216:9280/test_red/t6/3?pretty -d '{\n>                 \"start_time\":\"2016-01-04\"\n>             }'\n> {\n>   \"_index\" : \"test_red\",\n>   \"_type\" : \"t6\",\n>   \"_id\" : \"3\",\n>   \"_version\" : 1,\n>   \"created\" : true\n> }\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty\n> {\n>   \"took\" : 1,\n>   \"timed_out\" : false,\n>   \"_shards\" : {\n>     \"total\" : 5,\n>     \"successful\" : 5,\n>     \"failed\" : 0\n>   },\n>   \"hits\" : {\n>     \"total\" : 3,\n>     \"max_score\" : 1.0,\n>     \"hits\" : [ {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"1\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-02\"\n>             }\n>     }, {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"2\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-03\"\n>             }\n>     }, {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"3\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-04\"\n>             }\n>     } ]\n>   }\n> }\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# # ive had three document indexed just now\n> [root@4-216 ~]# # now i will  try to make some filter test\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# ^C\n> [root@4-216 ~]# ^C\n> [root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n>                 \"filter\":{\n>                     \"range\":{\n>                         \"start_time\":{\n>                             \"format\": \"YYYY-MM-dd\",\n>                             \"lte\": \"2016-01-03\"\n>                         }\n>                     }\n>                 }\n>             }'\n> {\n>   \"took\" : 1,\n>   \"timed_out\" : false,\n>   \"_shards\" : {\n>     \"total\" : 5,\n>     \"successful\" : 5,\n>     \"failed\" : 0\n>   },\n>   \"hits\" : {\n>     \"total\" : 2,\n>     \"max_score\" : 1.0,\n>     \"hits\" : [ {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"1\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-02\"\n>             }\n>     }, {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"2\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-03\"\n>             }\n>     } ]\n>   }\n> }\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n>                 \"filter\":{\n>                     \"range\":{\n>                         \"start_time\":{\n>                             \"format\": \"YYYY-MM-dd\",\n>                             \"gte\": \"2016-01-03\"\n>                         }\n>                     }\n>                 }\n>             }'\n> {\n>   \"took\" : 1,\n>   \"timed_out\" : false,\n>   \"_shards\" : {\n>     \"total\" : 5,\n>     \"successful\" : 5,\n>     \"failed\" : 0\n>   },\n>   \"hits\" : {\n>     \"total\" : 2,\n>     \"max_score\" : 1.0,\n>     \"hits\" : [ {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"2\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-03\"\n>             }\n>     }, {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"3\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-04\"\n>             }\n>     } ]\n>   }\n> }\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# ############# see, 2016-01-03 is matched in the two filter query, one is lte filter, and anther is gte filter\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# #### the date format in filter is YYYY-MM-dd\n> [root@4-216 ~]# #### now lets see what will i get with filter format YYYY-MM-dd HH:mm:ss\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n>                 \"filter\":{\n>                     \"range\":{\n>                         \"start_time\":{\n>                             \"format\": \"YYYY-MM-dd HH:mm:ss\",\n>                             \"lte\": \"2016-01-03 00:00:00\"\n>                         }\n>                     }\n>                 }\n>             }'\n> {\n>   \"took\" : 1,\n>   \"timed_out\" : false,\n>   \"_shards\" : {\n>     \"total\" : 5,\n>     \"successful\" : 5,\n>     \"failed\" : 0\n>   },\n>   \"hits\" : {\n>     \"total\" : 2,\n>     \"max_score\" : 1.0,\n>     \"hits\" : [ {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"1\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-02\"\n>             }\n>     }, {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"2\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-03\"\n>             }\n>     } ]\n>   }\n> }\n> [root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n>                 \"filter\":{\n>                     \"range\":{\n>                         \"start_time\":{\n>                             \"format\": \"YYYY-MM-dd HH:mm:ss\",\n>                             \"lte\": \"2016-01-03 01:00:00\"\n>                         }\n>                     }\n>                 }\n>             }'\n> {\n>   \"took\" : 1,\n>   \"timed_out\" : false,\n>   \"_shards\" : {\n>     \"total\" : 5,\n>     \"successful\" : 5,\n>     \"failed\" : 0\n>   },\n>   \"hits\" : {\n>     \"total\" : 2,\n>     \"max_score\" : 1.0,\n>     \"hits\" : [ {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"1\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-02\"\n>             }\n>     }, {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"2\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-03\"\n>             }\n>     } ]\n>   }\n> }\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n>                 \"filter\":{\n>                     \"range\":{\n>                         \"start_time\":{\n>                             \"format\": \"YYYY-MM-dd HH:mm:ss\",\n>                             \"gte\": \"2016-01-03 14:00:00\"\n>                         }\n>                     }\n>                 }\n>             }'\n> {\n>   \"took\" : 1,\n>   \"timed_out\" : false,\n>   \"_shards\" : {\n>     \"total\" : 5,\n>     \"successful\" : 5,\n>     \"failed\" : 0\n>   },\n>   \"hits\" : {\n>     \"total\" : 1,\n>     \"max_score\" : 1.0,\n>     \"hits\" : [ {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"3\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-04\"\n>             }\n>     } ]\n>   }\n> }\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n>                 \"filter\":{\n>                     \"range\":{\n>                         \"start_time\":{\n>                             \"format\": \"YYYY-MM-dd HH:mm:ss\",\n>                             \"gte\": \"2016-01-03 00:00:00\"\n>                         }\n>                     }\n>                 }\n>             }'\n> {\n>   \"took\" : 1,\n>   \"timed_out\" : false,\n>   \"_shards\" : {\n>     \"total\" : 5,\n>     \"successful\" : 5,\n>     \"failed\" : 0\n>   },\n>   \"hits\" : {\n>     \"total\" : 2,\n>     \"max_score\" : 1.0,\n>     \"hits\" : [ {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"2\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-03\"\n>             }\n>     }, {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"3\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-04\"\n>             }\n>     } ]\n>   }\n> }\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# #### do you see the difference ? \n> [root@4-216 ~]# #### when i use lte filter to match less and equal to 2016-01-03 01:00:00, the date 2016-01-03 is matched\n> [root@4-216 ~]# #### when i use gte filter to match greater and equal to 2016-01-03 14:00:00, the date 2016-01-03 is not matched\n> [root@4-216 ~]# \n> [root@4-216 ~]# #### when i use gte filter to match greater and equal to 2016-01-03 00:00:00, the date 2016-01-03 is  matched\n> [root@4-216 ~]# \n> [root@4-216 ~]# #### now lets see gte filter to match greater and equal to 2016-01-03 01:00:00.   which can be compared with the lte filter  to match less and equal to 2016-01-03 01:00:00\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n>                 \"filter\":{\n>                     \"range\":{\n>                         \"start_time\":{\n>                             \"format\": \"YYYY-MM-dd HH:mm:ss\",\n>                             \"gte\": \"2016-01-03 01:00:00\"\n>                         }\n>                     }\n>                 }\n>             }'\n> {\n>   \"took\" : 2,\n>   \"timed_out\" : false,\n>   \"_shards\" : {\n>     \"total\" : 5,\n>     \"successful\" : 5,\n>     \"failed\" : 0\n>   },\n>   \"hits\" : {\n>     \"total\" : 1,\n>     \"max_score\" : 1.0,\n>     \"hits\" : [ {\n>       \"_index\" : \"test_red\",\n>       \"_type\" : \"t6\",\n>       \"_id\" : \"3\",\n>       \"_score\" : 1.0,\n>       \"_source\":{\n>                 \"start_time\":\"2016-01-04\"\n>             }\n>     } ]\n>   }\n> }\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# #### see, it doesnt match\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# ### its still has the problem after i update the date filed format from \"YYYY-MM-dd\" to \"YYYY-MM-dd HH:mm:ss\"\n> [root@4-216 ~]# ### is this regular????????\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# ####### now lets update the format\n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# curl -XPUT 192.168.4.216:9280/test_red/_mapping/t6 -d '\n>             {\n>                 \"_all\":{\n>                     \"auto_boost\" : true,\n>                     \"index_analyzer\" : \"ik\"\n>                 },\n>                 \"properties\" : {\n>                     \"start_time\" : {\n>                       \"type\" : \"date\",\n>                       \"format\" : \"YYYY-MM-dd HH:mm:ss\"\n>                     }\n>                 }\n>             }'\n> {\"acknowledged\":true}[root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# \n> [root@4-216 ~]# curl -XPUT 192.168.4.216:9280/test_red/_mapping/t6 -d '\n>             {\n>                 \"_all\":{\n>                     \"auto_boost\" : true,\n>                     \"index_analyzer\" : \"ik\"\n>                 },\n>                 \"properties\" : {\n>                     \"start_time\" : {\n>                       \"type\" : \"date\",\n>                       \"format\" : \"YYYY-MM-dd HH:mm:ss\"\n>                     }\n>                 }\n> [root@4-216 ~]# ####### now lets update the format\n\n[root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n                \"filter\":{\n                    \"range\":{\n                        \"start_time\":{\n                            \"format\": \"YYYY-MM-dd HH:mm:ss\",\n                            \"gte\": \"2016-01-03 01:00:00\"\n                        }\n                    }\n                }\n[root@4-216 ~]# #### now lets see gte filter to match greater and equal to 2016-01-03 01:00:00.   which can be compared with the lte filter  to match less and equal to 2016-01-03 01:00:00\n\n[root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n                \"filter\":{\n                    \"range\":{\n                        \"start_time\":{\n                            \"format\": \"YYYY-MM-dd HH:mm:ss\",\n                            \"gte\": \"2016-01-03 00:00:00\"\n                        }\n                    }\n                }\n                            \"gte\": \"2016-01-03 14:00:00\"\n                        }\n                    }\n                }\n                            \"lte\": \"2016-01-03 01:00:00\"\n                        }\n                    }\n                }\n                            \"lte\": \"2016-01-03 00:00:00\"\n                        }\n                    }\n                }\n[root@4-216 ~]# #### now lets see what will i get with filter format YYYY-MM-dd HH:mm:ss\n\n[root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n                \"filter\":{\n                    \"range\":{\n                        \"start_time\":{\n                            \"format\": \"YYYY-MM-dd HH:mm:ss\",\n                            \"lte\": \"2016-01-03 00:00:00\"\n                        }\n                    }\n                }\n[root@4-216 ~]# #### now lets see what will i get with filter format YYYY-MM-dd HH:mm:ss\n\n[root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n                \"filter\":{\n                    \"range\":{\n                        \"start_time\":{\n                            \"format\": \"YYYY-MM-dd\",\n                            \"gte\": \"2016-01-03\"\n                        }\n                    }\n                }\n                            \"lte\": \"2016-01-03\"\n                        }\n                    }\n                }\n[root@4-216 ~]# # now i will  try to make some filter test\n\n[root@4-216 ~]# curl -XPOST 192.168.4.216:9280/test_red/t6/3?pretty -d '{\n                \"start_time\":\"2016-01-04\"\n[root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty\n\n[root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n                \"filter\":{\n                    \"range\":{\n                        \"start_time\":{\n                            \"format\": \"YYYY-MM-dd\",\n                            \"lte\": \"2016-01-03\"\n                        }\n                    }\n                }\n            }'\n{\n  \"took\" : 1,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 5,\n    \"successful\" : 5,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 2,\n    \"max_score\" : 1.0,\n    \"hits\" : [ {\n      \"_index\" : \"test_red\",\n      \"_type\" : \"t6\",\n      \"_id\" : \"1\",\n      \"_score\" : 1.0,\n      \"_source\":{\n                \"start_time\":\"2016-01-02\"\n            }\n    }, {\n      \"_index\" : \"test_red\",\n      \"_type\" : \"t6\",\n      \"_id\" : \"2\",\n      \"_score\" : 1.0,\n      \"_source\":{\n                \"start_time\":\"2016-01-03\"\n            }\n    } ]\n  }\n}\n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n                \"filter\":{\n                    \"range\":{\n                        \"start_time\":{\n                            \"format\": \"YYYY-MM-dd\",\n                            \"lte\": \"2016-01-03\"\n                        }\n                    }\n                }\n                            \"gte\": \"2016-01-03\"\n                        }\n                    }\n                }\n            }'\n{\n  \"took\" : 2,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 5,\n    \"successful\" : 5,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 2,\n    \"max_score\" : 1.0,\n    \"hits\" : [ {\n      \"_index\" : \"test_red\",\n      \"_type\" : \"t6\",\n      \"_id\" : \"2\",\n      \"_score\" : 1.0,\n      \"_source\":{\n                \"start_time\":\"2016-01-03\"\n            }\n    }, {\n      \"_index\" : \"test_red\",\n      \"_type\" : \"t6\",\n      \"_id\" : \"3\",\n      \"_score\" : 1.0,\n      \"_source\":{\n                \"start_time\":\"2016-01-04\"\n            }\n    } ]\n  }\n}\n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# ######### we got 2016-01-03 both\n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n                \"filter\":{\n                    \"range\":{\n                        \"start_time\":{\n                            \"format\": \"YYYY-MM-dd\",\n                            \"gte\": \"2016-01-03\"\n                        }\n                    }\n                }\n                            \"lte\": \"2016-01-03\"\n                        }\n                    }\n                }\n[root@4-216 ~]# curl -XPUT 192.168.4.216:9280/test_red/_mapping/t6 -d '\n            {  \n                \"_all\":{\n                    \"auto_boost\" : true,\n                    \"index_analyzer\" : \"ik\"\n                },  \n                \"properties\" : {\n                    \"start_time\" : {\n                      \"type\" : \"date\",\n                      \"format\" : \"YYYY-MM-dd HH:mm:ss\"\n                    }\n                }\n[root@4-216 ~]# ####### now lets update the format\n\n[root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n                \"filter\":{\n                    \"range\":{\n                        \"start_time\":{\n                            \"format\": \"YYYY-MM-dd HH:mm:ss\",\n                            \"gte\": \"2016-01-03 01:00:00\"\n                        }\n                    }\n                }\n[root@4-216 ~]# #### now lets see gte filter to match greater and equal to 2016-01-03 01:00:00.   which can be compared with the lte filter  to match less and equal to 2016-01-03 01:00:00\n\n[root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n                \"filter\":{\n                    \"range\":{\n                        \"start_time\":{\n                            \"format\": \"YYYY-MM-dd HH:mm:ss\",\n                            \"gte\": \"2016-01-03 01:00:00\"\n                        }\n                    }\n                }\n[root@4-216 ~]# #### now lets see gte filter to match greater and equal to 2016-01-03 01:00:00.   which can be compared with the lte filter  to match less and equal to 2016-01-03 01:00:00\n\n[root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n                \"filter\":{\n                    \"range\":{\n                        \"start_time\":{\n                            \"format\": \"YYYY-MM-dd HH:mm:ss\",\n                            \"gte\": \"2016-01-03 00:00:00\"\n                        }\n                    }\n                }\n                            \"gte\": \"2016-01-03 14:00:00\"\n                        }\n                    }\n                }\n                            \"lte\": \"2016-01-03 01:00:00\"\n                        }\n                    }\n                }\n            }'\n{\n  \"took\" : 1,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 5,\n    \"successful\" : 5,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 2,\n    \"max_score\" : 1.0,\n    \"hits\" : [ {\n      \"_index\" : \"test_red\",\n      \"_type\" : \"t6\",\n      \"_id\" : \"1\",\n      \"_score\" : 1.0,\n      \"_source\":{\n                \"start_time\":\"2016-01-02\"\n            }\n    }, {\n      \"_index\" : \"test_red\",\n      \"_type\" : \"t6\",\n      \"_id\" : \"2\",\n      \"_score\" : 1.0,\n      \"_source\":{\n                \"start_time\":\"2016-01-03\"\n            }\n    } ]\n  }\n}\n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n                \"filter\":{\n                    \"range\":{\n                        \"start_time\":{\n                            \"format\": \"YYYY-MM-dd HH:mm:ss\",\n                            \"lte\": \"2016-01-03 01:00:00\"\n                        }\n                    }\n                }\n[root@4-216 ~]# ######### we got 2016-01-03 both\n\n[root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n                \"filter\":{\n                    \"range\":{\n                        \"start_time\":{\n                            \"format\": \"YYYY-MM-dd\",\n                            \"gte\": \"2016-01-03\"\n                        }\n                    }\n                }\n                            \"lte\": \"2016-01-03\"\n                        }\n                    }\n                }\n[root@4-216 ~]# curl -XPUT 192.168.4.216:9280/test_red/_mapping/t6 -d '\n            {  \n                \"_all\":{\n                    \"auto_boost\" : true,\n                    \"index_analyzer\" : \"ik\"\n                },  \n                \"properties\" : {\n                    \"start_time\" : {\n                      \"type\" : \"date\",\n                      \"format\" : \"YYYY-MM-dd HH:mm:ss\"\n                    }\n                }\n[root@4-216 ~]# ####### now lets update the format\n\n[root@4-216 ~]# curl -XGET 192.168.4.216:9280/test_red/t6/_search?pretty -d '{\n                \"filter\":{\n                    \"range\":{\n                        \"start_time\":{\n                            \"format\": \"YYYY-MM-dd HH:mm:ss\",\n                            \"gte\": \"2016-01-03 01:00:00\"\n                        }\n                    }\n                }\n            }'\n{\n  \"took\" : 1,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 5,\n    \"successful\" : 5,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 1,\n    \"max_score\" : 1.0,\n    \"hits\" : [ {\n      \"_index\" : \"test_red\",\n      \"_type\" : \"t6\",\n      \"_id\" : \"3\",\n      \"_score\" : 1.0,\n      \"_source\":{\n                \"start_time\":\"2016-01-04\"\n            }\n    } ]\n  }\n}\n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# #### we got 2016-01-03 only once...\n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n[root@4-216 ~]# \n\n[END] 2016/1/12 22:16:50\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}