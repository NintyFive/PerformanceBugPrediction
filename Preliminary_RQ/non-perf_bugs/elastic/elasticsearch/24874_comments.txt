[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303883699","html_url":"https://github.com/elastic/elasticsearch/issues/24874#issuecomment-303883699","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24874","id":303883699,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzg4MzY5OQ==","user":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"created_at":"2017-05-24T23:47:12Z","updated_at":"2017-05-24T23:47:12Z","author_association":"CONTRIBUTOR","body":"This does work as expected.  2017-05 is interpreted as the beginning of May 2017, so 2017-05-24 doesn't match.  If you supply `lte: 2017-06`, the result is returned","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304115224","html_url":"https://github.com/elastic/elasticsearch/issues/24874#issuecomment-304115224","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24874","id":304115224,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDExNTIyNA==","user":{"login":"yagotome","id":16280594,"node_id":"MDQ6VXNlcjE2MjgwNTk0","avatar_url":"https://avatars2.githubusercontent.com/u/16280594?v=4","gravatar_id":"","url":"https://api.github.com/users/yagotome","html_url":"https://github.com/yagotome","followers_url":"https://api.github.com/users/yagotome/followers","following_url":"https://api.github.com/users/yagotome/following{/other_user}","gists_url":"https://api.github.com/users/yagotome/gists{/gist_id}","starred_url":"https://api.github.com/users/yagotome/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yagotome/subscriptions","organizations_url":"https://api.github.com/users/yagotome/orgs","repos_url":"https://api.github.com/users/yagotome/repos","events_url":"https://api.github.com/users/yagotome/events{/privacy}","received_events_url":"https://api.github.com/users/yagotome/received_events","type":"User","site_admin":false},"created_at":"2017-05-25T20:28:48Z","updated_at":"2017-05-25T20:28:48Z","author_association":"NONE","body":"@abeyad This behavior is not specified in the [Range Query documentation](https://www.elastic.co/guide/en/elasticsearch/reference/5.1/query-dsl-range-query.html) . Anyway, I suppose if it is allowed to pass `format` as `yyyy-MM`, it should only consider `yyyy-MM` so that `2017-05` and `2017-05-24` match either using `lte` or `gte`. Otherwise, it shouldn't allow this kind of format.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304116967","html_url":"https://github.com/elastic/elasticsearch/issues/24874#issuecomment-304116967","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24874","id":304116967,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDExNjk2Nw==","user":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"created_at":"2017-05-25T20:36:10Z","updated_at":"2017-05-25T20:36:10Z","author_association":"CONTRIBUTOR","body":"That's not the way it should work.  These are date fields.  Date fields imply an increasing range of values, similar to a long or a double.  If you had a long value in your field `789` and you specified `lte: 78` would you expect it to match?  You would not, because 78 is less than 789.  We are not matching prefixes.  \r\n\r\nI think your confusion is arising from the fact that you are viewing date fields as string fields with a prefix, but that is not how date fields work.  With dates, just like any other ranged set of values, a prefix match does not make sense when using less than and greater than matches. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304257937","html_url":"https://github.com/elastic/elasticsearch/issues/24874#issuecomment-304257937","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24874","id":304257937,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDI1NzkzNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-05-26T11:16:10Z","updated_at":"2017-05-26T11:16:10Z","author_association":"CONTRIBUTOR","body":"There is some confusion here about rounding.   As @abeyad says, a date like `2017-05` is converted to the datetime `2017-05-01T00:00:00`.  However, the following query will do what you want:\r\n\r\n```\r\n{\r\n    \"query\": {\r\n    \t\"range\": {\r\n\t      \"created\": {\r\n\t        \"lte\": \"2017-05||/M\",\r\n\t        \"format\": \"yyyy-MM\"\r\n\t      }\r\n\t    }\r\n    }\r\n}\r\n```\r\n\r\nThe reason is that, with `lte` and date rounding (the `||/M`), we round up to the next value - 1 millisecond.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304403819","html_url":"https://github.com/elastic/elasticsearch/issues/24874#issuecomment-304403819","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24874","id":304403819,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDQwMzgxOQ==","user":{"login":"yagotome","id":16280594,"node_id":"MDQ6VXNlcjE2MjgwNTk0","avatar_url":"https://avatars2.githubusercontent.com/u/16280594?v=4","gravatar_id":"","url":"https://api.github.com/users/yagotome","html_url":"https://github.com/yagotome","followers_url":"https://api.github.com/users/yagotome/followers","following_url":"https://api.github.com/users/yagotome/following{/other_user}","gists_url":"https://api.github.com/users/yagotome/gists{/gist_id}","starred_url":"https://api.github.com/users/yagotome/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yagotome/subscriptions","organizations_url":"https://api.github.com/users/yagotome/orgs","repos_url":"https://api.github.com/users/yagotome/repos","events_url":"https://api.github.com/users/yagotome/events{/privacy}","received_events_url":"https://api.github.com/users/yagotome/received_events","type":"User","site_admin":false},"created_at":"2017-05-26T22:51:42Z","updated_at":"2017-05-26T22:51:42Z","author_association":"NONE","body":"I got it! That's what I was looking for, @clintongormley . Thank you!","performed_via_github_app":null}]