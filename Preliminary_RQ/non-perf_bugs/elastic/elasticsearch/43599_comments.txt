[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/505682525","html_url":"https://github.com/elastic/elasticsearch/issues/43599#issuecomment-505682525","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43599","id":505682525,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTY4MjUyNQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-06-26T01:37:02Z","updated_at":"2019-06-26T01:37:02Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/531727635","html_url":"https://github.com/elastic/elasticsearch/issues/43599#issuecomment-531727635","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43599","id":531727635,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTcyNzYzNQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2019-09-16T10:50:28Z","updated_at":"2019-09-16T10:50:28Z","author_association":"MEMBER","body":"I ran into this today too. There is no way to disable loading of field data in the jvm heap. Because `_id` field is not configurable and doesn't have doc values enabled, this can cause a large part of the jvm heap be taken if someone sorts or aggregates on the `_id` field.\r\n\r\nEither field data should be allowed to be disabled via configuration or field data should always never be loaded for the `_id`. The latter maybe a better choice when #46523 has been completed, because then there is no need to sort by `_id` with search after in order to get consistent sort order.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/553452548","html_url":"https://github.com/elastic/elasticsearch/issues/43599#issuecomment-553452548","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43599","id":553452548,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzQ1MjU0OA==","user":{"login":"AndrewMcQuerry","id":3922705,"node_id":"MDQ6VXNlcjM5MjI3MDU=","avatar_url":"https://avatars1.githubusercontent.com/u/3922705?v=4","gravatar_id":"","url":"https://api.github.com/users/AndrewMcQuerry","html_url":"https://github.com/AndrewMcQuerry","followers_url":"https://api.github.com/users/AndrewMcQuerry/followers","following_url":"https://api.github.com/users/AndrewMcQuerry/following{/other_user}","gists_url":"https://api.github.com/users/AndrewMcQuerry/gists{/gist_id}","starred_url":"https://api.github.com/users/AndrewMcQuerry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndrewMcQuerry/subscriptions","organizations_url":"https://api.github.com/users/AndrewMcQuerry/orgs","repos_url":"https://api.github.com/users/AndrewMcQuerry/repos","events_url":"https://api.github.com/users/AndrewMcQuerry/events{/privacy}","received_events_url":"https://api.github.com/users/AndrewMcQuerry/received_events","type":"User","site_admin":false},"created_at":"2019-11-13T15:26:59Z","updated_at":"2019-11-13T15:26:59Z","author_association":"NONE","body":"Thanks to @jasontedor and @SpeechlessWick (and others!) for discussing this with us yesterday at the AMA booth.\r\n\r\nJust adding this note here to echo the need for some sort of protection against the _id field causing fielddata Heap consumption.  There have been multiple instances in both Test and Prod clusters where some user has performed some action (we assume this to be a sort or aggregation) which has caused all of our Data nodes in the cluster to consume large amounts of Heap for fielddata.  Our only solution at this time is to simply check or audit the fielddata usage for \"_id\" and then manually clear the cache when/if we see it consuming large amounts.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/554374412","html_url":"https://github.com/elastic/elasticsearch/issues/43599#issuecomment-554374412","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43599","id":554374412,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NDM3NDQxMg==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2019-11-15T14:14:26Z","updated_at":"2019-11-15T14:14:26Z","author_association":"MEMBER","body":"I opened https://github.com/elastic/elasticsearch/pull/49166 to disallow the loading of the `_id` field through a cluster setting. The goal is to get ride of the fielddata entirely but we're not there yet so the setting could be useful to prevent loading in 7x.","performed_via_github_app":null}]