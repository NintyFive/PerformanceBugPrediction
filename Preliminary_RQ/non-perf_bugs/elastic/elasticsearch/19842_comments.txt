[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/237980551","html_url":"https://github.com/elastic/elasticsearch/issues/19842#issuecomment-237980551","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19842","id":237980551,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzk4MDU1MQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-08-05T22:26:55Z","updated_at":"2016-08-05T22:26:55Z","author_association":"MEMBER","body":"How many master-eligible nodes do you have, and what is the value of `discovery.zen.minimum_master_nodes`?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/238304919","html_url":"https://github.com/elastic/elasticsearch/issues/19842#issuecomment-238304919","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19842","id":238304919,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODMwNDkxOQ==","user":{"login":"mkelkarbv","id":8582461,"node_id":"MDQ6VXNlcjg1ODI0NjE=","avatar_url":"https://avatars1.githubusercontent.com/u/8582461?v=4","gravatar_id":"","url":"https://api.github.com/users/mkelkarbv","html_url":"https://github.com/mkelkarbv","followers_url":"https://api.github.com/users/mkelkarbv/followers","following_url":"https://api.github.com/users/mkelkarbv/following{/other_user}","gists_url":"https://api.github.com/users/mkelkarbv/gists{/gist_id}","starred_url":"https://api.github.com/users/mkelkarbv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkelkarbv/subscriptions","organizations_url":"https://api.github.com/users/mkelkarbv/orgs","repos_url":"https://api.github.com/users/mkelkarbv/repos","events_url":"https://api.github.com/users/mkelkarbv/events{/privacy}","received_events_url":"https://api.github.com/users/mkelkarbv/received_events","type":"User","site_admin":false},"created_at":"2016-08-08T17:14:17Z","updated_at":"2016-08-08T17:14:17Z","author_association":"NONE","body":"we have 3 master eligible nodes, and value of discovery.zen.minimum_master_nodes is 2. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/238576996","html_url":"https://github.com/elastic/elasticsearch/issues/19842#issuecomment-238576996","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19842","id":238576996,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODU3Njk5Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-08-09T14:47:44Z","updated_at":"2016-08-09T14:47:44Z","author_association":"MEMBER","body":"> If the master eligible node does not find minimum number of master eligible nodes in the cluster, then it thinks its not the master node. Even though master eligible nodes become available later, it continues to think its not master, and rejects join requests. It does not re-evaluate its master status even though minimum number of master eligible nodes become available later...\n\nI don't understand this paragraph. You're speaking as if there is a single master-eligible node, but you say that you have three. Either way, if there are not at least as many master-eligible nodes available as the value of `discovery.zen.minimum_master_nodes`, no master-eligible can become a master, that's the point of `discovery.zen.minimum_master_nodes`.\n\nThe setting `gateway.expected_master_nodes` only controls the number of master-eligible nodes that must be visible before a node will recover its local shards, I'm not sure I see the relevance to the issue here.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/238582759","html_url":"https://github.com/elastic/elasticsearch/issues/19842#issuecomment-238582759","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19842","id":238582759,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODU4Mjc1OQ==","user":{"login":"mkelkarbv","id":8582461,"node_id":"MDQ6VXNlcjg1ODI0NjE=","avatar_url":"https://avatars1.githubusercontent.com/u/8582461?v=4","gravatar_id":"","url":"https://api.github.com/users/mkelkarbv","html_url":"https://github.com/mkelkarbv","followers_url":"https://api.github.com/users/mkelkarbv/followers","following_url":"https://api.github.com/users/mkelkarbv/following{/other_user}","gists_url":"https://api.github.com/users/mkelkarbv/gists{/gist_id}","starred_url":"https://api.github.com/users/mkelkarbv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkelkarbv/subscriptions","organizations_url":"https://api.github.com/users/mkelkarbv/orgs","repos_url":"https://api.github.com/users/mkelkarbv/repos","events_url":"https://api.github.com/users/mkelkarbv/events{/privacy}","received_events_url":"https://api.github.com/users/mkelkarbv/received_events","type":"User","site_admin":false},"created_at":"2016-08-09T15:04:49Z","updated_at":"2016-08-09T15:04:49Z","author_association":"NONE","body":"OK, let me clarify. There are 3 master eligible nodes in our cluster. If for some reason the elected master node does not find other master nodes ( because they are yet to bootstrap ), then elected master node does not become master, which is expected. \n\nBut after all the master eligible nodes are bootstrapped, I would expect one of the master eligible nodes to become master and elasticsearch to become healthy automatically.... In our case this doesn't happen unless we do a full cluster restart. Do you see the problem here? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/238585776","html_url":"https://github.com/elastic/elasticsearch/issues/19842#issuecomment-238585776","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19842","id":238585776,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODU4NTc3Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-08-09T15:14:26Z","updated_at":"2016-08-09T15:14:26Z","author_association":"MEMBER","body":"> But after all the master eligible nodes are bootstrapped, I would expect one of the master eligible nodes to become master and elasticsearch to become healthy automatically....\n\nCorrect, that is what is suppose to happen.\n\n> In our case this doesn't happen unless we do a full cluster restart. Do you see the problem here?\n\nThis does not reproduce for me, we will need more detail. Can you provide the output of `/_nodes` and any relevant configuration (discovery and network settings, for example).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/238644331","html_url":"https://github.com/elastic/elasticsearch/issues/19842#issuecomment-238644331","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19842","id":238644331,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODY0NDMzMQ==","user":{"login":"mkelkarbv","id":8582461,"node_id":"MDQ6VXNlcjg1ODI0NjE=","avatar_url":"https://avatars1.githubusercontent.com/u/8582461?v=4","gravatar_id":"","url":"https://api.github.com/users/mkelkarbv","html_url":"https://github.com/mkelkarbv","followers_url":"https://api.github.com/users/mkelkarbv/followers","following_url":"https://api.github.com/users/mkelkarbv/following{/other_user}","gists_url":"https://api.github.com/users/mkelkarbv/gists{/gist_id}","starred_url":"https://api.github.com/users/mkelkarbv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkelkarbv/subscriptions","organizations_url":"https://api.github.com/users/mkelkarbv/orgs","repos_url":"https://api.github.com/users/mkelkarbv/repos","events_url":"https://api.github.com/users/mkelkarbv/events{/privacy}","received_events_url":"https://api.github.com/users/mkelkarbv/received_events","type":"User","site_admin":false},"created_at":"2016-08-09T18:23:15Z","updated_at":"2016-08-09T18:25:50Z","author_association":"NONE","body":"Here are our discovery/network settings -\n\ndiscovery.zen.ping.timeout: 2m\ndiscovery.zen.ping_timeout: 2m\n\ndiscovery.zen.ping.multicast.enabled: false\n\ndiscovery.zen.fd.ping_interval: 1m\ndiscovery.zen.fd.ping_timeout: 2m\ndiscovery.zen.fd.ping_retries: 3\n\ndiscovery.type: ec2\n\ndiscovery.ec2.host_type: private_ip\ndiscovery.ec2.ping.timeout: 2m\ndiscovery.ec2.ping_timeout: 2m\ndiscovery.ec2.any_group: false\ndiscovery.ec2.groups: polloi-prod-uat-concsrc-fbilai-CommonInstanceSecurityGroup-16P7AUG7HNOUC\n\ndiscovery.ec2.tag.Env: bazaar\ndiscovery.ec2.tag.Cluster: uat_polloi_concsrc_fbilai_elasticsearch\n\ncloud.aws.region: us-east-1\n\nHere is a log message from master node that has info on the current nodes when this happened \n\n`[2016-07-19 15:51:12,695][WARN ][discovery.ec2            ] [uat-polloi-concsrc-fbilai-es-52-166] not enough master nodes, current nodes: {[uat-polloi-concsrc-fbilai-es-54-66][VM03SLT0SdiuU8VDM_aq9g][uat-polloi-concsrc-fbilai-es-54-66][inet[/10.100.54.66:9300]]{client_bv=false, availability_zone=a, master=false},[uat-polloi-concsrc-fbilai-es-52-166][Be-E2WoeQ02g9APPaTP_AQ][uat-polloi-concsrc-fbilai-es-52-166][inet[/10.100.52.166:9300]]{client_bv=false, availability_zone=a, data=false, master=true},[polloi-node-4abb5e42][SLR3eXAhTEKgcQ1XAj0M0A][uat-polloi-concsrc-fbilai-polloi-62-175][inet[/10.100.62.175:29300]]{data=false, client=true},[polloi-node-02c28aef][ov1RsoOmR1GjVkIKe39XqQ][uat-polloi-concsrc-fbilai-polloi-57-70][inet[/10.100.57.70:29300]]{data=false, client=true},}\n`\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/239252332","html_url":"https://github.com/elastic/elasticsearch/issues/19842#issuecomment-239252332","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19842","id":239252332,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTI1MjMzMg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-08-11T18:41:02Z","updated_at":"2016-08-11T18:41:02Z","author_association":"CONTRIBUTOR","body":"That log message lists one master-eligible node only: itself.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/239258891","html_url":"https://github.com/elastic/elasticsearch/issues/19842#issuecomment-239258891","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19842","id":239258891,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTI1ODg5MQ==","user":{"login":"mkelkarbv","id":8582461,"node_id":"MDQ6VXNlcjg1ODI0NjE=","avatar_url":"https://avatars1.githubusercontent.com/u/8582461?v=4","gravatar_id":"","url":"https://api.github.com/users/mkelkarbv","html_url":"https://github.com/mkelkarbv","followers_url":"https://api.github.com/users/mkelkarbv/followers","following_url":"https://api.github.com/users/mkelkarbv/following{/other_user}","gists_url":"https://api.github.com/users/mkelkarbv/gists{/gist_id}","starred_url":"https://api.github.com/users/mkelkarbv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkelkarbv/subscriptions","organizations_url":"https://api.github.com/users/mkelkarbv/orgs","repos_url":"https://api.github.com/users/mkelkarbv/repos","events_url":"https://api.github.com/users/mkelkarbv/events{/privacy}","received_events_url":"https://api.github.com/users/mkelkarbv/received_events","type":"User","site_admin":false},"created_at":"2016-08-11T19:03:35Z","updated_at":"2016-08-11T19:37:45Z","author_association":"NONE","body":"@clintongormley right...\nSuppose that there are three master eligible nodes ( node1, node2, node3) and the discovery.zen.minimum_master_nodes is set to 2.  Here is chronological sequence of events -\n1. node1 starts up, and elects itself as master. node2 and node3 haven't bootstrapped at this point.\n2. node1 does not discover any other master eligible nodes, so thinks that its not master....\n3. node2 and node3 come up, and try to send join requests to node1. node1 rejects them because it thinks it its NOT the master ( however, all the other nodes in cluster still think node1 is the master)..\n\nThe log message I pasted was from step 1, where only one master eligible node is up...rest of the logs are also in the issue.\n\nAfter this, the cluster remains unhealthy until manual intervention...I would expect elasticsearch to recover on its own after all master eligible nodes are bootstrapped, but it does not happen. node1 does not re-evaluate its master status, and no other master is chosen as well, and the cluster continues to remain unhealthy because master node has not been discovered...Do you see the problem here?\n\nWe have had this occur from time to time. To get the cluster out of unhealthy state, we do this \n1. stop elasticsearch on node1.\n2. restart elasticsearch on node2 and node 3 and wait until they try to discover node1.\n3. start elasticsearch on node1. \n\nIn summary, the real problem is elasticsearch does not recover even after all master eligible nodes become available...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/239487715","html_url":"https://github.com/elastic/elasticsearch/issues/19842#issuecomment-239487715","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19842","id":239487715,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTQ4NzcxNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-08-12T16:05:39Z","updated_at":"2016-08-12T16:05:39Z","author_association":"CONTRIBUTOR","body":"> node1 starts up, and elects itself as master. node2 and node3 haven't bootstrapped at this point.\n> node1 does not discover any other master eligible nodes, so thinks that its not master....\n\nThis is incorrect. Node1 won't elect itself as master until there are enough masters available.\n\neg:\n\n./bin/elasticsearch --discovery.zen.minimum_master_nodes=2\n\n```\n[2016-08-12 17:58:44,273][INFO ][node                     ] [Wyatt Wingfoot] version[2.2.0], pid[50298], build[8ff36d1/2016-01-27T13:32:39Z]\n[2016-08-12 17:58:44,273][INFO ][node                     ] [Wyatt Wingfoot] initializing ...\n[2016-08-12 17:58:44,754][INFO ][plugins                  ] [Wyatt Wingfoot] modules [lang-expression, lang-groovy], plugins [], sites []\n[2016-08-12 17:58:44,774][INFO ][env                      ] [Wyatt Wingfoot] using [1] data paths, mounts [[/ (/dev/disk1)]], net usable_space [91.6gb], net total_space [232.6gb], spins? [unknown], types [hfs]\n[2016-08-12 17:58:44,775][INFO ][env                      ] [Wyatt Wingfoot] heap size [990.7mb], compressed ordinary object pointers [true]\n[2016-08-12 17:58:46,237][INFO ][script                   ] [Wyatt Wingfoot] compiling script file [/Users/clinton/workspace/servers/elasticsearch-2.2.0/config/scripts/test.groovy]\n[2016-08-12 17:58:46,888][INFO ][node                     ] [Wyatt Wingfoot] initialized\n[2016-08-12 17:58:46,889][INFO ][node                     ] [Wyatt Wingfoot] starting ...\n[2016-08-12 17:58:46,955][INFO ][transport                ] [Wyatt Wingfoot] publish_address {127.0.0.1:9300}, bound_addresses {[fe80::1]:9300}, {[::1]:9300}, {127.0.0.1:9300}\n[2016-08-12 17:58:46,962][INFO ][discovery                ] [Wyatt Wingfoot] elasticsearch/sLS1qPKiQ4aGrWvLQP7CEw\n```\n\n./bin/elasticsearch --discovery.zen.minimum_master_nodes=2 \n\n```\n[2016-08-12 17:59:00,423][INFO ][node                     ] [Harry Osborn] version[2.2.0], pid[50310], build[8ff36d1/2016-01-27T13:32:39Z]\n[2016-08-12 17:59:00,424][INFO ][node                     ] [Harry Osborn] initializing ...\n[2016-08-12 17:59:00,942][INFO ][plugins                  ] [Harry Osborn] modules [lang-expression, lang-groovy], plugins [], sites []\n[2016-08-12 17:59:00,962][INFO ][env                      ] [Harry Osborn] using [1] data paths, mounts [[/ (/dev/disk1)]], net usable_space [91.6gb], net total_space [232.6gb], spins? [unknown], types [hfs]\n[2016-08-12 17:59:00,963][INFO ][env                      ] [Harry Osborn] heap size [990.7mb], compressed ordinary object pointers [true]\n[2016-08-12 17:59:02,466][INFO ][script                   ] [Harry Osborn] compiling script file [/Users/clinton/workspace/servers/elasticsearch-2.2.0/config/scripts/test.groovy]\n[2016-08-12 17:59:03,093][INFO ][node                     ] [Harry Osborn] initialized\n[2016-08-12 17:59:03,093][INFO ][node                     ] [Harry Osborn] starting ...\n[2016-08-12 17:59:03,169][INFO ][transport                ] [Harry Osborn] publish_address {127.0.0.1:9301}, bound_addresses {[fe80::1]:9301}, {[::1]:9301}, {127.0.0.1:9301}\n[2016-08-12 17:59:03,176][INFO ][discovery                ] [Harry Osborn] elasticsearch/sba7Y2POT8SrfTb0-ZJTYA\n```\n\nThe first node only becomes master once there are enough master-eligible nodes to satisfy the requirement:\n\n```\n[2016-08-12 17:59:06,230][INFO ][cluster.service          ] [Wyatt Wingfoot] new_master {Wyatt Wingfoot}{sLS1qPKiQ4aGrWvLQP7CEw}{127.0.0.1}{127.0.0.1:9300}, added {{Harry Osborn}{sba7Y2POT8SrfTb0-ZJTYA}{127.0.0.1}{127.0.0.1:9301},}, reason: zen-disco-join(elected_as_master, [1] joins received)\n[2016-08-12 17:59:06,248][INFO ][cluster.service          ] [Harry Osborn] detected_master {Wyatt Wingfoot}{sLS1qPKiQ4aGrWvLQP7CEw}{127.0.0.1}{127.0.0.1:9300}, added {{Wyatt Wingfoot}{sLS1qPKiQ4aGrWvLQP7CEw}{127.0.0.1}{127.0.0.1:9300},}, reason: zen-disco-receive(from master [{Wyatt Wingfoot}{sLS1qPKiQ4aGrWvLQP7CEw}{127.0.0.1}{127.0.0.1:9300}])\n[2016-08-12 17:59:06,267][INFO ][http                     ] [Harry Osborn] publish_address {127.0.0.1:9200}, bound_addresses {[fe80::1]:9200}, {[::1]:9200}, {127.0.0.1:9200}\n[2016-08-12 17:59:06,268][INFO ][node                     ] [Harry Osborn] started\n[2016-08-12 17:59:06,298][INFO ][http                     ] [Wyatt Wingfoot] publish_address {127.0.0.1:9201}, bound_addresses {[fe80::1]:9201}, {[::1]:9201}, {127.0.0.1:9201}\n[2016-08-12 17:59:06,299][INFO ][node                     ] [Wyatt Wingfoot] started\n```\n\nThe log message you provided shows there are not enough master nodes.  So something is going wrong, but we're not seeing enough logging to understand what.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/239493148","html_url":"https://github.com/elastic/elasticsearch/issues/19842#issuecomment-239493148","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19842","id":239493148,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTQ5MzE0OA==","user":{"login":"mkelkarbv","id":8582461,"node_id":"MDQ6VXNlcjg1ODI0NjE=","avatar_url":"https://avatars1.githubusercontent.com/u/8582461?v=4","gravatar_id":"","url":"https://api.github.com/users/mkelkarbv","html_url":"https://github.com/mkelkarbv","followers_url":"https://api.github.com/users/mkelkarbv/followers","following_url":"https://api.github.com/users/mkelkarbv/following{/other_user}","gists_url":"https://api.github.com/users/mkelkarbv/gists{/gist_id}","starred_url":"https://api.github.com/users/mkelkarbv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkelkarbv/subscriptions","organizations_url":"https://api.github.com/users/mkelkarbv/orgs","repos_url":"https://api.github.com/users/mkelkarbv/repos","events_url":"https://api.github.com/users/mkelkarbv/events{/privacy}","received_events_url":"https://api.github.com/users/mkelkarbv/received_events","type":"User","site_admin":false},"created_at":"2016-08-12T16:27:10Z","updated_at":"2016-08-12T16:27:10Z","author_association":"NONE","body":"@clintongormley I do see different behavior in 1.7.3 \n\nThis is what we see in the logs for Node1 -\n\n`[2016-07-19 15:51:01,722][INFO ][cluster.service          ] [uat-polloi-concsrc-fbilai-es-52-166] new_master [uat-polloi-concsrc-fbilai-es-52-166][Be-E2WoeQ02g9APPaTP_AQ][uat-polloi-concsrc-fbilai-es-52-166][inet[/10.100.52.166:9300]]{client_bv=false, availability_zone=a, data=false, master=true}, reason: zen-disco-join (elected_as_master)`\n\nAnd then -\n\n`[2016-07-19 15:51:12,695][WARN ][discovery.ec2            ] [uat-polloi-concsrc-fbilai-es-52-166] not enough master nodes, current nodes: {[uat-polloi-concsrc-fbilai-es-54-66][VM03SLT0SdiuU8VDM_aq9g][uat-polloi-concsrc-fbilai-es-54-66][inet[/10.100.54.66:9300]]{client_bv=false, availability_zone=a, master=false},[uat-polloi-concsrc-fbilai-es-52-166][Be-E2WoeQ02g9APPaTP_AQ][uat-polloi-concsrc-fbilai-es-52-166][inet[/10.100.52.166:9300]]{client_bv=false, availability_zone=a, data=false, master=true},[polloi-node-4abb5e42][SLR3eXAhTEKgcQ1XAj0M0A][uat-polloi-concsrc-fbilai-polloi-62-175][inet[/10.100.62.175:29300]]{data=false, client=true},[polloi-node-02c28aef][ov1RsoOmR1GjVkIKe39XqQ][uat-polloi-concsrc-fbilai-polloi-57-70][inet[/10.100.57.70:29300]]{data=false, client=true},}`\n\nNote how there are no master eligible nodes currently seen...\nThis node somehow becomes master very briefly (11 seconds in this case), and then relinquishes its master status. But after that, no other node becomes master, and cluster remains unhealthy... \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/239499740","html_url":"https://github.com/elastic/elasticsearch/issues/19842#issuecomment-239499740","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19842","id":239499740,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTQ5OTc0MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-08-12T16:53:24Z","updated_at":"2016-08-12T16:53:24Z","author_association":"CONTRIBUTOR","body":"Ah 1.7.3!  OK - you need to upgrade.  SO much has changed since then.  We're not going to do major rewrites to the 1.x series.\n","performed_via_github_app":null}]