[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/541969765","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-541969765","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":541969765,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTk2OTc2NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-10-14T23:15:02Z","updated_at":"2019-10-14T23:15:02Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Build)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/541978351","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-541978351","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":541978351,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTk3ODM1MQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2019-10-14T23:56:41Z","updated_at":"2019-10-14T23:56:41Z","author_association":"MEMBER","body":"This seems like an issue with the underlying docker image we are trying to start. @jbaiera can you have a look?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542164236","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-542164236","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":542164236,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjE2NDIzNg==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-15T11:20:50Z","updated_at":"2019-10-15T11:20:50Z","author_association":"CONTRIBUTOR","body":"This particular failure is on ubuntu-1804 I know we'we had similar issues  on SLES and maybe fedora 29 and we pulled them from the general worker pool, but didn't get to the bottom of the issue. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542684246","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-542684246","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":542684246,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjY4NDI0Ng==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T12:50:57Z","updated_at":"2019-10-16T12:50:57Z","author_association":"CONTRIBUTOR","body":"Another one happened in https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+multijob+fast+part2/1688/consoleText:\r\n\r\n```\r\nCreating network \"a5c3c1596d62b7b1842fcb2469c0c711_krb5kdc-fixture__default\" with the default driver\r\nCreating a5c3c1596d62b7b1842fcb2469c0c711_krb5kdc-fixture__hdfs_1 ... \r\nCreating a5c3c1596d62b7b1842fcb2469c0c711_krb5kdc-fixture__peppa_1 ... \r\nCreating a5c3c1596d62b7b1842fcb2469c0c711_krb5kdc-fixture__peppa_1 ... error\r\n\r\nERROR: for a5c3c1596d62b7b1842fcb2469c0c711_krb5kdc-fixture__peppa_1  Cannot create container for service peppa: error creating overlay mount to /var/lib/docker/overlay2/9d2967ca570b8c46643a30a2e801bcdde60e0dfbbed40c7f41936e41d75f6f57/merged: device or resource busy\r\nCreating a5c3c1596d62b7b1842fcb2469c0c711_krb5kdc-fixture__hdfs_1  ... done\r\n\r\nERROR: for peppa  Cannot create container for service peppa: error creating overlay mount to /var/lib/docker/overlay2/9d2967ca570b8c46643a30a2e801bcdde60e0dfbbed40c7f41936e41d75f6f57/merged: device or resource busy\r\nEncountered errors while bringing up the project.\r\nStopping a5c3c1596d62b7b1842fcb2469c0c711_krb5kdc-fixture__hdfs_1 ... \r\n```\r\n\r\nThe worker this happened on was elasticsearch-ci-immutable-ubuntu-1804-1571225771493903523.  As it was ephemeral it's gone now.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542688873","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-542688873","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":542688873,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjY4ODg3Mw==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T13:01:43Z","updated_at":"2019-10-16T13:01:43Z","author_association":"CONTRIBUTOR","body":"This also just happened on a CI build on one of my PRs: https://gradle-enterprise.elastic.co/s/aexbtvi3nivxo/console-log?task=:test:fixtures:krb5kdc-fixture:composeUp","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542743722","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-542743722","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":542743722,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Mjc0MzcyMg==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T14:58:44Z","updated_at":"2019-10-16T14:58:44Z","author_association":"CONTRIBUTOR","body":"Both of those are on ubuntu 18, so I'm starting to believe there's something specific on that platform, possibly specific to newer versions of something ( kernel or docker ) and we got an upgrade in this version of Ubuntu. \r\n\r\nI have a set of PRs that changes how we gather logs once the build completes to include     system logs.\r\n I'm hoping that there will be something useful in there.  I'm holding off on removing the platform from the general pool for now. \r\nI tried to reproduce something similar on SLES  but I it never did, so might also have to do with the fact that the worker just started. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/543344385","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-543344385","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":543344385,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzM0NDM4NQ==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-10-17T20:18:10Z","updated_at":"2019-10-17T20:19:27Z","author_association":"CONTRIBUTOR","body":"Definitely seems related to ubuntu 18.04.\r\n\r\nhttps://gradle-enterprise.elastic.co/scans/failures?failures.failureClassification=non_verification&failures.failureMessage=*%0A%3E%20Exit-code%201%20when%20calling%20/usr/local/bin/docker-compose,%20stdout:%20N/A*&list.offset=0&list.size=50&list.sortColumn=startTime&list.sortOrder=desc&search.buildToolType=gradle&search.buildToolType=maven&search.startTimeMax=1571342751552&search.startTimeMin=1570737951552&trends.section=overview&trends.timeResolution=day&viewer.tzOffset=-420\r\n\r\nThis [Debian 10 build](https://gradle-enterprise.elastic.co/s/5kxkv5aawkn3k/console-log?task=:x-pack:test:idp-fixture:composeUp) also failed for the same reason, which would make sense since Ubuntu 18.04 is based on Debian 10.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/543594063","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-543594063","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":543594063,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzU5NDA2Mw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-18T08:23:12Z","updated_at":"2019-10-18T08:23:12Z","author_association":"CONTRIBUTOR","body":"New failures should have a \"GCP upload\" link in  the build scan. We have to wait for one of those to get additional insight on this. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/543909273","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-543909273","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":543909273,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzkwOTI3Mw==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-10-18T19:46:17Z","updated_at":"2019-10-18T19:46:17Z","author_association":"CONTRIBUTOR","body":"@atorok I just took a look at the logs uploaded to GCP for [this failure](https://gradle-enterprise.elastic.co/s/7xaexpy2rde2k/) and the only thing in there was the Gradle daemon log which is effectively identical to the console output. What kind of Docker-specific logging were we expecting to capture here?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/544008250","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-544008250","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":544008250,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDAwODI1MA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-10-18T23:38:41Z","updated_at":"2019-10-18T23:38:41Z","author_association":"CONTRIBUTOR","body":"@atorok it looks like we aren't getting a `journalctl` log because we need to call `supply()` here: https://github.com/elastic/elasticsearch/blob/28b599de3d7d01c195f33fff2450327ee2a66afe/gradle/build-complete.gradle#L28","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/544418878","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-544418878","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":544418878,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDQxODg3OA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-21T08:58:38Z","updated_at":"2019-10-21T08:58:38Z","author_association":"CONTRIBUTOR","body":"I opened #48276  to address that","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/545391364","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-545391364","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":545391364,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTM5MTM2NA==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2019-10-23T11:07:12Z","updated_at":"2019-10-23T11:07:12Z","author_association":"CONTRIBUTOR","body":"Another failure here: https://gradle-enterprise.elastic.co/s/iaherl5mpkitc","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/545508760","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-545508760","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":545508760,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTUwODc2MA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-10-23T15:46:54Z","updated_at":"2019-10-23T15:46:54Z","author_association":"CONTRIBUTOR","body":"After discussing, since this looks to be something somewhat related Docker volumes, would be to use a different storage driver here. We've already switched to using `devicemaper` on Centos 8 due to another issue, perhaps we could try using `devicemaper` across the board.\r\n\r\n@fatmcgav What would be the implications of â˜ï¸? In https://github.com/elastic/infra/pull/15395 we conditionally apply this to only one image, what would be involve in doing this by default? What else would this effect (ideally only elasticsearch-ci images)?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/545516353","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-545516353","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":545516353,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTUxNjM1Mw==","user":{"login":"fatmcgav","id":2235170,"node_id":"MDQ6VXNlcjIyMzUxNzA=","avatar_url":"https://avatars2.githubusercontent.com/u/2235170?v=4","gravatar_id":"","url":"https://api.github.com/users/fatmcgav","html_url":"https://github.com/fatmcgav","followers_url":"https://api.github.com/users/fatmcgav/followers","following_url":"https://api.github.com/users/fatmcgav/following{/other_user}","gists_url":"https://api.github.com/users/fatmcgav/gists{/gist_id}","starred_url":"https://api.github.com/users/fatmcgav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fatmcgav/subscriptions","organizations_url":"https://api.github.com/users/fatmcgav/orgs","repos_url":"https://api.github.com/users/fatmcgav/repos","events_url":"https://api.github.com/users/fatmcgav/events{/privacy}","received_events_url":"https://api.github.com/users/fatmcgav/received_events","type":"User","site_admin":false},"created_at":"2019-10-23T16:02:45Z","updated_at":"2019-10-23T16:02:45Z","author_association":"MEMBER","body":"@mark-vieira As to wider implications, I'm not sure... I'll have a look at what options exist... \r\n\r\nWith regards to making the change across the board for `elasticsearch-ci` images, that's also something we could look at doing... We'd need to handle the `sysv`/`systemd` behaviour differences, but we've already got `systemd` supported via https://github.com/elastic/infra/pull/15395","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/545517925","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-545517925","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":545517925,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTUxNzkyNQ==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-10-23T16:06:23Z","updated_at":"2019-10-23T16:06:33Z","author_association":"CONTRIBUTOR","body":"@fatmcgav Makes sense. My main concern is that changes in those ansible scripts are \"global\" and would apply to other project CI images as well. Is that accurate?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/545828371","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-545828371","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":545828371,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTgyODM3MQ==","user":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"created_at":"2019-10-24T09:19:45Z","updated_at":"2019-10-24T09:19:45Z","author_association":"CONTRIBUTOR","body":"Another occurrence: https://gradle-enterprise.elastic.co/s/gyjdbjuetvz66\r\n\r\nOne concern I have changing the storage driver to devicemapper is we'd be switching away from Docker's defaults on many distributions, which is currently `overlay2`. Perhaps this is not a huge issue as e.g. the Docker packaging tests are performed inside Vagrant, but still I'd feel more confident doing Docker related things using the default storage driver elected for the distro.\r\n\r\nI wonder if the specific issue is related to https://github.com/moby/moby/issues/39475; do we have any `dmesg` output? I'd look for something like `overlayfs: lowerdir is in-use as upperdir/workdir` there.\r\n\r\nThere have been some fixes in https://github.com/moby/moby/pull/37993 that landed in Docker 18.09 that could be useful to read.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/545869412","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-545869412","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":545869412,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTg2OTQxMg==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-24T11:12:39Z","updated_at":"2019-10-24T11:12:39Z","author_association":"CONTRIBUTOR","body":"We'll get a full system log, including the kernel log once elastic/infra#15520 merge. We might have it for some platforms already in the additional logs linked from the build scan. \r\n\r\nI think @dliappis brings up a good point. We need to make this change for elasticsearch-ci only and not packaging-ci, we have packaging tests that run on GCP these days, not only the vagrant ones. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/547613438","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-547613438","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":547613438,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzYxMzQzOA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-10-29T20:25:30Z","updated_at":"2019-10-29T20:25:30Z","author_association":"CONTRIBUTOR","body":"The `journalctl` logs haven't provided any insight. On SLES the log is completely empty and on Ubuntu there are no entries.\r\n\r\n```\r\n-- Logs begin at Tue 2019-10-29 04:09:52 UTC, end at Tue 2019-10-29 04:42:35 UTC. --\r\n-- No entries --\r\n```\r\n\r\nI'm also staring to doubt if this is necessarily related to the storage driver as on SLES it's trying to [create a `tmpfs` mount](https://gradle-enterprise.elastic.co/s/wk3e3borma3f6/console-log?task=:test:fixtures:krb5kdc-fixture:composeUp#L9), not overlay2, yet encountering the same error.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/547756910","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-547756910","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":547756910,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Nzc1NjkxMA==","user":{"login":"bizybot","id":902768,"node_id":"MDQ6VXNlcjkwMjc2OA==","avatar_url":"https://avatars2.githubusercontent.com/u/902768?v=4","gravatar_id":"","url":"https://api.github.com/users/bizybot","html_url":"https://github.com/bizybot","followers_url":"https://api.github.com/users/bizybot/followers","following_url":"https://api.github.com/users/bizybot/following{/other_user}","gists_url":"https://api.github.com/users/bizybot/gists{/gist_id}","starred_url":"https://api.github.com/users/bizybot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bizybot/subscriptions","organizations_url":"https://api.github.com/users/bizybot/orgs","repos_url":"https://api.github.com/users/bizybot/repos","events_url":"https://api.github.com/users/bizybot/events{/privacy}","received_events_url":"https://api.github.com/users/bizybot/received_events","type":"User","site_admin":false},"created_at":"2019-10-30T06:28:48Z","updated_at":"2019-10-30T06:28:48Z","author_association":"CONTRIBUTOR","body":"I saw this today and also on one of my PRs:\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility/os=sles-12&&immutable/360/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/547756980","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-547756980","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":547756980,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Nzc1Njk4MA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-30T06:29:06Z","updated_at":"2019-10-30T06:29:06Z","author_association":"CONTRIBUTOR","body":"It seems that the new images where the logs would be included were not picked up by gobld. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/548067498","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-548067498","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":548067498,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODA2NzQ5OA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-10-30T19:06:40Z","updated_at":"2019-10-30T19:06:40Z","author_association":"CONTRIBUTOR","body":"> It seems that the new images where the logs would be included were not picked up by gobld.\r\n\r\nWhat's indicating this? If this were the case wouldn't we get a completely empty `journalctl.log` file? Checking again today I'm seeing the same in the log.\r\n\r\n```\r\n-- Logs begin at Wed 2019-10-30 04:09:46 UTC, end at Wed 2019-10-30 04:42:29 UTC. --\r\n-- No entries --\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/548071506","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-548071506","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":548071506,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODA3MTUwNg==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-10-30T19:17:24Z","updated_at":"2019-10-30T19:17:24Z","author_association":"CONTRIBUTOR","body":"Also, I think we should consider blacklisting these images for \"general-purpose\" builds soon. This is currently the #1 non-test failure cause of build failures. It's getting quite disruptive.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/548082433","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-548082433","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":548082433,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODA4MjQzMw==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-10-30T19:47:48Z","updated_at":"2019-10-30T19:47:48Z","author_association":"CONTRIBUTOR","body":"> Also, I think we should consider blacklisting these images for \"general-purpose\" builds soon. This is currently the #1 non-test failure cause of build failures. It's getting quite disruptive.\r\n\r\nI take that back, since that wouldn't solve the platform matrix builds ðŸ˜ž ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/548223556","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-548223556","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":548223556,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODIyMzU1Ng==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-31T05:35:15Z","updated_at":"2019-10-31T05:35:15Z","author_association":"CONTRIBUTOR","body":"The console output would have:\r\n```\r\nHint: You are currently not seeing messages from other users and the system.\r\n      Users in groups 'adm', 'systemd-journal' can see all messages.\r\n      Pass -q to turn off this notice.\r\n```\r\nThe newer images do have `jenkins` added to  `systemd-journal` and manually starting one does show the journal ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/548256461","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-548256461","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":548256461,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODI1NjQ2MQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-31T08:04:06Z","updated_at":"2019-10-31T08:04:06Z","author_association":"CONTRIBUTOR","body":"@dliappis we indeed have `overlayfs: lowerdir is in-use as upperdir/workdir` in the logs, but are running a newer docker and older kernel\r\n```\r\ndocker version\r\n...\r\n Engine:\r\n  Version:          19.03.4\r\n...\r\njenkins@alpar-ci-ubuntu-1804-lts-1030-1809:/dev/shm/elasticsearch$ uname -a \r\nLinux alpar-ci-ubuntu-1804-lts-1030-1809 5.0.0-1021-gcp #21~18.04.1-Ubuntu SMP Mon Oct 7 04:51:28 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/548270812","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-548270812","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":548270812,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODI3MDgxMg==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-31T08:51:48Z","updated_at":"2019-10-31T08:51:48Z","author_association":"CONTRIBUTOR","body":"There are some related issues to this error, but none of them seem to be applicable to the version of docker and kernel we are running. \r\n\r\nAlso the error on `sles-12` is different:\r\n```\r\n\r\nERROR: for elasticsearch-oss-2  Cannot start service elasticsearch-oss-2: unable to remount dir as readonly: mount tmpfs:/var/lib/docker/containers/fcf685778b74a7b4f2a205d20119e706e59e13563898359fa2e6991d8790dda2/mounts/secrets, flags: 0x21, data: uid=0,gid=0: device or resource busy\r\n--\r\nEncountered errors while bringing up the project.\r\n```\r\nThe system log is:\r\n```\r\nOct 30, 2019 @ 11:12:39.155\r\nsystem.syslog\r\ntime=\"2019-10-30T09:12:39.155840228Z\" level=error msg=\"9555b990e9615b703e4945a7b74df4b3d890c3fa96beca2be09007d0ab4342a6 cleanup: failed to delete container from containerd: no such container\"\r\nOct 30, 2019 @ 11:12:39.156\r\nsystem.syslog\r\ntime=\"2019-10-30T09:12:39.155929488Z\" level=error msg=\"Handler for POST /v1.25/containers/9555b990e9615b703e4945a7b74df4b3d890c3fa96beca2be09007d0ab4342a6/start returned error: unable to remount dir as readonly: mount tmpfs:/var/lib/docker/containers/9555b990e9615b703e4945a7b74df4b3d890c3fa96beca2be09007d0ab4342a6/mounts/secrets, flags: 0x21, data: uid=0,gid=0: device or resource busy\"\r\nOct 30, 2019 @ 11:12:39.315\r\nsystem.syslog\r\ntime=\"2019-10-30T09:12:39Z\" level=info msg=\"SUSE:secrets :: enabled\"\r\nOct 30, 2019 @ 11:12:39.385\r\nsystem.syslog\r\ntime=\"2019-10-30T09:12:39Z\" level=info msg=\"SUSE:secrets :: enabled\"\r\nOct 30, 2019 @ 11:12:39.484\r\nsystem.syslog\r\n[ 2050.880591] eth0: renamed from vethdaf1d0f\r\n``` \r\nThe sles failure happens lather on in the build, not at start, like ubuntu.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/548294683","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-548294683","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":548294683,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODI5NDY4Mw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-31T10:00:45Z","updated_at":"2019-10-31T10:00:45Z","author_association":"CONTRIBUTOR","body":"Sles-12 :\r\n -  http://gradle-enterprise.elastic.co/s/3ev7nufxpezy2/console-log \r\n - https://gradle-enterprise.elastic.co/s/k6xde4rwbsmne\r\n - https://gradle-enterprise.elastic.co/s/3ev7nufxpezy2\r\nSles-15: \r\n - https://gradle-enterprise.elastic.co/s/lcpvsa6r342cc/console-log?task=:x-pack:test:idp-fixture:composeUp\r\n  - https://gradle-enterprise.elastic.co/s/lcpvsa6r342cc\r\n\r\nUbubntu-18:\r\n  -  https://gradle-enterprise.elastic.co/s/sgpyyszhx2vxg/console-log?task=:x-\r\npack:test:idp-fixture:composeUp\r\n  - https://gradle-enterprise.elastic.co/s/tcwgu3mwn4pfm\r\n  - https://gradle-enterprise.elastic.co/s/pbvgdkijh4emq\r\n  - https://gradle-enterprise.elastic.co/s/xv25tdtfr4sqe\r\n  - https://gradle-enterprise.elastic.co/s/kcgc6avurqtwo \r\n\r\n\r\n\r\nSwarm is starting before systemd completes, so it's technically possible to start using docker before the system is fully initialized. \r\nI was not able to reproduce this in a worker started manually, so I suspect it has to do with running docker early before startup is complete. This could be a cause on ubuntu but not on sles. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/548307658","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-548307658","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":548307658,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODMwNzY1OA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-31T10:35:08Z","updated_at":"2019-10-31T11:23:05Z","author_association":"CONTRIBUTOR","body":"Looking at the failure on Ubuntu: \r\n```\r\nct 31, 2019 @ 05:59:55.000\r\nsystem.syslog\r\nStartup finished in 5.487s (kernel) + 1min 11.772s (userspace) = 1min 17.260s.\r\nOct 31, 2019 @ 06:00:16.000\r\nsystem.syslog\r\n2019/10/31 04:00:16 Unsolicited response received on idle HTTP channel starting with \"HTTP/1.0 408 Request Time-out\\r\\nCache-Control: no-cache\\r\\nConnection: close\\r\\nContent-Type: text/html\\r\\n\\r\\n<html><body><h1>408 Request Time-out</h1>\\nYour browser didn't send a complete request in time.\\n</body></html>\\n\"; err=<nil>\r\nOct 31, 2019 @ 06:01:04.000\r\nsystem.syslog\r\nlink_config: autonegotiation is unset or enabled, the speed and duplex are not writable.\r\nOct 31, 2019 @ 06:01:04.000\r\nsystem.syslog\r\nlink_config: autonegotiation is unset or enabled, the speed and duplex are not writable.\r\nOct 31, 2019 @ 06:01:04.000\r\nsystem.syslog\r\n[  147.260107] audit: audit_lost=8998 audit_rate_limit=500 audit_backlog_limit=8192\r\nOct 31, 2019 @ 06:01:04.000\r\nsystem.syslog\r\ntime=\"2019-10-31T04:01:04.832445362Z\" level=error msg=\"error unmounting /var/lib/docker/overlay2/b8c8ed7e60060cd75ce17889efc5ad5fde6a092055fc49a4f089aece59b77c18/merged: invalid argument\" storage-driver=overlay2\r\n```\r\n\r\nAnd another: \r\n```\r\nOct 31, 2019 @ 10:54:23.000\r\nsystem.syslog\r\nStartup finished in 6.688s (kernel) + 25.739s (userspace) = 32.427s.\r\nOct 31, 2019 @ 10:56:12.000\r\nsystem.syslog\r\ntime=\"2019-10-31T08:56:12.527391244Z\" level=error msg=\"Handler for POST /v1.25/containers/create returned error: error creating overlay mount to /var/lib/docker/overlay2/50846033d2f089f36ae1b22cab94946adfa826beff24fefd0a5d9023904677b5/merged: device or resource busy\"\r\n```\r\n\r\nLooks like all the failure are ~2 minutes after startup, so doesn't seem that it really matters that we start running the build before systemd completes the startup\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/548307735","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-548307735","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":548307735,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODMwNzczNQ==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2019-10-31T10:35:19Z","updated_at":"2019-10-31T10:35:19Z","author_association":"CONTRIBUTOR","body":"another one: https://gradle-enterprise.elastic.co/s/4a2iyzcrcc7ta","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/548311083","html_url":"https://github.com/elastic/elasticsearch/issues/48027#issuecomment-548311083","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48027","id":548311083,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODMxMTA4Mw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-31T10:45:08Z","updated_at":"2019-10-31T10:45:08Z","author_association":"CONTRIBUTOR","body":"https://github.com/docker/for-linux/issues/711 seems related but doesn't have any other resolution than using `overlay` instead of `overlay2`","performed_via_github_app":null}]