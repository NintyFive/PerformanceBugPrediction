{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10264","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10264/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10264/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10264/events","html_url":"https://github.com/elastic/elasticsearch/issues/10264","id":64294266,"node_id":"MDU6SXNzdWU2NDI5NDI2Ng==","number":10264,"title":"zen unicast discovery not detecting nodes when protected by shield","user":{"login":"jagadeeshv16","id":6297068,"node_id":"MDQ6VXNlcjYyOTcwNjg=","avatar_url":"https://avatars3.githubusercontent.com/u/6297068?v=4","gravatar_id":"","url":"https://api.github.com/users/jagadeeshv16","html_url":"https://github.com/jagadeeshv16","followers_url":"https://api.github.com/users/jagadeeshv16/followers","following_url":"https://api.github.com/users/jagadeeshv16/following{/other_user}","gists_url":"https://api.github.com/users/jagadeeshv16/gists{/gist_id}","starred_url":"https://api.github.com/users/jagadeeshv16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jagadeeshv16/subscriptions","organizations_url":"https://api.github.com/users/jagadeeshv16/orgs","repos_url":"https://api.github.com/users/jagadeeshv16/repos","events_url":"https://api.github.com/users/jagadeeshv16/events{/privacy}","received_events_url":"https://api.github.com/users/jagadeeshv16/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-03-25T15:10:37Z","updated_at":"2015-04-26T19:55:35Z","closed_at":"2015-04-26T19:55:35Z","author_association":"NONE","active_lock_reason":null,"body":"Hello, when installed shield on nodes which are present on different VPS to protect ELK , the hosts are failing to discover each other. The log lines point to shield exception :\n\norg.elasticsearch.transport.RemoteTransportException: Failed to deserialize exception response from stream\nCaused by: org.elasticsearch.transport.TransportSerializationException: Failed to deserialize exception response from stream\n    at org.elasticsearch.transport.netty.MessageChannelHandler.handlerResponseError(MessageChannelHandler.java:178)\n    at org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:130)\n    at org.elasticsearch.common.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\n    at org.elasticsearch.common.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n    at org.elasticsearch.common.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\n    at org.elasticsearch.common.netty.channel.Channels.fireMessageReceived(Channels.java:296)\n    at org.elasticsearch.common.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:462)\n    at org.elasticsearch.common.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:443)\n    at org.elasticsearch.common.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)\n    at org.elasticsearch.common.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\n    at org.elasticsearch.common.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n    at org.elasticsearch.common.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)\n    at org.elasticsearch.common.netty.channel.Channels.fireMessageReceived(Channels.java:268)\n    at org.elasticsearch.common.netty.channel.Channels.fireMessageReceived(Channels.java:255)\n    at org.elasticsearch.common.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)\n    at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)\n    at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)\n    at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\n    at org.elasticsearch.common.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\n    at org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n    at org.elasticsearch.common.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.io.InvalidClassException: failed to read class descriptor\n    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1606)\n    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1520)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1776)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1353)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1999)\n    at java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:503)\n    at java.lang.Throwable.readObject(Throwable.java:913)\n    at sun.reflect.GeneratedMethodAccessor10.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:502)\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1017)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1898)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1803)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1353)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:371)\n    at org.elasticsearch.transport.netty.MessageChannelHandler.handlerResponseError(MessageChannelHandler.java:176)\n    ... 23 more\nCaused by: java.lang.ClassNotFoundException: org.elasticsearch.shield.authc.AuthenticationException\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:262)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)\n    at org.elasticsearch.common.io.ThrowableObjectInputStream.loadClass(ThrowableObjectInputStream.java:93)\n    at org.elasticsearch.common.io.ThrowableObjectInputStream.readClassDescriptor(ThrowableObjectInputStream.java:67)\n    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1604)\n    ... 38 more\n[2015-03-25 13:22:49,971][WARN ][transport.netty          ] [remotenode] Message not fully read (response) for [63272] handler org.elasticsearch.discovery.zen.ping.unicast.UnicastZenPing$4@404ce7aa, error [true], resetting\n[2015-03-25 13:22:51,471][WARN ][discovery.zen.ping.unicast] [remotenode] failed to send ping to [[#zen_unicast_1#][ip-][inet[/<node_ip_address>:9300]]]\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}