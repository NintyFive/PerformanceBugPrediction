[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/93684886","html_url":"https://github.com/elastic/elasticsearch/issues/10625#issuecomment-93684886","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10625","id":93684886,"node_id":"MDEyOklzc3VlQ29tbWVudDkzNjg0ODg2","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-04-16T09:03:55Z","updated_at":"2015-04-16T09:16:41Z","author_association":"MEMBER","body":"I agree this is a problem, it is impossible to maintain. \n\nTo give you some more background here, the idea behind this experiment was to support the postings highlighter in elasticsearch, but trying to make it work as similar as possible to the other highlighters in terms of supported options and the result they provide.\n\nOne problem was supporting `fragment_size: 0` which means highlighting the whole content of a field, against multiple values. Other highlighters return an array, one fragment per value, while the postings highlighter from lucene used to return all values in a single string. That's why we added \"discrete per value highlighting\" as a short-term solution.\n\nOne other problem was the `require_field_match` option that wasn't and probably will never be supported in lucene's postings highlighters, but other highlighters do support it. That's the ability to ignore which fields were queried, and just look for the terms in any field that needs to be highlighted.\n\nIn order to get rid of this custom class, either we \n1) accept these differences between the standard postings highlighter from lucene and the other highlighters. We document them and we break bw comp as for the above two behaviours\n\n2) find a way to contribute these two changes back to lucene\n\nTo be honest, I don't see 2) happen, especially for `require_field_match` so I'd vote for 1). At the end of the day, it is a different highlighter and we already tell people to try out the different highlighters without expecting exactly the same results.\n","performed_via_github_app":null}]