{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/30031","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30031/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30031/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30031/events","html_url":"https://github.com/elastic/elasticsearch/issues/30031","id":317454084,"node_id":"MDU6SXNzdWUzMTc0NTQwODQ=","number":30031,"title":"Internal indices consistent naming","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"labels":[{"id":912834056,"node_id":"MDU6TGFiZWw5MTI4MzQwNTY=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Monitoring","name":":Core/Features/Monitoring","color":"0e8a16","default":false,"description":""},{"id":912845062,"node_id":"MDU6TGFiZWw5MTI4NDUwNjI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Watcher","name":":Core/Features/Watcher","color":"0e8a16","default":false,"description":""},{"id":912838879,"node_id":"MDU6TGFiZWw5MTI4Mzg4Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/Security","name":":Security/Security","color":"0e8a16","default":false,"description":"Security issues without another label"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":837440720,"node_id":"MDU6TGFiZWw4Mzc0NDA3MjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Erefactoring","name":">refactoring","color":"dddddd","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":29,"created_at":"2017-02-10T18:08:28Z","updated_at":"2018-06-07T20:50:17Z","closed_at":"2018-06-07T20:50:17Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"*Original comment by @uboness:*\n\nThere are a bunch of internal indices that are created/managed by xpack (e.g. marvel data, security audit logs and users/roles, etc…). There are also internal indices managed by core (e.g. .scripts). And next to those, there the indices that LS/Beats create by default.\n\nI want us to be consistent on how we name internal indices. Today there’s a mix of patterns and it’s not quite clear what’s the consistent way of naming those indices. It’s mostly revolves around the usage of underscores, dots, and dashes.\n\nMarvel for example, creates indices with the following pattern:\n- `.marvel-es-data`\n- `.marvel-es-<template version>-<date pattern>`\n\nWatcher:\n- `.watches`\n- `.watch_history-<template version>-<date pattern>`\n\nShield:\n- `.shield`\n- `.shield_audit_log-<date pattern>`\n\nAlso, expect to have more internal indices as we grow (centralized logging, reporting index, etc...).\n\nWe should the following:\n1. Decide on a consistent naming pattern for both “config\" indices (indices that typically hold configuration - it’s not time based indices) and time-based indices (e.g. audit logs, monitoring data, etc…)\n2. try to keep the number of indices to the minimum. For example, in Marvel we have a data index for ES today (.marvel-es-data)… continuing with this scheme means we’ll have dedicated data indices for LS, Kibana and Beats later on. These are really small indices that can easily be collapse to a single index.\n\nAlso, while I plead guilty for introducing the underscores in watcher/shield (there was good intention behind it), if I’m honest about it, I think just using dashes (a la marvel) is somewhat easier on the eye.\n\nI have two proposals:\n### Proposal 1:\n\nMarvel:\n- `.monitoring-data`\n- `.monitoring-es-stats-<template version>-<date pattern>`\n- `.monitoring-es-logs-<template version>-<date pattern>`\n- `.monitoring-ls-stats-<template version>-<date pattern>`\n- `.monitoring-ls-logs-<template version>-<date pattern>`\n- `.monitoring-kbn-stats-<template version>-<date pattern>`\n- `.monitoring-kbn-logs-<template version>-<date pattern>`\n- `.monitoring-bts-stats-<template version>-<date pattern>`\n- `.monitoring-bts-logs-<template version>-<date pattern>`\n- `.monitoring-cloud-stats-<template version>-<date pattern>`\n- `.monitoring-cloud-logs-<template version>-<date pattern>`\n\nWatcher:\n- `.watcher (used to be .watches)`\n- `.watcher-history-<template version>-<date pattern>`\n\nShield:\n- `.security`\n- `.security-audit-log-<date pattern>`\n### Proposal 2:\n\nHere we collapse all the config indices into a single .xpack index (and still keep the same timebased indices)\n- `.xpack` - holds watches, users, roles, etc...\n\nMarvel:\n- `.monitoring-data`\n- `.monitoring-es-stats-<template version>-<date pattern>`\n- `.monitoring-es-logs-<template version>-<date pattern>`\n- `.monitoring-ls-stats-<template version>-<date pattern>`\n- `.monitoring-ls-logs-<template version>-<date pattern>`\n- `.monitoring-kbn-stats-<template version>-<date pattern>`\n- `.monitoring-kbn-logs-<template version>-<date pattern>`\n- `.monitoring-bts-stats-<template version>-<date pattern>`\n- `.monitoring-bts-logs-<template version>-<date pattern>`\n- `.monitoring-cloud-stats-<template version>-<date pattern>`\n- `.monitoring-cloud-logs-<template version>-<date pattern>`\n\nWatcher:\n- `.watcher-history-<template version>-<date pattern>`\n\nShield:\n- `.security-audit-log-<template version>-<date pattern>`\n\n\n","closed_by":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}