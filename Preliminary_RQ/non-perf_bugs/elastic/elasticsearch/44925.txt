{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/44925","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44925/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44925/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44925/events","html_url":"https://github.com/elastic/elasticsearch/issues/44925","id":473539384,"node_id":"MDU6SXNzdWU0NzM1MzkzODQ=","number":44925,"title":"Failure in ML BwC REST Tests ","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"assignees":[{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2019-07-26T21:17:00Z","updated_at":"2019-07-30T06:42:44Z","closed_at":"2019-07-30T06:42:44Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"NodeDisconnectedException failure, unable to reproduce locally, but seeing this error a number of times today.  Wondering if there is some relation to (https://github.com/elastic/elasticsearch/issues/31834).\r\n\r\nReproduce:\r\n```REPRODUCE WITH: ./gradlew :x-pack:qa:rolling-upgrade:v7.4.0#oneThirdUpgradedTestRunner --tests \"org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT.test {p0=mixed_cluster/30_ml_jobs_crud/Test get old cluster categorization job}\" \\\r\n  -Dtests.seed=896067E457C12CA0 \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=bas \\\r\n  -Dtests.timezone=Africa/Luanda \\\r\n  -Dcompiler.java=12 \\\r\n  -Druntime.java=11 \\\r\n  -Dtests.rest.suite=mixed_cluster \\\r\n  -Dtests.rest.blacklist=mixed_cluster/10_basic/Start scroll in mixed cluster on upgraded node that we will continue after upgrade,mixed_cluster/30_ml_jobs_crud/Create a job in the mixed cluster and write some data,mixed_cluster/40_ml_datafeed_crud/Put job and datafeed in mixed cluster,mixed_cluster/40_ml_datafeed_crud/Put job and datafeed without aggs in mixed cluster,mixed_cluster/40_ml_datafeed_crud/Put job and datafeed with aggs in mixed cluster,mixed_cluster/80_data_frame_jobs_crud/Test put batch data frame transforms on mixed cluster,mixed_cluster/80_data_frame_jobs_crud/Test put continuous data frame transform on mixed cluster\r\n```\r\n\r\nBuild:\r\nhttps://scans.gradle.com/s/32bmadif5ad4e/console-log\r\n\r\nError:\r\n```\r\n\r\norg.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT > test {p0=mixed_cluster/30_ml_jobs_crud/Test get old cluster categorization job} FAILED\r\n--\r\njava.lang.AssertionError: Failure at [mixed_cluster/30_ml_jobs_crud:80]: expected [2xx] status code but api [ml.close_job] returned [500 Internal Server Error] [{\"error\":{\"root_cause\":[{\"type\":\"node_disconnected_exception\",\"reason\":\"[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected\",\"stack_trace\":\"NodeDisconnectedException[[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected]\\n\"}],\"type\":\"node_disconnected_exception\",\"reason\":\"[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected\",\"stack_trace\":\"NodeDisconnectedException[[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected]\\n\"},\"status\":500}]\r\n \r\nCaused by:\r\njava.lang.AssertionError: expected [2xx] status code but api [ml.close_job] returned [500 Internal Server Error] [{\"error\":{\"root_cause\":[{\"type\":\"node_disconnected_exception\",\"reason\":\"[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected\",\"stack_trace\":\"NodeDisconnectedException[[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected]\\n\"}],\"type\":\"node_disconnected_exception\",\"reason\":\"[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected\",\"stack_trace\":\"NodeDisconnectedException[[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected]\\n\"},\"status\":500}]\r\nREPRODUCE WITH: ./gradlew :x-pack:qa:rolling-upgrade:v7.4.0#oneThirdUpgradedTestRunner --tests \"org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT.test {p0=mixed_cluster/30_ml_jobs_crud/Test get old cluster categorization job}\" -Dtests.seed=896067E457C12CA0 -Dtests.security.manager=true -Dtests.locale=bas -Dtests.timezone=Africa/Luanda -Dcompiler.java=12 -Druntime.java=11 -Dtests.rest.suite=mixed_cluster -Dtests.rest.blacklist=mixed_cluster/10_basic/Start scroll in mixed cluster on upgraded node that we will continue after upgrade,mixed_cluster/30_ml_jobs_crud/Create a job in the mixed cluster and write some data,mixed_cluster/40_ml_datafeed_crud/Put job and datafeed in mixed cluster,mixed_cluster/40_ml_datafeed_crud/Put job and datafeed without aggs in mixed cluster,mixed_cluster/40_ml_datafeed_crud/Put job and datafeed with aggs in mixed cluster,mixed_cluster/80_data_frame_jobs_crud/Test put batch data frame transforms on mixed cluster,mixed_cluster/80_data_frame_jobs_crud/Test put continuous data frame transform on mixed cluster\r\n \r\norg.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT > test {p0=mixed_cluster/30_ml_jobs_crud/Test get old cluster job} FAILED\r\njava.lang.AssertionError: Failure at [mixed_cluster/30_ml_jobs_crud:29]: expected [2xx] status code but api [ml.close_job] returned [500 Internal Server Error] [{\"error\":{\"root_cause\":[{\"type\":\"node_disconnected_exception\",\"reason\":\"[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected\",\"stack_trace\":\"NodeDisconnectedException[[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected]\\n\"}],\"type\":\"node_disconnected_exception\",\"reason\":\"[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected\",\"stack_trace\":\"NodeDisconnectedException[[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected]\\n\"},\"status\":500}]\r\n \r\nCaused by:\r\njava.lang.AssertionError: expected [2xx] status code but api [ml.close_job] returned [500 Internal Server Error] [{\"error\":{\"root_cause\":[{\"type\":\"node_disconnected_exception\",\"reason\":\"[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected\",\"stack_trace\":\"NodeDisconnectedException[[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected]\\n\"}],\"type\":\"node_disconnected_exception\",\"reason\":\"[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected\",\"stack_trace\":\"NodeDisconnectedException[[node-1][127.0.0.1:43380][cluster:admin/xpack/ml/job/close] disconnected]\\n\"},\"status\":500}]\r\nREPRODUCE WITH: ./gradlew :x-pack:qa:rolling-upgrade:v7.4.0#oneThirdUpgradedTestRunner --tests \"org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT.test {p0=mixed_cluster/30_ml_jobs_crud/Test get old cluster job}\" -Dtests.seed=896067E457C12CA0 -Dtests.security.manager=true -Dtests.locale=bas -Dtests.timezone=Africa/Luanda -Dcompiler.java=12 -Druntime.java=11 -Dtests.rest.suite=mixed_cluster -Dtests.rest.blacklist=mixed_cluster/10_basic/Start scroll in mixed cluster on upgraded node that we will continue after upgrade,mixed_cluster/30_ml_jobs_crud/Create a job in the mixed cluster and write some data,mixed_cluster/40_ml_datafeed_crud/Put job and datafeed in mixed cluster,mixed_cluster/40_ml_datafeed_crud/Put job and datafeed without aggs in mixed cluster,mixed_cluster/40_ml_datafeed_crud/Put job and datafeed with aggs in mixed cluster,mixed_cluster/80_data_frame_jobs_crud/Test put batch data frame transforms on mixed cluster,mixed_cluster/80_data_frame_jobs_crud/Test put continuous data frame transform on mixed cluster\r\n ```","closed_by":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"performed_via_github_app":null}