[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/214743916","html_url":"https://github.com/elastic/elasticsearch/issues/17961#issuecomment-214743916","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17961","id":214743916,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNDc0MzkxNg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-04-26T13:25:23Z","updated_at":"2016-04-26T13:25:23Z","author_association":"CONTRIBUTOR","body":"@danling when you're in this situation, please could you try to assign the shard manually with the cluster reroute API, and include the `?explain` query string param (see https://www.elastic.co/guide/en/elasticsearch/reference/1.7/cluster-reroute.html)\n\nThat will tell you why the shard can't be assigned (or it'll go ahead and assign the shard).  There may have been bugs fixed in this area even in 1.7, so worth upgrading to 1.7.5 (and even better, upgrade to 2.3.2)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/214939239","html_url":"https://github.com/elastic/elasticsearch/issues/17961#issuecomment-214939239","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17961","id":214939239,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNDkzOTIzOQ==","user":{"login":"danling","id":6528002,"node_id":"MDQ6VXNlcjY1MjgwMDI=","avatar_url":"https://avatars3.githubusercontent.com/u/6528002?v=4","gravatar_id":"","url":"https://api.github.com/users/danling","html_url":"https://github.com/danling","followers_url":"https://api.github.com/users/danling/followers","following_url":"https://api.github.com/users/danling/following{/other_user}","gists_url":"https://api.github.com/users/danling/gists{/gist_id}","starred_url":"https://api.github.com/users/danling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danling/subscriptions","organizations_url":"https://api.github.com/users/danling/orgs","repos_url":"https://api.github.com/users/danling/repos","events_url":"https://api.github.com/users/danling/events{/privacy}","received_events_url":"https://api.github.com/users/danling/received_events","type":"User","site_admin":false},"created_at":"2016-04-27T01:36:42Z","updated_at":"2016-04-27T01:36:42Z","author_association":"NONE","body":"Thanks for the suggestion. Here is the information I got from the reroute API:\nThe unassigned index is a \"hot\" index and has setting:\n \"index\" : {\n        \"routing\" : {\n          \"allocation\" : {\n            \"require\" : {\n              \"box_type\" : \"hot\"\n            }   }   },\nThe unassigned index is on the \"hot\" node (the cluster has 1 hot node and 2 warm nodes).  \nFirst, I tried to allocate the index to the hot node:\ncurl -XPOST 'localhost:9200/_cluster/reroute?explain&pretty=true' -d '{\n    \"commands\" : [    {\n          \"allocate\" : {\n              \"index\" : \"logstash-test-20160426\", \"shard\" : 0, \"node\" : \"data1_hot_node\"\n          } }    ] }'\nIt failed with \n\"explanation\" : \"shard cannot be allocated on same node [_FNsW1arSDip4ymYPNu5Ng] it already exists on\".  \nSecond, I tried to allocate the hot index to one of the warm nodes, and got \n \"explanation\" : \"node does not match index required filters [box_type:\\\"hot\\\"]\". \nI assume the 2nd try failed is because a warm node can have only warm indices. \nIt seems that the hot index exists on the hot node but ElasticSearch is not able to assign its shards.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215103796","html_url":"https://github.com/elastic/elasticsearch/issues/17961#issuecomment-215103796","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17961","id":215103796,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTEwMzc5Ng==","user":{"login":"danling","id":6528002,"node_id":"MDQ6VXNlcjY1MjgwMDI=","avatar_url":"https://avatars3.githubusercontent.com/u/6528002?v=4","gravatar_id":"","url":"https://api.github.com/users/danling","html_url":"https://github.com/danling","followers_url":"https://api.github.com/users/danling/followers","following_url":"https://api.github.com/users/danling/following{/other_user}","gists_url":"https://api.github.com/users/danling/gists{/gist_id}","starred_url":"https://api.github.com/users/danling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danling/subscriptions","organizations_url":"https://api.github.com/users/danling/orgs","repos_url":"https://api.github.com/users/danling/repos","events_url":"https://api.github.com/users/danling/events{/privacy}","received_events_url":"https://api.github.com/users/danling/received_events","type":"User","site_admin":false},"created_at":"2016-04-27T14:36:11Z","updated_at":"2016-04-27T14:36:11Z","author_association":"NONE","body":"I noticed this morning that when a new \"hot\" index was created, the shards were not assigned as well, and the cluster status became \"yellow\". So the problem is not just when restarting elasticsearch service.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215172361","html_url":"https://github.com/elastic/elasticsearch/issues/17961#issuecomment-215172361","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17961","id":215172361,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTE3MjM2MQ==","user":{"login":"danling","id":6528002,"node_id":"MDQ6VXNlcjY1MjgwMDI=","avatar_url":"https://avatars3.githubusercontent.com/u/6528002?v=4","gravatar_id":"","url":"https://api.github.com/users/danling","html_url":"https://github.com/danling","followers_url":"https://api.github.com/users/danling/followers","following_url":"https://api.github.com/users/danling/following{/other_user}","gists_url":"https://api.github.com/users/danling/gists{/gist_id}","starred_url":"https://api.github.com/users/danling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danling/subscriptions","organizations_url":"https://api.github.com/users/danling/orgs","repos_url":"https://api.github.com/users/danling/repos","events_url":"https://api.github.com/users/danling/events{/privacy}","received_events_url":"https://api.github.com/users/danling/received_events","type":"User","site_admin":false},"created_at":"2016-04-27T18:00:24Z","updated_at":"2016-04-27T18:00:24Z","author_association":"NONE","body":"I found the reason for unassigned shards of hot indices. The cluster is configured to have 1 replica, but it has only 1 hot node. By adding a second hot node, it solves the problem.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215249058","html_url":"https://github.com/elastic/elasticsearch/issues/17961#issuecomment-215249058","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17961","id":215249058,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTI0OTA1OA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-04-27T22:20:19Z","updated_at":"2016-04-27T22:20:19Z","author_association":"MEMBER","body":"Yes, as the output shows above (\"shard cannot be allocated on same node [_FNsW1arSDip4ymYPNu5Ng] it already exists on\"), you'll need to either set the number of replicas to 0, or increase the number of nodes\n","performed_via_github_app":null}]