{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/48490","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48490/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48490/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48490/events","html_url":"https://github.com/elastic/elasticsearch/issues/48490","id":512150801,"node_id":"MDU6SXNzdWU1MTIxNTA4MDE=","number":48490,"title":"Elasticsearch fails to start: Failure running machine learning native code","user":{"login":"SSchuetrumpf","id":6944992,"node_id":"MDQ6VXNlcjY5NDQ5OTI=","avatar_url":"https://avatars3.githubusercontent.com/u/6944992?v=4","gravatar_id":"","url":"https://api.github.com/users/SSchuetrumpf","html_url":"https://github.com/SSchuetrumpf","followers_url":"https://api.github.com/users/SSchuetrumpf/followers","following_url":"https://api.github.com/users/SSchuetrumpf/following{/other_user}","gists_url":"https://api.github.com/users/SSchuetrumpf/gists{/gist_id}","starred_url":"https://api.github.com/users/SSchuetrumpf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SSchuetrumpf/subscriptions","organizations_url":"https://api.github.com/users/SSchuetrumpf/orgs","repos_url":"https://api.github.com/users/SSchuetrumpf/repos","events_url":"https://api.github.com/users/SSchuetrumpf/events{/privacy}","received_events_url":"https://api.github.com/users/SSchuetrumpf/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2019-10-24T19:59:11Z","updated_at":"2020-08-24T07:08:42Z","closed_at":"2019-10-31T16:56:34Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\n\r\n`Version: 7.4.1, Build: default/tar/fc0eeb6e2c25915d63d871d344e3d0b45ea0ea1e/2019-10-22T17:16:35.176724Z, JVM: 11.0.4`\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`):\r\n```\r\nopenjdk version \"11.0.4\" 2019-07-16 LTS\r\nOpenJDK Runtime Environment Corretto-11.0.4.11.1 (build 11.0.4+11-LTS)\r\nOpenJDK 64-Bit Server VM Corretto-11.0.4.11.1 (build 11.0.4+11-LTS, mixed mode)\r\n```\r\nAlso happens under the bundled JDK:\r\n```\r\nopenjdk version \"13\" 2019-09-17\r\nOpenJDK Runtime Environment AdoptOpenJDK (build 13+33)\r\nOpenJDK 64-Bit Server VM AdoptOpenJDK (build 13+33, mixed mode, sharing)\r\n```\r\n**OS version** (`uname -a` if on a Unix-like system):\r\n\r\n`Darwin 18.7.0 Darwin Kernel Version 18.7.0: Thu Jun 20 18:42:21 PDT 2019; root:xnu-4903.270.47~4/RELEASE_X86_64 x86_64`\r\n\r\nMacOS 10.14.6\r\n\r\n**Description of the problem including expected versus actual behavior**: \r\n\r\nWhen attempting to start elasticsearch (either directly or via `brew services start elasticsearch-full`), part way into startup, a \"Problem Report for controller\" window pops up, then Elasticsearch fails with the message \"Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].\"\r\n\r\nProblem Report window reports \r\n```\r\nException Type:        EXC_BAD_ACCESS (Code Signature Invalid)\r\nException Codes:       0x0000000000000032, 0x000000010975e000\r\nException Note:        EXC_CORPSE_NOTIFY\r\n\r\nTermination Reason:    Namespace CODESIGNING, Code 0x2\r\n```\r\n\r\n\r\n**Steps to reproduce**:\r\n\r\nPlease include a *minimal* but *complete* recreation of the problem, including\r\n(e.g.) index creation, mappings, settings, query etc.  The easier you make for\r\nus to reproduce it, the more likely that somebody will take the time to look at it.\r\n\r\n 1. Clean Install via Homebrew (`brew tap elastic/tap && brew install elastic/tap/elasticsearch-full`)\r\n2. Start Elasticsearch\r\n\r\nThe .tar.gz downloaded from the elastic download page works fine. If I copy everything into the homebrew install directory and reuse the same config, it works fine. It's just when installed via homebrew.\r\n\r\n**Workaround**:\r\n\r\n1. Can be worked around by setting `x-pack-ml.enabled: false`, though this still produces the Problem Report window.\r\n2. Replace contents of homebrew libexec (except config and plugins) with files extracted from [standard download](https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.4.1-darwin-x86_64.tar.gz)\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n[elastic.trace.log](https://github.com/elastic/elasticsearch/files/3769227/elastic.trace.log)\r\n[problem report.log](https://github.com/elastic/elasticsearch/files/3769229/problem.report.log)\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}