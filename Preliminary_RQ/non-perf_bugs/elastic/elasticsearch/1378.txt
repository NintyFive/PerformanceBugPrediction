{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1378","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1378/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1378/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1378/events","html_url":"https://github.com/elastic/elasticsearch/issues/1378","id":1840814,"node_id":"MDU6SXNzdWUxODQwODE0","number":1378,"title":"Return scores for matching nested docs","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2011-10-07T06:24:47Z","updated_at":"2014-07-03T19:14:52Z","closed_at":"2014-07-03T19:14:52Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I'm trying to do geolocation auto-complete. Each location can have multiple names associated with it, eg \"London\", \"City of London\", \"London, United Kingdom\", \"Londres, Reino Unido\" etc\n\nI am storing these name variants as nested objects, but in order to display the correct name, I need to know which nested child matched (or the best matching child).\n\nConsider this document:\n\n```\n{\n    \"location\" : {\n       \"lat\" : \"12.88333\",\n       \"lon\" : \"51.86667\"\n    },\n    \"rank\" : 1\n    \"parent_ids\" : [\"2842565\",\"2921044\"],\n    \"langs\": {\n        \"de\": [\n            { \n                \"label\": \"Schadewalde\", \n                \"tokens\": [\"schadewalde\"]\n            },\n            { \n                \"label\": \"Schadewalde, Deutschland\", \n                \"tokens\": [\"schadewalde\",\"deutschland\"]\n            },            \n        ]\n\n    }\n}\n```\n\nIf the user types in `schad` then I'd like to display `Schadewalde` but if they type in `schadewalde d` then I'd like to display `Schadewalde, Deutschland`.\n\nWould there be any way of returning a score for each matching nested doc?\n\nta\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}