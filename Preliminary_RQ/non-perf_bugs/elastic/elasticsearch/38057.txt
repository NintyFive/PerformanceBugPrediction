{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/38057","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38057/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38057/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38057/events","html_url":"https://github.com/elastic/elasticsearch/issues/38057","id":404980045,"node_id":"MDU6SXNzdWU0MDQ5ODAwNDU=","number":38057,"title":"Update API Partial doc update some fields only if not \"noop\"","user":{"login":"najdanovicivan","id":6421209,"node_id":"MDQ6VXNlcjY0MjEyMDk=","avatar_url":"https://avatars2.githubusercontent.com/u/6421209?v=4","gravatar_id":"","url":"https://api.github.com/users/najdanovicivan","html_url":"https://github.com/najdanovicivan","followers_url":"https://api.github.com/users/najdanovicivan/followers","following_url":"https://api.github.com/users/najdanovicivan/following{/other_user}","gists_url":"https://api.github.com/users/najdanovicivan/gists{/gist_id}","starred_url":"https://api.github.com/users/najdanovicivan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/najdanovicivan/subscriptions","organizations_url":"https://api.github.com/users/najdanovicivan/orgs","repos_url":"https://api.github.com/users/najdanovicivan/repos","events_url":"https://api.github.com/users/najdanovicivan/events{/privacy}","received_events_url":"https://api.github.com/users/najdanovicivan/received_events","type":"User","site_admin":false},"labels":[{"id":145572580,"node_id":"MDU6TGFiZWwxNDU1NzI1ODA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/CRUD","name":":Distributed/CRUD","color":"0e8a16","default":false,"description":"A catch all label for issues around indexing, updating and getting a doc by id. Not search."},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2019-01-30T21:50:13Z","updated_at":"2019-04-15T08:21:35Z","closed_at":"2019-04-15T08:21:35Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Feature request -->\r\n\r\nI am using the ElasticSearch as Database and I have documents which editors can modify in the admin panel and in order to display accurate data on reload I am sending the request with refresh='true'\r\n\r\nI need to keep details about last modification which user modified it from what IP and Set the date when item was last time modded. Those information should not be updated if status of the document is 'noop'\r\n\r\nWhat I'm currently doing is sending one request to updated without refreshing the index the data and if don't get 'noop' result I send another request to set those informations with refresh='true'\r\n\r\nif will be great if it is possible to pass another partial document with those values which will be updated only if result is 'updated' so that there is no need to send 2 requests.  \r\n\r\n```\r\n....\r\n{\r\n  \"doc\":{\r\n     \"field_1\" : \"value 1\",\r\n     \"field_2\" : \"value 2\",\r\n     .....\r\n  },\r\n \"doc-if-updated\" : {\r\n     \"modder_username\" : \"user\",\r\n     \"modder_ip\" : \"127.0.0.1\",\r\n     \"date_modded\": \"1990-01-01 00:00:00\"\r\n  }\r\n}\r\n```\r\n'doc-if-updated' might not be the best name for the parameter but I set it like that for the demonstration purpose","closed_by":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"performed_via_github_app":null}