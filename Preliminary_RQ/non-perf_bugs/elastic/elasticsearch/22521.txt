{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22521","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22521/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22521/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22521/events","html_url":"https://github.com/elastic/elasticsearch/issues/22521","id":199779296,"node_id":"MDU6SXNzdWUxOTk3NzkyOTY=","number":22521,"title":"CircuitBreakingException message should contain the amount of used memory","user":{"login":"fhopf","id":470589,"node_id":"MDQ6VXNlcjQ3MDU4OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/470589?v=4","gravatar_id":"","url":"https://api.github.com/users/fhopf","html_url":"https://github.com/fhopf","followers_url":"https://api.github.com/users/fhopf/followers","following_url":"https://api.github.com/users/fhopf/following{/other_user}","gists_url":"https://api.github.com/users/fhopf/gists{/gist_id}","starred_url":"https://api.github.com/users/fhopf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fhopf/subscriptions","organizations_url":"https://api.github.com/users/fhopf/orgs","repos_url":"https://api.github.com/users/fhopf/repos","events_url":"https://api.github.com/users/fhopf/events{/privacy}","received_events_url":"https://api.github.com/users/fhopf/received_events","type":"User","site_admin":false},"labels":[{"id":166507771,"node_id":"MDU6TGFiZWwxNjY1MDc3NzE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Circuit%20Breakers","name":":Core/Infra/Circuit Breakers","color":"0e8a16","default":false,"description":"Track estimates of memory consumption to prevent overload"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":92913858,"node_id":"MDU6TGFiZWw5MjkxMzg1OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/good%20first%20issue","name":"good first issue","color":"07569b","default":true,"description":"low hanging fruit"},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2017-01-10T10:06:18Z","updated_at":"2017-01-30T18:05:09Z","closed_at":"2017-01-30T18:05:09Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Currently the message for CircuitBreakingException can be confusing. It only displays the limit of the circuit breaker but not the amount that is actually used. Example:\r\n\r\n```\r\nCaused by: org.elasticsearch.common.breaker.CircuitBreakingException: [parent] Data too large, data for [<transport_request>] would be larger than limit of [1491035750/1.3gb]\r\n        at org.elasticsearch.indices.breaker.HierarchyCircuitBreakerService.checkParentLimit(HierarchyCircuitBreakerService.java:211) ~[elasticsearch-5.0.2.jar:5.0.2]\r\n```\r\n\r\nThis can lead to the impression that the request would need 1.3gb alone. It would be nice if the totalUsed could be included in the message to make it clear that the memory is potentially consumed by other requests. (totalUsed is available in checkParentLimit)","closed_by":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"performed_via_github_app":null}