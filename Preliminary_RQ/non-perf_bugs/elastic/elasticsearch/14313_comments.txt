[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/152151963","html_url":"https://github.com/elastic/elasticsearch/issues/14313#issuecomment-152151963","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14313","id":152151963,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MjE1MTk2Mw==","user":{"login":"rborer","id":361403,"node_id":"MDQ6VXNlcjM2MTQwMw==","avatar_url":"https://avatars3.githubusercontent.com/u/361403?v=4","gravatar_id":"","url":"https://api.github.com/users/rborer","html_url":"https://github.com/rborer","followers_url":"https://api.github.com/users/rborer/followers","following_url":"https://api.github.com/users/rborer/following{/other_user}","gists_url":"https://api.github.com/users/rborer/gists{/gist_id}","starred_url":"https://api.github.com/users/rborer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rborer/subscriptions","organizations_url":"https://api.github.com/users/rborer/orgs","repos_url":"https://api.github.com/users/rborer/repos","events_url":"https://api.github.com/users/rborer/events{/privacy}","received_events_url":"https://api.github.com/users/rborer/received_events","type":"User","site_admin":false},"created_at":"2015-10-29T11:27:08Z","updated_at":"2015-10-29T11:27:08Z","author_association":"NONE","body":"I had the same issue, on a single node with kibana 4.1.2.\n\nI found the following exception in ES logs:\n\n```\n[2015-10-29 11:18:09,862][ERROR][bootstrap                ] Guice Exception: java.lang.IllegalStateException: unable to upgrade the mappings for the index [kibana-int], reason: [Mapper for [_index] conflicts with existing mapping in other types:\n[mapper [_index] cannot be changed from type [_index] to [string]]]\nLikely root cause: java.lang.IllegalArgumentException: Mapper for [_index] conflicts with existing mapping in other types:\n[mapper [_index] cannot be changed from type [_index] to [string]]\n        at org.elasticsearch.index.mapper.FieldTypeLookup.checkCompatibility(FieldTypeLookup.java:117)\n        at org.elasticsearch.index.mapper.MapperService.checkNewMappersCompatibility(MapperService.java:345)\n        at org.elasticsearch.index.mapper.MapperService.merge(MapperService.java:296)\n        at org.elasticsearch.index.mapper.MapperService.merge(MapperService.java:242)\n        at org.elasticsearch.cluster.metadata.MetaDataIndexUpgradeService.checkMappingsCompatibility(MetaDataIndexUpgradeService.java:329)\n        at org.elasticsearch.cluster.metadata.MetaDataIndexUpgradeService.upgradeIndexMetaData(MetaDataIndexUpgradeService.java:112)\n        at org.elasticsearch.gateway.GatewayMetaState.pre20Upgrade(GatewayMetaState.java:226)\n        at org.elasticsearch.gateway.GatewayMetaState.<init>(GatewayMetaState.java:85)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n        at <<<guice>>>\n        at org.elasticsearch.node.Node.<init>(Node.java:198)\n        at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:145)\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:170)\n        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:270)\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35)\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/152512033","html_url":"https://github.com/elastic/elasticsearch/issues/14313#issuecomment-152512033","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14313","id":152512033,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MjUxMjAzMw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-30T12:33:39Z","updated_at":"2015-10-30T12:33:39Z","author_association":"CONTRIBUTOR","body":"@rborer This is a different error.  Please could you upload your mapping for the kibana index?  I think this might be an old index.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/152512259","html_url":"https://github.com/elastic/elasticsearch/issues/14313#issuecomment-152512259","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14313","id":152512259,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MjUxMjI1OQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-30T12:35:14Z","updated_at":"2015-10-30T12:35:14Z","author_association":"CONTRIBUTOR","body":"@smayzak I've changed the migration tool to report this mapping as a \"red\" error, and I've opened #14383 to make it possible to upgrade with this mapping\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/152512857","html_url":"https://github.com/elastic/elasticsearch/issues/14313#issuecomment-152512857","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14313","id":152512857,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MjUxMjg1Nw==","user":{"login":"rborer","id":361403,"node_id":"MDQ6VXNlcjM2MTQwMw==","avatar_url":"https://avatars3.githubusercontent.com/u/361403?v=4","gravatar_id":"","url":"https://api.github.com/users/rborer","html_url":"https://github.com/rborer","followers_url":"https://api.github.com/users/rborer/followers","following_url":"https://api.github.com/users/rborer/following{/other_user}","gists_url":"https://api.github.com/users/rborer/gists{/gist_id}","starred_url":"https://api.github.com/users/rborer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rborer/subscriptions","organizations_url":"https://api.github.com/users/rborer/orgs","repos_url":"https://api.github.com/users/rborer/repos","events_url":"https://api.github.com/users/rborer/events{/privacy}","received_events_url":"https://api.github.com/users/rborer/received_events","type":"User","site_admin":false},"created_at":"2015-10-30T12:39:14Z","updated_at":"2015-10-30T12:39:14Z","author_association":"NONE","body":"@clintongormley Thanks, here is my current Kibana mapping:\n\n```\n{\n  \"kibana-int\" : {\n    \"mappings\" : {\n      \"temp\" : {\n        \"properties\" : {\n          \"dashboard\" : {\n            \"type\" : \"string\"\n          },\n          \"group\" : {\n            \"type\" : \"string\"\n          },\n          \"title\" : {\n            \"type\" : \"string\"\n          },\n          \"user\" : {\n            \"type\" : \"string\"\n          }\n        }\n      },\n      \"dashboard\" : {\n        \"properties\" : {\n          \"_index\" : {\n            \"type\" : \"string\"\n          },\n          \"_source\" : {\n            \"properties\" : {\n              \"dashboard\" : {\n                \"type\" : \"string\"\n              },\n              \"group\" : {\n                \"type\" : \"string\"\n              },\n              \"title\" : {\n                \"type\" : \"string\"\n              },\n              \"user\" : {\n                \"type\" : \"string\"\n              }\n            }\n          },\n          \"_type\" : {\n            \"type\" : \"string\"\n          },\n          \"_version\" : {\n            \"type\" : \"long\"\n          },\n          \"dashboard\" : {\n            \"type\" : \"string\"\n          },\n          \"exists\" : {\n            \"type\" : \"boolean\"\n          },\n          \"group\" : {\n            \"type\" : \"string\"\n          },\n          \"title\" : {\n            \"type\" : \"string\"\n          },\n          \"user\" : {\n            \"type\" : \"string\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/152516317","html_url":"https://github.com/elastic/elasticsearch/issues/14313#issuecomment-152516317","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14313","id":152516317,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MjUxNjMxNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-30T12:57:38Z","updated_at":"2015-10-30T12:57:38Z","author_association":"CONTRIBUTOR","body":"Thanks @rborer.  That index is from kibana3, which won't work with kibana4 anyway, so you can go ahead and delete it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/152516763","html_url":"https://github.com/elastic/elasticsearch/issues/14313#issuecomment-152516763","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14313","id":152516763,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MjUxNjc2Mw==","user":{"login":"rborer","id":361403,"node_id":"MDQ6VXNlcjM2MTQwMw==","avatar_url":"https://avatars3.githubusercontent.com/u/361403?v=4","gravatar_id":"","url":"https://api.github.com/users/rborer","html_url":"https://github.com/rborer","followers_url":"https://api.github.com/users/rborer/followers","following_url":"https://api.github.com/users/rborer/following{/other_user}","gists_url":"https://api.github.com/users/rborer/gists{/gist_id}","starred_url":"https://api.github.com/users/rborer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rborer/subscriptions","organizations_url":"https://api.github.com/users/rborer/orgs","repos_url":"https://api.github.com/users/rborer/repos","events_url":"https://api.github.com/users/rborer/events{/privacy}","received_events_url":"https://api.github.com/users/rborer/received_events","type":"User","site_admin":false},"created_at":"2015-10-30T13:00:26Z","updated_at":"2015-10-30T13:00:26Z","author_association":"NONE","body":"@clintongormley fool me, I completely forgot about that kibana3 index! Thanks a lot, I'll get rid of it asap.\n","performed_via_github_app":null}]