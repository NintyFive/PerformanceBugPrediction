{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15225","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15225/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15225/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15225/events","html_url":"https://github.com/elastic/elasticsearch/issues/15225","id":120284629,"node_id":"MDU6SXNzdWUxMjAyODQ2Mjk=","number":15225,"title":"Indexing rate is ~10X lower in Elasticsearch 2.1","user":{"login":"ksundeepsatya","id":3280774,"node_id":"MDQ6VXNlcjMyODA3NzQ=","avatar_url":"https://avatars1.githubusercontent.com/u/3280774?v=4","gravatar_id":"","url":"https://api.github.com/users/ksundeepsatya","html_url":"https://github.com/ksundeepsatya","followers_url":"https://api.github.com/users/ksundeepsatya/followers","following_url":"https://api.github.com/users/ksundeepsatya/following{/other_user}","gists_url":"https://api.github.com/users/ksundeepsatya/gists{/gist_id}","starred_url":"https://api.github.com/users/ksundeepsatya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ksundeepsatya/subscriptions","organizations_url":"https://api.github.com/users/ksundeepsatya/orgs","repos_url":"https://api.github.com/users/ksundeepsatya/repos","events_url":"https://api.github.com/users/ksundeepsatya/events{/privacy}","received_events_url":"https://api.github.com/users/ksundeepsatya/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"assignees":[{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false}],"milestone":null,"comments":24,"created_at":"2015-12-03T22:24:39Z","updated_at":"2016-07-11T13:51:24Z","closed_at":"2015-12-04T20:18:40Z","author_association":"NONE","active_lock_reason":null,"body":"I am upgrading from Elasticsearch 1.7.1 to 2.1. I have few test cases that I wanted to validate before upgrading. Attached [BulkProcessorTest.txt](https://github.com/elastic/elasticsearch/files/51364/BulkProcessorTest.txt) is one among them.\n\nHere are the steps\n1) create object with random values and corresponding JSONs are 3K Bytes. \n2) Index 200 such records (could be any number) to index \"test\"\n3) Drop index \"test\"\n4) Index 200K Records to index \"test\"\n\nIn 1.7.1 step 4 used to take ~40 seconds.\nIn 2.1.0 step 4 is taking ~600 seconds\nI reran the same test on 2.0.1 it is taking ~40 seconds. \n\nIf step 3 is not executed Step 4 takes only ~40 seconds in 2.1.0.\n\nI saw lot of these warnings when the performance was slow: \nhigh disk watermark [90%] exceeded on [ZkeRJaTUR4iu3h8DmIiV2w][Thing]... free: 11gb[4.7%], shards will be relocated away from this node.\nAlso, disk and cpu utilization were significantly higher.\n\nThese warnings and high utilization  were not seen when step 3 was not executed 2.1.0.\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}