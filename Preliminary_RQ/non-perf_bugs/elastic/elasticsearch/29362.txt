{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/29362","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29362/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29362/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29362/events","html_url":"https://github.com/elastic/elasticsearch/issues/29362","id":311071035,"node_id":"MDU6SXNzdWUzMTEwNzEwMzU=","number":29362,"title":"HasChildQueryBuilderTests failing since recent commit","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"labels":[{"id":142001965,"node_id":"MDU6TGFiZWwxNDIwMDE5NjU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Analysis","name":":Search/Analysis","color":"0e8a16","default":false,"description":"How text is split into tokens"},{"id":60445228,"node_id":"MDU6TGFiZWw2MDQ0NTIyOA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest","name":">test","color":"5319e7","default":false,"description":"Issues or PRs that are addressing/adding tests"},{"id":1223177445,"node_id":"MDU6TGFiZWwxMjIzMTc3NDQ1","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.0.0-beta1","name":"v7.0.0-beta1","color":"dddddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"assignees":[{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2018-04-04T03:15:52Z","updated_at":"2019-02-07T08:35:01Z","closed_at":"2018-04-04T11:09:50Z","author_association":"MEMBER","active_lock_reason":null,"body":"These tests are failing, I think because of 569d0c0e897478be4f05a1daba8d217a526e0eeb. At least, it smells like the right commit, and `git bisect` got me there too:\r\n\r\n```\r\n23:11:19 3d [jason@totoro:~/src/elastic/elasticsearch] 8cdd950056+ Â± git bisect good\r\n569d0c0e897478be4f05a1daba8d217a526e0eeb is the first bad commit\r\ncommit 569d0c0e897478be4f05a1daba8d217a526e0eeb\r\nAuthor: Adrien Grand <jpountz@gmail.com>\r\nDate:   Tue Apr 3 16:45:25 2018 +0200\r\n\r\n    Improve similarity integration. (#29187)\r\n    \r\n    This improves the way similarities are plugged in in order to:\r\n     - reject the classic similarity on 7.x indices and emit a deprecation\r\n       warning otherwise\r\n     - reject unkwown parameters on 7.x indices and emit a deprecation\r\n       warning otherwise\r\n    \r\n    Even though this breaks the plugin API, I'd like to backport to 7.x so\r\n    that users can get deprecation warnings when they are doing something\r\n    that will become unsupported in the future.\r\n    \r\n    Closes #23208\r\n    Closes #29035\r\n\r\n:040000 040000 cdc2dfb96c77d7a088cc58efce355db6c22b7377 65f47af116ffa3d8e12a7c13c3690dad0bf9d9da M\tdocs\r\n:040000 040000 ad69b9119d00655673aae59b72139d986bd00ab1 d2b66fc88e60296e54240a080704fc0964424d7f M\tmodules\r\n:040000 040000 482430ff202254db09e9422ceb29eb075868d5ee d5cd5ea179b52a79948ed0f3b7e5953f7a8eaabe M\tserver\r\n:040000 040000 0d672b64f3eab521e74360d00848b70a669dcb47 5e965416e51ec86466ca7989780916a81b03d52f M\ttest\r\n```\r\n\r\nHere's a reproducing line:\r\n\r\n```\r\n./gradlew :modules:parent-join:test -Dtests.seed=4016CC723BC06B1 -Dtests.class=org.elasticsearch.join.query.HasChildQueryBuilderTests -Dtests.security.manager=true -Dtests.locale=mk -Dtests.timezone=Africa/Niamey\r\n```\r\n\r\nThis gives:\r\n\r\n```\r\n> Task :modules:parent-join:test FAILED\r\nTests with failures:\r\n  - org.elasticsearch.join.query.HasChildQueryBuilderTests.testToQuery\r\n  - org.elasticsearch.join.query.HasChildQueryBuilderTests.testFromXContent\r\n  - org.elasticsearch.join.query.HasChildQueryBuilderTests.testNonDefaultSimilarity\r\n```","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}