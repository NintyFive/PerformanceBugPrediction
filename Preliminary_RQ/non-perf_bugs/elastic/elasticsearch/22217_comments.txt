[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/267580219","html_url":"https://github.com/elastic/elasticsearch/issues/22217#issuecomment-267580219","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22217","id":267580219,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzU4MDIxOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-12-16T12:02:48Z","updated_at":"2016-12-16T12:02:48Z","author_association":"CONTRIBUTOR","body":"@pickypg could you take a look please?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270584958","html_url":"https://github.com/elastic/elasticsearch/issues/22217#issuecomment-270584958","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22217","id":270584958,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDU4NDk1OA==","user":{"login":"tolorr","id":1861740,"node_id":"MDQ6VXNlcjE4NjE3NDA=","avatar_url":"https://avatars3.githubusercontent.com/u/1861740?v=4","gravatar_id":"","url":"https://api.github.com/users/tolorr","html_url":"https://github.com/tolorr","followers_url":"https://api.github.com/users/tolorr/followers","following_url":"https://api.github.com/users/tolorr/following{/other_user}","gists_url":"https://api.github.com/users/tolorr/gists{/gist_id}","starred_url":"https://api.github.com/users/tolorr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tolorr/subscriptions","organizations_url":"https://api.github.com/users/tolorr/orgs","repos_url":"https://api.github.com/users/tolorr/repos","events_url":"https://api.github.com/users/tolorr/events{/privacy}","received_events_url":"https://api.github.com/users/tolorr/received_events","type":"User","site_admin":false},"created_at":"2017-01-05T07:58:34Z","updated_at":"2017-01-05T07:59:33Z","author_association":"NONE","body":"Hello, any comment about this?\r\nSomeone with the same problem?\r\nThank you!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270755270","html_url":"https://github.com/elastic/elasticsearch/issues/22217#issuecomment-270755270","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22217","id":270755270,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDc1NTI3MA==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2017-01-05T20:57:02Z","updated_at":"2017-01-05T20:57:02Z","author_association":"MEMBER","body":"Hi @tolorr, I never noticed the notification until your note.\r\n\r\nIf you had not included your YAML, then I would have guessed that you were using the HTTP Exporter. But that's apparently not the case.\r\n\r\nCan you also supply the output of\r\n\r\n1. Cluster settings:\r\n\r\n    ```http\r\n    GET /_cluster/settings?pretty\r\n    ```\r\n\r\n2. Actual settings:\r\n\r\n    ```http\r\n    GET /_nodes?pretty&filter_path=nodes.*.settings.*\r\n    ```\r\n\r\nFeel free to toss out any unrelated things (e.g., `path`).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270789217","html_url":"https://github.com/elastic/elasticsearch/issues/22217#issuecomment-270789217","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22217","id":270789217,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDc4OTIxNw==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2017-01-05T23:32:52Z","updated_at":"2017-01-05T23:32:52Z","author_association":"MEMBER","body":"Oh, and do you have a Basic license installed?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/271243695","html_url":"https://github.com/elastic/elasticsearch/issues/22217#issuecomment-271243695","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22217","id":271243695,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTI0MzY5NQ==","user":{"login":"tolorr","id":1861740,"node_id":"MDQ6VXNlcjE4NjE3NDA=","avatar_url":"https://avatars3.githubusercontent.com/u/1861740?v=4","gravatar_id":"","url":"https://api.github.com/users/tolorr","html_url":"https://github.com/tolorr","followers_url":"https://api.github.com/users/tolorr/followers","following_url":"https://api.github.com/users/tolorr/following{/other_user}","gists_url":"https://api.github.com/users/tolorr/gists{/gist_id}","starred_url":"https://api.github.com/users/tolorr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tolorr/subscriptions","organizations_url":"https://api.github.com/users/tolorr/orgs","repos_url":"https://api.github.com/users/tolorr/repos","events_url":"https://api.github.com/users/tolorr/events{/privacy}","received_events_url":"https://api.github.com/users/tolorr/received_events","type":"User","site_admin":false},"created_at":"2017-01-09T09:45:05Z","updated_at":"2017-01-09T09:45:05Z","author_association":"NONE","body":"Hello @pickypg,\r\n\r\nYes I have a Basic license installed and when I start the node I can read in log:\r\n```\r\n[license.plugin.core      ] [node01] license [***] - valid\r\n```\r\nand:\r\n```\r\ncurl -XGET 'http://localhost:9200/_license'\r\n{\r\n  \"license\" : {\r\n    \"status\" : \"active\",\r\n    ...\r\n    \"type\" : \"basic\",\r\n    ....\r\n```\r\n\r\nCluster settings:\r\n```\r\ncurl -XGET 'http://localhost:9200/_cluster/settings?pretty'\r\n{\r\n  \"persistent\" : { },\r\n  \"transient\" : { }\r\n}\r\n```\r\n\r\nActual settings:\r\n```\r\ncurl -XGET 'http://localhost:9200/_nodes?pretty&filter_path=nodes.*.settings.*'\r\n{\r\n  \"nodes\" : {\r\n    \"y0os3jawTgyETGIdsHS1gw\" : {\r\n      \"settings\" : {\r\n        \"index\" : {\r\n          \"number_of_replicas\" : \"2\",\r\n          \"number_of_shards\" : \"1\"\r\n        },\r\n        \"client\" : {\r\n          \"type\" : \"node\"\r\n        },\r\n        \"pidfile\" : \"/var/run/elasticsearch/elasticsearch.pid\",\r\n        \"network\" : {\r\n          \"publish_host\" : \"_eth1_\",\r\n          \"host\" : \"0.0.0.0\"\r\n        },\r\n        \"node\" : {\r\n          \"data\" : \"true\",\r\n          \"master\" : \"true\",\r\n          \"name\" : \"node03\"\r\n        },\r\n        \"marvel\" : {\r\n          \"history\" : {\r\n            \"duration\" : \"2d\"\r\n          },\r\n          \"agent\" : {\r\n            \"indices\" : \"-.marvel-*\"\r\n          }\r\n        },\r\n        \"transport\" : {\r\n          \"tcp\" : {\r\n            \"port\" : \"9300\"\r\n          }\r\n        },\r\n        \"http\" : {\r\n          \"port\" : \"9200\"\r\n        },\r\n        \"name\" : \"node03\",\r\n        \"path\" : {\r\n          \"data\" : \"/opt/elasticsearch/data\",\r\n          \"home\" : \"/usr/share/elasticsearch\",\r\n          \"conf\" : \"/etc/elasticsearch\",\r\n          \"logs\" : \"/var/log/elasticsearch\"\r\n        },\r\n        \"cluster\" : {\r\n          \"name\" : \"clustername\"\r\n        },\r\n        \"config\" : {\r\n          \"ignore_system_properties\" : \"true\"\r\n        },\r\n        \"discovery\" : {\r\n          \"zen\" : {\r\n            \"minimum_master_nodes\" : \"2\",\r\n            \"ping\" : {\r\n              \"unicast\" : {\r\n                \"hosts\" : [ \"192.168.0.1:9300\", \"192.168.0.2:9300\", \"192.168.0.3:9300\" ]\r\n              },\r\n              \"multicast\" : {\r\n                \"enabled\" : \"false\"\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    \"-JZ2JC3WQDWU8vfMCmoONQ\" : {\r\n      \"settings\" : {\r\n        \"index\" : {\r\n          \"number_of_replicas\" : \"2\",\r\n          \"number_of_shards\" : \"1\"\r\n        },\r\n        \"client\" : {\r\n          \"type\" : \"node\"\r\n        },\r\n        \"pidfile\" : \"/var/run/elasticsearch/elasticsearch.pid\",\r\n        \"network\" : {\r\n          \"publish_host\" : \"_eth1_\",\r\n          \"host\" : \"0.0.0.0\"\r\n        },\r\n        \"node\" : {\r\n          \"data\" : \"true\",\r\n          \"master\" : \"true\",\r\n          \"name\" : \"node01\"\r\n        },\r\n        \"marvel\" : {\r\n          \"history\" : {\r\n            \"duration\" : \"2d\"\r\n          },\r\n          \"agent\" : {\r\n            \"indices\" : \"-.marvel-*\"\r\n          }\r\n        },\r\n        \"transport\" : {\r\n          \"tcp\" : {\r\n            \"port\" : \"9300\"\r\n          }\r\n        },\r\n        \"http\" : {\r\n          \"port\" : \"9200\"\r\n        },\r\n        \"name\" : \"node01\",\r\n        \"path\" : {\r\n          \"data\" : \"/opt/elasticsearch/data\",\r\n          \"home\" : \"/usr/share/elasticsearch\",\r\n          \"conf\" : \"/etc/elasticsearch\",\r\n          \"logs\" : \"/var/log/elasticsearch\"\r\n        },\r\n        \"cluster\" : {\r\n          \"name\" : \"clustername\"\r\n        },\r\n        \"config\" : {\r\n          \"ignore_system_properties\" : \"true\"\r\n        },\r\n        \"discovery\" : {\r\n          \"zen\" : {\r\n            \"minimum_master_nodes\" : \"2\",\r\n            \"ping\" : {\r\n              \"unicast\" : {\r\n                \"hosts\" : [ \"192.168.0.1:9300\", \"192.168.0.2:9300\", \"192.168.0.3:9300\" ]\r\n              },\r\n              \"multicast\" : {\r\n                \"enabled\" : \"false\"\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    \"XbRDyz3eQlucNuIAYEhFYw\" : {\r\n      \"settings\" : {\r\n        \"index\" : {\r\n          \"number_of_replicas\" : \"2\",\r\n          \"number_of_shards\" : \"1\"\r\n        },\r\n        \"client\" : {\r\n          \"type\" : \"node\"\r\n        },\r\n        \"pidfile\" : \"/var/run/elasticsearch/elasticsearch.pid\",\r\n        \"network\" : {\r\n          \"publish_host\" : \"_eth1_\",\r\n          \"host\" : \"0.0.0.0\"\r\n        },\r\n        \"node\" : {\r\n          \"data\" : \"true\",\r\n          \"master\" : \"true\",\r\n          \"name\" : \"node02\"\r\n        },\r\n        \"marvel\" : {\r\n          \"history\" : {\r\n            \"duration\" : \"2d\"\r\n          },\r\n          \"agent\" : {\r\n            \"indices\" : \"-.marvel-*\"\r\n          }\r\n        },\r\n        \"transport\" : {\r\n          \"tcp\" : {\r\n            \"port\" : \"9300\"\r\n          }\r\n        },\r\n        \"http\" : {\r\n          \"port\" : \"9200\"\r\n        },\r\n        \"name\" : \"node02\",\r\n        \"path\" : {\r\n          \"data\" : \"/opt/elasticsearch/data\",\r\n          \"home\" : \"/usr/share/elasticsearch\",\r\n          \"conf\" : \"/etc/elasticsearch\",\r\n          \"logs\" : \"/var/log/elasticsearch\"\r\n        },\r\n        \"cluster\" : {\r\n          \"name\" : \"clustername\"\r\n        },\r\n        \"config\" : {\r\n          \"ignore_system_properties\" : \"true\"\r\n        },\r\n        \"discovery\" : {\r\n          \"zen\" : {\r\n            \"minimum_master_nodes\" : \"2\",\r\n            \"ping\" : {\r\n              \"unicast\" : {\r\n                \"hosts\" : [ \"192.168.0.1:9300\", \"192.168.0.2:9300\", \"192.168.0.3:9300\" ]\r\n              },\r\n              \"multicast\" : {\r\n                \"enabled\" : \"false\"\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThank you.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/271416300","html_url":"https://github.com/elastic/elasticsearch/issues/22217#issuecomment-271416300","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22217","id":271416300,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTQxNjMwMA==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2017-01-09T21:41:10Z","updated_at":"2017-01-09T21:41:10Z","author_association":"MEMBER","body":"Hi @tolorr,\r\n\r\nThat's the issue. It's not well documented, but the warning message that appears when you applied the basic license should have said:\r\n\r\n```\r\nAutomatic index cleanup is locked to 7 days for clusters with [basic] license.\r\n```\r\n\r\nWhat this refers to is that it locks the setting.\r\n\r\nAs it sounds like you are fighting disk space, you can manage this yourself by using [Elastic Curator](https://www.elastic.co/guide/en/elasticsearch/client/curator/current/index.html) (open source) to take full control of it. This is actually what people that use the HTTP exporter are _expected_ to use to achieve the same effect.\r\n\r\nThis also gives you more granularity in that you can choose how often / when to run Curator (I suggest shortly after midnight UTC, but not exactly at midnight UTC to allow for some delay).","performed_via_github_app":null}]