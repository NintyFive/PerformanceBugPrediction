[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131459","html_url":"https://github.com/elastic/elasticsearch/issues/29867#issuecomment-384131459","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29867","id":384131459,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTQ1OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-02-01T12:59:02Z","updated_at":"2018-04-25T01:26:26Z","author_association":"COLLABORATOR","body":"*Original comment by @droberts195:*\n\nThere has also been another Watcher test failure today, and although it's a different test the underlying problem is again that Watcher is not started when it is expected to be started.\r\n\r\nThe failure is in LINK REDACTED\r\n\r\nThe REPRO command is:\r\n\r\n```\r\n./gradlew :x-pack-elasticsearch:plugin:watcher:test \\\r\n  -Dtests.seed=15D5EB831C7590D \\\r\n  -Dtests.class=org.elasticsearch.xpack.watcher.history.HistoryActionConditionTests \\\r\n  -Dtests.method=\"testActionConditionWithFailures\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=ko \\\r\n  -Dtests.timezone=Canada/Saskatchewan\r\n```\r\n\r\nOnce again it does not reproduce locally for me.\r\n\r\nThe exception that causes the test failure is this:\r\n\r\n```\r\n11:30:40    > Throwable LINK REDACTED: java.lang.AssertionError: could not find executed watch record\r\n11:30:40    > Expected: a value equal to or greater than <1L>\r\n11:30:40    >      but: <0L> was less than <1L>\r\n11:30:40    > \tat __randomizedtesting.SeedInfo.seed([15D5EB831C7590D:B2EAA6FAA24C20B5]:0)\r\n11:30:40    > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n11:30:40    > \tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$assertWatchWithMinimumActionsCount$2(AbstractWatcherIntegrationTestCase.java:472)\r\n11:30:40    > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:731)\r\n11:30:40    > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:705)\r\n11:30:40    > \tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.assertWatchWithMinimumActionsCount(AbstractWatcherIntegrationTestCase.java:456)\r\n11:30:40    > \tat org.elasticsearch.xpack.watcher.history.HistoryActionConditionTests.testActionConditionWithFailures(HistoryActionConditionTests.java:162)\r\n11:30:40    > \tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\nHowever, higher up the log is this exception:\r\n\r\n```\r\n11:30:40   1> java.lang.IllegalStateException: not started\r\n11:30:40   1> \tat org.elasticsearch.xpack.watcher.execution.ExecutionService.processEventsSync(ExecutionService.java:241) ~[main/:?]\r\n11:30:40   1> \tat org.elasticsearch.xpack.watcher.execution.SyncTriggerEventConsumer.accept(SyncTriggerEventConsumer.java:44) ~[main/:?]\r\n11:30:40   1> \tat org.elasticsearch.xpack.watcher.execution.SyncTriggerEventConsumer.accept(SyncTriggerEventConsumer.java:31) ~[main/:?]\r\n11:30:40   1> \tat org.elasticsearch.xpack.watcher.trigger.TriggerService$GroupedConsumer.lambda$accept$0(TriggerService.java:191) ~[main/:?]\r\n11:30:40   1> \tat java.util.concurrent.CopyOnWriteArrayList.forEach(CopyOnWriteArrayList.java:890) ~[?:1.8.0_144]\r\n11:30:40   1> \tat org.elasticsearch.xpack.watcher.trigger.TriggerService$GroupedConsumer.accept(TriggerService.java:191) ~[main/:?]\r\n11:30:40   1> \tat org.elasticsearch.xpack.watcher.trigger.TriggerService$GroupedConsumer.accept(TriggerService.java:181) ~[main/:?]\r\n11:30:40   1> \tat org.elasticsearch.xpack.watcher.trigger.ScheduleTriggerEngineMock.lambda$trigger$0(ScheduleTriggerEngineMock.java:113) ~[test/:?]\r\n11:30:40   1> \tat java.util.concurrent.CopyOnWriteArrayList.forEach(CopyOnWriteArrayList.java:890) ~[?:1.8.0_144]\r\n11:30:40   1> \tat org.elasticsearch.xpack.watcher.trigger.ScheduleTriggerEngineMock.trigger(ScheduleTriggerEngineMock.java:113) ~[test/:?]\r\n11:30:40   1> \tat org.elasticsearch.xpack.watcher.trigger.ScheduleTriggerEngineMock.trigger(ScheduleTriggerEngineMock.java:96) ~[test/:?]\r\n11:30:40   1> \tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase$TimeWarp.lambda$trigger$0(AbstractWatcherIntegrationTestCase.java:560) ~[test/:?]\r\n11:30:40   1> \tat java.util.ArrayList.forEach(ArrayList.java:1249) [?:1.8.0_144]\r\n11:30:40   1> \tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase$TimeWarp.trigger(AbstractWatcherIntegrationTestCase.java:560) [test/:?]\r\n11:30:40   1> \tat org.elasticsearch.xpack.watcher.history.HistoryActionConditionTests.putAndTriggerWatch(HistoryActionConditionTests.java:271) [test/:?]\r\n11:30:40   1> \tat org.elasticsearch.xpack.watcher.history.HistoryActionConditionTests.testActionConditionWithFailures(HistoryActionConditionTests.java:161) [test/:?]\r\n11:30:40   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n11:30:40   1> \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n11:30:40   1> \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n11:30:40   1> \tat java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_144]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1713) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:907) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:943) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:957) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:49) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n11:30:40   1> \tat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n11:30:40   1> \tat org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n11:30:40   1> \tat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n11:30:40   1> \tat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:817) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:468) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:916) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:802) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:852) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:863) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:41) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n11:30:40   1> \tat org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n11:30:40   1> \tat org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n11:30:40   1> \tat org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:54) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368) [randomizedtesting-runner-2.5.2.jar:?]\r\n11:30:40   1> \tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_144]\r\n```\r\n\r\nSo it is quite likely that the underlying problem is the same as the first test failure.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131461","html_url":"https://github.com/elastic/elasticsearch/issues/29867#issuecomment-384131461","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29867","id":384131461,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTQ2MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-02-09T18:20:54Z","updated_at":"2018-04-25T01:26:26Z","author_association":"COLLABORATOR","body":"*Original comment by @imotov:*\n\nAnother instance LINK REDACTED","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131462","html_url":"https://github.com/elastic/elasticsearch/issues/29867#issuecomment-384131462","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29867","id":384131462,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTQ2Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-02-15T12:56:14Z","updated_at":"2018-04-25T01:26:26Z","author_association":"COLLABORATOR","body":"*Original comment by @martijnvg:*\n\nAnother instance of: \r\n\r\n```\r\nFAILURE 10.2s J0 | WatcherStatsTests.testStartedStats <<< FAILURES!\r\n   > Throwable LINK REDACTED: java.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_t0, v2=STOPPED]]\r\n   > Expected: every item is is <STARTED>\r\n   >      but: an item was <STOPPED>\r\n   > \tat __randomizedtesting.SeedInfo.seed([22381737B31B580D:C0F0398A7262856A]:0)\r\n   > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:505)\r\n   > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:731)\r\n   > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:705)\r\n   > \tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.startWatcher(AbstractWatcherIntegrationTestCase.java:491)\r\n   > \tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase._setup(AbstractWatcherIntegrationTestCase.java:210)\r\n   > \tat java.lang.Thread.run(Thread.java:748)\r\n   > \tSuppressed: java.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_t0, v2=STOPPED]]\r\n   > Expected: every item is is <STARTED>\r\n   >      but: an item was <STOPPED>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:505)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n   > \t\t... 38 more\r\n   > \tSuppressed: java.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_t0, v2=STOPPED]]\r\n   > Expected: every item is is <STARTED>\r\n   >      but: an item was <STOPPED>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:505)\r\n  2> NOTE: leaving temporary files on disk at: /var/lib/jenkins/workspace/elastic+x-pack-elasticsearch+6.2+multijob-unix-compatibility/elasticsearch-extra/x-pack-elasticsearch/plugin/watcher/build/testrun/test/J0/temp/org.elasticsearch.xpack.watcher.transport.action.stats.WatcherStatsTests_22381737B31B580D-001\r\n  2> NOTE: test params are: codec=Asserting(Lucene70): {_id=PostingsFormat(name=Asserting)}, docValues:{_seq_no=DocValuesFormat(name=Asserting), _primary_term=DocValuesFormat(name=Asserting), _version=DocValuesFormat(name=Asserting)}, maxPointsInLeafNode=1728, maxMBSortInHeap=6.962151792971328, sim=RandomSimilarity(queryNorm=false): {}, locale=en-ZA, timezone=SystemV/EST5EDT\r\n  2> NOTE: Linux 4.4.0-1048-aws amd64/Oracle Corporation 1.8.0_162 (64-bit)/cpus=4,threads=1,free=342458688,total=511180800\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n   > \t\t... 38 more\r\n   > \tSuppressed: java.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_t0, v2=STOPPED]]\r\n  2> NOTE: All tests run in this JVM: [DeleteWatchTests, HistoryTemplateTransformMappingsTests, HttpRequestTemplateTests, OldWatcherStatsTests, HttpInputTests, TimeThrottleIntegrationTests, HistoryStoreTests, ManualExecutionTests, GetWatchTests, ScriptTransformTests, ExecutableSlackActionTests, MonthlyScheduleTests, DataAttachmentParserTests, LoggingActionTests, WatchMetadataTests, NotificationServiceTests, CronEvalToolTests, WatchTests, AckThrottlerTests, HttpSecretsIntegrationTests, EmailSecretsIntegrationTests, XContentSourceTests, WeeklyScheduleTests, SlackMessageTests, CompareConditionSearchTests, ChainIntegrationTests, WatcherServiceTests, WatcherUtilsTests, AccountTests, DailyScheduleTests, HistoryTemplateIndexActionMappingsTests, HttpClientTests, ExecutableJiraActionTests, HipChatServiceTests, AlwaysConditionTests, WatcherMetaDataSerializationTests, ExecutionVarsIntegrationTests, WatcherFeatureSetTests, WatcherIndexingListenerTests, HipChatActionFactoryTests, HipChatActionTests, IndexActionTests, JiraActionTests, WebhookActionTests, WebhookHttpsIntegrationTests, SizeLimitInputStreamTests, CountersTests, NeverConditionTests, ScriptConditionSearchTests, ScriptConditionTests, ExecutionServiceTests, HistoryTemplateHttpMappingsTests, HistoryTemplateTimeMappingsTests, ChainInputTests, EmailTests, HtmlSanitizerTests, ReportingAttachmentParserTests, HipChatAccountsTests, V1AccountTests, JiraAccountTests, IncidentEventDefaultsTests, PagerDutyAccountsTests, VariablesTests, WatcherDateTimeUtilsTests, MapPathTests, HistoryIntegrationTests, SearchTransformTests, SlackServiceTests, ChainTransformTests, WatcherStatsTests]\r\n   > Expected: every item is is <STARTED>\r\n   >      but: an item was <STOPPED>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:505)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n   > \t\t... 38 more\r\n   > \tSuppressed: java.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_t0, v2=STOPPED]]\r\n   > Expected: every item is is <STARTED>\r\n   >      but: an item was <STOPPED>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:505)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n   > \t\t... 38 more\r\n   > \tSuppressed: java.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_t0, v2=STOPPED]]\r\n   > Expected: every item is is <STARTED>\r\n   >      but: an item was <STOPPED>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:505)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n   > \t\t... 38 more\r\n   > \tSuppressed: java.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_t0, v2=STOPPED]]\r\n   > Expected: every item is is <STARTED>\r\n   >      but: an item was <STOPPED>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:505)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n   > \t\t... 38 more\r\n   > \tSuppressed: java.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_t0, v2=STOPPED]]\r\n   > Expected: every item is is <STARTED>\r\n   >      but: an item was <STOPPED>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:505)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n   > \t\t... 38 more\r\n   > \tSuppressed: java.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_t0, v2=STOPPED]]\r\n   > Expected: every item is is <STARTED>\r\n   >      but: an item was <STOPPED>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:505)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n   > \t\t... 38 more\r\n   > \tSuppressed: java.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_t0, v2=STOPPED]]\r\n   > Expected: every item is is <STARTED>\r\n   >      but: an item was <STOPPED>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:505)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n   > \t\t... 38 more\r\n   > \tSuppressed: java.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_t0, v2=STOPPED]]\r\n   > Expected: every item is is <STARTED>\r\n   >      but: an item was <STOPPED>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:505)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n   > \t\t... 38 more\r\n   > \tSuppressed: java.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_t0, v2=STOPPED]]\r\n   > Expected: every item is is <STARTED>\r\n   >      but: an item was <STOPPED>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:505)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n   > \t\t... 38 more\r\n   > \tSuppressed: java.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_t0, v2=STOPPED]]\r\n   > Expected: every item is is <STARTED>\r\n   >      but: an item was <STOPPED>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:505)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n   > \t\t... 38 more\r\n   > \tSuppressed: java.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_t0, v2=STOPPED]]\r\n   > Expected: every item is is <STARTED>\r\n   >      but: an item was <STOPPED>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:505)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n   > \t\t... 38 more\r\nCompleted [134/146] on J0 in 11.28s, 2 tests, 1 failure <<< FAILURES!\r\n\r\n```\r\n\r\nbuild url: LINK REDACTED","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131463","html_url":"https://github.com/elastic/elasticsearch/issues/29867#issuecomment-384131463","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29867","id":384131463,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTQ2Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-05T15:26:16Z","updated_at":"2018-04-25T01:26:26Z","author_association":"COLLABORATOR","body":"*Original comment by @davidkyle:*\n\nA similar failure but this time in the test _ testWatchMetadata_\r\n\r\n```\r\njava.lang.AssertionError: Expected watcher to be started, but state was [Tuple [v1=node_s0, v2=STARTED], Tuple [v1=node_s2, v2=STOPPED], Tuple [v1=node_s1, v2=STARTED]]\r\nExpected: every item is is <STARTED>\r\n     but: an item was <STOPPED>\r\n\tat __randomizedtesting.SeedInfo.seed([25E4436978867020:B29CD2A2860CE812]:0)\r\n\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n\tat org.junit.Assert.assertThat(Assert.java:956)\r\n\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$startWatcher$6(AbstractWatcherIntegrationTestCase.java:473)\r\n\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:734)\r\n\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:708)\r\n```\r\n\r\nLINK REDACTED\r\n\r\nDoes not reproduce\r\n```\r\ngradlew :x-pack-elasticsearch:plugin:watcher:test \\\r\n  -Dtests.seed=25E4436978867020 \\\r\n  -Dtests.class=org.elasticsearch.xpack.watcher.test.integration.WatchMetadataTests \\\r\n  -Dtests.method=\"testWatchMetadata\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=sk \\\r\n  -Dtests.timezone=America/Rosario\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131464","html_url":"https://github.com/elastic/elasticsearch/issues/29867#issuecomment-384131464","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29867","id":384131464,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTQ2NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-11T15:01:51Z","updated_at":"2018-04-25T01:26:26Z","author_association":"COLLABORATOR","body":"*Original comment by @albertzaharovits:*\n\nAnother failure as Dave pointed out in LINK REDACTED :\r\nLINK REDACTED\r\n```\r\n14:25:28   1> [2018-04-11T14:25:28,484][INFO ][o.e.x.w.h.HistoryActionConditionTests] [testActionCondition]: after test\r\n14:25:28 FAILURE 10.7s J2 | HistoryActionConditionTests.testActionCondition <<< FAILURES!\r\n14:25:28    > Throwable LINK REDACTED: java.lang.AssertionError: could not find executed watch record\r\n14:25:28    > Expected: a value equal to or greater than <1L>\r\n14:25:28    >      but: <0L> was less than <1L>\r\n14:25:28    > \tat __randomizedtesting.SeedInfo.seed([AE7E919DDB68D309:5ED6F328BD05BE8F]:0)\r\n14:25:28    > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n14:25:28    > \tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$assertWatchWithMinimumActionsCount$2(AbstractWatcherIntegrationTestCase.java:453)\r\n14:25:28    > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:731)\r\n14:25:28    > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:705)\r\n14:25:28    > \tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.assertWatchWithMinimumActionsCount(AbstractWatcherIntegrationTestCase.java:437)\r\n14:25:28    > \tat org.elasticsearch.xpack.watcher.history.HistoryActionConditionTests.testActionCondition(HistoryActionConditionTests.java:212)\r\n14:25:28    > \tat java.lang.Thread.run(Thread.java:748)\r\n14:25:28    > \tSuppressed: java.lang.AssertionError: could not find executed watch record\r\n14:25:28    > Expected: a value equal to or greater than <1L>\r\n14:25:28    >      but: <0L> was less than <1L>\r\n14:25:28    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n14:25:28    > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$assertWatchWithMinimumActionsCount$2(AbstractWatcherIntegrationTestCase.java:453)\r\n14:25:28    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n14:25:28    > \t\t... 40 more\r\n14:25:28    > \tSuppressed: java.lang.AssertionError: could not find executed watch record\r\n14:25:28    > Expected: a value equal to or greater than <1L>\r\n14:25:28    >      but: <0L> was less than <1L>\r\n14:25:28    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n14:25:28    > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$assertWatchWithMinimumActionsCount$2(AbstractWatcherIntegrationTestCase.java:453)\r\n14:25:28    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n14:25:28    > \t\t... 40 more\r\n14:25:28    > \tSuppressed: java.lang.AssertionError: could not find executed watch record\r\n14:25:28    > Expected: a value equal to or greater than <1L>\r\n14:25:28    >      but: <0L> was less than <1L>\r\n14:25:28    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n14:25:28    > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$assertWatchWithMinimumActionsCount$2(AbstractWatcherIntegrationTestCase.java:453)\r\n14:25:28    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n14:25:28    > \t\t... 40 more\r\n14:25:28    > \tSuppressed: java.lang.AssertionError: could not find executed watch record\r\n14:25:28    > Expected: a value equal to or greater than <1L>\r\n14:25:28    >      but: <0L> was less than <1L>\r\n14:25:28    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n14:25:28    > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$assertWatchWithMinimumActionsCount$2(AbstractWatcherIntegrationTestCase.java:453)\r\n14:25:28    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n14:25:28    > \t\t... 40 more\r\n14:25:28    > \tSuppressed: java.lang.AssertionError: could not find executed watch record\r\n14:25:28    > Expected: a value equal to or greater than <1L>\r\n14:25:28    >      but: <0L> was less than <1L>\r\n14:25:29    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n14:25:29    > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$assertWatchWithMinimumActionsCount$2(AbstractWatcherIntegrationTestCase.java:453)\r\n14:25:29    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n14:25:29    > \t\t... 40 more\r\n14:25:29    > \tSuppressed: java.lang.AssertionError: could not find executed watch record\r\n14:25:29    > Expected: a value equal to or greater than <1L>\r\n14:25:29    >      but: <0L> was less than <1L>\r\n14:25:29    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n14:25:29    > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$assertWatchWithMinimumActionsCount$2(AbstractWatcherIntegrationTestCase.java:453)\r\n14:25:29    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n14:25:29    > \t\t... 40 more\r\n14:25:29    > \tSuppressed: java.lang.AssertionError: could not find executed watch record\r\n14:25:29    > Expected: a value equal to or greater than <1L>\r\n14:25:29    >      but: <0L> was less than <1L>\r\n14:25:29    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n14:25:29    > \t\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase.lambda$assertWatchWithMinimumActionsCount$2(AbstractWatcherIntegrationTestCase.java:453)\r\n14:25:29    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:719)\r\n14:25:29    > \t\t... 40 more\r\n14:25:29   2> NOTE: leaving temporary files on disk at: /var/lib/jenkins/workspace/elastic+x-pack-elasticsearch+6.2+release-tests/elasticsearch-extra/x-pack-elasticsearch/plugin/watcher/build/testrun/test/J2/temp/org.elasticsearch.xpack.watcher.history.HistoryActionConditionTests_AE7E919DDB68D309-001\r\n14:25:29   2> NOTE: test params are: codec=Asserting(Lucene70): {result.actions.condition.type.keyword=PostingsFormat(name=Asserting), \r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131465","html_url":"https://github.com/elastic/elasticsearch/issues/29867#issuecomment-384131465","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29867","id":384131465,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTQ2NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-13T12:46:03Z","updated_at":"2018-04-25T01:26:27Z","author_association":"COLLABORATOR","body":"*Original comment by @javanna:*\n\nAnother occurrence: LINK REDACTED","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/414690925","html_url":"https://github.com/elastic/elasticsearch/issues/29867#issuecomment-414690925","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29867","id":414690925,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDY5MDkyNQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-08-21T14:19:51Z","updated_at":"2018-08-21T14:19:51Z","author_association":"MEMBER","body":"Closed by #30118","performed_via_github_app":null}]