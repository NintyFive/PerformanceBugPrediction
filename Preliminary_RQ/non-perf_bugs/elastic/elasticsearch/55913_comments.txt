[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/621111447","html_url":"https://github.com/elastic/elasticsearch/issues/55913#issuecomment-621111447","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55913","id":621111447,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTExMTQ0Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-04-29T10:17:46Z","updated_at":"2020-04-29T10:17:46Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search (:Search/Analysis)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/623913251","html_url":"https://github.com/elastic/elasticsearch/issues/55913#issuecomment-623913251","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55913","id":623913251,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMzkxMzI1MQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2020-05-05T07:59:02Z","updated_at":"2020-05-05T07:59:02Z","author_association":"MEMBER","body":"The `smartcn` tokenizer does not understand emoji natively. Emoji sequences (🇫🇷) for instance are divided into multiple tokens but single code point emoji like  🏖️ shouldn't be removed. I tested with the following mapping and it works as expected:\r\n`````\r\n{\r\n    \"settings\": {\r\n        \"index\": {\r\n            \"analysis\": {\r\n                \"analyzer\": {\r\n                    \"synonym\": {\r\n                        \"tokenizer\": \"smartcn_tokenizer\",\r\n                        \"filter\": [\r\n                           \"synonym\"\r\n                        ]\r\n                    }\r\n                },\r\n                \"filter\": {\r\n                    \"synonym\": {\r\n                        \"type\": \"synonym\",\r\n                        \"synonyms\": [\r\n                            \"🏖️ => baz\"\r\n                        ]\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    \"mappings\": {\r\n        \"properties\": {\r\n            \"text\": {\r\n                \"type\": \"text\",\r\n                \"analyzer\": \"synonym\"\r\n            }\r\n        }\r\n    }\r\n}\r\n`````\r\nCan you provide us with the mapping that fails on your case ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/638436939","html_url":"https://github.com/elastic/elasticsearch/issues/55913#issuecomment-638436939","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55913","id":638436939,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODQzNjkzOQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2020-06-03T20:14:16Z","updated_at":"2020-06-03T20:14:16Z","author_association":"MEMBER","body":"We don't plan to add support for emoji sequences in the smartcn tokenizer so I hope you don't mind if I close this issue. You should use the `icu` tokenizer which handles emojis natively.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/640121260","html_url":"https://github.com/elastic/elasticsearch/issues/55913#issuecomment-640121260","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55913","id":640121260,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MDEyMTI2MA==","user":{"login":"rickardp","id":167356,"node_id":"MDQ6VXNlcjE2NzM1Ng==","avatar_url":"https://avatars0.githubusercontent.com/u/167356?v=4","gravatar_id":"","url":"https://api.github.com/users/rickardp","html_url":"https://github.com/rickardp","followers_url":"https://api.github.com/users/rickardp/followers","following_url":"https://api.github.com/users/rickardp/following{/other_user}","gists_url":"https://api.github.com/users/rickardp/gists{/gist_id}","starred_url":"https://api.github.com/users/rickardp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rickardp/subscriptions","organizations_url":"https://api.github.com/users/rickardp/orgs","repos_url":"https://api.github.com/users/rickardp/repos","events_url":"https://api.github.com/users/rickardp/events{/privacy}","received_events_url":"https://api.github.com/users/rickardp/received_events","type":"User","site_admin":false},"created_at":"2020-06-06T21:36:35Z","updated_at":"2020-06-06T21:36:35Z","author_association":"NONE","body":"Cool, we have since worked around it by moving the logic to application code. There is still a difference here in how the tokenizer handles emoji, but it seems then this is the intended behavior.","performed_via_github_app":null}]