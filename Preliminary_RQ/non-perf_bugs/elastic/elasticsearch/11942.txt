{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/11942","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11942/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11942/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11942/events","html_url":"https://github.com/elastic/elasticsearch/issues/11942","id":92053691,"node_id":"MDU6SXNzdWU5MjA1MzY5MQ==","number":11942,"title":"NEST Multiple aggregations does not work.","user":{"login":"Ekenstein","id":4411778,"node_id":"MDQ6VXNlcjQ0MTE3Nzg=","avatar_url":"https://avatars1.githubusercontent.com/u/4411778?v=4","gravatar_id":"","url":"https://api.github.com/users/Ekenstein","html_url":"https://github.com/Ekenstein","followers_url":"https://api.github.com/users/Ekenstein/followers","following_url":"https://api.github.com/users/Ekenstein/following{/other_user}","gists_url":"https://api.github.com/users/Ekenstein/gists{/gist_id}","starred_url":"https://api.github.com/users/Ekenstein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ekenstein/subscriptions","organizations_url":"https://api.github.com/users/Ekenstein/orgs","repos_url":"https://api.github.com/users/Ekenstein/repos","events_url":"https://api.github.com/users/Ekenstein/events{/privacy}","received_events_url":"https://api.github.com/users/Ekenstein/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-06-30T10:22:25Z","updated_at":"2015-06-30T11:43:34Z","closed_at":"2015-06-30T11:43:34Z","author_association":"NONE","active_lock_reason":null,"body":"I am trying to retrieve multiple aggregations through search with the following snippet of code:\n\n```\n        var searchDescriptor = new SearchDescriptor<Foo>();\n        searchDescriptor\n            .Take(50)\n            .From(0)\n            .Query(q => q\n                .Filtered(filtered => filtered\n                    .Query(fq => fq\n                        .QueryString(qs => qs\n                            .Query(query)\n                        )\n                    )\n                    .Filter(filter => filter\n                        .And(fs.ToArray())\n                    )\n                )\n            )\n            .Aggregations(aggs => aggs\n                .Terms(\"categories\", ct => ct\n                    .Field(\"categories\")\n                    .Size(0)\n                )\n                .Terms(\"activities\", at => at\n                    .Field(\"activities\")\n                    .Size(0)\n                )\n                .GeoHash(\"locations\", l => l\n                    .Field(f => f.Location)\n                    .GeoHashPrecision(GeoHashPrecision.Precision6)\n                )\n                .GeoBounds(\"bounds\", b => b\n                    .Field(f => f.Location)\n                )\n            );\n```\n\nWhen getting the corresponding json for this query and double check it with Sense I get all the aggregations, but the search response from NEST only contains the locations and the bounds aggregations.\n\nIs this an issue or have I misunderstood something?\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}