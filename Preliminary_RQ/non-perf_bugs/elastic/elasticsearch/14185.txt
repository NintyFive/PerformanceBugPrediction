{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14185","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14185/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14185/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14185/events","html_url":"https://github.com/elastic/elasticsearch/issues/14185","id":112096381,"node_id":"MDU6SXNzdWUxMTIwOTYzODE=","number":14185,"title":"Wrong geo_distance filter behavior","user":{"login":"erickskrauch","id":4787256,"node_id":"MDQ6VXNlcjQ3ODcyNTY=","avatar_url":"https://avatars3.githubusercontent.com/u/4787256?v=4","gravatar_id":"","url":"https://api.github.com/users/erickskrauch","html_url":"https://github.com/erickskrauch","followers_url":"https://api.github.com/users/erickskrauch/followers","following_url":"https://api.github.com/users/erickskrauch/following{/other_user}","gists_url":"https://api.github.com/users/erickskrauch/gists{/gist_id}","starred_url":"https://api.github.com/users/erickskrauch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erickskrauch/subscriptions","organizations_url":"https://api.github.com/users/erickskrauch/orgs","repos_url":"https://api.github.com/users/erickskrauch/repos","events_url":"https://api.github.com/users/erickskrauch/events{/privacy}","received_events_url":"https://api.github.com/users/erickskrauch/received_events","type":"User","site_admin":false},"labels":[{"id":141079527,"node_id":"MDU6TGFiZWwxNDEwNzk1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Geo","name":":Analytics/Geo","color":"0e8a16","default":false,"description":"Indexing, search aggregations of geo points and shapes"},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2015-10-19T08:24:39Z","updated_at":"2016-01-29T18:34:14Z","closed_at":"2016-01-29T18:34:14Z","author_association":"NONE","active_lock_reason":null,"body":"I'm working on map search service. On Google Map defined some objects and i need to draw some areas, in whith they can bounds. `geo_shape` search work OK, but with `geo_distance` (e.g. circle search) i have trouble.\n\n![](http://dl2.joxi.net/drive/0004/2001/325585/151016/4854042dd0.png)\nIf i move my circle above or below these strips, objects will be found. But if I move circle right or left objects, everything works as it should.\n\nThat is, if I change the latitude, but longitude affect the objects, ElasticSearch finds them.\n\nIndex looks like this:\n\n```\n'location' => [\n    'type' => 'geo_shape',\n],\n'location_point' => [\n    'type' => 'geo_point',\n],\n```\n\nData:\n\n```\n\"location\": {\n    \"type\": \"point\",\n    \"coordinates\": [\n        25.76029,\n        -80.19339\n    ]\n},\n\"location_point\": [\n    25.76029,\n    -80.19339\n],\n```\n\nSearch query:\n\n```\n{\n    \"fields\":[\n        ...\n    ],\n    \"query\":{\n        ...\n    },\n    \"filter\":{\n        \"and\":[\n            {\n                \"and\":[\n                    {\n                        \"or\":[\n                            {\n                                \"geo_distance\":{\n                                    \"distance\":\"15294.54531m\",\n                                    \"location_point\":[\n                                        26.57895,\n                                        -80.19496\n                                    ]\n                                }\n                            }\n                        ]\n                    }\n                ]\n            },\n            {\n                ...\n            }\n        ]\n    }\n}\n```\n\nP.S. the same behavior on `geo_shape` search with `shape type = circle`.\nP.S.S. If someone knows English better (e.g. anyone :D), please adjust my description.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}