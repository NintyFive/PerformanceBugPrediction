{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/13509","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13509/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13509/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13509/events","html_url":"https://github.com/elastic/elasticsearch/issues/13509","id":105978414,"node_id":"MDU6SXNzdWUxMDU5Nzg0MTQ=","number":13509,"title":"ElasticSearch windows service doesn't respect the memory heap max size","user":{"login":"TheFireCookie","id":10741012,"node_id":"MDQ6VXNlcjEwNzQxMDEy","avatar_url":"https://avatars1.githubusercontent.com/u/10741012?v=4","gravatar_id":"","url":"https://api.github.com/users/TheFireCookie","html_url":"https://github.com/TheFireCookie","followers_url":"https://api.github.com/users/TheFireCookie/followers","following_url":"https://api.github.com/users/TheFireCookie/following{/other_user}","gists_url":"https://api.github.com/users/TheFireCookie/gists{/gist_id}","starred_url":"https://api.github.com/users/TheFireCookie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TheFireCookie/subscriptions","organizations_url":"https://api.github.com/users/TheFireCookie/orgs","repos_url":"https://api.github.com/users/TheFireCookie/repos","events_url":"https://api.github.com/users/TheFireCookie/events{/privacy}","received_events_url":"https://api.github.com/users/TheFireCookie/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-09-11T09:47:55Z","updated_at":"2015-09-11T12:16:58Z","closed_at":"2015-09-11T12:16:58Z","author_association":"NONE","active_lock_reason":null,"body":"Hello everyone,\n\nWe are having some issues with running ElasticSearch on Windows.\n\nSo our setup is as follow:\n\n4 workstations with Elastic search started on it.\n\nSpecs:\nWorkstation:\nOS: Windows 7 Professional 64 bits\nCPU: Core i7 3770\nMemory: 8.00 GB\n\nElasticSearch configuration:\nVersion: 1.5.2\nhttp.compression: true\nJava initial memory pool: 256 MB\nJava maximum memory pool: 5358 MB\nThread stack size: 256 KB\n\nWindows configuration:\nVirtual memory size: 12058 MB\n\nSo everything was fine on each station until today where one of the station have its elasticsearch memory working set at: 6505 MB\n\nSo for info, here is the 4 machines ES memory working set:\nStation 1: 6505 MB\nStation 2: 5772 MB\nStation 3: 5855 MB\nStation 4: 5841 MB\n\nKopf plugin give me this informations:\nStation 1:\nHeap used: 3.89GB\nMax: 5.17GB\n\nStation 2:\nHeap used: 3.70GB\nMax: 5.17GB\n\nStation 3:\nHeap used: 2.63GB\nMax: 5.17GB\n\nStation 4:\nHeap used: 3.53GB\nMax: 5.17GB\n\nThe station 2 is the master node.\n\nFor the documents & index & shards we have:\n11 indexes\n25.374.590 docs\n110 shards\n\nSo the question is why the station one take 6505 MB of memory?\n\nAnd while we are at it, bonus question:\n\nWe actually have 11 indexes, one per document type. Is this useful or not? And bonus question 2:\nIs 110 shards on 4 stations madness?\n\nThank you all!\n\nIf you need more informations, you can ask me!\n","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}