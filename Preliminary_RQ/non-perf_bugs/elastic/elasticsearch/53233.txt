{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/53233","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53233/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53233/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53233/events","html_url":"https://github.com/elastic/elasticsearch/issues/53233","id":577032201,"node_id":"MDU6SXNzdWU1NzcwMzIyMDE=","number":53233,"title":"low disk watermark [85%] exceeded - wrong count?","user":{"login":"nk111","id":155322,"node_id":"MDQ6VXNlcjE1NTMyMg==","avatar_url":"https://avatars0.githubusercontent.com/u/155322?v=4","gravatar_id":"","url":"https://api.github.com/users/nk111","html_url":"https://github.com/nk111","followers_url":"https://api.github.com/users/nk111/followers","following_url":"https://api.github.com/users/nk111/following{/other_user}","gists_url":"https://api.github.com/users/nk111/gists{/gist_id}","starred_url":"https://api.github.com/users/nk111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nk111/subscriptions","organizations_url":"https://api.github.com/users/nk111/orgs","repos_url":"https://api.github.com/users/nk111/repos","events_url":"https://api.github.com/users/nk111/events{/privacy}","received_events_url":"https://api.github.com/users/nk111/received_events","type":"User","site_admin":false},"labels":[{"id":146836529,"node_id":"MDU6TGFiZWwxNDY4MzY1Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Stats","name":":Core/Features/Stats","color":"0e8a16","default":false,"description":"Statistics tracking and retrieval APIs"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2020-03-06T16:14:47Z","updated_at":"2020-05-06T02:54:12Z","closed_at":"2020-04-16T06:59:50Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\n6.8.0\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`):\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\nWindows Server 2016\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nWe are running a sonarqube 7.9.1 instance inside an azure app service. In the elastic search log we see this warning:\r\n\r\n2020.03.06 05:11:32 INFO  es[][o.e.c.r.a.DiskThresholdMonitor] low disk watermark [85%] exceeded on [mOZe_6AITSK9KsY6VMg76g][sonarqube][D:\\home\\site\\wwwroot\\sonarqube-7.9.1\\data\\es6\\nodes\\0] free: 3.4gb[10.8%], replicas will not be assigned to this node\r\n\r\nProblem is that 3.4gb is NOT the free disk space at that directory level but on the disk root. We have about 50gb free at the application dir.\r\n\r\nSo D:\\ is a system drive of the app service instance and D:\\home is our user space.\r\n\r\nNote the screenshots for exact numbers.\r\n\r\n![free_d_home](https://user-images.githubusercontent.com/155322/76100837-acc8da00-5fcd-11ea-8cfc-655fdf2f39ca.png)\r\n\r\n![free_d](https://user-images.githubusercontent.com/155322/76100855-b9e5c900-5fcd-11ea-9636-204d823291db.png)\r\n\r\nI'm not sure if this is a bug or if there is setting where we could tell the monitor where to check free disk space?\r\n","closed_by":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"performed_via_github_app":null}