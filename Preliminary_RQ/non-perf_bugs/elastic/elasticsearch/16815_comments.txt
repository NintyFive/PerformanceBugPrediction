[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/189627895","html_url":"https://github.com/elastic/elasticsearch/issues/16815#issuecomment-189627895","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16815","id":189627895,"node_id":"MDEyOklzc3VlQ29tbWVudDE4OTYyNzg5NQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-02-27T12:23:00Z","updated_at":"2016-02-27T12:23:00Z","author_association":"MEMBER","body":"thanks for opening this @spinscale I had the same on my list to open. I stumbled upon it while working on #16565, cluster stats node counts are off due to this depending on which node the request hit, in case you have client nodes in your cluster.  Also related to #3617 and most likely affects other apis too.\n\nNote also that this will happen only if `node.client` is set to true, not in case `node.master` and `node.data` are both set to false, which I am fixing as part of my upcoming PR for #16565...so while removing the `node.client` setting the question is: should the `shouldConnectTo` method be adapted or go away?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/190193775","html_url":"https://github.com/elastic/elasticsearch/issues/16815#issuecomment-190193775","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16815","id":190193775,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDE5Mzc3NQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-02-29T12:37:18Z","updated_at":"2016-02-29T12:37:18Z","author_association":"MEMBER","body":">  should the shouldConnectTo method be adapted or go away?\n\nImo this check stems from seeing Client nodes as a client and expecting many of them (possibly hundreds ). This meant that not connecting them will save something significant. It was OK to do because for all _data_ related requests we will never send something from one client node to another. The downside is of course that things like Nodes  Stats and nodes info do not report them.  Since we are moving away from client nodes  we should just keep things simple and connect every node to every node.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/190717087","html_url":"https://github.com/elastic/elasticsearch/issues/16815#issuecomment-190717087","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16815","id":190717087,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDcxNzA4Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-03-01T13:09:52Z","updated_at":"2016-03-01T13:09:52Z","author_association":"CONTRIBUTOR","body":"Related to https://github.com/elastic/elasticsearch/issues/16105\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/190842194","html_url":"https://github.com/elastic/elasticsearch/issues/16815#issuecomment-190842194","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16815","id":190842194,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDg0MjE5NA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-03-01T18:25:45Z","updated_at":"2016-03-02T09:30:06Z","author_association":"MEMBER","body":"Did some digging around this, this seems to affect the following apis:\n- nodes info (missing client nodes)\n- nodes stats (missing client nodes)\n- nodes hot threads (missing client nodes)\n- cluster stats (nodes count off, both total and client count)\n- _cat/nodes (missing info and stats for clients nodes, but the nodes are listed)\n- _cat/nodeattrs (missing process id for clients nodes)\n- _cat/threadpool (missing threadpool info and stats for clients nodes, but the nodes are listed)\n- _cat/plugins (throws NPE)\n\nThe issue manifests if you have two or more clients nodes in your cluster and you call any of the above api hitting directly one of the clients nodes. When the client node acts as a coordinating node it cannot connect to other client nodes hence the other client nodes are skipped.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191454275","html_url":"https://github.com/elastic/elasticsearch/issues/16815#issuecomment-191454275","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16815","id":191454275,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTQ1NDI3NQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-03-02T22:05:25Z","updated_at":"2016-03-02T22:05:25Z","author_association":"MEMBER","body":"Closed via #16898.\n","performed_via_github_app":null}]