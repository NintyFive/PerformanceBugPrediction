{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/18693","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18693/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18693/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18693/events","html_url":"https://github.com/elastic/elasticsearch/issues/18693","id":158020055,"node_id":"MDU6SXNzdWUxNTgwMjAwNTU=","number":18693,"title":"Why is lucene query execution time more than query's \"took\" value, according to Profile API?","user":{"login":"apanimesh061","id":3243029,"node_id":"MDQ6VXNlcjMyNDMwMjk=","avatar_url":"https://avatars2.githubusercontent.com/u/3243029?v=4","gravatar_id":"","url":"https://api.github.com/users/apanimesh061","html_url":"https://github.com/apanimesh061","followers_url":"https://api.github.com/users/apanimesh061/followers","following_url":"https://api.github.com/users/apanimesh061/following{/other_user}","gists_url":"https://api.github.com/users/apanimesh061/gists{/gist_id}","starred_url":"https://api.github.com/users/apanimesh061/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apanimesh061/subscriptions","organizations_url":"https://api.github.com/users/apanimesh061/orgs","repos_url":"https://api.github.com/users/apanimesh061/repos","events_url":"https://api.github.com/users/apanimesh061/events{/privacy}","received_events_url":"https://api.github.com/users/apanimesh061/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"assignees":[{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2016-06-01T22:20:25Z","updated_at":"2016-07-14T13:29:43Z","closed_at":"2016-07-14T13:29:43Z","author_association":"NONE","active_lock_reason":null,"body":"There is a query that was taking 3 seconds so I thought of profiling it using the `Profile API`.\nYou can see the result below:\n\n```\n{\n  \"took\": 125241,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 24,\n    \"successful\": 24,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": 265076,\n    \"max_score\": 3,\n    \"hits\": [...]\n  },\n  \"profile\": {\n    \"shards\": [\n      {\n        \"id\": \"[klNxl8HWTyqF-f8BRBbiiA][index][0]\",\n        \"searches\": [\n          {\n            \"query\": [\n              {\n                \"query_type\": \"BooleanQuery\",\n                \"lucene\": \"...\",\n                \"time\": \"247695.9417ms\",\n.\n.\n.\n.\n            \"rewrite_time\": 505668,\n            \"collector\": [\n              {\n                \"name\": \"SimpleFieldCollector\",\n                \"reason\": \"search_top_hits\",\n                \"time\": \"110.2805510ms\"\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\nI cannot understand when the value of `took` is `125241 ms`, how come the top-level Lucene query and the rewrite time are greater than this value? Am I missing something here?\n\nES Version: 2.3.3\nJava: 1.8\n","closed_by":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"performed_via_github_app":null}