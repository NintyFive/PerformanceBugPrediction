{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23603","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23603/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23603/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23603/events","html_url":"https://github.com/elastic/elasticsearch/issues/23603","id":214576233,"node_id":"MDU6SXNzdWUyMTQ1NzYyMzM=","number":23603,"title":"Force_true parameter in the highlight clause does not retrieve the fields properly","user":{"login":"guilhermemaranhao","id":5608250,"node_id":"MDQ6VXNlcjU2MDgyNTA=","avatar_url":"https://avatars1.githubusercontent.com/u/5608250?v=4","gravatar_id":"","url":"https://api.github.com/users/guilhermemaranhao","html_url":"https://github.com/guilhermemaranhao","followers_url":"https://api.github.com/users/guilhermemaranhao/followers","following_url":"https://api.github.com/users/guilhermemaranhao/following{/other_user}","gists_url":"https://api.github.com/users/guilhermemaranhao/gists{/gist_id}","starred_url":"https://api.github.com/users/guilhermemaranhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guilhermemaranhao/subscriptions","organizations_url":"https://api.github.com/users/guilhermemaranhao/orgs","repos_url":"https://api.github.com/users/guilhermemaranhao/repos","events_url":"https://api.github.com/users/guilhermemaranhao/events{/privacy}","received_events_url":"https://api.github.com/users/guilhermemaranhao/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-03-16T01:48:11Z","updated_at":"2017-03-16T20:28:30Z","closed_at":"2017-03-16T20:28:30Z","author_association":"NONE","active_lock_reason":null,"body":"Hi everyone,\r\n\r\nI set the following _source and highlight clauses in my search body:\r\n\r\n    {\r\n     \"_source\":\r\n      [\r\n          \"field_1\",\r\n          \"field_2\"\r\n      ],\r\n     \"highlight\":{\r\n           \"order\":\"score\",\r\n           \"fragment_size\":70,\r\n           \"number_of_fragments\":3,\r\n           \"type\":\"plain\",\r\n           \"pre_tags\":[\"\\u003cspan class  \\\"highlight\\\"\\u003e\"],\r\n           \"post_tags\":[\"\\u003c/span\\u003e\"],\r\n           \"fields\":{\r\n                    \"field_1\":{\"force_source\":true},\r\n                    \"field_2\":{\"force_source\":true},\r\n                    \"field_3\":{\"force_source\":true},\r\n                    \"field_4\":{\"force_source\":true},\r\n          }\r\n    }\r\n\r\nAccording to https://www.elastic.co/guide/en/elasticsearch/reference/5.2/search-request-highlighting.html#_force_highlighting_on_source, I understood that, setting :force_source = true in the field highlight, if it occurs a matching on that field, it would be retrieved in the _source clause.\r\n\r\nHowever, this does not happen with my search. The returned _source clause was:\r\n\r\n    hits\": \r\n    [\r\n         {\r\n    \t\t\t\"_index\": \"index_name\",\r\n    \t\t\t\"_type\": \"type_name\",\r\n    \t\t\t\"_id\": \"3288191\",\r\n    \t\t\t\"_score\": 1897.5596,\r\n    \t\t\t\"_source\": {\r\n    \t\t\t\t\"field_1\": \"201700000030\",\r\n    \t\t\t\t\"field_2\": {\r\n    \t\t\t\t\t\"id\": 3,\r\n    \t\t\t\t\t\"desc\": \"foo\"\r\n    \t\t\t\t}\r\n    \t\t\t},\r\n    \t\t\t\"highlight\": {\r\n    \t\t\t\t\"field_3\": [\"something <span class=\\\"highlight\\\">search term</span>\"],\r\n    \t\t\t\t\"field_4\": [\": another <span class=\\\"highlight\\\">search term</span> <span class=\\\"highlight\\\">search term</span>\", \": foo bar - <span class=\\\"highlight\\\">search term</span>]\r\n    \t\t\t}\r\n\r\nDid I miss something or the \"`force_source`\" in this feature has nothing to with the `_source` clause? \r\nIf that's the case, how can I achieve this solution: retrieving a field in the `_source` clause **only** if there is a matching highlight on it?\r\n\r\nThanks,\r\n\r\nGuilherme","closed_by":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"performed_via_github_app":null}