[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40952153","html_url":"https://github.com/elastic/elasticsearch/issues/5891#issuecomment-40952153","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5891","id":40952153,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTUyMTUz","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2014-04-21T16:57:55Z","updated_at":"2014-04-21T16:57:55Z","author_association":"MEMBER","body":"++, I suggest this setting will be real time setting (changed using index update settings API). I think the interesting question would be into which file will it be logged? I think it should be a separate file, that is placed in the same logging dir location.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40955550","html_url":"https://github.com/elastic/elasticsearch/issues/5891#issuecomment-40955550","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5891","id":40955550,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTU1NTUw","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-04-21T17:32:18Z","updated_at":"2014-04-21T17:32:18Z","author_association":"CONTRIBUTOR","body":"I like the idea of having this be a real-time setting, so you can go into an existing index that's doing something strange and turn on IW.infoStream.  The challenge is, this is not a real-time setting in IndexWriter today (you must close/reopen the writer), which is annoying.\n\nI think we should just make our own delegating InfoStream impl that we pass to IW on init, so IW always logs messages to it, but then we tell it to turn on/off whether it sends those messages to a log file (I agree, it should be a separate file in the normal logging dir).\n\nI'll give this a shot.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40966300","html_url":"https://github.com/elastic/elasticsearch/issues/5891#issuecomment-40966300","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5891","id":40966300,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTY2MzAw","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2014-04-21T19:15:45Z","updated_at":"2014-04-21T19:15:45Z","author_association":"MEMBER","body":"Wondering if a delegate InfoStream will not hurt perf, since the string construction to log it will happen now all the time within Lucene. Potentially, this setting can be realtime, but we will close and open the IndexWriter with it within our Engine (we can do that with some settings that require a fresh IW).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40966839","html_url":"https://github.com/elastic/elasticsearch/issues/5891#issuecomment-40966839","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5891","id":40966839,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTY2ODM5","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2014-04-21T19:21:13Z","updated_at":"2014-04-21T19:21:13Z","author_association":"CONTRIBUTOR","body":"This can safely be a realtime setting.\n\nThere is actually always a infoStream set, it is just a NullInfoStream that just always returns false for isEnabled? All checks in IndexWriter look like this:\n\n```\n  if (infoStream.isEnabled(\"DWPT\")) {\n    infoStream.message(\"DWPT\", \"done abort\");\n  }\n```\n\nSo its sorta like logger apis in that sense. You can safely have one that flips on and off at will:\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40968723","html_url":"https://github.com/elastic/elasticsearch/issues/5891#issuecomment-40968723","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5891","id":40968723,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTY4NzIz","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2014-04-21T19:40:21Z","updated_at":"2014-04-21T19:40:21Z","author_association":"CONTRIBUTOR","body":"About linking InfoStream to a logger, it should be pretty simple. We added this to solr with this class: http://svn.apache.org/repos/asf/lucene/dev/trunk/solr/core/src/java/org/apache/solr/update/LoggingInfoStream.java\n\nHowever, there was more going on there (e.g. legacy settings for infostream and so on).\n\nMaybe for ES, there should be no option for infostream at all? it should just be set, and it should check if trace or debug level logging is enabled?\n\nBasically: the user would be unaware of infostream. They just crank up logging and see more stuff...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40969192","html_url":"https://github.com/elastic/elasticsearch/issues/5891#issuecomment-40969192","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5891","id":40969192,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTY5MTky","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-04-21T19:45:13Z","updated_at":"2014-04-21T19:45:13Z","author_association":"CONTRIBUTOR","body":"I like that solution; this way the user doesn't need to learn another setting.  This is just increased verbosity.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40977478","html_url":"https://github.com/elastic/elasticsearch/issues/5891#issuecomment-40977478","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5891","id":40977478,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc3NDc4","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2014-04-21T21:08:35Z","updated_at":"2014-04-21T21:08:35Z","author_association":"MEMBER","body":"we could have it under a specific logging name, yea, and then its just a matter of enabling trace logging on it specifically. I missed the enhancement to InfoStream, nice!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/41073081","html_url":"https://github.com/elastic/elasticsearch/issues/5891#issuecomment-41073081","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5891","id":41073081,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDczMDgx","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-04-22T18:02:07Z","updated_at":"2014-04-22T18:02:07Z","author_association":"CONTRIBUTOR","body":"OK, I pushed an initial commit .... I found a LoggerInfoStream which\ndidn't seem to be used and whose intent seemed to be the same as this\nissue (just for an older time when Lucene took PrintStream), so I\nre-purposed it into a Lucene InfoStream.\n\nI'm not sure about passing the indexSettings/shardId down, but I\nwant to make sure the shardId is in the log so we can separate out\nthe logs from multiple IndexWriters.  Is there a cleaner way?\n\nI also hit & \"fixed\" an unrelated NPE when I set logging to trace but\nI'm unsure if it's a problem that newSearcher is null when topReader\nwas true?  I put a nocommit.\n\nI turned on trace logging in the tests (-Des.logger.level=TRACE) and\nconfirmed the IndexWriter's infoStream messages are appearing.  I\nstill need to figure out how to make a test case that checks\nit... maybe I need to set up a MockAppender...\n","performed_via_github_app":null}]