[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/245347406","html_url":"https://github.com/elastic/elasticsearch/issues/20359#issuecomment-245347406","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20359","id":245347406,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTM0NzQwNg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-09-07T16:57:48Z","updated_at":"2016-09-07T16:57:48Z","author_association":"CONTRIBUTOR","body":"@motherhubbard do you have a search timeout?  Anything in the logs about why certain shards failed?\n\nInteresting that no shards failed, yet not all shards returned.  @martijnvg any idea how this could occur?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/245512238","html_url":"https://github.com/elastic/elasticsearch/issues/20359#issuecomment-245512238","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20359","id":245512238,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTUxMjIzOA==","user":{"login":"motherhubbard","id":3320683,"node_id":"MDQ6VXNlcjMzMjA2ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/3320683?v=4","gravatar_id":"","url":"https://api.github.com/users/motherhubbard","html_url":"https://github.com/motherhubbard","followers_url":"https://api.github.com/users/motherhubbard/followers","following_url":"https://api.github.com/users/motherhubbard/following{/other_user}","gists_url":"https://api.github.com/users/motherhubbard/gists{/gist_id}","starred_url":"https://api.github.com/users/motherhubbard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/motherhubbard/subscriptions","organizations_url":"https://api.github.com/users/motherhubbard/orgs","repos_url":"https://api.github.com/users/motherhubbard/repos","events_url":"https://api.github.com/users/motherhubbard/events{/privacy}","received_events_url":"https://api.github.com/users/motherhubbard/received_events","type":"User","site_admin":false},"created_at":"2016-09-08T07:06:58Z","updated_at":"2016-09-08T07:06:58Z","author_association":"NONE","body":"@clintongormley, thanks for getting back to me.\n\nI did consider the timeout, we are using the default so 30 seconds. As it took 99ms (and I've got other examples taking 7ms) I thought it probably wasn't that. I can add some more logging to see how long the request was in flight for but I thought I'd throw it out there first\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/245512492","html_url":"https://github.com/elastic/elasticsearch/issues/20359#issuecomment-245512492","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20359","id":245512492,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTUxMjQ5Mg==","user":{"login":"motherhubbard","id":3320683,"node_id":"MDQ6VXNlcjMzMjA2ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/3320683?v=4","gravatar_id":"","url":"https://api.github.com/users/motherhubbard","html_url":"https://github.com/motherhubbard","followers_url":"https://api.github.com/users/motherhubbard/followers","following_url":"https://api.github.com/users/motherhubbard/following{/other_user}","gists_url":"https://api.github.com/users/motherhubbard/gists{/gist_id}","starred_url":"https://api.github.com/users/motherhubbard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/motherhubbard/subscriptions","organizations_url":"https://api.github.com/users/motherhubbard/orgs","repos_url":"https://api.github.com/users/motherhubbard/repos","events_url":"https://api.github.com/users/motherhubbard/events{/privacy}","received_events_url":"https://api.github.com/users/motherhubbard/received_events","type":"User","site_admin":false},"created_at":"2016-09-08T07:08:24Z","updated_at":"2016-09-08T07:08:24Z","author_association":"NONE","body":"It's probably worth saying we have 5 shards per index, just for info. So in the call above we were querying over 3 indices.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/245512609","html_url":"https://github.com/elastic/elasticsearch/issues/20359#issuecomment-245512609","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20359","id":245512609,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTUxMjYwOQ==","user":{"login":"motherhubbard","id":3320683,"node_id":"MDQ6VXNlcjMzMjA2ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/3320683?v=4","gravatar_id":"","url":"https://api.github.com/users/motherhubbard","html_url":"https://github.com/motherhubbard","followers_url":"https://api.github.com/users/motherhubbard/followers","following_url":"https://api.github.com/users/motherhubbard/following{/other_user}","gists_url":"https://api.github.com/users/motherhubbard/gists{/gist_id}","starred_url":"https://api.github.com/users/motherhubbard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/motherhubbard/subscriptions","organizations_url":"https://api.github.com/users/motherhubbard/orgs","repos_url":"https://api.github.com/users/motherhubbard/repos","events_url":"https://api.github.com/users/motherhubbard/events{/privacy}","received_events_url":"https://api.github.com/users/motherhubbard/received_events","type":"User","site_admin":false},"created_at":"2016-09-08T07:09:05Z","updated_at":"2016-09-08T07:09:05Z","author_association":"NONE","body":"And the logs are silent, nothing at all in them\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/245513405","html_url":"https://github.com/elastic/elasticsearch/issues/20359#issuecomment-245513405","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20359","id":245513405,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTUxMzQwNQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-09-08T07:13:50Z","updated_at":"2016-09-08T07:13:50Z","author_association":"MEMBER","body":"@motherhubbard Did you notice shards not being available (perhaps due to nodes briefly leaving the cluster)?  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/245572896","html_url":"https://github.com/elastic/elasticsearch/issues/20359#issuecomment-245572896","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20359","id":245572896,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTU3Mjg5Ng==","user":{"login":"motherhubbard","id":3320683,"node_id":"MDQ6VXNlcjMzMjA2ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/3320683?v=4","gravatar_id":"","url":"https://api.github.com/users/motherhubbard","html_url":"https://github.com/motherhubbard","followers_url":"https://api.github.com/users/motherhubbard/followers","following_url":"https://api.github.com/users/motherhubbard/following{/other_user}","gists_url":"https://api.github.com/users/motherhubbard/gists{/gist_id}","starred_url":"https://api.github.com/users/motherhubbard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/motherhubbard/subscriptions","organizations_url":"https://api.github.com/users/motherhubbard/orgs","repos_url":"https://api.github.com/users/motherhubbard/repos","events_url":"https://api.github.com/users/motherhubbard/events{/privacy}","received_events_url":"https://api.github.com/users/motherhubbard/received_events","type":"User","site_admin":false},"created_at":"2016-09-08T11:47:13Z","updated_at":"2016-09-08T11:47:13Z","author_association":"NONE","body":"This is not a clustered environment, just a single\nNode\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/245852791","html_url":"https://github.com/elastic/elasticsearch/issues/20359#issuecomment-245852791","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20359","id":245852791,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTg1Mjc5MQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-09-09T08:32:20Z","updated_at":"2016-09-09T08:32:20Z","author_association":"MEMBER","body":"@motherhubbard Maybe if you increase the logging of the percolator you can see more and we can perhaps figure out what is going wrong.\n\nCan you send the following request (which changes log levels at runtime):\n\n```\nPUT /_cluster/settings\n{\n  \"transient\": {\n    \"logger.action.percolate\": \"DEBUG\",\n    \"logger.percolator\" : \"DEBUG\"\n  }\n}\n```\n\nand send back any error / stacktrace that may show up?\nIf you don't see any errors while you have percolator partial results then you can try setting the log levels to `TRACE`.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/245886910","html_url":"https://github.com/elastic/elasticsearch/issues/20359#issuecomment-245886910","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20359","id":245886910,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTg4NjkxMA==","user":{"login":"motherhubbard","id":3320683,"node_id":"MDQ6VXNlcjMzMjA2ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/3320683?v=4","gravatar_id":"","url":"https://api.github.com/users/motherhubbard","html_url":"https://github.com/motherhubbard","followers_url":"https://api.github.com/users/motherhubbard/followers","following_url":"https://api.github.com/users/motherhubbard/following{/other_user}","gists_url":"https://api.github.com/users/motherhubbard/gists{/gist_id}","starred_url":"https://api.github.com/users/motherhubbard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/motherhubbard/subscriptions","organizations_url":"https://api.github.com/users/motherhubbard/orgs","repos_url":"https://api.github.com/users/motherhubbard/repos","events_url":"https://api.github.com/users/motherhubbard/events{/privacy}","received_events_url":"https://api.github.com/users/motherhubbard/received_events","type":"User","site_admin":false},"created_at":"2016-09-09T11:21:15Z","updated_at":"2016-09-09T11:21:15Z","author_association":"NONE","body":"Sure, I'll get back to you when I have something interesting ;-) cheers\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/246303878","html_url":"https://github.com/elastic/elasticsearch/issues/20359#issuecomment-246303878","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20359","id":246303878,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjMwMzg3OA==","user":{"login":"motherhubbard","id":3320683,"node_id":"MDQ6VXNlcjMzMjA2ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/3320683?v=4","gravatar_id":"","url":"https://api.github.com/users/motherhubbard","html_url":"https://github.com/motherhubbard","followers_url":"https://api.github.com/users/motherhubbard/followers","following_url":"https://api.github.com/users/motherhubbard/following{/other_user}","gists_url":"https://api.github.com/users/motherhubbard/gists{/gist_id}","starred_url":"https://api.github.com/users/motherhubbard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/motherhubbard/subscriptions","organizations_url":"https://api.github.com/users/motherhubbard/orgs","repos_url":"https://api.github.com/users/motherhubbard/repos","events_url":"https://api.github.com/users/motherhubbard/events{/privacy}","received_events_url":"https://api.github.com/users/motherhubbard/received_events","type":"User","site_admin":false},"created_at":"2016-09-12T10:05:47Z","updated_at":"2016-09-12T10:05:47Z","author_association":"NONE","body":"I ran with debug over the weekend but it was as quiet as a mouse. I've just bumped it up to TRACE which is now a lot busier. I'll let you know when I have something to report.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/246354915","html_url":"https://github.com/elastic/elasticsearch/issues/20359#issuecomment-246354915","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20359","id":246354915,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjM1NDkxNQ==","user":{"login":"motherhubbard","id":3320683,"node_id":"MDQ6VXNlcjMzMjA2ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/3320683?v=4","gravatar_id":"","url":"https://api.github.com/users/motherhubbard","html_url":"https://github.com/motherhubbard","followers_url":"https://api.github.com/users/motherhubbard/followers","following_url":"https://api.github.com/users/motherhubbard/following{/other_user}","gists_url":"https://api.github.com/users/motherhubbard/gists{/gist_id}","starred_url":"https://api.github.com/users/motherhubbard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/motherhubbard/subscriptions","organizations_url":"https://api.github.com/users/motherhubbard/orgs","repos_url":"https://api.github.com/users/motherhubbard/repos","events_url":"https://api.github.com/users/motherhubbard/events{/privacy}","received_events_url":"https://api.github.com/users/motherhubbard/received_events","type":"User","site_admin":false},"created_at":"2016-09-12T13:56:28Z","updated_at":"2016-09-12T13:57:52Z","author_association":"NONE","body":"I've managed to capture some trace information as requested but I cant see that it sheds much light on the problem (at least to my untrained eye).....\nHeres the top of the response to my code:\n`{\"took\":54,\"_shards\":{\"total\":10,\"successful\":5,\"failed\":0}`\n\nHeres the corresponding lines from the trace:\n\n```\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index1][0]] percolate request for item[0]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index2][0]] percolate request for item[0]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index1][1]] percolate request for item[0]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index2][1]] percolate request for item[0]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index1][2]] percolate request for item[0]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index2][2]] percolate request for item[0]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index1][3]] percolate request for item[0]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index2][3]] percolate request for item[0]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index1][4]] percolate request for item[0]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index2][4]] percolate request for item[0]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] mpercolate executing for shards [[alerts_index1][2], [alerts_index1][1], [alerts_index1][0], [alerts_index2][1], [alerts_index2][2], [alerts_index2][3], [alerts_index2][4], [alerts_index1][4], [alerts_index2][0], [alerts_index1][3]]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@3009480a] based on cluster state version [3769]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@3009480a] to shard [[alerts_index1][2]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@6751a135] based on cluster state version [3769]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@6751a135] to shard [[alerts_index1][1]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@30ed9d3e] based on cluster state version [3769]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@30ed9d3e] to shard [[alerts_index1][0]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@8f5f648] based on cluster state version [3769]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@8f5f648] to shard [[alerts_index2][1]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@72c6b644] based on cluster state version [3769]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@72c6b644] to shard [[alerts_index2][2]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@1874f920] based on cluster state version [3769]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@1874f920] to shard [[alerts_index2][3]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@44ac937d] based on cluster state version [3769]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@44ac937d] to shard [[alerts_index2][4]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@63cc7a16] based on cluster state version [3769]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@63cc7a16] to shard [[alerts_index1][4]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@247f84bd] based on cluster state version [3769]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@247f84bd] to shard [[alerts_index2][0]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@1b7dc4eb] based on cluster state version [3769]\n[2016-09-12 12:55:19,606][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@1b7dc4eb] to shard [[alerts_index1][3]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,610][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][1] Percolate shard response\n[2016-09-12 12:55:19,610][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@6ea37dcc] on shard [[percolation_index][2]]\n[2016-09-12 12:55:19,618][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][4] Percolate shard response\n[2016-09-12 12:55:19,618][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@3c978e28] on shard [[percolation_index][0]]\n[2016-09-12 12:55:19,625][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][1] Percolate shard response\n[2016-09-12 12:55:19,625][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@7aaa963d] on shard [[alerts_index3][2]]\n[2016-09-12 12:55:19,625][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index3][2] Percolate shard response\n[2016-09-12 12:55:19,625][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@5101d510] on shard [[alerts_index3][3]]\n[2016-09-12 12:55:19,625][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index3][3] Percolate shard response\n[2016-09-12 12:55:19,625][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@67f9949f] on shard [[alerts_index3][0]]\n[2016-09-12 12:55:19,625][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][2] Percolate shard response\n[2016-09-12 12:55:19,625][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@313a1cb0] on shard [[alerts_index3][1]]\n[2016-09-12 12:55:19,625][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index3][0] Percolate shard response\n[2016-09-12 12:55:19,626][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@1f0f6fd4] on shard [[alerts_index3][4]]\n[2016-09-12 12:55:19,626][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index3][1] Percolate shard response\n[2016-09-12 12:55:19,626][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@698fa767] on shard [[percolation_index][3]]\n[2016-09-12 12:55:19,626][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][1] Percolate shard response\n[2016-09-12 12:55:19,626][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index3][4] Percolate shard response\n[2016-09-12 12:55:19,626][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@48c480e3] on shard [[percolation_index][4]]\n[2016-09-12 12:55:19,626][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@250e560] on shard [[percolation_index][1]]\n[2016-09-12 12:55:19,629][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][0] Percolate shard response\n[2016-09-12 12:55:19,629][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@13087502] on shard [[percolation_index][2]]\n[2016-09-12 12:55:19,631][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][2] Percolate shard response\n[2016-09-12 12:55:19,631][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@7a85c9b] on shard [[percolation_index][0]]\n[2016-09-12 12:55:19,636][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][3] Percolate shard response\n[2016-09-12 12:55:19,636][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@67c0b4ef] on shard [[percolation_index][3]]\n[2016-09-12 12:55:19,641][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][4] Percolate shard response\n[2016-09-12 12:55:19,641][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@1a585c4d] on shard [[percolation_index][4]]\n[2016-09-12 12:55:19,642][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][0] Percolate shard response\n[2016-09-12 12:55:19,642][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@19ae4601] on shard [[percolation_index][1]]\n[2016-09-12 12:55:19,643][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][2] Percolate shard response\n[2016-09-12 12:55:19,643][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@22217731] on shard [[percolation_index][2]]\n[2016-09-12 12:55:19,647][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][1] Percolate shard response\n[2016-09-12 12:55:19,647][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@4024c856] on shard [[percolation_index][0]]\n[2016-09-12 12:55:19,648][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][0] Percolate shard response\n[2016-09-12 12:55:19,648][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@3009480a] on shard [[alerts_index1][2]]\n[2016-09-12 12:55:19,651][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index1][2] Percolate shard response\n[2016-09-12 12:55:19,651][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@6751a135] on shard [[alerts_index1][1]]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index4][0]] percolate request for item[0]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index4][1]] percolate request for item[0]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index4][2]] percolate request for item[0]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index4][3]] percolate request for item[0]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] Adding shard[[alerts_index4][4]] percolate request for item[0]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] mpercolate executing for shards [[alerts_index4][0], [alerts_index4][2], [alerts_index4][1], [alerts_index4][4], [alerts_index4][3]]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@40f98070] based on cluster state version [3769]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@40f98070] to shard [[alerts_index4][0]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@6b0fa99c] based on cluster state version [3769]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@6b0fa99c] to shard [[alerts_index4][2]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@ab1e7d1] based on cluster state version [3769]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@ab1e7d1] to shard [[alerts_index4][1]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@6e24589c] based on cluster state version [3769]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@6e24589c] to shard [[alerts_index4][4]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@62d2bf28] based on cluster state version [3769]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index1][1] Percolate shard response\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] sending request [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@62d2bf28] to shard [[alerts_index4][3]] on node [{Ezekiel Sims}{UxdxZ8wbQZGJaWsAg-Gzhg}{127.0.0.1}{127.0.0.1:9302}]\n[2016-09-12 12:55:19,653][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@30ed9d3e] on shard [[alerts_index1][0]]\n[2016-09-12 12:55:19,655][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][3] Percolate shard response\n[2016-09-12 12:55:19,655][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@8f5f648] on shard [[alerts_index2][1]]\n[2016-09-12 12:55:19,656][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index1][0] Percolate shard response\n[2016-09-12 12:55:19,656][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@72c6b644] on shard [[alerts_index2][2]]\n[2016-09-12 12:55:19,656][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index2][1] Percolate shard response\n[2016-09-12 12:55:19,656][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@1874f920] on shard [[alerts_index2][3]]\n[2016-09-12 12:55:19,656][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index2][3] Percolate shard response\n[2016-09-12 12:55:19,656][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@44ac937d] on shard [[alerts_index2][4]]\n[2016-09-12 12:55:19,657][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index2][2] Percolate shard response\n[2016-09-12 12:55:19,657][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@63cc7a16] on shard [[alerts_index1][4]]\n[2016-09-12 12:55:19,658][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index2][4] Percolate shard response\n[2016-09-12 12:55:19,658][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@247f84bd] on shard [[alerts_index2][0]]\n[2016-09-12 12:55:19,658][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index2][0] Percolate shard response\n[2016-09-12 12:55:19,658][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@1b7dc4eb] on shard [[alerts_index1][3]]\n[2016-09-12 12:55:19,659][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index1][4] Percolate shard response\n[2016-09-12 12:55:19,659][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@40f98070] on shard [[alerts_index4][0]]\n[2016-09-12 12:55:19,660][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][4] Percolate shard response\n[2016-09-12 12:55:19,660][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@6b0fa99c] on shard [[alerts_index4][2]]\n[2016-09-12 12:55:19,660][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index1][3] Percolate shard response\n[2016-09-12 12:55:19,660][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@ab1e7d1] on shard [[alerts_index4][1]]\n[2016-09-12 12:55:19,660][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index4][1] Percolate shard response\n[2016-09-12 12:55:19,660][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@6e24589c] on shard [[alerts_index4][4]]\n[2016-09-12 12:55:19,660][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index4][4] Percolate shard response\n[2016-09-12 12:55:19,661][TRACE][action.percolate         ] [Ezekiel Sims] executing [org.elasticsearch.action.percolate.TransportShardMultiPercolateAction$Request@62d2bf28] on shard [[alerts_index4][3]]\n[2016-09-12 12:55:19,661][TRACE][action.percolate         ] [Ezekiel Sims] [percolation_index][3] Percolate shard response\n[2016-09-12 12:55:19,661][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index4][0] Percolate shard response\n[2016-09-12 12:55:19,662][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index4][2] Percolate shard response\n[2016-09-12 12:55:19,663][TRACE][action.percolate         ] [Ezekiel Sims] [alerts_index4][3] Percolate shard response\n```\n\nThe indices being queried for this request are alerts_index1 and alerts_index2\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/246430412","html_url":"https://github.com/elastic/elasticsearch/issues/20359#issuecomment-246430412","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20359","id":246430412,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjQzMDQxMg==","user":{"login":"motherhubbard","id":3320683,"node_id":"MDQ6VXNlcjMzMjA2ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/3320683?v=4","gravatar_id":"","url":"https://api.github.com/users/motherhubbard","html_url":"https://github.com/motherhubbard","followers_url":"https://api.github.com/users/motherhubbard/followers","following_url":"https://api.github.com/users/motherhubbard/following{/other_user}","gists_url":"https://api.github.com/users/motherhubbard/gists{/gist_id}","starred_url":"https://api.github.com/users/motherhubbard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/motherhubbard/subscriptions","organizations_url":"https://api.github.com/users/motherhubbard/orgs","repos_url":"https://api.github.com/users/motherhubbard/repos","events_url":"https://api.github.com/users/motherhubbard/events{/privacy}","received_events_url":"https://api.github.com/users/motherhubbard/received_events","type":"User","site_admin":false},"created_at":"2016-09-12T17:44:55Z","updated_at":"2016-09-12T17:44:55Z","author_association":"NONE","body":"It's probably worth saying that we are using the mpercolate interface also\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/246645502","html_url":"https://github.com/elastic/elasticsearch/issues/20359#issuecomment-246645502","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20359","id":246645502,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjY0NTUwMg==","user":{"login":"motherhubbard","id":3320683,"node_id":"MDQ6VXNlcjMzMjA2ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/3320683?v=4","gravatar_id":"","url":"https://api.github.com/users/motherhubbard","html_url":"https://github.com/motherhubbard","followers_url":"https://api.github.com/users/motherhubbard/followers","following_url":"https://api.github.com/users/motherhubbard/following{/other_user}","gists_url":"https://api.github.com/users/motherhubbard/gists{/gist_id}","starred_url":"https://api.github.com/users/motherhubbard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/motherhubbard/subscriptions","organizations_url":"https://api.github.com/users/motherhubbard/orgs","repos_url":"https://api.github.com/users/motherhubbard/repos","events_url":"https://api.github.com/users/motherhubbard/events{/privacy}","received_events_url":"https://api.github.com/users/motherhubbard/received_events","type":"User","site_admin":false},"created_at":"2016-09-13T10:54:11Z","updated_at":"2016-09-13T10:58:36Z","author_association":"NONE","body":"Ok we are also using a comma separated list of indices on the mpercolate request which may be the ultimate problem I guess. \nSo an example will be a POST to /_mpercolate:\n{ \"percolate\": { index: \"alerts_index1,alerts_index2\", type: \"mytype\" }\n\nIt looks like it should work but I guess ultimately it doesnt and i'm guessing its taking a random 5 shards to form the response? Is this approach supported?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/246648615","html_url":"https://github.com/elastic/elasticsearch/issues/20359#issuecomment-246648615","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20359","id":246648615,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjY0ODYxNQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-09-13T11:08:44Z","updated_at":"2016-09-13T11:08:44Z","author_association":"MEMBER","body":"> { \"percolate\": { index: \"alerts_index1,alerts_index2\", type: \"mytype\" }\n\nYes, the `index` option support only a single index. The `index` option is used to fetch the document to percolator. If no document can be found you should see an error when reading the mpercolator response. So I don't think that this is causing the problem being described here. Regardless of that you should use a single index only in the `index` option.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/246658345","html_url":"https://github.com/elastic/elasticsearch/issues/20359#issuecomment-246658345","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20359","id":246658345,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjY1ODM0NQ==","user":{"login":"motherhubbard","id":3320683,"node_id":"MDQ6VXNlcjMzMjA2ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/3320683?v=4","gravatar_id":"","url":"https://api.github.com/users/motherhubbard","html_url":"https://github.com/motherhubbard","followers_url":"https://api.github.com/users/motherhubbard/followers","following_url":"https://api.github.com/users/motherhubbard/following{/other_user}","gists_url":"https://api.github.com/users/motherhubbard/gists{/gist_id}","starred_url":"https://api.github.com/users/motherhubbard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/motherhubbard/subscriptions","organizations_url":"https://api.github.com/users/motherhubbard/orgs","repos_url":"https://api.github.com/users/motherhubbard/repos","events_url":"https://api.github.com/users/motherhubbard/events{/privacy}","received_events_url":"https://api.github.com/users/motherhubbard/received_events","type":"User","site_admin":false},"created_at":"2016-09-13T11:57:54Z","updated_at":"2016-09-13T11:57:54Z","author_association":"NONE","body":"Ok, ill split out the indices in to separate requests, no worries.\n\nI'm happy to close this issue, unless you think this sort of request should result in an error being thrown?\n\nThanks for your help.\n","performed_via_github_app":null}]