[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304383773","html_url":"https://github.com/elastic/elasticsearch/issues/24912#issuecomment-304383773","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24912","id":304383773,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDM4Mzc3Mw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-05-26T20:42:45Z","updated_at":"2017-05-26T20:42:45Z","author_association":"MEMBER","body":"I think that the problem here is that you don't store the document.content field. Elasticsearch tries then to extract from _source which does not have that field.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304384847","html_url":"https://github.com/elastic/elasticsearch/issues/24912#issuecomment-304384847","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24912","id":304384847,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDM4NDg0Nw==","user":{"login":"EydinAbbetin","id":15980790,"node_id":"MDQ6VXNlcjE1OTgwNzkw","avatar_url":"https://avatars1.githubusercontent.com/u/15980790?v=4","gravatar_id":"","url":"https://api.github.com/users/EydinAbbetin","html_url":"https://github.com/EydinAbbetin","followers_url":"https://api.github.com/users/EydinAbbetin/followers","following_url":"https://api.github.com/users/EydinAbbetin/following{/other_user}","gists_url":"https://api.github.com/users/EydinAbbetin/gists{/gist_id}","starred_url":"https://api.github.com/users/EydinAbbetin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EydinAbbetin/subscriptions","organizations_url":"https://api.github.com/users/EydinAbbetin/orgs","repos_url":"https://api.github.com/users/EydinAbbetin/repos","events_url":"https://api.github.com/users/EydinAbbetin/events{/privacy}","received_events_url":"https://api.github.com/users/EydinAbbetin/received_events","type":"User","site_admin":false},"created_at":"2017-05-26T20:48:22Z","updated_at":"2017-05-26T20:51:16Z","author_association":"NONE","body":"How embarrassing.\r\n\r\n@dadoonet that makes a whole lot of sense! I can confirm that setting store to True for the document.content field results in the expected highlighting behavior.\r\n\r\n```python3\r\nes.indices.create(index=index, body={\r\n\t\t\"mappings\":{\r\n\t\t\t\"product\":{\r\n\t\t\t\t\"properties\":{\r\n\t\t\t\t\t\"attachment\":{\r\n\t\t\t\t\t\t\"properties\":{\r\n\t\t\t\t\t\t\t\"content\":{\"type\":\"text\", \"copy_to\":\"document.content\"}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"document\":{\r\n\t\t\t\t\t\t\"properties\":{\r\n\t\t\t\t\t\t\t\"fulltext\":{\"type\":\"text\", \"term_vector\":\"with_positions\"},\r\n\t\t\t\t\t\t\t\"content\":{\"store\":True, \"type\":\"text\", \"term_vector\":\"with_positions_offsets\", \"copy_to\":\"document.fulltext\"}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n```\r\n\r\n... results in ...\r\n\r\n```\r\n['doc_type', 'highlight', 'id', 'index', 'score']\r\n['doc_type', 'highlight', 'id', 'index', 'score']\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304388269","html_url":"https://github.com/elastic/elasticsearch/issues/24912#issuecomment-304388269","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24912","id":304388269,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDM4ODI2OQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-05-26T21:06:43Z","updated_at":"2017-05-26T21:06:43Z","author_association":"MEMBER","body":"No problem. Happy to help.\r\nIf you have other problems like this feel free to ask on discuss.elastic.co which is the best place for that.\r\nThanks for confirming.","performed_via_github_app":null}]