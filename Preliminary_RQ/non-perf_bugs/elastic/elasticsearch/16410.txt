{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/16410","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16410/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16410/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16410/events","html_url":"https://github.com/elastic/elasticsearch/issues/16410","id":131010215,"node_id":"MDU6SXNzdWUxMzEwMTAyMTU=","number":16410,"title":"Query TimeAllowed in Elastic Server Side ","user":{"login":"aloneldi","id":13673547,"node_id":"MDQ6VXNlcjEzNjczNTQ3","avatar_url":"https://avatars2.githubusercontent.com/u/13673547?v=4","gravatar_id":"","url":"https://api.github.com/users/aloneldi","html_url":"https://github.com/aloneldi","followers_url":"https://api.github.com/users/aloneldi/followers","following_url":"https://api.github.com/users/aloneldi/following{/other_user}","gists_url":"https://api.github.com/users/aloneldi/gists{/gist_id}","starred_url":"https://api.github.com/users/aloneldi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aloneldi/subscriptions","organizations_url":"https://api.github.com/users/aloneldi/orgs","repos_url":"https://api.github.com/users/aloneldi/repos","events_url":"https://api.github.com/users/aloneldi/events{/privacy}","received_events_url":"https://api.github.com/users/aloneldi/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2016-02-03T12:31:54Z","updated_at":"2018-01-02T11:54:36Z","closed_at":"2016-02-13T22:42:13Z","author_association":"NONE","active_lock_reason":null,"body":"Hi ,\n\nI'm started new project in Elastic Search . \n\nMy previous one was on SOLR where I used the parameter timeAllowed in the server side and overwrite in the client side when needed to terminate long running queries and return partial results to  avoid SOLR crashes . \n\nIt seems that this crusiel feature is missing in Elastic search . \nI saw the parameter TerminateAfter . But as far as I understand it can apply only in the client side .\nAlso it seems that it will not work when running heavy aggregation query which return only small number of rows .\n\nAlso saw some workarounds like  Circuit Breakers which return an error to the client .\n\nThe TimeAllowed in SOLR seems to be based on  Lucene or maybe I'm wrong .\n\nhttps://lucene.apache.org/core/4_4_0/core/org/apache/lucene/search/TimeLimitingCollector.html\n\nIt looks to me as a great feature to add which will help elasatic search stability and avoid from users to run bad queries on production .\n\nThanks\n\nAlon\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}