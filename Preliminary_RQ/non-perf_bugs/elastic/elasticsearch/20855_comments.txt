[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252873144","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252873144","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252873144,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjg3MzE0NA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T10:28:03Z","updated_at":"2016-10-11T10:28:03Z","author_association":"CONTRIBUTOR","body":"can you provide more information, how do you index? Our indexing perf benchmarks look just fine. I really wonder what you are doing can you share some infos otherwise I can't do anything here\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252897678","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252897678","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252897678,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjg5NzY3OA==","user":{"login":"olivierlambert","id":1241401,"node_id":"MDQ6VXNlcjEyNDE0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1241401?v=4","gravatar_id":"","url":"https://api.github.com/users/olivierlambert","html_url":"https://github.com/olivierlambert","followers_url":"https://api.github.com/users/olivierlambert/followers","following_url":"https://api.github.com/users/olivierlambert/following{/other_user}","gists_url":"https://api.github.com/users/olivierlambert/gists{/gist_id}","starred_url":"https://api.github.com/users/olivierlambert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olivierlambert/subscriptions","organizations_url":"https://api.github.com/users/olivierlambert/orgs","repos_url":"https://api.github.com/users/olivierlambert/repos","events_url":"https://api.github.com/users/olivierlambert/events{/privacy}","received_events_url":"https://api.github.com/users/olivierlambert/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T12:00:15Z","updated_at":"2016-10-11T12:00:15Z","author_association":"NONE","body":"I'm using the ES JS lib and doing something like that on a distant host:\n\n``` js\n        client.index({\n          index: 'myIndex',\n          type: 'event',\n          date: timestamp,\n          body: {\n            date: timestamp,\n            customerEmail: user.email,\n            customerId: +user.id,\n            role: role ? role : null\n          }\n        })\n```\n\nNote that I created the client using this:\n\n``` js\nconst client = new elasticsearch.Client({\n  host: 'https://user:password@elastic.mydomain.com:443',\n  apiVersion: 'master',\n  maxSockets: 100,\n  requestTimeout: 1800000\n})\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252902485","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252902485","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252902485,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjkwMjQ4NQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T12:26:00Z","updated_at":"2016-10-11T12:26:00Z","author_association":"CONTRIBUTOR","body":"do you have any logs provided? I mean I just ran a simple benchmark and everything seems fine?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252908709","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252908709","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252908709,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjkwODcwOQ==","user":{"login":"olivierlambert","id":1241401,"node_id":"MDQ6VXNlcjEyNDE0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1241401?v=4","gravatar_id":"","url":"https://api.github.com/users/olivierlambert","html_url":"https://github.com/olivierlambert","followers_url":"https://api.github.com/users/olivierlambert/followers","following_url":"https://api.github.com/users/olivierlambert/following{/other_user}","gists_url":"https://api.github.com/users/olivierlambert/gists{/gist_id}","starred_url":"https://api.github.com/users/olivierlambert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olivierlambert/subscriptions","organizations_url":"https://api.github.com/users/olivierlambert/orgs","repos_url":"https://api.github.com/users/olivierlambert/repos","events_url":"https://api.github.com/users/olivierlambert/events{/privacy}","received_events_url":"https://api.github.com/users/olivierlambert/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T12:56:30Z","updated_at":"2016-10-11T12:57:27Z","author_association":"NONE","body":"No output in the syslog while indexing, nor errors reported. Did I missed something?\n\nAnyway, I just saw that my `docs.count` contains only 181 records with the RC1. However, in beta, I got all record imported successfully (82917 records).\n\nedit: I destroy and recreate the index for each import, using exactly the same map everytime. The JS code doesn't change, only switching from a ES version to another leads to very different behavior.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252909048","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252909048","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252909048,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjkwOTA0OA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T12:58:02Z","updated_at":"2016-10-11T12:58:02Z","author_association":"CONTRIBUTOR","body":"can you try to reduce this to a contained testcase without your javascript client somehow? I mean it's really hard to get down to the bottom since it seems you are going through some kind of proxy too?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252912395","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252912395","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252912395,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjkxMjM5NQ==","user":{"login":"olivierlambert","id":1241401,"node_id":"MDQ6VXNlcjEyNDE0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1241401?v=4","gravatar_id":"","url":"https://api.github.com/users/olivierlambert","html_url":"https://github.com/olivierlambert","followers_url":"https://api.github.com/users/olivierlambert/followers","following_url":"https://api.github.com/users/olivierlambert/following{/other_user}","gists_url":"https://api.github.com/users/olivierlambert/gists{/gist_id}","starred_url":"https://api.github.com/users/olivierlambert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olivierlambert/subscriptions","organizations_url":"https://api.github.com/users/olivierlambert/orgs","repos_url":"https://api.github.com/users/olivierlambert/repos","events_url":"https://api.github.com/users/olivierlambert/events{/privacy}","received_events_url":"https://api.github.com/users/olivierlambert/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T13:12:24Z","updated_at":"2016-10-11T13:12:24Z","author_association":"NONE","body":"Just Nginx as a reverse proxy, but nothing changes while switching to both versions of ES: that's the only \"moving\" part. I'll take a look at Nginx logs if I can see anything.\n\nI can't inject massively this set of data without JS, **but** if you have an example bash script with any data that I could use to make tests, I'll be able to execute it locally.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252914215","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252914215","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252914215,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjkxNDIxNQ==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T13:20:18Z","updated_at":"2016-10-11T13:20:41Z","author_association":"MEMBER","body":"> I can't inject massively this set of data without JS, but if you have an example bash script with any data that I could use to make tests, I'll be able to execute it locally.\n\nWe use [Rally](https://github.com/elastic/rally) for benchmarking. \n\nPlease ensure you have the [prerequisites](http://esrally.readthedocs.io/en/latest/developing.html) installed. You can then set it up with:\n\n```\ngit clone https://github.com/elastic/rally.git\ncd rally\n./rally\n```\n\nAfter the initial setup, you can run:\n\n```\n./rally --pipeline=benchmark-only --target-hosts=elastic.mydomain.com:443 --client-options=\"use_ssl:true,verify_certs:true,basic_auth_user:'INSERT_USERNAME_HERE',basic_auth_password:'INSERT_YOUR_PASSWORD_HERE'\"\n```\n\nIt will index a document corpus of about 2 GB against the specified cluster and will report metrics afterwards.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252925895","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252925895","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252925895,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjkyNTg5NQ==","user":{"login":"olivierlambert","id":1241401,"node_id":"MDQ6VXNlcjEyNDE0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1241401?v=4","gravatar_id":"","url":"https://api.github.com/users/olivierlambert","html_url":"https://github.com/olivierlambert","followers_url":"https://api.github.com/users/olivierlambert/followers","following_url":"https://api.github.com/users/olivierlambert/following{/other_user}","gists_url":"https://api.github.com/users/olivierlambert/gists{/gist_id}","starred_url":"https://api.github.com/users/olivierlambert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olivierlambert/subscriptions","organizations_url":"https://api.github.com/users/olivierlambert/orgs","repos_url":"https://api.github.com/users/olivierlambert/repos","events_url":"https://api.github.com/users/olivierlambert/events{/privacy}","received_events_url":"https://api.github.com/users/olivierlambert/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T14:03:11Z","updated_at":"2016-10-11T14:03:11Z","author_association":"NONE","body":"Okay, will do and report when it's done.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252933506","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252933506","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252933506,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjkzMzUwNg==","user":{"login":"olivierlambert","id":1241401,"node_id":"MDQ6VXNlcjEyNDE0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1241401?v=4","gravatar_id":"","url":"https://api.github.com/users/olivierlambert","html_url":"https://github.com/olivierlambert","followers_url":"https://api.github.com/users/olivierlambert/followers","following_url":"https://api.github.com/users/olivierlambert/following{/other_user}","gists_url":"https://api.github.com/users/olivierlambert/gists{/gist_id}","starred_url":"https://api.github.com/users/olivierlambert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olivierlambert/subscriptions","organizations_url":"https://api.github.com/users/olivierlambert/orgs","repos_url":"https://api.github.com/users/olivierlambert/repos","events_url":"https://api.github.com/users/olivierlambert/events{/privacy}","received_events_url":"https://api.github.com/users/olivierlambert/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T14:29:33Z","updated_at":"2016-10-11T14:29:33Z","author_association":"NONE","body":"I can't use rally, because everytime I got:\n\n```\nraise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)\nelasticsearch.exceptions.RequestError: TransportError(400, 'illegal_argument_exception', 'wait_for_relocating_shards has been removed, use wait_for_no_relocating_shards [true/false] instead')\n\n elasticsearch WARNING GET /_cluster/health?timeout=3s&wait_for_status=green&wait_for_no_relocating_shards=True [status:408 request:3.003s]\n2016-10-11 14:25:57,887 rally.driver ERROR Client error in health API. Using 'wait_for_no_relocating_shards'.\n```\n\nIs there an option I missed?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252935866","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252935866","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252935866,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjkzNTg2Ng==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T14:36:48Z","updated_at":"2016-10-11T14:36:48Z","author_association":"MEMBER","body":"Does Rally abort the benchmark or do you just see these in the log? Rally probes internally to find the right API call. So these warnings are ok.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252936702","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252936702","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252936702,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjkzNjcwMg==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T14:39:34Z","updated_at":"2016-10-11T14:39:34Z","author_association":"MEMBER","body":"Rally, however does abort the benchmark if the cluster does not reach health status `green`. If you have existing indices on this cluster this may be the case. If that is your problem you can add `--cluster-health=yellow` or `--cluster-health=red` (depending on which cluster health you'd expect) to the command line options.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252938425","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252938425","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252938425,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjkzODQyNQ==","user":{"login":"olivierlambert","id":1241401,"node_id":"MDQ6VXNlcjEyNDE0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1241401?v=4","gravatar_id":"","url":"https://api.github.com/users/olivierlambert","html_url":"https://github.com/olivierlambert","followers_url":"https://api.github.com/users/olivierlambert/followers","following_url":"https://api.github.com/users/olivierlambert/following{/other_user}","gists_url":"https://api.github.com/users/olivierlambert/gists{/gist_id}","starred_url":"https://api.github.com/users/olivierlambert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olivierlambert/subscriptions","organizations_url":"https://api.github.com/users/olivierlambert/orgs","repos_url":"https://api.github.com/users/olivierlambert/repos","events_url":"https://api.github.com/users/olivierlambert/events{/privacy}","received_events_url":"https://api.github.com/users/olivierlambert/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T14:44:43Z","updated_at":"2016-10-11T14:45:27Z","author_association":"NONE","body":"Aborting, but I'll try with the yellow/red to see if it changes anything.\n\nedit: it starts! (with yellow, I don't have a replica anywhere)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252943198","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252943198","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252943198,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjk0MzE5OA==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T15:00:11Z","updated_at":"2016-10-11T15:00:11Z","author_association":"MEMBER","body":"> edit: it starts! (with yellow, I don't have a replica anywhere)\n\nGreat! I guess you have some index already in the cluster because the indices that Rally creates for benchmarks have zero replicas to ensure a \"green\" cluster state. Just post here, if you have any further issues (but I don't expect that much problems as the benchmarks already run..).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252950345","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252950345","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252950345,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjk1MDM0NQ==","user":{"login":"olivierlambert","id":1241401,"node_id":"MDQ6VXNlcjEyNDE0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1241401?v=4","gravatar_id":"","url":"https://api.github.com/users/olivierlambert","html_url":"https://github.com/olivierlambert","followers_url":"https://api.github.com/users/olivierlambert/followers","following_url":"https://api.github.com/users/olivierlambert/following{/other_user}","gists_url":"https://api.github.com/users/olivierlambert/gists{/gist_id}","starred_url":"https://api.github.com/users/olivierlambert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olivierlambert/subscriptions","organizations_url":"https://api.github.com/users/olivierlambert/orgs","repos_url":"https://api.github.com/users/olivierlambert/repos","events_url":"https://api.github.com/users/olivierlambert/events{/privacy}","received_events_url":"https://api.github.com/users/olivierlambert/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T15:23:49Z","updated_at":"2016-10-11T15:23:49Z","author_association":"NONE","body":"It takes ages but it runs (I'm at `running scroll` step)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252962938","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252962938","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252962938,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjk2MjkzOA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T16:04:40Z","updated_at":"2016-10-11T16:04:40Z","author_association":"MEMBER","body":"@olivierlambert I see in your original JS snippet `date: timestamp,`:\n\n``` js\n        client.index({\n          index: 'myIndex',\n          type: 'event',\n          date: timestamp,   // <----- Here\n          body: {\n            date: timestamp,\n            customerEmail: user.email,\n            customerId: +user.id,\n            role: role ? role : null\n          }\n        })\n```\n\nElasticsearch doesn't accept \"date\" as a parameter to the indexing request.  The recent changes to [Strict URL Parsing](https://github.com/elastic/elasticsearch/pull/20722) (also in [Release Notes](https://www.elastic.co/blog/elasticsearch-5-0-0-rc1-released)) mean that parameter will now be rejected, the document won't be indexed, and you'll get an error.\n\nIf you're determining throughput by the number of documents that are indexed, that's probably why :)\n\n_Caveat that I'm not super familiar with the JS client, but I don't think that's a special flag they've enabled_\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252964691","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252964691","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252964691,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjk2NDY5MQ==","user":{"login":"olivierlambert","id":1241401,"node_id":"MDQ6VXNlcjEyNDE0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1241401?v=4","gravatar_id":"","url":"https://api.github.com/users/olivierlambert","html_url":"https://github.com/olivierlambert","followers_url":"https://api.github.com/users/olivierlambert/followers","following_url":"https://api.github.com/users/olivierlambert/following{/other_user}","gists_url":"https://api.github.com/users/olivierlambert/gists{/gist_id}","starred_url":"https://api.github.com/users/olivierlambert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olivierlambert/subscriptions","organizations_url":"https://api.github.com/users/olivierlambert/orgs","repos_url":"https://api.github.com/users/olivierlambert/repos","events_url":"https://api.github.com/users/olivierlambert/events{/privacy}","received_events_url":"https://api.github.com/users/olivierlambert/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T16:10:51Z","updated_at":"2016-10-11T16:10:51Z","author_association":"NONE","body":"Ah that makes sense. Let me try that!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252969955","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252969955","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252969955,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjk2OTk1NQ==","user":{"login":"olivierlambert","id":1241401,"node_id":"MDQ6VXNlcjEyNDE0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1241401?v=4","gravatar_id":"","url":"https://api.github.com/users/olivierlambert","html_url":"https://github.com/olivierlambert","followers_url":"https://api.github.com/users/olivierlambert/followers","following_url":"https://api.github.com/users/olivierlambert/following{/other_user}","gists_url":"https://api.github.com/users/olivierlambert/gists{/gist_id}","starred_url":"https://api.github.com/users/olivierlambert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olivierlambert/subscriptions","organizations_url":"https://api.github.com/users/olivierlambert/orgs","repos_url":"https://api.github.com/users/olivierlambert/repos","events_url":"https://api.github.com/users/olivierlambert/events{/privacy}","received_events_url":"https://api.github.com/users/olivierlambert/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T16:29:25Z","updated_at":"2016-10-11T16:29:25Z","author_association":"NONE","body":"Got 309 hits (better than 181 before) but still no cigar.\n\nI'll dig on my JS request to be sure I don't have any error returned by the callback/promise.\n\nOn the other hand, do you have a shorter benchmark that I can use than default `rally` one that take hours?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252972238","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252972238","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252972238,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjk3MjIzOA==","user":{"login":"olivierlambert","id":1241401,"node_id":"MDQ6VXNlcjEyNDE0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1241401?v=4","gravatar_id":"","url":"https://api.github.com/users/olivierlambert","html_url":"https://github.com/olivierlambert","followers_url":"https://api.github.com/users/olivierlambert/followers","following_url":"https://api.github.com/users/olivierlambert/following{/other_user}","gists_url":"https://api.github.com/users/olivierlambert/gists{/gist_id}","starred_url":"https://api.github.com/users/olivierlambert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olivierlambert/subscriptions","organizations_url":"https://api.github.com/users/olivierlambert/orgs","repos_url":"https://api.github.com/users/olivierlambert/repos","events_url":"https://api.github.com/users/olivierlambert/events{/privacy}","received_events_url":"https://api.github.com/users/olivierlambert/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T16:38:09Z","updated_at":"2016-10-11T16:44:25Z","author_association":"NONE","body":"Okay found something: without the callback used in the client, it generated my issue.\n\nI added the callback in the index request, and now it works normally. I suppose ES RC1 added some restriction on how it receives requests (as @polyfractal put me on that track), and rejects a lot of them.\n\nSo to recap: working JS clients on beta1 appeared broken with non-compliant fields and/or missing callbacks on rc1.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252974222","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252974222","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252974222,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjk3NDIyMg==","user":{"login":"olivierlambert","id":1241401,"node_id":"MDQ6VXNlcjEyNDE0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1241401?v=4","gravatar_id":"","url":"https://api.github.com/users/olivierlambert","html_url":"https://github.com/olivierlambert","followers_url":"https://api.github.com/users/olivierlambert/followers","following_url":"https://api.github.com/users/olivierlambert/following{/other_user}","gists_url":"https://api.github.com/users/olivierlambert/gists{/gist_id}","starred_url":"https://api.github.com/users/olivierlambert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olivierlambert/subscriptions","organizations_url":"https://api.github.com/users/olivierlambert/orgs","repos_url":"https://api.github.com/users/olivierlambert/repos","events_url":"https://api.github.com/users/olivierlambert/events{/privacy}","received_events_url":"https://api.github.com/users/olivierlambert/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T16:45:13Z","updated_at":"2016-10-11T16:45:13Z","author_association":"NONE","body":"Renamed the issue. Thanks a lot @polyfractal , @danielmitterdorfer and @s1monw for your assistance!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252976904","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252976904","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252976904,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjk3NjkwNA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T16:54:51Z","updated_at":"2016-10-11T16:54:51Z","author_association":"MEMBER","body":"Np, happy to help :)  You should open a ticket at the ES-JS repo and see if it's an issue with the client, misconfiguration, etc. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252979891","html_url":"https://github.com/elastic/elasticsearch/issues/20855#issuecomment-252979891","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20855","id":252979891,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjk3OTg5MQ==","user":{"login":"olivierlambert","id":1241401,"node_id":"MDQ6VXNlcjEyNDE0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1241401?v=4","gravatar_id":"","url":"https://api.github.com/users/olivierlambert","html_url":"https://github.com/olivierlambert","followers_url":"https://api.github.com/users/olivierlambert/followers","following_url":"https://api.github.com/users/olivierlambert/following{/other_user}","gists_url":"https://api.github.com/users/olivierlambert/gists{/gist_id}","starred_url":"https://api.github.com/users/olivierlambert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olivierlambert/subscriptions","organizations_url":"https://api.github.com/users/olivierlambert/orgs","repos_url":"https://api.github.com/users/olivierlambert/repos","events_url":"https://api.github.com/users/olivierlambert/events{/privacy}","received_events_url":"https://api.github.com/users/olivierlambert/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T17:05:47Z","updated_at":"2016-10-11T17:05:47Z","author_association":"NONE","body":"Will do! (just after I find 5 minutes to do so ^^ )\n","performed_via_github_app":null}]