[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384023742","html_url":"https://github.com/elastic/elasticsearch/issues/29678#issuecomment-384023742","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29678","id":384023742,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDAyMzc0Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-24T17:56:03Z","updated_at":"2018-04-24T17:56:03Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384307925","html_url":"https://github.com/elastic/elasticsearch/issues/29678#issuecomment-384307925","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29678","id":384307925,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDMwNzkyNQ==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-04-25T14:30:52Z","updated_at":"2018-04-25T14:30:52Z","author_association":"MEMBER","body":"You should be able to add a `routing` field next to the `_id` field in the `like` array to specify the routing to use to retrieve the item.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384331860","html_url":"https://github.com/elastic/elasticsearch/issues/29678#issuecomment-384331860","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29678","id":384331860,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDMzMTg2MA==","user":{"login":"kylelyk","id":3401359,"node_id":"MDQ6VXNlcjM0MDEzNTk=","avatar_url":"https://avatars1.githubusercontent.com/u/3401359?v=4","gravatar_id":"","url":"https://api.github.com/users/kylelyk","html_url":"https://github.com/kylelyk","followers_url":"https://api.github.com/users/kylelyk/followers","following_url":"https://api.github.com/users/kylelyk/following{/other_user}","gists_url":"https://api.github.com/users/kylelyk/gists{/gist_id}","starred_url":"https://api.github.com/users/kylelyk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kylelyk/subscriptions","organizations_url":"https://api.github.com/users/kylelyk/orgs","repos_url":"https://api.github.com/users/kylelyk/repos","events_url":"https://api.github.com/users/kylelyk/events{/privacy}","received_events_url":"https://api.github.com/users/kylelyk/received_events","type":"User","site_admin":false},"created_at":"2018-04-25T15:36:37Z","updated_at":"2018-04-25T15:36:37Z","author_association":"NONE","body":"Adding the routing field makes the query work as expected. Could an error be returned if you attempt to specify a document without a routing id if routing is set to required? Every other API I have used has given an appropriate error if I forget to set the routing id.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384361480","html_url":"https://github.com/elastic/elasticsearch/issues/29678#issuecomment-384361480","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29678","id":384361480,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDM2MTQ4MA==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-04-25T17:05:28Z","updated_at":"2018-04-25T17:05:28Z","author_association":"MEMBER","body":"Thats a good suggestion @kylelyk, I'm going to reword the title of this issue to reflect the intention to change to that behaviour and mark it as an adoptme","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385587940","html_url":"https://github.com/elastic/elasticsearch/issues/29678#issuecomment-385587940","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29678","id":385587940,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTU4Nzk0MA==","user":{"login":"ashishguptak","id":12931571,"node_id":"MDQ6VXNlcjEyOTMxNTcx","avatar_url":"https://avatars0.githubusercontent.com/u/12931571?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishguptak","html_url":"https://github.com/ashishguptak","followers_url":"https://api.github.com/users/ashishguptak/followers","following_url":"https://api.github.com/users/ashishguptak/following{/other_user}","gists_url":"https://api.github.com/users/ashishguptak/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishguptak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishguptak/subscriptions","organizations_url":"https://api.github.com/users/ashishguptak/orgs","repos_url":"https://api.github.com/users/ashishguptak/repos","events_url":"https://api.github.com/users/ashishguptak/events{/privacy}","received_events_url":"https://api.github.com/users/ashishguptak/received_events","type":"User","site_admin":false},"created_at":"2018-05-01T02:58:56Z","updated_at":"2018-05-01T02:58:56Z","author_association":"NONE","body":"Hello, Can I take up this issue?\r\nany pointers are much appreciated.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/421365671","html_url":"https://github.com/elastic/elasticsearch/issues/29678#issuecomment-421365671","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29678","id":421365671,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMTM2NTY3MQ==","user":{"login":"cbismuth","id":21545602,"node_id":"MDQ6VXNlcjIxNTQ1NjAy","avatar_url":"https://avatars1.githubusercontent.com/u/21545602?v=4","gravatar_id":"","url":"https://api.github.com/users/cbismuth","html_url":"https://github.com/cbismuth","followers_url":"https://api.github.com/users/cbismuth/followers","following_url":"https://api.github.com/users/cbismuth/following{/other_user}","gists_url":"https://api.github.com/users/cbismuth/gists{/gist_id}","starred_url":"https://api.github.com/users/cbismuth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbismuth/subscriptions","organizations_url":"https://api.github.com/users/cbismuth/orgs","repos_url":"https://api.github.com/users/cbismuth/repos","events_url":"https://api.github.com/users/cbismuth/events{/privacy}","received_events_url":"https://api.github.com/users/cbismuth/received_events","type":"User","site_admin":false},"created_at":"2018-09-14T13:53:35Z","updated_at":"2018-09-14T13:53:35Z","author_association":"CONTRIBUTOR","body":"I'll have a look on this one.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/421955096","html_url":"https://github.com/elastic/elasticsearch/issues/29678#issuecomment-421955096","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29678","id":421955096,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMTk1NTA5Ng==","user":{"login":"cbismuth","id":21545602,"node_id":"MDQ6VXNlcjIxNTQ1NjAy","avatar_url":"https://avatars1.githubusercontent.com/u/21545602?v=4","gravatar_id":"","url":"https://api.github.com/users/cbismuth","html_url":"https://github.com/cbismuth","followers_url":"https://api.github.com/users/cbismuth/followers","following_url":"https://api.github.com/users/cbismuth/following{/other_user}","gists_url":"https://api.github.com/users/cbismuth/gists{/gist_id}","starred_url":"https://api.github.com/users/cbismuth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbismuth/subscriptions","organizations_url":"https://api.github.com/users/cbismuth/orgs","repos_url":"https://api.github.com/users/cbismuth/repos","events_url":"https://api.github.com/users/cbismuth/events{/privacy}","received_events_url":"https://api.github.com/users/cbismuth/received_events","type":"User","site_admin":false},"created_at":"2018-09-17T10:13:06Z","updated_at":"2018-09-17T12:02:12Z","author_association":"CONTRIBUTOR","body":"I can reproduce this issue on `master`, see Gist [here](https://gist.github.com/cbismuth/6c59193b0ab0da39e9ced05cfdb76dd4). As @kylelyk said, its returns no result.\r\n\r\n`{\"took\":5,\"timed_out\":false,\"_shards\":{\"total\":2,\"successful\":2,\"skipped\":0,\"failed\":0},\"hits\":{\"total\":0,\"max_score\":null,\"hits\":[]}}`\r\n\r\nBesides, Bulk API doesn't seem to allow `_routing` attribute any more, see error below. I've switched to two POST commands with refresh forced.\r\n\r\n`{\"error\":{\"root_cause\":[{\"type\":\"illegal_argument_exception\",\"reason\":\"Action/metadata line [2] contains an unknown parameter [_routing]\"}],\"type\":\"illegal_argument_exception\",\"reason\":\"Action/metadata line [2] contains an unknown parameter [_routing]\"},\"status\":400}`\r\n\r\nI'm now digging a little deeper in issue resolution and let you know.\r\n\r\n**EDIT**\r\n\r\nI've updated Gist test script to trigger a missing routing exception.\r\n`RoutingMissingException` when searching a document by id with missing routing attribute is thrown from the server action layer, see [here](https://github.com/elastic/elasticsearch/blob/237650e9c054149fd08213b38a81a3666c1868e5/server/src/main/java/org/elasticsearch/action/get/TransportGetAction.java#L74).\r\n\r\nUnlike the GET API, a `MoreLikeThisQuery` query has to be parsed into search context to check whether or not the `routing` attribute field has been set (see [here](https://github.com/elastic/elasticsearch/blob/7ad71f906a9608e1c168358624f4b0a39b240296/server/src/main/java/org/elasticsearch/search/SearchService.java#L576)).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/422394399","html_url":"https://github.com/elastic/elasticsearch/issues/29678#issuecomment-422394399","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29678","id":422394399,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMjM5NDM5OQ==","user":{"login":"cbismuth","id":21545602,"node_id":"MDQ6VXNlcjIxNTQ1NjAy","avatar_url":"https://avatars1.githubusercontent.com/u/21545602?v=4","gravatar_id":"","url":"https://api.github.com/users/cbismuth","html_url":"https://github.com/cbismuth","followers_url":"https://api.github.com/users/cbismuth/followers","following_url":"https://api.github.com/users/cbismuth/following{/other_user}","gists_url":"https://api.github.com/users/cbismuth/gists{/gist_id}","starred_url":"https://api.github.com/users/cbismuth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbismuth/subscriptions","organizations_url":"https://api.github.com/users/cbismuth/orgs","repos_url":"https://api.github.com/users/cbismuth/repos","events_url":"https://api.github.com/users/cbismuth/events{/privacy}","received_events_url":"https://api.github.com/users/cbismuth/received_events","type":"User","site_admin":false},"created_at":"2018-09-18T13:32:00Z","updated_at":"2018-09-23T16:07:46Z","author_association":"CONTRIBUTOR","body":"I've opened a pull request to fix this issue, see https://github.com/elastic/elasticsearch/pull/33974.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/423827335","html_url":"https://github.com/elastic/elasticsearch/issues/29678#issuecomment-423827335","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29678","id":423827335,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMzgyNzMzNQ==","user":{"login":"cbismuth","id":21545602,"node_id":"MDQ6VXNlcjIxNTQ1NjAy","avatar_url":"https://avatars1.githubusercontent.com/u/21545602?v=4","gravatar_id":"","url":"https://api.github.com/users/cbismuth","html_url":"https://github.com/cbismuth","followers_url":"https://api.github.com/users/cbismuth/followers","following_url":"https://api.github.com/users/cbismuth/following{/other_user}","gists_url":"https://api.github.com/users/cbismuth/gists{/gist_id}","starred_url":"https://api.github.com/users/cbismuth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbismuth/subscriptions","organizations_url":"https://api.github.com/users/cbismuth/orgs","repos_url":"https://api.github.com/users/cbismuth/repos","events_url":"https://api.github.com/users/cbismuth/events{/privacy}","received_events_url":"https://api.github.com/users/cbismuth/received_events","type":"User","site_admin":false},"created_at":"2018-09-23T16:08:57Z","updated_at":"2018-09-23T16:40:31Z","author_association":"CONTRIBUTOR","body":"Obsolete PR closed (_due to bad Git rebase operation_) and [new one](https://github.com/elastic/elasticsearch/pull/33974) opened in sync with `master` branch.","performed_via_github_app":null}]