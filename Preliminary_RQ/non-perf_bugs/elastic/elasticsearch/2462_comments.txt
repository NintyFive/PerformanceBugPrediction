[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/11035792","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-11035792","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":11035792,"node_id":"MDEyOklzc3VlQ29tbWVudDExMDM1Nzky","user":{"login":"pcomte","id":2260044,"node_id":"MDQ6VXNlcjIyNjAwNDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/2260044?v=4","gravatar_id":"","url":"https://api.github.com/users/pcomte","html_url":"https://github.com/pcomte","followers_url":"https://api.github.com/users/pcomte/followers","following_url":"https://api.github.com/users/pcomte/following{/other_user}","gists_url":"https://api.github.com/users/pcomte/gists{/gist_id}","starred_url":"https://api.github.com/users/pcomte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcomte/subscriptions","organizations_url":"https://api.github.com/users/pcomte/orgs","repos_url":"https://api.github.com/users/pcomte/repos","events_url":"https://api.github.com/users/pcomte/events{/privacy}","received_events_url":"https://api.github.com/users/pcomte/received_events","type":"User","site_admin":false},"created_at":"2012-12-05T10:03:52Z","updated_at":"2012-12-05T10:03:52Z","author_association":"NONE","body":"Hi,\n\nAny idea when this will be included in the master branch?\n\nThanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/11092274","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-11092274","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":11092274,"node_id":"MDEyOklzc3VlQ29tbWVudDExMDkyMjc0","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2012-12-06T16:24:41Z","updated_at":"2012-12-06T16:24:41Z","author_association":"MEMBER","body":"@kroepke This makes sense. We will get this in after the lucene4 refactorings.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/11101141","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-11101141","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":11101141,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTAxMTQx","user":{"login":"kroepke","id":52014,"node_id":"MDQ6VXNlcjUyMDE0","avatar_url":"https://avatars1.githubusercontent.com/u/52014?v=4","gravatar_id":"","url":"https://api.github.com/users/kroepke","html_url":"https://github.com/kroepke","followers_url":"https://api.github.com/users/kroepke/followers","following_url":"https://api.github.com/users/kroepke/following{/other_user}","gists_url":"https://api.github.com/users/kroepke/gists{/gist_id}","starred_url":"https://api.github.com/users/kroepke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kroepke/subscriptions","organizations_url":"https://api.github.com/users/kroepke/orgs","repos_url":"https://api.github.com/users/kroepke/repos","events_url":"https://api.github.com/users/kroepke/events{/privacy}","received_events_url":"https://api.github.com/users/kroepke/received_events","type":"User","site_admin":false},"created_at":"2012-12-06T19:56:46Z","updated_at":"2012-12-06T19:56:46Z","author_association":"NONE","body":"@martijnvg ok, great. Until then we will build our own version with that patch then. \nThx!\nLet me know if you want me to clean anything up when this comes up again. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/11126143","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-11126143","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":11126143,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTI2MTQz","user":{"login":"kroepke","id":52014,"node_id":"MDQ6VXNlcjUyMDE0","avatar_url":"https://avatars1.githubusercontent.com/u/52014?v=4","gravatar_id":"","url":"https://api.github.com/users/kroepke","html_url":"https://github.com/kroepke","followers_url":"https://api.github.com/users/kroepke/followers","following_url":"https://api.github.com/users/kroepke/following{/other_user}","gists_url":"https://api.github.com/users/kroepke/gists{/gist_id}","starred_url":"https://api.github.com/users/kroepke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kroepke/subscriptions","organizations_url":"https://api.github.com/users/kroepke/orgs","repos_url":"https://api.github.com/users/kroepke/repos","events_url":"https://api.github.com/users/kroepke/events{/privacy}","received_events_url":"https://api.github.com/users/kroepke/received_events","type":"User","site_admin":false},"created_at":"2012-12-07T10:59:38Z","updated_at":"2012-12-07T11:04:50Z","author_association":"NONE","body":"A workaround for this problem is using the following script in the term fact.\nNot pretty, but it solves the immediate problem for boolean mappers.\n\n``` json\n{\n  \"query\": {\n    \"match_all\": {}\n  },\n  \"facets\": {\n    \"bla\": {\n      \"terms\": {\n        \"term\": true,\n        \"size\": 10,\n        \"script\": \"doc['foo'].value == 'T' ? true : false\"\n      }\n    }\n  }\n}\n```\n\nResults in:\n\n``` json\n{\n  \"facets\": {\n     \"bla\": {\n        \"_type\": \"terms\",\n        \"missing\": 0,\n        \"total\": 1,\n        \"other\": 0,\n        \"terms\": [\n             {\n                 \"term\": \"true\",\n                 \"count\": 1\n              }\n         ]\n    }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/11128064","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-11128064","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":11128064,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTI4MDY0","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2012-12-07T12:20:46Z","updated_at":"2012-12-07T12:20:46Z","author_association":"CONTRIBUTOR","body":"@kroepke Just interested, how does using `script` affect performance, do you have any numbers or a guess?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/11192565","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-11192565","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":11192565,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTkyNTY1","user":{"login":"kroepke","id":52014,"node_id":"MDQ6VXNlcjUyMDE0","avatar_url":"https://avatars1.githubusercontent.com/u/52014?v=4","gravatar_id":"","url":"https://api.github.com/users/kroepke","html_url":"https://github.com/kroepke","followers_url":"https://api.github.com/users/kroepke/followers","following_url":"https://api.github.com/users/kroepke/following{/other_user}","gists_url":"https://api.github.com/users/kroepke/gists{/gist_id}","starred_url":"https://api.github.com/users/kroepke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kroepke/subscriptions","organizations_url":"https://api.github.com/users/kroepke/orgs","repos_url":"https://api.github.com/users/kroepke/repos","events_url":"https://api.github.com/users/kroepke/events{/privacy}","received_events_url":"https://api.github.com/users/kroepke/received_events","type":"User","site_admin":false},"created_at":"2012-12-10T12:58:54Z","updated_at":"2012-12-10T12:59:12Z","author_association":"NONE","body":"@karmi We haven't done any benchmarks yet, we hope to get this deployed the coming week.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/11340880","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-11340880","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":11340880,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzQwODgw","user":{"login":"kroepke","id":52014,"node_id":"MDQ6VXNlcjUyMDE0","avatar_url":"https://avatars1.githubusercontent.com/u/52014?v=4","gravatar_id":"","url":"https://api.github.com/users/kroepke","html_url":"https://github.com/kroepke","followers_url":"https://api.github.com/users/kroepke/followers","following_url":"https://api.github.com/users/kroepke/following{/other_user}","gists_url":"https://api.github.com/users/kroepke/gists{/gist_id}","starred_url":"https://api.github.com/users/kroepke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kroepke/subscriptions","organizations_url":"https://api.github.com/users/kroepke/orgs","repos_url":"https://api.github.com/users/kroepke/repos","events_url":"https://api.github.com/users/kroepke/events{/privacy}","received_events_url":"https://api.github.com/users/kroepke/received_events","type":"User","site_admin":false},"created_at":"2012-12-13T16:22:03Z","updated_at":"2012-12-13T16:22:03Z","author_association":"NONE","body":"@karmi I've just done a very unscientific test, using the queries above.\nThe index has 213198 documents and is 1.9gb in size.\nThe value distribution is extremely uneven towards \"false\" (upwards of 99% false), but that shouldn't actually matter too much.\nIt's running on a single server, all data fits into memory, nothing else is using that machine. Unfortunately I forgot to change the shard count, which is the default 5, so this is 5 shards on one box.\nWithout the script response times around between 8 and 9 ms, with the script field it's consistently between 48 and 50 ms, so the overhead is considerable.\nIt may or may not be feasible for people to use the workaround, but we will have to go with a patched version until this gets fixed upstream.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/11341096","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-11341096","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":11341096,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzQxMDk2","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2012-12-13T16:26:23Z","updated_at":"2012-12-13T16:26:23Z","author_association":"CONTRIBUTOR","body":"@kroepke Thanks for the numbers! That is still quite a good performance, considering it has to scan all the matching documents and aggregate the counts.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17418763","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-17418763","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":17418763,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NDE4NzYz","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-05-03T21:17:43Z","updated_at":"2013-05-03T21:17:43Z","author_association":"CONTRIBUTOR","body":"this seems to be open for a long time... I will look into that soonish\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18896095","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-18896095","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":18896095,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODk2MDk1","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-06-04T08:39:55Z","updated_at":"2013-06-04T08:39:55Z","author_association":"CONTRIBUTOR","body":"@s1monw \nAny updates on that? \nI understand that changing this at this point could lead to problems to people who count on this values being returned the way it is.\nPerhaps the mapping could be configured to either map to true/false or not, and defaulting to the current behavior? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18906027","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-18906027","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":18906027,"node_id":"MDEyOklzc3VlQ29tbWVudDE4OTA2MDI3","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-06-04T12:38:48Z","updated_at":"2013-06-04T12:38:48Z","author_association":"MEMBER","body":"our plan is to look into this for the 1.0 release. Your solution is definitely a possible way for us to support it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18971496","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-18971496","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":18971496,"node_id":"MDEyOklzc3VlQ29tbWVudDE4OTcxNDk2","user":{"login":"kroepke","id":52014,"node_id":"MDQ6VXNlcjUyMDE0","avatar_url":"https://avatars1.githubusercontent.com/u/52014?v=4","gravatar_id":"","url":"https://api.github.com/users/kroepke","html_url":"https://github.com/kroepke","followers_url":"https://api.github.com/users/kroepke/followers","following_url":"https://api.github.com/users/kroepke/following{/other_user}","gists_url":"https://api.github.com/users/kroepke/gists{/gist_id}","starred_url":"https://api.github.com/users/kroepke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kroepke/subscriptions","organizations_url":"https://api.github.com/users/kroepke/orgs","repos_url":"https://api.github.com/users/kroepke/repos","events_url":"https://api.github.com/users/kroepke/events{/privacy}","received_events_url":"https://api.github.com/users/kroepke/received_events","type":"User","site_admin":false},"created_at":"2013-06-05T12:10:48Z","updated_at":"2013-06-05T12:10:48Z","author_association":"NONE","body":"The following request illustrates the new behavior:\n\n```\ncurl -XPOST http://localhost:9200/boolfacet/auto/_search?pretty=true -d '{\"query\":{\"match_all\":{}}, \"facets\":{\"bar\":{\"terms\":{\"field\"\"foo\", \"map_boolean_values\":\"true\"}}}}'\n```\n\n``` json\n{\n  \"took\" : 1,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 1,\n    \"max_score\" : 1.0,\n    \"hits\" : [ {\n      \"_index\" : \"boolfacet\",\n      \"_type\" : \"auto\",\n      \"_id\" : \"1\",\n      \"_score\" : 1.0, \"_source\" : {\"foo\":true}\n    } ]\n  },\n  \"facets\" : {\n    \"bar\" : {\n      \"_type\" : \"terms\",\n      \"missing\" : 0,\n      \"total\" : 1,\n      \"other\" : 0,\n      \"terms\" : [ {\n        \"term\" : \"true\",\n        \"count\" : 1\n      } ]\n    }\n  }\n}\n```\n\nWithout the flag it's back to 'T' and 'F', also of course if it's set to 'false'.\nSince you don't merge pull request here, feel free to pick that commit apart. Also I'm not sure what else needs to be done to properly support it in all code paths.\nIf you tell me what to test with I'd be very happy to implement the missing bits.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19028041","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-19028041","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":19028041,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDI4MDQx","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T06:57:03Z","updated_at":"2013-06-06T06:57:03Z","author_association":"CONTRIBUTOR","body":"hey there, I just briefly looked at the pull request and I wonder if we can make this a little less intrusive. At the end of the day what counts here is what kind of representation we have to \"True\" and \"False\" so we could just load this through FieldData adding a feature next to the FieldDataFilter. I'd call it a _FieldDataTransformer_ that you can use to transform `\"T\" to \"True\"' when field data is loaded then your facets would just naturally come back as a full boolean string?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19033847","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-19033847","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":19033847,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDMzODQ3","user":{"login":"kroepke","id":52014,"node_id":"MDQ6VXNlcjUyMDE0","avatar_url":"https://avatars1.githubusercontent.com/u/52014?v=4","gravatar_id":"","url":"https://api.github.com/users/kroepke","html_url":"https://github.com/kroepke","followers_url":"https://api.github.com/users/kroepke/followers","following_url":"https://api.github.com/users/kroepke/following{/other_user}","gists_url":"https://api.github.com/users/kroepke/gists{/gist_id}","starred_url":"https://api.github.com/users/kroepke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kroepke/subscriptions","organizations_url":"https://api.github.com/users/kroepke/orgs","repos_url":"https://api.github.com/users/kroepke/repos","events_url":"https://api.github.com/users/kroepke/events{/privacy}","received_events_url":"https://api.github.com/users/kroepke/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T09:23:30Z","updated_at":"2013-06-06T09:23:30Z","author_association":"NONE","body":"I'm not sure I can follow you there :)\n\nFrom what I can see you still need to have the field mapper to do that for you, since that's what it does, no?\nOr do you suggest moving the responsibility for resolving the conversion somewhere else?\n\nI'm asking because this problem affects every field that stores values in a different representation, e.g. IPs. For those you get back the int based representation, which I actually find worse than the boolean case...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19039334","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-19039334","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":19039334,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDM5MzM0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T11:32:09Z","updated_at":"2013-06-06T11:32:09Z","author_association":"CONTRIBUTOR","body":"Hiya @kroepke \n\nBeen talking to @s1monw about this and two features seem to make sense:\n\n## FieldData Transformer:\n\nYou would be able to specify a `script` on a field which allows you to transform each value as it is loaded into the fielddata cache.  This would be useful for, eg:\n1. converting \"T\"/\"F\" to \"true\"/\"false\"\n2. truncating `not_analyzed` strings to eg 15 characters for sorting purposes (on the fly, as opposed to having to reindex with the `truncate` token filter\n3. capitalizing tokens for display\n4. rounding datetimes to (eg) seconds instead of milliseconds\n\nThe benefit here is that there would be a one-time cost of conversion (just when loading the fielddata) and the same values would be exposed for facets, scripting and sorting.\n\n## Facet Value Transformer:\n\nA script which is applied just before the serialization of the facet responses into JSON which could, eg:\n1. convert \"T\"/\"F\" to \"true\"/\"false\"\n2. convert longs representing IPv4 addresses into their string representations\n3. capitalize tokens for display\n4. format datetime longs as date strings\n\nThese would be more efficient than the current facet scripts because they would only be run on the return values, not on every value. However, you would still have the raw longs loaded into memory which are more useful for calculations (eg easier to calc netmasks on a long rather than on a string IPv4 address)\n\nI believe that the value transformers are planned for the new facets that we are planning for 1.0 (@uri?)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19040020","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-19040020","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":19040020,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDQwMDIw","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T11:50:11Z","updated_at":"2013-06-06T11:50:11Z","author_association":"CONTRIBUTOR","body":"The idea of having to specify a script for executing these mappings feel awkward, imho.\n\nI think that everybody using elastic search will eventually run into this issue, and the script solution seems more like a work around rather than an \"option\" of something that should be transparent in the first place.\n\nI could see this feature as a generic transformer(which i like) for the facets, but for elastic search builtin types(boolean, ip..) I think this should be done without the need of defining anything(at most a \"flag\", saying you want it to be done, and even that is just because of backward compatibility).\n\nIf internally, this \"automatic\" transformation for the builtin types is done using the script implementation you just described, cool. but having everybody defining its own script for mappings that most likely everybody will do, feels wrong.\n\nthat's my 2 cents anyway...\n\n@clintongormley maybe the wrong uri :D @uboness \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19040351","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-19040351","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":19040351,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDQwMzUx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T11:57:51Z","updated_at":"2013-06-06T11:57:51Z","author_association":"CONTRIBUTOR","body":"(heh, too many nicks in too many places)\n\nYes, I understand what you mean about the core types in ES.  I think `boolean` and `ip` are the only two types that this really applies to. `\"true\"` and `\"false\"` are less surprising than `\"T\"` and `\"F\"`, and IP addresses expressed as longs are pretty much useless in facets.\n\nPerhaps for these two types, this should be the default return value in the new aggregations rewrite.  We don't have to maintain backward compatibility here because this is completely new functionality.  The old facets will continue to work as before.\n\nFor any other \"label\" transformations, the only generically useful way of doing them is via a script, as everybody will have their own particular requirements which would result in an explosion of options.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19040516","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-19040516","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":19040516,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDQwNTE2","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T12:02:02Z","updated_at":"2013-06-06T12:02:02Z","author_association":"CONTRIBUTOR","body":"@clintongormley Agreed. This way makes complete sense and I like the script approach as a generic way of doing this. Looking forward to it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19041465","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-19041465","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":19041465,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDQxNDY1","user":{"login":"kroepke","id":52014,"node_id":"MDQ6VXNlcjUyMDE0","avatar_url":"https://avatars1.githubusercontent.com/u/52014?v=4","gravatar_id":"","url":"https://api.github.com/users/kroepke","html_url":"https://github.com/kroepke","followers_url":"https://api.github.com/users/kroepke/followers","following_url":"https://api.github.com/users/kroepke/following{/other_user}","gists_url":"https://api.github.com/users/kroepke/gists{/gist_id}","starred_url":"https://api.github.com/users/kroepke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kroepke/subscriptions","organizations_url":"https://api.github.com/users/kroepke/orgs","repos_url":"https://api.github.com/users/kroepke/repos","events_url":"https://api.github.com/users/kroepke/events{/privacy}","received_events_url":"https://api.github.com/users/kroepke/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T12:23:19Z","updated_at":"2013-06-06T12:23:19Z","author_association":"NONE","body":"@clintongormley In fact this applies to dates as well, if you use terms facets (even if you might argue that terms facets on dates could be done with the date histogram facet instead).\nWhile I see the value of what @s1monw is proposing, I have to agree with @lmenezes that it feels wrong to have to fix this with specifying it for every query just to get back what I put in.\nThe use case of doing netmask calculations is a valid one, but right now I consider terms facets to be broken because they leak internal representation. I doubt that it's useful to keep this for backwards compatibility reasons beyond 1.0, especially since most of the code has been touched in the last 7 months anyway.\n(Sorry for sounding a little bitter, but this has been a continuous problem for us.) \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19041638","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-19041638","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":19041638,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDQxNjM4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T12:27:25Z","updated_at":"2013-06-06T12:27:25Z","author_association":"CONTRIBUTOR","body":"@kroepke As I understand it, there are also plans for converting datetimes into strings, by specifying formats (rather than scripts).  However, for (eg) charting libraries, it is usually more efficient to hand them millis-since-the-epoch instead of date strings, so the default return value will probably remain as longs.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/31579825","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-31579825","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":31579825,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTc5ODI1","user":{"login":"gpopovic","id":2094147,"node_id":"MDQ6VXNlcjIwOTQxNDc=","avatar_url":"https://avatars1.githubusercontent.com/u/2094147?v=4","gravatar_id":"","url":"https://api.github.com/users/gpopovic","html_url":"https://github.com/gpopovic","followers_url":"https://api.github.com/users/gpopovic/followers","following_url":"https://api.github.com/users/gpopovic/following{/other_user}","gists_url":"https://api.github.com/users/gpopovic/gists{/gist_id}","starred_url":"https://api.github.com/users/gpopovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpopovic/subscriptions","organizations_url":"https://api.github.com/users/gpopovic/orgs","repos_url":"https://api.github.com/users/gpopovic/repos","events_url":"https://api.github.com/users/gpopovic/events{/privacy}","received_events_url":"https://api.github.com/users/gpopovic/received_events","type":"User","site_admin":false},"created_at":"2014-01-04T14:49:17Z","updated_at":"2014-01-04T14:49:17Z","author_association":"NONE","body":"Any news on this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/31998484","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-31998484","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":31998484,"node_id":"MDEyOklzc3VlQ29tbWVudDMxOTk4NDg0","user":{"login":"uboness","id":211019,"node_id":"MDQ6VXNlcjIxMTAxOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/211019?v=4","gravatar_id":"","url":"https://api.github.com/users/uboness","html_url":"https://github.com/uboness","followers_url":"https://api.github.com/users/uboness/followers","following_url":"https://api.github.com/users/uboness/following{/other_user}","gists_url":"https://api.github.com/users/uboness/gists{/gist_id}","starred_url":"https://api.github.com/users/uboness/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uboness/subscriptions","organizations_url":"https://api.github.com/users/uboness/orgs","repos_url":"https://api.github.com/users/uboness/repos","events_url":"https://api.github.com/users/uboness/events{/privacy}","received_events_url":"https://api.github.com/users/uboness/received_events","type":"User","site_admin":false},"created_at":"2014-01-10T02:44:01Z","updated_at":"2014-01-10T02:44:01Z","author_association":"CONTRIBUTOR","body":"we'll work on this one post 1.0\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48029184","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-48029184","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":48029184,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDI5MTg0","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-07-04T10:28:43Z","updated_at":"2014-07-04T10:28:43Z","author_association":"CONTRIBUTOR","body":"We deprecated facets already in `1.3` we decided to close this. We will fix this in aggregations instead.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/58443806","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-58443806","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":58443806,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDQzODA2","user":{"login":"aaneja","id":1797669,"node_id":"MDQ6VXNlcjE3OTc2Njk=","avatar_url":"https://avatars2.githubusercontent.com/u/1797669?v=4","gravatar_id":"","url":"https://api.github.com/users/aaneja","html_url":"https://github.com/aaneja","followers_url":"https://api.github.com/users/aaneja/followers","following_url":"https://api.github.com/users/aaneja/following{/other_user}","gists_url":"https://api.github.com/users/aaneja/gists{/gist_id}","starred_url":"https://api.github.com/users/aaneja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aaneja/subscriptions","organizations_url":"https://api.github.com/users/aaneja/orgs","repos_url":"https://api.github.com/users/aaneja/repos","events_url":"https://api.github.com/users/aaneja/events{/privacy}","received_events_url":"https://api.github.com/users/aaneja/received_events","type":"User","site_admin":false},"created_at":"2014-10-08T23:25:57Z","updated_at":"2014-10-08T23:25:57Z","author_association":"NONE","body":"Any updates on which ES release will have this ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/59263866","html_url":"https://github.com/elastic/elasticsearch/issues/2462#issuecomment-59263866","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2462","id":59263866,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjYzODY2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-10-15T19:43:31Z","updated_at":"2014-10-15T19:43:31Z","author_association":"CONTRIBUTOR","body":"@aaneja will probably be 2.0\n","performed_via_github_app":null}]