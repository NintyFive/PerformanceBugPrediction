[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/47011346","html_url":"https://github.com/elastic/elasticsearch/issues/6595#issuecomment-47011346","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6595","id":47011346,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDExMzQ2","user":{"login":"Vadi","id":218148,"node_id":"MDQ6VXNlcjIxODE0OA==","avatar_url":"https://avatars3.githubusercontent.com/u/218148?v=4","gravatar_id":"","url":"https://api.github.com/users/Vadi","html_url":"https://github.com/Vadi","followers_url":"https://api.github.com/users/Vadi/followers","following_url":"https://api.github.com/users/Vadi/following{/other_user}","gists_url":"https://api.github.com/users/Vadi/gists{/gist_id}","starred_url":"https://api.github.com/users/Vadi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Vadi/subscriptions","organizations_url":"https://api.github.com/users/Vadi/orgs","repos_url":"https://api.github.com/users/Vadi/repos","events_url":"https://api.github.com/users/Vadi/events{/privacy}","received_events_url":"https://api.github.com/users/Vadi/received_events","type":"User","site_admin":false},"created_at":"2014-06-24T18:30:55Z","updated_at":"2014-06-24T18:30:55Z","author_association":"NONE","body":"Using [Aggregations](http://bit.ly/1jLvotz) what you're trying should be possible. Anyways, Aggregations is a good facelift to Facets. If possible, you should use it -\n\n``` json\n{\n  \"query\": {\n    \"match_all\": {}\n  },\n  \"aggs\": {\n    \"group_by_country\": {\n      \"terms\": {\n        \"field\": \"country\"\n      },\n      \"aggs\": {\n        \"sum_of_multipliers\": {\n          \"sum\": {\n            \"field\": \"multiplier\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nThe result would be -\n\n``` json\n\"aggregations\": {\n      \"group_by_country\": {\n         \"buckets\": [\n            {\n               \"key\": \"usa\",\n               \"doc_count\": 3,\n               \"sum_of_multipliers\": {\n                  \"value\": 4\n               }\n            },\n            {\n               \"key\": \"gbr\",\n               \"doc_count\": 2,\n               \"sum_of_multipliers\": {\n                  \"value\": 3\n               }\n            }\n         ]\n      }\n   }\n```\n\nLet me know if this helps\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/47506211","html_url":"https://github.com/elastic/elasticsearch/issues/6595#issuecomment-47506211","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6595","id":47506211,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTA2MjEx","user":{"login":"marklit","id":359316,"node_id":"MDQ6VXNlcjM1OTMxNg==","avatar_url":"https://avatars0.githubusercontent.com/u/359316?v=4","gravatar_id":"","url":"https://api.github.com/users/marklit","html_url":"https://github.com/marklit","followers_url":"https://api.github.com/users/marklit/followers","following_url":"https://api.github.com/users/marklit/following{/other_user}","gists_url":"https://api.github.com/users/marklit/gists{/gist_id}","starred_url":"https://api.github.com/users/marklit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marklit/subscriptions","organizations_url":"https://api.github.com/users/marklit/orgs","repos_url":"https://api.github.com/users/marklit/repos","events_url":"https://api.github.com/users/marklit/events{/privacy}","received_events_url":"https://api.github.com/users/marklit/received_events","type":"User","site_admin":false},"created_at":"2014-06-30T08:26:24Z","updated_at":"2014-06-30T08:26:24Z","author_association":"NONE","body":"It does help. Thank you Vadi.\n","performed_via_github_app":null}]