{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14199","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14199/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14199/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14199/events","html_url":"https://github.com/elastic/elasticsearch/issues/14199","id":112236288,"node_id":"MDU6SXNzdWUxMTIyMzYyODg=","number":14199,"title":"Partial update of an index in Elasticsearch","user":{"login":"malinir123","id":11220397,"node_id":"MDQ6VXNlcjExMjIwMzk3","avatar_url":"https://avatars1.githubusercontent.com/u/11220397?v=4","gravatar_id":"","url":"https://api.github.com/users/malinir123","html_url":"https://github.com/malinir123","followers_url":"https://api.github.com/users/malinir123/followers","following_url":"https://api.github.com/users/malinir123/following{/other_user}","gists_url":"https://api.github.com/users/malinir123/gists{/gist_id}","starred_url":"https://api.github.com/users/malinir123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/malinir123/subscriptions","organizations_url":"https://api.github.com/users/malinir123/orgs","repos_url":"https://api.github.com/users/malinir123/repos","events_url":"https://api.github.com/users/malinir123/events{/privacy}","received_events_url":"https://api.github.com/users/malinir123/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-10-19T21:24:54Z","updated_at":"2015-10-20T12:42:53Z","closed_at":"2015-10-20T12:42:52Z","author_association":"NONE","active_lock_reason":null,"body":"I have the following mapping with category as an array.\n\ncurl -XPUT http://localhost:9200/cstest/ -d '\n{\n    \"mappings\": {\n        \"csproducts\" : {\n            \"properties\" : {             \n\n```\n              \"productid\":{\n                \"type\" : \"String\"               \n              },  \n              \"productnumber\":{\n                \"type\" : \"String\"               \n              },        \n              \"category\":{\n                \"type\": \"string\",\n                \"null_value\" : \"N/A\"                  \n              }\n\n         } //end properties\n      } //end csproducts\n\n\n} //end mapping\n```\n\n}\n'\nAdded 1 product to the index.\n\ncurl -XPUT 'http://localhost:9200/cstest/csproducts/1' -d '\n{\n    \"productid\":\"1\",\n       \"productnumber\":\"123\",\n    \"category\":\"software\"\n}'\n\nWhen I run the update to add another category,\ncurl -XPOST 'http://localhost:9200/cstest/csproducts/1/_update' -d'\n{\n   \"script\" : \"ctx._source.category+=new_category\",\n   \"params\" : {\n      \"new_category\" : \"engineering\"\n   }\n}'\n\nCategory is not indexed as an array of categories for that product. \nWhat is the command to run the partial updates?\n\nH\ncurl -XGET 'http://localhost:9200/cstest/csproducts/1?pretty=true'\n{\n\"_index\" : \"cstest\",\n\"_type\" : \"csproducts\",\n\"_id\" : \"1\",\n\"_version\" : 4,\n\"found\" : true, \"_source\" : {\"productid\":\"1\",\"productnumber\":\"123200\",\"category\":\"softwaredevelopment\"}\n}\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}