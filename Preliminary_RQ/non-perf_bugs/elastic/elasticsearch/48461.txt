{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/48461","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48461/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48461/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48461/events","html_url":"https://github.com/elastic/elasticsearch/issues/48461","id":511911504,"node_id":"MDU6SXNzdWU1MTE5MTE1MDQ=","number":48461,"title":"[CI] org.elasticsearch.xpack.ilm.CCRIndexLifecycleIT.testCCRUnfollowDuringSnapshot fails sporadically","user":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"labels":[{"id":912828538,"node_id":"MDU6TGFiZWw5MTI4Mjg1Mzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/ILM+SLM","name":":Core/Features/ILM+SLM","color":"0e8a16","default":false,"description":"Index and Snapshot lifecycle management"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"gwbrown","id":1522844,"node_id":"MDQ6VXNlcjE1MjI4NDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1522844?v=4","gravatar_id":"","url":"https://api.github.com/users/gwbrown","html_url":"https://github.com/gwbrown","followers_url":"https://api.github.com/users/gwbrown/followers","following_url":"https://api.github.com/users/gwbrown/following{/other_user}","gists_url":"https://api.github.com/users/gwbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gwbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwbrown/subscriptions","organizations_url":"https://api.github.com/users/gwbrown/orgs","repos_url":"https://api.github.com/users/gwbrown/repos","events_url":"https://api.github.com/users/gwbrown/events{/privacy}","received_events_url":"https://api.github.com/users/gwbrown/received_events","type":"User","site_admin":false},"assignees":[{"login":"gwbrown","id":1522844,"node_id":"MDQ6VXNlcjE1MjI4NDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1522844?v=4","gravatar_id":"","url":"https://api.github.com/users/gwbrown","html_url":"https://github.com/gwbrown","followers_url":"https://api.github.com/users/gwbrown/followers","following_url":"https://api.github.com/users/gwbrown/following{/other_user}","gists_url":"https://api.github.com/users/gwbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gwbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwbrown/subscriptions","organizations_url":"https://api.github.com/users/gwbrown/orgs","repos_url":"https://api.github.com/users/gwbrown/repos","events_url":"https://api.github.com/users/gwbrown/events{/privacy}","received_events_url":"https://api.github.com/users/gwbrown/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2019-10-24T12:28:12Z","updated_at":"2019-10-26T00:08:35Z","closed_at":"2019-10-26T00:08:35Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"## Example build failure\r\n\r\nhttps://gradle-enterprise.elastic.co/s/s7pg5vmuahasi\r\n\r\n## Reproduction line\r\n\r\nDoes **not** reproduce locally\r\n\r\n```\r\n./gradlew ':x-pack:plugin:ilm:qa:multi-cluster:follow-clusterRunner' --tests \"org.elasticsearch.xpack.ilm.CCRIndexLifecycleIT.testCCRUnfollowDuringSnapshot\" \\\r\n  -Dtests.seed=15F5BEF4F0C61ABF \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=de-AT \\\r\n  -Dtests.timezone=PST \\\r\n  -Dcompiler.java=12 \\\r\n  -Druntime.java=8\r\n```\r\n\r\n## Example relevant log:\r\n```\r\n 1> [2019-10-24T03:33:26,008][INFO ][o.e.x.i.CCRIndexLifecycleIT] [testCCRUnfollowDuringSnapshot] initializing REST clients against [http://[::1]:35835, http://127.0.0.1:33321]\r\n13:33:58   1> [2019-10-24T03:33:30,691][INFO ][o.e.x.i.CCRIndexLifecycleIT] [testCCRUnfollowDuringSnapshot] --> starting unfollow\r\n13:33:58   1> [2019-10-24T03:33:32,465][INFO ][o.e.x.i.CCRIndexLifecycleIT] [testCCRUnfollowDuringSnapshot] after test\r\n13:33:58   2> REPRODUCE WITH: ./gradlew ':x-pack:plugin:ilm:qa:multi-cluster:follow-clusterRunner' --tests \"org.elasticsearch.xpack.ilm.CCRIndexLifecycleIT.testCCRUnfollowDuringSnapshot\" -Dtests.seed=15F5BEF4F0C61ABF -Dtests.security.manager=true -Dtests.locale=de-AT -Dtests.timezone=PST -Dcompiler.java=12 -Druntime.java=8\r\n13:33:58   2> org.elasticsearch.client.ResponseException: method [HEAD], host [http://127.0.0.1:33321], URI [/unfollow-test-index/_doc/1], status line [HTTP/1.1 503 Service Unavailable]\r\n13:33:58         at __randomizedtesting.SeedInfo.seed([15F5BEF4F0C61ABF:DFD8AE805887E1C]:0)\r\n13:33:58         at org.elasticsearch.client.RestClient.convertResponse(RestClient.java:283)\r\n13:33:58         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:261)\r\n13:33:58         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:267)\r\n13:33:58         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:235)\r\n13:33:58         at org.elasticsearch.xpack.ilm.CCRIndexLifecycleIT.assertDocumentExists(CCRIndexLifecycleIT.java:753)\r\n13:33:58         at org.elasticsearch.xpack.ilm.CCRIndexLifecycleIT.lambda$testCCRUnfollowDuringSnapshot$3(CCRIndexLifecycleIT.java:166)\r\n13:33:58         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:881)\r\n13:33:58         at org.elasticsearch.xpack.ilm.CCRIndexLifecycleIT.testCCRUnfollowDuringSnapshot(CCRIndexLifecycleIT.java:158)\r\n13:33:58   1> [2019-10-24T03:33:32,611][INFO ][o.e.x.i.CCRIndexLifecycleIT] [testAliasReplicatedOnShrink] before test```\r\n\r\n## Frequency\r\n\r\nHappened [9 times so far](https://build-stats.elastic.co/app/kibana#/discover?_g=(refreshInterval:(pause:!t,value:0),time:(from:now-1y,mode:quick,to:now))&_a=(columns:!(branch,message),index:e58bf320-7efd-11e8-bf69-63c8ef516157,interval:auto,query:(language:lucene,query:'class:%20%22org.elasticsearch.xpack.ilm.CCRIndexLifecycleIT%22%20AND%20test:%20%22testCCRUnfollowDuringSnapshot%22'),sort:!(time,desc))) in `master` and `7.x` since September 17th 2019\r\n","closed_by":{"login":"gwbrown","id":1522844,"node_id":"MDQ6VXNlcjE1MjI4NDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1522844?v=4","gravatar_id":"","url":"https://api.github.com/users/gwbrown","html_url":"https://github.com/gwbrown","followers_url":"https://api.github.com/users/gwbrown/followers","following_url":"https://api.github.com/users/gwbrown/following{/other_user}","gists_url":"https://api.github.com/users/gwbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gwbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwbrown/subscriptions","organizations_url":"https://api.github.com/users/gwbrown/orgs","repos_url":"https://api.github.com/users/gwbrown/repos","events_url":"https://api.github.com/users/gwbrown/events{/privacy}","received_events_url":"https://api.github.com/users/gwbrown/received_events","type":"User","site_admin":false},"performed_via_github_app":null}