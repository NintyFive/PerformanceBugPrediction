{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15003","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15003/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15003/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15003/events","html_url":"https://github.com/elastic/elasticsearch/issues/15003","id":118797803,"node_id":"MDU6SXNzdWUxMTg3OTc4MDM=","number":15003,"title":"Node leaving the cluster does not trigger 'recover', unassigned shards are not re-assigned","user":{"login":"truthtrap","id":54732,"node_id":"MDQ6VXNlcjU0NzMy","avatar_url":"https://avatars3.githubusercontent.com/u/54732?v=4","gravatar_id":"","url":"https://api.github.com/users/truthtrap","html_url":"https://github.com/truthtrap","followers_url":"https://api.github.com/users/truthtrap/followers","following_url":"https://api.github.com/users/truthtrap/following{/other_user}","gists_url":"https://api.github.com/users/truthtrap/gists{/gist_id}","starred_url":"https://api.github.com/users/truthtrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/truthtrap/subscriptions","organizations_url":"https://api.github.com/users/truthtrap/orgs","repos_url":"https://api.github.com/users/truthtrap/repos","events_url":"https://api.github.com/users/truthtrap/events{/privacy}","received_events_url":"https://api.github.com/users/truthtrap/received_events","type":"User","site_admin":false},"labels":[{"id":837246479,"node_id":"MDU6TGFiZWw4MzcyNDY0Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Allocation","name":":Distributed/Allocation","color":"0e8a16","default":false,"description":"All issues relating to the decision making around placing a shard (both master logic & on the nodes)"},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2015-11-25T09:48:38Z","updated_at":"2018-02-14T14:05:17Z","closed_at":"2016-02-28T19:17:13Z","author_association":"NONE","active_lock_reason":null,"body":"Dear people,\n\nAfter upgrading to ES 2.0.0 I noticed that sometimes shards stay unassigned after a node leaves the cluster. We have been looking at all the usual suspects like \n\n```\ncurl -XPUT localhost:9200/_cluster/settings -d '\n{\n  \"persistent\": {\n    \"cluster.routing.allocation.enable\": \"all\"\n  }\n}'\n```\n\nbut, the only thing that we found working in this situation was a manual reroute or enabling the allocation (which is already enabled). Later it became clear that it only happens on stable clusters. If there are relocations going on the unassigned shards are assigned fine.\n\nYesterday we applied the 2.1.0 update. But we still have the same issue.\n\nAs far as we can see this is an issue (for us certainly). If it is a feature my apologies for abusing this area, and I will move the discussion to the forums.\n\nGroet,\nJurg.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}