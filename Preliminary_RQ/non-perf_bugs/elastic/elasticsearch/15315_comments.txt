[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162936383","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-162936383","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":162936383,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjkzNjM4Mw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T16:29:18Z","updated_at":"2015-12-08T16:29:18Z","author_association":"MEMBER","body":"> As of now, when it fails to start due to memory issues, it will just tell that it failed and no reason will be provided in the logs (or on the screen).\n\nI'm perplexed here. The JVM will produce error messages and a log file if it dies because it can't allocate memory. For example, if I try to start Elasticsearch requesting 2g of heap on a system with 1g of physical memory I see:\n\n```\nJava HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(0x000000008a660000, 1973026816, 0) failed; error='Cannot allocate memory' (errno=12)\n#\n# There is insufficient memory for the Java Runtime Environment to continue.\n# Native memory allocation (mmap) failed to map 1973026816 bytes for committing reserved memory.\n# An error report file with more information is saved as:\n# /tmp/hs_err_pid4572.log\n```\n\nand the first few lines of that log file:\n\n```\n#\n# There is insufficient memory for the Java Runtime Environment to continue.\n# Native memory allocation (mmap) failed to map 1973026816 bytes for committing reserved memory.\n# Possible reasons:\n#   The system is out of physical RAM or swap space\n#   In 32 bit mode, the process size limit was hit\n# Possible solutions:\n#   Reduce memory load on the system\n#   Increase physical memory or swap space\n#   Check if swap backing store is full\n#   Use 64 bit Java on a 64 bit OS\n#   Decrease Java heap size (-Xmx/-Xms)\n#   Decrease number of Java threads\n#   Decrease Java thread stack sizes (-Xss)\n#   Set larger code cache with -XX:ReservedCodeCacheSize=\n# This output file may be truncated or incomplete.\n#\n#  Out of Memory Error (os_linux.cpp:2627), pid=4572, tid=140018280015616\n```\n\n> In this case, it should indicate the issue in the logs.\n\nIf it has died or never started, it can not.\n\n>  Or have add a command in the init.d script to debug such issue such as 'debugstart' where it would display startup/error messages in the console.\n\nBy default, the information that I showed above should already be showing. You might want to investigate on your system why this is not the case.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162938807","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-162938807","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":162938807,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjkzODgwNw==","user":{"login":"ThomasdOtreppe","id":7316682,"node_id":"MDQ6VXNlcjczMTY2ODI=","avatar_url":"https://avatars0.githubusercontent.com/u/7316682?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasdOtreppe","html_url":"https://github.com/ThomasdOtreppe","followers_url":"https://api.github.com/users/ThomasdOtreppe/followers","following_url":"https://api.github.com/users/ThomasdOtreppe/following{/other_user}","gists_url":"https://api.github.com/users/ThomasdOtreppe/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasdOtreppe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasdOtreppe/subscriptions","organizations_url":"https://api.github.com/users/ThomasdOtreppe/orgs","repos_url":"https://api.github.com/users/ThomasdOtreppe/repos","events_url":"https://api.github.com/users/ThomasdOtreppe/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasdOtreppe/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T16:37:12Z","updated_at":"2015-12-08T16:37:12Z","author_association":"NONE","body":"Jason, it worked before and suddenly crashed then never restarted using 'service elasticsearch start' until I decreased the amount of allocated memory significantly.\n\nI don't know how you are starting it, I'm using ElasticSearch 1.7.3 from Elastic repositories and it didn't log anything at all.\n\nI had no idea it is supposed to log/display it since I never saw it. I have no idea what is wrong and what to look for and if you'd like I can give you access to the system via TeamViewer or something similar so you can see for yourself.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162939484","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-162939484","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":162939484,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjkzOTQ4NA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T16:38:47Z","updated_at":"2015-12-08T16:41:11Z","author_association":"MEMBER","body":"> I don't know how you are starting it, I'm using ElasticSearch 1.7.3 from Elastic repositories and it didn't log anything at all.\n\nFor the example above, I'm also using Elasticsearch from the repositories, same version as you, and I'm starting Elasticsearch as a service on CentOS.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162944065","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-162944065","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":162944065,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mjk0NDA2NQ==","user":{"login":"ThomasdOtreppe","id":7316682,"node_id":"MDQ6VXNlcjczMTY2ODI=","avatar_url":"https://avatars0.githubusercontent.com/u/7316682?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasdOtreppe","html_url":"https://github.com/ThomasdOtreppe","followers_url":"https://api.github.com/users/ThomasdOtreppe/followers","following_url":"https://api.github.com/users/ThomasdOtreppe/following{/other_user}","gists_url":"https://api.github.com/users/ThomasdOtreppe/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasdOtreppe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasdOtreppe/subscriptions","organizations_url":"https://api.github.com/users/ThomasdOtreppe/orgs","repos_url":"https://api.github.com/users/ThomasdOtreppe/repos","events_url":"https://api.github.com/users/ThomasdOtreppe/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasdOtreppe/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T16:55:56Z","updated_at":"2015-12-08T16:58:20Z","author_association":"NONE","body":"Just tested a brand new install of ElasticSearch (2.1) on Ubuntu 14.04 and then allocated more memory than the system had and when I restarted it (using service elasticsearch restart), it told me it started but didn't start and didn't log anything.\n\nHere are the changes to the configuration:\n\n```\nnetwork.host: 127.0.0.1\ndiscovery.zen.ping.multicast.enabled: false\nnode.local: true\nbootstrap.mlockall: true\n```\n\nLogging was increased to debug and swapiness was disabled (set to 1).\n\nCould you please reopen the ticket?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162944941","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-162944941","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":162944941,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mjk0NDk0MQ==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T16:58:31Z","updated_at":"2015-12-08T16:58:31Z","author_association":"CONTRIBUTOR","body":"its impossible because es is overconfigurable: we can't setup crashes to go to the logs directory, because you can configure logs directory not just via shell script/env, but also inside elasticsearch.yml.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162945610","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-162945610","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":162945610,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mjk0NTYxMA==","user":{"login":"ThomasdOtreppe","id":7316682,"node_id":"MDQ6VXNlcjczMTY2ODI=","avatar_url":"https://avatars0.githubusercontent.com/u/7316682?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasdOtreppe","html_url":"https://github.com/ThomasdOtreppe","followers_url":"https://api.github.com/users/ThomasdOtreppe/followers","following_url":"https://api.github.com/users/ThomasdOtreppe/following{/other_user}","gists_url":"https://api.github.com/users/ThomasdOtreppe/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasdOtreppe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasdOtreppe/subscriptions","organizations_url":"https://api.github.com/users/ThomasdOtreppe/orgs","repos_url":"https://api.github.com/users/ThomasdOtreppe/repos","events_url":"https://api.github.com/users/ThomasdOtreppe/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasdOtreppe/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T17:01:09Z","updated_at":"2015-12-08T17:01:09Z","author_association":"NONE","body":"So, would it be possible to have a 'debugstart' in the init.d script so that we can see what is wrong when it starts?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162946089","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-162946089","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":162946089,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mjk0NjA4OQ==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T17:03:04Z","updated_at":"2015-12-08T17:03:04Z","author_association":"CONTRIBUTOR","body":"that just adds more ways to run elasticsearch and more options. we need less not more.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162949011","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-162949011","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":162949011,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mjk0OTAxMQ==","user":{"login":"ThomasdOtreppe","id":7316682,"node_id":"MDQ6VXNlcjczMTY2ODI=","avatar_url":"https://avatars0.githubusercontent.com/u/7316682?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasdOtreppe","html_url":"https://github.com/ThomasdOtreppe","followers_url":"https://api.github.com/users/ThomasdOtreppe/followers","following_url":"https://api.github.com/users/ThomasdOtreppe/following{/other_user}","gists_url":"https://api.github.com/users/ThomasdOtreppe/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasdOtreppe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasdOtreppe/subscriptions","organizations_url":"https://api.github.com/users/ThomasdOtreppe/orgs","repos_url":"https://api.github.com/users/ThomasdOtreppe/repos","events_url":"https://api.github.com/users/ThomasdOtreppe/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasdOtreppe/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T17:14:06Z","updated_at":"2015-12-08T17:14:06Z","author_association":"NONE","body":"rmuir, that sounds contradictory to what Elastic is doing, they are adding features to ElasticSearch.\n\nRight now, debugging it is very complicated if you are not a developer and know Java well enough. \n\nIn my case, it took a week to figure out what the issue was after begging (and if you look at the post in the forum, I searched quite a bit before posting).\n\nUnless there is a serious troubleshooting page that covers such issues ([this one](https://www.elastic.co/guide/en/elasticsearch/hadoop/current/troubleshooting.html) doesn't), then there is a need for such option.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162955778","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-162955778","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":162955778,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mjk1NTc3OA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T17:37:03Z","updated_at":"2015-12-08T17:37:03Z","author_association":"MEMBER","body":"> Just tested a brand new install of ElasticSearch (2.1) on Ubuntu 14.04 and then allocated more memory than the system had and when I restarted it (using service elasticsearch restart), it told me it started but didn't start and didn't log anything.\n\nNo matter what is going on with the output, JVMs produce an error log file in `/tmp` by default on Linux, or you can overwrite with `-XX:ErrorFile=path`.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162961893","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-162961893","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":162961893,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mjk2MTg5Mw==","user":{"login":"ThomasdOtreppe","id":7316682,"node_id":"MDQ6VXNlcjczMTY2ODI=","avatar_url":"https://avatars0.githubusercontent.com/u/7316682?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasdOtreppe","html_url":"https://github.com/ThomasdOtreppe","followers_url":"https://api.github.com/users/ThomasdOtreppe/followers","following_url":"https://api.github.com/users/ThomasdOtreppe/following{/other_user}","gists_url":"https://api.github.com/users/ThomasdOtreppe/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasdOtreppe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasdOtreppe/subscriptions","organizations_url":"https://api.github.com/users/ThomasdOtreppe/orgs","repos_url":"https://api.github.com/users/ThomasdOtreppe/repos","events_url":"https://api.github.com/users/ThomasdOtreppe/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasdOtreppe/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T17:56:32Z","updated_at":"2015-12-08T17:56:32Z","author_association":"NONE","body":"@jasontedor I had no idea. That should be documented on the troubleshooting page.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162967903","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-162967903","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":162967903,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mjk2NzkwMw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T18:19:56Z","updated_at":"2015-12-08T19:49:14Z","author_association":"MEMBER","body":"> Just tested a brand new install of ElasticSearch (2.1) on Ubuntu 14.04 and then allocated more memory than the system had and when I restarted it (using service elasticsearch restart), it told me it started but didn't start and didn't log anything.\n\nThe key to understanding the problem here is to understand `systemd` logging.\n\nI built an Ubuntu VM, installed openjdk-7-jdk, and Elasticsearch 1.7.3 from the Elastic repository. I started Elasticsearch with a heap configuration that would force the JVM to die with a failure to allocate. I reproduced your issue that no log messages are produced on the console (however, as mentioned, there is a JVM error log in `/tmp`).\n\nNow, let's check the `systemd.exec` configuration in [/usr/lib/systemd/system/elasticsearch.service](https://github.com/elastic/elasticsearch/blob/6f996e9e26ae05440aa8d374d5cedcc3752ebfec/distribution/src/main/packaging/systemd/elasticsearch.service#L29-L30) and focus on these lines:\n\n```\n# Connects standard output to /dev/null\nStandardOutput=null\n```\n\nYou can change this to `journal` as in\n\n```\n# Connects standard output to /dev/null\nStandardOutput=journal\n```\n\nthen reload the daemon\n\n```\n# /bin/systemctl daemon-reload\n```\n\nand start Elasticsearch (again forcing it to die):\n\n```\n# /bin/systemctl start elasticsearch.service\n```\n\nand finally check the journal:\n\n```\n# journalctl\n```\n\ngives\n\n```\nDec 08 18:06:38 vagrant-ubuntu-vivid-64 elasticsearch[16129]: OpenJDK 64-Bit Server VM warning: INFO: os::commit_memory(0x00000006fad30000, 4207738880, 0) failed; error='Cannot allocate memory' (errno=12)\nDec 08 18:06:38 vagrant-ubuntu-vivid-64 elasticsearch[16129]: #\nDec 08 18:06:38 vagrant-ubuntu-vivid-64 elasticsearch[16129]: # There is insufficient memory for the Java Runtime Environment to continue.\nDec 08 18:06:38 vagrant-ubuntu-vivid-64 elasticsearch[16129]: # Native memory allocation (malloc) failed to allocate 4207738880 bytes for committing reserved memory.\nDec 08 18:06:38 vagrant-ubuntu-vivid-64 elasticsearch[16129]: # An error report file with more information is saved as:\nDec 08 18:06:38 vagrant-ubuntu-vivid-64 elasticsearch[16129]: # /tmp/hs_err_pid16129.log\n```\n\nMake sure that you have the correct permissions when you use `journalctl`.\n\nCheck the man pages for `systemd.exec`, `sytstemd,journald`, and `journalctl` for additional configuration options.\n\nAnd I do not think that this should be the default lest we spam the journal with Elasticsearch logs during normal operation. But feel free to configure as you see fit.\n\n> Could you please reopen the ticket?\n\nWith the above, I do not think that there is an issue here.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162972285","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-162972285","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":162972285,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mjk3MjI4NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T18:32:20Z","updated_at":"2015-12-08T18:32:20Z","author_association":"MEMBER","body":"> Unless there is a serious troubleshooting page that covers such issues (this one doesn't), then there is a need for such option.\n\nYou can configure this as you desire with the `systemd` configuration.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162988491","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-162988491","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":162988491,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mjk4ODQ5MQ==","user":{"login":"ThomasdOtreppe","id":7316682,"node_id":"MDQ6VXNlcjczMTY2ODI=","avatar_url":"https://avatars0.githubusercontent.com/u/7316682?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasdOtreppe","html_url":"https://github.com/ThomasdOtreppe","followers_url":"https://api.github.com/users/ThomasdOtreppe/followers","following_url":"https://api.github.com/users/ThomasdOtreppe/following{/other_user}","gists_url":"https://api.github.com/users/ThomasdOtreppe/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasdOtreppe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasdOtreppe/subscriptions","organizations_url":"https://api.github.com/users/ThomasdOtreppe/orgs","repos_url":"https://api.github.com/users/ThomasdOtreppe/repos","events_url":"https://api.github.com/users/ThomasdOtreppe/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasdOtreppe/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T19:24:27Z","updated_at":"2015-12-08T19:24:27Z","author_association":"NONE","body":"It would be nice to put all that in the documentation since it doesn't seem that a lot of people know that (from what you can see in the forum post, nobody ever mentioned any of it). I developed in Java a while back and I'm fairly good with Linux but I didn't know the things you mentioned, @jasontedor \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/272030921","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-272030921","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":272030921,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjAzMDkyMQ==","user":{"login":"Oliboy50","id":2571084,"node_id":"MDQ6VXNlcjI1NzEwODQ=","avatar_url":"https://avatars0.githubusercontent.com/u/2571084?v=4","gravatar_id":"","url":"https://api.github.com/users/Oliboy50","html_url":"https://github.com/Oliboy50","followers_url":"https://api.github.com/users/Oliboy50/followers","following_url":"https://api.github.com/users/Oliboy50/following{/other_user}","gists_url":"https://api.github.com/users/Oliboy50/gists{/gist_id}","starred_url":"https://api.github.com/users/Oliboy50/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Oliboy50/subscriptions","organizations_url":"https://api.github.com/users/Oliboy50/orgs","repos_url":"https://api.github.com/users/Oliboy50/repos","events_url":"https://api.github.com/users/Oliboy50/events{/privacy}","received_events_url":"https://api.github.com/users/Oliboy50/received_events","type":"User","site_admin":false},"created_at":"2017-01-11T23:38:31Z","updated_at":"2017-01-11T23:38:31Z","author_association":"NONE","body":"same error, it works just fine with default params on ES 1.x and 2.x, but when I try to start ES 5.1.1, it \r\nfails with:\r\n```\r\nJava HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(0x000000008a660000, 1973026816, 0) failed; error='Cannot allocate memory' (errno=12)\r\n```\r\n\r\nI'm not a Java developer at all, so if someone could explain how to decrease the memory required to run ES 5.x. It would be so nice :)\r\n\r\nNote: I just want to use ES 5.x in my development environment. Don't need to run a huge cluster :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/272054329","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-272054329","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":272054329,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjA1NDMyOQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-01-12T01:58:35Z","updated_at":"2017-01-12T01:58:35Z","author_association":"MEMBER","body":"The default heap size is 2g. If you need to decrease this, edit the `jvm.options` file. The [docs](https://www.elastic.co/guide/en/elasticsearch/reference/5.1/heap-size.html) explain this in more detail.\r\n\r\nThere are two main reasons that you see a difference between 1.x/2.x and 5.x:\r\n - 1.x and 2.x defaulted to a starting heap size of 256m and a max heap size of 1g while 5.x defaults to a starting and max heap size of 2g\r\n - Elasticsearch 5.x touches all pages of the heap at startup forcing those pages to be allocated from the OS\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/272283286","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-272283286","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":272283286,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjI4MzI4Ng==","user":{"login":"Oliboy50","id":2571084,"node_id":"MDQ6VXNlcjI1NzEwODQ=","avatar_url":"https://avatars0.githubusercontent.com/u/2571084?v=4","gravatar_id":"","url":"https://api.github.com/users/Oliboy50","html_url":"https://github.com/Oliboy50","followers_url":"https://api.github.com/users/Oliboy50/followers","following_url":"https://api.github.com/users/Oliboy50/following{/other_user}","gists_url":"https://api.github.com/users/Oliboy50/gists{/gist_id}","starred_url":"https://api.github.com/users/Oliboy50/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Oliboy50/subscriptions","organizations_url":"https://api.github.com/users/Oliboy50/orgs","repos_url":"https://api.github.com/users/Oliboy50/repos","events_url":"https://api.github.com/users/Oliboy50/events{/privacy}","received_events_url":"https://api.github.com/users/Oliboy50/received_events","type":"User","site_admin":false},"created_at":"2017-01-12T21:05:48Z","updated_at":"2017-01-12T21:05:48Z","author_association":"NONE","body":"@jasontedor thanks\r\nI reduced to `-Xms1g` and `-Xmx1g` (instead of 2g for both) and it works just as before 👍 ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/294073081","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-294073081","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":294073081,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDA3MzA4MQ==","user":{"login":"surajr","id":2534110,"node_id":"MDQ6VXNlcjI1MzQxMTA=","avatar_url":"https://avatars0.githubusercontent.com/u/2534110?v=4","gravatar_id":"","url":"https://api.github.com/users/surajr","html_url":"https://github.com/surajr","followers_url":"https://api.github.com/users/surajr/followers","following_url":"https://api.github.com/users/surajr/following{/other_user}","gists_url":"https://api.github.com/users/surajr/gists{/gist_id}","starred_url":"https://api.github.com/users/surajr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surajr/subscriptions","organizations_url":"https://api.github.com/users/surajr/orgs","repos_url":"https://api.github.com/users/surajr/repos","events_url":"https://api.github.com/users/surajr/events{/privacy}","received_events_url":"https://api.github.com/users/surajr/received_events","type":"User","site_admin":false},"created_at":"2017-04-14T02:49:41Z","updated_at":"2017-04-14T02:49:41Z","author_association":"NONE","body":"Even I reduced to -Xms1g and -Xmx1g and it works just as before","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/319890167","html_url":"https://github.com/elastic/elasticsearch/issues/15315#issuecomment-319890167","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15315","id":319890167,"node_id":"MDEyOklzc3VlQ29tbWVudDMxOTg5MDE2Nw==","user":{"login":"rkm-ravi94","id":24428452,"node_id":"MDQ6VXNlcjI0NDI4NDUy","avatar_url":"https://avatars0.githubusercontent.com/u/24428452?v=4","gravatar_id":"","url":"https://api.github.com/users/rkm-ravi94","html_url":"https://github.com/rkm-ravi94","followers_url":"https://api.github.com/users/rkm-ravi94/followers","following_url":"https://api.github.com/users/rkm-ravi94/following{/other_user}","gists_url":"https://api.github.com/users/rkm-ravi94/gists{/gist_id}","starred_url":"https://api.github.com/users/rkm-ravi94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rkm-ravi94/subscriptions","organizations_url":"https://api.github.com/users/rkm-ravi94/orgs","repos_url":"https://api.github.com/users/rkm-ravi94/repos","events_url":"https://api.github.com/users/rkm-ravi94/events{/privacy}","received_events_url":"https://api.github.com/users/rkm-ravi94/received_events","type":"User","site_admin":false},"created_at":"2017-08-03T07:23:31Z","updated_at":"2017-08-03T07:23:31Z","author_association":"NONE","body":"Seems like you are using virtual machine with less than 2GB of RAM, but elasticsearch is trying to start with 2 GB of RAM (default for Elasticsearch version 5.X, mentioned in jvmOptions)\r\n\r\nEither give more memory to your VM, or change Elasticsearch JVM settings in jvmOptions /etc/elasticsearch/jvm.options and lower the values of the following parameters: -Xms512m -Xmx1g\r\nand it will work (if your VM has less than 1gb of ram then provide -Xmx512m only)","performed_via_github_app":null}]