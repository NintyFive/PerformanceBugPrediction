[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215418034","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215418034","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215418034,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTQxODAzNA==","user":{"login":"uschindler","id":1005388,"node_id":"MDQ6VXNlcjEwMDUzODg=","avatar_url":"https://avatars2.githubusercontent.com/u/1005388?v=4","gravatar_id":"","url":"https://api.github.com/users/uschindler","html_url":"https://github.com/uschindler","followers_url":"https://api.github.com/users/uschindler/followers","following_url":"https://api.github.com/users/uschindler/following{/other_user}","gists_url":"https://api.github.com/users/uschindler/gists{/gist_id}","starred_url":"https://api.github.com/users/uschindler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uschindler/subscriptions","organizations_url":"https://api.github.com/users/uschindler/orgs","repos_url":"https://api.github.com/users/uschindler/repos","events_url":"https://api.github.com/users/uschindler/events{/privacy}","received_events_url":"https://api.github.com/users/uschindler/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T13:10:36Z","updated_at":"2016-04-28T13:10:36Z","author_association":"CONTRIBUTOR","body":"I think the bug is plain simple:\n- You do not pass -source/-target. This causes the source code compiled with Java 9 's javac emitting Java 9 bytecode that refers to Java 9's StringConcatFactory. In fact the code won't run with Java 8\n- Forbidden fails because it runs in Gradle's JVM. In fact it is right: The code won't run on Java 8 at all.\n\nSo I think the compiler is wrong: It should also pass source/target 8 to make javac only use Java 8 source format and produce Java 8 class files.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215418669","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215418669","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215418669,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTQxODY2OQ==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T13:13:12Z","updated_at":"2016-04-28T13:13:12Z","author_association":"CONTRIBUTOR","body":"Yeah, if i just `grep` for StringConcatFactory, it matches tons of class files. So either its not set correctly in the build, or its being ignored.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215452913","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215452913","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215452913,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTQ1MjkxMw==","user":{"login":"uschindler","id":1005388,"node_id":"MDQ6VXNlcjEwMDUzODg=","avatar_url":"https://avatars2.githubusercontent.com/u/1005388?v=4","gravatar_id":"","url":"https://api.github.com/users/uschindler","html_url":"https://github.com/uschindler","followers_url":"https://api.github.com/users/uschindler/followers","following_url":"https://api.github.com/users/uschindler/following{/other_user}","gists_url":"https://api.github.com/users/uschindler/gists{/gist_id}","starred_url":"https://api.github.com/users/uschindler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uschindler/subscriptions","organizations_url":"https://api.github.com/users/uschindler/orgs","repos_url":"https://api.github.com/users/uschindler/repos","events_url":"https://api.github.com/users/uschindler/events{/privacy}","received_events_url":"https://api.github.com/users/uschindler/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T14:56:32Z","updated_at":"2016-04-28T14:56:32Z","author_association":"CONTRIBUTOR","body":"It is quite clear: I was not aware that the Groovy build runs under JDK 8 and just invokes the compiler of Java 9. If the java 9 compiler is not configured to compile class files for Java 8 (target is 1.8), it will use StringConcatFactory.\n\n## As the Groovy build runs under jdk 8 and loads forbiddenApis in its own JVM, it cannot find this class. In fact, it found the bug in the class output by javac, which produces wrong class files.\n\nUwe Schindler\nH.-H.-Meier-Allee 63, 28213 Bremen\nhttp://www.thetaphi.de\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215454556","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215454556","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215454556,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTQ1NDU1Ng==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T15:01:38Z","updated_at":"2016-04-28T15:01:38Z","author_association":"MEMBER","body":"We do actually tell gradle what the target and source compatibility are. However, gradle has a check that breaks since when compiling with java 9, gradle is running under java 8, and javac is running with java 9.  This check needs to be simple, no condition on the trying to be \"smart\" and omit the compatibility arg:\n\n```\nif (targetCompatibility != null && !JavaVersion.current().equals(JavaVersion.toVersion(targetCompatibility))) {\n            args.add(\"-target\");\n            args.add(targetCompatibility);\n        }\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215488628","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215488628","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215488628,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTQ4ODYyOA==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T16:38:40Z","updated_at":"2016-04-28T16:38:40Z","author_association":"CONTRIBUTOR","body":"I'm reopening because things still don't work. I see this now:\n\n```\n=======================================\nElasticsearch Build Hamster says Hello!\n=======================================\n  Gradle Version        : 2.12\n  OS Info               : Linux 4.2.0-30-generic (amd64)\n  JDK Version (gradle)  : Oracle Corporation 1.8.0_45 [Java HotSpot(TM) 64-Bit Server VM 25.45-b02]\n  JAVA_HOME (gradle)    : /usr/local/jdk1.8.0_45\n  JDK Version (compile) : Oracle Corporation 9-ea [Java HotSpot(TM) 64-Bit Server VM 9-ea+115]\n  JAVA_HOME (compile)   : /home/rmuir/Downloads/jdk-9\n:core:compileJava\nwarning: [options] bootstrap class path not set in conjunction with -source 1.8\nerror: warnings found and -Werror specified\n1 error\n1 warning\n:core:compileJava FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':core:compileJava'.\n> Compilation failed with exit code 1; see the compiler error output for details.\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nTotal time: 16.944 secs\n```\n\nAdditionally, we still need to deal with the compiler error in the test class at least too.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215506793","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215506793","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215506793,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTUwNjc5Mw==","user":{"login":"uschindler","id":1005388,"node_id":"MDQ6VXNlcjEwMDUzODg=","avatar_url":"https://avatars2.githubusercontent.com/u/1005388?v=4","gravatar_id":"","url":"https://api.github.com/users/uschindler","html_url":"https://github.com/uschindler","followers_url":"https://api.github.com/users/uschindler/followers","following_url":"https://api.github.com/users/uschindler/following{/other_user}","gists_url":"https://api.github.com/users/uschindler/gists{/gist_id}","starred_url":"https://api.github.com/users/uschindler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uschindler/subscriptions","organizations_url":"https://api.github.com/users/uschindler/orgs","repos_url":"https://api.github.com/users/uschindler/repos","events_url":"https://api.github.com/users/uschindler/events{/privacy}","received_events_url":"https://api.github.com/users/uschindler/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T17:43:23Z","updated_at":"2016-04-28T17:43:23Z","author_association":"CONTRIBUTOR","body":"Can we please open a bug @ Gradle. This is total BULLSHIT! Why should it be smart at all? There is no reason! If one configures version \"1.8\" it should just pass it down to javac no matter which version it is. The good thing is that javac also complains if it is too old for the version you configured.\n\nTotal sonsense. The more I look into Gradle, the more it annoys me.\n\nJust be safe and always pass -source and -target as configured! PERIOD.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215509594","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215509594","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215509594,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTUwOTU5NA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T17:53:27Z","updated_at":"2016-04-28T17:53:27Z","author_association":"MEMBER","body":"Yes, I plan to open a bug (and fix) with gradle.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215510495","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215510495","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215510495,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTUxMDQ5NQ==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T17:56:39Z","updated_at":"2016-04-28T17:56:39Z","author_association":"CONTRIBUTOR","body":"to be fair, i only tested with Gradle 2.12, but 2.13 is now released. the last time i had issues with java 9 stuff the newer releases seemed to have some fixes, so we may want to see if it happens on 2.13.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215511797","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215511797","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215511797,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTUxMTc5Nw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T18:01:14Z","updated_at":"2016-04-28T18:01:14Z","author_association":"MEMBER","body":">  so we may want to see if it happens on 2.13\n\nI have gradle checked out, the code i pasted is from tip of master. So the problem still exists. :/\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215515774","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215515774","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215515774,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTUxNTc3NA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T18:15:02Z","updated_at":"2016-04-28T18:15:02Z","author_association":"MEMBER","body":"I created a gradle discuss thread here (they don't want users creating jiras anymore I guess):\nhttps://discuss.gradle.org/t/source-and-target-are-only-passed-to-javac-when-java-version-is-different-than-gradle-java-version/17235\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215520121","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215520121","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215520121,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTUyMDEyMQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T18:29:44Z","updated_at":"2016-04-28T18:29:44Z","author_association":"MEMBER","body":"And I opened a PR: gradle/gradle#627\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215544820","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215544820","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215544820,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTU0NDgyMA==","user":{"login":"uschindler","id":1005388,"node_id":"MDQ6VXNlcjEwMDUzODg=","avatar_url":"https://avatars2.githubusercontent.com/u/1005388?v=4","gravatar_id":"","url":"https://api.github.com/users/uschindler","html_url":"https://github.com/uschindler","followers_url":"https://api.github.com/users/uschindler/followers","following_url":"https://api.github.com/users/uschindler/following{/other_user}","gists_url":"https://api.github.com/users/uschindler/gists{/gist_id}","starred_url":"https://api.github.com/users/uschindler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uschindler/subscriptions","organizations_url":"https://api.github.com/users/uschindler/orgs","repos_url":"https://api.github.com/users/uschindler/repos","events_url":"https://api.github.com/users/uschindler/events{/privacy}","received_events_url":"https://api.github.com/users/uschindler/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T20:00:46Z","updated_at":"2016-04-28T20:00:46Z","author_association":"CONTRIBUTOR","body":"Other thing: Does anybody know why the test code fails to compile with Java 9? Robert may say: \"this is too complicated code\" but actually this seems to be a javac bug? So report this to http://bugs.java.com/ !\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215557629","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215557629","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215557629,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTU1NzYyOQ==","user":{"login":"uschindler","id":1005388,"node_id":"MDQ6VXNlcjEwMDUzODg=","avatar_url":"https://avatars2.githubusercontent.com/u/1005388?v=4","gravatar_id":"","url":"https://api.github.com/users/uschindler","html_url":"https://github.com/uschindler","followers_url":"https://api.github.com/users/uschindler/followers","following_url":"https://api.github.com/users/uschindler/following{/other_user}","gists_url":"https://api.github.com/users/uschindler/gists{/gist_id}","starred_url":"https://api.github.com/users/uschindler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uschindler/subscriptions","organizations_url":"https://api.github.com/users/uschindler/orgs","repos_url":"https://api.github.com/users/uschindler/repos","events_url":"https://api.github.com/users/uschindler/events{/privacy}","received_events_url":"https://api.github.com/users/uschindler/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T20:48:08Z","updated_at":"2016-04-28T20:48:08Z","author_association":"CONTRIBUTOR","body":"@rmuir Isn't the new one just a duplicate of #13448?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215590826","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215590826","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215590826,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTU5MDgyNg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T23:21:17Z","updated_at":"2016-04-28T23:21:17Z","author_association":"MEMBER","body":"I was not able to create a minimal reproduction for the test compile failure. I will switch it to assertEquals as @rmuir suggested.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215822225","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-215822225","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":215822225,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTgyMjIyNQ==","user":{"login":"abhi8642","id":13763165,"node_id":"MDQ6VXNlcjEzNzYzMTY1","avatar_url":"https://avatars3.githubusercontent.com/u/13763165?v=4","gravatar_id":"","url":"https://api.github.com/users/abhi8642","html_url":"https://github.com/abhi8642","followers_url":"https://api.github.com/users/abhi8642/followers","following_url":"https://api.github.com/users/abhi8642/following{/other_user}","gists_url":"https://api.github.com/users/abhi8642/gists{/gist_id}","starred_url":"https://api.github.com/users/abhi8642/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhi8642/subscriptions","organizations_url":"https://api.github.com/users/abhi8642/orgs","repos_url":"https://api.github.com/users/abhi8642/repos","events_url":"https://api.github.com/users/abhi8642/events{/privacy}","received_events_url":"https://api.github.com/users/abhi8642/received_events","type":"User","site_admin":false},"created_at":"2016-04-29T17:25:03Z","updated_at":"2016-04-29T17:25:03Z","author_association":"NONE","body":"try clean and build option instead of build.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/216044353","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-216044353","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":216044353,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNjA0NDM1Mw==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-05-01T14:16:52Z","updated_at":"2016-05-01T14:16:52Z","author_association":"CONTRIBUTOR","body":"> Other thing: Does anybody know why the test code fails to compile with Java 9? Robert may say: \"this is too complicated code\" but actually this seems to be a javac bug? So report this to http://bugs.java.com/ !\n\nI was hoping a couple javac bugs would put a dent in hamcrest matcher usage :)\n\nIn all seriousness, what causes things like `assertThat(x, equalTo(128))` and `assertTrue(\"x should be equal to 128 but isn't\", x.equals(128))`. I know in the latter case, some features of the intellij IDE were responsible. almost as bad as the eclipse auto-generated \"try/catch\". \n\nMaybe we should ban this equalTo() method? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/216051949","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-216051949","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":216051949,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNjA1MTk0OQ==","user":{"login":"uschindler","id":1005388,"node_id":"MDQ6VXNlcjEwMDUzODg=","avatar_url":"https://avatars2.githubusercontent.com/u/1005388?v=4","gravatar_id":"","url":"https://api.github.com/users/uschindler","html_url":"https://github.com/uschindler","followers_url":"https://api.github.com/users/uschindler/followers","following_url":"https://api.github.com/users/uschindler/following{/other_user}","gists_url":"https://api.github.com/users/uschindler/gists{/gist_id}","starred_url":"https://api.github.com/users/uschindler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uschindler/subscriptions","organizations_url":"https://api.github.com/users/uschindler/orgs","repos_url":"https://api.github.com/users/uschindler/repos","events_url":"https://api.github.com/users/uschindler/events{/privacy}","received_events_url":"https://api.github.com/users/uschindler/received_events","type":"User","site_admin":false},"created_at":"2016-05-01T16:02:47Z","updated_at":"2016-05-01T16:02:47Z","author_association":"CONTRIBUTOR","body":"I agree, the hamcrest  stuff is only useful sometimes for more complicated matchers, but just comparing for equals should be done with assetEquals and not hamcrest or assetTrue.\n\nI just said that we should report this bug to Oracle, because it could affect other code, too. It is clearly a bug if it fails to compile. Similar to the 8u20 problems with final vars in lambdas.\n\nUnfortunately Ryan did not find a reproducer on isolation :(\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/216959465","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-216959465","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":216959465,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNjk1OTQ2NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-05-04T18:35:28Z","updated_at":"2016-05-04T18:35:28Z","author_association":"MEMBER","body":"> Maybe we should ban this equalTo() method?\n\nI think that `equalTo` is more readable than `assertEquals`. I also find it to be more flexible (e.g., `assertThat(s, anyOf(equalTo(\"x\"), equalTo(\"y\"))` instead of `assertTrue(s != null && (s.equals(\"x\") || s.equals(\"y\")))` because the latter gives a useless assertion message).\n\nSince this is a subjective assessment, I think that banning `equalTo` is a bridge too far.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/217578419","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-217578419","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":217578419,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNzU3ODQxOQ==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-05-06T22:25:12Z","updated_at":"2016-05-06T22:25:12Z","author_association":"CONTRIBUTOR","body":"> I also find it to be more flexible\n\nThis very flexibility is what i hate. Why make complex assertions like that? Keep it simple.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/358366061","html_url":"https://github.com/elastic/elasticsearch/issues/18039#issuecomment-358366061","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18039","id":358366061,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODM2NjA2MQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-01-17T16:46:19Z","updated_at":"2018-01-17T16:46:19Z","author_association":"MEMBER","body":"The build succeeds on JDK 9 now; in fact, we require compilation with JDK 9 since #28071.","performed_via_github_app":null}]