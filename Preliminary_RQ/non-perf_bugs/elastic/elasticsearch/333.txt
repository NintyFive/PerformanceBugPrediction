{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/333","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/333/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/333/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/333/events","html_url":"https://github.com/elastic/elasticsearch/issues/333","id":287474,"node_id":"MDU6SXNzdWUyODc0NzQ=","number":333,"title":"Gateway: Refactor gateway storage system to remove possible corruption","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"labels":[{"id":33660,"node_id":"MDU6TGFiZWwzMzY2MA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebreaking","name":">breaking","color":"d93f0b","default":false,"description":null},{"id":23172,"node_id":"MDU6TGFiZWwyMzE3Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Efeature","name":">feature","color":"006b75","default":false,"description":null},{"id":41149,"node_id":"MDU6TGFiZWw0MTE0OQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.10.0","name":"v0.10.0","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2010-08-23T19:12:24Z","updated_at":"2010-08-23T19:13:55Z","closed_at":"2010-08-23T19:13:55Z","author_association":"MEMBER","active_lock_reason":null,"body":"In general, the new implementation works (in spirit) in the same manner git works. Each snapshot is a commit point, that stores files in the gateway into an auto generated name, and finally, a commit point is written with the \"directory\" which maps between this pseudo name to physical name, and the size. The new design allows for more resiliency when it comes to corruption. It also allows for exciting future features like saving a commit point and restoring from it, or automatically create a commit point each day for the last 5 days and be able to rollback to a specific commit point.\n","closed_by":null,"performed_via_github_app":null}