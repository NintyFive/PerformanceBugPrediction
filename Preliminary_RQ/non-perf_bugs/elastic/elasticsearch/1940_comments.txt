[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/5650261","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-5650261","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":5650261,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTAyNjE=","user":{"login":"mjgp2","id":888462,"node_id":"MDQ6VXNlcjg4ODQ2Mg==","avatar_url":"https://avatars0.githubusercontent.com/u/888462?v=4","gravatar_id":"","url":"https://api.github.com/users/mjgp2","html_url":"https://github.com/mjgp2","followers_url":"https://api.github.com/users/mjgp2/followers","following_url":"https://api.github.com/users/mjgp2/following{/other_user}","gists_url":"https://api.github.com/users/mjgp2/gists{/gist_id}","starred_url":"https://api.github.com/users/mjgp2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjgp2/subscriptions","organizations_url":"https://api.github.com/users/mjgp2/orgs","repos_url":"https://api.github.com/users/mjgp2/repos","events_url":"https://api.github.com/users/mjgp2/events{/privacy}","received_events_url":"https://api.github.com/users/mjgp2/received_events","type":"User","site_admin":false},"created_at":"2012-05-11T13:18:02Z","updated_at":"2012-05-11T13:18:02Z","author_association":"NONE","body":"FYI This seems to be Netty related: setting network.tcp.blocking: true causes the CPU usage to drop back down to zero.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/5666445","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-5666445","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":5666445,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjY0NDU=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-05-12T08:42:25Z","updated_at":"2012-05-12T08:42:25Z","author_association":"MEMBER","body":"Can you do a thread dump when it happening? Is it something you can easily recreate?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6079395","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6079395","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6079395,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzkzOTU=","user":{"login":"pierrre","id":131535,"node_id":"MDQ6VXNlcjEzMTUzNQ==","avatar_url":"https://avatars3.githubusercontent.com/u/131535?v=4","gravatar_id":"","url":"https://api.github.com/users/pierrre","html_url":"https://github.com/pierrre","followers_url":"https://api.github.com/users/pierrre/followers","following_url":"https://api.github.com/users/pierrre/following{/other_user}","gists_url":"https://api.github.com/users/pierrre/gists{/gist_id}","starred_url":"https://api.github.com/users/pierrre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pierrre/subscriptions","organizations_url":"https://api.github.com/users/pierrre/orgs","repos_url":"https://api.github.com/users/pierrre/repos","events_url":"https://api.github.com/users/pierrre/events{/privacy}","received_events_url":"https://api.github.com/users/pierrre/received_events","type":"User","site_admin":false},"created_at":"2012-06-02T17:46:47Z","updated_at":"2012-06-02T17:50:20Z","author_association":"NONE","body":"Version: 0.19.4\nJDK: 7\nOS: ubuntu 12.04\n(it's a virtual machine, VirtualBox)\n\nSame problem here:\n- CPU usage around 20% when ES is idle\n- CPU usage under 3% with network.tcp.blocking: true\n\nI use the default configuration provided with the .deb package\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6085484","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6085484","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6085484,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODU0ODQ=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-06-03T13:27:18Z","updated_at":"2012-06-03T13:27:18Z","author_association":"MEMBER","body":"Is there a chance for a thread dump (use jstack) and gist it? Several of those (3-4) done and then gisted would help trying to track it down where in the netty layer there is the problem.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6146123","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6146123","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6146123,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNDYxMjM=","user":{"login":"pierrre","id":131535,"node_id":"MDQ6VXNlcjEzMTUzNQ==","avatar_url":"https://avatars3.githubusercontent.com/u/131535?v=4","gravatar_id":"","url":"https://api.github.com/users/pierrre","html_url":"https://github.com/pierrre","followers_url":"https://api.github.com/users/pierrre/followers","following_url":"https://api.github.com/users/pierrre/following{/other_user}","gists_url":"https://api.github.com/users/pierrre/gists{/gist_id}","starred_url":"https://api.github.com/users/pierrre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pierrre/subscriptions","organizations_url":"https://api.github.com/users/pierrre/orgs","repos_url":"https://api.github.com/users/pierrre/repos","events_url":"https://api.github.com/users/pierrre/events{/privacy}","received_events_url":"https://api.github.com/users/pierrre/received_events","type":"User","site_admin":false},"created_at":"2012-06-06T09:12:02Z","updated_at":"2012-06-06T09:12:14Z","author_association":"NONE","body":"I used jstack -F -l [pid]\nIs it ok?\n\nhttps://gist.github.com/2880846\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6175729","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6175729","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6175729,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzU3Mjk=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-06-07T13:29:06Z","updated_at":"2012-06-07T13:29:06Z","author_association":"MEMBER","body":"@pierrre which jdk version is it exactly (version number)? can you see if it happens with jdk 1.6?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6176163","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6176163","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6176163,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzYxNjM=","user":{"login":"pierrre","id":131535,"node_id":"MDQ6VXNlcjEzMTUzNQ==","avatar_url":"https://avatars3.githubusercontent.com/u/131535?v=4","gravatar_id":"","url":"https://api.github.com/users/pierrre","html_url":"https://github.com/pierrre","followers_url":"https://api.github.com/users/pierrre/followers","following_url":"https://api.github.com/users/pierrre/following{/other_user}","gists_url":"https://api.github.com/users/pierrre/gists{/gist_id}","starred_url":"https://api.github.com/users/pierrre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pierrre/subscriptions","organizations_url":"https://api.github.com/users/pierrre/orgs","repos_url":"https://api.github.com/users/pierrre/repos","events_url":"https://api.github.com/users/pierrre/events{/privacy}","received_events_url":"https://api.github.com/users/pierrre/received_events","type":"User","site_admin":false},"created_at":"2012-06-07T13:49:16Z","updated_at":"2012-06-07T13:49:16Z","author_association":"NONE","body":"java version \"1.7.0_04\"\nJava(TM) SE Runtime Environment (build 1.7.0_04-b20)\nJava HotSpot(TM) 64-Bit Server VM (build 23.0-b21, mixed mode)\n\nI'm currently using oracle-java7-installer package from ppa:webupd8team/java\nDo you have another (good) ppa repository for Java 6?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6198819","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6198819","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6198819,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTg4MTk=","user":{"login":"ebuildy","id":1219817,"node_id":"MDQ6VXNlcjEyMTk4MTc=","avatar_url":"https://avatars0.githubusercontent.com/u/1219817?v=4","gravatar_id":"","url":"https://api.github.com/users/ebuildy","html_url":"https://github.com/ebuildy","followers_url":"https://api.github.com/users/ebuildy/followers","following_url":"https://api.github.com/users/ebuildy/following{/other_user}","gists_url":"https://api.github.com/users/ebuildy/gists{/gist_id}","starred_url":"https://api.github.com/users/ebuildy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebuildy/subscriptions","organizations_url":"https://api.github.com/users/ebuildy/orgs","repos_url":"https://api.github.com/users/ebuildy/repos","events_url":"https://api.github.com/users/ebuildy/events{/privacy}","received_events_url":"https://api.github.com/users/ebuildy/received_events","type":"User","site_admin":false},"created_at":"2012-06-08T10:29:01Z","updated_at":"2012-06-08T10:29:01Z","author_association":"CONTRIBUTOR","body":"I have a similar problem, after trying to index 1 000 000 documents (in a dummy loop, only for test purpose), my ES is dead, stop/start doesnt work, the CPU is always to 100% ;-(\n\njava version \"1.6.0_18\"\nOpenJDK Runtime Environment (IcedTea6 1.8.13) (6b18-1.8.13-0+squeeze1)\nOpenJDK 64-Bit Server VM (build 14.0-b16, mixed mode)\n\nIs there some requirement about Java env. to run ES ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6219918","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6219918","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6219918,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTk5MTg=","user":{"login":"pierrre","id":131535,"node_id":"MDQ6VXNlcjEzMTUzNQ==","avatar_url":"https://avatars3.githubusercontent.com/u/131535?v=4","gravatar_id":"","url":"https://api.github.com/users/pierrre","html_url":"https://github.com/pierrre","followers_url":"https://api.github.com/users/pierrre/followers","following_url":"https://api.github.com/users/pierrre/following{/other_user}","gists_url":"https://api.github.com/users/pierrre/gists{/gist_id}","starred_url":"https://api.github.com/users/pierrre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pierrre/subscriptions","organizations_url":"https://api.github.com/users/pierrre/orgs","repos_url":"https://api.github.com/users/pierrre/repos","events_url":"https://api.github.com/users/pierrre/events{/privacy}","received_events_url":"https://api.github.com/users/pierrre/received_events","type":"User","site_admin":false},"created_at":"2012-06-09T13:52:53Z","updated_at":"2012-06-09T13:52:53Z","author_association":"NONE","body":"Sorry, I can't install Java6 from ppa:flexiondotorg/java\nMissing dependencies :/\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6220308","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6220308","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6220308,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMjAzMDg=","user":{"login":"michaelklishin","id":1090,"node_id":"MDQ6VXNlcjEwOTA=","avatar_url":"https://avatars3.githubusercontent.com/u/1090?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelklishin","html_url":"https://github.com/michaelklishin","followers_url":"https://api.github.com/users/michaelklishin/followers","following_url":"https://api.github.com/users/michaelklishin/following{/other_user}","gists_url":"https://api.github.com/users/michaelklishin/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelklishin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelklishin/subscriptions","organizations_url":"https://api.github.com/users/michaelklishin/orgs","repos_url":"https://api.github.com/users/michaelklishin/repos","events_url":"https://api.github.com/users/michaelklishin/events{/privacy}","received_events_url":"https://api.github.com/users/michaelklishin/received_events","type":"User","site_admin":false},"created_at":"2012-06-09T14:33:26Z","updated_at":"2012-06-09T14:33:26Z","author_association":"NONE","body":"@pierrre OpenJDK 6 is available from the [main ubuntu repository](http://packages.ubuntu.com/search?suite=default&section=all&arch=any&searchon=names&keywords=openjdk-6-jdk).\n\nI have been using OpenJDK 7 and Oracle JDK 7 with ES for a few months now, never had this issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6220982","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6220982","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6220982,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMjA5ODI=","user":{"login":"pierrre","id":131535,"node_id":"MDQ6VXNlcjEzMTUzNQ==","avatar_url":"https://avatars3.githubusercontent.com/u/131535?v=4","gravatar_id":"","url":"https://api.github.com/users/pierrre","html_url":"https://github.com/pierrre","followers_url":"https://api.github.com/users/pierrre/followers","following_url":"https://api.github.com/users/pierrre/following{/other_user}","gists_url":"https://api.github.com/users/pierrre/gists{/gist_id}","starred_url":"https://api.github.com/users/pierrre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pierrre/subscriptions","organizations_url":"https://api.github.com/users/pierrre/orgs","repos_url":"https://api.github.com/users/pierrre/repos","events_url":"https://api.github.com/users/pierrre/events{/privacy}","received_events_url":"https://api.github.com/users/pierrre/received_events","type":"User","site_admin":false},"created_at":"2012-06-09T15:56:14Z","updated_at":"2012-06-09T15:56:14Z","author_association":"NONE","body":"Ok, no problem with OpenJDK 6 & 7.\n\nThe High CPU usage only occurs with Oracle JDK 7 (but I can't test with Oracle JDK 6)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6221504","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6221504","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6221504,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMjE1MDQ=","user":{"login":"pierrre","id":131535,"node_id":"MDQ6VXNlcjEzMTUzNQ==","avatar_url":"https://avatars3.githubusercontent.com/u/131535?v=4","gravatar_id":"","url":"https://api.github.com/users/pierrre","html_url":"https://github.com/pierrre","followers_url":"https://api.github.com/users/pierrre/followers","following_url":"https://api.github.com/users/pierrre/following{/other_user}","gists_url":"https://api.github.com/users/pierrre/gists{/gist_id}","starred_url":"https://api.github.com/users/pierrre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pierrre/subscriptions","organizations_url":"https://api.github.com/users/pierrre/orgs","repos_url":"https://api.github.com/users/pierrre/repos","events_url":"https://api.github.com/users/pierrre/events{/privacy}","received_events_url":"https://api.github.com/users/pierrre/received_events","type":"User","site_admin":false},"created_at":"2012-06-09T16:44:27Z","updated_at":"2012-06-09T16:44:27Z","author_association":"NONE","body":"I indexed 8000000 documents, and now the cpu usage is around 200% (over 800%)\nI use Open JDK 7 with the default config\n\nJstack: https://gist.github.com/2901703\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6226508","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6226508","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6226508,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMjY1MDg=","user":{"login":"ebuildy","id":1219817,"node_id":"MDQ6VXNlcjEyMTk4MTc=","avatar_url":"https://avatars0.githubusercontent.com/u/1219817?v=4","gravatar_id":"","url":"https://api.github.com/users/ebuildy","html_url":"https://github.com/ebuildy","followers_url":"https://api.github.com/users/ebuildy/followers","following_url":"https://api.github.com/users/ebuildy/following{/other_user}","gists_url":"https://api.github.com/users/ebuildy/gists{/gist_id}","starred_url":"https://api.github.com/users/ebuildy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebuildy/subscriptions","organizations_url":"https://api.github.com/users/ebuildy/orgs","repos_url":"https://api.github.com/users/ebuildy/repos","events_url":"https://api.github.com/users/ebuildy/events{/privacy}","received_events_url":"https://api.github.com/users/ebuildy/received_events","type":"User","site_admin":false},"created_at":"2012-06-10T07:22:59Z","updated_at":"2012-06-10T07:22:59Z","author_association":"CONTRIBUTOR","body":"I think the problem occurs when we try to index to many documents in a loop (w/o sleep break)\n\nRestart ES, still huge CPU, is it possible to \"reset\" it ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6231830","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6231830","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6231830,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMzE4MzA=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-06-10T20:53:11Z","updated_at":"2012-06-10T20:53:11Z","author_association":"MEMBER","body":"What do you mean by reset it? it seems like its busy reading data, how do you index the data? Can you share the code?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6241925","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6241925","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6241925,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDE5MjU=","user":{"login":"pierrre","id":131535,"node_id":"MDQ6VXNlcjEzMTUzNQ==","avatar_url":"https://avatars3.githubusercontent.com/u/131535?v=4","gravatar_id":"","url":"https://api.github.com/users/pierrre","html_url":"https://github.com/pierrre","followers_url":"https://api.github.com/users/pierrre/followers","following_url":"https://api.github.com/users/pierrre/following{/other_user}","gists_url":"https://api.github.com/users/pierrre/gists{/gist_id}","starred_url":"https://api.github.com/users/pierrre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pierrre/subscriptions","organizations_url":"https://api.github.com/users/pierrre/orgs","repos_url":"https://api.github.com/users/pierrre/repos","events_url":"https://api.github.com/users/pierrre/events{/privacy}","received_events_url":"https://api.github.com/users/pierrre/received_events","type":"User","site_admin":false},"created_at":"2012-06-11T11:18:34Z","updated_at":"2012-06-11T11:18:43Z","author_association":"NONE","body":"There are 2 distincts problems:\n- CPU usage when idle, no indexed data, Oracle Java 7\n- Very High CPU usage when idle after a search, many indexed documents (8 million), all JVM\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6241972","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6241972","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6241972,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDE5NzI=","user":{"login":"pierrre","id":131535,"node_id":"MDQ6VXNlcjEzMTUzNQ==","avatar_url":"https://avatars3.githubusercontent.com/u/131535?v=4","gravatar_id":"","url":"https://api.github.com/users/pierrre","html_url":"https://github.com/pierrre","followers_url":"https://api.github.com/users/pierrre/followers","following_url":"https://api.github.com/users/pierrre/following{/other_user}","gists_url":"https://api.github.com/users/pierrre/gists{/gist_id}","starred_url":"https://api.github.com/users/pierrre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pierrre/subscriptions","organizations_url":"https://api.github.com/users/pierrre/orgs","repos_url":"https://api.github.com/users/pierrre/repos","events_url":"https://api.github.com/users/pierrre/events{/privacy}","received_events_url":"https://api.github.com/users/pierrre/received_events","type":"User","site_admin":false},"created_at":"2012-06-11T11:21:28Z","updated_at":"2012-06-11T11:22:31Z","author_association":"NONE","body":"My code: https://gist.github.com/2909640\nI run populate(), the search()\n\nAfter search(), the CPU usage is really high (around 200%)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6245659","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6245659","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6245659,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDU2NTk=","user":{"login":"ebuildy","id":1219817,"node_id":"MDQ6VXNlcjEyMTk4MTc=","avatar_url":"https://avatars0.githubusercontent.com/u/1219817?v=4","gravatar_id":"","url":"https://api.github.com/users/ebuildy","html_url":"https://github.com/ebuildy","followers_url":"https://api.github.com/users/ebuildy/followers","following_url":"https://api.github.com/users/ebuildy/following{/other_user}","gists_url":"https://api.github.com/users/ebuildy/gists{/gist_id}","starred_url":"https://api.github.com/users/ebuildy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebuildy/subscriptions","organizations_url":"https://api.github.com/users/ebuildy/orgs","repos_url":"https://api.github.com/users/ebuildy/repos","events_url":"https://api.github.com/users/ebuildy/events{/privacy}","received_events_url":"https://api.github.com/users/ebuildy/received_events","type":"User","site_admin":false},"created_at":"2012-06-11T14:24:35Z","updated_at":"2012-06-11T14:24:35Z","author_association":"CONTRIBUTOR","body":"By reset, I mean stop very long indexing process ...... here my code: http://pastebin.com/pnbG5Rdk , I am using a Php library (from https://github.com/nervetattoo/elasticsearch), the mongodb has 2 000 000 items (no long text, max 200 chars.)\n\nThanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6693554","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6693554","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6693554,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTM1NTQ=","user":{"login":"dosht","id":387573,"node_id":"MDQ6VXNlcjM4NzU3Mw==","avatar_url":"https://avatars2.githubusercontent.com/u/387573?v=4","gravatar_id":"","url":"https://api.github.com/users/dosht","html_url":"https://github.com/dosht","followers_url":"https://api.github.com/users/dosht/followers","following_url":"https://api.github.com/users/dosht/following{/other_user}","gists_url":"https://api.github.com/users/dosht/gists{/gist_id}","starred_url":"https://api.github.com/users/dosht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dosht/subscriptions","organizations_url":"https://api.github.com/users/dosht/orgs","repos_url":"https://api.github.com/users/dosht/repos","events_url":"https://api.github.com/users/dosht/events{/privacy}","received_events_url":"https://api.github.com/users/dosht/received_events","type":"User","site_admin":false},"created_at":"2012-07-01T13:43:34Z","updated_at":"2012-07-01T13:43:34Z","author_association":"NONE","body":"I have a similar problem. I have es on 2 ec2 nodes. I removed the data from the 2 nodes and the s3 and restart es but the problem remains. I also turned off the replication and the same happened.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6709308","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6709308","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6709308,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDkzMDg=","user":{"login":"ebuildy","id":1219817,"node_id":"MDQ6VXNlcjEyMTk4MTc=","avatar_url":"https://avatars0.githubusercontent.com/u/1219817?v=4","gravatar_id":"","url":"https://api.github.com/users/ebuildy","html_url":"https://github.com/ebuildy","followers_url":"https://api.github.com/users/ebuildy/followers","following_url":"https://api.github.com/users/ebuildy/following{/other_user}","gists_url":"https://api.github.com/users/ebuildy/gists{/gist_id}","starred_url":"https://api.github.com/users/ebuildy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebuildy/subscriptions","organizations_url":"https://api.github.com/users/ebuildy/orgs","repos_url":"https://api.github.com/users/ebuildy/repos","events_url":"https://api.github.com/users/ebuildy/events{/privacy}","received_events_url":"https://api.github.com/users/ebuildy/received_events","type":"User","site_admin":false},"created_at":"2012-07-02T14:18:12Z","updated_at":"2012-07-02T14:18:12Z","author_association":"CONTRIBUTOR","body":"Just asked to some friends, every body had the same issue with ES and don't use it anymore, hight CPU when idle, delete index, restart ES didn't change anything. Tried to reinstall it, same thing ;-( \n\nI follow the tweet tutorial, index 10 000 messages, fine, but after 10 hours, CPU goes to 200% for Java grrrrrrrrr \n\nHow can I give more details ? Thanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6728872","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6728872","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6728872,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Mjg4NzI=","user":{"login":"tgautier-silicon","id":807233,"node_id":"MDQ6VXNlcjgwNzIzMw==","avatar_url":"https://avatars1.githubusercontent.com/u/807233?v=4","gravatar_id":"","url":"https://api.github.com/users/tgautier-silicon","html_url":"https://github.com/tgautier-silicon","followers_url":"https://api.github.com/users/tgautier-silicon/followers","following_url":"https://api.github.com/users/tgautier-silicon/following{/other_user}","gists_url":"https://api.github.com/users/tgautier-silicon/gists{/gist_id}","starred_url":"https://api.github.com/users/tgautier-silicon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tgautier-silicon/subscriptions","organizations_url":"https://api.github.com/users/tgautier-silicon/orgs","repos_url":"https://api.github.com/users/tgautier-silicon/repos","events_url":"https://api.github.com/users/tgautier-silicon/events{/privacy}","received_events_url":"https://api.github.com/users/tgautier-silicon/received_events","type":"User","site_admin":false},"created_at":"2012-07-03T08:36:32Z","updated_at":"2012-07-03T08:43:33Z","author_association":"NONE","body":"We had the same symptoms but they weren't related at all with this issue.\n\nSince the 1st of July 2012, we had our CPU going through the roof and we didn't know why.\nThis is related to the leap second (check #leapocalypse).\n\nJust restarting ES didn't do the trick but either rebooting the whole server, or more preferably stopping ntpd to adjust the date and time manually the restart ES, fixed everything.\n\nSo don't throw away everything, ES is just fine :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6757886","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6757886","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6757886,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTc4ODY=","user":{"login":"ebuildy","id":1219817,"node_id":"MDQ6VXNlcjEyMTk4MTc=","avatar_url":"https://avatars0.githubusercontent.com/u/1219817?v=4","gravatar_id":"","url":"https://api.github.com/users/ebuildy","html_url":"https://github.com/ebuildy","followers_url":"https://api.github.com/users/ebuildy/followers","following_url":"https://api.github.com/users/ebuildy/following{/other_user}","gists_url":"https://api.github.com/users/ebuildy/gists{/gist_id}","starred_url":"https://api.github.com/users/ebuildy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebuildy/subscriptions","organizations_url":"https://api.github.com/users/ebuildy/orgs","repos_url":"https://api.github.com/users/ebuildy/repos","events_url":"https://api.github.com/users/ebuildy/events{/privacy}","received_events_url":"https://api.github.com/users/ebuildy/received_events","type":"User","site_admin":false},"created_at":"2012-07-04T11:05:07Z","updated_at":"2012-07-04T11:05:07Z","author_association":"CONTRIBUTOR","body":"Yes true, \n\nAnother solution I have found is to set the refresh_interval to -1 to perform bulk indexing \n\nBut still high CPU and ES timeout ;-( Is there a way to remove ES data from filesystem ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6774285","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6774285","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6774285,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzQyODU=","user":{"login":"mjgp2","id":888462,"node_id":"MDQ6VXNlcjg4ODQ2Mg==","avatar_url":"https://avatars0.githubusercontent.com/u/888462?v=4","gravatar_id":"","url":"https://api.github.com/users/mjgp2","html_url":"https://github.com/mjgp2","followers_url":"https://api.github.com/users/mjgp2/followers","following_url":"https://api.github.com/users/mjgp2/following{/other_user}","gists_url":"https://api.github.com/users/mjgp2/gists{/gist_id}","starred_url":"https://api.github.com/users/mjgp2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjgp2/subscriptions","organizations_url":"https://api.github.com/users/mjgp2/orgs","repos_url":"https://api.github.com/users/mjgp2/repos","events_url":"https://api.github.com/users/mjgp2/events{/privacy}","received_events_url":"https://api.github.com/users/mjgp2/received_events","type":"User","site_admin":false},"created_at":"2012-07-05T09:08:38Z","updated_at":"2012-07-05T09:08:38Z","author_association":"NONE","body":"Are you using Java7?\n\nIt seems to be a Netty+Java7 issue. Using Java 6, or Java7 without NIO, I\ndo not get these issues.\n\nOn Wed, Jul 4, 2012 at 12:05 PM, eBuildy <\nreply@reply.github.com\n\n> wrote:\n> \n> Yes true,\n> \n> Another solution I have found is to set the refresh_interval to -1 to\n> perform bulk indexing\n> \n> But still high CPU and ES timeout ;-( Is there a way to remove ES data\n> from filesystem ?\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> \n> https://github.com/elasticsearch/elasticsearch/issues/1940#issuecomment-6757886\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6799897","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6799897","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6799897,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTk4OTc=","user":{"login":"ebuildy","id":1219817,"node_id":"MDQ6VXNlcjEyMTk4MTc=","avatar_url":"https://avatars0.githubusercontent.com/u/1219817?v=4","gravatar_id":"","url":"https://api.github.com/users/ebuildy","html_url":"https://github.com/ebuildy","followers_url":"https://api.github.com/users/ebuildy/followers","following_url":"https://api.github.com/users/ebuildy/following{/other_user}","gists_url":"https://api.github.com/users/ebuildy/gists{/gist_id}","starred_url":"https://api.github.com/users/ebuildy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebuildy/subscriptions","organizations_url":"https://api.github.com/users/ebuildy/orgs","repos_url":"https://api.github.com/users/ebuildy/repos","events_url":"https://api.github.com/users/ebuildy/events{/privacy}","received_events_url":"https://api.github.com/users/ebuildy/received_events","type":"User","site_admin":false},"created_at":"2012-07-06T08:31:04Z","updated_at":"2012-07-06T08:31:04Z","author_association":"CONTRIBUTOR","body":"Yes I am on Java7 now, how disable NIO ? thanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6800009","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-6800009","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":6800009,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDAwMDk=","user":{"login":"mjgp2","id":888462,"node_id":"MDQ6VXNlcjg4ODQ2Mg==","avatar_url":"https://avatars0.githubusercontent.com/u/888462?v=4","gravatar_id":"","url":"https://api.github.com/users/mjgp2","html_url":"https://github.com/mjgp2","followers_url":"https://api.github.com/users/mjgp2/followers","following_url":"https://api.github.com/users/mjgp2/following{/other_user}","gists_url":"https://api.github.com/users/mjgp2/gists{/gist_id}","starred_url":"https://api.github.com/users/mjgp2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjgp2/subscriptions","organizations_url":"https://api.github.com/users/mjgp2/orgs","repos_url":"https://api.github.com/users/mjgp2/repos","events_url":"https://api.github.com/users/mjgp2/events{/privacy}","received_events_url":"https://api.github.com/users/mjgp2/received_events","type":"User","site_admin":false},"created_at":"2012-07-06T08:37:40Z","updated_at":"2012-07-06T08:37:40Z","author_association":"NONE","body":"As per the comment above:\n\n```\nFYI This seems to be Netty related: setting network.tcp.blocking: true\n```\n\ncauses the CPU usage to drop back down to zero.\n\nOn Fri, Jul 6, 2012 at 9:31 AM, eBuildy <\nreply@reply.github.com\n\n> wrote:\n> \n> Yes I am on Java7 now, how disable NIO ? thanks\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> \n> https://github.com/elasticsearch/elasticsearch/issues/1940#issuecomment-6799897\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/7428049","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-7428049","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":7428049,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MjgwNDk=","user":{"login":"alexsisu","id":13520,"node_id":"MDQ6VXNlcjEzNTIw","avatar_url":"https://avatars2.githubusercontent.com/u/13520?v=4","gravatar_id":"","url":"https://api.github.com/users/alexsisu","html_url":"https://github.com/alexsisu","followers_url":"https://api.github.com/users/alexsisu/followers","following_url":"https://api.github.com/users/alexsisu/following{/other_user}","gists_url":"https://api.github.com/users/alexsisu/gists{/gist_id}","starred_url":"https://api.github.com/users/alexsisu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexsisu/subscriptions","organizations_url":"https://api.github.com/users/alexsisu/orgs","repos_url":"https://api.github.com/users/alexsisu/repos","events_url":"https://api.github.com/users/alexsisu/events{/privacy}","received_events_url":"https://api.github.com/users/alexsisu/received_events","type":"User","site_admin":false},"created_at":"2012-08-01T14:01:27Z","updated_at":"2012-08-01T14:01:48Z","author_association":"NONE","body":"High,\n\nI'm also experiencing this issue. Starting from monday morning(arround 00:00), we noticed a constant cpu consumption (~200%). \nI've created a gist here. https://gist.github.com/3227023 \nJava version is: 1.6.0_27-b07\nElasticSearch version: 0.19.4\n\nI've also googled a bit arround, and I've noticed other people having this issue (here: http://dev.eclipse.org/mhonarc/lists/jetty-users/msg02163.html).\n\n(The server is in production, and I cant for the moment change the java version, or upgrade the elasticsearch.)\n\nSo, any suggestions/explanations will be appreciated.\n\nTnx in advance.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/7449239","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-7449239","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":7449239,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NDkyMzk=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-08-02T07:52:30Z","updated_at":"2012-08-02T07:53:00Z","author_association":"MEMBER","body":"@alexsisu can you try and use a newer JVM version, and a newer elasticsearch version (which includes a newer netty version) and see if it happens? You mention that its in production, so possibly for now just set the blocking flag to true.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/7450515","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-7450515","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":7450515,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NTA1MTU=","user":{"login":"ebuildy","id":1219817,"node_id":"MDQ6VXNlcjEyMTk4MTc=","avatar_url":"https://avatars0.githubusercontent.com/u/1219817?v=4","gravatar_id":"","url":"https://api.github.com/users/ebuildy","html_url":"https://github.com/ebuildy","followers_url":"https://api.github.com/users/ebuildy/followers","following_url":"https://api.github.com/users/ebuildy/following{/other_user}","gists_url":"https://api.github.com/users/ebuildy/gists{/gist_id}","starred_url":"https://api.github.com/users/ebuildy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebuildy/subscriptions","organizations_url":"https://api.github.com/users/ebuildy/orgs","repos_url":"https://api.github.com/users/ebuildy/repos","events_url":"https://api.github.com/users/ebuildy/events{/privacy}","received_events_url":"https://api.github.com/users/ebuildy/received_events","type":"User","site_admin":false},"created_at":"2012-08-02T09:14:32Z","updated_at":"2012-08-02T09:14:32Z","author_association":"CONTRIBUTOR","body":"What version do you suggest ? (OpenJDK, Oracle , 1.7 ... with Java I am always lost ....) ?\n\nAnd do you have any documentation about setting a good production configuration (such as this blocking flag) ?\n\nThanks (and again, good job ! thanks for this product)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/7451061","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-7451061","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":7451061,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NTEwNjE=","user":{"login":"michaelklishin","id":1090,"node_id":"MDQ6VXNlcjEwOTA=","avatar_url":"https://avatars3.githubusercontent.com/u/1090?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelklishin","html_url":"https://github.com/michaelklishin","followers_url":"https://api.github.com/users/michaelklishin/followers","following_url":"https://api.github.com/users/michaelklishin/following{/other_user}","gists_url":"https://api.github.com/users/michaelklishin/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelklishin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelklishin/subscriptions","organizations_url":"https://api.github.com/users/michaelklishin/orgs","repos_url":"https://api.github.com/users/michaelklishin/repos","events_url":"https://api.github.com/users/michaelklishin/events{/privacy}","received_events_url":"https://api.github.com/users/michaelklishin/received_events","type":"User","site_admin":false},"created_at":"2012-08-02T09:44:08Z","updated_at":"2012-08-02T09:44:08Z","author_association":"NONE","body":"OpenJDK 7 is fine but in most distributions you will get a fairly old patch level. Oracle's one is not tied to what distributions provide, so you can get a very recent patch level like 7u5).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/7451259","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-7451259","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":7451259,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NTEyNTk=","user":{"login":"alexsisu","id":13520,"node_id":"MDQ6VXNlcjEzNTIw","avatar_url":"https://avatars2.githubusercontent.com/u/13520?v=4","gravatar_id":"","url":"https://api.github.com/users/alexsisu","html_url":"https://github.com/alexsisu","followers_url":"https://api.github.com/users/alexsisu/followers","following_url":"https://api.github.com/users/alexsisu/following{/other_user}","gists_url":"https://api.github.com/users/alexsisu/gists{/gist_id}","starred_url":"https://api.github.com/users/alexsisu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexsisu/subscriptions","organizations_url":"https://api.github.com/users/alexsisu/orgs","repos_url":"https://api.github.com/users/alexsisu/repos","events_url":"https://api.github.com/users/alexsisu/events{/privacy}","received_events_url":"https://api.github.com/users/alexsisu/received_events","type":"User","site_admin":false},"created_at":"2012-08-02T09:55:18Z","updated_at":"2012-08-02T09:55:18Z","author_association":"NONE","body":"Additional information. \nBy using the command: \ntop -H -d 1 -n 20 -p 5174 \nin linux I've managed to retrieve the cpu consumption by thread. \nHere you have a snapshot in moments of inactivity.\nhttps://gist.github.com/3235953\n\nFrom what I understood,  the pids displayed are in fact the native ids. \nSo, i've took the PID 5128 and translated to hexa obtaining the native id for a thread. Which is: 0x1462.\n\nGrepping the jstack log, I found this line:\n\n\"Concurrent Mark-Sweep GC Thread\" prio=10 tid=0x00007fefdc3ae000 nid=0x1462 runnable.\nThat implying that the CMS GC Thread might be one  of the consuming CPU threads.\n\nIs this correct? Is there the possibility of having high cpu gc, in the idle moments of elasticsearch? \n(we hit it pretty hard during the day, especially faceting, that increasing the heap size up to 60~80 GB.)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/7451410","html_url":"https://github.com/elastic/elasticsearch/issues/1940#issuecomment-7451410","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1940","id":7451410,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NTE0MTA=","user":{"login":"alexsisu","id":13520,"node_id":"MDQ6VXNlcjEzNTIw","avatar_url":"https://avatars2.githubusercontent.com/u/13520?v=4","gravatar_id":"","url":"https://api.github.com/users/alexsisu","html_url":"https://github.com/alexsisu","followers_url":"https://api.github.com/users/alexsisu/followers","following_url":"https://api.github.com/users/alexsisu/following{/other_user}","gists_url":"https://api.github.com/users/alexsisu/gists{/gist_id}","starred_url":"https://api.github.com/users/alexsisu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexsisu/subscriptions","organizations_url":"https://api.github.com/users/alexsisu/orgs","repos_url":"https://api.github.com/users/alexsisu/repos","events_url":"https://api.github.com/users/alexsisu/events{/privacy}","received_events_url":"https://api.github.com/users/alexsisu/received_events","type":"User","site_admin":false},"created_at":"2012-08-02T10:02:47Z","updated_at":"2012-08-02T11:09:14Z","author_association":"NONE","body":"@kimchy regarding the upgrade:\nWhat is the cost of performance when disabling the nio (by setting the blocking to True).\nIs there a known problem regarding the netty & java in es? \nHow can I verify that is a netty problem?\n\nI'm asking that because before if I'll do the upgrade of jvm and es, I'll might loose this behavior, and it might occur even after the update.\nWhat other type of information can I provide?\n\nProbably we'll do the update in the near future anyhow, but I'd like to know more about this issue.\n\nTnx :)\n","performed_via_github_app":null}]