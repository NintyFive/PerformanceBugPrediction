[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/365861555","html_url":"https://github.com/elastic/elasticsearch/issues/28685#issuecomment-365861555","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28685","id":365861555,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTg2MTU1NQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2018-02-15T08:51:38Z","updated_at":"2018-02-15T08:51:38Z","author_association":"MEMBER","body":"@tlrx do you mind taking a look?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/374619661","html_url":"https://github.com/elastic/elasticsearch/issues/28685#issuecomment-374619661","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28685","id":374619661,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NDYxOTY2MQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-03-20T14:33:19Z","updated_at":"2018-03-20T14:33:19Z","author_association":"MEMBER","body":"Another one:\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.2+multijob-windows-compatibility/250/console\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/383855500","html_url":"https://github.com/elastic/elasticsearch/issues/28685#issuecomment-383855500","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28685","id":383855500,"node_id":"MDEyOklzc3VlQ29tbWVudDM4Mzg1NTUwMA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-04-24T08:52:42Z","updated_at":"2018-04-24T08:52:42Z","author_association":"CONTRIBUTOR","body":"Another one: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.2+multijob-windows-compatibility/416","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/388186455","html_url":"https://github.com/elastic/elasticsearch/issues/28685#issuecomment-388186455","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28685","id":388186455,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODE4NjQ1NQ==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2018-05-10T21:07:57Z","updated_at":"2018-05-10T21:26:42Z","author_association":"MEMBER","body":"This test failed again -- build information below. Since it's failed several times in the past few months, I plan to mute the test. Note that I also can't reproduce the failure locally.\r\n\r\nCI link: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+multijob-windows-compatibility/1050/console\r\n\r\nCommand to reproduce:\r\n```\r\ngradlew :server:test \\\r\n  -Dtests.seed=181102B7CE1F39F0 \\\r\n  -Dtests.class=org.elasticsearch.discovery.zen.UnicastZenPingTests \\\r\n  -Dtests.method=\"testSimplePings\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=es-VE \\\r\n  -Dtests.timezone=America/Blanc-Sablon\r\n```\r\n\r\nStack trace:\r\n```\r\nFAILURE 2.92s J1 | UnicastZenPingTests.testSimplePings <<< FAILURES!\r\n20:24:08    > Throwable #1: java.lang.AssertionError: node [UZP_A] ping count to [UZP_B] is unexpected\r\n20:24:08    > Expected: <3>\r\n20:24:08    >      but: was <2>\r\n20:24:08    > \tat __randomizedtesting.SeedInfo.seed([181102B7CE1F39F0:73EDA89343F2C8D0]:0)\r\n20:24:08    > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n20:24:08    > \tat org.elasticsearch.discovery.zen.UnicastZenPingTests.assertPingCount(UnicastZenPingTests.java:752)\r\n20:24:08    > \tat org.elasticsearch.discovery.zen.UnicastZenPingTests.testSimplePings(UnicastZenPingTests.java:235)\r\n20:24:08    > \tat java.lang.Thread.run(Thread.java:748)\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392603705","html_url":"https://github.com/elastic/elasticsearch/issues/28685#issuecomment-392603705","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28685","id":392603705,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjYwMzcwNQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-05-28T21:08:58Z","updated_at":"2018-05-28T21:08:58Z","author_association":"MEMBER","body":"This also appeared on 5.6 so I muted it there as well: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+5.6+multijob-windows-compatibility/1114/console\r\nMuted in https://github.com/elastic/elasticsearch/commit/e521a9aa4e99bb20e0a3d264f23217ace3c18e23","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395052208","html_url":"https://github.com/elastic/elasticsearch/issues/28685#issuecomment-395052208","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28685","id":395052208,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTA1MjIwOA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2018-06-06T12:33:50Z","updated_at":"2018-06-06T12:33:50Z","author_association":"CONTRIBUTOR","body":"The root cause here is:\r\n\r\n```\r\n[2018-05-29T03:03:50,295][WARN ][o.e.d.z.UnicastZenPingTests$1] [UZP_C] exception caught on transport layer [MockChannel{profile='default', isOpen=true, localAddress=/127.0.0.1:49968, isServerSocket=false}], closing connection\r\n\r\n  1> java.net.SocketException: Software caused connection abort: recv failed\r\n  1> \tat java.net.SocketInputStream.socketRead0(Native Method) ~[?:1.8.0_172]\r\n  1> \tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116) ~[?:1.8.0_172]\r\n  1> \tat java.net.SocketInputStream.read(SocketInputStream.java:171) ~[?:1.8.0_172]\r\n  1> \tat java.net.SocketInputStream.read(SocketInputStream.java:141) ~[?:1.8.0_172]\r\n  1> \tat java.io.BufferedInputStream.fill(BufferedInputStream.java:246) ~[?:1.8.0_172]\r\n  1> \tat java.io.BufferedInputStream.read(BufferedInputStream.java:265) ~[?:1.8.0_172]\r\n  1> \tat org.elasticsearch.common.io.stream.InputStreamStreamInput.read(InputStreamStreamInput.java:84) ~[main/:?]\r\n  1> \tat org.elasticsearch.transport.MockTcpTransport.readMessage(MockTcpTransport.java:151) ~[framework-5.6.10-SNAPSHOT.jar:?]\r\n  1> \tat org.elasticsearch.transport.MockTcpTransport.access$900(MockTcpTransport.java:71) ~[framework-5.6.10-SNAPSHOT.jar:?]\r\n  1> \tat org.elasticsearch.transport.MockTcpTransport$MockChannel$1.lambda$doRun$0(MockTcpTransport.java:347) ~[framework-5.6.10-SNAPSHOT.jar:?]\r\n  1> \tat org.elasticsearch.common.util.CancellableThreads.executeIO(CancellableThreads.java:105) ~[main/:?]\r\n  1> \tat org.elasticsearch.transport.MockTcpTransport$MockChannel$1.doRun(MockTcpTransport.java:347) [framework-5.6.10-SNAPSHOT.jar:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [main/:?]\r\n  1> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_172]\r\n  1> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_172]\r\n  1> \tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_172]\r\n```\r\n\r\nIt's only failing on Windows, and only sporadically. Googling for this shows all kind of possible causes, most of which cannot be influenced by the software that's experiencing the issues. Anyhow, asserting the exact ping count is not that important for the test, so I've weakened the assertion on Windows and reactivated the test (a9af5ca6387).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/454842966","html_url":"https://github.com/elastic/elasticsearch/issues/28685#issuecomment-454842966","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28685","id":454842966,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg0Mjk2Ng==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2019-01-16T16:25:04Z","updated_at":"2019-01-16T16:53:54Z","author_association":"CONTRIBUTOR","body":"I'll reopen this as the same test fails - granted, not for the same reason. If deemed necessary, I can take this to a different issue\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+intake/1028\r\n\r\n```\r\n  1> [2019-01-15T23:53:40,798][INFO ][o.e.d.z.UnicastZenPingTests] [testSimplePings] after test\r\nFAILURE 8.18s J1 | UnicastZenPingTests.testSimplePings <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: \r\n   > Expected: <1>\r\n   >      but: was <0>\r\n   > \tat __randomizedtesting.SeedInfo.seed([21FE44B44EAC4145:4A02EE90C341B065]:0)\r\n   > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \tat org.elasticsearch.discovery.zen.UnicastZenPingTests.testSimplePings(UnicastZenPingTests.java:248)\r\n   > \tat java.lang.Thread.run(Thread.java:748)\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/454846598","html_url":"https://github.com/elastic/elasticsearch/issues/28685#issuecomment-454846598","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28685","id":454846598,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg0NjU5OA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2019-01-16T16:34:07Z","updated_at":"2019-01-16T16:34:07Z","author_association":"CONTRIBUTOR","body":"@jkakavas grep for `AssertionError` in the output. That will give you the reason why the test failed. The above is just a random log line that will also happen on a healthy run of the test, as the test simulates failures.\r\nI've looked at the failure here and it is caused by CI being very slow. Unless we rewrite all our tests to accommodate for horrible slow timing behavior as part of the CI, there is nothing we can do here, but need to investigate a test infrastructure problem.","performed_via_github_app":null}]