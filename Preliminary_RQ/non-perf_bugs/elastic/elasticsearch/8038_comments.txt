[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/58636008","html_url":"https://github.com/elastic/elasticsearch/issues/8038#issuecomment-58636008","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8038","id":58636008,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjM2MDA4","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2014-10-10T10:02:51Z","updated_at":"2014-10-10T10:02:51Z","author_association":"MEMBER","body":"> When debugging some GC issues, it was really useful to correlate what queries were being run at the time of the GC's, by abusing the slowlog and some ELK magic.\n\nIMHO this is not abusing but part of the slowlog valid usages. During GC queries will be slow and will be logged.\n\nI don't think it's realistic to log all queries all the time waiting for a GC to happen. You are better off configure some threshold and see what goes above it.\n\nFYI - GC can come for other things, not necessarily query related, like norms, swapping , big term dictionaries etc.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/58638082","html_url":"https://github.com/elastic/elasticsearch/issues/8038#issuecomment-58638082","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8038","id":58638082,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjM4MDgy","user":{"login":"jimmyjones2","id":2991805,"node_id":"MDQ6VXNlcjI5OTE4MDU=","avatar_url":"https://avatars2.githubusercontent.com/u/2991805?v=4","gravatar_id":"","url":"https://api.github.com/users/jimmyjones2","html_url":"https://github.com/jimmyjones2","followers_url":"https://api.github.com/users/jimmyjones2/followers","following_url":"https://api.github.com/users/jimmyjones2/following{/other_user}","gists_url":"https://api.github.com/users/jimmyjones2/gists{/gist_id}","starred_url":"https://api.github.com/users/jimmyjones2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimmyjones2/subscriptions","organizations_url":"https://api.github.com/users/jimmyjones2/orgs","repos_url":"https://api.github.com/users/jimmyjones2/repos","events_url":"https://api.github.com/users/jimmyjones2/events{/privacy}","received_events_url":"https://api.github.com/users/jimmyjones2/received_events","type":"User","site_admin":false},"created_at":"2014-10-10T10:25:50Z","updated_at":"2014-10-10T10:25:50Z","author_association":"CONTRIBUTOR","body":"Oddly enough my queries weren't running too slowly, but caused a GC a short period later (as far as I could make out). GC is a bit of a beast I don't really understand to be honest, but thanks for the tips.\n\nHowever, in general, I think it would be nice to be able to flick a simple switch to log all queries, then compare with IO/CPU/latency spikes, evictions etc to help find the culprit. But that's just my 2-cents!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/58858402","html_url":"https://github.com/elastic/elasticsearch/issues/8038#issuecomment-58858402","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8038","id":58858402,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODU4NDAy","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2014-10-13T07:57:22Z","updated_at":"2014-10-13T07:57:22Z","author_association":"MEMBER","body":">  But that's just my 2-cents!\n\nFor sure - thank you!\n\nThe feeling is that as logging all queries has unexpected performance and disk space implications, it is best kept as an expert setting (i.e., set slow log to 0) rather than a very easy switch.\n\nI'm closing this issue now, but if you rather keep it open (or someone else does) please feel free to reopen.\n","performed_via_github_app":null}]