{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/54090","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54090/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54090/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54090/events","html_url":"https://github.com/elastic/elasticsearch/issues/54090","id":586993027,"node_id":"MDU6SXNzdWU1ODY5OTMwMjc=","number":54090,"title":"[CI] MachineLearningIT testDeleteExpiredData","user":{"login":"albertzaharovits","id":4568420,"node_id":"MDQ6VXNlcjQ1Njg0MjA=","avatar_url":"https://avatars2.githubusercontent.com/u/4568420?v=4","gravatar_id":"","url":"https://api.github.com/users/albertzaharovits","html_url":"https://github.com/albertzaharovits","followers_url":"https://api.github.com/users/albertzaharovits/followers","following_url":"https://api.github.com/users/albertzaharovits/following{/other_user}","gists_url":"https://api.github.com/users/albertzaharovits/gists{/gist_id}","starred_url":"https://api.github.com/users/albertzaharovits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertzaharovits/subscriptions","organizations_url":"https://api.github.com/users/albertzaharovits/orgs","repos_url":"https://api.github.com/users/albertzaharovits/repos","events_url":"https://api.github.com/users/albertzaharovits/events{/privacy}","received_events_url":"https://api.github.com/users/albertzaharovits/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-03-24T14:16:49Z","updated_at":"2020-03-24T14:24:38Z","closed_at":"2020-03-24T14:21:39Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"```\r\n./gradlew ':client:rest-high-level:integTestRunner' --tests \"org.elasticsearch.client.MachineLearningIT.testDeleteExpiredData\" -Dtests.seed=6520A2DC8EEFE538 -Dtests.security.manager=true -Dtests.locale=nl-NL -Dtests.timezone=Europe/Warsaw -Dcompiler.java=13\t\r\n  2> org.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:46111], URI [/.ml-state/_refresh], status line [HTTP/1.1 404 Not Found]\t\r\n    {\"error\":{\"root_cause\":[{\"type\":\"index_not_found_exception\",\"reason\":\"no such index [.ml-state]\",\"resource.type\":\"index_or_alias\",\"resource.id\":\".ml-state\",\"index_uuid\":\"_na_\",\"index\":\".ml-state\"}],\"type\":\"index_not_found_exception\",\"reason\":\"no such index [.ml-state]\",\"resource.type\":\"index_or_alias\",\"resource.id\":\".ml-state\",\"index_uuid\":\"_na_\",\"index\":\".ml-state\"},\"status\":404}\t\r\n        at __randomizedtesting.SeedInfo.seed([6520A2DC8EEFE538:AD6F8F70E7F3882A]:0)\t\r\n        at org.elasticsearch.client.RestClient.convertResponse(RestClient.java:283)\t\r\n        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:261)\t\r\n        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:235)\t\r\n        at org.elasticsearch.client.ESRestHighLevelClientTestCase.refreshIndexes(ESRestHighLevelClientTestCase.java:244)\t\r\n        at org.elasticsearch.client.ESRestHighLevelClientTestCase.searchAll(ESRestHighLevelClientTestCase.java:236)\t\r\n        at org.elasticsearch.client.ESRestHighLevelClientTestCase.searchAll(ESRestHighLevelClientTestCase.java:232)\t\r\n        at org.elasticsearch.client.MachineLearningIT.testDeleteExpiredData(MachineLearningIT.java:1008)\r\n\r\n```\r\n\r\nA total of 3 build failures (7.x and master) over the last few days [MachineLearningIT#testDeleteExpiredData](https://gradle-enterprise.elastic.co/scans/tests?failures.failureClassification=non_verification&list.offset=0&list.size=50&list.sortColumn=startTime&list.sortOrder=desc&search.buildToolType=gradle&search.buildToolType=maven&search.startTimeMax=1585049356650&search.startTimeMin=1584444556650&search.tags=CI&search.tags=not:pull-request&tests.container=org.elasticsearch.client.MachineLearningIT&tests.sortField=FAILED&tests.test=testDeleteExpiredData&tests.unstableOnly=true&trends.section=overview&trends.timeResolution=day&viewer.tzOffset=120)\r\n\r\nPossible root cause:\r\n```\r\n        » ERROR][o.e.x.i.IndexLifecycleRunner] [integTest-0] policy [ml-size-based-ilm-policy] for index [.ml-state] failed on step [{\"phase\":\"hot\",\"action\":\"rollover\",\"name\":\"check-rollover-ready\"}]. Moving to ERROR step\t\r\n»  java.lang.IllegalArgumentException: index.lifecycle.rollover_alias [.ml-state-write] does not point to index [.ml-state]\t\r\n»  \tat org.elasticsearch.xpack.core.ilm.WaitForRolloverReadyStep.evaluateCondition(WaitForRolloverReadyStep.java:104) [x-pack-core-7.7.0-SNAPSHOT.jar:7.7.0-SNAPSHOT]\t\r\n»  \tat org.elasticsearch.xpack.ilm.IndexLifecycleRunner.runPeriodicStep(IndexLifecycleRunner.java:157) [x-pack-ilm-7.7.0-SNAPSHOT.jar:7.7.0-SNAPSHOT]\t\r\n»  \tat org.elasticsearch.xpack.ilm.IndexLifecycleService.triggerPolicies(IndexLifecycleService.java:328) [x-pack-ilm-7.7.0-SNAPSHOT.jar:7.7.0-SNAPSHOT]\t\r\n»  \tat org.elasticsearch.xpack.ilm.IndexLifecycleService.triggered(IndexLifecycleService.java:266) [x-pack-ilm-7.7.0-SNAPSHOT.jar:7.7.0-SNAPSHOT]\t\r\n»  \tat org.elasticsearch.xpack.core.scheduler.SchedulerEngine.notifyListeners(SchedulerEngine.java:183) [x-pack-core-7.7.0-SNAPSHOT.jar:7.7.0-SNAPSHOT]\t\r\n»  \tat org.elasticsearch.xpack.core.scheduler.SchedulerEngine$ActiveSchedule.run(SchedulerEngine.java:211) [x-pack-core-7.7.0-SNAPSHOT.jar:7.7.0-SNAPSHOT]\t\r\n»  \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_241]\t\r\n»  \tat java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_241]\t\r\n»  \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [?:1.8.0_241]\t\r\n»  \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [?:1.8.0_241]\t\r\n»  \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_241]\t\r\n»  \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_241]\t\r\n»  \tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_241]\r\n```\r\n\r\nNot yet muting since relative fail frequency is very low.","closed_by":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"performed_via_github_app":null}