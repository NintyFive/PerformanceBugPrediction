{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10392","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10392/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10392/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10392/events","html_url":"https://github.com/elastic/elasticsearch/issues/10392","id":65914575,"node_id":"MDU6SXNzdWU2NTkxNDU3NQ==","number":10392,"title":"es 1.5.0 count doesn't work","user":{"login":"jeffreyji666","id":2270558,"node_id":"MDQ6VXNlcjIyNzA1NTg=","avatar_url":"https://avatars3.githubusercontent.com/u/2270558?v=4","gravatar_id":"","url":"https://api.github.com/users/jeffreyji666","html_url":"https://github.com/jeffreyji666","followers_url":"https://api.github.com/users/jeffreyji666/followers","following_url":"https://api.github.com/users/jeffreyji666/following{/other_user}","gists_url":"https://api.github.com/users/jeffreyji666/gists{/gist_id}","starred_url":"https://api.github.com/users/jeffreyji666/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeffreyji666/subscriptions","organizations_url":"https://api.github.com/users/jeffreyji666/orgs","repos_url":"https://api.github.com/users/jeffreyji666/repos","events_url":"https://api.github.com/users/jeffreyji666/events{/privacy}","received_events_url":"https://api.github.com/users/jeffreyji666/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2015-04-02T12:21:30Z","updated_at":"2015-04-06T04:31:08Z","closed_at":"2015-04-02T12:27:30Z","author_association":"NONE","active_lock_reason":null,"body":"Here is my script:\n\n```\nGET /engzo/topic/_search?pretty=true\n{\n  \"query\": {\n    \"bool\": {\n      \"must\": {\n        \"term\": {\n          \"isDeleted\": false\n        }\n      },\n      \"should\": [\n        {\n          \"match\": {\n            \"title\": {\n              \"query\": \"test\",\n              \"type\": \"boolean\",\n              \"operator\": \"AND\"\n            }\n          }\n        },\n        {\n          \"match\": {\n            \"body\": {\n              \"query\": \"test\",\n              \"type\": \"boolean\",\n              \"operator\": \"AND\"\n            }\n          }\n        },\n        {\n          \"query_string\": {\n            \"query\": \"test\",\n            \"fields\": [\n              \"title\",\n              \"body\"\n            ]\n          }\n        }\n      ]\n    }\n  }\n}\n```\n\nand I got this:\n\n```\n{\n  \"took\": 13,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 5,\n    \"successful\": 5,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": 414736,\n    \"max_score\": 14.740633,\n    \"hits\": [\n      {\n        \"_index\": \"engzo\",\n        \"_type\": \"topic\",\n        \"_id\": \"9566\",\n        \"_score\": 14.740633,\n        \"_source\": {\n          \"topicId\": 9566,\n          \"title\": \"test\",\n          \"body\": \"test\",\n          \"createdAt\": \"2014-03-03T08:03:26.000+08:00\",\n          \"updatedAt\": \"2014-03-03T08:03:26.000+08:00\",\n          \"replyCounts\": 0,\n          \"starCounts\": 0,\n          \"isDeleted\": 0\n        }\n      },\n      {\n        \"_index\": \"engzo\",\n        \"_type\": \"topic\",\n        \"_id\": \"106554\",\n        \"_score\": 14.740633,\n        \"_source\": {\n          \"topicId\": 106554,\n          \"title\": \"test\",\n          \"body\": \"test\",\n          \"createdAt\": \"2014-06-10T04:21:46.000+08:00\",\n          \"updatedAt\": \"2014-07-01T10:04:05.000+08:00\",\n          \"replyCounts\": 0,\n          \"starCounts\": 0,\n          \"isDeleted\": 0\n        }\n      },\n      {\n        \"_index\": \"engzo\",\n        \"_type\": \"topic\",\n        \"_id\": \"369577\",\n        \"_score\": 14.740633,\n        \"_source\": {\n          \"topicId\": 369577,\n          \"title\": \"Test\",\n          \"body\": \"Test\",\n          \"createdAt\": \"2014-11-06T11:38:28.000+08:00\",\n          \"updatedAt\": \"2014-11-06T13:56:55.000+08:00\",\n          \"replyCounts\": 0,\n          \"starCounts\": 0,\n          \"isDeleted\": 0\n        }\n      },\n      {\n        \"_index\": \"engzo\",\n        \"_type\": \"topic\",\n        \"_id\": \"401588\",\n        \"_score\": 14.740633,\n        \"_source\": {\n          \"topicId\": 401588,\n          \"title\": \"test\",\n          \"body\": \"test\",\n          \"createdAt\": \"2014-11-24T09:11:57.000+08:00\",\n          \"updatedAt\": \"2014-11-24T09:11:57.000+08:00\",\n          \"replyCounts\": 0,\n          \"starCounts\": 0,\n          \"isDeleted\": 0\n        }\n      },\n      {\n        \"_index\": \"engzo\",\n        \"_type\": \"topic\",\n        \"_id\": \"45838\",\n        \"_score\": 14.455909,\n        \"_source\": {\n          \"topicId\": 45838,\n          \"title\": \"test\",\n          \"body\": \"test\",\n          \"createdAt\": \"2014-04-28T12:49:04.000+08:00\",\n          \"updatedAt\": \"2014-04-29T05:13:04.000+08:00\",\n          \"replyCounts\": 0,\n          \"starCounts\": 0,\n          \"isDeleted\": 0\n        }\n      },\n      {\n        \"_index\": \"engzo\",\n        \"_type\": \"topic\",\n        \"_id\": \"99753\",\n        \"_score\": 14.455909,\n        \"_source\": {\n          \"topicId\": 99753,\n          \"title\": \"test\",\n          \"body\": \"test\",\n          \"createdAt\": \"2014-06-05T03:30:54.000+08:00\",\n          \"updatedAt\": \"2014-08-17T05:39:08.000+08:00\",\n          \"replyCounts\": 0,\n          \"starCounts\": 0,\n          \"isDeleted\": 0\n        }\n      },\n      {\n        \"_index\": \"engzo\",\n        \"_type\": \"topic\",\n        \"_id\": \"91185\",\n        \"_score\": 14.423123,\n        \"_source\": {\n          \"topicId\": 91185,\n          \"title\": \"test\",\n          \"body\": \"test\",\n          \"createdAt\": \"2014-05-28T13:41:30.000+08:00\",\n          \"updatedAt\": \"2014-05-28T13:45:33.000+08:00\",\n          \"replyCounts\": 0,\n          \"starCounts\": 0,\n          \"isDeleted\": 0\n        }\n      },\n      {\n        \"_index\": \"engzo\",\n        \"_type\": \"topic\",\n        \"_id\": \"281450\",\n        \"_score\": 14.423123,\n        \"_source\": {\n          \"topicId\": 281450,\n          \"title\": \"test\",\n          \"body\": \"Test\",\n          \"createdAt\": \"2014-09-04T10:35:50.000+08:00\",\n          \"updatedAt\": \"2014-09-04T11:42:12.000+08:00\",\n          \"replyCounts\": 0,\n          \"starCounts\": 0,\n          \"isDeleted\": 0\n        }\n      },\n      {\n        \"_index\": \"engzo\",\n        \"_type\": \"topic\",\n        \"_id\": \"35181\",\n        \"_score\": 14.368841,\n        \"_source\": {\n          \"topicId\": 35181,\n          \"title\": \"test\",\n          \"body\": \"test\",\n          \"createdAt\": \"2014-04-20T20:19:43.000+08:00\",\n          \"updatedAt\": \"2014-04-20T20:19:43.000+08:00\",\n          \"replyCounts\": 0,\n          \"starCounts\": 0,\n          \"isDeleted\": 0\n        }\n      },\n      {\n        \"_index\": \"engzo\",\n        \"_type\": \"topic\",\n        \"_id\": \"74362\",\n        \"_score\": 14.368841,\n        \"_source\": {\n          \"topicId\": 74362,\n          \"title\": \"test\",\n          \"body\": \"test\",\n          \"createdAt\": \"2014-05-16T08:48:20.000+08:00\",\n          \"updatedAt\": \"2014-08-26T06:34:25.000+08:00\",\n          \"replyCounts\": 0,\n          \"starCounts\": 0,\n          \"isDeleted\": 0\n        }\n      }\n    ]\n  }\n}\n```\n\nbut when I try to get the count by the following script:\n\n```\nGET /engzo/topic/_count?pretty=true\n{\n  \"query\": {\n    \"bool\": {\n      \"must\": {\n        \"term\": {\n          \"isDeleted\": false\n        }\n      },\n      \"should\": [\n        {\n          \"match\": {\n            \"title\": {\n              \"query\": \"test\",\n              \"type\": \"boolean\",\n              \"operator\": \"AND\"\n            }\n          }\n        },\n        {\n          \"match\": {\n            \"body\": {\n              \"query\": \"test\",\n              \"type\": \"boolean\",\n              \"operator\": \"AND\"\n            }\n          }\n        },\n        {\n          \"query_string\": {\n            \"query\": \"test\",\n            \"fields\": [\n              \"title\",\n              \"body\"\n            ]\n          }\n        }\n      ]\n    }\n  }\n}\n```\n\nit said:\n\n```\nGET /\n{\n  \"count\": 414736,\n  \"_shards\": {\n    \"total\": 5,\n    \"successful\": 5,\n    \"failed\": 0\n  }\n}\n```\n\nactually It is the total number of the index type. Is this a bug?\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}