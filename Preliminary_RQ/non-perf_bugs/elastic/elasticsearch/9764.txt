{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9764","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9764/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9764/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9764/events","html_url":"https://github.com/elastic/elasticsearch/issues/9764","id":58220736,"node_id":"MDU6SXNzdWU1ODIyMDczNg==","number":9764,"title":"query_string is not using default analyzer inside of function_score","user":{"login":"vovikdrg","id":462554,"node_id":"MDQ6VXNlcjQ2MjU1NA==","avatar_url":"https://avatars2.githubusercontent.com/u/462554?v=4","gravatar_id":"","url":"https://api.github.com/users/vovikdrg","html_url":"https://github.com/vovikdrg","followers_url":"https://api.github.com/users/vovikdrg/followers","following_url":"https://api.github.com/users/vovikdrg/following{/other_user}","gists_url":"https://api.github.com/users/vovikdrg/gists{/gist_id}","starred_url":"https://api.github.com/users/vovikdrg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vovikdrg/subscriptions","organizations_url":"https://api.github.com/users/vovikdrg/orgs","repos_url":"https://api.github.com/users/vovikdrg/repos","events_url":"https://api.github.com/users/vovikdrg/events{/privacy}","received_events_url":"https://api.github.com/users/vovikdrg/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-02-19T15:13:56Z","updated_at":"2015-04-26T19:36:08Z","closed_at":"2015-04-26T19:36:07Z","author_association":"NONE","active_lock_reason":null,"body":"I have query \n\n``` javascript\n{\n  \"from\": 0,\n  \"size\": 10,\n  \"fields\": [\n    \"Url\",\n    \"Id\",\n    \"Title\",\n    \"Description\",\n    \"Date\",\n    \"Breadcrumb\",\n    \"FileBlob.title\",\n    \"FileBlob.content_type\"\n  ],\n  \"query\": {\n    \"function_score\": {\n      \"query\": {\n        \"query_string\": {\n          \"query\": \"tip en ven\",\n          \"fields\": [\n            \"Id_analyzed^1.5\",\n            \"Title_analyzed^1.5\",\n            \"Description_analyzed^1\",\n            \"Breadcrumb_analyzed^1\",\n            \"FileBlob^1\",\n            \"netmesterrankingterms\"\n          ],\n          \"default_operator\": \"and\"\n        }\n      },\n      \"script_score\": {\n        \"script\": \"double boost = 1;  return boost; \",\n        \"params\": {\n          \"searchTerm\": \"tip en ven\"\n        }\n      }\n    }\n  }\n}\n```\n\nAnd i have defined default_search and index analyzer which uses stop words. \nIn query which i use \"tip en ven\",  **en** is danish stop word, and will be removed on index time as my default_index analyzer uses stop words. So when i search i have default_operator and so it expect all words to be found in document but it will not be. \nQuestion is why query_string is not using default_search by default? because when i set directly analyzer to it it works as expected\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}