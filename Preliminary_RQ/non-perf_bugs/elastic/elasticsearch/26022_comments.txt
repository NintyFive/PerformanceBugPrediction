[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/319705917","html_url":"https://github.com/elastic/elasticsearch/issues/26022#issuecomment-319705917","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26022","id":319705917,"node_id":"MDEyOklzc3VlQ29tbWVudDMxOTcwNTkxNw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-08-02T15:22:27Z","updated_at":"2017-08-02T15:22:27Z","author_association":"CONTRIBUTOR","body":"What version is it and what do the queries that should be cached but are not look like?\r\nIs the index read-only?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/319725139","html_url":"https://github.com/elastic/elasticsearch/issues/26022#issuecomment-319725139","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26022","id":319725139,"node_id":"MDEyOklzc3VlQ29tbWVudDMxOTcyNTEzOQ==","user":{"login":"kewats","id":25305435,"node_id":"MDQ6VXNlcjI1MzA1NDM1","avatar_url":"https://avatars3.githubusercontent.com/u/25305435?v=4","gravatar_id":"","url":"https://api.github.com/users/kewats","html_url":"https://github.com/kewats","followers_url":"https://api.github.com/users/kewats/followers","following_url":"https://api.github.com/users/kewats/following{/other_user}","gists_url":"https://api.github.com/users/kewats/gists{/gist_id}","starred_url":"https://api.github.com/users/kewats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kewats/subscriptions","organizations_url":"https://api.github.com/users/kewats/orgs","repos_url":"https://api.github.com/users/kewats/repos","events_url":"https://api.github.com/users/kewats/events{/privacy}","received_events_url":"https://api.github.com/users/kewats/received_events","type":"User","site_admin":false},"created_at":"2017-08-02T16:26:13Z","updated_at":"2017-08-02T16:26:13Z","author_association":"NONE","body":"I am using version 5.4.2. My index is infrequently updated, say once in a day.\r\n\r\nHere is what my query looks like:\r\n\r\n```\r\n“size”: 10,\r\n“from”: 0,\r\n“query”: {\r\n\t“bool”: {\r\n\t\t“filter”: {\r\n\t\t\t“nested”: {\r\n\t\t\t\t“query”: { … },\r\n\t\t\t\t“path”: “childProperties”,\r\n\t\t\t\t“inner_hits”: {\r\n\t\t\t\t\t“name”: “attribute”,\r\n\t\t\t\t\t“from”: 0,\r\n\t\t\t\t\t“size”: 1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n},\r\n“_source”: [ … ],\r\n“sort”: { … },\r\n“aggregations”: { … }\r\n\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/320900385","html_url":"https://github.com/elastic/elasticsearch/issues/26022#issuecomment-320900385","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26022","id":320900385,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMDkwMDM4NQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-08-08T09:19:42Z","updated_at":"2017-08-08T09:19:42Z","author_association":"CONTRIBUTOR","body":"I am assuming that you are seeing cache misses, but also cache hits? If this is actually the case then it is due to the query cache policy to not cache queries on small (less than 10k docs) segments that are unlikely to live long. There is nothing to worry about, such small segments are fast to search anyway.\r\n\r\nIf your index only gets updated once a day, you could consider running a force-merge with `max_num_segments=1` after the update, which will merge all your shards down to 1 segment. This will help reduce cache misses, but this is anecdotal. It will especially help because few large segments are more efficient to search.","performed_via_github_app":null}]