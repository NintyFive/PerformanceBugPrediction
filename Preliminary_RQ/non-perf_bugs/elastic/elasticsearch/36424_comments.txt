[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/445806254","html_url":"https://github.com/elastic/elasticsearch/issues/36424#issuecomment-445806254","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36424","id":445806254,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NTgwNjI1NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-12-10T12:58:06Z","updated_at":"2018-12-10T12:58:06Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/445943874","html_url":"https://github.com/elastic/elasticsearch/issues/36424#issuecomment-445943874","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36424","id":445943874,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NTk0Mzg3NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-12-10T19:35:55Z","updated_at":"2018-12-10T19:35:55Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/445954531","html_url":"https://github.com/elastic/elasticsearch/issues/36424#issuecomment-445954531","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36424","id":445954531,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NTk1NDUzMQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-12-10T20:08:20Z","updated_at":"2018-12-10T20:08:20Z","author_association":"MEMBER","body":"I'm not sure XContentBuilder should support java.util.Date at all. This is a legacy class, and we have been migrating all of elasticsearch to use the Java 8 Time api. But these can also be plugged in already via SPI with `XContentBuilderExtension`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/446056239","html_url":"https://github.com/elastic/elasticsearch/issues/36424#issuecomment-446056239","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36424","id":446056239,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NjA1NjIzOQ==","user":{"login":"bringyou","id":25130803,"node_id":"MDQ6VXNlcjI1MTMwODAz","avatar_url":"https://avatars1.githubusercontent.com/u/25130803?v=4","gravatar_id":"","url":"https://api.github.com/users/bringyou","html_url":"https://github.com/bringyou","followers_url":"https://api.github.com/users/bringyou/followers","following_url":"https://api.github.com/users/bringyou/following{/other_user}","gists_url":"https://api.github.com/users/bringyou/gists{/gist_id}","starred_url":"https://api.github.com/users/bringyou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bringyou/subscriptions","organizations_url":"https://api.github.com/users/bringyou/orgs","repos_url":"https://api.github.com/users/bringyou/repos","events_url":"https://api.github.com/users/bringyou/events{/privacy}","received_events_url":"https://api.github.com/users/bringyou/received_events","type":"User","site_admin":false},"created_at":"2018-12-11T03:07:16Z","updated_at":"2018-12-11T03:12:33Z","author_association":"NONE","body":"I'm sorry that I didn't make it clearly. I was using `QueryBuilders.rangeQuery` to build searchRequest for `RestHighLevelClient`,  just like this code:\r\n`boolQuery().filter(rangeQuery(\"created\").lt(aTimestampValue))`\r\nbut I had to parse my value from `java.sql.Timestamp` to other type, like `String` or `long`, if not  I'll get a exception like this\r\n\r\n> java.lang.IllegalArgumentException: cannot write xcontent for unknown value of type class java.sql.Timestamp\r\n\r\nAfter debugging, I found that queries were parsed by `XContentBuilder`, and it already has built-in support for `java.util.Date`, the superclass of `java.sql.Timestamp`, in his static statement:\r\n```java\r\nstatic {\r\n        Map<Class<?>, Writer> writers = new HashMap<>();\r\n        writers.put(Date.class, XContentBuilder::timeValue);\r\n        writers.put(Calendar.class, XContentBuilder::timeValue);\r\n        writers.put(GregorianCalendar.class, XContentBuilder::timeValue);\r\n}\r\n```\r\n So I wonder if there is any possible that writers in `XContentBuilder` can support subclasses, just like the case of `java.sql.Timestamp` and `java.util.Date`?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/446331466","html_url":"https://github.com/elastic/elasticsearch/issues/36424#issuecomment-446331466","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36424","id":446331466,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NjMzMTQ2Ng==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-12-11T19:31:57Z","updated_at":"2018-12-11T19:31:57Z","author_association":"MEMBER","body":"Supporting subclasses can't work generically. Serialization has to know and support the exact type, or there could be data loss. If subclasses of java.util.Date were serialized to date, they would be deserialized back into Date, not sql.Timestamp.\r\n\r\nWhy do you have a java.sql.Timestamp in the first place?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/446447764","html_url":"https://github.com/elastic/elasticsearch/issues/36424#issuecomment-446447764","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36424","id":446447764,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NjQ0Nzc2NA==","user":{"login":"bringyou","id":25130803,"node_id":"MDQ6VXNlcjI1MTMwODAz","avatar_url":"https://avatars1.githubusercontent.com/u/25130803?v=4","gravatar_id":"","url":"https://api.github.com/users/bringyou","html_url":"https://github.com/bringyou","followers_url":"https://api.github.com/users/bringyou/followers","following_url":"https://api.github.com/users/bringyou/following{/other_user}","gists_url":"https://api.github.com/users/bringyou/gists{/gist_id}","starred_url":"https://api.github.com/users/bringyou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bringyou/subscriptions","organizations_url":"https://api.github.com/users/bringyou/orgs","repos_url":"https://api.github.com/users/bringyou/repos","events_url":"https://api.github.com/users/bringyou/events{/privacy}","received_events_url":"https://api.github.com/users/bringyou/received_events","type":"User","site_admin":false},"created_at":"2018-12-12T03:21:27Z","updated_at":"2018-12-12T03:21:27Z","author_association":"NONE","body":"@rjernst That's true, I didn't realize that, so forgive my ignorance. BTW, we used to accept timestamp as api parameter and pass them to mysql for query,  so api paramenter can not be changed even though we migrate to es.","performed_via_github_app":null}]