[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/254233624","html_url":"https://github.com/elastic/elasticsearch/issues/20961#issuecomment-254233624","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20961","id":254233624,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDIzMzYyNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-10-17T15:02:38Z","updated_at":"2016-10-17T15:02:38Z","author_association":"CONTRIBUTOR","body":"Thanks for trying out the RC.  What logic could we apply to choose the other IP automatically (and in a generic, non-docker-specific way)?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/254413608","html_url":"https://github.com/elastic/elasticsearch/issues/20961#issuecomment-254413608","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20961","id":254413608,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDQxMzYwOA==","user":{"login":"guenhter","id":16029571,"node_id":"MDQ6VXNlcjE2MDI5NTcx","avatar_url":"https://avatars2.githubusercontent.com/u/16029571?v=4","gravatar_id":"","url":"https://api.github.com/users/guenhter","html_url":"https://github.com/guenhter","followers_url":"https://api.github.com/users/guenhter/followers","following_url":"https://api.github.com/users/guenhter/following{/other_user}","gists_url":"https://api.github.com/users/guenhter/gists{/gist_id}","starred_url":"https://api.github.com/users/guenhter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guenhter/subscriptions","organizations_url":"https://api.github.com/users/guenhter/orgs","repos_url":"https://api.github.com/users/guenhter/repos","events_url":"https://api.github.com/users/guenhter/events{/privacy}","received_events_url":"https://api.github.com/users/guenhter/received_events","type":"User","site_admin":false},"created_at":"2016-10-18T05:53:15Z","updated_at":"2016-10-18T05:53:15Z","author_association":"NONE","body":"I'm in discussion with the docker guys what the correct way is. I let you know ASAP.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/254718152","html_url":"https://github.com/elastic/elasticsearch/issues/20961#issuecomment-254718152","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20961","id":254718152,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDcxODE1Mg==","user":{"login":"guenhter","id":16029571,"node_id":"MDQ6VXNlcjE2MDI5NTcx","avatar_url":"https://avatars2.githubusercontent.com/u/16029571?v=4","gravatar_id":"","url":"https://api.github.com/users/guenhter","html_url":"https://github.com/guenhter","followers_url":"https://api.github.com/users/guenhter/followers","following_url":"https://api.github.com/users/guenhter/following{/other_user}","gists_url":"https://api.github.com/users/guenhter/gists{/gist_id}","starred_url":"https://api.github.com/users/guenhter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guenhter/subscriptions","organizations_url":"https://api.github.com/users/guenhter/orgs","repos_url":"https://api.github.com/users/guenhter/repos","events_url":"https://api.github.com/users/guenhter/events{/privacy}","received_events_url":"https://api.github.com/users/guenhter/received_events","type":"User","site_admin":false},"created_at":"2016-10-19T05:59:48Z","updated_at":"2016-10-19T06:00:19Z","author_association":"NONE","body":"@clintongormley \n\n```\nlink/ether 02:42:0a:00:00:05 brd ff:ff:ff:ff:ff:ff\n    inet 10.0.0.5/24 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet 10.0.0.4/32 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::42:aff:fe00:5/64 scope link\n       valid_lft forever preferred_lft forever\n```\n\nI notices the following in the ES log:\n\n```\n....\npublish_address {10.0.0.4:9302}, bound_addresses {[::]:9302}\n[2016-10-18T19:08:11,178][INFO ][o.e.b.BootstrapCheck     ] [ZPJ6URQ] bound or publishing to a non-loopback or non-link-local address, enforcing bootstrap checks\n[2016-10-18T19:08:14,286][INFO ][o.e.c.s.ClusterService   ] [ZPJ6URQ] new_master {ZPJ6URQ}{ZPJ6URQUT4KIdtOIAbNmxQ}{_rOzPemYR2uA3izwXQQt4w}{10.0.0.4}{10.0.0.4:9302}, added {{bRwjGA2}{bRwjGA2BS2SoPvLLWmZyhA}{LETUSTEIQM2gXX646OzrYA}{10.0.0.2}{10.0.0.2:9301},}, reason: zen-disco-elected-as-master ([1] nodes joined)[{bRwjGA2}{bRwjGA2BS2SoPvLLWmZyhA}{LETUSTEIQM2gXX646OzrYA}{10.0.0.2}{10.0.0.2:9301}]\n...\n[2016-10-18T21:19:51,840][WARN ][o.e.x.s.t.n.SecurityNetty4Transport] [ZPJ6URQ] exception caught on transport layer [[id: 0xa4d1e4b0, L:/10.0.0.5:60162 - R:/10.0.0.2:9301]], clos\n...\n```\n\n[es_log_data_node.txt](https://github.com/elastic/elasticsearch/files/538055/es_log_data_node.txt)\n\nIt seems, that `10.0.0.4` (subnet 32) is used for publishing but for the actual transport, the `10.0.0.5` (subnet 24) is used. IMO the latter one is the better choice. Can't ES be just published, where it communicates?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257502969","html_url":"https://github.com/elastic/elasticsearch/issues/20961#issuecomment-257502969","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20961","id":257502969,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NzUwMjk2OQ==","user":{"login":"guenhter","id":16029571,"node_id":"MDQ6VXNlcjE2MDI5NTcx","avatar_url":"https://avatars2.githubusercontent.com/u/16029571?v=4","gravatar_id":"","url":"https://api.github.com/users/guenhter","html_url":"https://github.com/guenhter","followers_url":"https://api.github.com/users/guenhter/followers","following_url":"https://api.github.com/users/guenhter/following{/other_user}","gists_url":"https://api.github.com/users/guenhter/gists{/gist_id}","starred_url":"https://api.github.com/users/guenhter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guenhter/subscriptions","organizations_url":"https://api.github.com/users/guenhter/orgs","repos_url":"https://api.github.com/users/guenhter/repos","events_url":"https://api.github.com/users/guenhter/events{/privacy}","received_events_url":"https://api.github.com/users/guenhter/received_events","type":"User","site_admin":false},"created_at":"2016-11-01T07:12:00Z","updated_at":"2016-11-01T07:12:00Z","author_association":"NONE","body":"I close this for now and re-open it in case something should be done. Best approach would be, if docker can handle this and ES has nothing to do. \n","performed_via_github_app":null}]