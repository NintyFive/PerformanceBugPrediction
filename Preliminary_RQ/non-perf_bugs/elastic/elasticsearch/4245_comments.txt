[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32234062","html_url":"https://github.com/elastic/elasticsearch/issues/4245#issuecomment-32234062","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4245","id":32234062,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMjM0MDYy","user":{"login":"benneic","id":965281,"node_id":"MDQ6VXNlcjk2NTI4MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/965281?v=4","gravatar_id":"","url":"https://api.github.com/users/benneic","html_url":"https://github.com/benneic","followers_url":"https://api.github.com/users/benneic/followers","following_url":"https://api.github.com/users/benneic/following{/other_user}","gists_url":"https://api.github.com/users/benneic/gists{/gist_id}","starred_url":"https://api.github.com/users/benneic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benneic/subscriptions","organizations_url":"https://api.github.com/users/benneic/orgs","repos_url":"https://api.github.com/users/benneic/repos","events_url":"https://api.github.com/users/benneic/events{/privacy}","received_events_url":"https://api.github.com/users/benneic/received_events","type":"User","site_admin":false},"created_at":"2014-01-14T02:36:54Z","updated_at":"2014-01-14T02:36:54Z","author_association":"NONE","body":"Hey @martijnvg can you explain how an aggregating percolator works? Does it retain running totals as you fire in documents in successive percolator get requests for aggregations like sum? \n\nFor example:\n\nWith an aggregating percolator I am expecting that I could filter a timestamp on a post by previous 2 days, then aggregate sum the likes on all posts, then filter again when sum_likes > 100.\n\nSo when first doc containing a post.likes=70 is queried against percolator, it has no match, then a subsequent post.likes=40 within the 2 day time range is tested against percolator and it matches. As new docs are tested against percolator and old posts are older than 2 days their post.likes are removed from the running sum_likes total?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32478830","html_url":"https://github.com/elastic/elasticsearch/issues/4245#issuecomment-32478830","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4245","id":32478830,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNDc4ODMw","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2014-01-16T15:32:16Z","updated_at":"2014-01-16T15:32:16Z","author_association":"MEMBER","body":"@beichhor Aggregations (and facets) in percolate api operate on the matching queries for a single percolate request. This can be useful if your percolate queries have extra metadata and in the percolate api you can then get analytics for the matching queries based on aggregations on this metadata. \n\n> Does it retain running totals as you fire in documents in successive percolator get requests for aggregations like sum?\n\nNo, it doesn't.\n","performed_via_github_app":null}]