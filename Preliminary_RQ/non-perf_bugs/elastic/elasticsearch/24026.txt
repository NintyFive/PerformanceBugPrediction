{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/24026","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24026/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24026/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24026/events","html_url":"https://github.com/elastic/elasticsearch/issues/24026","id":220730281,"node_id":"MDU6SXNzdWUyMjA3MzAyODE=","number":24026,"title":"GoogleCloudStorageBlobStoreRepositoryTests.testSnapshotAndRestore failure","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"labels":[{"id":60445228,"node_id":"MDU6TGFiZWw2MDQ0NTIyOA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest","name":">test","color":"5319e7","default":false,"description":"Issues or PRs that are addressing/adding tests"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"assignees":[{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2017-04-10T18:27:47Z","updated_at":"2017-04-10T19:08:59Z","closed_at":"2017-04-10T18:51:07Z","author_association":"MEMBER","active_lock_reason":null,"body":"Failure was on 5.x branch: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+5.x+multijob-unix-compatibility/os=fedora/668.\r\n\r\n```\r\n> Expected: an empty iterable\r\n   >      but: [<RemoteTransportException[[transport_client_node_s1][local[4]][indices:data/write/index]]; nested: NullPointerException;>]\r\n   > \tat __randomizedtesting.SeedInfo.seed([A275D6F5C772A3C9:6212B5861ABD5EFE]:0)\r\n   > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \tat org.elasticsearch.test.ESIntegTestCase.indexRandom(ESIntegTestCase.java:1443)\r\n   > \tat org.elasticsearch.test.ESIntegTestCase.indexRandom(ESIntegTestCase.java:1363)\r\n   > \tat org.elasticsearch.test.ESIntegTestCase.indexRandom(ESIntegTestCase.java:1347)\r\n   > \tat org.elasticsearch.test.ESIntegTestCase.indexRandom(ESIntegTestCase.java:1323)\r\n   > \tat org.elasticsearch.repositories.blobstore.ESBlobStoreRepositoryIntegTestCase.addRandomDocuments(ESBlobStoreRepositoryIntegTestCase.java:227)\r\n   > \tat org.elasticsearch.repositories.blobstore.ESBlobStoreRepositoryIntegTestCase.testSnapshotAndRestore(ESBlobStoreRepositoryIntegTestCase.java:62)\r\n```\r\n\r\nThe `NullPointerException` seems to be while indexing, here is the stacktrace:\r\n\r\n```\r\n  1> [2017-04-10T17:38:31,943][INFO ][o.e.r.g.GoogleCloudStorageBlobStoreRepositoryTests] Action Failed\r\n  1> org.elasticsearch.transport.RemoteTransportException: [transport_client_node_s1][local[4]][indices:data/write/index]\r\n  1> Caused by: java.lang.NullPointerException\r\n  1> \tat org.apache.lucene.index.DocumentsWriterPerThread.<init>(DocumentsWriterPerThread.java:190) ~[lucene-core-6.5.0.jar:6.5.0 4b16c9a10c3c00cafaf1fc92ec3276a7bc7b8c95 - jimczi - 2017-03-21 20:40:22]\r\n  1> \tat org.apache.lucene.index.DocumentsWriter.ensureInitialized(DocumentsWriter.java:410) ~[lucene-core-6.5.0.jar:6.5.0 4b16c9a10c3c00cafaf1fc92ec3276a7bc7b8c95 - jimczi - 2017-03-21 20:40:22]\r\n  1> \tat org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:473) ~[lucene-core-6.5.0.jar:6.5.0 4b16c9a10c3c00cafaf1fc92ec3276a7bc7b8c95 - jimczi - 2017-03-21 20:40:22]\r\n  1> \tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1569) ~[lucene-core-6.5.0.jar:6.5.0 4b16c9a10c3c00cafaf1fc92ec3276a7bc7b8c95 - jimczi - 2017-03-21 20:40:22]\r\n  1> \tat org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1314) ~[lucene-core-6.5.0.jar:6.5.0 4b16c9a10c3c00cafaf1fc92ec3276a7bc7b8c95 - jimczi - 2017-03-21 20:40:22]\r\n  1> \tat org.elasticsearch.index.engine.InternalEngine.index(InternalEngine.java:639) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.index.engine.InternalEngine.indexIntoLucene(InternalEngine.java:583) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.index.engine.InternalEngine.index(InternalEngine.java:483) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.index.shard.IndexShard.index(IndexShard.java:556) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.index.shard.IndexShard.index(IndexShard.java:545) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.bulk.TransportShardBulkAction.executeIndexRequestOnPrimary(TransportShardBulkAction.java:484) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.bulk.TransportShardBulkAction.executeBulkItemRequest(TransportShardBulkAction.java:143) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:113) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:69) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryShardReference.perform(TransportReplicationAction.java:939) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryShardReference.perform(TransportReplicationAction.java:908) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.support.replication.ReplicationOperation.execute(ReplicationOperation.java:113) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.support.replication.TransportReplicationAction$AsyncPrimaryAction.onResponse(TransportReplicationAction.java:322) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.support.replication.TransportReplicationAction$AsyncPrimaryAction.onResponse(TransportReplicationAction.java:264) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.support.replication.TransportReplicationAction$1.onResponse(TransportReplicationAction.java:888) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.support.replication.TransportReplicationAction$1.onResponse(TransportReplicationAction.java:885) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.index.shard.IndexShardOperationsLock.acquire(IndexShardOperationsLock.java:147) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.index.shard.IndexShard.acquirePrimaryOperationLock(IndexShard.java:1654) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.support.replication.TransportReplicationAction.acquirePrimaryShardReference(TransportReplicationAction.java:897) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.support.replication.TransportReplicationAction.access$400(TransportReplicationAction.java:93) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.support.replication.TransportReplicationAction$AsyncPrimaryAction.doRun(TransportReplicationAction.java:281) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryOperationTransportHandler.messageReceived(TransportReplicationAction.java:260) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryOperationTransportHandler.messageReceived(TransportReplicationAction.java:252) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:69) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.transport.TransportService$7.doRun(TransportService.java:627) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:638) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-5.4.0-SNAPSHOT.jar:5.4.0-SNAPSHOT]\r\n  1> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[?:1.8.0_121]\r\n  1> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[?:1.8.0_121]\r\n  1> \tat java.lang.Thread.run(Thread.java:745) ~[?:1.8.0_121]\r\n```","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}