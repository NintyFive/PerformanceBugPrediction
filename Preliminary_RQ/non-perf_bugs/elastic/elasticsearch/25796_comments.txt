[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/317270261","html_url":"https://github.com/elastic/elasticsearch/issues/25796#issuecomment-317270261","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25796","id":317270261,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNzI3MDI2MQ==","user":{"login":"yeikel","id":8935151,"node_id":"MDQ6VXNlcjg5MzUxNTE=","avatar_url":"https://avatars2.githubusercontent.com/u/8935151?v=4","gravatar_id":"","url":"https://api.github.com/users/yeikel","html_url":"https://github.com/yeikel","followers_url":"https://api.github.com/users/yeikel/followers","following_url":"https://api.github.com/users/yeikel/following{/other_user}","gists_url":"https://api.github.com/users/yeikel/gists{/gist_id}","starred_url":"https://api.github.com/users/yeikel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yeikel/subscriptions","organizations_url":"https://api.github.com/users/yeikel/orgs","repos_url":"https://api.github.com/users/yeikel/repos","events_url":"https://api.github.com/users/yeikel/events{/privacy}","received_events_url":"https://api.github.com/users/yeikel/received_events","type":"User","site_admin":false},"created_at":"2017-07-23T17:55:57Z","updated_at":"2017-07-23T17:56:08Z","author_association":"NONE","body":"@bport  Can you please add more information/background to the topic? I can't quite participate in the conversation with the limited information that you are providing. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/317353695","html_url":"https://github.com/elastic/elasticsearch/issues/25796#issuecomment-317353695","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25796","id":317353695,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNzM1MzY5NQ==","user":{"login":"bport","id":4381811,"node_id":"MDQ6VXNlcjQzODE4MTE=","avatar_url":"https://avatars2.githubusercontent.com/u/4381811?v=4","gravatar_id":"","url":"https://api.github.com/users/bport","html_url":"https://github.com/bport","followers_url":"https://api.github.com/users/bport/followers","following_url":"https://api.github.com/users/bport/following{/other_user}","gists_url":"https://api.github.com/users/bport/gists{/gist_id}","starred_url":"https://api.github.com/users/bport/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bport/subscriptions","organizations_url":"https://api.github.com/users/bport/orgs","repos_url":"https://api.github.com/users/bport/repos","events_url":"https://api.github.com/users/bport/events{/privacy}","received_events_url":"https://api.github.com/users/bport/received_events","type":"User","site_admin":false},"created_at":"2017-07-24T08:27:16Z","updated_at":"2017-07-24T08:27:16Z","author_association":"NONE","body":"@yeikel In a sorting script I need to use the arcdistance for each location in a GeoPoints list.\r\nHowever even if I can iterate this list I can use arcDistance on each GeoPoint because arcDistance is a GeoPoints method. And the implementation return the arcDistance for the 1st point.\r\nSo in order to allow script to get arcDistance for each point I think it can be a good idea to move arcDistance implementation to GeoPoint class.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/323015388","html_url":"https://github.com/elastic/elasticsearch/issues/25796#issuecomment-323015388","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25796","id":323015388,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzAxNTM4OA==","user":{"login":"bport","id":4381811,"node_id":"MDQ6VXNlcjQzODE4MTE=","avatar_url":"https://avatars2.githubusercontent.com/u/4381811?v=4","gravatar_id":"","url":"https://api.github.com/users/bport","html_url":"https://github.com/bport","followers_url":"https://api.github.com/users/bport/followers","following_url":"https://api.github.com/users/bport/following{/other_user}","gists_url":"https://api.github.com/users/bport/gists{/gist_id}","starred_url":"https://api.github.com/users/bport/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bport/subscriptions","organizations_url":"https://api.github.com/users/bport/orgs","repos_url":"https://api.github.com/users/bport/repos","events_url":"https://api.github.com/users/bport/events{/privacy}","received_events_url":"https://api.github.com/users/bport/received_events","type":"User","site_admin":false},"created_at":"2017-08-17T09:18:07Z","updated_at":"2017-08-17T09:18:07Z","author_association":"NONE","body":"@yeikel if you need extra info let me know","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/323350707","html_url":"https://github.com/elastic/elasticsearch/issues/25796#issuecomment-323350707","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25796","id":323350707,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzM1MDcwNw==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2017-08-18T13:16:45Z","updated_at":"2017-08-18T13:16:45Z","author_association":"MEMBER","body":"Possibly related to https://github.com/elastic/elasticsearch/issues/24946","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/323350878","html_url":"https://github.com/elastic/elasticsearch/issues/25796#issuecomment-323350878","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25796","id":323350878,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzM1MDg3OA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-08-18T13:17:37Z","updated_at":"2017-08-18T13:17:47Z","author_association":"CONTRIBUTOR","body":"Discussed in FixitFriday. It is indeed problematic that it only applies to the first geo-point. We might not want to put them on GeoPoint in order to keep that class lightweight but there is also a possibility of having a whitelisted utility class for such methods.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/323692949","html_url":"https://github.com/elastic/elasticsearch/issues/25796#issuecomment-323692949","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25796","id":323692949,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzY5Mjk0OQ==","user":{"login":"bport","id":4381811,"node_id":"MDQ6VXNlcjQzODE4MTE=","avatar_url":"https://avatars2.githubusercontent.com/u/4381811?v=4","gravatar_id":"","url":"https://api.github.com/users/bport","html_url":"https://github.com/bport","followers_url":"https://api.github.com/users/bport/followers","following_url":"https://api.github.com/users/bport/following{/other_user}","gists_url":"https://api.github.com/users/bport/gists{/gist_id}","starred_url":"https://api.github.com/users/bport/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bport/subscriptions","organizations_url":"https://api.github.com/users/bport/orgs","repos_url":"https://api.github.com/users/bport/repos","events_url":"https://api.github.com/users/bport/events{/privacy}","received_events_url":"https://api.github.com/users/bport/received_events","type":"User","site_admin":false},"created_at":"2017-08-21T09:23:05Z","updated_at":"2017-08-21T09:23:05Z","author_association":"NONE","body":"@jpountz Ok thanks for taking care of it, if I can help in any way let me know","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/346176459","html_url":"https://github.com/elastic/elasticsearch/issues/25796#issuecomment-346176459","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25796","id":346176459,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjE3NjQ1OQ==","user":{"login":"lukas-gitl","id":7819023,"node_id":"MDQ6VXNlcjc4MTkwMjM=","avatar_url":"https://avatars3.githubusercontent.com/u/7819023?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-gitl","html_url":"https://github.com/lukas-gitl","followers_url":"https://api.github.com/users/lukas-gitl/followers","following_url":"https://api.github.com/users/lukas-gitl/following{/other_user}","gists_url":"https://api.github.com/users/lukas-gitl/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-gitl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-gitl/subscriptions","organizations_url":"https://api.github.com/users/lukas-gitl/orgs","repos_url":"https://api.github.com/users/lukas-gitl/repos","events_url":"https://api.github.com/users/lukas-gitl/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-gitl/received_events","type":"User","site_admin":false},"created_at":"2017-11-21T22:05:19Z","updated_at":"2017-11-21T22:05:19Z","author_association":"NONE","body":"Also very interested in this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/346195215","html_url":"https://github.com/elastic/elasticsearch/issues/25796#issuecomment-346195215","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25796","id":346195215,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjE5NTIxNQ==","user":{"login":"lukas-gitl","id":7819023,"node_id":"MDQ6VXNlcjc4MTkwMjM=","avatar_url":"https://avatars3.githubusercontent.com/u/7819023?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-gitl","html_url":"https://github.com/lukas-gitl","followers_url":"https://api.github.com/users/lukas-gitl/followers","following_url":"https://api.github.com/users/lukas-gitl/following{/other_user}","gists_url":"https://api.github.com/users/lukas-gitl/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-gitl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-gitl/subscriptions","organizations_url":"https://api.github.com/users/lukas-gitl/orgs","repos_url":"https://api.github.com/users/lukas-gitl/repos","events_url":"https://api.github.com/users/lukas-gitl/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-gitl/received_events","type":"User","site_admin":false},"created_at":"2017-11-21T23:30:29Z","updated_at":"2017-11-21T23:30:29Z","author_association":"NONE","body":"We are now doing something like this to compute the minimum distance to nested children. Note that you will need to enable include_in_root for the nesting. Enjoy.\r\n```painless\r\ndouble dist=Double.MAX_VALUE; \r\nfor (int i=0; i<doc['venues.location'].values.length; i++) { \r\n    double lat1 = doc['venues.location'][i].lat;\r\n    double lon1 = doc['venues.location'][i].lon;\r\n    double lat2 = 77.096080;\r\n    double lon2 = 28.51818;\r\n    double TO_METERS = 6371008.7714D;\r\n    double TO_RADIANS = Math.PI / 180D;\r\n    double x1 = lat1 * TO_RADIANS;\r\n    double x2 = lat2 * TO_RADIANS;\r\n    double h1 = 1 - Math.cos(x1 - x2);\r\n    double h2 = 1 - Math.cos((lon1 - lon2) * TO_RADIANS);\r\n    double h = h1 + Math.cos(x1) * Math.cos(x2) * h2;\r\n    double cdist = TO_METERS * 2 * Math.asin(Math.min(1, Math.sqrt(h * 0.5)));\r\n    dist = Math.min(dist, cdist);\r\n}\r\nreturn dist;\r\n```\r\n\r\nPS: *Not proud of this but it works*.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/391756449","html_url":"https://github.com/elastic/elasticsearch/issues/25796#issuecomment-391756449","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25796","id":391756449,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTc1NjQ0OQ==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2018-05-24T15:26:44Z","updated_at":"2018-05-24T15:26:44Z","author_association":"MEMBER","body":"Superseded by #24946","performed_via_github_app":null}]