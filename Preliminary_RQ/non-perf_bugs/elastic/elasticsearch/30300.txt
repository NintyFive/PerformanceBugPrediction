{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/30300","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30300/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30300/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30300/events","html_url":"https://github.com/elastic/elasticsearch/issues/30300","id":319175632,"node_id":"MDU6SXNzdWUzMTkxNzU2MzI=","number":30300,"title":"[CI] Had to resort to force-closing job, something went wrong?","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-05-01T11:26:02Z","updated_at":"2019-02-13T12:42:27Z","closed_at":"2019-01-24T09:18:48Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"https://internal-ci.elastic.co/job/elastic+x-pack-elasticsearch+6.2+matrix-java-periodic/ES_BUILD_JAVA=java10,ES_RUNTIME_JAVA=java8,nodes=linux/25/console failed. The REPRODUCE WITH line does not reproduce this for me:\r\n\r\n```\r\nREPRODUCE WITH: ./gradlew :x-pack-elasticsearch:plugin:ml:internalClusterTest \\\r\n  -Dtests.seed=AE4F7001DFF3186A \\\r\n  -Dtests.class=org.elasticsearch.xpack.ml.integration.TooManyJobsIT \\\r\n  -Dtests.method=\"testMultipleNodes\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=en-CA \\\r\n  -Dtests.timezone=Indian/Maldives\r\n```\r\n\r\nIt seems that there was some confusion about the existence or otherwise of job `max-number-of-jobs-limit-job-130`:\r\n\r\n```\r\n  1> [2018-05-01T04:45:24,023][INFO ][o.e.x.m.j.p.a.AutodetectProcessManager] [node_t3] Closing job [max-number-of-jobs-limit-job-91], because [close job (api)]\r\n  1> [2018-05-01T04:45:24,025][INFO ][o.e.x.m.j.p.a.o.AutoDetectResultProcessor] [max-number-of-jobs-limit-job-91] 0 buckets parsed from autodetect output\r\n  1> [2018-05-01T04:45:24,037][INFO ][o.e.x.m.j.p.a.AutodetectCommunicator] [max-number-of-jobs-limit-job-91] job closed\r\n  1> [2018-05-01T04:45:24,176][INFO ][o.e.x.m.j.p.a.AutodetectProcessManager] [node_t3] Closing job [max-number-of-jobs-limit-job-148], because [close job (api)]\r\n  1> [2018-05-01T04:45:24,179][INFO ][o.e.x.m.j.p.a.o.AutoDetectResultProcessor] [max-number-of-jobs-limit-job-148] 0 buckets parsed from autodetect output\r\n  1> [2018-05-01T04:45:24,188][INFO ][o.e.x.m.j.p.a.AutodetectCommunicator] [max-number-of-jobs-limit-job-148] job closed\r\n  1> [2018-05-01T04:45:24,277][INFO ][o.e.x.m.j.p.a.AutodetectProcessManager] [node_t3] Closing job [max-number-of-jobs-limit-job-73], because [close job (api)]\r\n  2> NOTE: leaving temporary files on disk at: /var/lib/jenkins/workspace/elastic+x-pack-elasticsearch+6.2+matrix-java-periodic/ES_BUILD_JAVA/java10/ES_RUNTIME_JAVA/java8/nodes/linux/elasticsearch-extra/x-pack-elasticsearch/plugin/ml/build/testrun/internalClusterTest/J0/temp/org.elasticsearch.xpack.ml.integration.TooManyJobsIT_AE4F7001DFF3186A-001\r\n  2> NOTE: test params are: codec=Asserting(Lucene70): {}, docValues:{}, maxPointsInLeafNode=422, maxMBSortInHeap=7.53989832981585, sim=RandomSimilarity(queryNorm=true): {}, locale=en-CA, timezone=Indian/Maldives\r\n  2> NOTE: Linux 3.10.0-693.17.1.el7.x86_64 amd64/Oracle Corporation 1.8.0_162 (64-bit)/cpus=8,threads=1,free=316431048,total=508559360\r\n  2> NOTE: All tests run in this JVM: [AutodetectResultProcessorIT, JobProviderIT, TooManyJobsIT]\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n  1> [2018-05-01T04:45:24,280][INFO ][o.e.x.m.j.p.a.o.AutoDetectResultProcessor] [max-number-of-jobs-limit-job-73] 0 buckets parsed from autodetect output\r\n* What went wrong:\r\nExecution failed for task ':x-pack-elasticsearch:plugin:ml:internalClusterTest'.\r\n  1> [2018-05-01T04:45:24,289][INFO ][o.e.x.m.j.p.a.AutodetectCommunicator] [max-number-of-jobs-limit-job-73] job closed\r\n> There were test failures: 9 suites, 41 tests, 1 error [seed: AE4F7001DFF3186A]\r\n  1> [2018-05-01T04:45:24,370][INFO ][o.e.x.m.j.p.a.AutodetectProcessManager] [node_t3] Closing job [max-number-of-jobs-limit-job-205], because [close job (api)]\r\n\r\n  1> [2018-05-01T04:45:24,382][INFO ][o.e.x.m.j.p.a.o.AutoDetectResultProcessor] [max-number-of-jobs-limit-job-205] 0 buckets parsed from autodetect output\r\n* Try:\r\n  1> [2018-05-01T04:45:24,394][INFO ][o.e.x.m.j.p.a.AutodetectCommunicator] [max-number-of-jobs-limit-job-205] job closed\r\nRun with --stacktrace option to get the stack trace. Run with --debug option to get more log output. Run with --scan to get full insights.\r\n  1> [2018-05-01T04:45:24,455][INFO ][o.e.x.m.j.p.a.AutodetectProcessManager] [node_t3] Closing job [max-number-of-jobs-limit-job-55], because [close job (api)]\r\n\r\n  1> [2018-05-01T04:45:24,457][INFO ][o.e.x.m.j.p.a.o.AutoDetectResultProcessor] [max-number-of-jobs-limit-job-55] 0 buckets parsed from autodetect output\r\n* Get more help at https://help.gradle.org\r\n  1> [2018-05-01T04:45:24,467][INFO ][o.e.x.m.j.p.a.AutodetectCommunicator] [max-number-of-jobs-limit-job-55] job closed\r\n\r\n  1> [2018-05-01T04:45:24,552][INFO ][o.e.x.m.j.p.a.AutodetectProcessManager] [node_t3] Closing job [max-number-of-jobs-limit-job-130], because [close job (api)]\r\nBUILD FAILED in 32m 43s\r\n  1> [2018-05-01T04:45:24,555][INFO ][o.e.x.m.j.p.a.o.AutoDetectResultProcessor] [max-number-of-jobs-limit-job-130] 0 buckets parsed from autodetect output\r\n  1> [2018-05-01T04:45:24,564][INFO ][o.e.x.m.j.p.a.AutodetectCommunicator] [max-number-of-jobs-limit-job-130] job closed\r\n  1> [2018-05-01T04:45:44,660][WARN ][o.e.x.m.i.TooManyJobsIT  ] Force-closing jobs failed.\r\n  1> java.util.concurrent.ExecutionException: RemoteTransportException[[node_t1][127.0.0.1:55882][cluster:admin/xpack/ml/job/close]]; nested: ElasticsearchException[Failed to force close job [_all] with [1] failures, rethrowing last, all Exceptions: [the task with id job-max-number-of-jobs-limit-job-130 doesn't exist]]; nested: ResourceNotFoundException[the task with id job-max-number-of-jobs-limit-job-130 doesn't exist];\r\n  1>  at org.elasticsearch.common.util.concurrent.BaseFuture$Sync.getValue(BaseFuture.java:265) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.common.util.concurrent.BaseFuture$Sync.get(BaseFuture.java:252) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.common.util.concurrent.BaseFuture.get(BaseFuture.java:94) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.xpack.ml.support.BaseMlIntegTestCase.deleteAllJobs(BaseMlIntegTestCase.java:337) [test/:?]\r\n  1>  at org.elasticsearch.xpack.ml.support.BaseMlIntegTestCase.cleanupWorkaround(BaseMlIntegTestCase.java:214) [test/:?]\r\n  1>  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n  1>  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n  1>  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n  1>  at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_162]\r\n  1>  at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1713) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:965) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:49) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n  1>  at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n  1>  at org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n  1>  at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n  1>  at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n  1>  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:817) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:468) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:916) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:802) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:852) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:863) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n  1>  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:41) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n  1>  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n  1>  at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n  1>  at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n  1>  at org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:54) [lucene-test-framework-7.2.1.jar:7.2.1 b2b6438b37073bee1fca40374e85bf91aa457c0b - ubuntu - 2018-01-10 00:48:44]\r\n  1>  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368) [randomizedtesting-runner-2.5.2.jar:?]\r\n  1>  at java.lang.Thread.run(Thread.java:748) [?:1.8.0_162]\r\n  1> Caused by: org.elasticsearch.transport.RemoteTransportException: [node_t1][127.0.0.1:55882][cluster:admin/xpack/ml/job/close]\r\n  1> Caused by: org.elasticsearch.ElasticsearchException: Failed to force close job [_all] with [1] failures, rethrowing last, all Exceptions: [the task with id job-max-number-of-jobs-limit-job-130 doesn't exist]\r\n  1>  at org.elasticsearch.xpack.ml.action.TransportCloseJobAction$2.sendResponseOrFailure(TransportCloseJobAction.java:367) ~[main/:?]\r\n  1>  at org.elasticsearch.xpack.ml.action.TransportCloseJobAction$2.onFailure(TransportCloseJobAction.java:346) ~[main/:?]\r\n  1>  at org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:68) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.action.support.ContextPreservingActionListener.onFailure(ContextPreservingActionListener.java:50) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.action.support.TransportAction$1.onFailure(TransportAction.java:91) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.action.support.master.TransportMasterNodeAction$AsyncSingleAction$1.onFailure(TransportMasterNodeAction.java:160) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.xpack.core.persistent.RemovePersistentTaskAction$TransportAction$1.onFailure(RemovePersistentTaskAction.java:164) ~[x-pack-core-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.xpack.core.persistent.PersistentTasksClusterService$3.onFailure(PersistentTasksClusterService.java:162) ~[x-pack-core-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.cluster.service.MasterService$SafeClusterStateTaskListener.onFailure(MasterService.java:473) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.cluster.service.MasterService$TaskOutputs.notifyFailedTasks(MasterService.java:408) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.cluster.service.MasterService.runTasks(MasterService.java:199) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.cluster.service.MasterService$Batcher.run(MasterService.java:133) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.cluster.service.TaskBatcher.runIfNotProcessed(TaskBatcher.java:150) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.cluster.service.TaskBatcher$BatchedTask.run(TaskBatcher.java:188) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:573) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:244) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:207) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_162]\r\n  1>  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_162]\r\n  1>  ... 1 more\r\n  1> Caused by: org.elasticsearch.ResourceNotFoundException: the task with id job-max-number-of-jobs-limit-job-130 doesn't exist\r\n  1>  at org.elasticsearch.xpack.core.persistent.PersistentTasksClusterService$3.execute(PersistentTasksClusterService.java:156) ~[x-pack-core-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.cluster.ClusterStateUpdateTask.execute(ClusterStateUpdateTask.java:45) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.cluster.service.MasterService.executeTasks(MasterService.java:643) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.cluster.service.MasterService.calculateTaskOutputs(MasterService.java:273) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.cluster.service.MasterService.runTasks(MasterService.java:198) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.cluster.service.MasterService$Batcher.run(MasterService.java:133) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.cluster.service.TaskBatcher.runIfNotProcessed(TaskBatcher.java:150) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.cluster.service.TaskBatcher$BatchedTask.run(TaskBatcher.java:188) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:573) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:244) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:207) ~[elasticsearch-6.2.5-SNAPSHOT.jar:6.2.5-SNAPSHOT]\r\n  1>  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_162]\r\n  1>  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_162]\r\n  1>  ... 1 more\r\n```\r\n\r\nThis led to the following failure:\r\n\r\n```\r\njava.lang.RuntimeException: Had to resort to force-closing job, something went wrong?\r\n  at __randomizedtesting.SeedInfo.seed([AE4F7001DFF3186A:DADB3F1D7CC6C5]:0)\r\n  at org.elasticsearch.xpack.ml.support.BaseMlIntegTestCase.deleteAllJobs(BaseMlIntegTestCase.java:342)\r\n  at org.elasticsearch.xpack.ml.support.BaseMlIntegTestCase.cleanupWorkaround(BaseMlIntegTestCase.java:214)\r\n  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n  at java.lang.reflect.Method.invoke(Method.java:498)\r\n  at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1713)\r\n  at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:965)\r\n  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n  at org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:49)\r\n  at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\r\n  at org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48)\r\n  at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\r\n  at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47)\r\n  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368)\r\n  at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:817)\r\n  at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:468)\r\n  at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:916)\r\n  at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:802)\r\n  at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:852)\r\n  at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:863)\r\n  at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\r\n  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n  at org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:41)\r\n  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\r\n  at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\r\n  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n  at org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)\r\n  at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47)\r\n  at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\r\n  at org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:54)\r\n  at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n  at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368)\r\n  at java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.util.concurrent.ExecutionException: RemoteTransportException[[node_t1][127.0.0.1:55882][cluster:admin/xpack/ml/job/close]]; nested: IllegalStateException[timed out after 20s];\r\n  at org.elasticsearch.common.util.concurrent.BaseFuture$Sync.getValue(BaseFuture.java:265)\r\n  at org.elasticsearch.common.util.concurrent.BaseFuture$Sync.get(BaseFuture.java:252)\r\n  at org.elasticsearch.common.util.concurrent.BaseFuture.get(BaseFuture.java:94)\r\n  at org.elasticsearch.xpack.ml.support.BaseMlIntegTestCase.deleteAllJobs(BaseMlIntegTestCase.java:329)\r\n  ... 36 more\r\nCaused by: RemoteTransportException[[node_t1][127.0.0.1:55882][cluster:admin/xpack/ml/job/close]]; nested: IllegalStateException[timed out after 20s];\r\nCaused by: java.lang.IllegalStateException: timed out after 20s\r\n  at org.elasticsearch.xpack.core.persistent.PersistentTasksService$2.onTimeout(PersistentTasksService.java:181)\r\n  at org.elasticsearch.cluster.ClusterStateObserver$ContextPreservingListener.onTimeout(ClusterStateObserver.java:317)\r\n  at org.elasticsearch.cluster.ClusterStateObserver$ObserverClusterStateListener.onTimeout(ClusterStateObserver.java:244)\r\n  at org.elasticsearch.cluster.service.ClusterApplierService$NotifyTimeout.run(ClusterApplierService.java:581)\r\n  at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:573)\r\n  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n  at java.lang.Thread.run(Thread.java:748)\r\n\r\n```\r\n","closed_by":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"performed_via_github_app":null}