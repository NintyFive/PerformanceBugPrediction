[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/539408048","html_url":"https://github.com/elastic/elasticsearch/issues/47718#issuecomment-539408048","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47718","id":539408048,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTQwODA0OA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-10-08T08:26:51Z","updated_at":"2019-10-08T08:26:51Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Build)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/540699417","html_url":"https://github.com/elastic/elasticsearch/issues/47718#issuecomment-540699417","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47718","id":540699417,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDY5OTQxNw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2019-10-10T17:53:16Z","updated_at":"2019-10-10T17:53:16Z","author_association":"MEMBER","body":"I don't see anything obvious in the changelog around that time. This seems something specific to CCR documentation testing setup, not a build infrastructure issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/540699492","html_url":"https://github.com/elastic/elasticsearch/issues/47718#issuecomment-540699492","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47718","id":540699492,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDY5OTQ5Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-10-10T17:53:27Z","updated_at":"2019-10-10T17:53:27Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/CCR)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/540965152","html_url":"https://github.com/elastic/elasticsearch/issues/47718#issuecomment-540965152","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47718","id":540965152,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDk2NTE1Mg==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2019-10-11T08:18:03Z","updated_at":"2019-10-11T08:18:03Z","author_association":"CONTRIBUTOR","body":"This is a race in the doc tests, unfortunately one that we can't handle with the current YAML test infrastructure. The problem is that defining a remote cluster is currently done through the settings infrastructure, and there's no guarantee that when \r\n\r\n```\r\nPUT _cluster/settings\r\n{\r\n  \"persistent\": {\r\n    \"cluster\": {\r\n      \"remote\": {\r\n        \"cluster_one\": {\r\n```\r\n\r\nreturns that the nodes have actually connected to the remote cluster.\r\n\r\nThis means that subsequent requests to the cluster can fail if a connection has not been established yet by the time a request comes in.\r\n\r\nIn an ideal world we would have a proper API for defining remote clusters, similar to what we have for defining repositories. We could then, similar to repositories, make sure that the remote clusters are correctly connected to before acking to the user. In lack of this, I see only these options here:\r\n- Add random activity (akin to a sleep) to the YML test before having it use the connection.\r\n- Add some kind of wait-for / assertBusy logic to the yml tests (which would have been handy in many other situations as well).\r\n- Adapt the connection behavior for remote clusters to shortly block the cluster state update thread on a first definition of a cluster for up to 3 seconds or so to establish an initial connection (i.e. something similar to what we do with `NodeConnectionsService`.\r\n\r\n> I see other exceptions about remote clusters in the logs near the bottom:\r\n\r\nThese are unrelated, the docs define remote clusters in `remote-clusters.asciidoc` that can't be connected to. As an enhancement, we could (similar to `cluster_one`) have those point at an actual cluster.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/544957858","html_url":"https://github.com/elastic/elasticsearch/issues/47718#issuecomment-544957858","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47718","id":544957858,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDk1Nzg1OA==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2019-10-22T13:19:06Z","updated_at":"2019-10-22T13:19:19Z","author_association":"MEMBER","body":"> Add some kind of wait-for / assertBusy logic to the yml tests (which would have been handy in many other situations as well).\r\n\r\nI opened https://github.com/elastic/elasticsearch/pull/48353 for this but I'm not sure it will be accepted.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/545467947","html_url":"https://github.com/elastic/elasticsearch/issues/47718#issuecomment-545467947","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47718","id":545467947,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTQ2Nzk0Nw==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2019-10-23T14:21:38Z","updated_at":"2019-10-23T14:21:38Z","author_association":"CONTRIBUTOR","body":"`get-ccr-stats` was failing reasonably often, so I have muted it in master, 7.x and 7.5","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/545952709","html_url":"https://github.com/elastic/elasticsearch/issues/47718#issuecomment-545952709","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47718","id":545952709,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTk1MjcwOQ==","user":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"created_at":"2019-10-24T14:45:03Z","updated_at":"2019-10-24T14:45:03Z","author_association":"CONTRIBUTOR","body":"Another occurrence in https://gradle-enterprise.elastic.co/s/6effjdor5vkzg on the 7.x branch.\r\n\r\nThis time its `put-auto-follow-pattern`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/545992319","html_url":"https://github.com/elastic/elasticsearch/issues/47718#issuecomment-545992319","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47718","id":545992319,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTk5MjMxOQ==","user":{"login":"tbrooks8","id":862472,"node_id":"MDQ6VXNlcjg2MjQ3Mg==","avatar_url":"https://avatars3.githubusercontent.com/u/862472?v=4","gravatar_id":"","url":"https://api.github.com/users/tbrooks8","html_url":"https://github.com/tbrooks8","followers_url":"https://api.github.com/users/tbrooks8/followers","following_url":"https://api.github.com/users/tbrooks8/following{/other_user}","gists_url":"https://api.github.com/users/tbrooks8/gists{/gist_id}","starred_url":"https://api.github.com/users/tbrooks8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbrooks8/subscriptions","organizations_url":"https://api.github.com/users/tbrooks8/orgs","repos_url":"https://api.github.com/users/tbrooks8/repos","events_url":"https://api.github.com/users/tbrooks8/events{/privacy}","received_events_url":"https://api.github.com/users/tbrooks8/received_events","type":"User","site_admin":false},"created_at":"2019-10-24T16:14:23Z","updated_at":"2019-10-24T16:14:23Z","author_association":"CONTRIBUTOR","body":"https://github.com/elastic/elasticsearch/pull/47891 should fix this issue on master and 7.x.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/547830096","html_url":"https://github.com/elastic/elasticsearch/issues/47718#issuecomment-547830096","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47718","id":547830096,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzgzMDA5Ng==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2019-10-30T10:16:01Z","updated_at":"2019-10-30T10:16:01Z","author_association":"CONTRIBUTOR","body":"> get-ccr-stats was failing reasonably often, so I have muted it in master, 7.x and 7.5\r\n\r\nWith this now fixed, I've unmuted get-ccr-stats on these branches","performed_via_github_app":null}]