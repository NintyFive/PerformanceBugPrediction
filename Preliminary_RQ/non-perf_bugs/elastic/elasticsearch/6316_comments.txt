[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44267623","html_url":"https://github.com/elastic/elasticsearch/issues/6316#issuecomment-44267623","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6316","id":44267623,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjY3NjIz","user":{"login":"apatrida","id":182340,"node_id":"MDQ6VXNlcjE4MjM0MA==","avatar_url":"https://avatars3.githubusercontent.com/u/182340?v=4","gravatar_id":"","url":"https://api.github.com/users/apatrida","html_url":"https://github.com/apatrida","followers_url":"https://api.github.com/users/apatrida/followers","following_url":"https://api.github.com/users/apatrida/following{/other_user}","gists_url":"https://api.github.com/users/apatrida/gists{/gist_id}","starred_url":"https://api.github.com/users/apatrida/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apatrida/subscriptions","organizations_url":"https://api.github.com/users/apatrida/orgs","repos_url":"https://api.github.com/users/apatrida/repos","events_url":"https://api.github.com/users/apatrida/events{/privacy}","received_events_url":"https://api.github.com/users/apatrida/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T12:17:23Z","updated_at":"2014-05-27T12:17:23Z","author_association":"CONTRIBUTOR","body":"Other note, for transport client SniffNodes is set to false\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68386537","html_url":"https://github.com/elastic/elasticsearch/issues/6316#issuecomment-68386537","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6316","id":68386537,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Mzg2NTM3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-30T19:09:05Z","updated_at":"2014-12-30T19:09:05Z","author_association":"CONTRIBUTOR","body":"Hi @jaysonminard \n\nSorry for taking so long to get to this.  Is this issue still present on v1.4?  If so, if you could provide some code which reproduces the problem (albeit erratically) it'd be a good start for finding the problem.\n\nthanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/71208052","html_url":"https://github.com/elastic/elasticsearch/issues/6316#issuecomment-71208052","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6316","id":71208052,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjA4MDUy","user":{"login":"opgalarza","id":10526489,"node_id":"MDQ6VXNlcjEwNTI2NDg5","avatar_url":"https://avatars1.githubusercontent.com/u/10526489?v=4","gravatar_id":"","url":"https://api.github.com/users/opgalarza","html_url":"https://github.com/opgalarza","followers_url":"https://api.github.com/users/opgalarza/followers","following_url":"https://api.github.com/users/opgalarza/following{/other_user}","gists_url":"https://api.github.com/users/opgalarza/gists{/gist_id}","starred_url":"https://api.github.com/users/opgalarza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opgalarza/subscriptions","organizations_url":"https://api.github.com/users/opgalarza/orgs","repos_url":"https://api.github.com/users/opgalarza/repos","events_url":"https://api.github.com/users/opgalarza/events{/privacy}","received_events_url":"https://api.github.com/users/opgalarza/received_events","type":"User","site_admin":false},"created_at":"2015-01-23T15:19:59Z","updated_at":"2015-01-26T18:26:12Z","author_association":"NONE","body":"Hi @clintongormley,\n\nWe are currently facing this issue in our environment. We have a cluster of 4 machines. 1 of them functions as a master and the 3 others as data nodes.  In our code, we spawn 10 threads and each one gets a client instance as follows\n\nrun method in the thread\n\n```\n  @Override\npublic void run() {\n    Client client = ESClient.getClient(clusterName,hostName,port);\n\n    List<String> errors = new ArrayList<String>();\n    String indexName = outputInfo.getElasticSearch().getIndexName();\n    String typeName = outputInfo.getElasticSearch().getTypeName();\n\n    for(Map<String, Object> recordToPersist: recordsToPersist){ \n        String line = Utils.getJsonFromObject(recordToPersist);\n        try{\n            ESService.putDocument(client, line, indexName, typeName);\n        } catch(Exception e){\n            errors.add(line);\n        }\n    }\n    if(!errors.isEmpty()){\n        logErrors(errors,outputInfo.getElasticSearch().getErrorLogFile());\n    }\n}\n```\n\nThis is the putDocument method implementation :+1: \n\n```\npublic static IndexResponse putDocument(Client client, String jsonString, String indexName, String typeName) {  \n    IndexResponse indexResponse = client.prepareIndex(indexName, typeName).setSource(jsonString).execute().actionGet();     \n    return indexResponse;\n}\n```\n\nand at some point we get the following exception :+1: \n\norg.elasticsearch.client.transport.NoNodeAvailableException: None of the configured nodes are available: []\nat org.elasticsearch.client.transport.TransportClientNodesService.ensureNodesAreAvailable(TransportClientNodesService.java:278)\nat org.elasticsearch.client.transport.TransportClientNodesService.execute(TransportClientNodesService.java:197)\nat org.elasticsearch.client.transport.support.InternalTransportClient.execute(InternalTransportClient.java:106)\nat org.elasticsearch.client.support.AbstractClient.index(AbstractClient.java:98)\nat org.elasticsearch.client.transport.TransportClient.index(TransportClient.java:334)\nat org.elasticsearch.action.index.IndexRequestBuilder.doExecute(IndexRequestBuilder.java:313)\nat org.elasticsearch.action.ActionRequestBuilder.execute(ActionRequestBuilder.java:91)\nat org.elasticsearch.action.ActionRequestBuilder.execute(ActionRequestBuilder.java:65)\nat com.manwin.cloud.service.ESService.putDocument(ESService.java:39)\nat com.manwin.cloud.elasticsearch.ElasticSearchPersistentWorker.run(ElasticSearchPersistentWorker.java:85)\nat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\nat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)\nat java.util.concurrent.FutureTask.run(FutureTask.java:166)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\nat java.lang.Thread.run(Thread.java:722)\n\nWe are using elasticsearch version 1.4.1. Hope this helps. In case you need more information please let me know.\n\nCheers\nOmar\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/71512711","html_url":"https://github.com/elastic/elasticsearch/issues/6316#issuecomment-71512711","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6316","id":71512711,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTEyNzEx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-01-26T18:38:55Z","updated_at":"2015-01-26T18:38:55Z","author_association":"CONTRIBUTOR","body":"@opgalarza presumably your nodes are being overwhelmed by the indexing requests - you want to look at the cluster logs, rather than the client logs.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/71513183","html_url":"https://github.com/elastic/elasticsearch/issues/6316#issuecomment-71513183","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6316","id":71513183,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTEzMTgz","user":{"login":"opgalarza","id":10526489,"node_id":"MDQ6VXNlcjEwNTI2NDg5","avatar_url":"https://avatars1.githubusercontent.com/u/10526489?v=4","gravatar_id":"","url":"https://api.github.com/users/opgalarza","html_url":"https://github.com/opgalarza","followers_url":"https://api.github.com/users/opgalarza/followers","following_url":"https://api.github.com/users/opgalarza/following{/other_user}","gists_url":"https://api.github.com/users/opgalarza/gists{/gist_id}","starred_url":"https://api.github.com/users/opgalarza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opgalarza/subscriptions","organizations_url":"https://api.github.com/users/opgalarza/orgs","repos_url":"https://api.github.com/users/opgalarza/repos","events_url":"https://api.github.com/users/opgalarza/events{/privacy}","received_events_url":"https://api.github.com/users/opgalarza/received_events","type":"User","site_admin":false},"created_at":"2015-01-26T18:41:37Z","updated_at":"2015-01-26T18:41:37Z","author_association":"NONE","body":"Ok @clintongormley , I will check that part in the cluster logs and keep you posted.\n\nCheers\nOmar\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/71516744","html_url":"https://github.com/elastic/elasticsearch/issues/6316#issuecomment-71516744","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6316","id":71516744,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTE2NzQ0","user":{"login":"apatrida","id":182340,"node_id":"MDQ6VXNlcjE4MjM0MA==","avatar_url":"https://avatars3.githubusercontent.com/u/182340?v=4","gravatar_id":"","url":"https://api.github.com/users/apatrida","html_url":"https://github.com/apatrida","followers_url":"https://api.github.com/users/apatrida/followers","following_url":"https://api.github.com/users/apatrida/following{/other_user}","gists_url":"https://api.github.com/users/apatrida/gists{/gist_id}","starred_url":"https://api.github.com/users/apatrida/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apatrida/subscriptions","organizations_url":"https://api.github.com/users/apatrida/orgs","repos_url":"https://api.github.com/users/apatrida/repos","events_url":"https://api.github.com/users/apatrida/events{/privacy}","received_events_url":"https://api.github.com/users/apatrida/received_events","type":"User","site_admin":false},"created_at":"2015-01-26T19:02:08Z","updated_at":"2015-01-26T19:02:08Z","author_association":"CONTRIBUTOR","body":"My code had no indexing other way, was read-only on the index.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/71516909","html_url":"https://github.com/elastic/elasticsearch/issues/6316#issuecomment-71516909","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6316","id":71516909,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTE2OTA5","user":{"login":"apatrida","id":182340,"node_id":"MDQ6VXNlcjE4MjM0MA==","avatar_url":"https://avatars3.githubusercontent.com/u/182340?v=4","gravatar_id":"","url":"https://api.github.com/users/apatrida","html_url":"https://github.com/apatrida","followers_url":"https://api.github.com/users/apatrida/followers","following_url":"https://api.github.com/users/apatrida/following{/other_user}","gists_url":"https://api.github.com/users/apatrida/gists{/gist_id}","starred_url":"https://api.github.com/users/apatrida/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apatrida/subscriptions","organizations_url":"https://api.github.com/users/apatrida/orgs","repos_url":"https://api.github.com/users/apatrida/repos","events_url":"https://api.github.com/users/apatrida/events{/privacy}","received_events_url":"https://api.github.com/users/apatrida/received_events","type":"User","site_admin":false},"created_at":"2015-01-26T19:03:01Z","updated_at":"2015-01-26T19:03:01Z","author_association":"CONTRIBUTOR","body":"and I'm not on that client project so would have to start from scratch to re-create a scenario ... too much time has passed.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/71535365","html_url":"https://github.com/elastic/elasticsearch/issues/6316#issuecomment-71535365","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6316","id":71535365,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTM1MzY1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-01-26T20:49:47Z","updated_at":"2015-01-26T20:49:47Z","author_association":"CONTRIBUTOR","body":"@jaysonminard yeah - i'm thinking that this issue has been resolved.  @opgalarza 's description sounds like a different problem.  thanks for getting back to us and sorry for the long delay :)\n","performed_via_github_app":null}]