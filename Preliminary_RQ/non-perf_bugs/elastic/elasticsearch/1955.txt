{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1955","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1955/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1955/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1955/events","html_url":"https://github.com/elastic/elasticsearch/issues/1955","id":4600488,"node_id":"MDU6SXNzdWU0NjAwNDg4","number":1955,"title":"Sending a HTTP request to TCP port during recovery results in OutOfMemoryError in Netty","user":{"login":"snellm","id":1745004,"node_id":"MDQ6VXNlcjE3NDUwMDQ=","avatar_url":"https://avatars2.githubusercontent.com/u/1745004?v=4","gravatar_id":"","url":"https://api.github.com/users/snellm","html_url":"https://github.com/snellm","followers_url":"https://api.github.com/users/snellm/followers","following_url":"https://api.github.com/users/snellm/following{/other_user}","gists_url":"https://api.github.com/users/snellm/gists{/gist_id}","starred_url":"https://api.github.com/users/snellm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snellm/subscriptions","organizations_url":"https://api.github.com/users/snellm/orgs","repos_url":"https://api.github.com/users/snellm/repos","events_url":"https://api.github.com/users/snellm/events{/privacy}","received_events_url":"https://api.github.com/users/snellm/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2012-05-16T08:58:10Z","updated_at":"2013-07-15T16:43:41Z","closed_at":"2013-07-15T16:43:41Z","author_association":"NONE","active_lock_reason":null,"body":"Sending a HTTP request to the TCP port (eg curl 'http://localhost:9300/') results in an OutOfMemoryError being logged. This appears to be reproducible in 0.19.3 during recovery - the stacktrace logged is:\n\n``` java\n52,258][WARN ][transport.netty          ] [nodename] Exception caught on netty layer [[id: 0x00c1df71, /127.0.0.1:50268 => /127.0.0.1:9300]]\njava.lang.OutOfMemoryError: Java heap space\n        at org.elasticsearch.common.netty.buffer.HeapChannelBuffer.<init>(HeapChannelBuffer.java:42)\n        at org.elasticsearch.common.netty.buffer.BigEndianHeapChannelBuffer.<init>(BigEndianHeapChannelBuffer.java:34)\n        at org.elasticsearch.common.netty.buffer.ChannelBuffers.buffer(ChannelBuffers.java:134)\n        at org.elasticsearch.common.netty.buffer.HeapChannelBufferFactory.getBuffer(HeapChannelBufferFactory.java:69)\n        at org.elasticsearch.common.netty.buffer.DynamicChannelBuffer.<init>(DynamicChannelBuffer.java:58)\n        at org.elasticsearch.common.netty.buffer.ChannelBuffers.dynamicBuffer(ChannelBuffers.java:221)\n        at org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:98)\n        at org.elasticsearch.common.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)\n        at org.elasticsearch.common.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n        at org.elasticsearch.common.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:792)\n        at org.elasticsearch.common.netty.OpenChannelsHandler.handleUpstream(OpenChannelsHandler.java:74)\n        at org.elasticsearch.common.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n        at org.elasticsearch.common.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)\n        at org.elasticsearch.common.netty.channel.Channels.fireMessageReceived(Channels.java:268)\n        at org.elasticsearch.common.netty.channel.Channels.fireMessageReceived(Channels.java:255)\n        at org.elasticsearch.common.netty.channel.socket.nio.NioWorker.read(NioWorker.java:94)\n        at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:364)\n        at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:238)\n        at org.elasticsearch.common.netty.channel.socket.nio.NioWorker.run(NioWorker.java:38)\n        at org.elasticsearch.common.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\n```\n","closed_by":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"performed_via_github_app":null}