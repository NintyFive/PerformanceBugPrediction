[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/197882590","html_url":"https://github.com/elastic/elasticsearch/issues/17165#issuecomment-197882590","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17165","id":197882590,"node_id":"MDEyOklzc3VlQ29tbWVudDE5Nzg4MjU5MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-03-17T13:38:01Z","updated_at":"2016-03-17T13:38:01Z","author_association":"CONTRIBUTOR","body":"@atm028 Your second update request happened at the same time as another request, so between fetching the document, updating it, and reindexing it, another request made an update.  \n\nSee the `retry_on_conflict` parameter in the docs: https://www.elastic.co/guide/en/elasticsearch/reference/2.2/docs-update.html#_parameters_3\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/198243018","html_url":"https://github.com/elastic/elasticsearch/issues/17165#issuecomment-198243018","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17165","id":198243018,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODI0MzAxOA==","user":{"login":"atm028","id":1595485,"node_id":"MDQ6VXNlcjE1OTU0ODU=","avatar_url":"https://avatars2.githubusercontent.com/u/1595485?v=4","gravatar_id":"","url":"https://api.github.com/users/atm028","html_url":"https://github.com/atm028","followers_url":"https://api.github.com/users/atm028/followers","following_url":"https://api.github.com/users/atm028/following{/other_user}","gists_url":"https://api.github.com/users/atm028/gists{/gist_id}","starred_url":"https://api.github.com/users/atm028/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atm028/subscriptions","organizations_url":"https://api.github.com/users/atm028/orgs","repos_url":"https://api.github.com/users/atm028/repos","events_url":"https://api.github.com/users/atm028/events{/privacy}","received_events_url":"https://api.github.com/users/atm028/received_events","type":"User","site_admin":false},"created_at":"2016-03-18T07:53:27Z","updated_at":"2016-03-18T07:53:27Z","author_association":"NONE","body":"@clintongormley But single client and single Elasticsearch node has been used and client sent both requests in range of single connection(http 1.1 with keep-alived connection). Where the another process comes from? Or it means that each request handling in own thread? Even from the same connection.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/198275760","html_url":"https://github.com/elastic/elasticsearch/issues/17165#issuecomment-198275760","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17165","id":198275760,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODI3NTc2MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-03-18T09:33:52Z","updated_at":"2016-03-18T09:33:52Z","author_association":"CONTRIBUTOR","body":"If you send a request and wait for the response before sending the next request, then they will be executed serially.  But I think you've sent more requests than you realise, eg looking at the error message:\n\n```\nversion conflict, current [6], provided [5]\n```\n\n...you've made more than one update to that document\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/198284474","html_url":"https://github.com/elastic/elasticsearch/issues/17165#issuecomment-198284474","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17165","id":198284474,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODI4NDQ3NA==","user":{"login":"atm028","id":1595485,"node_id":"MDQ6VXNlcjE1OTU0ODU=","avatar_url":"https://avatars2.githubusercontent.com/u/1595485?v=4","gravatar_id":"","url":"https://api.github.com/users/atm028","html_url":"https://github.com/atm028","followers_url":"https://api.github.com/users/atm028/followers","following_url":"https://api.github.com/users/atm028/following{/other_user}","gists_url":"https://api.github.com/users/atm028/gists{/gist_id}","starred_url":"https://api.github.com/users/atm028/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atm028/subscriptions","organizations_url":"https://api.github.com/users/atm028/orgs","repos_url":"https://api.github.com/users/atm028/repos","events_url":"https://api.github.com/users/atm028/events{/privacy}","received_events_url":"https://api.github.com/users/atm028/received_events","type":"User","site_admin":false},"created_at":"2016-03-18T09:51:12Z","updated_at":"2016-03-18T09:51:12Z","author_association":"NONE","body":"That's true, the second update request has been sent before the first one has been done. But if the requests has been sent in single connection then updates to the document should be enrolled sequentially. And then two responses will be send to the client. Of course if the handling of them works in single thread, since it single connection. At least in code the same thread context used for dispatching request. Doesn't it? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/198318370","html_url":"https://github.com/elastic/elasticsearch/issues/17165#issuecomment-198318370","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17165","id":198318370,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODMxODM3MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-03-18T11:37:22Z","updated_at":"2016-03-18T11:37:22Z","author_association":"CONTRIBUTOR","body":"No.  Requests are handled asynchronously.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/198348336","html_url":"https://github.com/elastic/elasticsearch/issues/17165#issuecomment-198348336","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17165","id":198348336,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODM0ODMzNg==","user":{"login":"atm028","id":1595485,"node_id":"MDQ6VXNlcjE1OTU0ODU=","avatar_url":"https://avatars2.githubusercontent.com/u/1595485?v=4","gravatar_id":"","url":"https://api.github.com/users/atm028","html_url":"https://github.com/atm028","followers_url":"https://api.github.com/users/atm028/followers","following_url":"https://api.github.com/users/atm028/following{/other_user}","gists_url":"https://api.github.com/users/atm028/gists{/gist_id}","starred_url":"https://api.github.com/users/atm028/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atm028/subscriptions","organizations_url":"https://api.github.com/users/atm028/orgs","repos_url":"https://api.github.com/users/atm028/repos","events_url":"https://api.github.com/users/atm028/events{/privacy}","received_events_url":"https://api.github.com/users/atm028/received_events","type":"User","site_admin":false},"created_at":"2016-03-18T13:10:48Z","updated_at":"2016-03-18T13:10:48Z","author_association":"NONE","body":"@clintongormley ok, thank you, now the reason is clear\n","performed_via_github_app":null}]