[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/203496153","html_url":"https://github.com/elastic/elasticsearch/issues/17392#issuecomment-203496153","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17392","id":203496153,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzQ5NjE1Mw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-03-30T15:43:27Z","updated_at":"2016-03-30T15:43:27Z","author_association":"CONTRIBUTOR","body":"It seems to be a side effect of the query refactoring efforts since all the request parsing logic got rewritten.\n\nI am tempted to consider that the bug was to accept this parameter when sorting on `_score` since the `_score` is available on all shards and is not \"mapped\" anyway. Other sort options like script sort or geo-distance sort do not support this option either.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/203543658","html_url":"https://github.com/elastic/elasticsearch/issues/17392#issuecomment-203543658","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17392","id":203543658,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzU0MzY1OA==","user":{"login":"Bargs","id":6239176,"node_id":"MDQ6VXNlcjYyMzkxNzY=","avatar_url":"https://avatars3.githubusercontent.com/u/6239176?v=4","gravatar_id":"","url":"https://api.github.com/users/Bargs","html_url":"https://github.com/Bargs","followers_url":"https://api.github.com/users/Bargs/followers","following_url":"https://api.github.com/users/Bargs/following{/other_user}","gists_url":"https://api.github.com/users/Bargs/gists{/gist_id}","starred_url":"https://api.github.com/users/Bargs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bargs/subscriptions","organizations_url":"https://api.github.com/users/Bargs/orgs","repos_url":"https://api.github.com/users/Bargs/repos","events_url":"https://api.github.com/users/Bargs/events{/privacy}","received_events_url":"https://api.github.com/users/Bargs/received_events","type":"User","site_admin":false},"created_at":"2016-03-30T17:35:04Z","updated_at":"2016-03-30T17:35:04Z","author_association":"NONE","body":"@jpountz are there any other meta fields that are sortable but don't support `unmapped_type`?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/203833648","html_url":"https://github.com/elastic/elasticsearch/issues/17392#issuecomment-203833648","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17392","id":203833648,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzgzMzY0OA==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2016-03-31T09:00:46Z","updated_at":"2016-03-31T09:00:46Z","author_association":"MEMBER","body":"Yes, @jpountz is right, this is a side effect of the refactoring. I just checked the old parser logic. While it parsed the \"unmapped_type\" parameter, it silentely ignored it, so I think the current behaviour of throwing an error is better. The only paramter that sort on `_score` now accepts is \"order\". All other metadata fields should accept the same parameters as any other field, however I'm not sure how useful they are in some cases. Sorting on `_doc` will accept all parameters as any other field but ignore them except for \"order\".\n\nWe can restore the previous behaviour of silently ignoring paramters like \"missing\", \"unmapped_type\" or \"mode\", but I think the current solution of treating it separately is better. Maybe @MaineC has something to add.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/203850053","html_url":"https://github.com/elastic/elasticsearch/issues/17392#issuecomment-203850053","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17392","id":203850053,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzg1MDA1Mw==","user":{"login":"MaineC","id":70953,"node_id":"MDQ6VXNlcjcwOTUz","avatar_url":"https://avatars3.githubusercontent.com/u/70953?v=4","gravatar_id":"","url":"https://api.github.com/users/MaineC","html_url":"https://github.com/MaineC","followers_url":"https://api.github.com/users/MaineC/followers","following_url":"https://api.github.com/users/MaineC/following{/other_user}","gists_url":"https://api.github.com/users/MaineC/gists{/gist_id}","starred_url":"https://api.github.com/users/MaineC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaineC/subscriptions","organizations_url":"https://api.github.com/users/MaineC/orgs","repos_url":"https://api.github.com/users/MaineC/repos","events_url":"https://api.github.com/users/MaineC/events{/privacy}","received_events_url":"https://api.github.com/users/MaineC/received_events","type":"User","site_admin":false},"created_at":"2016-03-31T09:32:34Z","updated_at":"2016-03-31T09:32:34Z","author_association":"CONTRIBUTOR","body":"+0 for keeping the current behaviour, it also seems more in line with changes we made to other parsers where we added exceptions e.g. to ambiguous parameters.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/204025709","html_url":"https://github.com/elastic/elasticsearch/issues/17392#issuecomment-204025709","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17392","id":204025709,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNDAyNTcwOQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2016-03-31T17:08:32Z","updated_at":"2016-03-31T17:08:56Z","author_association":"MEMBER","body":"@Bargs it it okay for you if we leave the current behaviour? @clintongormley any opinion on whether we should mark this as breaking in the docs or any of the migration guides? As mentioned above, the setting never had any effect for \"_score\", we only silently ignored it so far. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/204086237","html_url":"https://github.com/elastic/elasticsearch/issues/17392#issuecomment-204086237","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17392","id":204086237,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNDA4NjIzNw==","user":{"login":"Bargs","id":6239176,"node_id":"MDQ6VXNlcjYyMzkxNzY=","avatar_url":"https://avatars3.githubusercontent.com/u/6239176?v=4","gravatar_id":"","url":"https://api.github.com/users/Bargs","html_url":"https://github.com/Bargs","followers_url":"https://api.github.com/users/Bargs/followers","following_url":"https://api.github.com/users/Bargs/following{/other_user}","gists_url":"https://api.github.com/users/Bargs/gists{/gist_id}","starred_url":"https://api.github.com/users/Bargs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bargs/subscriptions","organizations_url":"https://api.github.com/users/Bargs/orgs","repos_url":"https://api.github.com/users/Bargs/repos","events_url":"https://api.github.com/users/Bargs/events{/privacy}","received_events_url":"https://api.github.com/users/Bargs/received_events","type":"User","site_admin":false},"created_at":"2016-03-31T19:17:22Z","updated_at":"2016-03-31T19:17:22Z","author_association":"NONE","body":"@cbuescher yeah, I think it's reasonable to leave it as is. I've committed a fix to Kibana which only required a small change. I would recommend marking it as a breaking change since it does have the potential to cause issues.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/205447138","html_url":"https://github.com/elastic/elasticsearch/issues/17392#issuecomment-205447138","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17392","id":205447138,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNTQ0NzEzOA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-04-04T18:57:24Z","updated_at":"2016-04-04T18:57:24Z","author_association":"CONTRIBUTOR","body":"@cbuescher this was undocumented and I wouldn't mark it as breaking.  The one question I have is whether `_doc` should accept `order`? Seems to defeat the object of using `_doc`, no?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/205466082","html_url":"https://github.com/elastic/elasticsearch/issues/17392#issuecomment-205466082","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17392","id":205466082,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNTQ2NjA4Mg==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2016-04-04T19:48:59Z","updated_at":"2016-04-04T19:48:59Z","author_association":"MEMBER","body":"@clintongormley I agree there are no real use cases, we could also ignore it I guess. On the java API side, if we would want to also throw errors when \"_doc\" is used with \"missing\", \"unmapped_type\" etc.. rather than silently ignore it, we would need to add another builder class (like ScoreSortBuilder) for it. Not sure if thats worth the effort.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/206295700","html_url":"https://github.com/elastic/elasticsearch/issues/17392#issuecomment-206295700","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17392","id":206295700,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjI5NTcwMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-04-06T10:29:06Z","updated_at":"2016-04-06T10:29:06Z","author_association":"CONTRIBUTOR","body":"@cbuescher i'm fine with leaving as is\n","performed_via_github_app":null}]