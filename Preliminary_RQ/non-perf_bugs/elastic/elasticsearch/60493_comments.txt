[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/666884862","html_url":"https://github.com/elastic/elasticsearch/issues/60493#issuecomment-666884862","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60493","id":666884862,"node_id":"MDEyOklzc3VlQ29tbWVudDY2Njg4NDg2Mg==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2020-07-31T02:55:17Z","updated_at":"2020-07-31T02:55:17Z","author_association":"CONTRIBUTOR","body":"I don't think there's any problem here other than the one that the error message refers to:\r\n\r\n> Trying to create too many scroll contexts. Must be less than or equal to: [1024]. This limit can be set by changing the [search.max_open_scroll_context] setting.\r\n\r\nSomething on your cluster is creating a large number of scroll contexts that aren't being cleared up. There's nothing here that suggests that this is specific to the `.security` index, or that the cluster is working in any way other than how it is intended to work.  \r\nYou may need to [clear some/all of your scroll contexts](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-body.html#_clear_scroll_api). \r\n\r\nSince this seems to be a user question and not a bug, I'm going to ask that we restrict the conversation to discuss. We use GitHub for tracking bugs and feature requests only, and this doesn't seem to fit that category.  \r\nI hope you don't mind if we close this issue, and continue the conversation on the forums instead. If that conversation uncovers some new information that demonstrates a real bug, then we can reopen this issue.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/666940793","html_url":"https://github.com/elastic/elasticsearch/issues/60493#issuecomment-666940793","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60493","id":666940793,"node_id":"MDEyOklzc3VlQ29tbWVudDY2Njk0MDc5Mw==","user":{"login":"munkyu","id":2225049,"node_id":"MDQ6VXNlcjIyMjUwNDk=","avatar_url":"https://avatars2.githubusercontent.com/u/2225049?v=4","gravatar_id":"","url":"https://api.github.com/users/munkyu","html_url":"https://github.com/munkyu","followers_url":"https://api.github.com/users/munkyu/followers","following_url":"https://api.github.com/users/munkyu/following{/other_user}","gists_url":"https://api.github.com/users/munkyu/gists{/gist_id}","starred_url":"https://api.github.com/users/munkyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/munkyu/subscriptions","organizations_url":"https://api.github.com/users/munkyu/orgs","repos_url":"https://api.github.com/users/munkyu/repos","events_url":"https://api.github.com/users/munkyu/events{/privacy}","received_events_url":"https://api.github.com/users/munkyu/received_events","type":"User","site_admin":false},"created_at":"2020-07-31T05:52:18Z","updated_at":"2020-07-31T05:52:18Z","author_association":"NONE","body":"> I don't think there's any problem here other than the one that the error message refers to:\r\n> \r\n> > Trying to create too many scroll contexts. Must be less than or equal to: [1024]. This limit can be set by changing the [search.max_open_scroll_context] setting.\r\n> \r\n> Something on your cluster is creating a large number of scroll contexts that aren't being cleared up. There's nothing here that suggests that this is specific to the `.security` index, or that the cluster is working in any way other than how it is intended to work.\r\n> You may need to [clear some/all of your scroll contexts](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-body.html#_clear_scroll_api).\r\n> \r\n> Since this seems to be a user question and not a bug, I'm going to ask that we restrict the conversation to discuss. We use GitHub for tracking bugs and feature requests only, and this doesn't seem to fit that category.\r\n> I hope you don't mind if we close this issue, and continue the conversation on the forums instead. If that conversation uncovers some new information that demonstrates a real bug, then we can reopen this issue.\r\n\r\n@tvernum Thanks for the reply.\r\nI cleaned up all scroll context already before I did this job.\r\nThat's why I report this as a issue here.\r\nI assume this issue related with kibana's security.\r\nIf you need more information about this,\r\nplease let me know.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/709866169","html_url":"https://github.com/elastic/elasticsearch/issues/60493#issuecomment-709866169","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60493","id":709866169,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTg2NjE2OQ==","user":{"login":"wushuaiwangyin","id":17822026,"node_id":"MDQ6VXNlcjE3ODIyMDI2","avatar_url":"https://avatars0.githubusercontent.com/u/17822026?v=4","gravatar_id":"","url":"https://api.github.com/users/wushuaiwangyin","html_url":"https://github.com/wushuaiwangyin","followers_url":"https://api.github.com/users/wushuaiwangyin/followers","following_url":"https://api.github.com/users/wushuaiwangyin/following{/other_user}","gists_url":"https://api.github.com/users/wushuaiwangyin/gists{/gist_id}","starred_url":"https://api.github.com/users/wushuaiwangyin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wushuaiwangyin/subscriptions","organizations_url":"https://api.github.com/users/wushuaiwangyin/orgs","repos_url":"https://api.github.com/users/wushuaiwangyin/repos","events_url":"https://api.github.com/users/wushuaiwangyin/events{/privacy}","received_events_url":"https://api.github.com/users/wushuaiwangyin/received_events","type":"User","site_admin":false},"created_at":"2020-10-16T07:07:55Z","updated_at":"2020-10-16T08:03:02Z","author_association":"NONE","body":"I have the same problem。\r\nmax_open_scroll_context An error is reported when the context is changed to a large value。\r\n \r\n\r\nlog\r\n\r\n{\"statusCode\":500,\"error\":\"Internal Server Error\",\"message\":\"[exception] Trying to create too many scroll contexts. Must be less than or equal to: [100000000]. This limit can be set by changing the [search.max_open_scroll_context] setting.\"}","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/713280683","html_url":"https://github.com/elastic/elasticsearch/issues/60493#issuecomment-713280683","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60493","id":713280683,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzI4MDY4Mw==","user":{"login":"wushuaiwangyin","id":17822026,"node_id":"MDQ6VXNlcjE3ODIyMDI2","avatar_url":"https://avatars0.githubusercontent.com/u/17822026?v=4","gravatar_id":"","url":"https://api.github.com/users/wushuaiwangyin","html_url":"https://github.com/wushuaiwangyin","followers_url":"https://api.github.com/users/wushuaiwangyin/followers","following_url":"https://api.github.com/users/wushuaiwangyin/following{/other_user}","gists_url":"https://api.github.com/users/wushuaiwangyin/gists{/gist_id}","starred_url":"https://api.github.com/users/wushuaiwangyin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wushuaiwangyin/subscriptions","organizations_url":"https://api.github.com/users/wushuaiwangyin/orgs","repos_url":"https://api.github.com/users/wushuaiwangyin/repos","events_url":"https://api.github.com/users/wushuaiwangyin/events{/privacy}","received_events_url":"https://api.github.com/users/wushuaiwangyin/received_events","type":"User","site_admin":false},"created_at":"2020-10-21T03:50:51Z","updated_at":"2020-10-21T03:50:51Z","author_association":"NONE","body":"> I have the same problem。\r\n> max_open_scroll_context An error is reported when the context is changed to a large value。\r\n> \r\n> log\r\n> \r\n> {\"statusCode\":500,\"error\":\"Internal Server Error\",\"message\":\"[exception] Trying to create too many scroll contexts. Must be less than or equal to: [100000000]. This limit can be set by changing the [search.max_open_scroll_context] setting.\"}\r\n\r\nThis is a bug. Openscrollcontexts is used to control the maximum scroll context. But by accessing the \"_nodes/ data:true/stats/indices/search\" get open_context does not reach the limit, which can be modified“ search.max_open_scroll_context \"to the maximum value of int.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/716245542","html_url":"https://github.com/elastic/elasticsearch/issues/60493#issuecomment-716245542","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60493","id":716245542,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjI0NTU0Mg==","user":{"login":"munkyu","id":2225049,"node_id":"MDQ6VXNlcjIyMjUwNDk=","avatar_url":"https://avatars2.githubusercontent.com/u/2225049?v=4","gravatar_id":"","url":"https://api.github.com/users/munkyu","html_url":"https://github.com/munkyu","followers_url":"https://api.github.com/users/munkyu/followers","following_url":"https://api.github.com/users/munkyu/following{/other_user}","gists_url":"https://api.github.com/users/munkyu/gists{/gist_id}","starred_url":"https://api.github.com/users/munkyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/munkyu/subscriptions","organizations_url":"https://api.github.com/users/munkyu/orgs","repos_url":"https://api.github.com/users/munkyu/repos","events_url":"https://api.github.com/users/munkyu/events{/privacy}","received_events_url":"https://api.github.com/users/munkyu/received_events","type":"User","site_admin":false},"created_at":"2020-10-26T00:51:28Z","updated_at":"2020-10-26T00:51:28Z","author_association":"NONE","body":"@wushuaiwangyin I just upgrade ES cluster from v7.6.2 to v7.8.1 and java high level rest client from v7.4 to v7.8.1. Until now, the problem has not been reproduced. In my opinion, this is a bug. There were several bug fixes related to the scroll context during the upgrade to v7.8.1. These could be fixed on this bug, too.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/716272943","html_url":"https://github.com/elastic/elasticsearch/issues/60493#issuecomment-716272943","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60493","id":716272943,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjI3Mjk0Mw==","user":{"login":"wushuaiwangyin","id":17822026,"node_id":"MDQ6VXNlcjE3ODIyMDI2","avatar_url":"https://avatars0.githubusercontent.com/u/17822026?v=4","gravatar_id":"","url":"https://api.github.com/users/wushuaiwangyin","html_url":"https://github.com/wushuaiwangyin","followers_url":"https://api.github.com/users/wushuaiwangyin/followers","following_url":"https://api.github.com/users/wushuaiwangyin/following{/other_user}","gists_url":"https://api.github.com/users/wushuaiwangyin/gists{/gist_id}","starred_url":"https://api.github.com/users/wushuaiwangyin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wushuaiwangyin/subscriptions","organizations_url":"https://api.github.com/users/wushuaiwangyin/orgs","repos_url":"https://api.github.com/users/wushuaiwangyin/repos","events_url":"https://api.github.com/users/wushuaiwangyin/events{/privacy}","received_events_url":"https://api.github.com/users/wushuaiwangyin/received_events","type":"User","site_admin":false},"created_at":"2020-10-26T02:49:41Z","updated_at":"2020-10-26T02:49:41Z","author_association":"NONE","body":"> @wushuaiwangyin I just upgrade ES cluster from v7.6.2 to v7.8.1 and java high level rest client from v7.4 to v7.8.1. Until now, the problem has not been reproduced. In my opinion, this is a bug. There were several bug fixes related to the scroll context during the upgrade to v7.8.1. These could be fixed on this bug, too.\r\n\r\nWhere is the commit? This bug is sporadic.At present, only one cluster of multiple clusters has found this problem.\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/716308060","html_url":"https://github.com/elastic/elasticsearch/issues/60493#issuecomment-716308060","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60493","id":716308060,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjMwODA2MA==","user":{"login":"munkyu","id":2225049,"node_id":"MDQ6VXNlcjIyMjUwNDk=","avatar_url":"https://avatars2.githubusercontent.com/u/2225049?v=4","gravatar_id":"","url":"https://api.github.com/users/munkyu","html_url":"https://github.com/munkyu","followers_url":"https://api.github.com/users/munkyu/followers","following_url":"https://api.github.com/users/munkyu/following{/other_user}","gists_url":"https://api.github.com/users/munkyu/gists{/gist_id}","starred_url":"https://api.github.com/users/munkyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/munkyu/subscriptions","organizations_url":"https://api.github.com/users/munkyu/orgs","repos_url":"https://api.github.com/users/munkyu/repos","events_url":"https://api.github.com/users/munkyu/events{/privacy}","received_events_url":"https://api.github.com/users/munkyu/received_events","type":"User","site_admin":false},"created_at":"2020-10-26T05:14:42Z","updated_at":"2020-10-26T05:14:42Z","author_association":"NONE","body":"> > @wushuaiwangyin I just upgrade ES cluster from v7.6.2 to v7.8.1 and java high level rest client from v7.4 to v7.8.1. Until now, the problem has not been reproduced. In my opinion, this is a bug. There were several bug fixes related to the scroll context during the upgrade to v7.8.1. These could be fixed on this bug, too.\r\n> \r\n> Where is the commit? This bug is sporadic.At present, only one cluster of multiple clusters has found this problem.\r\n\r\nYou'd better check the git history of \"server/src/main/java/org/elasticsearch/search/SearchService.java\"","performed_via_github_app":null}]