[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61316326","html_url":"https://github.com/elastic/elasticsearch/issues/8280#issuecomment-61316326","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8280","id":61316326,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzE2MzI2","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2014-10-31T19:25:48Z","updated_at":"2014-10-31T19:25:48Z","author_association":"MEMBER","body":"When restore operation is interrupted because of an error, the shard that was being restored is most likely in a broken state. So, elasticsearch automatically tries to create this shard on another node in hope that next time it will be successful next time. This process doesn't stop until 1) the shard is successfully restored or 2) the index is [explicitly deleted](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/modules-snapshots.html#_stopping_currently_running_snapshot_and_restore_operations) by the user. So, if there is a communication issues with S3, elasticsearch will retry for as long as needed until S3 recovers. In other words, it's not a \"fake\" recovery process, it's recovery processes form S3 repository and it follows the same principles that recovery process from a local gateway.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61321533","html_url":"https://github.com/elastic/elasticsearch/issues/8280#issuecomment-61321533","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8280","id":61321533,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzIxNTMz","user":{"login":"JoeZ99","id":479027,"node_id":"MDQ6VXNlcjQ3OTAyNw==","avatar_url":"https://avatars0.githubusercontent.com/u/479027?v=4","gravatar_id":"","url":"https://api.github.com/users/JoeZ99","html_url":"https://github.com/JoeZ99","followers_url":"https://api.github.com/users/JoeZ99/followers","following_url":"https://api.github.com/users/JoeZ99/following{/other_user}","gists_url":"https://api.github.com/users/JoeZ99/gists{/gist_id}","starred_url":"https://api.github.com/users/JoeZ99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JoeZ99/subscriptions","organizations_url":"https://api.github.com/users/JoeZ99/orgs","repos_url":"https://api.github.com/users/JoeZ99/repos","events_url":"https://api.github.com/users/JoeZ99/events{/privacy}","received_events_url":"https://api.github.com/users/JoeZ99/received_events","type":"User","site_admin":false},"created_at":"2014-10-31T19:57:33Z","updated_at":"2014-10-31T19:57:33Z","author_association":"NONE","body":"So, if I understood you right, when there is an error during a restore process, elasticsearch will retry the restore process using another node as the shard's destination, I guess because elasticsearch thinks that the error during the first restore process was related somehow to the node it tried to restore the shard to first.\n- What if you only have one node? (that's precisely our case) does elasticsearch keeps trying on the same node?\n- Even if that's the case (elasticsearch keeps trying on the same node, since there is only one), it's not working in our scenario.the \"read timeout\" s3 error is not a permanent condition. It just happens from time to time when -probably, we haven't nailed it yet- too many requests to the S3 are being made. What this means is that immediately afterwards this error, the S3 is accessible again, and if elasticsearch \"retried\" a restore, it would be successfull, and that's not what is happening. Once this error occurs, no recovery can be made unless we explicitly delete the index.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61426866","html_url":"https://github.com/elastic/elasticsearch/issues/8280#issuecomment-61426866","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8280","id":61426866,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNDI2ODY2","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2014-11-02T22:27:33Z","updated_at":"2014-11-02T22:27:33Z","author_association":"MEMBER","body":"Yes, in the case of a single node, it might not retry to restore the shard to the same node. That's the common recovery/restore logic and in most cases I think it makes sense. Should we add some sort of detection of retry-able errors that will be processed differently and where it should reside core or s3 plugin - that's a good question. We need to discuss that. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61493329","html_url":"https://github.com/elastic/elasticsearch/issues/8280#issuecomment-61493329","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8280","id":61493329,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNDkzMzI5","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2014-11-03T15:23:59Z","updated_at":"2014-11-03T15:23:59Z","author_association":"MEMBER","body":"After a brief discussion with @tlrx, we came to the conclusion that it might make sense to address this as part of https://github.com/elasticsearch/elasticsearch-cloud-aws/issues/125. We can add retry check in S3 layer with possible common retry logic on the BlobStore level. Reassigning it to @tlrx.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63948332","html_url":"https://github.com/elastic/elasticsearch/issues/8280#issuecomment-63948332","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8280","id":63948332,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTQ4MzMy","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2014-11-21T09:55:15Z","updated_at":"2014-11-21T09:55:15Z","author_association":"MEMBER","body":"Commit elasticsearch/elasticsearch-cloud-aws@ea91adf should help to resolve this issue.\n\nWhen elasticsearch-cloud-aws will be released for 1.4, could you please test this issue again and reopen if needed?\n\nThanks \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68281280","html_url":"https://github.com/elastic/elasticsearch/issues/8280#issuecomment-68281280","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8280","id":68281280,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjgxMjgw","user":{"login":"cregev","id":7669819,"node_id":"MDQ6VXNlcjc2Njk4MTk=","avatar_url":"https://avatars1.githubusercontent.com/u/7669819?v=4","gravatar_id":"","url":"https://api.github.com/users/cregev","html_url":"https://github.com/cregev","followers_url":"https://api.github.com/users/cregev/followers","following_url":"https://api.github.com/users/cregev/following{/other_user}","gists_url":"https://api.github.com/users/cregev/gists{/gist_id}","starred_url":"https://api.github.com/users/cregev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cregev/subscriptions","organizations_url":"https://api.github.com/users/cregev/orgs","repos_url":"https://api.github.com/users/cregev/repos","events_url":"https://api.github.com/users/cregev/events{/privacy}","received_events_url":"https://api.github.com/users/cregev/received_events","type":"User","site_admin":false},"created_at":"2014-12-29T18:05:52Z","updated_at":"2014-12-29T18:05:52Z","author_association":"NONE","body":"When will this issue is going to be fixed ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68530877","html_url":"https://github.com/elastic/elasticsearch/issues/8280#issuecomment-68530877","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8280","id":68530877,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTMwODc3","user":{"login":"JoeZ99","id":479027,"node_id":"MDQ6VXNlcjQ3OTAyNw==","avatar_url":"https://avatars0.githubusercontent.com/u/479027?v=4","gravatar_id":"","url":"https://api.github.com/users/JoeZ99","html_url":"https://github.com/JoeZ99","followers_url":"https://api.github.com/users/JoeZ99/followers","following_url":"https://api.github.com/users/JoeZ99/following{/other_user}","gists_url":"https://api.github.com/users/JoeZ99/gists{/gist_id}","starred_url":"https://api.github.com/users/JoeZ99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JoeZ99/subscriptions","organizations_url":"https://api.github.com/users/JoeZ99/orgs","repos_url":"https://api.github.com/users/JoeZ99/repos","events_url":"https://api.github.com/users/JoeZ99/events{/privacy}","received_events_url":"https://api.github.com/users/JoeZ99/received_events","type":"User","site_admin":false},"created_at":"2015-01-02T14:44:27Z","updated_at":"2015-01-02T14:44:27Z","author_association":"NONE","body":"@tlrx , I've tested with aws plugin 2.4.1 and elasticsearch 1.4.1, and same behavior, so I'll reopen as instructed\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68531053","html_url":"https://github.com/elastic/elasticsearch/issues/8280#issuecomment-68531053","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8280","id":68531053,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTMxMDUz","user":{"login":"JoeZ99","id":479027,"node_id":"MDQ6VXNlcjQ3OTAyNw==","avatar_url":"https://avatars0.githubusercontent.com/u/479027?v=4","gravatar_id":"","url":"https://api.github.com/users/JoeZ99","html_url":"https://github.com/JoeZ99","followers_url":"https://api.github.com/users/JoeZ99/followers","following_url":"https://api.github.com/users/JoeZ99/following{/other_user}","gists_url":"https://api.github.com/users/JoeZ99/gists{/gist_id}","starred_url":"https://api.github.com/users/JoeZ99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JoeZ99/subscriptions","organizations_url":"https://api.github.com/users/JoeZ99/orgs","repos_url":"https://api.github.com/users/JoeZ99/repos","events_url":"https://api.github.com/users/JoeZ99/events{/privacy}","received_events_url":"https://api.github.com/users/JoeZ99/received_events","type":"User","site_admin":false},"created_at":"2015-01-02T14:46:59Z","updated_at":"2015-01-02T14:46:59Z","author_association":"NONE","body":"@tlrx , Don't know how to reopen this issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68531106","html_url":"https://github.com/elastic/elasticsearch/issues/8280#issuecomment-68531106","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8280","id":68531106,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTMxMTA2","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-01-02T14:47:44Z","updated_at":"2015-01-02T14:47:44Z","author_association":"MEMBER","body":"@JoeZ99 reopened.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68687044","html_url":"https://github.com/elastic/elasticsearch/issues/8280#issuecomment-68687044","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8280","id":68687044,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Njg3MDQ0","user":{"login":"cregev","id":7669819,"node_id":"MDQ6VXNlcjc2Njk4MTk=","avatar_url":"https://avatars1.githubusercontent.com/u/7669819?v=4","gravatar_id":"","url":"https://api.github.com/users/cregev","html_url":"https://github.com/cregev","followers_url":"https://api.github.com/users/cregev/followers","following_url":"https://api.github.com/users/cregev/following{/other_user}","gists_url":"https://api.github.com/users/cregev/gists{/gist_id}","starred_url":"https://api.github.com/users/cregev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cregev/subscriptions","organizations_url":"https://api.github.com/users/cregev/orgs","repos_url":"https://api.github.com/users/cregev/repos","events_url":"https://api.github.com/users/cregev/events{/privacy}","received_events_url":"https://api.github.com/users/cregev/received_events","type":"User","site_admin":false},"created_at":"2015-01-05T09:52:19Z","updated_at":"2015-01-05T09:52:19Z","author_association":"NONE","body":"Is there a workaround ? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68695058","html_url":"https://github.com/elastic/elasticsearch/issues/8280#issuecomment-68695058","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8280","id":68695058,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Njk1MDU4","user":{"login":"JoeZ99","id":479027,"node_id":"MDQ6VXNlcjQ3OTAyNw==","avatar_url":"https://avatars0.githubusercontent.com/u/479027?v=4","gravatar_id":"","url":"https://api.github.com/users/JoeZ99","html_url":"https://github.com/JoeZ99","followers_url":"https://api.github.com/users/JoeZ99/followers","following_url":"https://api.github.com/users/JoeZ99/following{/other_user}","gists_url":"https://api.github.com/users/JoeZ99/gists{/gist_id}","starred_url":"https://api.github.com/users/JoeZ99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JoeZ99/subscriptions","organizations_url":"https://api.github.com/users/JoeZ99/orgs","repos_url":"https://api.github.com/users/JoeZ99/repos","events_url":"https://api.github.com/users/JoeZ99/events{/privacy}","received_events_url":"https://api.github.com/users/JoeZ99/received_events","type":"User","site_admin":false},"created_at":"2015-01-05T11:11:30Z","updated_at":"2015-01-05T11:11:30Z","author_association":"NONE","body":"The only\"workaround\" for us has been to make the API call with the\n\"wait_for_completion\" parameter, and oh it takes more than 5 minutes, issue\na delete for the indices being restored to unlock the cluster and assume a\ntimeout read error\nOn Jan 5, 2015 10:53 AM, \"Costya Regev\" notifications@github.com wrote:\n\n> Is there a workaround ?\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/elasticsearch/elasticsearch/issues/8280#issuecomment-68687044\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/89309189","html_url":"https://github.com/elastic/elasticsearch/issues/8280#issuecomment-89309189","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8280","id":89309189,"node_id":"MDEyOklzc3VlQ29tbWVudDg5MzA5MTg5","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2015-04-03T14:47:49Z","updated_at":"2015-04-03T14:47:49Z","author_association":"MEMBER","body":"Follow up on https://github.com/elastic/elasticsearch-cloud-aws/issues/149#issuecomment-89309092\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158678560","html_url":"https://github.com/elastic/elasticsearch/issues/8280#issuecomment-158678560","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8280","id":158678560,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODY3ODU2MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-21T20:16:36Z","updated_at":"2015-11-21T20:16:36Z","author_association":"CONTRIBUTOR","body":"Closing in favour of https://github.com/elastic/elasticsearch-cloud-aws/issues/149#issuecomment-89309092\n","performed_via_github_app":null}]