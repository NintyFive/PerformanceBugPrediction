[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/432438416","html_url":"https://github.com/elastic/elasticsearch/issues/34781#issuecomment-432438416","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34781","id":432438416,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQzODQxNg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-10-23T22:03:32Z","updated_at":"2018-10-23T22:03:32Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/432445082","html_url":"https://github.com/elastic/elasticsearch/issues/34781#issuecomment-432445082","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34781","id":432445082,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQ0NTA4Mg==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2018-10-23T22:29:32Z","updated_at":"2018-10-23T22:29:32Z","author_association":"MEMBER","body":"Muted the test in c5a07393810990234555ad00b48238b7f4a8846a.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/432545442","html_url":"https://github.com/elastic/elasticsearch/issues/34781#issuecomment-432545442","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34781","id":432545442,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjU0NTQ0Mg==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-10-24T07:32:52Z","updated_at":"2018-10-24T07:32:52Z","author_association":"CONTRIBUTOR","body":"I think this failure is actually because the nodes failed to start up, and the message about leaking threads is because the test then bailed out without doing any cleanup:\r\n\r\n```\r\n   > Throwable #1: java.lang.RuntimeException: failed to start nodes\r\n...\r\n   > Caused by: java.util.concurrent.ExecutionException: BindTransportException[Failed to bind to [44859-44860]]; nested: BindException[Address already in use];\r\n```\r\n\r\nLooking at `testClusterFormsByScanningPorts`, I see that this is not wholly unexpected:\r\n\r\nhttps://github.com/elastic/elasticsearch/blob/18e004c3eaa18178d5523c06a91bc4d29a4a7816/server/src/test/java/org/elasticsearch/discovery/zen/SettingsBasedHostProviderIT.java#L69-L70\r\n\r\nWe didn't, however, discuss what to do if this happened, so I'm marking this for team discussion.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/432687608","html_url":"https://github.com/elastic/elasticsearch/issues/34781#issuecomment-432687608","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34781","id":432687608,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjY4NzYwOA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-10-24T14:44:36Z","updated_at":"2018-10-24T14:45:04Z","author_association":"CONTRIBUTOR","body":"We discussed this in today's team sync. This test is testing a property that's important for the OOTB experience of using Elasticsearch and starting multiple nodes on the same host, even though it's not that useful in real production deployments. It's therefore something we want to continue to test. However it's always going to be tricky to reliably find two free ports that are â‰¤5 apart in an integration test, and there's no option to increase the \"5\" in this statement. We therefore decided that we should try and test this in a packaging test, since these run in a much cleaner environment.\r\n\r\nI think this specific test can be deleted and I will open an issue about adding this kind of packaging test after speaking to some people about it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/433312026","html_url":"https://github.com/elastic/elasticsearch/issues/34781#issuecomment-433312026","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34781","id":433312026,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzMxMjAyNg==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-10-26T07:20:06Z","updated_at":"2018-10-26T07:20:06Z","author_association":"CONTRIBUTOR","body":"Closed by #34813","performed_via_github_app":null}]