{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691/events","html_url":"https://github.com/elastic/elasticsearch/issues/25691","id":242466706,"node_id":"MDU6SXNzdWUyNDI0NjY3MDY=","number":25691,"title":"Upgrade from 5.4.1 to 5.5 Fails","user":{"login":"JimKeating2","id":24461111,"node_id":"MDQ6VXNlcjI0NDYxMTEx","avatar_url":"https://avatars2.githubusercontent.com/u/24461111?v=4","gravatar_id":"","url":"https://api.github.com/users/JimKeating2","html_url":"https://github.com/JimKeating2","followers_url":"https://api.github.com/users/JimKeating2/followers","following_url":"https://api.github.com/users/JimKeating2/following{/other_user}","gists_url":"https://api.github.com/users/JimKeating2/gists{/gist_id}","starred_url":"https://api.github.com/users/JimKeating2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JimKeating2/subscriptions","organizations_url":"https://api.github.com/users/JimKeating2/orgs","repos_url":"https://api.github.com/users/JimKeating2/repos","events_url":"https://api.github.com/users/JimKeating2/events{/privacy}","received_events_url":"https://api.github.com/users/JimKeating2/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2017-07-12T18:04:55Z","updated_at":"2017-07-14T14:43:31Z","closed_at":"2017-07-12T18:24:17Z","author_association":"NONE","active_lock_reason":null,"body":"After upgrading a node from 5.4.1 to 5.5 the service will not start.  I've done lots of researching and tried tweaking permissions with no luck.  Tried running from the command line.  Here is the error:\r\n\r\nJul 12 10:40:36 es2 elasticsearch[7632]: 2017-07-12 10:40:36,370 main ERROR Could not register mbeans java.security.AccessControlException: access denied (\"javax.management.MBeanTrustPermission\" \"register\")\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at java.security.AccessControlContext.checkPermission(AccessControlContext.java:472)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at java.lang.SecurityManager.checkPermission(SecurityManager.java:585)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.checkMBeanTrustPermission(DefaultMBeanServerInterceptor.java:1848)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:322)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.apache.logging.log4j.core.jmx.Server.register(Server.java:389)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.apache.logging.log4j.core.jmx.Server.reregisterMBeansAfterReconfigure(Server.java:167)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.apache.logging.log4j.core.jmx.Server.reregisterMBeansAfterReconfigure(Server.java:140)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:556)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:261)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:206)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.apache.logging.log4j.core.config.Configurator.initialize(Configurator.java:221)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.apache.logging.log4j.core.config.Configurator.initialize(Configurator.java:197)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.common.logging.LogConfigurator.configureStatusLogger(LogConfigurator.java:175)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.common.logging.LogConfigurator.configureWithoutConfig(LogConfigurator.java:99)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.cli.Command.main(Command.java:85)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:91)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:84)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: Exception in thread \"main\" java.lang.IllegalStateException: status logger logged an error before logging was configured\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.common.logging.LogConfigurator.checkErrorListener(LogConfigurator.java:128)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.common.logging.LogConfigurator.configure(LogConfigurator.java:117)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:316)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:123)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:114)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:67)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:122)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.cli.Command.main(Command.java:88)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:91)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:84)\r\nJul 12 10:40:36 es2 elasticsearch[7632]: Refer to the log for complete error details.\r\nJul 12 10:40:36 es2 systemd[1]: elasticsearch.service: main process exited, code=exited, status=1/FAILURE\r\nJul 12 10:40:36 es2 systemd[1]: Unit elasticsearch.service entered failed state.\r\n\r\nThanks in advance...JK\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}