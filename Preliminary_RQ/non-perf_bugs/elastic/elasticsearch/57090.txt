{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/57090","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57090/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57090/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57090/events","html_url":"https://github.com/elastic/elasticsearch/issues/57090","id":623806500,"node_id":"MDU6SXNzdWU2MjM4MDY1MDA=","number":57090,"title":"[bool] failed to parse field","user":{"login":"Happyfeet01","id":3295104,"node_id":"MDQ6VXNlcjMyOTUxMDQ=","avatar_url":"https://avatars0.githubusercontent.com/u/3295104?v=4","gravatar_id":"","url":"https://api.github.com/users/Happyfeet01","html_url":"https://github.com/Happyfeet01","followers_url":"https://api.github.com/users/Happyfeet01/followers","following_url":"https://api.github.com/users/Happyfeet01/following{/other_user}","gists_url":"https://api.github.com/users/Happyfeet01/gists{/gist_id}","starred_url":"https://api.github.com/users/Happyfeet01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Happyfeet01/subscriptions","organizations_url":"https://api.github.com/users/Happyfeet01/orgs","repos_url":"https://api.github.com/users/Happyfeet01/repos","events_url":"https://api.github.com/users/Happyfeet01/events{/privacy}","received_events_url":"https://api.github.com/users/Happyfeet01/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":2042400575,"node_id":"MDU6TGFiZWwyMDQyNDAwNTc1","url":"https://api.github.com/repos/elastic/elasticsearch/labels/needs:triage","name":"needs:triage","color":"c5def5","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-05-24T06:40:26Z","updated_at":"2020-05-25T03:54:14Z","closed_at":"2020-05-25T01:57:08Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\nGitHub is reserved for bug reports and feature requests; it is not the place\r\nfor general questions. If you have a question or an unconfirmed bug , please\r\nvisit the [forums](https://discuss.elastic.co/c/elasticsearch).  Please also\r\ncheck your OS is [supported](https://www.elastic.co/support/matrix#show_os).\r\nIf it is not, the issue is likely to be closed.\r\n\r\nFor security vulnerabilities please only send reports to security@elastic.co.\r\nSee https://www.elastic.co/community/security for more information.\r\n\r\nPlease fill in the following details to help us reproduce the bug:\r\n-->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\n7.7.0\r\n\r\n**Plugins installed**: []\r\nreadonlyrest 7.7.0\r\ningest-attachment\r\n\r\n**JVM version** (`java -version`):\r\nopenjdk 11.0.7 2020-04-14\r\nOpenJDK Runtime Environment (build 11.0.7+10-post-Ubuntu-2ubuntu218.04)\r\nOpenJDK 64-Bit Server VM (build 11.0.7+10-post-Ubuntu-2ubuntu218.04, mixed mode, sharing)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\nLinux  4.15.0-101-generic #102-Ubuntu SMP Mon May 11 10:07:26 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\ni have installed elasticsearch and readonlyrest to use the internal search from Nextcloud. Whis this App https://github.com/nextcloud/fulltextsearch/\r\n\r\nThe setup works without problems, but the search wonÂ´t work. Here is the logentry from Nextcloud \r\n\r\nthere is no relevant log entry by elasticsearch.\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n```500 - {\"request\":{\"providers\":[\"files\"],\"author\":\"lars\",\"search\":\"ratingen\",\"page\":1,\"size\":20,\"parts\":[\"comments\",\"ocr\"],\"queries\":[],\"options\":{\"files_within_dir\":\"\",\"files_local\":\"\",\"files_external\":\"\",\"files_extension\":\"\"},\"metatags\":[],\"subtags\":[],\"tags\":[]},\"version\":\"1.4.1\",\"status\":-1,\"exception\":\"Elasticsearch\\\\Common\\\\Exceptions\\\\BadRequest400Exception\",\"message\":\"{\\\"error\\\":{\\\"root_cause\\\":[{\\\"type\\\":\\\"x_content_parse_exception\\\",\\\"reason\\\":\\\"[1:63] [bool] failed to parse field [should]\\\"}],\\\"type\\\":\\\"x_content_parse_exception\\\",\\\"reason\\\":\\\"[1:63] [bool] failed to parse field [must]\\\",\\\"caused_by\\\":{\\\"type\\\":\\\"x_content_parse_exception\\\",\\\"reason\\\":\\\"[1:63] [bool] failed to parse field [should]\\\",\\\"caused_by\\\":{\\\"type\\\":\\\"x_content_parse_exception\\\",\\\"reason\\\":\\\"[1:63] [bool] failed to parse field [should]\\\",\\\"caused_by\\\":{\\\"type\\\":\\\"illegal_state_exception\\\",\\\"reason\\\":\\\"expected value but got [START_ARRAY]\\\"}}}},\\\"status\\\":400}\"}```\r\n\r\n\r\ndebug logentry:\r\n\r\n`\r\nh_elasticsearch | debug - request: {\"providers\":[\"files\"],\"author\":\"lars\",\"search\":\"ratingen\",\"page\":1,\"size\":20,\"parts\":[\"comments\",\"ocr\"],\"queries\":[],\"options\":{\"files_within_dir\":\"\",\"files_local\":\"\",\"files_external\":\"\",\"files_extension\":\"\"},\"metatags\":[],\"subtags\":[],\"tags\":[]} - query: {\"params\":{\"index\":\"cloud_index\",\"type\":\"standard\",\"size\":20,\"from\":0,\"body\":{\"query\":{\"bool\":{\"must\":{\"bool\":{\"should\":{\"bool\":{\"should\":[[{\"bool\":{\"should\":[{\"match_phrase_prefix\":{\"content\":\"ratingen\"}},{\"match_phrase_prefix\":{\"title\":\"ratingen\"}},{\"match_phrase_prefix\":{\"share_names.lars\":\"ratingen\"}},{\"wildcard\":{\"title\":\"*ratingen*\"}},{\"wildcard\":{\"share_names.lars\":\"*ratingen*\"}},{\"query_string\":{\"fields\":[\"parts.comments\",\"parts.ocr\"],\"query\":\"ratingen\"}}]}}]]}}}},\"filter\":[{\"bool\":{\"must\":{\"term\":{\"provider\":\"files\"}}}},{\"bool\":{\"should\":[{\"term\":{\"owner\":\"lars\"}},{\"term\":{\"users\":\"lars\"}},{\"term\":{\"users\":\"__all\"}},{\"term\":{\"groups\":\"admin\"}}]}},{\"bool\":{\"should\":[]}},{\"bool\":{\"must\":[]}},{\"bool\":{\"must\":[]}}]}},\"highlight\":{\"fields\":{\"content\":{},\"parts.comments\":{},\"parts.ocr\":{}},\"pre_tags\":[\"\"],\"post_tags\":[\"\"]}}}}`\r\n\r\n\r\n\r\n\r\n","closed_by":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"performed_via_github_app":null}