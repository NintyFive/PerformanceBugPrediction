[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/335813023","html_url":"https://github.com/elastic/elasticsearch/issues/26968#issuecomment-335813023","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26968","id":335813023,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTgxMzAyMw==","user":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"created_at":"2017-10-11T13:40:35Z","updated_at":"2017-10-11T13:41:27Z","author_association":"CONTRIBUTOR","body":"From a CI PoV I can only see two options:\r\n\r\n1. Limit the eligible CI targets for executing the BWC tests to distributions committed to run an [LTS Linux kernel](https://www.kernel.org/category/releases.html). Just the other day, there was an announcement that all new [LTS kernels will be supported for 6 years](https://www.theregister.co.uk/2017/10/03/linux_kernel_long_term_support_extended_from_two_to_six_years/), up from the current two. Some older LTS kernels have also been bumped to get support for 6 years, see the [EOL table here](https://www.kernel.org/category/releases.html):\r\n\r\n    ![image](https://user-images.githubusercontent.com/1754575/31443631-a38ffce0-aea2-11e7-9ef1-00515dea1a33.png)\r\n\r\n    Practically then, we could only target BWC tests to run on these distros: ubuntu-16.04, ubuntu-14.04, centos-7, centos-6 (and oraclelinux equivalents), debian-8 and sles-12. Periodically updated distributions like OpenSUSE, Fedora and rolling update style such as AmazonLinux should not be included in the BWC testing, until the tests stop including Elasticsearch <5.3.1 which doesn't have the cgroup v2 fix.\r\n\r\n2. Since the BWC tests are periodical, not triggered by commit events, we can just add a check in the test suite to skip/return success if kernel>4.5. As long as the LTS based distributions mentioned in 1. are not EOLed there will always be slaves (and they are the majority in number) where CI will schedule the tests to run on.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/358511892","html_url":"https://github.com/elastic/elasticsearch/issues/26968#issuecomment-358511892","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26968","id":358511892,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODUxMTg5Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-01-18T01:54:27Z","updated_at":"2018-01-18T01:54:27Z","author_association":"MEMBER","body":"This will be closed by #28267, #28268, and #28278.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/358690708","html_url":"https://github.com/elastic/elasticsearch/issues/26968#issuecomment-358690708","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26968","id":358690708,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODY5MDcwOA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-01-18T15:56:55Z","updated_at":"2018-01-18T15:56:55Z","author_association":"MEMBER","body":"Closed by #28267, #28268, and #28278","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/363603550","html_url":"https://github.com/elastic/elasticsearch/issues/26968#issuecomment-363603550","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26968","id":363603550,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzYwMzU1MA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2018-02-06T23:37:16Z","updated_at":"2018-02-06T23:37:16Z","author_association":"MEMBER","body":"I think this has recurred, there's another failure https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+bwc-tests/585/console\r\n\r\n```\r\n...\r\n|    [2018-02-06T23:15:46,787][INFO ][o.e.p.PluginsService     ] [node-0] no plugins loaded\r\n|    [2018-02-06T23:15:47,528][ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [node-0] fatal error in thread [main], exiting\r\n|    java.lang.AssertionError: 0::/system.slice/runsvdir.service\r\n|    \tat org.elasticsearch.monitor.os.OsProbe.getControlGroups(OsProbe.java:210) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.monitor.os.OsProbe.getCgroup(OsProbe.java:402) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.monitor.os.OsProbe.osStats(OsProbe.java:454) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.monitor.os.OsService.<init>(OsService.java:45) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.monitor.MonitorService.<init>(MonitorService.java:45) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.node.Node.<init>(Node.java:345) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.node.Node.<init>(Node.java:229) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.bootstrap.Bootstrap$6.<init>(Bootstrap.java:214) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:214) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:306) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:121) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:112) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.cli.SettingCommand.execute(SettingCommand.java:54) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:96) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.cli.Command.main(Command.java:62) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:89) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n|    \tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:82) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n```\r\n\r\nThe kernel version is 4.13.16-200.fc26.x86_64, though, since the ES version is 5.1.1 maybe there's not much we want to do about it? @jasontedor what do you think?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/363604197","html_url":"https://github.com/elastic/elasticsearch/issues/26968#issuecomment-363604197","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26968","id":363604197,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzYwNDE5Nw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-02-06T23:40:20Z","updated_at":"2018-02-06T23:40:20Z","author_association":"MEMBER","body":"Version 5.1.1 is suppose to be skipped here. See the changes in #28268.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/363604421","html_url":"https://github.com/elastic/elasticsearch/issues/26968#issuecomment-363604421","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26968","id":363604421,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzYwNDQyMQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-02-06T23:41:26Z","updated_at":"2018-02-06T23:41:26Z","author_association":"MEMBER","body":"Oh, I see the problem. Itâ€™s the verify version constants test. I will address.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/363649216","html_url":"https://github.com/elastic/elasticsearch/issues/26968#issuecomment-363649216","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26968","id":363649216,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzY0OTIxNg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-02-07T03:55:42Z","updated_at":"2018-02-07T03:55:42Z","author_association":"MEMBER","body":"@dakrone I pushed d815f5fdd1237b2719ca5a2ce66ee0ba1e4da315 and cherry-picked this to all the places where it is relevant:\r\n - 6.x: d815f5fdd1237b2719ca5a2ce66ee0ba1e4da315\r\n - 6.2: e31736706a1fe6b06909b82e8a70bcd34d051ad1\r\n - 6.1: fbb6e1afb0d71cb0d387c76eed2ea680181e5126\r\n - 5.6: f8bc4322b811748e64f1c4752e5786ebdd7e299e","performed_via_github_app":null}]