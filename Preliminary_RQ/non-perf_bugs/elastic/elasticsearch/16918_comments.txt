[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191547477","html_url":"https://github.com/elastic/elasticsearch/issues/16918#issuecomment-191547477","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16918","id":191547477,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTU0NzQ3Nw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T02:28:34Z","updated_at":"2016-03-03T02:28:34Z","author_association":"MEMBER","body":"> I've checked the folder permission and it is correct. \n\nAre you sure? What user are you launching the Elasticsearch process as, and are you sure that that user has permissions for the resource in question? Be sure to check ownership and all of the `rwx` flags for the state file `/mnt/elasticsearch/index-data/prod_elastic_cluster/nodes/0/indices/search_v2/2/_state` and all parent directories.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191551496","html_url":"https://github.com/elastic/elasticsearch/issues/16918#issuecomment-191551496","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16918","id":191551496,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTU1MTQ5Ng==","user":{"login":"teewhey","id":4113595,"node_id":"MDQ6VXNlcjQxMTM1OTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4113595?v=4","gravatar_id":"","url":"https://api.github.com/users/teewhey","html_url":"https://github.com/teewhey","followers_url":"https://api.github.com/users/teewhey/followers","following_url":"https://api.github.com/users/teewhey/following{/other_user}","gists_url":"https://api.github.com/users/teewhey/gists{/gist_id}","starred_url":"https://api.github.com/users/teewhey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/teewhey/subscriptions","organizations_url":"https://api.github.com/users/teewhey/orgs","repos_url":"https://api.github.com/users/teewhey/repos","events_url":"https://api.github.com/users/teewhey/events{/privacy}","received_events_url":"https://api.github.com/users/teewhey/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T02:45:02Z","updated_at":"2016-03-03T02:45:02Z","author_association":"NONE","body":"Yes I am sure... The owners for the folders and groups belongs to \"elasticsearch\" user that is used to launch the process.\n\nThe cluster was previously working until I did some relocation and restarted the cluster, that's when the issue started to happen. But I do notice this : \nOn the data folder where one of the failing shard is (/mnt/elasticsearch/index-data/prod_elastic_cluster/nodes/0/indices/search_v2/3/_state)\n\nls -al\ntotal 8\ndrwxr-xr-x 2 elasticsearch elasticsearch 4096 Mar  2 10:18 .\ndrw-r-xr-x 5 elasticsearch elasticsearch 4096 Mar  2 10:18 ..\n\nThe folder permission for '..' is not 755. Since there is no reason to manually changing the folder permission, I'd say these are handled by elasticsearch since those that are working has 755 permission on the \"..\" folder.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191554518","html_url":"https://github.com/elastic/elasticsearch/issues/16918#issuecomment-191554518","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16918","id":191554518,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTU1NDUxOA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T02:54:23Z","updated_at":"2016-03-03T02:54:23Z","author_association":"MEMBER","body":"You've shown that the elasticsearch user does not have the executable permission for the parent directory. If the owner doesn't have the executable permission on the parent directory, it will not be able to read a subdirectory via an absolute path through that parent directory.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191558693","html_url":"https://github.com/elastic/elasticsearch/issues/16918#issuecomment-191558693","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16918","id":191558693,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTU1ODY5Mw==","user":{"login":"teewhey","id":4113595,"node_id":"MDQ6VXNlcjQxMTM1OTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4113595?v=4","gravatar_id":"","url":"https://api.github.com/users/teewhey","html_url":"https://github.com/teewhey","followers_url":"https://api.github.com/users/teewhey/followers","following_url":"https://api.github.com/users/teewhey/following{/other_user}","gists_url":"https://api.github.com/users/teewhey/gists{/gist_id}","starred_url":"https://api.github.com/users/teewhey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/teewhey/subscriptions","organizations_url":"https://api.github.com/users/teewhey/orgs","repos_url":"https://api.github.com/users/teewhey/repos","events_url":"https://api.github.com/users/teewhey/events{/privacy}","received_events_url":"https://api.github.com/users/teewhey/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T03:18:04Z","updated_at":"2016-03-03T03:18:04Z","author_association":"NONE","body":"My point is why \"..\" is created by elasticsearch as 655 instead of 755 since the creation of these directories are handled by elasticsearch.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191566165","html_url":"https://github.com/elastic/elasticsearch/issues/16918#issuecomment-191566165","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16918","id":191566165,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTU2NjE2NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T03:42:12Z","updated_at":"2016-03-03T04:05:52Z","author_association":"MEMBER","body":"> The cluster was previously working until I did some relocation\n\nAre you sure that you didn't commit an oops when you did the relocation?\n\n> My point is why \"..\" is created by elasticsearch as 655 instead of 755 since the creation of these directories are handled by elasticsearch.\n\nElasticsearch uses the default permissions when it creates these directories; do you have a `umask` set?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191566988","html_url":"https://github.com/elastic/elasticsearch/issues/16918#issuecomment-191566988","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16918","id":191566988,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTU2Njk4OA==","user":{"login":"teewhey","id":4113595,"node_id":"MDQ6VXNlcjQxMTM1OTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4113595?v=4","gravatar_id":"","url":"https://api.github.com/users/teewhey","html_url":"https://github.com/teewhey","followers_url":"https://api.github.com/users/teewhey/followers","following_url":"https://api.github.com/users/teewhey/following{/other_user}","gists_url":"https://api.github.com/users/teewhey/gists{/gist_id}","starred_url":"https://api.github.com/users/teewhey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/teewhey/subscriptions","organizations_url":"https://api.github.com/users/teewhey/orgs","repos_url":"https://api.github.com/users/teewhey/repos","events_url":"https://api.github.com/users/teewhey/events{/privacy}","received_events_url":"https://api.github.com/users/teewhey/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T03:47:50Z","updated_at":"2016-03-03T03:47:50Z","author_association":"NONE","body":"The umask is set is 0022.\nDuring the relocation, my job queue is still running, so very likely there was some commit ops happened during relocation.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191572255","html_url":"https://github.com/elastic/elasticsearch/issues/16918#issuecomment-191572255","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16918","id":191572255,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTU3MjI1NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T04:07:49Z","updated_at":"2016-03-03T04:07:49Z","author_association":"MEMBER","body":"> During the relocation, my job queue is still running, so very likely there was some commit ops happened during relocation.\n\nJust fix the permissions and you'll be fine. :smile: \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191575917","html_url":"https://github.com/elastic/elasticsearch/issues/16918#issuecomment-191575917","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16918","id":191575917,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTU3NTkxNw==","user":{"login":"teewhey","id":4113595,"node_id":"MDQ6VXNlcjQxMTM1OTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4113595?v=4","gravatar_id":"","url":"https://api.github.com/users/teewhey","html_url":"https://github.com/teewhey","followers_url":"https://api.github.com/users/teewhey/followers","following_url":"https://api.github.com/users/teewhey/following{/other_user}","gists_url":"https://api.github.com/users/teewhey/gists{/gist_id}","starred_url":"https://api.github.com/users/teewhey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/teewhey/subscriptions","organizations_url":"https://api.github.com/users/teewhey/orgs","repos_url":"https://api.github.com/users/teewhey/repos","events_url":"https://api.github.com/users/teewhey/events{/privacy}","received_events_url":"https://api.github.com/users/teewhey/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T04:22:40Z","updated_at":"2016-03-03T04:22:40Z","author_association":"NONE","body":"Yeah.. already done that earlier when i presented the finding earlier : ) \n","performed_via_github_app":null}]