{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2091","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2091/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2091/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2091/events","html_url":"https://github.com/elastic/elasticsearch/issues/2091","id":5486493,"node_id":"MDU6SXNzdWU1NDg2NDkz","number":2091,"title":"CompressorFactory forces inclusion of lucene jars to TransportClient applications","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2012-07-08T12:57:11Z","updated_at":"2016-03-03T22:25:27Z","closed_at":"2012-07-22T09:17:42Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"It seems there is a problem with applications using ES but only the TransportClient. TransportClient should not depend on Lucene jars AFAIK.\n\nBut now such applications will bark with \n\n```\njava.util.concurrent.ExecutionException: java.lang.NoClassDefFoundError: org/apache/lucene/store/IndexOutput\n        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)\n        at java.util.concurrent.FutureTask.get(FutureTask.java:111)\n        at org.xbib.importer.ImportService.waitFor(ImportService.java:124)\n        at org.xbib.importer.ImportService.run(ImportService.java:82)\n        at org.xbib.tools.medline.ElasticsearchMedlineIndexer.main(ElasticsearchMedlineIndexer.java:110)\nCaused by: java.lang.NoClassDefFoundError: org/apache/lucene/store/IndexOutput\n        at java.lang.ClassLoader.defineClass1(Native Method)\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:791)\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)\n        at java.net.URLClassLoader.access$100(URLClassLoader.java:71)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:361)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)\n        at org.elasticsearch.common.compress.CompressorFactory.<clinit>(CompressorFactory.java:36)\n        at org.elasticsearch.transport.support.TransportStreams.buildRequest(TransportStreams.java:109)\n        at org.elasticsearch.transport.netty.NettyTransport.sendRequest(NettyTransport.java:453)\n        at org.elasticsearch.transport.TransportService.sendRequest(TransportService.java:185)\n        at org.elasticsearch.action.TransportActionNodeProxy.execute(TransportActionNodeProxy.java:63)\n        at org.elasticsearch.client.transport.support.InternalTransportClient$2.doWithNode(InternalTransportClient.java:100)\n        at org.elasticsearch.client.transport.TransportClientNodesService.execute(TransportClientNodesService.java:214)\n        at org.elasticsearch.client.transport.support.InternalTransportClient.execute(InternalTransportClient.java:97)\n        at org.elasticsearch.client.support.AbstractClient.bulk(AbstractClient.java:141)\n        at org.elasticsearch.client.transport.TransportClient.bulk(TransportClient.java:328)\n        at org.elasticsearch.action.bulk.BulkRequestBuilder.doExecute(BulkRequestBuilder.java:128)\n        at org.elasticsearch.action.support.BaseRequestBuilder.execute(BaseRequestBuilder.java:53) [...]\n```\n\nIs this by accident or do I need to always include Lucene jars in my ES client applications?\n","closed_by":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"performed_via_github_app":null}