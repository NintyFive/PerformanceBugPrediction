{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/64706","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/64706/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/64706/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/64706/events","html_url":"https://github.com/elastic/elasticsearch/issues/64706","id":737738347,"node_id":"MDU6SXNzdWU3Mzc3MzgzNDc=","number":64706,"title":"EQL: Allow event in sequences without tiebreakers","user":{"login":"costin","id":76245,"node_id":"MDQ6VXNlcjc2MjQ1","avatar_url":"https://avatars3.githubusercontent.com/u/76245?v=4","gravatar_id":"","url":"https://api.github.com/users/costin","html_url":"https://github.com/costin","followers_url":"https://api.github.com/users/costin/followers","following_url":"https://api.github.com/users/costin/following{/other_user}","gists_url":"https://api.github.com/users/costin/gists{/gist_id}","starred_url":"https://api.github.com/users/costin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/costin/subscriptions","organizations_url":"https://api.github.com/users/costin/orgs","repos_url":"https://api.github.com/users/costin/repos","events_url":"https://api.github.com/users/costin/events{/privacy}","received_events_url":"https://api.github.com/users/costin/received_events","type":"User","site_admin":false},"labels":[{"id":1690690117,"node_id":"MDU6TGFiZWwxNjkwNjkwMTE3","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Query%20Languages/EQL","name":":Query Languages/EQL","color":"0e8a16","default":false,"description":"EQL querying"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":1967501040,"node_id":"MDU6TGFiZWwxOTY3NTAxMDQw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:QL","name":"Team:QL","color":"fef2c0","default":false,"description":"Meta label for query languages team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-11-06T12:57:31Z","updated_at":"2020-11-16T14:40:55Z","closed_at":"2020-11-16T14:40:55Z","author_association":"MEMBER","active_lock_reason":null,"body":"Based on the discussion in #64671, the following [inconsistency](https://github.com/elastic/elasticsearch/pull/64671#issuecomment-722984340) has been identified:\r\n\r\nWhen a tiebreaker is missing, we do not validate its existence for event queries however for sequences, we do (and throw a somewhat obscure exception otherwise).\r\nWe should align the two - currently a missing tiebreaker occurs after those that specify it. That is null/missing is considered greater than a specified value so that those that do take priority.\r\nWe can apply the same for sequences so events with missing tiebreakers instead of throwing an exception will be considered last and incorporated accordingly into the sequence:\r\n\r\n`event[2020-11-06T11:22:33.4444][1]` occurs before `event[2020-11-06T11:22:33.4444][null]`\r\n\r\nConsidering the behavior of event queries, the same ordering characteristics should apply to sequences.\r\nThat is:\r\n\r\n1. allow a specified tiebreaker with null value. This means no validation of said field, it might be completely missing.\r\n2. if it's missing, null are considered greater than specified values in order to pick those over those that lack this information. This is consistent with event queries.\r\n\r\nSupersedes #64690\r\n\r\n/cc @astefan @marshallmain @rw-access ","closed_by":{"login":"costin","id":76245,"node_id":"MDQ6VXNlcjc2MjQ1","avatar_url":"https://avatars3.githubusercontent.com/u/76245?v=4","gravatar_id":"","url":"https://api.github.com/users/costin","html_url":"https://github.com/costin","followers_url":"https://api.github.com/users/costin/followers","following_url":"https://api.github.com/users/costin/following{/other_user}","gists_url":"https://api.github.com/users/costin/gists{/gist_id}","starred_url":"https://api.github.com/users/costin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/costin/subscriptions","organizations_url":"https://api.github.com/users/costin/orgs","repos_url":"https://api.github.com/users/costin/repos","events_url":"https://api.github.com/users/costin/events{/privacy}","received_events_url":"https://api.github.com/users/costin/received_events","type":"User","site_admin":false},"performed_via_github_app":null}