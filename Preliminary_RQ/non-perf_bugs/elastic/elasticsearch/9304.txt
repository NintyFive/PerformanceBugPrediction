{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9304","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9304/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9304/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9304/events","html_url":"https://github.com/elastic/elasticsearch/issues/9304","id":54407106,"node_id":"MDU6SXNzdWU1NDQwNzEwNg==","number":9304,"title":"GeoPolygonFilter fails on ambiguous polygons","user":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"labels":[{"id":141079527,"node_id":"MDU6TGFiZWwxNDEwNzk1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Geo","name":":Analytics/Geo","color":"0e8a16","default":false,"description":"Indexing, search aggregations of geo points and shapes"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2015-01-15T03:00:25Z","updated_at":"2019-02-04T15:41:24Z","closed_at":"2019-02-04T15:41:24Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Polygon ambiguity was addressed in `ShapeBuilder` via #8762.  `GeoPolygonFilter`, however, doesn't use `ShapeBuilder` and instead relies on legacy `pointInPolygon` code that fails on ambiguous polygons.  One use-case example is presented in #5968  The suggested fix is to translate all candidate points and `GeoPolygonFilter` points to great-circle coordinates.  This, however, will cause a failure with any `GeoPolygonFilter` that crosses the prime meridian.\n\nThe correct approach is to update the `GeoPolygonFilter` to leverage code written in #8762 by refactoring the ambiguous polygon logic to helper methods.  This will also remove any legacy code (and rename any parameters) that might cause confusion when using the Java API.  \n","closed_by":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"performed_via_github_app":null}