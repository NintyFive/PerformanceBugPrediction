{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/56998","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56998/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56998/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56998/events","html_url":"https://github.com/elastic/elasticsearch/issues/56998","id":621808660,"node_id":"MDU6SXNzdWU2MjE4MDg2NjA=","number":56998,"title":"Gradle deprecation warning of compileOnly not being directly resolved is removed","user":{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false},"assignees":[{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2020-05-20T14:28:59Z","updated_at":"2020-11-11T21:36:27Z","closed_at":"2020-05-27T15:10:08Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"While running e.g. `./gradlew precommit` we see about 120 deprecation warnings of \r\n\r\n`The compileOnly configuration has been deprecated for resolution.`\r\n\r\nFrom investigating the build I found three places that cause a direct resolution of this configuration:\r\n\r\n1. `ThirdPartyAuditTask` (see https://github.com/elastic/elasticsearch/blob/master/buildSrc/src/main/java/org/elasticsearch/gradle/precommit/ThirdPartyAuditTask.java#L177-L180)\r\n2. `DependenciesInfoTask`  (see https://github.com/elastic/elasticsearch/blob/c0ee68b0a03d0dafcd34bcb168f1e2d3d68f1886/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy#L302) \r\n3.  `DependencyLicensesTask` (see configuration at https://github.com/elastic/elasticsearch/blob/c0ee68b0a03d0dafcd34bcb168f1e2d3d68f1886/buildSrc/src/main/groovy/org/elasticsearch/gradle/BuildPlugin.groovy#L292-L295)\r\n\r\nIn all of those 3 places we subtract the `compileOnly` dependencies from the `runtimeClasspath` configuration. I wonder what is the scenario here that actually makes this happen or a concern? Shouldn't by design all compileOnly entries never end up on the `runtimeClasspath`?\r\n\r\nHere's an overview of how gradle configurations are related by default: https://docs.gradle.org/6.4.1/userguide/java_library_plugin.html#sec:java_library_configurations_graph\r\n","closed_by":{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false},"performed_via_github_app":null}