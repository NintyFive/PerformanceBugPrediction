[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/436612337","html_url":"https://github.com/elastic/elasticsearch/issues/35333#issuecomment-436612337","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35333","id":436612337,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjYxMjMzNw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-11-07T12:49:42Z","updated_at":"2018-11-07T12:49:42Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/436629414","html_url":"https://github.com/elastic/elasticsearch/issues/35333#issuecomment-436629414","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35333","id":436629414,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjYyOTQxNA==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-11-07T13:52:46Z","updated_at":"2018-11-07T13:52:46Z","author_association":"MEMBER","body":"Muted in 6.x in https://github.com/elastic/elasticsearch/commit/723f57a8734059a589283f50a76778c3edcc60df","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/436643501","html_url":"https://github.com/elastic/elasticsearch/issues/35333#issuecomment-436643501","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35333","id":436643501,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjY0MzUwMQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-11-07T14:37:04Z","updated_at":"2018-11-07T14:37:04Z","author_association":"MEMBER","body":"@colings86 Thanks for raising this issue. I will look into this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/437014215","html_url":"https://github.com/elastic/elasticsearch/issues/35333#issuecomment-437014215","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35333","id":437014215,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNzAxNDIxNQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-11-08T14:35:11Z","updated_at":"2018-11-08T14:35:11Z","author_association":"MEMBER","body":"So I tried to reproduce this failure with reproduce command here and with just adding `-Dtests.iters=128` and it does not reproduce for me. Not sure what the cause is.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/437377760","html_url":"https://github.com/elastic/elasticsearch/issues/35333#issuecomment-437377760","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35333","id":437377760,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNzM3Nzc2MA==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-11-09T14:36:26Z","updated_at":"2018-11-09T14:36:26Z","author_association":"MEMBER","body":"I've increased the number of ops to make it less likely for all ops to remain as soft deleted docs: fba811fa3ab74dd6fe342c2908990f8c225d9fbb (which i think it the reason that the expected error wasn't thrown).\r\n\r\nand also unmuted the test in 6.x branch.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/438144277","html_url":"https://github.com/elastic/elasticsearch/issues/35333#issuecomment-438144277","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35333","id":438144277,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODE0NDI3Nw==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2018-11-13T05:42:39Z","updated_at":"2018-11-13T05:42:39Z","author_association":"CONTRIBUTOR","body":"This just failed for me in a PR CI build (for master)\r\n\r\nI can just rerun my build, but if you want the details for investigation purposes:\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+pull-request/2469/console\r\n\r\n```\r\nREPRODUCE WITH: ./gradlew :x-pack:plugin:ccr:test -Dtests.seed=86846D2550B877E6 -Dtests.class=org.elasticsearch.xpack.ccr.action.ShardChangesTests -Dtests.method=\"testMissingOperations\" -Dtests.security.manager=true -Dtests.locale=ru-RU -Dtests.timezone=Antarctica/Palmer -Dcompiler.java=11 -Druntime.java=8\r\n```\r\n\r\n```\r\n03:31:21 FAILURE 5.86s J3 | ShardChangesTests.testMissingOperations <<< FAILURES!\r\n03:31:21    > Throwable #1: junit.framework.AssertionFailedError: Expected exception ElasticsearchException but no exception was thrown\r\n03:31:21    > \tat __randomizedtesting.SeedInfo.seed([86846D2550B877E6:7FC3CF1B0453C2CC]:0)\r\n03:31:21    > \tat org.apache.lucene.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2684)\r\n03:31:21    > \tat org.apache.lucene.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2669)\r\n03:31:21    > \tat org.elasticsearch.xpack.ccr.action.ShardChangesTests.testMissingOperations(ShardChangesTests.java:114)\r\n03:31:21    > \tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/438275672","html_url":"https://github.com/elastic/elasticsearch/issues/35333#issuecomment-438275672","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35333","id":438275672,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODI3NTY3Mg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-11-13T14:00:57Z","updated_at":"2018-11-13T14:00:57Z","author_association":"MEMBER","body":"@tvernum Thanks for sharing this. I think that the force merge did not really merge anything, and therefor kept the soft deletes. I pushed a change that should avoid such scenarios: 0487181d0f2d9fdfda8d0d543219c62a00c379d9","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/443137690","html_url":"https://github.com/elastic/elasticsearch/issues/35333#issuecomment-443137690","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35333","id":443137690,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzEzNzY5MA==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-11-30T09:04:02Z","updated_at":"2018-11-30T09:04:02Z","author_association":"MEMBER","body":"Closing. I've not seen this test failing after the test was adjusted. ","performed_via_github_app":null}]