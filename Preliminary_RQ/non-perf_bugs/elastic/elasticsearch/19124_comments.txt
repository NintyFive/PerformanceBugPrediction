[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/229047602","html_url":"https://github.com/elastic/elasticsearch/issues/19124#issuecomment-229047602","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19124","id":229047602,"node_id":"MDEyOklzc3VlQ29tbWVudDIyOTA0NzYwMg==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2016-06-28T13:25:22Z","updated_at":"2016-06-28T13:25:22Z","author_association":"MEMBER","body":"`162.251.82.124,162.251.82.125,162.251.82.252,162.251.82.253` is not a valid ip address. If you are trying to assign multiple IP addresses to the `ip_address` field, you must provide them as an array of values such as:\n\n```\n{\n    \"ip_address\": [ \"162.251.82.124\" , \"162.251.82.125\" , \"162.251.82.252\" , \"162.251.82.253\" ]\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/229059330","html_url":"https://github.com/elastic/elasticsearch/issues/19124#issuecomment-229059330","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19124","id":229059330,"node_id":"MDEyOklzc3VlQ29tbWVudDIyOTA1OTMzMA==","user":{"login":"esamudio","id":6547184,"node_id":"MDQ6VXNlcjY1NDcxODQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6547184?v=4","gravatar_id":"","url":"https://api.github.com/users/esamudio","html_url":"https://github.com/esamudio","followers_url":"https://api.github.com/users/esamudio/followers","following_url":"https://api.github.com/users/esamudio/following{/other_user}","gists_url":"https://api.github.com/users/esamudio/gists{/gist_id}","starred_url":"https://api.github.com/users/esamudio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/esamudio/subscriptions","organizations_url":"https://api.github.com/users/esamudio/orgs","repos_url":"https://api.github.com/users/esamudio/repos","events_url":"https://api.github.com/users/esamudio/events{/privacy}","received_events_url":"https://api.github.com/users/esamudio/received_events","type":"User","site_admin":false},"created_at":"2016-06-28T14:06:06Z","updated_at":"2016-06-28T14:08:12Z","author_association":"NONE","body":"@clintongormley @colings86 \n\nThanks for the quick response!\n\nI should have made this clearer. I have the document in elasticsearch already and that happens when I perform an update call to insert a completely unrelated field. I believe that when the document is reindexed, its not being parsed properly.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/229063018","html_url":"https://github.com/elastic/elasticsearch/issues/19124#issuecomment-229063018","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19124","id":229063018,"node_id":"MDEyOklzc3VlQ29tbWVudDIyOTA2MzAxOA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-06-28T14:18:14Z","updated_at":"2016-06-28T14:18:14Z","author_association":"CONTRIBUTOR","body":"Can you provide us with a simple recreation of the issue so that we can look into it?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/229081248","html_url":"https://github.com/elastic/elasticsearch/issues/19124#issuecomment-229081248","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19124","id":229081248,"node_id":"MDEyOklzc3VlQ29tbWVudDIyOTA4MTI0OA==","user":{"login":"esamudio","id":6547184,"node_id":"MDQ6VXNlcjY1NDcxODQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6547184?v=4","gravatar_id":"","url":"https://api.github.com/users/esamudio","html_url":"https://github.com/esamudio","followers_url":"https://api.github.com/users/esamudio/followers","following_url":"https://api.github.com/users/esamudio/following{/other_user}","gists_url":"https://api.github.com/users/esamudio/gists{/gist_id}","starred_url":"https://api.github.com/users/esamudio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/esamudio/subscriptions","organizations_url":"https://api.github.com/users/esamudio/orgs","repos_url":"https://api.github.com/users/esamudio/repos","events_url":"https://api.github.com/users/esamudio/events{/privacy}","received_events_url":"https://api.github.com/users/esamudio/received_events","type":"User","site_admin":false},"created_at":"2016-06-28T15:15:27Z","updated_at":"2016-06-28T15:23:25Z","author_association":"NONE","body":"I think I finally understood where the issue originates but I'm not sure of how to easily replicate it. I'm not familiar enough with github issues to know if I can move this one or if I have to duplicate it because it seems to be a logstash problem. The elasticsearch plugin in logstash seems to be the cause of the problem. Whenever I insert or update anything using \"action => update\" in logstash, the IPs give problems because it doesn't properly parse the array of IPs, triggering the error mentioned by @colings86. For example, below is a new document being indexed with logstash using update. This is an excerpt of the logstash log:\n\n`{:timestamp=>\"2016-06-28T02:48:01.215000+0000\", :message=>\"Failed action. \", :status=>400, :action=>[\"update\", {:_id=>\"2667500489.MARS.ORDERBOX-DNS.COM.\", :_index=>\"full\", :_type=>\"A\", :_routing=>nil, :_retry_on_conflict=>1}, #<LogStash::Event:0x3b5cf2c6 @metadata_accessors=#<LogStash::Util::Accessors:0x4053d7b9 @store={}, @lut={}>, @cancelled=false, @data={\"@version\"=>\"1\", \"@timestamp\"=>\"2016-06-28T02:47:08.358Z\", \"zone\"=>\"com\", \"sign\"=>\"+\", \"domain_name\"=>\"2667500489.MARS.ORDERBOX-DNS.COM.\", \"type\"=>\"A\", \"ip_address\"=>[\"162.251.82.124\", \"162.251.82.125\", \"162.251.82.252\", \"162.251.82.253\"], \"domain_name_exact\"=>\"2667500489.MARS.ORDERBOX-DNS.COM.\", \"domain_name_length\"=>33, \"is_registered\"=>true, \"last_registered\"=>\"2016-05-01T10:00:00.000-0500\", \"registered_history\"=>[\"2016-05-01T10:00:00.000-0500\"], \"deregistered_history\"=>[], \"ip_address_exact\"=>[\"162.251.82.124\", \"162.251.82.125\", \"162.251.82.252\", \"162.251.82.253\"]}, @metadata={}, ...[omitted for brevity]... :response=>{\"update\"=>{\"_index\"=>\"full\", \"_type\"=>\"A\", \"_id\"=>\"2667500489.MARS.ORDERBOX-DNS.COM.\", \"status\"=>400, \"error\"=>{\"type\"=>\"mapper_parsing_exception\", \"reason\"=>\"failed to parse [ip_address]\", \"caused_by\"=>{\"type\"=>\"illegal_argument_exception\", \"reason\"=>\"failed to parse ip [162.251.82.124,162.251.82.125,162.251.82.252,162.251.82.253], not a valid ip address\"}}}}, :level=>:warn}`\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/229085349","html_url":"https://github.com/elastic/elasticsearch/issues/19124#issuecomment-229085349","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19124","id":229085349,"node_id":"MDEyOklzc3VlQ29tbWVudDIyOTA4NTM0OQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-06-28T15:28:13Z","updated_at":"2016-06-28T15:28:13Z","author_association":"CONTRIBUTOR","body":"I don't think Github has any workflow to move issue, so you'd have to open another one on the logstash repo: https://github.com/elastic/logstash. I am closing this one in the meantime.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/229085958","html_url":"https://github.com/elastic/elasticsearch/issues/19124#issuecomment-229085958","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19124","id":229085958,"node_id":"MDEyOklzc3VlQ29tbWVudDIyOTA4NTk1OA==","user":{"login":"esamudio","id":6547184,"node_id":"MDQ6VXNlcjY1NDcxODQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6547184?v=4","gravatar_id":"","url":"https://api.github.com/users/esamudio","html_url":"https://github.com/esamudio","followers_url":"https://api.github.com/users/esamudio/followers","following_url":"https://api.github.com/users/esamudio/following{/other_user}","gists_url":"https://api.github.com/users/esamudio/gists{/gist_id}","starred_url":"https://api.github.com/users/esamudio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/esamudio/subscriptions","organizations_url":"https://api.github.com/users/esamudio/orgs","repos_url":"https://api.github.com/users/esamudio/repos","events_url":"https://api.github.com/users/esamudio/events{/privacy}","received_events_url":"https://api.github.com/users/esamudio/received_events","type":"User","site_admin":false},"created_at":"2016-06-28T15:30:02Z","updated_at":"2016-06-28T15:30:02Z","author_association":"NONE","body":"Thanks! I really appreciate the effort and quick response you guys have whenever an issue is opened\n","performed_via_github_app":null}]