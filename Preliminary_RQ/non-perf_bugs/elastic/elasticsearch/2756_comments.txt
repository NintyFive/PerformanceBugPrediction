[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/14700475","html_url":"https://github.com/elastic/elasticsearch/issues/2756#issuecomment-14700475","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2756","id":14700475,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NzAwNDc1","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-03-11T07:31:45Z","updated_at":"2013-03-11T07:31:45Z","author_association":"CONTRIBUTOR","body":"Jiles, thanks for opening this issue. This provides valuable input and I agree we should totally fix our defaults here. I wonder if we should adjust the default levels for GeoHash as well here since it seems to bloat the index dramatically we might change that too to prevent pitfalls?\n\nI wonder if we should also allow the users to configure this via enums rather than levels where you an say, \"HIGH_ACCURACY\" rather than quad_tree with level 24? I guess that would mean much more to a lot of users?\n\nRegarding Lucene 4.2 I am just waiting for the maven mirrors to pick up the release so that should be in later today. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/14733322","html_url":"https://github.com/elastic/elasticsearch/issues/2756#issuecomment-14733322","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2756","id":14733322,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NzMzMzIy","user":{"login":"IamJeffG","id":2002703,"node_id":"MDQ6VXNlcjIwMDI3MDM=","avatar_url":"https://avatars1.githubusercontent.com/u/2002703?v=4","gravatar_id":"","url":"https://api.github.com/users/IamJeffG","html_url":"https://github.com/IamJeffG","followers_url":"https://api.github.com/users/IamJeffG/followers","following_url":"https://api.github.com/users/IamJeffG/following{/other_user}","gists_url":"https://api.github.com/users/IamJeffG/gists{/gist_id}","starred_url":"https://api.github.com/users/IamJeffG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IamJeffG/subscriptions","organizations_url":"https://api.github.com/users/IamJeffG/orgs","repos_url":"https://api.github.com/users/IamJeffG/repos","events_url":"https://api.github.com/users/IamJeffG/events{/privacy}","received_events_url":"https://api.github.com/users/IamJeffG/received_events","type":"User","site_admin":false},"created_at":"2013-03-11T18:57:38Z","updated_at":"2013-03-11T18:57:38Z","author_association":"CONTRIBUTOR","body":"Related: Given that we require extremely fine resolution in the index (i.e. the lowest possible tree levels) to avoid exorbitant false positives, I have trouble imagining a scenario where anyone would want distance_error_pct to be > 0.0.  (All distance_error_pct does is allow higher levels of the tree to be used -- resulting in still more errant results).   If we are going to be serious about improving accuracy in geo_shape queries, it worth defaulting distance_error_pct to 0.0?\n\nIn either case, defaulting tree_levels greater than about 14 will result in unacceptable latency for anybody who tries to index shapes on the order of hundreds of kilometers, or query over similar extents.  The ES mapping must generate all the tiles over your shape, which ends up being an algorithm exponential in the number of levels.  For instance, if I am indexing shapes on the scale of countries or timezones, and I set quadtree tree_levels to 20, an index operation generates hundreds of thousands of cells for the Lucene index, driving up latency to > 10 seconds _per document._\n\nTo effectively use the geo_shape mapping really requires an understanding by the end-user of its implementation and trial and error around ideal tree_levels settings for his/her documents.  Better ES documentation would do wonders here.  Frankly, I feel that merely changing the defaults is a mere optimization for a presumed use case (we have no idea what shapes the typical user is indexing), and skirts two bigger problems:\n1. **no** spatial index is immune from errant matches without actually verifying candidates against the query (see Issue #2361)\n2. The quadtree and geohash implementations do not exploit the tree structure of the index at query time.  Rather they pick a single tree level to create a naive grid over the earth.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/14742874","html_url":"https://github.com/elastic/elasticsearch/issues/2756#issuecomment-14742874","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2756","id":14742874,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NzQyODc0","user":{"login":"jillesvangurp","id":819187,"node_id":"MDQ6VXNlcjgxOTE4Nw==","avatar_url":"https://avatars2.githubusercontent.com/u/819187?v=4","gravatar_id":"","url":"https://api.github.com/users/jillesvangurp","html_url":"https://github.com/jillesvangurp","followers_url":"https://api.github.com/users/jillesvangurp/followers","following_url":"https://api.github.com/users/jillesvangurp/following{/other_user}","gists_url":"https://api.github.com/users/jillesvangurp/gists{/gist_id}","starred_url":"https://api.github.com/users/jillesvangurp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jillesvangurp/subscriptions","organizations_url":"https://api.github.com/users/jillesvangurp/orgs","repos_url":"https://api.github.com/users/jillesvangurp/repos","events_url":"https://api.github.com/users/jillesvangurp/events{/privacy}","received_events_url":"https://api.github.com/users/jillesvangurp/received_events","type":"User","site_admin":false},"created_at":"2013-03-11T21:09:40Z","updated_at":"2013-03-11T21:10:12Z","author_association":"CONTRIBUTOR","body":"I partially agree, though I think the majority of users is probably interested in smaller features like pois, building polygons, etc. The current defaults with quad tree are kind of useless for that. With geohash they are fine but you do end up with a very large index \n\nFor extremely large polygons, there is indeed an issue at higher tree_levels. Maybe the behavior should vary depending on the size of the geojson feature being indexed/queried instead of being fixed for all documents. I'm not sure how feasible that is with the current implementation.\n\nIn any case, I've uploaded the osm data I have been testing with here. It's derived from open street map and I've also included a public domain file with geojson for the country borders: https://dl.dropbox.com/u/18756426/osm-geojson.zip\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/14743320","html_url":"https://github.com/elastic/elasticsearch/issues/2756#issuecomment-14743320","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2756","id":14743320,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NzQzMzIw","user":{"login":"jillesvangurp","id":819187,"node_id":"MDQ6VXNlcjgxOTE4Nw==","avatar_url":"https://avatars2.githubusercontent.com/u/819187?v=4","gravatar_id":"","url":"https://api.github.com/users/jillesvangurp","html_url":"https://github.com/jillesvangurp","followers_url":"https://api.github.com/users/jillesvangurp/followers","following_url":"https://api.github.com/users/jillesvangurp/following{/other_user}","gists_url":"https://api.github.com/users/jillesvangurp/gists{/gist_id}","starred_url":"https://api.github.com/users/jillesvangurp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jillesvangurp/subscriptions","organizations_url":"https://api.github.com/users/jillesvangurp/orgs","repos_url":"https://api.github.com/users/jillesvangurp/repos","events_url":"https://api.github.com/users/jillesvangurp/events{/privacy}","received_events_url":"https://api.github.com/users/jillesvangurp/received_events","type":"User","site_admin":false},"created_at":"2013-03-11T21:17:55Z","updated_at":"2013-03-11T21:17:55Z","author_association":"CONTRIBUTOR","body":"@s1monw I think changing the parameters to be less technical would be a good idea. I think people think about accuracy in terms of meters. It should be fairly straightforward to translate that into the appropriate tree_levels for each implementation. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/15176864","html_url":"https://github.com/elastic/elasticsearch/issues/2756#issuecomment-15176864","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2756","id":15176864,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MTc2ODY0","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-03-20T13:56:03Z","updated_at":"2013-03-20T13:56:03Z","author_association":"CONTRIBUTOR","body":"@jillesvangurp can we close this with the push or #2803 \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/15177233","html_url":"https://github.com/elastic/elasticsearch/issues/2756#issuecomment-15177233","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2756","id":15177233,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MTc3MjMz","user":{"login":"jillesvangurp","id":819187,"node_id":"MDQ6VXNlcjgxOTE4Nw==","avatar_url":"https://avatars2.githubusercontent.com/u/819187?v=4","gravatar_id":"","url":"https://api.github.com/users/jillesvangurp","html_url":"https://github.com/jillesvangurp","followers_url":"https://api.github.com/users/jillesvangurp/followers","following_url":"https://api.github.com/users/jillesvangurp/following{/other_user}","gists_url":"https://api.github.com/users/jillesvangurp/gists{/gist_id}","starred_url":"https://api.github.com/users/jillesvangurp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jillesvangurp/subscriptions","organizations_url":"https://api.github.com/users/jillesvangurp/orgs","repos_url":"https://api.github.com/users/jillesvangurp/repos","events_url":"https://api.github.com/users/jillesvangurp/events{/privacy}","received_events_url":"https://api.github.com/users/jillesvangurp/received_events","type":"User","site_admin":false},"created_at":"2013-03-20T14:02:28Z","updated_at":"2013-03-20T14:02:28Z","author_association":"CONTRIBUTOR","body":"Yes, just looked at the commit and new defaults seem fine. I'll close it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/15177671","html_url":"https://github.com/elastic/elasticsearch/issues/2756#issuecomment-15177671","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2756","id":15177671,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MTc3Njcx","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-03-20T14:10:30Z","updated_at":"2013-03-20T14:10:30Z","author_association":"CONTRIBUTOR","body":"thanks man!\n","performed_via_github_app":null}]