[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274381113","html_url":"https://github.com/elastic/elasticsearch/issues/22734#issuecomment-274381113","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22734","id":274381113,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDM4MTExMw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-01-23T02:09:23Z","updated_at":"2017-01-23T02:52:51Z","author_association":"MEMBER","body":"I don't think that we should do that.\r\n\r\nFirst, memory locking should be the least preferred option to preventing the JVM heap from landing on disk. It's an option for users for which completely disabling swap or minimizing swappiness are not options.\r\n\r\nSecond, additional configuration is required anyway for enabling memory locking: setting `bootstrap.memory_lock`. If a user enables this but has not configured max locked memory correctly, memory locking will fail. In production mode, [startup will fail](https://www.elastic.co/guide/en/elasticsearch/reference/5.1/_memory_lock_check.html) informing the user that additional configuration is needed. In particular, if the OS is enforcing restrictive per-user limits (e.g., the default on stock Fedora 25 is 64k), adding `LimitMEMLOCK=infinity` to the unit file is not enough.","performed_via_github_app":null}]