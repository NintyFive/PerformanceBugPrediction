[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/13430856","html_url":"https://github.com/elastic/elasticsearch/issues/2637#issuecomment-13430856","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2637","id":13430856,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNDMwODU2","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-02-12T12:43:19Z","updated_at":"2013-02-12T12:43:19Z","author_association":"MEMBER","body":"It looks like a bug in parser. The filter element parser doesn't expect to see the \"_cache\" element, gets confused and ignores the rest of the query. It's not really related to cache. You can actually replace the last `\"_cache\": \"false\"` with `\"foo\":\"bar\"` and you will get the same result.\n\nTo make this query work, you can simply remove the last  `\"_cache\": \"false\"`. The `and` filter is not cached by default. You can enable caching for this filter by adding `_cache` field, but it requires slightly different syntax. See the last example on the [And Filter](http://www.elasticsearch.org/guide/reference/query-dsl/and-filter.html) page for more details. By the way, you might get better performance by replacing the top level filter with a filtered query.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/13469974","html_url":"https://github.com/elastic/elasticsearch/issues/2637#issuecomment-13469974","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2637","id":13469974,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNDY5OTc0","user":{"login":"yongkyun","id":3538511,"node_id":"MDQ6VXNlcjM1Mzg1MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/3538511?v=4","gravatar_id":"","url":"https://api.github.com/users/yongkyun","html_url":"https://github.com/yongkyun","followers_url":"https://api.github.com/users/yongkyun/followers","following_url":"https://api.github.com/users/yongkyun/following{/other_user}","gists_url":"https://api.github.com/users/yongkyun/gists{/gist_id}","starred_url":"https://api.github.com/users/yongkyun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yongkyun/subscriptions","organizations_url":"https://api.github.com/users/yongkyun/orgs","repos_url":"https://api.github.com/users/yongkyun/repos","events_url":"https://api.github.com/users/yongkyun/events{/privacy}","received_events_url":"https://api.github.com/users/yongkyun/received_events","type":"User","site_admin":false},"created_at":"2013-02-13T01:28:34Z","updated_at":"2013-02-13T01:30:52Z","author_association":"CONTRIBUTOR","body":"I removed \"_cache\" option of and filter, but cache size is increased. It looks like \"_cache\" : \"true\" of and filter by default\nsearch query : \n{\n  \"from\": 0,\n  \"size\": 1000,\n  \"filter\": {\n    \"and\": [\n      {\n        \"term\": {\n          \"content\": \"signature31\",\n          \"_cache\": \"false\"\n        }\n      },\n      {\n        \"term\": {\n          \"no\": \"31\",\n          \"_cache\": \"false\"\n        }\n      },\n      {\n        \"range\": {\n          \"evt_time\": {\n            \"from\": \"2013-02-12 00:02:00\",\n            \"to\": \"2013-02-12 23:20:59\"\n          },\n          \"_cache\": \"false\"\n        }\n      }\n    ]\n  },\n  \"sort\": [\n    {\n      \"evt_time\": {\n        \"order\": \"desc\"\n      }\n    }\n  ]\n}\n\n![search_result1](https://f.cloud.github.com/assets/3538511/151476/a1526c1a-757c-11e2-8f0d-f0b62521f158.png)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/13471187","html_url":"https://github.com/elastic/elasticsearch/issues/2637#issuecomment-13471187","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2637","id":13471187,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNDcxMTg3","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-02-13T02:11:48Z","updated_at":"2013-02-13T02:11:48Z","author_association":"MEMBER","body":"Could it be because of the filter on the type? Run the following query first, check the size of the filter cache, then run your query and see if the cache size increases or not.\n\n```\n{\n    \"query\" : {\n        \"match_all\" : {\n         }\n    }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/13471716","html_url":"https://github.com/elastic/elasticsearch/issues/2637#issuecomment-13471716","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2637","id":13471716,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNDcxNzE2","user":{"login":"yongkyun","id":3538511,"node_id":"MDQ6VXNlcjM1Mzg1MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/3538511?v=4","gravatar_id":"","url":"https://api.github.com/users/yongkyun","html_url":"https://github.com/yongkyun","followers_url":"https://api.github.com/users/yongkyun/followers","following_url":"https://api.github.com/users/yongkyun/following{/other_user}","gists_url":"https://api.github.com/users/yongkyun/gists{/gist_id}","starred_url":"https://api.github.com/users/yongkyun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yongkyun/subscriptions","organizations_url":"https://api.github.com/users/yongkyun/orgs","repos_url":"https://api.github.com/users/yongkyun/repos","events_url":"https://api.github.com/users/yongkyun/events{/privacy}","received_events_url":"https://api.github.com/users/yongkyun/received_events","type":"User","site_admin":false},"created_at":"2013-02-13T02:34:56Z","updated_at":"2013-02-13T02:39:11Z","author_association":"CONTRIBUTOR","body":"If I search with your query, Filter and field cache is not increased. But I search with my query, filter cache is not increased. But filed cache is increased. \nIf I search with my query and \"_cache\" : \"false\" of and filter, filter and field cache is not increased. But result is not sorted.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/13471821","html_url":"https://github.com/elastic/elasticsearch/issues/2637#issuecomment-13471821","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2637","id":13471821,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNDcxODIx","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-02-13T02:38:30Z","updated_at":"2013-02-13T02:38:30Z","author_association":"MEMBER","body":"Oh, I didn't realize that you were asking about field cache. The field cache is increased because of sort, not because of the filter. In order to perform sorting the field that you are sorting on has to be loaded into field cache, there is really no way around it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/13473964","html_url":"https://github.com/elastic/elasticsearch/issues/2637#issuecomment-13473964","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2637","id":13473964,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNDczOTY0","user":{"login":"yongkyun","id":3538511,"node_id":"MDQ6VXNlcjM1Mzg1MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/3538511?v=4","gravatar_id":"","url":"https://api.github.com/users/yongkyun","html_url":"https://github.com/yongkyun","followers_url":"https://api.github.com/users/yongkyun/followers","following_url":"https://api.github.com/users/yongkyun/following{/other_user}","gists_url":"https://api.github.com/users/yongkyun/gists{/gist_id}","starred_url":"https://api.github.com/users/yongkyun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yongkyun/subscriptions","organizations_url":"https://api.github.com/users/yongkyun/orgs","repos_url":"https://api.github.com/users/yongkyun/repos","events_url":"https://api.github.com/users/yongkyun/events{/privacy}","received_events_url":"https://api.github.com/users/yongkyun/received_events","type":"User","site_admin":false},"created_at":"2013-02-13T04:22:13Z","updated_at":"2013-02-13T04:22:13Z","author_association":"CONTRIBUTOR","body":"Thanks imotov. \nI realize!!\nand filter is \"_cache\" : \"false\" by default. but if I use explicitly \"_cache\" : \"false\" to and filter with sort, result is not sorted. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51584577","html_url":"https://github.com/elastic/elasticsearch/issues/2637#issuecomment-51584577","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2637","id":51584577,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTg0NTc3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-08T10:13:04Z","updated_at":"2014-08-08T10:13:04Z","author_association":"CONTRIBUTOR","body":"This original issue was caused by invalid query syntax, which now throws an exception.  Closing\n","performed_via_github_app":null}]