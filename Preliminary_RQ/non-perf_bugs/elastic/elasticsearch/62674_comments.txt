[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/695168136","html_url":"https://github.com/elastic/elasticsearch/issues/62674#issuecomment-695168136","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62674","id":695168136,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTE2ODEzNg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-09-19T05:34:43Z","updated_at":"2020-09-19T05:34:43Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features (:Core/Features/Ingest)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/696090709","html_url":"https://github.com/elastic/elasticsearch/issues/62674#issuecomment-696090709","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62674","id":696090709,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjA5MDcwOQ==","user":{"login":"danhermann","id":22777892,"node_id":"MDQ6VXNlcjIyNzc3ODky","avatar_url":"https://avatars0.githubusercontent.com/u/22777892?v=4","gravatar_id":"","url":"https://api.github.com/users/danhermann","html_url":"https://github.com/danhermann","followers_url":"https://api.github.com/users/danhermann/followers","following_url":"https://api.github.com/users/danhermann/following{/other_user}","gists_url":"https://api.github.com/users/danhermann/gists{/gist_id}","starred_url":"https://api.github.com/users/danhermann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danhermann/subscriptions","organizations_url":"https://api.github.com/users/danhermann/orgs","repos_url":"https://api.github.com/users/danhermann/repos","events_url":"https://api.github.com/users/danhermann/events{/privacy}","received_events_url":"https://api.github.com/users/danhermann/received_events","type":"User","site_admin":false},"created_at":"2020-09-21T12:46:43Z","updated_at":"2020-09-21T12:46:43Z","author_association":"MEMBER","body":"@TomonoriSoejima, what is happening there is that the dissect processor is operating on each value in the `names` array and overwriting the `name.first` and `name.last` fields each time so the final value is that of the last element in the array. Clearly that is not useful, but what behavior would you prefer? An array of values such as that below?\r\n\r\n```\r\n...\r\n          \"_source\" : {\r\n              \"name\" : {\r\n                \"last\" : [\"Tiger\", \"Shark\"],\r\n                \"first\" : [\"John\", \"Mike\"]\r\n              },\r\n              \"names\" : [\r\n                \"John Tiger\",\r\n                \"Mike Shark\"\r\n              ]\r\n            },\r\n...\r\n```\r\n\r\nThat does not necessarily seem like a useful result to me.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/696194889","html_url":"https://github.com/elastic/elasticsearch/issues/62674#issuecomment-696194889","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62674","id":696194889,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjE5NDg4OQ==","user":{"login":"probakowski","id":3896475,"node_id":"MDQ6VXNlcjM4OTY0NzU=","avatar_url":"https://avatars1.githubusercontent.com/u/3896475?v=4","gravatar_id":"","url":"https://api.github.com/users/probakowski","html_url":"https://github.com/probakowski","followers_url":"https://api.github.com/users/probakowski/followers","following_url":"https://api.github.com/users/probakowski/following{/other_user}","gists_url":"https://api.github.com/users/probakowski/gists{/gist_id}","starred_url":"https://api.github.com/users/probakowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/probakowski/subscriptions","organizations_url":"https://api.github.com/users/probakowski/orgs","repos_url":"https://api.github.com/users/probakowski/repos","events_url":"https://api.github.com/users/probakowski/events{/privacy}","received_events_url":"https://api.github.com/users/probakowski/received_events","type":"User","site_admin":false},"created_at":"2020-09-21T15:33:37Z","updated_at":"2020-09-21T15:33:37Z","author_association":"CONTRIBUTOR","body":"@TomonoriSoejima if you prefer something like this in the result:\r\n```json\r\n...\r\n\"_source\": {\r\n  \"name\": [ \r\n    {\r\n      \"last\": \"Tiger\",\r\n      \"first\": \"John\"\r\n    },\r\n    {\r\n      \"last\": \"Shark\",\r\n      \"first\": \"Mike\"\r\n    }\r\n  ],\r\n  \"names\": [\r\n    \"John Tiger\",\r\n    \"Mike Shark\"\r\n  ]\r\n}\r\n...\r\n```\r\nthis can be done with additional processor:\r\n```json\r\n\"processors\": [\r\n  {\r\n    \"foreach\": {\r\n      \"field\": \"names\",\r\n      \"processor\": {\r\n        \"append\": {\r\n          \"field\": \"name\",\r\n          \"value\": {\r\n            \"first\": \"{{_ingest._value}}\"\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    \"foreach\": {\r\n      \"field\": \"name\",\r\n      \"processor\": {\r\n        \"dissect\": {\r\n          \"field\": \"_ingest._value.first\",\r\n          \"pattern\": \"%{_ingest._value.first} %{_ingest._value.last}\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\nBut, again, I wouldn't say that this is something dissect processor should do by default","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/697042748","html_url":"https://github.com/elastic/elasticsearch/issues/62674#issuecomment-697042748","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62674","id":697042748,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzA0Mjc0OA==","user":{"login":"TomonoriSoejima","id":25199092,"node_id":"MDQ6VXNlcjI1MTk5MDky","avatar_url":"https://avatars3.githubusercontent.com/u/25199092?v=4","gravatar_id":"","url":"https://api.github.com/users/TomonoriSoejima","html_url":"https://github.com/TomonoriSoejima","followers_url":"https://api.github.com/users/TomonoriSoejima/followers","following_url":"https://api.github.com/users/TomonoriSoejima/following{/other_user}","gists_url":"https://api.github.com/users/TomonoriSoejima/gists{/gist_id}","starred_url":"https://api.github.com/users/TomonoriSoejima/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TomonoriSoejima/subscriptions","organizations_url":"https://api.github.com/users/TomonoriSoejima/orgs","repos_url":"https://api.github.com/users/TomonoriSoejima/repos","events_url":"https://api.github.com/users/TomonoriSoejima/events{/privacy}","received_events_url":"https://api.github.com/users/TomonoriSoejima/received_events","type":"User","site_admin":false},"created_at":"2020-09-22T23:57:28Z","updated_at":"2020-09-22T23:57:28Z","author_association":"NONE","body":"@probakowski Yes that is the output I was wishing to get and I am sorry for not providing that information at first.\r\nIn the meantime, I used the script processor to achieve the same.\r\n\r\n@danhermann, Thanks for detailed explanation on what is going on under the hood!","performed_via_github_app":null}]