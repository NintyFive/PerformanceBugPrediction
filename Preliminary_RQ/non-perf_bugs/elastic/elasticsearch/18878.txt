{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/18878","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18878/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18878/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18878/events","html_url":"https://github.com/elastic/elasticsearch/issues/18878","id":160340724,"node_id":"MDU6SXNzdWUxNjAzNDA3MjQ=","number":18878,"title":"Can't work with Chrome/Safari userAgent","user":{"login":"Lellansin","id":2081487,"node_id":"MDQ6VXNlcjIwODE0ODc=","avatar_url":"https://avatars2.githubusercontent.com/u/2081487?v=4","gravatar_id":"","url":"https://api.github.com/users/Lellansin","html_url":"https://github.com/Lellansin","followers_url":"https://api.github.com/users/Lellansin/followers","following_url":"https://api.github.com/users/Lellansin/following{/other_user}","gists_url":"https://api.github.com/users/Lellansin/gists{/gist_id}","starred_url":"https://api.github.com/users/Lellansin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lellansin/subscriptions","organizations_url":"https://api.github.com/users/Lellansin/orgs","repos_url":"https://api.github.com/users/Lellansin/repos","events_url":"https://api.github.com/users/Lellansin/events{/privacy}","received_events_url":"https://api.github.com/users/Lellansin/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2016-06-15T05:25:29Z","updated_at":"2016-06-15T08:29:44Z","closed_at":"2016-06-15T08:28:30Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\nGitHub is reserved for bug reports and feature requests. The best place\nto ask a general question is at the Elastic Discourse forums at\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\na feature request, please include one and only one of the below blocks\nin your new issue.\n-->\n\n<!--\nIf you are filing a bug report, please remove the below feature\nrequest block and provide responses for all of the below items.\n-->\n\n**Elasticsearch version**: 2.3.1\n\n**JVM version**:\n\n```\njava -version\nopenjdk version \"1.8.0_71\"\nOpenJDK Runtime Environment (build 1.8.0_71-b15)\nOpenJDK 64-Bit Server VM (build 25.71-b15, mixed mode)\n```\n\n**OS version**:\n\n```\nlsb_release -a\nLSB Version:    :core-4.1-amd64:core-4.1-noarch\nDistributor ID: CentOS\nDescription:    CentOS Linux release 7.1.1503 (Core)\nRelease:    7.1.1503\nCodename:   Core\n```\n\n**Description of the problem including expected versus actual behavior**:\nwork fine on firefox, can't work with Chome/safari\n\n**Steps to reproduce**:\n1. Normal user-agent is ok\n\n``` shell\ncurl -v 'https://xxx.my.host/elasticsearch/_mget?timeout=0&ignore_unavailable=true&preference=1465897339430' -H 'origin: https://xxx.my.host' -H 'user-agent: Rajax/1 Redmi_3/ido Android/5.1.1 Display/LMY47V Eleme/5.10.2 ID/fa0ef395-659a-3150-b347-f258248013af; KERNEL_VERSION:3.10.49-perf-g6241083 API_Level:22 Mozilla/5.0 (Linux; Android 5.1.1; Redmi 3 Build/LMY47V; wv)' -d '{\"docs\":[{\"_index\":\".kibana\",\"_type\":\"config\",\"_id\":\"4.5.1\"}]}'\n*   Trying 115.x.x.42...\n* Connected to xxx.my.host (115.x.x.42) port 443 (#0)\n* TLS 1.2 connection using TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\n* Server certificate: *.ele.me\n* Server certificate: GeoTrust SSL CA - G3\n* Server certificate: GeoTrust Global CA\n> POST /elasticsearch/_mget?timeout=0&ignore_unavailable=true&preference=1465897339430 HTTP/1.1\n> Host: xxx.my.host\n> Accept: */*\n> origin: https://xxx.my.host\n> user-agent: Rajax/1 Redmi_3/ido Android/5.1.1 Display/LMY47V Eleme/5.10.2 ID/fa0ef395-659a-3150-b347-f258248013af; KERNEL_VERSION:3.10.49-perf-g6241083 API_Level:22 Mozilla/5.0 (Linux; Android 5.1.1; Redmi 3 Build/LMY47V; wv)\n> Content-Length: 62\n> Content-Type: application/x-www-form-urlencoded\n>\n* upload completely sent off: 62 out of 62 bytes\n< HTTP/1.1 200 OK\n< Server: nginx/1.9.6\n< Date: Wed, 15 Jun 2016 03:47:01 GMT\n< Content-Type: application/json; charset=UTF-8\n< Content-Length: 116\n< Connection: keep-alive\n< Vary: Accept-Encoding\n<\n* Connection #0 to host xxx.my.host left intact\n{\"docs\":[{\"_index\":\".kibana\",\"_type\":\"config\",\"_id\":\"4.5.1\",\"_version\":1,\"found\":true,\"_source\":{\"buildNum\":9892}}]}\n```\n\n 2.\nGot 403 forbidden with Chrome/Safari user-agent...\n\n``` shell\ncurl -v 'https://xxx.my.host/elasticsearch/_mget?timeout=0&ignore_unavailable=true&preference=1465897339430' -H 'origin: https://xxx.my.host' -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_5)' -d '{\"docs\":[{\"_index\":\".kibana\",\"_type\":\"config\",\"_id\":\"4.5.1\"}]}'\n*   Trying 115.x.x.12...\n* Connected to xxx.my.host (115.x.x.12) port 443 (#0)\n* TLS 1.2 connection using TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\n* Server certificate: *.my.host\n* Server certificate: GeoTrust SSL CA - G3\n* Server certificate: GeoTrust Global CA\n> POST /elasticsearch/_mget?timeout=0&ignore_unavailable=true&preference=1465897339430 HTTP/1.1\n> Host: xxx.my.host\n> Accept: */*\n> origin: https://xxx.my.host\n> user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_5)\n> Content-Length: 62\n> Content-Type: application/x-www-form-urlencoded\n>\n* upload completely sent off: 62 out of 62 bytes\n< HTTP/1.1 403 Forbidden\n< Server: nginx/1.9.6\n< Date: Wed, 15 Jun 2016 03:46:08 GMT\n< Transfer-Encoding: chunked\n< Connection: keep-alive\n<\n* Connection #0 to host xxx.my.host left intact\n```\n\n**Provide logs (if relevant)**:\nabove\n\n<!--\nIf you are filing a feature request, please remove the above bug\nreport block and provide responses for all of the below items.\n-->\n\n**Describe the feature**:\nI'm trying to use kibana to connect to elasticsearch, but found that not work with chrome/safari and work fine on firefox. I thought it was kibana's problme, but it seems there is some detail that I don't know about elasticsearch.\n","closed_by":{"login":"Lellansin","id":2081487,"node_id":"MDQ6VXNlcjIwODE0ODc=","avatar_url":"https://avatars2.githubusercontent.com/u/2081487?v=4","gravatar_id":"","url":"https://api.github.com/users/Lellansin","html_url":"https://github.com/Lellansin","followers_url":"https://api.github.com/users/Lellansin/followers","following_url":"https://api.github.com/users/Lellansin/following{/other_user}","gists_url":"https://api.github.com/users/Lellansin/gists{/gist_id}","starred_url":"https://api.github.com/users/Lellansin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lellansin/subscriptions","organizations_url":"https://api.github.com/users/Lellansin/orgs","repos_url":"https://api.github.com/users/Lellansin/repos","events_url":"https://api.github.com/users/Lellansin/events{/privacy}","received_events_url":"https://api.github.com/users/Lellansin/received_events","type":"User","site_admin":false},"performed_via_github_app":null}