{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/34359","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34359/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34359/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34359/events","html_url":"https://github.com/elastic/elasticsearch/issues/34359","id":367778721,"node_id":"MDU6SXNzdWUzNjc3Nzg3MjE=","number":34359,"title":"Elasticsearch SQL (Exception on selecting array using queries)","user":{"login":"TejasC-CS","id":42927224,"node_id":"MDQ6VXNlcjQyOTI3MjI0","avatar_url":"https://avatars1.githubusercontent.com/u/42927224?v=4","gravatar_id":"","url":"https://api.github.com/users/TejasC-CS","html_url":"https://github.com/TejasC-CS","followers_url":"https://api.github.com/users/TejasC-CS/followers","following_url":"https://api.github.com/users/TejasC-CS/following{/other_user}","gists_url":"https://api.github.com/users/TejasC-CS/gists{/gist_id}","starred_url":"https://api.github.com/users/TejasC-CS/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TejasC-CS/subscriptions","organizations_url":"https://api.github.com/users/TejasC-CS/orgs","repos_url":"https://api.github.com/users/TejasC-CS/repos","events_url":"https://api.github.com/users/TejasC-CS/events{/privacy}","received_events_url":"https://api.github.com/users/TejasC-CS/received_events","type":"User","site_admin":false},"labels":[{"id":912794284,"node_id":"MDU6TGFiZWw5MTI3OTQyODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Query%20Languages/SQL","name":":Query Languages/SQL","color":"0e8a16","default":false,"description":"SQL querying"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-10-08T13:00:00Z","updated_at":"2018-10-10T09:55:53Z","closed_at":"2018-10-09T17:33:35Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`): \"6.4.2\"\r\n\r\n**Plugins installed**: No Plugins Installed\r\n\r\n**JVM version** (`java -version`): \"1.8.0_181\"\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): \"Windows 10 Pro\"\r\n\r\n**Description of the problem including expected versus actual behavior**: Elasticsearch throwing _sql_illegal_argument_exception_  when trying to select an array in a query.\r\n\r\n**Steps to reproduce**:\r\nCreate an index and put some data in it as follows:\r\nPUT index/type/1\r\n{\r\n  \"body\": \"here\",\r\n  \"arr\" : [\"c\",\"d\"]\r\n}\r\n\r\nPUT index/type/2\r\n{\r\n  \"body\": \"there\",\r\n  \"arr\" : [\"1\",\"2\"]\r\n}\r\n\r\nWe can see that arr is an array.\r\nWhen we try to select the field \"body\", we get the results as expected.\r\nPOST _xpack/sql\r\n{\r\n         \"query\":\"SELECT body FROM index \"\r\n}\r\nResults:\r\n{\r\n     \"columns\": [\r\n           {\r\n          \"name\": \"body\",\r\n          \"type\": \"text\"\r\n           }\r\n      ],\r\n    \"rows\": [\r\n        [\r\n           \"here\"\r\n        ],\r\n        [\r\n          \"there\"\r\n        ]\r\n  ]\r\n}\r\n\r\nBut, when we try to select field \"arr\" (which is of type array), we get results as follows:\r\nPOST _xpack/sql\r\n{\r\n         \"query\":\"SELECT arr FROM index \"\r\n}\r\n\r\nResults:\r\n{\r\n  \"error\": {\r\n    \"root_cause\": [\r\n      {\r\n        \"type\": \"sql_illegal_argument_exception\",\r\n        \"reason\": \"Arrays (returned by [arr]) are not supported\"\r\n      }\r\n    ],\r\n    \"type\": \"sql_illegal_argument_exception\",\r\n    \"reason\": \"Arrays (returned by [arr]) are not supported\"\r\n  },\r\n  \"status\": 500\r\n}\r\n\r\nI'm not really sure if it's a bug.\r\nIs it a bug or this will be integrated later as a part of Elasticsearch roadmap?\r\nOr there is no support for arrays at all?\r\n","closed_by":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"performed_via_github_app":null}