{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/7993","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7993/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7993/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7993/events","html_url":"https://github.com/elastic/elasticsearch/issues/7993","id":44977274,"node_id":"MDU6SXNzdWU0NDk3NzI3NA==","number":7993,"title":"No parser for element [aggs]","user":{"login":"yellow1912","id":374134,"node_id":"MDQ6VXNlcjM3NDEzNA==","avatar_url":"https://avatars1.githubusercontent.com/u/374134?v=4","gravatar_id":"","url":"https://api.github.com/users/yellow1912","html_url":"https://github.com/yellow1912","followers_url":"https://api.github.com/users/yellow1912/followers","following_url":"https://api.github.com/users/yellow1912/following{/other_user}","gists_url":"https://api.github.com/users/yellow1912/gists{/gist_id}","starred_url":"https://api.github.com/users/yellow1912/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yellow1912/subscriptions","organizations_url":"https://api.github.com/users/yellow1912/orgs","repos_url":"https://api.github.com/users/yellow1912/repos","events_url":"https://api.github.com/users/yellow1912/events{/privacy}","received_events_url":"https://api.github.com/users/yellow1912/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2014-10-06T12:24:48Z","updated_at":"2014-11-26T16:52:25Z","closed_at":"2014-10-06T12:43:57Z","author_association":"NONE","active_lock_reason":null,"body":"I'm getting this particular error:\n\nIt's very frustrating since all was running fine on my local machine (ES 1.1) until I tried this on my server (ES 1.3)\n\nSome more info:\nES 1.3 latest (Ubuntu, installed using apt-get)\nSymfony 2, FOSElastica latest version\n\nPlease let me know if you need any more info\n\n```\n{\n  \"query\": {\n    \"filtered\": {\n      \"query\": {\n        \"match_all\": {\n\n        }\n      },\n      \"filter\": {\n        \"bool\": {\n          \"must\": [\n            {\n              \"term\": {\n                \"identifier\": \"logistics\"\n              }\n            }\n          ]\n        }\n      }\n    }\n  },\n  \"aggs\": {\n    \"price_stats\": {\n      \"stats\": {\n        \"field\": \"price\"\n      }\n    },\n    \"pickup_path_term\": {\n      \"terms\": {\n        \"size\": 0,\n        \"field\": \"pickup\"\n      }\n    },\n    \"pickup_date_stats\": {\n      \"stats\": {\n        \"field\": \"pickup_date\"\n      }\n    },\n    \"delivery_path_term\": {\n      \"terms\": {\n        \"size\": 0,\n        \"field\": \"delivery\"\n      }\n    },\n    \"delivery_date_stats\": {\n      \"stats\": {\n        \"field\": \"delivery_date\"\n      }\n    },\n    \"category_path_term\": {\n      \"terms\": {\n        \"size\": 0,\n        \"field\": \"category\"\n      }\n    }\n  },\n  \"from\": 0,\n  \"size\": 3\n}\n```\n\nDetailed error:\n\n```\n{\n  \"error\": \"SearchPhaseExecutionException[Failed to execute phase [query], all shards failed; shardFailures {[BSh76RkLTjSjwUT29_Vq8g][abcdef_order][4]: SearchParseException[[abcdef_order][4]: query[ConstantScore(BooleanFilter(+cache(identifier:logistics)))],from[-1],size[-1]: Parse Failure [Failed to parse source [{\\\"query\\\":{\\\"filtered\\\":{\\\"query\\\":{\\\"match_all\\\":{}},\\\"filter\\\":{\\\"bool\\\":{\\\"must\\\":[{\\\"term\\\":{\\\"identifier\\\":\\\"logistics\\\"}}]}}}},\\\"aggregations\\\":{\\\"price_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"price\\\"}},\\\"pickup_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"pickup\\\"}},\\\"pickup_date_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"pickup_date\\\"}},\\\"delivery_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"delivery\\\"}},\\\"delivery_date_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"delivery_date\\\"}},\\\"category_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"category\\\"}}},\\\"from\\\":0,\\\"size\\\":3}]]]; nested: SearchParseException[[abcdef_order][4]: query[ConstantScore(BooleanFilter(+cache(identifier:logistics)))],from[-1],size[-1]: Parse Failure [No parser for element [aggregations]]]; }{[BSh76RkLTjSjwUT29_Vq8g][abcdef_order][2]: SearchParseException[[abcdef_order][2]: query[ConstantScore(BooleanFilter(+cache(identifier:logistics)))],from[-1],size[-1]: Parse Failure [Failed to parse source [{\\\"query\\\":{\\\"filtered\\\":{\\\"query\\\":{\\\"match_all\\\":{}},\\\"filter\\\":{\\\"bool\\\":{\\\"must\\\":[{\\\"term\\\":{\\\"identifier\\\":\\\"logistics\\\"}}]}}}},\\\"aggregations\\\":{\\\"price_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"price\\\"}},\\\"pickup_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"pickup\\\"}},\\\"pickup_date_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"pickup_date\\\"}},\\\"delivery_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"delivery\\\"}},\\\"delivery_date_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"delivery_date\\\"}},\\\"category_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"category\\\"}}},\\\"from\\\":0,\\\"size\\\":3}]]]; nested: SearchParseException[[abcdef_order][2]: query[ConstantScore(BooleanFilter(+cache(identifier:logistics)))],from[-1],size[-1]: Parse Failure [No parser for element [aggregations]]]; }{[BSh76RkLTjSjwUT29_Vq8g][abcdef_order][3]: SearchParseException[[abcdef_order][3]: query[ConstantScore(BooleanFilter(+cache(identifier:logistics)))],from[-1],size[-1]: Parse Failure [Failed to parse source [{\\\"query\\\":{\\\"filtered\\\":{\\\"query\\\":{\\\"match_all\\\":{}},\\\"filter\\\":{\\\"bool\\\":{\\\"must\\\":[{\\\"term\\\":{\\\"identifier\\\":\\\"logistics\\\"}}]}}}},\\\"aggregations\\\":{\\\"price_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"price\\\"}},\\\"pickup_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"pickup\\\"}},\\\"pickup_date_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"pickup_date\\\"}},\\\"delivery_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"delivery\\\"}},\\\"delivery_date_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"delivery_date\\\"}},\\\"category_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"category\\\"}}},\\\"from\\\":0,\\\"size\\\":3}]]]; nested: SearchParseException[[abcdef_order][3]: query[ConstantScore(BooleanFilter(+cache(identifier:logistics)))],from[-1],size[-1]: Parse Failure [No parser for element [aggregations]]]; }{[BSh76RkLTjSjwUT29_Vq8g][abcdef_order][0]: SearchParseException[[abcdef_order][0]: query[ConstantScore(BooleanFilter(+cache(identifier:logistics)))],from[-1],size[-1]: Parse Failure [Failed to parse source [{\\\"query\\\":{\\\"filtered\\\":{\\\"query\\\":{\\\"match_all\\\":{}},\\\"filter\\\":{\\\"bool\\\":{\\\"must\\\":[{\\\"term\\\":{\\\"identifier\\\":\\\"logistics\\\"}}]}}}},\\\"aggregations\\\":{\\\"price_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"price\\\"}},\\\"pickup_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"pickup\\\"}},\\\"pickup_date_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"pickup_date\\\"}},\\\"delivery_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"delivery\\\"}},\\\"delivery_date_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"delivery_date\\\"}},\\\"category_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"category\\\"}}},\\\"from\\\":0,\\\"size\\\":3}]]]; nested: SearchParseException[[abcdef_order][0]: query[ConstantScore(BooleanFilter(+cache(identifier:logistics)))],from[-1],size[-1]: Parse Failure [No parser for element [aggregations]]]; }{[BSh76RkLTjSjwUT29_Vq8g][abcdef_order][1]: SearchParseException[[abcdef_order][1]: query[ConstantScore(BooleanFilter(+cache(identifier:logistics)))],from[-1],size[-1]: Parse Failure [Failed to parse source [{\\\"query\\\":{\\\"filtered\\\":{\\\"query\\\":{\\\"match_all\\\":{}},\\\"filter\\\":{\\\"bool\\\":{\\\"must\\\":[{\\\"term\\\":{\\\"identifier\\\":\\\"logistics\\\"}}]}}}},\\\"aggregations\\\":{\\\"price_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"price\\\"}},\\\"pickup_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"pickup\\\"}},\\\"pickup_date_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"pickup_date\\\"}},\\\"delivery_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"delivery\\\"}},\\\"delivery_date_stats\\\":{\\\"stats\\\":{\\\"field\\\":\\\"delivery_date\\\"}},\\\"category_path_term\\\":{\\\"terms\\\":{\\\"size\\\":0,\\\"field\\\":\\\"category\\\"}}},\\\"from\\\":0,\\\"size\\\":3}]]]; nested: SearchParseException[[abcdef_order][1]: query[ConstantScore(BooleanFilter(+cache(identifier:logistics)))],from[-1],size[-1]: Parse Failure [No parser for element [aggs]]]; }]\",\n  \"status\": 400\n}\n```\n","closed_by":{"login":"yellow1912","id":374134,"node_id":"MDQ6VXNlcjM3NDEzNA==","avatar_url":"https://avatars1.githubusercontent.com/u/374134?v=4","gravatar_id":"","url":"https://api.github.com/users/yellow1912","html_url":"https://github.com/yellow1912","followers_url":"https://api.github.com/users/yellow1912/followers","following_url":"https://api.github.com/users/yellow1912/following{/other_user}","gists_url":"https://api.github.com/users/yellow1912/gists{/gist_id}","starred_url":"https://api.github.com/users/yellow1912/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yellow1912/subscriptions","organizations_url":"https://api.github.com/users/yellow1912/orgs","repos_url":"https://api.github.com/users/yellow1912/repos","events_url":"https://api.github.com/users/yellow1912/events{/privacy}","received_events_url":"https://api.github.com/users/yellow1912/received_events","type":"User","site_admin":false},"performed_via_github_app":null}