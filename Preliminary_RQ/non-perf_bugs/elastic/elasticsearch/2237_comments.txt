[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/8318304","html_url":"https://github.com/elastic/elasticsearch/issues/2237#issuecomment-8318304","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2237","id":8318304,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMTgzMDQ=","user":{"login":"Downchuck","id":141466,"node_id":"MDQ6VXNlcjE0MTQ2Ng==","avatar_url":"https://avatars1.githubusercontent.com/u/141466?v=4","gravatar_id":"","url":"https://api.github.com/users/Downchuck","html_url":"https://github.com/Downchuck","followers_url":"https://api.github.com/users/Downchuck/followers","following_url":"https://api.github.com/users/Downchuck/following{/other_user}","gists_url":"https://api.github.com/users/Downchuck/gists{/gist_id}","starred_url":"https://api.github.com/users/Downchuck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Downchuck/subscriptions","organizations_url":"https://api.github.com/users/Downchuck/orgs","repos_url":"https://api.github.com/users/Downchuck/repos","events_url":"https://api.github.com/users/Downchuck/events{/privacy}","received_events_url":"https://api.github.com/users/Downchuck/received_events","type":"User","site_admin":false},"created_at":"2012-09-06T00:06:49Z","updated_at":"2012-09-06T00:06:49Z","author_association":"NONE","body":"Nevermind, found it here as a max http request size: http.max_content_length setting\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/8318772","html_url":"https://github.com/elastic/elasticsearch/issues/2237#issuecomment-8318772","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2237","id":8318772,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMTg3NzI=","user":{"login":"Downchuck","id":141466,"node_id":"MDQ6VXNlcjE0MTQ2Ng==","avatar_url":"https://avatars1.githubusercontent.com/u/141466?v=4","gravatar_id":"","url":"https://api.github.com/users/Downchuck","html_url":"https://github.com/Downchuck","followers_url":"https://api.github.com/users/Downchuck/followers","following_url":"https://api.github.com/users/Downchuck/following{/other_user}","gists_url":"https://api.github.com/users/Downchuck/gists{/gist_id}","starred_url":"https://api.github.com/users/Downchuck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Downchuck/subscriptions","organizations_url":"https://api.github.com/users/Downchuck/orgs","repos_url":"https://api.github.com/users/Downchuck/repos","events_url":"https://api.github.com/users/Downchuck/events{/privacy}","received_events_url":"https://api.github.com/users/Downchuck/received_events","type":"User","site_admin":false},"created_at":"2012-09-06T00:33:33Z","updated_at":"2012-09-06T01:10:16Z","author_association":"NONE","body":"I've increased the setting but still get the error from Netty: HTTP content length exceeded 104857600 bytes.\nThis is because: maxContentLength[2.9gb] set to high value, resetting it to [100mb]\nNetty expects an integer and checks against Integer.MAX_VALUE, or 2^31-1.\n\nSo, basically, 2gb is the maximum size. ES does not process an HTTP request until it completes: for those working with large files, it makes quite a bit more sense to use a streaming API or otherwise run a river on the server. In an example of 2m records at about 2g uncompressed, it took longer to upload through netty than to index: indexing does not start until the http request has completed (which is reasonable).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/8334207","html_url":"https://github.com/elastic/elasticsearch/issues/2237#issuecomment-8334207","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2237","id":8334207,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMzQyMDc=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-09-06T14:35:57Z","updated_at":"2012-09-06T14:35:57Z","author_association":"MEMBER","body":"Yea, it represents the whole request in memory (thats how async IO works, and the fact that it needs to break the bulk request to each shard). You should make sure to break down your indexing into smaller bulk sizes.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/8337470","html_url":"https://github.com/elastic/elasticsearch/issues/2237#issuecomment-8337470","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2237","id":8337470,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMzc0NzA=","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2012-09-06T16:04:01Z","updated_at":"2012-09-06T16:04:01Z","author_association":"NONE","body":"from netty docs on http://docs.jboss.org/netty/3.2/api/org/jboss/netty/handler/codec/http/HttpMessageDecoder.html\n\nName    Meaning\nmaxInitialLineLength    The maximum length of the initial line (e.g. \"GET / HTTP/1.0\" or \"HTTP/1.0 200 OK\") If the length of the initial line exceeds this value, a TooLongFrameException will be raised.\nmaxHeaderSize   The maximum length of all headers. If the sum of the length of each header exceeds this value, a TooLongFrameException will be raised.\nmaxChunkSize    The maximum length of the content or each chunk. If the content length (or the length of each chunk) exceeds this value, the content or chunk will be split into multiple HttpChunks whose length is maxChunkSize at maximum.\n\nAs you can see, just like tomcat, netty supports chunking…. so async IO may represent the whole request in memory, but not at the Netty level, eh?  Famous bug in tomcat early v 6 around chunking…..\n\nAnd since request can be sent in chunks also, there is no system async io that knows if the entire request is complete, it only knows if all tcp segments are received and correct.\n\nwill\n\nOn Sep 6, 2012, at 10:36 AM, Shay Banon wrote:\n\n> Yea, it represents the whole request in memory (thats how async IO works, and the fact that it needs to break the bulk request to each shard). You should make sure to break down your indexing into smaller bulk sizes.\n> \n> —\n> Reply to this email directly or view it on GitHub.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/8342253","html_url":"https://github.com/elastic/elasticsearch/issues/2237#issuecomment-8342253","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2237","id":8342253,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNDIyNTM=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-09-06T18:26:30Z","updated_at":"2012-09-06T18:26:30Z","author_association":"MEMBER","body":"Http chunking, or any chunking in general does not solve \"boundaries\" problems when it comes to bulk requests. Not saying that its not impossible to try and support chunking with bulk (find boundaries), and then sending those chunks to shards, and keep on doing it and send back the responses in chunks. Its quite complicated though. What you need to do now is simply break the bulk requests yourself to chunks.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/302660952","html_url":"https://github.com/elastic/elasticsearch/issues/2237#issuecomment-302660952","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2237","id":302660952,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjY2MDk1Mg==","user":{"login":"donzkie","id":3479273,"node_id":"MDQ6VXNlcjM0NzkyNzM=","avatar_url":"https://avatars3.githubusercontent.com/u/3479273?v=4","gravatar_id":"","url":"https://api.github.com/users/donzkie","html_url":"https://github.com/donzkie","followers_url":"https://api.github.com/users/donzkie/followers","following_url":"https://api.github.com/users/donzkie/following{/other_user}","gists_url":"https://api.github.com/users/donzkie/gists{/gist_id}","starred_url":"https://api.github.com/users/donzkie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/donzkie/subscriptions","organizations_url":"https://api.github.com/users/donzkie/orgs","repos_url":"https://api.github.com/users/donzkie/repos","events_url":"https://api.github.com/users/donzkie/events{/privacy}","received_events_url":"https://api.github.com/users/donzkie/received_events","type":"User","site_admin":false},"created_at":"2017-05-19T09:54:31Z","updated_at":"2017-05-19T09:54:31Z","author_association":"NONE","body":"I have the same issue, we are indexing and saving documents using **_bulk** endpoint, we knew that the maximum threshold for HTTP request payload is up to 10MB so we chunks our bulk saving up to 8MB but still we got the same exception - below is the sample exception we got from our code:\r\n\r\n[POST] URL [https://<RestAPI>/_bulk] \r\n RESPONSE_BODY [{\"Message\":\"Request size exceeded 10485760 bytes\"}] \r\n REQUEST PARAM SIZE [8298283 Bytes] \r\n REQUEST_PARAM [{\"index\":{\"_index\":\"indexname here\",\"_type\":\"item\",\"_id\":\"https://...\"}}]\r\n \r\nRemoved other information (company information), but as you can see it was throwing an exception that we exceeded the 10MB threshold but request payload that we sent is just around 8MB.\r\n\r\nBy the way we are using AWS hosted Elasticserch. Hoping to hear from the expert here. Thanks.\r\n\r\nAdor\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/371800155","html_url":"https://github.com/elastic/elasticsearch/issues/2237#issuecomment-371800155","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2237","id":371800155,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MTgwMDE1NQ==","user":{"login":"zakkg3","id":25042095,"node_id":"MDQ6VXNlcjI1MDQyMDk1","avatar_url":"https://avatars0.githubusercontent.com/u/25042095?v=4","gravatar_id":"","url":"https://api.github.com/users/zakkg3","html_url":"https://github.com/zakkg3","followers_url":"https://api.github.com/users/zakkg3/followers","following_url":"https://api.github.com/users/zakkg3/following{/other_user}","gists_url":"https://api.github.com/users/zakkg3/gists{/gist_id}","starred_url":"https://api.github.com/users/zakkg3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zakkg3/subscriptions","organizations_url":"https://api.github.com/users/zakkg3/orgs","repos_url":"https://api.github.com/users/zakkg3/repos","events_url":"https://api.github.com/users/zakkg3/events{/privacy}","received_events_url":"https://api.github.com/users/zakkg3/received_events","type":"User","site_admin":false},"created_at":"2018-03-09T12:31:15Z","updated_at":"2018-03-09T12:31:15Z","author_association":"NONE","body":"@donzkie  the same for me.\r\ncurl -H 'Content-Type: application/x-ndjson' -XPOST 'https://XXX.es.amazonaws.com/shakespeare/doc/_bulk?pretty' --data-binary @shakespeare_6.0.json\r\n{\"Message\":\"Request size exceeded 10485760 bytes\"}","performed_via_github_app":null}]