[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/394287616","html_url":"https://github.com/elastic/elasticsearch/issues/31058#issuecomment-394287616","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31058","id":394287616,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NDI4NzYxNg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-06-04T09:13:12Z","updated_at":"2018-06-04T09:13:12Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/394287622","html_url":"https://github.com/elastic/elasticsearch/issues/31058#issuecomment-394287622","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31058","id":394287622,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NDI4NzYyMg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-06-04T09:13:13Z","updated_at":"2018-06-04T09:13:13Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/394290243","html_url":"https://github.com/elastic/elasticsearch/issues/31058#issuecomment-394290243","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31058","id":394290243,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NDI5MDI0Mw==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2018-06-04T09:22:27Z","updated_at":"2018-06-04T09:26:58Z","author_association":"CONTRIBUTOR","body":"#30794 was merged on 24th May, and is present in 6.4 but not 6.3 which would be consistent with these spurious auth failures affecting CI for 6.4 but not 6.3.\r\n\r\n(#30787 was also merged on 24th May, but into 6.3 too, so probably not the cause of this problem as 6.3 builds are succeeding.)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/394744423","html_url":"https://github.com/elastic/elasticsearch/issues/31058#issuecomment-394744423","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31058","id":394744423,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NDc0NDQyMw==","user":{"login":"mayya-sharipova","id":5738841,"node_id":"MDQ6VXNlcjU3Mzg4NDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5738841?v=4","gravatar_id":"","url":"https://api.github.com/users/mayya-sharipova","html_url":"https://github.com/mayya-sharipova","followers_url":"https://api.github.com/users/mayya-sharipova/followers","following_url":"https://api.github.com/users/mayya-sharipova/following{/other_user}","gists_url":"https://api.github.com/users/mayya-sharipova/gists{/gist_id}","starred_url":"https://api.github.com/users/mayya-sharipova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayya-sharipova/subscriptions","organizations_url":"https://api.github.com/users/mayya-sharipova/orgs","repos_url":"https://api.github.com/users/mayya-sharipova/repos","events_url":"https://api.github.com/users/mayya-sharipova/events{/privacy}","received_events_url":"https://api.github.com/users/mayya-sharipova/received_events","type":"User","site_admin":false},"created_at":"2018-06-05T15:04:56Z","updated_at":"2018-06-05T15:04:56Z","author_association":"CONTRIBUTOR","body":"Recent failures of `MlWithSecurityUserRoleIT` tests on Windows on **master** are in:  https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-windows-compatibility/1678/console\r\n\r\nAn example of one of them:\r\n\r\n```\r\nREPRODUCE WITH: gradlew :x-pack:qa:smoke-test-ml-with-security:integTestRunner \\\r\n  -Dtests.seed=9B4D2B8ED6F5BF3E \\\r\n  -Dtests.class=org.elasticsearch.smoketest.MlWithSecurityUserRoleIT \\\r\n  -Dtests.method=\"test {yaml=ml/start_stop_datafeed/Test start given field without mappings}\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=fi-FI \\\r\n  -Dtests.timezone=Australia/Adelaide \\\r\n  -Dtests.rest.blacklist=ml/ml_classic_analyze/Test analyze API with an analyzer that does what we used to do in native code,ml/calendar_crud/Test get calendar given missing,ml/calendar_crud/Test cannot create calendar with name _all,ml/calendar_crud/Test PageParams with ID is invalid,ml/calendar_crud/Test post calendar events given empty events,ml/calendar_crud/Test put calendar given id contains invalid chars,ml/calendar_crud/Test delete event from non existing calendar,ml/calendar_crud/Test delete job from non existing calendar,ml/custom_all_field/Test querying custom all field,ml/datafeeds_crud/Test delete datafeed with missing id,ml/datafeeds_crud/Test put datafeed referring to missing job_id,ml/datafeeds_crud/Test put datafeed with invalid query,ml/datafeeds_crud/Test put datafeed with security headers in the body,ml/datafeeds_crud/Test update datafeed with missing id,ml/delete_job_force/Test cannot force delete a non-existent job,ml/delete_model_snapshot/Test delete snapshot missing snapshotId,ml/delete_model_snapshot/Test delete snapshot missing job_id,ml/delete_model_snapshot/Test delete with in-use model,ml/filter_crud/Test create filter api with mismatching body ID,ml/filter_crud/Test get filter API with bad ID,ml/filter_crud/Test invalid param combinations,ml/filter_crud/Test non-existing filter,ml/get_datafeed_stats/Test get datafeed stats given missing datafeed_id,ml/get_datafeeds/Test get datafeed given missing datafeed_id,ml/jobs_crud/Test cannot create job with existing categorizer state document,ml/jobs_crud/Test cannot create job with existing quantiles document,ml/jobs_crud/Test cannot create job with existing result document,ml/jobs_crud/Test cannot create job with model snapshot id set,ml/jobs_crud/Test cannot decrease model_memory_limit below current usage,ml/jobs_crud/Test get job API with non existing job id,ml/jobs_crud/Test put job after closing results index,ml/jobs_crud/Test put job after closing state index,ml/jobs_crud/Test put job with inconsistent body/param ids,ml/jobs_crud/Test put job with time field in analysis_config,ml/jobs_crud/Test job with categorization_analyzer and categorization_filters,ml/jobs_get/Test get job given missing job_id,ml/jobs_get_result_buckets/Test mutually-exclusive params,ml/jobs_get_result_buckets/Test mutually-exclusive params via body,ml/jobs_get_result_categories/Test with invalid param combinations,ml/jobs_get_result_categories/Test with invalid param combinations via body,ml/jobs_get_result_overall_buckets/Test overall buckets given missing job,ml/jobs_get_result_overall_buckets/Test overall buckets given non-matching expression and not allow_no_jobs,ml/jobs_get_result_overall_buckets/Test overall buckets given top_n is 0,ml/jobs_get_result_overall_buckets/Test overall buckets given top_n is negative,ml/jobs_get_result_overall_buckets/Test overall buckets given invalid start param,ml/jobs_get_result_overall_buckets/Test overall buckets given invalid end param,ml/jobs_get_result_overall_buckets/Test overall buckets given bucket_span is smaller than max job bucket_span,ml/jobs_get_stats/Test get job stats given missing job,ml/jobs_get_stats/Test no exception on get job stats with missing index,ml/job_groups/Test put job with empty group,ml/job_groups/Test put job with group that matches an job id,ml/job_groups/Test put job with group that matches its id,ml/job_groups/Test put job with id that matches an existing group,ml/job_groups/Test put job with invalid group,ml/ml_info/Test ml info,ml/post_data/Test Flush data with invalid parameters,ml/post_data/Test flushing and posting a closed job,ml/post_data/Test open and close with non-existent job id,ml/post_data/Test POST data with invalid parameters,ml/preview_datafeed/Test preview missing datafeed,ml/revert_model_snapshot/Test revert model with invalid snapshotId,ml/start_stop_datafeed/Test start datafeed job, but not open,ml/start_stop_datafeed/Test start non existing datafeed,ml/start_stop_datafeed/Test stop non existing datafeed,ml/update_model_snapshot/Test without description,ml/validate/Test invalid job config,ml/validate/Test job config is invalid because model snapshot id set,ml/validate/Test job config that is invalid only because of the job ID,ml/validate_detector/Test invalid detector\r\n\r\n```\r\n\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/394747843","html_url":"https://github.com/elastic/elasticsearch/issues/31058#issuecomment-394747843","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31058","id":394747843,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NDc0Nzg0Mw==","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2018-06-05T15:13:56Z","updated_at":"2018-06-05T15:13:56Z","author_association":"MEMBER","body":"Given this is related to authorization, this is unlikely related to #30794 as we would see a different type of failure. I'll see what I can dig up, but one issue I have is why are we only seeing this on windows?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395007918","html_url":"https://github.com/elastic/elasticsearch/issues/31058#issuecomment-395007918","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31058","id":395007918,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTAwNzkxOA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2018-06-06T09:34:44Z","updated_at":"2018-06-06T09:34:44Z","author_association":"CONTRIBUTOR","body":"@jaymode you're correct that #30794 is not to blame for this - sorry I jumped to conclusions by looking for security PRs in the change list.\r\n\r\nSo far I've worked out that the breakage occured somewhere in between ad432315cba3e54dcae782ebc5cd2d1f1aa596c7 and 946f51909e97ace6cac5317412051b186947a166 on the 6.x branch, i.e. late on 22nd May or early on 23rd May and more than 20 commits before your security PRs went into 6.x.  I'll try to narrow it down further.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395012543","html_url":"https://github.com/elastic/elasticsearch/issues/31058#issuecomment-395012543","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31058","id":395012543,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTAxMjU0Mw==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2018-06-06T09:50:57Z","updated_at":"2018-06-06T09:50:57Z","author_association":"CONTRIBUTOR","body":"@droberts195 I wonder if it's due to bb8f1e831348ca458b0195e5207a09740688ffcb\r\n\r\nThat's windows only, and this smoke test has a number of `setupCommand` in the build.gradle","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395015264","html_url":"https://github.com/elastic/elasticsearch/issues/31058#issuecomment-395015264","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31058","id":395015264,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTAxNTI2NA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2018-06-06T10:00:33Z","updated_at":"2018-06-06T10:00:33Z","author_association":"CONTRIBUTOR","body":"You are correct @tvernum.  The ML with security tests pass on commit 4d3e285b93c445b83a30401492a3ad0d5458e6be but all fail with auth failures on bb8f1e831348ca458b0195e5207a09740688ffcb (which is the one immediately afterwards).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395041409","html_url":"https://github.com/elastic/elasticsearch/issues/31058#issuecomment-395041409","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31058","id":395041409,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTA0MTQwOQ==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2018-06-06T11:50:22Z","updated_at":"2018-06-06T13:15:57Z","author_association":"CONTRIBUTOR","body":"I've made some more progress.\r\n\r\nThe problem occurs because when multiple comma separated roles are supplied to the `elasticsearch-users.bat` script, the commas now get replaced with spaces before the roles arrive in `UsersTool.main()`.\r\n\r\nIn other words, before bb8f1e831348ca458b0195e5207a09740688ffcb one of our setup commands meant that `UsersTool.main()` received an `args[]` containing this:\r\n\r\n```\r\n[useradd, ml_admin, -p, x-pack-test-password, -r, minimal,machine_learning_admin]\r\n```\r\n\r\nBut after bb8f1e831348ca458b0195e5207a09740688ffcb `UsersTool.main()` receives an `args[]` containing this:\r\n\r\n```\r\n[useradd, ml_admin, -p, x-pack-test-password, -r, minimal machine_learning_admin]\r\n```\r\n\r\nThe [docs](https://www.elastic.co/guide/en/elasticsearch/reference/6.x/users-command.html) say that a comma separated list of roles is supported (search for \"This option accepts a comma-separated list of role names to assign to the user.\"), therefore this is a regression and a blocker for 6.4 because `elasticsearch-users.bat` no longer works as documented.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395057956","html_url":"https://github.com/elastic/elasticsearch/issues/31058#issuecomment-395057956","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31058","id":395057956,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTA1Nzk1Ng==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-06-06T12:54:30Z","updated_at":"2018-06-06T12:54:30Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395061695","html_url":"https://github.com/elastic/elasticsearch/issues/31058#issuecomment-395061695","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31058","id":395061695,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTA2MTY5NQ==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2018-06-06T13:07:17Z","updated_at":"2018-06-06T13:14:24Z","author_association":"CONTRIBUTOR","body":"https://stackoverflow.com/questions/8145744/how-to-invoke-a-parameter-in-a-batch-file-with-comma-delimiter is relevant here regarding treatment of commas in batch files.  Unfortunately neither of the solutions work in our case as we're trying to separate the first argument out of the batch file arguments while leaving all the others quoted exactly as they were previously, and that seems to be impossible in general.  However it is done there will always be some combination of quotes, spaces, commas or semi-colons where the chosen algorithm fails.\r\n\r\nThe only solutions I can think of are:\r\n\r\n1. Change the implementation of #30772 such that the name of the main class is passed to `elasticsearch-cli.bat` in an environment variable rather than an argument.  Then the raw argument list can be passed on to Java without any manipulation in the batch file.\r\n2. Revert #30772.\r\n\r\nDo you have any better ideas @jasontedor?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395268663","html_url":"https://github.com/elastic/elasticsearch/issues/31058#issuecomment-395268663","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31058","id":395268663,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTI2ODY2Mw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-06-07T02:00:19Z","updated_at":"2018-06-07T02:00:19Z","author_association":"MEMBER","body":"Thanks a lot @droberts195. I favored option one as that was an approach I considered when I initially made the change that led to the breakage here. I am sorry for the build breakage and that you and @tvernum lost time to this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395268686","html_url":"https://github.com/elastic/elasticsearch/issues/31058#issuecomment-395268686","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31058","id":395268686,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTI2ODY4Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-06-07T02:00:28Z","updated_at":"2018-06-07T02:00:28Z","author_association":"MEMBER","body":"Closed by #31156 ","performed_via_github_app":null}]