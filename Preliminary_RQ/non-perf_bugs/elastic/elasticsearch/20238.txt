{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/20238","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20238/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20238/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20238/events","html_url":"https://github.com/elastic/elasticsearch/issues/20238","id":174119776,"node_id":"MDU6SXNzdWUxNzQxMTk3NzY=","number":20238,"title":"Upgrading to ES2.3.4 caused date field mapping to change","user":{"login":"jsmilkstein","id":2715428,"node_id":"MDQ6VXNlcjI3MTU0Mjg=","avatar_url":"https://avatars1.githubusercontent.com/u/2715428?v=4","gravatar_id":"","url":"https://api.github.com/users/jsmilkstein","html_url":"https://github.com/jsmilkstein","followers_url":"https://api.github.com/users/jsmilkstein/followers","following_url":"https://api.github.com/users/jsmilkstein/following{/other_user}","gists_url":"https://api.github.com/users/jsmilkstein/gists{/gist_id}","starred_url":"https://api.github.com/users/jsmilkstein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsmilkstein/subscriptions","organizations_url":"https://api.github.com/users/jsmilkstein/orgs","repos_url":"https://api.github.com/users/jsmilkstein/repos","events_url":"https://api.github.com/users/jsmilkstein/events{/privacy}","received_events_url":"https://api.github.com/users/jsmilkstein/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-08-30T20:37:45Z","updated_at":"2016-08-30T21:05:17Z","closed_at":"2016-08-30T20:53:28Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: 1.5.2 -> 2.3.4\n\n**Plugins installed**: None\n\n**JVM version**: \n\n**OS version**: CentOS 7 (various)\n\n**Description of the problem including expected versus actual behavior**:\nWe had a date field which mappings enforced through applying a template like:\n\"normalDate\": {\n                  \"type\": \"date\",\n                  \"format\": \"dateOptionalTime\",\n                  \"store\": true\n               },\nAnd stored dates were YYYY-MM-DD hh:mm:ss as expected.  Upon upgrading to ES2.3.4, all mappings for existing indices were changed to:\n\"normalDate\" : {\n            \"type\" : \"date\",\n            \"store\" : true,\n            \"format\" : \"epoch_millis||dateOptionalTime\"\n          }\nAnd now dates are represented with epoch_millis.  All new indices created after upgrade have the proper template applied and dates are as-expected.\nI believe this mapping can be corrected, or dates normalized on return, but it doesn't seem like the mapping should change just through upgrade for an existing index.\n\n**Steps to reproduce**:\n1.  Create document with a date field, send in using a dateTime format in ES1.5\n2. Upgrade to ES2.3.4\n3. Check mappings for the field, and the representation of the data in ES after upgrade.\n","closed_by":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"performed_via_github_app":null}