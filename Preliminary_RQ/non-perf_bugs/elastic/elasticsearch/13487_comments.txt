[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/139492952","html_url":"https://github.com/elastic/elasticsearch/issues/13487#issuecomment-139492952","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13487","id":139492952,"node_id":"MDEyOklzc3VlQ29tbWVudDEzOTQ5Mjk1Mg==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-09-11T09:00:38Z","updated_at":"2015-09-11T09:00:38Z","author_association":"CONTRIBUTOR","body":"The test indexes one doc, confirms the memory controller up'd the indexing buffer, then flushes, then sits idle waiting for indexing buffer to go inactive (500 KB)...\n\nIn this failure, it looks like after indexing the one doc but before flushing, the memory controller had kicked in to set to inactive, but then with the flush it became active again ... still not sure why it didn't then become inactive again.  But maybe the timing in this run (becoming inactive before test could flush) is a clue ...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/141951961","html_url":"https://github.com/elastic/elasticsearch/issues/13487#issuecomment-141951961","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13487","id":141951961,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MTk1MTk2MQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2015-09-21T12:01:37Z","updated_at":"2015-09-21T12:01:37Z","author_association":"MEMBER","body":"This failed [again](http://build-us-00.elastic.co/job/es_core_2x_centos/285/testReport/junit/org.elasticsearch.indices.memory/IndexingMemoryControllerIT/testIndexBufferSizeUpdateInactiveShard/), but does not immediately reproduce.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/141960181","html_url":"https://github.com/elastic/elasticsearch/issues/13487#issuecomment-141960181","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13487","id":141960181,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MTk2MDE4MQ==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-09-21T12:37:59Z","updated_at":"2015-09-21T12:37:59Z","author_association":"CONTRIBUTOR","body":"Thanks for the pointer @jasontedor ... I'll dig.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166630999","html_url":"https://github.com/elastic/elasticsearch/issues/13487#issuecomment-166630999","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13487","id":166630999,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjYzMDk5OQ==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2015-12-22T14:38:02Z","updated_at":"2015-12-22T14:38:02Z","author_association":"CONTRIBUTOR","body":"Another failure http://build-us-00.elastic.co/job/es_core_17_centos/820/\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166870364","html_url":"https://github.com/elastic/elasticsearch/issues/13487#issuecomment-166870364","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13487","id":166870364,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Njg3MDM2NA==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-12-23T11:41:15Z","updated_at":"2015-12-23T11:41:15Z","author_association":"CONTRIBUTOR","body":"OK I can explain the frequent 1.7 failures, where the test times out waiting for the index to become active again ... it's a case we already know about from the code:\n\n```\n                // since we sync flush once a shard becomes inactive, the translog id can change, however that\n                // doesn't mean the an indexing operation has happened. Note that if we're really unlucky and a flush happens\n                // immediately after an indexing operation we may not become active immediately. The following\n                // indexing operation will mark the shard as active, so it's OK. If that one doesn't come, we might as well stay\n                // inactive\n```\n\nI.e., a sync'd flush snuck in after the test indexed one document but before IMC noticed the shard was active and so IMC never marks the shard active ... maybe I can fix the check to detect a flush occurred and index another document ... but this (IMC) is all greatly simplified in 2.x (https://github.com/elastic/elasticsearch/pull/15252), maybe we should just remove this test from 1.7.x?\n\nThe 2.x failures are different (failing to become inactive) ... not sure about those yet.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/176294513","html_url":"https://github.com/elastic/elasticsearch/issues/13487#issuecomment-176294513","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13487","id":176294513,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NjI5NDUxMw==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2016-01-28T17:32:40Z","updated_at":"2016-01-28T17:32:40Z","author_association":"CONTRIBUTOR","body":"It looks like my fix worked for 1.7, and 2.x stopped failing (not sure why, but there have been plenty of changes) ... so I'm optimistically closing this ... feel free to re-open if we see new test failures.\n","performed_via_github_app":null}]