{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/6240","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6240/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6240/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6240/events","html_url":"https://github.com/elastic/elasticsearch/issues/6240","id":33870177,"node_id":"MDU6SXNzdWUzMzg3MDE3Nw==","number":6240,"title":"Write to multiple indexes","user":{"login":"soulmerge","id":7631354,"node_id":"MDQ6VXNlcjc2MzEzNTQ=","avatar_url":"https://avatars2.githubusercontent.com/u/7631354?v=4","gravatar_id":"","url":"https://api.github.com/users/soulmerge","html_url":"https://github.com/soulmerge","followers_url":"https://api.github.com/users/soulmerge/followers","following_url":"https://api.github.com/users/soulmerge/following{/other_user}","gists_url":"https://api.github.com/users/soulmerge/gists{/gist_id}","starred_url":"https://api.github.com/users/soulmerge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soulmerge/subscriptions","organizations_url":"https://api.github.com/users/soulmerge/orgs","repos_url":"https://api.github.com/users/soulmerge/repos","events_url":"https://api.github.com/users/soulmerge/events{/privacy}","received_events_url":"https://api.github.com/users/soulmerge/received_events","type":"User","site_admin":false},"labels":[{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2014-05-20T09:05:47Z","updated_at":"2020-10-23T21:41:09Z","closed_at":"2014-11-07T09:44:08Z","author_association":"NONE","active_lock_reason":null,"body":"It is possible to create an index as an alias to one or more indexes. When such an alias-index points to multiple real indexes, it is not possible to write to that alias. It would be nice to have write access to the alias.\n\nThe rest of this request contains some thoughts on this matter. I will use the following terms:\n- \"index-a\": A normal index (not an alias)\n- \"index-b\": Another index (not an alias)\n- \"alias-index\": An alias index pointing to both \"index-a\" and \"index-b\"\n\nWhen writing to the \"alias-index\", there are generally two options:\n- Write to both of them simultaneously.\n- Write to either \"index-a\" or \"index-b\".\n\nWe would need to declare which of the two options - let's call it the \"target-definition\" - we want. Again, there are two options:\n- The \"target-definition\" is part of the alias definition.\n- The \"target-definition\" is provided as an option to the index operation.\n\nIt is further possible to combine both approches, having a \"target-definition\" in the alias configuration and the option to override that definition when indexing a document.\n\nIn my opinion, making the \"alias-index\" behave like a real index will support the principle of least surprise and thus increase trust of users. So I think it would be best, if the \"target-definition\" was part of the \"alias-index\".\n\nI also think that it is not really necessary to be able to change the \"target-definition\" per write operation: If the application already knows where it wants to write to, it can write to the specific index directly. The only advantage of such a feature would be that it could reduce network traffic if someone wanted to write to five indexes out of seven, for example. But then it would be more efficient to create another write index spanning the five indexes. Looks like I talked myself out of the second option for the \"target-definition\" :-)\n\nConsidering a writable alias, another question arises: what is the default behaviour? We have two options again:\n- All index operations insert into both/all indexes.\n- Writing is disabled by default.\n\nThe first option would further enforce the principle of least surprise, whereas the second option could prevent accidental inserts into the wrong index. I think this is just a matter of priorities (although I would prefer inserts to all indexes).\n\nThanks for reading all the way through the long text :-)\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}