[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/421959318","html_url":"https://github.com/elastic/elasticsearch/issues/33755#issuecomment-421959318","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33755","id":421959318,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMTk1OTMxOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-09-17T10:28:18Z","updated_at":"2018-09-17T10:28:18Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/423353984","html_url":"https://github.com/elastic/elasticsearch/issues/33755#issuecomment-423353984","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33755","id":423353984,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMzM1Mzk4NA==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2018-09-20T22:24:58Z","updated_at":"2018-09-20T22:24:58Z","author_association":"CONTRIBUTOR","body":"Reopening ... ran into this in a PR and can reliably reproduce this against head of master and 6.x head with the following:\r\n```\r\n./gradlew :x-pack:plugin:core:test -Dtests.seed=E9BB79AF0F0C53E5 -Dtests.class=org.elasticsearch.snapshots.SourceOnlySnapshotTests -Dtests.method=\"testSourceOnlyRandom\" -Dtests.security.manager=true -Dtests.locale=pl -Dtests.timezone=Europe/Oslo -Dcompiler.java=10 -Druntime.java=8\r\n```\r\n\r\nFull log:\r\n```\r\n./gradlew :x-pack:plugin:core:test -Dtests.seed=E9BB79AF0F0C53E5 -Dtests.class=org.elasticsearch.snapshots.SourceOnlySnapshotTests -Dtests.method=\"testSourceOnlyRandom\" -Dtests.security.manager=true -Dtests.locale=pl -Dtests.timezone=Europe/Oslo -Dcompiler.java=10 -Druntime.java=8\r\nTo honour the JVM settings for this build a new JVM will be forked. Please consider using the daemon: https://docs.gradle.org/4.10/userguide/gradle_daemon.html.\r\nDaemon will be stopped at the end of the build stopping after processing\r\n\r\n> Configure project :benchmarks\r\n=======================================\r\nElasticsearch Build Hamster says Hello!\r\n  Gradle Version        : 4.10\r\n  OS Info               : Mac OS X 10.12.6 (x86_64)\r\n  Compiler JDK Version  : 10 (Oracle Corporation 10.0.1 [Java HotSpot(TM) 64-Bit Server VM 10.0.1+10])\r\n  Compiler java.home    : /Library/Java/JavaVirtualMachines/jdk-10.0.1.jdk/Contents/Home\r\n  Runtime JDK Version   :  8 (Oracle Corporation 1.8.0_131 [Java HotSpot(TM) 64-Bit Server VM 25.131-b11])\r\n  Runtime java.home     : /Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home\r\n  Gradle JDK Version    : 10 (Oracle Corporation 10.0.1 [Java HotSpot(TM) 64-Bit Server VM 10.0.1+10])\r\n  Gradle java.home      : /Library/Java/JavaVirtualMachines/jdk-10.0.1.jdk/Contents/Home\r\n  Random Testing Seed   : E9BB79AF0F0C53E5\r\n=======================================\r\nSuite: org.elasticsearch.snapshots.SourceOnlySnapshotTests\r\n\r\n> Task :x-pack:plugin:core:test\r\n   [junit4] <JUnit4> says g'day! Master seed: E9BB79AF0F0C53E5\r\n==> Test Info: seed=E9BB79AF0F0C53E5; jvm=1; suite=1\r\n\r\n  1> [2018-09-20T17:16:39,554][WARN ][o.e.b.JNANatives         ] [[SUITE-SourceOnlySnapshotTests-seed#[E9BB79AF0F0C53E5]]] Unable to lock JVM Memory: error=78, reason=Function not implemented\r\n  1> [2018-09-20T17:16:39,558][WARN ][o.e.b.JNANatives         ] [[SUITE-SourceOnlySnapshotTests-seed#[E9BB79AF0F0C53E5]]] This can result in part of the JVM being swapped out.\r\n  1> [2018-09-21T00:16:40,693][INFO ][o.e.s.SourceOnlySnapshotTests] [testSourceOnlyRandom] before test\r\n  1> [2018-09-21T00:16:43,230][INFO ][o.e.s.SourceOnlySnapshotTests] [testSourceOnlyRandom] after test\r\n  2> REPRODUCE WITH: ./gradlew :x-pack:plugin:core:test -Dtests.seed=E9BB79AF0F0C53E5 -Dtests.class=org.elasticsearch.snapshots.SourceOnlySnapshotTests -Dtests.method=\"testSourceOnlyRandom\" -Dtests.security.manager=true -Dtests.locale=pl -Dtests.timezone=Europe/Oslo -Dcompiler.java=10 -Druntime.java=8\r\nFAILURE 2.59s | SourceOnlySnapshotTests.testSourceOnlyRandom <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: expected:<543> but was:<586>\r\n   >    at __randomizedtesting.SeedInfo.seed([E9BB79AF0F0C53E5:1A89C24EC39DCC72]:0)\r\n   >    at org.elasticsearch.snapshots.SourceOnlySnapshotTests.testSourceOnlyRandom(SourceOnlySnapshotTests.java:96)\r\n   >    at java.lang.Thread.run(Thread.java:748)\r\n  2> NOTE: leaving temporary files on disk at: /Users/jake/workspace/elasticsearch/x-pack/plugin/core/build/testrun/test/J0/temp/org.elasticsearch.snapshots.SourceOnlySnapshotTests_E9BB79AF0F0C53E5-001\r\n  2> NOTE: test params are: codec=Lucene80, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@3e2230da), locale=pl, timezone=Europe/Oslo\r\n  2> NOTE: Mac OS X 10.12.6 x86_64/Oracle Corporation 1.8.0_131 (64-bit)/cpus=8,threads=1,free=482372896,total=514850816\r\n  2> NOTE: All tests run in this JVM: [SourceOnlySnapshotTests]\r\nCompleted [1/1] in 4.80s, 1 test, 1 failure <<< FAILURES!\r\n\r\n\r\n> Task :x-pack:plugin:core:test FAILED\r\nTests with failures:\r\n  - org.elasticsearch.snapshots.SourceOnlySnapshotTests.testSourceOnlyRandom\r\n\r\n   [junit4] JVM J0:     0.64 ..     6.46 =     5.82s\r\n   [junit4] Execution time total: 6.47 sec.\r\n   [junit4] Tests summary: 1 suite, 1 test, 1 failure\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':x-pack:plugin:core:test'.\r\n> There were test failures: 1 suite, 1 test, 1 failure [seed: E9BB79AF0F0C53E5]\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.\r\nUse '--warning-mode all' to show the individual deprecation warnings.\r\nSee https://docs.gradle.org/4.10/userguide/command_line_interface.html#sec:command_line_warnings\r\n\r\nBUILD FAILED in 37s\r\n50 actionable tasks: 2 executed, 48 up-to-date\r\n```\r\n\r\ncc @s1monw ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/423882327","html_url":"https://github.com/elastic/elasticsearch/issues/33755#issuecomment-423882327","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33755","id":423882327,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMzg4MjMyNw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2018-09-24T05:57:13Z","updated_at":"2018-09-24T05:57:13Z","author_association":"CONTRIBUTOR","body":"@jakelandis looking","performed_via_github_app":null}]