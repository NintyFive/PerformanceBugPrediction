{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8651","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8651/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8651/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8651/events","html_url":"https://github.com/elastic/elasticsearch/issues/8651","id":50031797,"node_id":"MDU6SXNzdWU1MDAzMTc5Nw==","number":8651,"title":"Scripts only executed when corresponding file stored locally on master node","user":{"login":"Thibaut-Fatus","id":7557608,"node_id":"MDQ6VXNlcjc1NTc2MDg=","avatar_url":"https://avatars1.githubusercontent.com/u/7557608?v=4","gravatar_id":"","url":"https://api.github.com/users/Thibaut-Fatus","html_url":"https://github.com/Thibaut-Fatus","followers_url":"https://api.github.com/users/Thibaut-Fatus/followers","following_url":"https://api.github.com/users/Thibaut-Fatus/following{/other_user}","gists_url":"https://api.github.com/users/Thibaut-Fatus/gists{/gist_id}","starred_url":"https://api.github.com/users/Thibaut-Fatus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Thibaut-Fatus/subscriptions","organizations_url":"https://api.github.com/users/Thibaut-Fatus/orgs","repos_url":"https://api.github.com/users/Thibaut-Fatus/repos","events_url":"https://api.github.com/users/Thibaut-Fatus/events{/privacy}","received_events_url":"https://api.github.com/users/Thibaut-Fatus/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2014-11-25T14:17:04Z","updated_at":"2014-11-26T13:03:31Z","closed_at":"2014-11-25T18:04:47Z","author_association":"NONE","active_lock_reason":null,"body":"We are using lang-python scripting module(1), and we would rather not enabled dynamic scripting.\n\nWe've noted that scripts could only be executed when the corresponding file is stored locally in the /scripts (2) directory of our master node, and calling a script which is stored in a non-master node only would lead to an error:\n\n```\n(0, [{u'update': {u'status': 400, u'_type': u'user', u'_id': u'1', u'error': u'ElasticsearchIllegalArgumentException[failed to execute script]; nested: ScriptException[dynamic scripting for [python] disabled]; ', u'_index': u'index_name'}}])\n```\n\nIf we turn off the masters, then the remaining nodes which become masters are able to execute the locally stored scripts, the ones which could not be executed before, and the scripts which were on the previous masters (now regular nodes) cannot be executed anymore.\n\nWe should be able to do what we want by updating the script files on all nodes, thus on the masters ones, but is this an expected behaviour? \n\nIs there any kind of synchronisation process to ensure all nodes of the same cluster always have the same scripts? Or do we only we need to write them on all nodes just in case one of these nodes became a master?\n\n(1) lang-python is installed on all nodes of our cluster\n(2) either /etc/elasticsearch/scripts if runnig as a service or {tardir}/config/scripts if running from tar\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}