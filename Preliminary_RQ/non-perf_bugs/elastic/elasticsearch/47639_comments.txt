[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/538887370","html_url":"https://github.com/elastic/elasticsearch/issues/47639#issuecomment-538887370","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47639","id":538887370,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODg4NzM3MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-10-07T08:12:27Z","updated_at":"2019-10-07T08:12:27Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Packaging)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/538888710","html_url":"https://github.com/elastic/elasticsearch/issues/47639#issuecomment-538888710","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47639","id":538888710,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODg4ODcxMA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-07T08:16:05Z","updated_at":"2019-10-07T08:16:05Z","author_association":"CONTRIBUTOR","body":"Here's a failure for missing docker: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob+packaging-tests-unix-next/os=oraclelinux-6-packaging/13/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/538891304","html_url":"https://github.com/elastic/elasticsearch/issues/47639#issuecomment-538891304","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47639","id":538891304,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODg5MTMwNA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-07T08:23:07Z","updated_at":"2019-10-07T08:23:07Z","author_association":"CONTRIBUTOR","body":"The method used to install docker in Vagrant doesn't work on the GCP images:\r\n```\r\n[alpar@alpar-ci-centos-6-1007-0936 ~]$     # Add repository\r\n[alpar@alpar-ci-centos-6-1007-0936 ~]$     sudo yum-config-manager -y --add-repo https://download.docker.com/linux/centos/docker-ce.repo\r\nLoaded plugins: fastestmirror\r\nadding repo from: https://download.docker.com/linux/centos/docker-ce.repo\r\ngrabbing file https://download.docker.com/linux/centos/docker-ce.repo to /etc/yum.repos.d/docker-ce.repo\r\ndocker-ce.repo                                                                                                                                                                                                                                           | 2.4 kB     00:00     \r\nrepo saved to /etc/yum.repos.d/docker-ce.repo\r\n[alpar@alpar-ci-centos-6-1007-0936 ~]$ \r\n[alpar@alpar-ci-centos-6-1007-0936 ~]$     # Install Docker\r\n[alpar@alpar-ci-centos-6-1007-0936 ~]$     sudo yum install -y docker-ce docker-ce-cli containerd.io\r\nLoaded plugins: fastestmirror, security\r\nSetting up Install Process\r\nLoading mirror speeds from cached hostfile\r\n * base: mirror.mobap.edu\r\n * centos-sclo-rh: mirror.fileplanet.com\r\n * centos-sclo-sclo: bay.uchicago.edu\r\n * epel: fedora-epel.mirror.lstn.net\r\n * extras: mirror.rackspace.com\r\n * updates: mirror.genesisadaptive.com\r\ndocker-ce-stable                                                                                                                                                                                                                                         | 3.5 kB     00:00     \r\ndocker-ce-stable/primary_db                                                                                                                                                                                                                              |  34 kB     00:00     \r\nResolving Dependencies\r\n--> Running transaction check\r\n---> Package containerd.io.x86_64 0:1.2.6-3.3.el7 will be installed\r\n--> Processing Dependency: container-selinux >= 2:2.74 for package: containerd.io-1.2.6-3.3.el7.x86_64\r\n--> Processing Dependency: systemd for package: containerd.io-1.2.6-3.3.el7.x86_64\r\n--> Processing Dependency: systemd for package: containerd.io-1.2.6-3.3.el7.x86_64\r\n---> Package docker-ce.x86_64 3:19.03.2-3.el7 will be installed\r\n--> Processing Dependency: container-selinux >= 2:2.74 for package: 3:docker-ce-19.03.2-3.el7.x86_64\r\n--> Processing Dependency: libseccomp >= 2.3 for package: 3:docker-ce-19.03.2-3.el7.x86_64\r\n--> Processing Dependency: libsystemd.so.0(LIBSYSTEMD_209)(64bit) for package: 3:docker-ce-19.03.2-3.el7.x86_64\r\n--> Processing Dependency: systemd for package: 3:docker-ce-19.03.2-3.el7.x86_64\r\n--> Processing Dependency: libseccomp.so.2()(64bit) for package: 3:docker-ce-19.03.2-3.el7.x86_64\r\n--> Processing Dependency: libsystemd.so.0()(64bit) for package: 3:docker-ce-19.03.2-3.el7.x86_64\r\n---> Package docker-ce-cli.x86_64 1:19.03.2-3.el7 will be installed\r\n--> Finished Dependency Resolution\r\nError: Package: containerd.io-1.2.6-3.3.el7.x86_64 (docker-ce-stable)\r\n           Requires: container-selinux >= 2:2.74\r\nError: Package: 3:docker-ce-19.03.2-3.el7.x86_64 (docker-ce-stable)\r\n           Requires: libsystemd.so.0()(64bit)\r\nError: Package: 3:docker-ce-19.03.2-3.el7.x86_64 (docker-ce-stable)\r\n           Requires: libsystemd.so.0(LIBSYSTEMD_209)(64bit)\r\nError: Package: 3:docker-ce-19.03.2-3.el7.x86_64 (docker-ce-stable)\r\n           Requires: systemd\r\nError: Package: containerd.io-1.2.6-3.3.el7.x86_64 (docker-ce-stable)\r\n           Requires: systemd\r\nError: Package: 3:docker-ce-19.03.2-3.el7.x86_64 (docker-ce-stable)\r\n           Requires: libseccomp >= 2.3\r\nError: Package: 3:docker-ce-19.03.2-3.el7.x86_64 (docker-ce-stable)\r\n           Requires: libseccomp.so.2()(64bit)\r\nError: Package: 3:docker-ce-19.03.2-3.el7.x86_64 (docker-ce-stable)\r\n           Requires: container-selinux >= 2:2.74\r\n You could try using --skip-broken to work around the problem\r\n You could try running: rpm -Va --nofiles --nodigest\r\n```\r\n\r\nIt's strange that it work son Vagrant at all given that centos 6 doesn't have systemd and we have `sudo systemctl enable --now docker` in there. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/538893943","html_url":"https://github.com/elastic/elasticsearch/issues/47639#issuecomment-538893943","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47639","id":538893943,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODg5Mzk0Mw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-07T08:30:01Z","updated_at":"2019-10-07T09:37:51Z","author_association":"CONTRIBUTOR","body":"I also tried enabling ip forwarding on centos 7 ( which does have docker ). \r\nThe docker image build works but the test still fails: \r\nhttps://gradle-enterprise.elastic.co/s/drfn2zihbbsfg\r\n\r\nI'm muted the tests in b9584672a46","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/538898645","html_url":"https://github.com/elastic/elasticsearch/issues/47639#issuecomment-538898645","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47639","id":538898645,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODg5ODY0NQ==","user":{"login":"pugnascotia","id":8696382,"node_id":"MDQ6VXNlcjg2OTYzODI=","avatar_url":"https://avatars1.githubusercontent.com/u/8696382?v=4","gravatar_id":"","url":"https://api.github.com/users/pugnascotia","html_url":"https://github.com/pugnascotia","followers_url":"https://api.github.com/users/pugnascotia/followers","following_url":"https://api.github.com/users/pugnascotia/following{/other_user}","gists_url":"https://api.github.com/users/pugnascotia/gists{/gist_id}","starred_url":"https://api.github.com/users/pugnascotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pugnascotia/subscriptions","organizations_url":"https://api.github.com/users/pugnascotia/orgs","repos_url":"https://api.github.com/users/pugnascotia/repos","events_url":"https://api.github.com/users/pugnascotia/events{/privacy}","received_events_url":"https://api.github.com/users/pugnascotia/received_events","type":"User","site_admin":false},"created_at":"2019-10-07T08:42:50Z","updated_at":"2019-10-07T08:42:50Z","author_association":"CONTRIBUTOR","body":"I'm on it.","performed_via_github_app":null}]