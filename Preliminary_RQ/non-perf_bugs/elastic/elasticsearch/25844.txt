{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25844","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25844/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25844/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25844/events","html_url":"https://github.com/elastic/elasticsearch/issues/25844","id":244887924,"node_id":"MDU6SXNzdWUyNDQ4ODc5MjQ=","number":25844,"title":"Elasticsearch geo_shape index timeout","user":{"login":"karesh","id":2954714,"node_id":"MDQ6VXNlcjI5NTQ3MTQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2954714?v=4","gravatar_id":"","url":"https://api.github.com/users/karesh","html_url":"https://github.com/karesh","followers_url":"https://api.github.com/users/karesh/followers","following_url":"https://api.github.com/users/karesh/following{/other_user}","gists_url":"https://api.github.com/users/karesh/gists{/gist_id}","starred_url":"https://api.github.com/users/karesh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karesh/subscriptions","organizations_url":"https://api.github.com/users/karesh/orgs","repos_url":"https://api.github.com/users/karesh/repos","events_url":"https://api.github.com/users/karesh/events{/privacy}","received_events_url":"https://api.github.com/users/karesh/received_events","type":"User","site_admin":false},"labels":[{"id":141079527,"node_id":"MDU6TGFiZWwxNDEwNzk1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Geo","name":":Analytics/Geo","color":"0e8a16","default":false,"description":"Indexing, search aggregations of geo points and shapes"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-07-23T04:31:25Z","updated_at":"2018-03-23T16:11:44Z","closed_at":"2018-03-23T16:11:44Z","author_association":"NONE","active_lock_reason":null,"body":"I am trying to insert big polygon (countries border) into elastic search using python http client. When I insert the small polygon, index successful. but bigger polygons gives me the error.\r\n\r\nelasticsearch.exceptions.ConnectionTimeout: ConnectionTimeout caused by - ReadTimeoutError(HTTPConnectionPool(host=u'localhost', port=9200): Read timed out. (read timeout=40))\r\n\r\nMy geo_shape mapping.\r\n\r\n```\r\n\"border\":{\r\n   \"type\": \"geo_shape\",\r\n    \"tree\": \"quadtree\",\r\n    \"precision\": \"10m\"\r\n}\r\n```\r\n\r\nPython insert call\r\n\r\n```\r\n es = Elasticsearch(hosts=[\"localhost\"], port=9200, timeout=40)\r\n es.index(index='croober', doc_type='country', id=uid, body= data = {\r\n                'border': {\r\n                    'type': 'multipolygon',\r\n                    'coordinates':[[[-75.170288, 19.931389], [-75.223724, 19.901554], [-75.226959, 19.924442],....\r\n                }\r\n            })\r\n```\r\n\r\nmy localhost server is going to status: failed\r\n\r\n> elasticsearch.service - Elasticsearch\r\n>    Loaded: loaded (/usr/lib/systemd/system/elasticsearch.service; disab\r\n>    Active: failed (Result: exit-code)\r\n> \r\n> \r\n> {\r\n>    \"error\": {\r\n>       \"root_cause\": [],\r\n>       \"type\": \"search_phase_execution_exception\",\r\n>       \"reason\": \"all shards failed\",\r\n>       \"phase\": \"query\",\r\n>       \"grouped\": true,\r\n>       \"failed_shards\": []\r\n>    },\r\n>    \"status\": 503\r\n> }\r\n> \r\n1. What was the error and how can we insert bigger polygon ?\r\n\r\nmy system at run time should be to update the polygon. It is not  just one time insert and search.\r\n2. Elastic Search is not suitable for bigger polygon search ? \r\n\r\n3. which search is much faster. ? \r\n search - point within polygon\r\n result  - country id\r\n   a. one big country polygon\r\n   b. 100 small polygons of country\r\n","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}