{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/51360","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51360/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51360/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51360/events","html_url":"https://github.com/elastic/elasticsearch/issues/51360","id":554281033,"node_id":"MDU6SXNzdWU1NTQyODEwMzM=","number":51360,"title":"TransformTaskFailedStateIT.testForceStopFailedTransform failure","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"labels":[{"id":1272783040,"node_id":"MDU6TGFiZWwxMjcyNzgzMDQw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml/Transform","name":":ml/Transform","color":"0e8a16","default":false,"description":"Transform"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"assignees":[{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2020-01-23T16:52:57Z","updated_at":"2020-01-24T11:17:52Z","closed_at":"2020-01-24T11:17:52Z","author_association":"MEMBER","active_lock_reason":null,"body":"Seems to fail reliably for me on 7.x, although master does not reproduce. Will push a mute to just 7.x in a minute\r\n\r\nhttps://gradle-enterprise.elastic.co/s/5umyhdar5us5u\r\n\r\n```\r\nExpected: a string matching the pattern <Failed to index documents into destination index due to permanent error: \\[org.elasticsearch.xpack.transform.transforms.BulkIndexingException: Bulk index experienced \\[7\\] failures and at least 1 irrecoverable \\[org.elasticsearch.xpack.transform.transforms.TransformException: Destination index mappings are incompatible with the transform configuration.;.*>\r\n         but: the string was \"Failed to index documents into destination index due to permanent error: [BulkIndexingException[Bulk index experienced [7] failures and at least 1 irrecoverable [TransformException[Destination index mappings are incompatible with the transform configuration.]; nested: MapperParsingException[failed to parse field [reviewer] of type [long] in document with id 'dRQkp_t5ubOfpvJaH8A0aekAAAAAAAAA'. Preview of field's value: 'user_0']; nested: IllegalArgumentException[For input string: \\\"user_0\\\"];; MapperParsingException[failed to parse field [reviewer] of type [long] in document with id 'dRQkp_t5ubOfpvJaH8A0aekAAAAAAAAA'. Preview of field's value: 'user_0']; nested: IllegalArgumentException[For input string: \\\"user_0\\\"];; java.lang.IllegalArgumentException: For input string: \\\"user_0\\\"]. Other failures: ]; nested: TransformException[Destination index mappings are incompatible with the transform configuration.]; nested: MapperParsingException[failed to parse field [reviewer] of type [long] in document with id 'dRQkp_t5ubOfpvJaH8A0aekAAAAAAAAA'. Preview of field's value: 'user_0']; nested: IllegalArgumentException[For input string: \\\"user_0\\\"];; TransformException[Destination index mappings are incompatible with the transform configuration.]; nested: MapperParsingException[failed to parse field [reviewer] of type [long] in document with id 'dRQkp_t5ubOfpvJaH8A0aekAAAAAAAAA'. Preview of field's value: 'user_0']; nested: IllegalArgumentException[For input string: \\\"user_0\\\"];; MapperParsingException[failed to parse field [reviewer] of type [long] in document with id 'dRQkp_t5ubOfpvJaH8A0aekAAAAAAAAA'. Preview of field's value: 'user_0']; nested: IllegalArgumentException[For input string: \\\"user_0\\\"];; java.lang.IllegalArgumentException: For input string: \\\"user_0\\\"]\"\r\n        at __randomizedtesting.SeedInfo.seed([3FB53C8D1073437D:EF173ECB4D24CBD2]:0)\r\n        at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n        at org.junit.Assert.assertThat(Assert.java:956)\r\n        at org.junit.Assert.assertThat(Assert.java:923)\r\n        at org.elasticsearch.xpack.transform.integration.TransformTaskFailedStateIT.testForceStopFailedTransform(TransformTaskFailedStateIT.java:81)\r\n```\r\n\r\n\r\n```\r\nREPRODUCE WITH: ./gradlew ':x-pack:plugin:transform:qa:single-node-tests:integTestRunner' --tests \"org.elasticsearch.xpack.transform.integration.TransformTaskFailedStateIT.testForceStopFailedTransform\" \\\r\n  -Dtests.seed=3FB53C8D1073437D \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=vi-VN \\\r\n  -Dtests.timezone=Antarctica/DumontDUrville \\\r\n  -Dcompiler.java=13 \\\r\n  -Druntime.java=8\r\n\r\nREPRODUCE WITH: ./gradlew ':x-pack:plugin:transform:qa:single-node-tests:integTestRunner' --tests \"org.elasticsearch.xpack.transform.integration.TransformTaskFailedStateIT.testStartFailedTransform\" \\\r\n  -Dtests.seed=3FB53C8D1073437D \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=vi-VN \\\r\n  -Dtests.timezone=Antarctica/DumontDUrville \\\r\n  -Dcompiler.java=13 \\\r\n  -Druntime.java=8\r\n\r\nREPRODUCE WITH: ./gradlew ':x-pack:plugin:transform:qa:single-node-tests:integTestRunner' --tests \"org.elasticsearch.xpack.transform.integration.TransformTaskFailedStateIT.testForceStopFailedTransform\" \\\r\n  -Dtests.seed=3FB53C8D1073437D \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=vi-VN \\\r\n  -Dtests.timezone=Antarctica/DumontDUrville \\\r\n  -Dcompiler.java=13 \\\r\n  -Druntime.java=8\r\n\r\nREPRODUCE WITH: ./gradlew ':x-pack:plugin:transform:qa:single-node-tests:integTestRunner' --tests \"org.elasticsearch.xpack.transform.integration.TransformTaskFailedStateIT.testStartFailedTransform\" \\\r\n  -Dtests.seed=3FB53C8D1073437D \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=vi-VN \\\r\n  -Dtests.timezone=Antarctica/DumontDUrville \\\r\n  -Dcompiler.java=13 \\\r\n  -Druntime.java=8\r\n```","closed_by":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"performed_via_github_app":null}