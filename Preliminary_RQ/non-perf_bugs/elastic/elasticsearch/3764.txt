{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3764","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3764/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3764/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3764/events","html_url":"https://github.com/elastic/elasticsearch/issues/3764","id":19910624,"node_id":"MDU6SXNzdWUxOTkxMDYyNA==","number":3764,"title":"Automatic detection and removal of node with disk errors","user":{"login":"andrewclegg","id":578186,"node_id":"MDQ6VXNlcjU3ODE4Ng==","avatar_url":"https://avatars2.githubusercontent.com/u/578186?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewclegg","html_url":"https://github.com/andrewclegg","followers_url":"https://api.github.com/users/andrewclegg/followers","following_url":"https://api.github.com/users/andrewclegg/following{/other_user}","gists_url":"https://api.github.com/users/andrewclegg/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewclegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewclegg/subscriptions","organizations_url":"https://api.github.com/users/andrewclegg/orgs","repos_url":"https://api.github.com/users/andrewclegg/repos","events_url":"https://api.github.com/users/andrewclegg/events{/privacy}","received_events_url":"https://api.github.com/users/andrewclegg/received_events","type":"User","site_admin":false},"labels":[{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null},{"id":111053151,"node_id":"MDU6TGFiZWwxMTEwNTMxNTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/resiliency","name":"resiliency","color":"009800","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2013-09-23T14:03:24Z","updated_at":"2014-10-08T11:14:03Z","closed_at":"2014-10-08T11:14:03Z","author_association":"NONE","active_lock_reason":null,"body":"According to a recent conversation with @jprante on IRC (23 Sep 2013), if a disk holding one of a node's data dirs fails, this will cause queries to fail continuously (with accompanying exceptions in the logs) until the node is manually removed.\n\nIt would be really nice if ES could detect unrecoverable IO exceptions from Lucene, e.g. NoSuchDirectoryException, and mark the node as down, as if it had been removed from the cluster manually.\n\nIt would be even nicer if it could detect that a _specific_ data dir had become unusable, and recover the missing segments from other nodes, assuming it still had at least one data dir that wasn't in an error state.\n\nFeel free to close if either of these suggestions are totally impractical, but I think this would be a useful enhancement in terms of fault-tolerance -- even just the first solution, marking the node as down.\n","closed_by":{"login":"andrewclegg","id":578186,"node_id":"MDQ6VXNlcjU3ODE4Ng==","avatar_url":"https://avatars2.githubusercontent.com/u/578186?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewclegg","html_url":"https://github.com/andrewclegg","followers_url":"https://api.github.com/users/andrewclegg/followers","following_url":"https://api.github.com/users/andrewclegg/following{/other_user}","gists_url":"https://api.github.com/users/andrewclegg/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewclegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewclegg/subscriptions","organizations_url":"https://api.github.com/users/andrewclegg/orgs","repos_url":"https://api.github.com/users/andrewclegg/repos","events_url":"https://api.github.com/users/andrewclegg/events{/privacy}","received_events_url":"https://api.github.com/users/andrewclegg/received_events","type":"User","site_admin":false},"performed_via_github_app":null}