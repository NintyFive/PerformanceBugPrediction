{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/31305","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31305/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31305/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31305/events","html_url":"https://github.com/elastic/elasticsearch/issues/31305","id":332067727,"node_id":"MDU6SXNzdWUzMzIwNjc3Mjc=","number":31305,"title":"AttachmentProcessorTests.testIndexedChars fails when running on jdk 11ea","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"labels":[{"id":268963484,"node_id":"MDU6TGFiZWwyNjg5NjM0ODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Ingest","name":":Core/Features/Ingest","color":"0e8a16","default":false,"description":"Execution or management of Ingest Pipelines"},{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"},{"id":92913658,"node_id":"MDU6TGFiZWw5MjkxMzY1OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/blocker","name":"blocker","color":"e11d21","default":false,"description":null},{"id":959855511,"node_id":"MDU6TGFiZWw5NTk4NTU1MTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/jdk11","name":"jdk11","color":"e11d21","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-06-13T16:17:14Z","updated_at":"2020-11-11T21:41:15Z","closed_at":"2018-10-15T15:56:29Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"```\r\n Throwable #1: ElasticsearchParseException[Error parsing document in field [source_field]]; nested: TikaException[Unexpected RuntimeException from org.apache.tika.parser.txt.TXTParser@5bdd2e62]; nested: IllegalStateException[Can't overwrite cause with org.apache.tika.sax.WriteOutContentHandler$WriteLimitReachedException: Your document contained more than 19 characters, and so your requested limit has been reached. To receive the full text of the document, increase your limit. (Text up to the limit is however available).]; nested: TaggedSAXException[Your document contained more than 19 characters, and so your requested limit has been reached. To receive the full text of the document, increase your limit. (Text up to the limit is however available).]; nested: WriteLimitReachedException[Your document contained more than 19 characters, and so your requested limit has been reached. To receive the full text of the document, increase your limit. (Text up to the limit is however available).];\r\n   >     at __randomizedtesting.SeedInfo.seed([F36010291A3A195A:F8D959C10745D812]:0)\r\n   >     at org.elasticsearch.ingest.attachment.AttachmentProcessor.execute(AttachmentProcessor.java:106)\r\n   >     at org.elasticsearch.ingest.attachment.AttachmentProcessorTests.parseDocument(AttachmentProcessorTests.java:285)\r\n   >     at org.elasticsearch.ingest.attachment.AttachmentProcessorTests.parseDocument(AttachmentProcessorTests.java:275)\r\n   >     at org.elasticsearch.ingest.attachment.AttachmentProcessorTests.testIndexedChars(AttachmentProcessorTests.java:296)\r\n```\r\nOutput of `java -version`:\r\n```\r\nopenjdk version \"11-ea\" 2018-09-25\r\nOpenJDK Runtime Environment 18.9 (build 11-ea+17)\r\nOpenJDK 64-Bit Server VM 18.9 (build 11-ea+17, mixed mode)\r\n```\r\n\r\nReproduce with:\r\n```\r\n ./gradlew :plugins:ingest-attachment:test  -Dtests.class=org.elasticsearch.ingest.attachment.AttachmentProcessorTests -Dtests.method=\"testIndexedChars\"\r\n```\r\nNote that running with JDK 11 requires some changes before one can get here. Those can be found here:\r\nhttps://github.com/atorok/elasticsearch/tree/upgrade/jdk_11\r\n","closed_by":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"performed_via_github_app":null}