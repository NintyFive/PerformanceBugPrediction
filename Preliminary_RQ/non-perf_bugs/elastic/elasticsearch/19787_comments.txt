[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/237347441","html_url":"https://github.com/elastic/elasticsearch/issues/19787#issuecomment-237347441","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19787","id":237347441,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzM0NzQ0MQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-08-03T19:37:20Z","updated_at":"2016-08-03T19:37:20Z","author_association":"CONTRIBUTOR","body":"I think we can disable the live-version map since it has basically 2 purposes:\n- cache version lookups which are not important if you do append only or even if you don't use updates at all\n- persisting tombstones for a certain amount of time (GC deletes) which is also not need if you don't delete.\n\nI think we can make it an option to have a no-op version map that simply doesn't do anything.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/237356124","html_url":"https://github.com/elastic/elasticsearch/issues/19787#issuecomment-237356124","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19787","id":237356124,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzM1NjEyNA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-08-03T20:08:13Z","updated_at":"2016-08-03T20:08:13Z","author_association":"MEMBER","body":"Even in the append only use case, I was under the impression that versions were still necessary due to replication having a situation where a document could be sent more than once during network trouble, and `_version` being the only way to prevent duplicate documents in that case?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/237361676","html_url":"https://github.com/elastic/elasticsearch/issues/19787#issuecomment-237361676","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19787","id":237361676,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzM2MTY3Ng==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-08-03T20:26:05Z","updated_at":"2016-08-03T20:26:05Z","author_association":"CONTRIBUTOR","body":"> Even in the append only use case, I was under the impression that versions were still necessary due to replication having a situation where a document could be sent more than once during network trouble, and _version being the only way to prevent duplicate documents in that case?\n\nthe version will always be loaded from the index in that case that should be fine. The only problem is if you are using deletes here. If you do that we need to use the version map.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/237362103","html_url":"https://github.com/elastic/elasticsearch/issues/19787#issuecomment-237362103","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19787","id":237362103,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzM2MjEwMw==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-08-03T20:27:34Z","updated_at":"2016-08-03T20:27:34Z","author_association":"MEMBER","body":"> the version will always be loaded from the index in that case that should be fine.\n\nOkay, thanks for explaining!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/237364396","html_url":"https://github.com/elastic/elasticsearch/issues/19787#issuecomment-237364396","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19787","id":237364396,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzM2NDM5Ng==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-08-03T20:35:16Z","updated_at":"2016-08-03T20:35:16Z","author_association":"CONTRIBUTOR","body":"one option would be to only keep the deletes in the map and therefor use less memory or no memory at all in the append only case. I think we can make this work if realtime GET is disabled somehow it should not make any difference.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/237366535","html_url":"https://github.com/elastic/elasticsearch/issues/19787#issuecomment-237366535","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19787","id":237366535,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzM2NjUzNQ==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2016-08-03T20:42:18Z","updated_at":"2016-08-03T20:42:18Z","author_association":"CONTRIBUTOR","body":"Maybe we should simply remove real-time get?  Is near-real-time get really not good enough?  We default refresh to every 1s.  Or users can use \"wait for refresh\" (#17986), coming in 5.0.0.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/237367555","html_url":"https://github.com/elastic/elasticsearch/issues/19787#issuecomment-237367555","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19787","id":237367555,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzM2NzU1NQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-08-03T20:45:36Z","updated_at":"2016-08-03T20:45:36Z","author_association":"MEMBER","body":"> Maybe we should simply remove real-time get?\n\nWhat about making it a per-index setting that defaults to disabled? I can think of some use cases for our plugins that make/made use of realtime get\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/237375235","html_url":"https://github.com/elastic/elasticsearch/issues/19787#issuecomment-237375235","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19787","id":237375235,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzM3NTIzNQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-08-03T21:11:53Z","updated_at":"2016-08-03T21:11:53Z","author_association":"CONTRIBUTOR","body":"I guess what we all missed here is that documents that are not yet refreshed are held in the version map since we can't load it's version from the index, yet. I am sorry but it won't be that simple. :(\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/237686851","html_url":"https://github.com/elastic/elasticsearch/issues/19787#issuecomment-237686851","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19787","id":237686851,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzY4Njg1MQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-08-04T21:19:38Z","updated_at":"2016-08-04T21:19:38Z","author_association":"MEMBER","body":"simple it won't be indeed - I wrote the result of previous discussions on a new meta issue: https://github.com/elastic/elasticsearch/issues/19813\n\nI think we can close this one in favor of that, but I let @mikemccand make that call :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/237784534","html_url":"https://github.com/elastic/elasticsearch/issues/19787#issuecomment-237784534","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19787","id":237784534,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzc4NDUzNA==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2016-08-05T08:12:52Z","updated_at":"2016-08-05T08:12:52Z","author_association":"CONTRIBUTOR","body":"OK good I'll close this issue; thanks @bleskes.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/239539392","html_url":"https://github.com/elastic/elasticsearch/issues/19787#issuecomment-239539392","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19787","id":239539392,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTUzOTM5Mg==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2016-08-12T19:31:19Z","updated_at":"2016-08-12T19:31:19Z","author_association":"CONTRIBUTOR","body":"Actually, I think we should have separate issues to track the individual improvements: getting ES back to the indexing performance of raw Lucene is going to be a big project, with many separate improvements.  We can use the meta issue #19813 to track overall progress, but I think we should keep separate issues like this one and #19913 open to track progress of each small step.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/378095959","html_url":"https://github.com/elastic/elasticsearch/issues/19787#issuecomment-378095959","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19787","id":378095959,"node_id":"MDEyOklzc3VlQ29tbWVudDM3ODA5NTk1OQ==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2018-04-03T01:10:15Z","updated_at":"2018-04-03T03:15:38Z","author_association":"MEMBER","body":"I am going to close this. The LiveVersionMap should have been optional since #27752. Thanks all!","performed_via_github_app":null}]