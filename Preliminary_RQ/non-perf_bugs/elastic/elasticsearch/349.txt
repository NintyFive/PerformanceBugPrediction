{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/349","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/349/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/349/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/349/events","html_url":"https://github.com/elastic/elasticsearch/issues/349","id":299857,"node_id":"MDU6SXNzdWUyOTk4NTc=","number":349,"title":"Search API: Allow for script fields to extract parts of the stored _`source`","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"labels":[{"id":23172,"node_id":"MDU6TGFiZWwyMzE3Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Efeature","name":">feature","color":"006b75","default":false,"description":null},{"id":45098,"node_id":"MDU6TGFiZWw0NTA5OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.11.0","name":"v0.11.0","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2010-09-02T18:18:26Z","updated_at":"2010-09-02T18:29:58Z","closed_at":"2010-09-02T18:29:58Z","author_association":"MEMBER","active_lock_reason":null,"body":"The script fields support in the search API to allow to extract source elements. The extract element (and its \"tree\" of data) is then streamed back to the user. Here is an example:\n\n```\n{\n    \"query\" : {  \"match_all\" : {} },\n    \"script_fields\" : {\n        \"test1\" : { \"script\" : \"_source.obj1.arr\" }\n    }\n}\n```\n\nNote the `_source` keyword here to navigate the json like model.\n\nIts important to understand the difference between `doc['my_field'].value` and `_source.my_field`. The first, using the `doc` keyword, will cause the terms for that field to be loaded to memory (cached), which will result in faster execution, but more memory consumption. Also, it only allows for simple valued fields (can't return a json object from it).\n\nThe `_source` on the other hand causes the source to be loaded, parsed, and then only the relevant part of the json is returned.\n\nSince its a script, logic can also be applied here.\n","closed_by":null,"performed_via_github_app":null}