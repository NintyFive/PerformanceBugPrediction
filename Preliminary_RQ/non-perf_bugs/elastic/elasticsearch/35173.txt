{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/35173","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35173/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35173/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35173/events","html_url":"https://github.com/elastic/elasticsearch/issues/35173","id":376491729,"node_id":"MDU6SXNzdWUzNzY0OTE3Mjk=","number":35173,"title":"analysis icu rest test fails: analysis_icu/10_basic/Normalization*","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"labels":[{"id":142001965,"node_id":"MDU6TGFiZWwxNDIwMDE5NjU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Analysis","name":":Search/Analysis","color":"0e8a16","default":false,"description":"How text is split into tokens"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":1223177445,"node_id":"MDU6TGFiZWwxMjIzMTc3NDQ1","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.0.0-beta1","name":"v7.0.0-beta1","color":"dddddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"assignees":[{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2018-11-01T17:30:01Z","updated_at":"2019-02-07T10:34:35Z","closed_at":"2018-11-06T09:02:41Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Reproduce:\r\n```\r\n./gradlew plugins:analysis-icu:check\r\n```\r\n( remember to remove the blacklist from `build.gradle`, tests were muted ) \r\n\r\n```\r\nSuite: org.elasticsearch.index.analysis.IcuClientYamlTestSuiteIT\r\n  1> [2018-11-02T04:23:04,231][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] [yaml=analysis_icu/10_basic/Tokenizer] before test\r\n  1> [2018-11-02T04:23:04,279][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] initializing REST clients against [http://[::1]:44335]\r\n  1> [2018-11-02T04:23:04,491][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] initializing client, minimum es version [7.0.0-alpha1], master version, [7.0.0-alpha1], hosts [http://[::1]:44335]\r\n  1> [2018-11-02T04:23:04,652][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] [yaml=analysis_icu/10_basic/Tokenizer] after test\r\n  1> [2018-11-02T04:23:04,662][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] [yaml=analysis_icu/10_basic/Normalization filter] before test\r\n  1> [2018-11-02T04:23:04,686][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] [yaml=analysis_icu/10_basic/Normalization filter] after test\r\n  1> [2018-11-02T04:23:04,690][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] [yaml=analysis_icu/10_basic/Folding filter] before test\r\n  1> [2018-11-02T04:23:04,704][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] [yaml=analysis_icu/10_basic/Folding filter] after test\r\n  1> [2018-11-02T04:23:04,707][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] [yaml=analysis_icu/20_search/Index ICU content] before test\r\n  1> [2018-11-02T04:23:05,212][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] [yaml=analysis_icu/20_search/Index ICU content] after test\r\n  1> [2018-11-02T04:23:05,215][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] [yaml=analysis_icu/10_basic/Normalization with a UnicodeSet Filter] before test\r\n  1> [2018-11-02T04:23:05,259][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] Stash dump on test failure [{\r\n  1>   \"stash\" : {\r\n  1>     \"body\" : {\r\n  1>       \"error\" : {\r\n  1>         \"root_cause\" : [\r\n  1>           {\r\n  1>             \"type\" : \"remote_transport_exception\",\r\n  1>             \"reason\" : \"[node-0][127.0.0.1:46817][indices:admin/analyze[s]]\",\r\n  1>             \"stack_trace\" : \"[[node-0][127.0.0.1:46817][indices:admin/analyze[s]]]; nested: RemoteTransportException[[node-0][127.0.0.1:46817][indices:admin/analyze[s]]]; nested: IllegalArgumentException[failed to find tokenizer under [keyword]];\r\n  1>    at org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:639)\r\n  1>    at org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:567)\r\n  1>    at org.elasticsearch.rest.BytesRestResponse.build(BytesRestResponse.java:138)\r\n  1>    at org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:96)\r\n  1>    at org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:91)\r\n  1>    at org.elasticsearch.rest.action.RestActionListener.onFailure(RestActionListener.java:58)\r\n  1>    at org.elasticsearch.action.support.TransportAction$1.onFailure(TransportAction.java:72)\r\n  1>    at org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.perform(TransportSingleShardAction.java:239)\r\n  1>    at org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.onFailure(TransportSingleShardAction.java:220)\r\n  1>    at org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.access$1100(TransportSingleShardAction.java:145)\r\n  1>    at org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction$2.handleException(TransportSingleShardAction.java:277)\r\n  1>    at org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1127)\r\n  1>    at org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1244)\r\n  1>    at org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1218)\r\n  1>    at org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:66)\r\n  1>    at org.elasticsearch.action.support.HandledTransportAction$ChannelActionListener.onFailure(HandledTransportAction.java:103)\r\n  1>    at org.elasticsearch.action.support.single.shard.TransportSingleShardAction$1.onFailure(TransportSingleShardAction.java:113)\r\n  1>    at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.onFailure(ThreadContext.java:711)\r\n  1>    at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:39)\r\n  1>    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n  1>    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n  1>    at java.base/java.lang.Thread.run(Thread.java:834)\r\n  1> Caused by: RemoteTransportException[[node-0][127.0.0.1:46817][indices:admin/analyze[s]]]; nested: IllegalArgumentException[failed to find tokenizer under [keyword]];\r\n  1> Caused by: java.lang.IllegalArgumentException: failed to find tokenizer under [keyword]\r\n  1>    at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.parseTokenizerFactory(TransportAnalyzeAction.java:720)\r\n  1>    at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.analyze(TransportAnalyzeAction.java:194)\r\n  1>    at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:169)\r\n  1>    at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:80)\r\n  1>    at org.elasticsearch.action.support.single.shard.TransportSingleShardAction$1.doRun(TransportSingleShardAction.java:118)\r\n  1>    at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:726)\r\n  1>    at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n  1>    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n  1>    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n  1>    at java.base/java.lang.Thread.run(Thread.java:834)\r\n  1> \"\r\n  1>           }\r\n  1>         ],\r\n  1>         \"type\" : \"illegal_argument_exception\",\r\n  1>         \"reason\" : \"failed to find tokenizer under [keyword]\",\r\n  1>         \"stack_trace\" : \"java.lang.IllegalArgumentException: failed to find tokenizer under [keyword]\r\n  1>    at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.parseTokenizerFactory(TransportAnalyzeAction.java:720)\r\n  1>    at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.analyze(TransportAnalyzeAction.java:194)\r\n  1>    at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:169)\r\n  1>    at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:80)\r\n  1>    at org.elasticsearch.action.support.single.shard.TransportSingleShardAction$1.doRun(TransportSingleShardAction.java:118)\r\n  1>    at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:726)\r\n  1>    at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n  1>    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n  1>    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n  1>    at java.base/java.lang.Thread.run(Thread.java:834)\r\n  1> \"\r\n  1>       },\r\n  1>       \"status\" : 400\r\n  1>     }\r\n  1>   }\r\n  1> }]\r\n  1> [2018-11-02T04:23:05,273][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] [yaml=analysis_icu/10_basic/Normalization with a UnicodeSet Filter] after test\r\n  2> REPRODUCE WITH: ./gradlew :plugins:analysis-icu:integTestRunner -Dtests.seed=84F8F6CECF95585A -Dtests.class=org.elasticsearch.index.analysis.IcuClientYamlTestSuiteIT -Dtests.method=\"test {yaml=analysis_icu/10_basic/Normalization with a UnicodeSet Filter}\" -Dtests.security.manager=true -Dtests.locale=sg-CF -Dtests.timezone=Australia/Currie -Dcompiler.java=11 -Druntime.java=11\r\nFAILURE 0.06s | IcuClientYamlTestSuiteIT.test {yaml=analysis_icu/10_basic/Normalization with a UnicodeSet Filter} <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: Failure at [analysis_icu/10_basic:68]: expected [2xx] status code but api [indices.analyze] returned [400 Bad Request] [---\r\n   > error:\r\n   >   root_cause:\r\n   >   - type: \"remote_transport_exception\"\r\n   >     reason: \"[node-0][127.0.0.1:46817][indices:admin/analyze[s]]\"\r\n   >     stack_trace: \"[[node-0][127.0.0.1:46817][indices:admin/analyze[s]]]; nested: RemoteTransportException[[node-0][127.0.0.1:46817][indices:admin/analyze[s]]];\\\r\n   >       \\ nested: IllegalArgumentException[failed to find tokenizer under [keyword]];\\n\\\r\n   >       \\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:639)\\n\\\r\n   >       \\tat org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:567)\\n\\\r\n   >       \\tat org.elasticsearch.rest.BytesRestResponse.build(BytesRestResponse.java:138)\\n\\\r\n   >       \\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:96)\\n\\\r\n   >       \\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:91)\\n\\\r\n   >       \\tat org.elasticsearch.rest.action.RestActionListener.onFailure(RestActionListener.java:58)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.TransportAction$1.onFailure(TransportAction.java:72)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.perform(TransportSingleShardAction.java:239)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.onFailure(TransportSingleShardAction.java:220)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.access$1100(TransportSingleShardAction.java:145)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction$2.handleException(TransportSingleShardAction.java:277)\\n\\\r\n   >       \\tat org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1127)\\n\\\r\n   >       \\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1244)\\n\\\r\n   >       \\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1218)\\n\\\r\n   >       \\tat org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:66)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.HandledTransportAction$ChannelActionListener.onFailure(HandledTransportAction.java:103)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$1.onFailure(TransportSingleShardAction.java:113)\\n\\\r\n   >       \\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.onFailure(ThreadContext.java:711)\\n\\\r\n   >       \\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:39)\\n\\\r\n   >       \\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\\r\n   >       \\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\\r\n   >       \\tat java.base/java.lang.Thread.run(Thread.java:834)\\nCaused by: RemoteTransportException[[node-0][127.0.0.1:46817][indices:admin/analyze[s]]];\\\r\n   >       \\ nested: IllegalArgumentException[failed to find tokenizer under [keyword]];\\n\\\r\n   >       Caused by: java.lang.IllegalArgumentException: failed to find tokenizer under\\\r\n   >       \\ [keyword]\\n\\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.parseTokenizerFactory(TransportAnalyzeAction.java:720)\\n\\\r\n   >       \\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.analyze(TransportAnalyzeAction.java:194)\\n\\\r\n   >       \\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:169)\\n\\\r\n   >       \\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:80)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$1.doRun(TransportSingleShardAction.java:118)\\n\\\r\n   >       \\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:726)\\n\\\r\n   >       \\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\\r\n   >       \\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\\r\n   >       \\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\\r\n   >       \\tat java.base/java.lang.Thread.run(Thread.java:834)\\n\"\r\n   >   type: \"illegal_argument_exception\"\r\n   >   reason: \"failed to find tokenizer under [keyword]\"\r\n   >   stack_trace: \"java.lang.IllegalArgumentException: failed to find tokenizer under\\\r\n   >     \\ [keyword]\\n\\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.parseTokenizerFactory(TransportAnalyzeAction.java:720)\\n\\\r\n   >     \\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.analyze(TransportAnalyzeAction.java:194)\\n\\\r\n   >     \\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:169)\\n\\\r\n   >     \\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:80)\\n\\\r\n   >     \\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$1.doRun(TransportSingleShardAction.java:118)\\n\\\r\n   >     \\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:726)\\n\\\r\n   >     \\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\\r\n   >     \\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\\r\n   >     \\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\\r\n   >     \\tat java.base/java.lang.Thread.run(Thread.java:834)\\n\"\r\n   > status: 400\r\n   > ]\r\n   >    at __randomizedtesting.SeedInfo.seed([84F8F6CECF95585A:CACC914616935A2]:0)\r\n   >    at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:407)\r\n   >    at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.test(ESClientYamlSuiteTestCase.java:384)\r\n   >    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n   >    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n   >    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n   >    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n   >    at java.base/java.lang.Thread.run(Thread.java:834)\r\n   > Caused by: java.lang.AssertionError: expected [2xx] status code but api [indices.analyze] returned [400 Bad Request] [---\r\n   > error:\r\n   >   root_cause:\r\n   >   - type: \"remote_transport_exception\"\r\n   >     reason: \"[node-0][127.0.0.1:46817][indices:admin/analyze[s]]\"\r\n   >     stack_trace: \"[[node-0][127.0.0.1:46817][indices:admin/analyze[s]]]; nested: RemoteTransportException[[node-0][127.0.0.1:46817][indices:admin/analyze[s]]];\\\r\n   >       \\ nested: IllegalArgumentException[failed to find tokenizer under [keyword]];\\n\\\r\n   >       \\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:639)\\n\\\r\n   >       \\tat org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:567)\\n\\\r\n   >       \\tat org.elasticsearch.rest.BytesRestResponse.build(BytesRestResponse.java:138)\\n\\\r\n   >       \\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:96)\\n\\\r\n   >       \\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:91)\\n\\\r\n   >       \\tat org.elasticsearch.rest.action.RestActionListener.onFailure(RestActionListener.java:58)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.TransportAction$1.onFailure(TransportAction.java:72)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.perform(TransportSingleShardAction.java:239)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.onFailure(TransportSingleShardAction.java:220)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.access$1100(TransportSingleShardAction.java:145)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction$2.handleException(TransportSingleShardAction.java:277)\\n\\\r\n   >       \\tat org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1127)\\n\\\r\n   >       \\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1244)\\n\\\r\n   >       \\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1218)\\n\\\r\n   >       \\tat org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:66)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.HandledTransportAction$ChannelActionListener.onFailure(HandledTransportAction.java:103)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$1.onFailure(TransportSingleShardAction.java:113)\\n\\\r\n   >       \\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.onFailure(ThreadContext.java:711)\\n\\\r\n   >       \\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:39)\\n\\\r\n   >       \\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\\r\n   >       \\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\\r\n   >       \\tat java.base/java.lang.Thread.run(Thread.java:834)\\nCaused by: RemoteTransportException[[node-0][127.0.0.1:46817][indices:admin/analyze[s]]];\\\r\n   >       \\ nested: IllegalArgumentException[failed to find tokenizer under [keyword]];\\n\\\r\n   >       Caused by: java.lang.IllegalArgumentException: failed to find tokenizer under\\\r\n   >       \\ [keyword]\\n\\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.parseTokenizerFactory(TransportAnalyzeAction.java:720)\\n\\\r\n   >       \\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.analyze(TransportAnalyzeAction.java:194)\\n\\\r\n   >       \\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:169)\\n\\\r\n   >       \\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:80)\\n\\\r\n   >       \\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$1.doRun(TransportSingleShardAction.java:118)\\n\\\r\n   >       \\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:726)\\n\\\r\n   >       \\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\\r\n   >       \\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\\r\n   >       \\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\\r\n   >       \\tat java.base/java.lang.Thread.run(Thread.java:834)\\n\"\r\n   >   type: \"illegal_argument_exception\"\r\n   >   reason: \"failed to find tokenizer under [keyword]\"\r\n   >   stack_trace: \"java.lang.IllegalArgumentException: failed to find tokenizer under\\\r\n   >     \\ [keyword]\\n\\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.parseTokenizerFactory(TransportAnalyzeAction.java:720)\\n\\\r\n   >     \\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.analyze(TransportAnalyzeAction.java:194)\\n\\\r\n   >     \\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:169)\\n\\\r\n   >     \\tat org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:80)\\n\\\r\n   >     \\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$1.doRun(TransportSingleShardAction.java:118)\\n\\\r\n   >     \\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:726)\\n\\\r\n   >     \\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\\r\n   >     \\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\\r\n   >     \\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\\r\n   >     \\tat java.base/java.lang.Thread.run(Thread.java:834)\\n\"\r\n   > status: 400\r\n   > ]\r\n   >    at org.elasticsearch.test.rest.yaml.section.DoSection.execute(DoSection.java:261)\r\n   >    at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:400)\r\n   >    ... 37 more\r\n  1> [2018-11-02T04:23:05,279][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] [yaml=analysis_icu/10_basic/Normalization charfilter] before test\r\n  1> [2018-11-02T04:23:05,290][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] [yaml=analysis_icu/10_basic/Normalization charfilter] after test\r\n  1> [2018-11-02T04:23:05,292][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] [yaml=analysis_icu/10_basic/Normalization with a CamcelCase UnicodeSet Filter] before test\r\n  1> [2018-11-02T04:23:05,322][WARN ][o.e.c.RestClient         ] [[I/O dispatcher 1]] request [PUT http://[::1]:44335/test?error_trace=true] returned 1 warnings: [299 Elasticsearch-7.0.0-alpha1-SNAPSHOT-77fab62 \"[unicodeSetFilter] has been deprecated in favor of [unicode_set_filter]\" \"Thu, 01 Nov 2018 17:23:05 GMT\"]\r\n  1> [2018-11-02T04:23:05,327][WARN ][o.e.c.RestClient         ] [[I/O dispatcher 1]] request [GET http://[::1]:44335/test/_analyze?error_trace=true] returned 1 warnings: [299 Elasticsearch-7.0.0-alpha1-SNAPSHOT-77fab62 \"[unicodeSetFilter] has been deprecated in favor of [unicode_set_filter]\" \"Thu, 01 Nov 2018 17:23:05 GMT\"]\r\n  1> [2018-11-02T04:23:05,328][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] Stash dump on test failure [{\r\n  1>   \"stash\" : {\r\n  1>     \"body\" : {\r\n  1>       \"tokens\" : [\r\n  1>         {\r\n  1>           \"token\" : \"charfilter\",\r\n  1>           \"start_offset\" : 0,\r\n  1>           \"end_offset\" : 10,\r\n  1>           \"type\" : \"<ALPHANUM>\",\r\n  1>           \"position\" : 0\r\n  1>         },\r\n  1>         {\r\n  1>           \"token\" : \"föo\",\r\n  1>           \"start_offset\" : 11,\r\n  1>           \"end_offset\" : 14,\r\n  1>           \"type\" : \"<ALPHANUM>\",\r\n  1>           \"position\" : 1\r\n  1>         },\r\n  1>         {\r\n  1>           \"token\" : \"bâr\",\r\n  1>           \"start_offset\" : 15,\r\n  1>           \"end_offset\" : 18,\r\n  1>           \"type\" : \"<ALPHANUM>\",\r\n  1>           \"position\" : 2\r\n  1>         },\r\n  1>         {\r\n  1>           \"token\" : \"ruß\",\r\n  1>           \"start_offset\" : 19,\r\n  1>           \"end_offset\" : 22,\r\n  1>           \"type\" : \"<ALPHANUM>\",\r\n  1>           \"position\" : 3\r\n  1>         }\r\n  1>       ]\r\n  1>     }\r\n  1>   }\r\n  1> }]\r\n  1> [2018-11-02T04:23:05,340][INFO ][o.e.i.a.IcuClientYamlTestSuiteIT] [test] [yaml=analysis_icu/10_basic/Normalization with a CamcelCase UnicodeSet Filter] after test\r\n  2> REPRODUCE WITH: ./gradlew :plugins:analysis-icu:integTestRunner -Dtests.seed=84F8F6CECF95585A -Dtests.class=org.elasticsearch.index.analysis.IcuClientYamlTestSuiteIT -Dtests.method=\"test {yaml=analysis_icu/10_basic/Normalization with a CamcelCase UnicodeSet Filter}\" -Dtests.security.manager=true -Dtests.locale=sg-CF -Dtests.timezone=Australia/Currie -Dcompiler.java=11 -Druntime.java=11\r\nFAILURE 0.05s | IcuClientYamlTestSuiteIT.test {yaml=analysis_icu/10_basic/Normalization with a CamcelCase UnicodeSet Filter} <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: Failure at [analysis_icu/10_basic:123]: got unexpected warning header [\r\n   >    299 Elasticsearch-7.0.0-alpha1-SNAPSHOT-77fab62 \"[unicodeSetFilter] has been deprecated in favor of [unicode_set_filter]\" \"Thu, 01 Nov 2018 17:23:05 GMT\"\r\n   > ]\r\n   >    at __randomizedtesting.SeedInfo.seed([84F8F6CECF95585A:CACC914616935A2]:0)\r\n   >    at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:407)\r\n   >    at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.test(ESClientYamlSuiteTestCase.java:384)\r\n   >    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n   >    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n   >    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n   >    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n   >    at java.base/java.lang.Thread.run(Thread.java:834)\r\n   > Caused by: java.lang.AssertionError: got unexpected warning header [\r\n   >    299 Elasticsearch-7.0.0-alpha1-SNAPSHOT-77fab62 \"[unicodeSetFilter] has been deprecated in favor of [unicode_set_filter]\" \"Thu, 01 Nov 2018 17:23:05 GMT\"\r\n   > ]\r\n   >    at org.elasticsearch.test.rest.yaml.section.DoSection.checkWarningHeaders(DoSection.java:324)\r\n   >    at org.elasticsearch.test.rest.yaml.section.DoSection.execute(DoSection.java:257)\r\n   >    at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:400)\r\n   >    ... 37 more\r\n  2> NOTE: leaving temporary files on disk at: /home/alpar/work/elastic/elasticsearch/plugins/analysis-icu/build/testrun/integTestRunner/J0/temp/org.elasticsearch.index.analysis.IcuClientYamlTestSuiteIT_84F8F6CECF95585A-001\r\n  2> NOTE: test params are: codec=Asserting(Lucene80): {}, docValues:{}, maxPointsInLeafNode=286, maxMBSortInHeap=7.650042489592934, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@6e0cc929), locale=sg-CF, timezone=Australia/Currie\r\n  2> NOTE: Linux 4.18.14-arch1-1-ARCH amd64/Oracle Corporation 11 (64-bit)/cpus=12,threads=1,free=461970376,total=536870912\r\n  2> NOTE: All tests run in this JVM: [IcuClientYamlTestSuiteIT]\r\nCompleted [1/2] in 1.21s, 7 tests, 2 failures <<< FAILURES!\r\n\r\n\r\n> Task :plugins:analysis-icu:integTestRunner\r\nTests with failures:\r\n  - org.elasticsearch.index.analysis.IcuClientYamlTestSuiteIT.test {yaml=analysis_icu/10_basic/Normalization with a UnicodeSet Filter}\r\n  - org.elasticsearch.index.analysis.IcuClientYamlTestSuiteIT.test {yaml=analysis_icu/10_basic/Normalization with a CamcelCase UnicodeSet Filter}\r\n\r\nJUnit4 test failed, ant output was:\r\n   [junit4] <JUnit4> says नमस्ते! Master seed: 84F8F6CECF95585A\r\n   [junit4] JVM J0:     0.26 ..     4.30 =     4.04s\r\n   [junit4] Execution time total: 4.30 sec.\r\n   [junit4] Tests summary: 2 suites, 17 tests, 2 failures\r\n\r\n```\r\n","closed_by":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"performed_via_github_app":null}