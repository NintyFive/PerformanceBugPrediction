{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/16259","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16259/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16259/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16259/events","html_url":"https://github.com/elastic/elasticsearch/issues/16259","id":129117945,"node_id":"MDU6SXNzdWUxMjkxMTc5NDU=","number":16259,"title":"API to allow queries to bypass the query cache policy","user":{"login":"rendel","id":4909531,"node_id":"MDQ6VXNlcjQ5MDk1MzE=","avatar_url":"https://avatars1.githubusercontent.com/u/4909531?v=4","gravatar_id":"","url":"https://api.github.com/users/rendel","html_url":"https://github.com/rendel","followers_url":"https://api.github.com/users/rendel/followers","following_url":"https://api.github.com/users/rendel/following{/other_user}","gists_url":"https://api.github.com/users/rendel/gists{/gist_id}","starred_url":"https://api.github.com/users/rendel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rendel/subscriptions","organizations_url":"https://api.github.com/users/rendel/orgs","repos_url":"https://api.github.com/users/rendel/repos","events_url":"https://api.github.com/users/rendel/events{/privacy}","received_events_url":"https://api.github.com/users/rendel/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-01-27T11:38:19Z","updated_at":"2016-01-29T12:07:58Z","closed_at":"2016-01-27T18:29:49Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"We have currently a performance issue with the new query cache policy. We have queries that are quite heavy to construct and compute, even on small segments. The `UsageTrackingQueryCachingPolicy` (which use `CacheOnLargeSegments`) will always discard the caching of our queries on small segments. This leads to a significant drop of performance (5x to 10x) in our scenarios. \nAnother limitation of the `UsageTrackingQueryCachingPolicy` is that there is no easy way to indicate him that our queries are costly to build, apart from subclassing our queries with MultiTermQuery so that it is picked up by the `UsageTrackingQueryCachingPolicy#isCostly`.\nAt the moment, the only solution we have is to configure elasticsearch to switch back to the `QueryCachingPolicy.ALWAYS_CACHE` cache policy.\n","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}