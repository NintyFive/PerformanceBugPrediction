{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/51899","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51899/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51899/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51899/events","html_url":"https://github.com/elastic/elasticsearch/issues/51899","id":560058720,"node_id":"MDU6SXNzdWU1NjAwNTg3MjA=","number":51899,"title":"[CI] DocsClientYamlTestSuiteIT ILM tests failing on Windows","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"labels":[{"id":912828538,"node_id":"MDU6TGFiZWw5MTI4Mjg1Mzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/ILM+SLM","name":":Core/Features/ILM+SLM","color":"0e8a16","default":false,"description":"Index and Snapshot lifecycle management"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-02-05T00:10:28Z","updated_at":"2020-02-05T15:21:46Z","closed_at":"2020-02-05T09:25:02Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"We've been seeing a couple of YAML tests, specifically `test {yaml=reference\\ilm\\apis/get-lifecycle/line_49}` and `test {yaml=reference\\ilm/update-lifecycle-policy/line_29}` failing regularly on Windows in CI. The errors are all very similar:\r\n\r\n```\r\nFailure at [reference\\ilm\\apis/get-lifecycle:42]: $body didn't match expected value:\r\n                         $body: \r\n                       my_policy: \r\n                     modified_date: same [2020-02-04T22:57:46.144Z]\r\n                            policy: \r\n                              phases: \r\n                                delete: \r\n                                 actions: \r\n                                    delete: same [empty map]\r\n                                 min_age: same [30d]\r\n                                  warm: \r\n                                 actions: \r\n                                forcemerge: \r\n                            max_num_segments: same [1]\r\n                                 min_age: same [10d]\r\n                           version: expected Integer [1] but was Integer [4]\r\n```\r\n\r\nSeem to be complaining about the policy version. Sounds like we are updating this policy multiple times or something isn't getting cleaned up. Not sure why this seems to be a Windows-only phenomenon.\r\n\r\nhttps://gradle-enterprise.elastic.co/scans/tests?failures.failureClassification=non_verification&list.offset=0&list.size=50&list.sortColumn=startTime&list.sortOrder=desc&search.buildToolType=gradle&search.buildToolType=maven&search.startTimeMax=1580889599999&search.startTimeMin=1580544000000&search.tags=CI&search.tags=windows&tests.container=org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT&tests.sortField=FAILED&tests.unstableOnly&trends.section=overview&trends.timeResolution=day&viewer.tzOffset=-480","closed_by":{"login":"andreidan","id":1217601,"node_id":"MDQ6VXNlcjEyMTc2MDE=","avatar_url":"https://avatars2.githubusercontent.com/u/1217601?v=4","gravatar_id":"","url":"https://api.github.com/users/andreidan","html_url":"https://github.com/andreidan","followers_url":"https://api.github.com/users/andreidan/followers","following_url":"https://api.github.com/users/andreidan/following{/other_user}","gists_url":"https://api.github.com/users/andreidan/gists{/gist_id}","starred_url":"https://api.github.com/users/andreidan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreidan/subscriptions","organizations_url":"https://api.github.com/users/andreidan/orgs","repos_url":"https://api.github.com/users/andreidan/repos","events_url":"https://api.github.com/users/andreidan/events{/privacy}","received_events_url":"https://api.github.com/users/andreidan/received_events","type":"User","site_admin":false},"performed_via_github_app":null}