{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10739","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10739/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10739/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10739/events","html_url":"https://github.com/elastic/elasticsearch/issues/10739","id":70238484,"node_id":"MDU6SXNzdWU3MDIzODQ4NA==","number":10739,"title":"Illegal instant due to time zone offset transition, Joda error","user":{"login":"nullbuddy1243","id":3485446,"node_id":"MDQ6VXNlcjM0ODU0NDY=","avatar_url":"https://avatars1.githubusercontent.com/u/3485446?v=4","gravatar_id":"","url":"https://api.github.com/users/nullbuddy1243","html_url":"https://github.com/nullbuddy1243","followers_url":"https://api.github.com/users/nullbuddy1243/followers","following_url":"https://api.github.com/users/nullbuddy1243/following{/other_user}","gists_url":"https://api.github.com/users/nullbuddy1243/gists{/gist_id}","starred_url":"https://api.github.com/users/nullbuddy1243/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nullbuddy1243/subscriptions","organizations_url":"https://api.github.com/users/nullbuddy1243/orgs","repos_url":"https://api.github.com/users/nullbuddy1243/repos","events_url":"https://api.github.com/users/nullbuddy1243/events{/privacy}","received_events_url":"https://api.github.com/users/nullbuddy1243/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"assignees":[{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2015-04-22T21:22:25Z","updated_at":"2015-07-23T15:44:54Z","closed_at":"2015-04-23T18:07:54Z","author_association":"NONE","active_lock_reason":null,"body":"Hi there everyone,\n\nI posted in another issue dealing with the \"Illegal instant\" error and it was suggested to create a new issue as my stack trace was somewhat different.  Here is the other issue thread: https://github.com/elastic/elasticsearch/issues/10025\n\nMy issue is regarding a JDBC SQL river using the elasticsearch-JDBC plugin\nhttps://github.com/jprante/elasticsearch-jdbc\n\nI am attempting to use field mapping to parse a timestamp in the following format \n\n```\n2015-03-08 02:00:00 EST\n```\n\nThis was needed because when timezone was not included, Kibana would display all data in the incorrect timezone.  \n\nMy field mappings look like this:\n\n```\ncurl -XPUT 'localhost:9200/distribution_posting_status_sp' -d '\n        { \"mappings\" : {\n        \"distribution_operation_posting_trend_historical\": {\n        \"properties\": {\n          \"day_name\" : {\n            \"type\" : \"string\"\n          },\n          \"day_timeinterval\" : {\n            \"type\" : \"date\",\n            \"format\": \"yyyy-MM-dd HH:mm:ss z\"\n          },\n          \"posting_count\" : {\n            \"type\" : \"long\"\n          },\n          \"posting_status\" : {\n            \"type\" : \"string\"\n          }\n        }\n      },\n      \"distribution_operation_posting_trend_15min\":{\n        \"properties\": {\n          \"day_name\" : {\n            \"type\" : \"string\"\n          },\n          \"day_timeinterval\" : {\n            \"type\" : \"date\",\n            \"format\": \"yyyy-MM-dd HH:mm:ss z\"\n          },\n          \"posting_count\" : {\n            \"type\" : \"long\"\n          },\n          \"posting_status\" : {\n            \"type\" : \"string\"\n          }\n        }\n      }\n    }\n}'\n```\n\nThe Joda time format indicates that a \"z\" character should match an input of \n`Pacific Standard Time; PST`\nSo EST should not be an issue there.  \n\nThe stack trace that I got is as follows:\n\n```\norg.elasticsearch.index.mapper.MapperParsingException: failed to parse [day_timeinterval]\n        at org.elasticsearch.index.mapper.core.AbstractFieldMapper.parse(AbstractFieldMapper.java:416)\n        at org.elasticsearch.index.mapper.object.ObjectMapper.serializeValue(ObjectMapper.java:709)\n        at org.elasticsearch.index.mapper.object.ObjectMapper.parse(ObjectMapper.java:500)\n        at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:542)\n        at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:491)\n        at org.elasticsearch.index.shard.service.InternalIndexShard.prepareCreate(InternalIndexShard.java:392)\n        at org.elasticsearch.action.bulk.TransportShardBulkAction.shardIndexOperation(TransportShardBulkAction.java:444)\n        at org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:150)\n        at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:512)\n        at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: org.elasticsearch.index.mapper.MapperParsingException: failed to parse date field [2015-03-08 02:15:00 EST], tried both date format [yyyy-MM-dd HH:mm:ss z], and timestamp number with locale []\n        at org.elasticsearch.index.mapper.core.DateFieldMapper.parseStringValue(DateFieldMapper.java:621)\n        at org.elasticsearch.index.mapper.core.DateFieldMapper.innerParseCreateField(DateFieldMapper.java:549)\n        at org.elasticsearch.index.mapper.core.NumberFieldMapper.parseCreateField(NumberFieldMapper.java:235)\n        at org.elasticsearch.index.mapper.core.AbstractFieldMapper.parse(AbstractFieldMapper.java:406)\n        ... 12 more\nCaused by: org.elasticsearch.common.joda.time.IllegalInstantException: Cannot parse \"2015-03-08 02:15:00 EST\": Illegal instant due to time zone offset transition (America/New_York)\n        at org.elasticsearch.common.joda.time.format.DateTimeParserBucket.computeMillis(DateTimeParserBucket.java:390)\n        at org.elasticsearch.common.joda.time.format.DateTimeFormatter.parseMillis(DateTimeFormatter.java:749)\n        at org.elasticsearch.index.mapper.core.DateFieldMapper.parseStringValue(DateFieldMapper.java:615)\n```\n\nI suspect that this is caused by a Daylight Saving Time \"gap\", though I am unsure of what that implies. I do not know too much about the underworkings of Elasticsearch and am a rather new user.\n\nCan anyone suggest a course of action?  I may modify the stored procedure to output the timestamp with a UTC offset intstead of the string representation of timezone, IE: -04:00 for DST EST and -05:00 for non-DST EST.\n\nThanks!\n","closed_by":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"performed_via_github_app":null}