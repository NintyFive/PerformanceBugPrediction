{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15499","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15499/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15499/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15499/events","html_url":"https://github.com/elastic/elasticsearch/issues/15499","id":122659250,"node_id":"MDU6SXNzdWUxMjI2NTkyNTA=","number":15499,"title":"Recovery loop never ends or comes back shortly ","user":{"login":"konste","id":2653844,"node_id":"MDQ6VXNlcjI2NTM4NDQ=","avatar_url":"https://avatars0.githubusercontent.com/u/2653844?v=4","gravatar_id":"","url":"https://api.github.com/users/konste","html_url":"https://github.com/konste","followers_url":"https://api.github.com/users/konste/followers","following_url":"https://api.github.com/users/konste/following{/other_user}","gists_url":"https://api.github.com/users/konste/gists{/gist_id}","starred_url":"https://api.github.com/users/konste/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konste/subscriptions","organizations_url":"https://api.github.com/users/konste/orgs","repos_url":"https://api.github.com/users/konste/repos","events_url":"https://api.github.com/users/konste/events{/privacy}","received_events_url":"https://api.github.com/users/konste/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-12-17T04:34:12Z","updated_at":"2015-12-17T10:52:10Z","closed_at":"2015-12-17T10:52:10Z","author_association":"NONE","active_lock_reason":null,"body":"I have a small two machines cluster and starting with ES 2.1 it got barely usable. One of the two machines (random) falls out of the cluster, then rejoins, runs many hours of recovery, then goes green for just a little and then scenario repeats with one machine or another. I suspected overload and gradually reduced the load, but it does not seem relevant. It pretty much feels like 2.1 issue. \n\nA few symptoms, which may be relevant or may be not:\n1.  A lot of these: failed to create shard, failure ElasticsearchException[failed to create shard]; nested: LockObtainFailedException[Can't lock shard […][4], timed out after 5000ms]; I was looking for a way to increase this 5000ms timeout, but for the life of me could not find how;\n2.  Lots of these: BroadcastShardOperationFailedException[operation indices:monitor/stats failed]; nested: IllegalIndexShardStateException[CurrentState[RECOVERING] operations only allowed when shard state is one of [POST_RECOVERY, STARTED, RELOCATED]];\n3.   It is not Out of Memory – I had it in the past and now pretty sure it is not the case;\n4.  Some of these: RemoteTransportException[[Acorn6][10.150.0.111:9300][internal:index/shard/recovery/start_recovery]]; nested: RecoveryEngineException[Phase[1] phase1 failed]; nested: RecoverFilesRecoveryException[Failed to transfer [25] files with total size of [45gb]]; nested: ReceiveTimeoutTransportException[[Acorn5][10.150.0.110:9300][internal:index/shard/recovery/prepare_translog] request_id [32655383] timed out after [900386ms]];\n\nAny troubleshooting tips? \nThank you!\nKonstantin\n","closed_by":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"performed_via_github_app":null}