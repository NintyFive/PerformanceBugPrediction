{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9331","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9331/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9331/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9331/events","html_url":"https://github.com/elastic/elasticsearch/issues/9331","id":54558889,"node_id":"MDU6SXNzdWU1NDU1ODg4OQ==","number":9331,"title":"Re-evaluate warmers ","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"labels":[{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2015-01-16T10:08:14Z","updated_at":"2016-04-26T18:32:45Z","closed_at":"2016-04-26T18:32:45Z","author_association":"MEMBER","active_lock_reason":null,"body":"Warmers are great, but have to be used with caution, because you may end up caching things that are never end up being used and picking the right search request is not always straight forward. Also running the query phase of a search request you may end up doing more work for warming then is required for caching purposes.\n\nNowadays we have:\n- eager field data loading\n- eager norms loading\n- filter cache from 2.0 has been improved the only auto cache after a filter has been used a couple of times to make sure useless entries don't make it in the filter cache.\n\nWarmers were added (around version 0.20) long before the above features/improvements were created. The only other benefit I can think of warmers give us, is that it warms up the inverted index, but this can also be done in a similar way Lucene's `SimpleMergedSegmentWarmer` is warming up (filling up the filesystem cache) the index. The `SimpleMergedSegmentWarmer` also access part of the term dictionary instead of running a query what would happen with warmers. I think just warming up the term directory is sufficient for warmers, also warming up the posting list may be too much as big chucks may end up never being accessed.\n\nMaybe we should add a `eager_loading` option to field mappings, which can have the following options: `fielddata`, `norms` and `index`. (multiple values can be specified) This option will then supersede the other eager loading options.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}