{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/47282","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47282/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47282/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47282/events","html_url":"https://github.com/elastic/elasticsearch/issues/47282","id":500139947,"node_id":"MDU6SXNzdWU1MDAxMzk5NDc=","number":47282,"title":"[CI] UpgradeClusterClientYamlTestSuiteIT {p0=old_cluster/30_ml_jobs_crud/Put categorization job on the old cluster and post some data} failure","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"assignees":[{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2019-09-30T08:53:47Z","updated_at":"2019-09-30T10:54:23Z","closed_at":"2019-09-30T10:54:23Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"This has failed a couple of times on master this morning, and also on some PR builds:\r\n\r\nhttps://gradle-enterprise.elastic.co/s/rdnrtp6tkpata/tests/swyhwvciymwry-ojge3es2uwhgg\r\n\r\n```\r\njava.lang.AssertionError: \r\nFailure at [old_cluster/30_ml_jobs_crud:109]: count didn't match expected value:\r\n                         count: expected Integer [1] but was Integer [2]\r\n```\r\n```\r\n[2019-09-30T09:00:20,014][INFO ][o.e.u.UpgradeClusterClientYamlTestSuiteIT] [test] [p0=old_cluster/30_ml_jobs_crud/Put categorization job on the old cluster and post some data] before test\r\n[2019-09-30T09:00:24,018][INFO ][o.e.u.UpgradeClusterClientYamlTestSuiteIT] [test] Stash dump on test failure [{\r\n  \"stash\" : {\r\n    \"body\" : {\r\n      \"count\" : 2,\r\n      \"categories\" : [\r\n        {\r\n          \"job_id\" : \"old-cluster-categorization-job\",\r\n          \"category_id\" : 1,\r\n          \"terms\" : \"first message categorized\",\r\n          \"regex\" : \".*?first.+?message.+?categorized.*\",\r\n          \"max_matching_length\" : 47,\r\n          \"examples\" : [\r\n            \"this is the first message to be categorized\"\r\n          ],\r\n          \"grok_pattern\" : \".*?first.+?message.+?%{BASE16NUM:field}.+?categorized.*\"\r\n        },\r\n        {\r\n          \"job_id\" : \"old-cluster-categorization-job\",\r\n          \"category_id\" : 2,\r\n          \"terms\" : \"second message categorized\",\r\n          \"regex\" : \".*?second.+?message.+?categorized.*\",\r\n          \"max_matching_length\" : 48,\r\n          \"examples\" : [\r\n            \"this is the second message to be categorized\"\r\n          ],\r\n          \"grok_pattern\" : \".*?second.+?message.+?%{BASE16NUM:field}.+?categorized.*\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}]\r\n[2019-09-30T09:00:24,140][INFO ][o.e.u.UpgradeClusterClientYamlTestSuiteIT] [test] [p0=old_cluster/30_ml_jobs_crud/Put categorization job on the old cluster and post some data] after test\r\nREPRODUCE WITH: ./gradlew ':x-pack:qa:rolling-upgrade:v8.0.0#oldClusterTest' --tests \"org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT.test {p0=old_cluster/30_ml_jobs_crud/Put categorization job on the old cluster and post some data}\" -Dtests.seed=D1C00949B5E870B2 -Dtests.security.manager=true -Dtests.locale=az-Latn-AZ -Dtests.timezone=Europe/Lisbon -Dcompiler.java=12 -Druntime.java=11 -Dtests.rest.suite=old_cluster\r\n\r\n```","closed_by":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"performed_via_github_app":null}