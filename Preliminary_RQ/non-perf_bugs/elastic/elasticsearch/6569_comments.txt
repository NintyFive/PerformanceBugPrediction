[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/46656827","html_url":"https://github.com/elastic/elasticsearch/issues/6569#issuecomment-46656827","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6569","id":46656827,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjU2ODI3","user":{"login":"Rzulf","id":242137,"node_id":"MDQ6VXNlcjI0MjEzNw==","avatar_url":"https://avatars1.githubusercontent.com/u/242137?v=4","gravatar_id":"","url":"https://api.github.com/users/Rzulf","html_url":"https://github.com/Rzulf","followers_url":"https://api.github.com/users/Rzulf/followers","following_url":"https://api.github.com/users/Rzulf/following{/other_user}","gists_url":"https://api.github.com/users/Rzulf/gists{/gist_id}","starred_url":"https://api.github.com/users/Rzulf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rzulf/subscriptions","organizations_url":"https://api.github.com/users/Rzulf/orgs","repos_url":"https://api.github.com/users/Rzulf/repos","events_url":"https://api.github.com/users/Rzulf/events{/privacy}","received_events_url":"https://api.github.com/users/Rzulf/received_events","type":"User","site_admin":false},"created_at":"2014-06-20T08:41:26Z","updated_at":"2014-06-20T08:41:26Z","author_association":"NONE","body":"Version 1.2.0\nUbuntu Server 14.04\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/46662868","html_url":"https://github.com/elastic/elasticsearch/issues/6569#issuecomment-46662868","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6569","id":46662868,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjYyODY4","user":{"login":"Rzulf","id":242137,"node_id":"MDQ6VXNlcjI0MjEzNw==","avatar_url":"https://avatars1.githubusercontent.com/u/242137?v=4","gravatar_id":"","url":"https://api.github.com/users/Rzulf","html_url":"https://github.com/Rzulf","followers_url":"https://api.github.com/users/Rzulf/followers","following_url":"https://api.github.com/users/Rzulf/following{/other_user}","gists_url":"https://api.github.com/users/Rzulf/gists{/gist_id}","starred_url":"https://api.github.com/users/Rzulf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rzulf/subscriptions","organizations_url":"https://api.github.com/users/Rzulf/orgs","repos_url":"https://api.github.com/users/Rzulf/repos","events_url":"https://api.github.com/users/Rzulf/events{/privacy}","received_events_url":"https://api.github.com/users/Rzulf/received_events","type":"User","site_admin":false},"created_at":"2014-06-20T09:59:08Z","updated_at":"2014-06-20T09:59:08Z","author_association":"NONE","body":"I am experiencing this bug with another issue #6441 \n\nBoth things started to happen after I run out of space on disk :/\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/60009953","html_url":"https://github.com/elastic/elasticsearch/issues/6569#issuecomment-60009953","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6569","id":60009953,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMDA5OTUz","user":{"login":"elvarb","id":1716457,"node_id":"MDQ6VXNlcjE3MTY0NTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1716457?v=4","gravatar_id":"","url":"https://api.github.com/users/elvarb","html_url":"https://github.com/elvarb","followers_url":"https://api.github.com/users/elvarb/followers","following_url":"https://api.github.com/users/elvarb/following{/other_user}","gists_url":"https://api.github.com/users/elvarb/gists{/gist_id}","starred_url":"https://api.github.com/users/elvarb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elvarb/subscriptions","organizations_url":"https://api.github.com/users/elvarb/orgs","repos_url":"https://api.github.com/users/elvarb/repos","events_url":"https://api.github.com/users/elvarb/events{/privacy}","received_events_url":"https://api.github.com/users/elvarb/received_events","type":"User","site_admin":false},"created_at":"2014-10-21T22:33:34Z","updated_at":"2014-10-21T22:33:34Z","author_association":"NONE","body":"Having the same problems. Ran out of disk space and 4 out of 5 shards cant be initialized. Using Kopf to view the status I can see the size of the Index jump up and down depending on what host is trying to initialize the shard. Possibly because each of them contain either a perimary or a replica of the corrupted shard and they dont match.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/60011182","html_url":"https://github.com/elastic/elasticsearch/issues/6569#issuecomment-60011182","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6569","id":60011182,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMDExMTgy","user":{"login":"elvarb","id":1716457,"node_id":"MDQ6VXNlcjE3MTY0NTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1716457?v=4","gravatar_id":"","url":"https://api.github.com/users/elvarb","html_url":"https://github.com/elvarb","followers_url":"https://api.github.com/users/elvarb/followers","following_url":"https://api.github.com/users/elvarb/following{/other_user}","gists_url":"https://api.github.com/users/elvarb/gists{/gist_id}","starred_url":"https://api.github.com/users/elvarb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elvarb/subscriptions","organizations_url":"https://api.github.com/users/elvarb/orgs","repos_url":"https://api.github.com/users/elvarb/repos","events_url":"https://api.github.com/users/elvarb/events{/privacy}","received_events_url":"https://api.github.com/users/elvarb/received_events","type":"User","site_admin":false},"created_at":"2014-10-21T22:44:50Z","updated_at":"2014-10-21T22:44:50Z","author_association":"NONE","body":"Could be happening to begin with when the node that holds the primary shard has space left but the backup one runs out of space. ES accepts and commits the incoming transactions even though the backup shards cant verify the transaction.\n\nWhen the initialization starts again they refuse to start because of the size mis match.\n\nA better behavior would be for ES to stop accepting new transactions if one data node runs out of space.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/60043886","html_url":"https://github.com/elastic/elasticsearch/issues/6569#issuecomment-60043886","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6569","id":60043886,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMDQzODg2","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2014-10-22T06:55:37Z","updated_at":"2014-10-22T06:55:37Z","author_association":"MEMBER","body":"@elvarb what version are you on? \n\nWhen we assign a replica to a node and that node already has local files, we try to reuse them instead of copying the same files over. Perhaps something goes wrong in trying to read the local files after they were corrupted by the out of disk space issue. We are already supposed to deal with errors there but that become tricky and we might have missed some edge case.\n\nCan you share the error stack trace you see?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/60063419","html_url":"https://github.com/elastic/elasticsearch/issues/6569#issuecomment-60063419","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6569","id":60063419,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMDYzNDE5","user":{"login":"elvarb","id":1716457,"node_id":"MDQ6VXNlcjE3MTY0NTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1716457?v=4","gravatar_id":"","url":"https://api.github.com/users/elvarb","html_url":"https://github.com/elvarb","followers_url":"https://api.github.com/users/elvarb/followers","following_url":"https://api.github.com/users/elvarb/following{/other_user}","gists_url":"https://api.github.com/users/elvarb/gists{/gist_id}","starred_url":"https://api.github.com/users/elvarb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elvarb/subscriptions","organizations_url":"https://api.github.com/users/elvarb/orgs","repos_url":"https://api.github.com/users/elvarb/repos","events_url":"https://api.github.com/users/elvarb/events{/privacy}","received_events_url":"https://api.github.com/users/elvarb/received_events","type":"User","site_admin":false},"created_at":"2014-10-22T10:13:43Z","updated_at":"2014-10-22T10:13:43Z","author_association":"NONE","body":"@bleskes Running version 1.3.2 on Windows\n\nHere are a few entries from the log file. I had to delete the Index to get it working so the log files are all I have at the moment. This is from one of three nodes in the cluster.\n\n```\n[2014-10-21 22:33:31,897][WARN ][cluster.action.shard     ] [S1-Elastic-P1] [logstash-2014.10.21][3] received shard failed for [logstash-2014.10.21][3], node[vHC7m1pKSkS7byI9iWZBCA], [P], s[INITIALIZING], indexUUID [1bMPcr0kTSa0h6sa0IHu9g], reason [Failed to start shard, message [IndexShardGatewayRecoveryException[[logstash-2014.10.21][3] failed to recover shard]; nested: ElasticsearchIllegalArgumentException[No version type match [115]]; ]]\n[2014-10-21 22:33:31,944][WARN ][indices.cluster          ] [S1-Elastic-P1] [logstash-2014.10.21][2] failed to start shard\norg.elasticsearch.index.gateway.IndexShardGatewayRecoveryException: [logstash-2014.10.21][2] failed to recover shard\n    at org.elasticsearch.index.gateway.local.LocalIndexShardGateway.recover(LocalIndexShardGateway.java:269)\n    at org.elasticsearch.index.gateway.IndexShardGatewayService$1.run(IndexShardGatewayService.java:132)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: org.elasticsearch.ElasticsearchIllegalArgumentException: No version type match [46]\n    at org.elasticsearch.index.VersionType.fromValue(VersionType.java:307)\n    at org.elasticsearch.index.translog.Translog$Create.readFrom(Translog.java:364)\n    at org.elasticsearch.index.translog.TranslogStreams.readTranslogOperation(TranslogStreams.java:52)\n    at org.elasticsearch.index.gateway.local.LocalIndexShardGateway.recover(LocalIndexShardGateway.java:241)\n    ... 4 more\n[2014-10-21 22:33:31,975][WARN ][cluster.action.shard     ] [S1-Elastic-P1] [logstash-2014.10.21][2] sending failed shard for [logstash-2014.10.21][2], node[llsky8FITxyp1R2H3Wjr4w], [P], s[INITIALIZING], indexUUID [1bMPcr0kTSa0h6sa0IHu9g], reason [Failed to start shard, message [IndexShardGatewayRecoveryException[[logstash-2014.10.21][2] failed to recover shard]; nested: ElasticsearchIllegalArgumentException[No version type match [46]]; ]]\n[2014-10-21 22:33:31,975][WARN ][cluster.action.shard     ] [S1-Elastic-P1] [logstash-2014.10.21][2] received shard failed for [logstash-2014.10.21][2], node[llsky8FITxyp1R2H3Wjr4w], [P], s[INITIALIZING], indexUUID [1bMPcr0kTSa0h6sa0IHu9g], reason [Failed to start shard, message [IndexShardGatewayRecoveryException[[logstash-2014.10.21][2] failed to recover shard]; nested: ElasticsearchIllegalArgumentException[No version type match [46]]; ]]\n[2014-10-21 22:33:32,365][WARN ][cluster.action.shard     ] [S1-Elastic-P1] [logstash-2014.10.21][1] received shard failed for [logstash-2014.10.21][1], node[vHC7m1pKSkS7byI9iWZBCA], [P], s[INITIALIZING], indexUUID [1bMPcr0kTSa0h6sa0IHu9g], reason [Failed to start shard, message [IndexShardGatewayRecoveryException[[logstash-2014.10.21][1] failed to recover shard]; nested: ElasticsearchIllegalArgumentException[No version type match [48]]; ]]\n[2014-10-21 22:33:32,365][WARN ][cluster.action.shard     ] [S1-Elastic-P1] [logstash-2014.10.21][2] received shard failed for [logstash-2014.10.21][2], node[vHC7m1pKSkS7byI9iWZBCA], [P], s[INITIALIZING], indexUUID [1bMPcr0kTSa0h6sa0IHu9g], reason [Failed to start shard, message [IndexShardGatewayRecoveryException[[logstash-2014.10.21][2] failed recovery]; nested: EngineCreationFailureException[[logstash-2014.10.21][2] failed to create engine]; nested: FileNotFoundException[No such file [_bgp.cfs]]; ]]\n[2014-10-21 22:33:32,381][WARN ][cluster.action.shard     ] [S1-Elastic-P1] [logstash-2014.10.21][2] received shard failed for [logstash-2014.10.21][2], node[vHC7m1pKSkS7byI9iWZBCA], [P], s[INITIALIZING], indexUUID [1bMPcr0kTSa0h6sa0IHu9g], reason [master [S1-Elastic-P1][llsky8FITxyp1R2H3Wjr4w][S1-Elastic-P1][inet[/172.25.127.183:9300]]{rack=S1, master=true} marked shard as initializing, but shard is marked as failed, resend shard failure]\n[2014-10-21 22:33:32,474][WARN ][cluster.action.shard     ] [S1-Elastic-P1] [logstash-2014.10.21][0] received shard failed for [logstash-2014.10.21][0], node[vHC7m1pKSkS7byI9iWZBCA], [P], s[INITIALIZING], indexUUID [1bMPcr0kTSa0h6sa0IHu9g], reason [Failed to start shard, message [IndexShardGatewayRecoveryException[[logstash-2014.10.21][0] failed to recover shard]; nested: ElasticsearchIllegalArgumentException[No version type match [49]]; ]]\n\n```\n\nIn Kopf I could see the shards pop in as \"recovering\" in one node, then disappearing and reappearing on a different node, then disappearing again to show up on the first node. Each time this happened the total size for the Index would jump up and down. For me that indicates that when doing a total index size it adds up the total size for all shards and the shards are showing up on each nodes with different sizes.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/60095536","html_url":"https://github.com/elastic/elasticsearch/issues/6569#issuecomment-60095536","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6569","id":60095536,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMDk1NTM2","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-10-22T14:42:44Z","updated_at":"2014-10-22T14:42:44Z","author_association":"CONTRIBUTOR","body":"It seems like the original issue has been fixed in #7455  I think it can be closed @bleskes but I'd like to have @dakrone to look at the translog problem here\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/60098793","html_url":"https://github.com/elastic/elasticsearch/issues/6569#issuecomment-60098793","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6569","id":60098793,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMDk4Nzkz","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2014-10-22T15:01:51Z","updated_at":"2014-10-22T15:01:51Z","author_association":"MEMBER","body":"The `ElasticsearchIllegalArgumentException: No version type match [46]` prior to the 1.4 release (which has translog checksums) indicates a corrupted translog. If the disk did fill up it's possible that the translog that was written got corrupted.\n\nIn this situation the translog for that shard should be moved out of the way (so local recovery can resume), then any operations inside of the translog can be extracted manually and resubmitted to ensure they were not lost. The translog is a file named `translog-123456` (it will be a different number instead of 123456) inside the data directory for a shard, for instance, if my cluster is named \"elasticsearch\" and the index is called \"test\", it would look like:\n\n```\n<data location>/elasticsearch/nodes/0/indices/test/<shardnum>/translog/translog-1413798960374\n```\n\nIn your case the index is `logstash-2014.10.21` and the shardnum is 2.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68393615","html_url":"https://github.com/elastic/elasticsearch/issues/6569#issuecomment-68393615","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6569","id":68393615,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzkzNjE1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-30T20:16:17Z","updated_at":"2014-12-30T20:16:17Z","author_association":"CONTRIBUTOR","body":"Sounds like this can be closed\n","performed_via_github_app":null}]