{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/44870","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44870/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44870/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44870/events","html_url":"https://github.com/elastic/elasticsearch/issues/44870","id":472983504,"node_id":"MDU6SXNzdWU0NzI5ODM1MDQ=","number":44870,"title":"Watcher / Reporting interval may fail to parse correctly","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"labels":[{"id":912845062,"node_id":"MDU6TGFiZWw5MTI4NDUwNjI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Watcher","name":":Core/Features/Watcher","color":"0e8a16","default":false,"description":""},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-07-25T17:27:03Z","updated_at":"2019-10-06T20:43:58Z","closed_at":"2019-10-06T20:43:57Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"```\r\nPUT _watcher/watch/foo\r\n{\r\n  \"trigger\": {\r\n    \"schedule\": {\r\n      \"interval\": \"1h\"\r\n    }\r\n  },\r\n  \"actions\": {\r\n    \"email_admin\": {\r\n      \"email\": {\r\n        \"to\": \"example@example.com\",\r\n        \"subject\": \"Monitoring Report\",\r\n        \"attachments\": {\r\n          \"report.csv\": {\r\n            \"reporting\": {\r\n              \"url\": \"https://example.com\",\r\n              \"retries\": 10,\r\n              \"interval\": \"66s\"\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nGET _watcher/watch/foo\r\n```\r\nresults in \r\n```\r\n{\r\n  \"error\": {\r\n    \"root_cause\": [\r\n      {\r\n        \"type\": \"x_content_parse_exception\",\r\n        \"reason\": \"[1:239] [reporting_attachment] failed to parse field [interval]\"\r\n      }\r\n    ],\r\n    \"type\": \"x_content_parse_exception\",\r\n    \"reason\": \"[1:239] [reporting_attachment] failed to parse field [interval]\",\r\n    \"caused_by\": {\r\n      \"type\": \"illegal_argument_exception\",\r\n      \"reason\": \"failed to parse [1.1m], fractional time values are not supported\",\r\n      \"caused_by\": {\r\n        \"type\": \"number_format_exception\",\r\n        \"reason\": \"For input string: \\\"1.1\\\"\"\r\n      }\r\n    }\r\n  },\r\n  \"status\": 400\r\n}\r\n```\r\nThis only applies the `interval` inside the `attachments.reporting`.  The fix here should be to apply the same parsing logic for `trigger.interval.schedule` interval. (there is a slight difference such that `attachments.reporting` is a settings override. ","closed_by":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"performed_via_github_app":null}