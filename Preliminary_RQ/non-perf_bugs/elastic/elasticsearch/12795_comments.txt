[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129890496","html_url":"https://github.com/elastic/elasticsearch/issues/12795#issuecomment-129890496","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12795","id":129890496,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTg5MDQ5Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T14:04:01Z","updated_at":"2015-08-11T14:04:01Z","author_association":"CONTRIBUTOR","body":"Hi @Bondza \n\nGroovy uses BigDecimal for these operations, which are cast to strings by Elasticsearch.  This will work too:\n\n```\nctx._source.ctr = (double) ctx._source.clicks / ctx._source.loads;\n```\n\n@dakrone Was #6609 supposed to fix this? if not, is it fixable?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129893565","html_url":"https://github.com/elastic/elasticsearch/issues/12795#issuecomment-129893565","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12795","id":129893565,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTg5MzU2NQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T14:08:38Z","updated_at":"2015-08-11T14:08:38Z","author_association":"MEMBER","body":"#6609 was only to fix constants (like `1.3`) being compiled as BigDecimals by Groovy, I think this is the Groovy math itself doing this on division.\n\nI'm not sure if it's fixable, I can do some research to see if it is.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129955671","html_url":"https://github.com/elastic/elasticsearch/issues/12795#issuecomment-129955671","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12795","id":129955671,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTk1NTY3MQ==","user":{"login":"Bondza","id":1886115,"node_id":"MDQ6VXNlcjE4ODYxMTU=","avatar_url":"https://avatars1.githubusercontent.com/u/1886115?v=4","gravatar_id":"","url":"https://api.github.com/users/Bondza","html_url":"https://github.com/Bondza","followers_url":"https://api.github.com/users/Bondza/followers","following_url":"https://api.github.com/users/Bondza/following{/other_user}","gists_url":"https://api.github.com/users/Bondza/gists{/gist_id}","starred_url":"https://api.github.com/users/Bondza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bondza/subscriptions","organizations_url":"https://api.github.com/users/Bondza/orgs","repos_url":"https://api.github.com/users/Bondza/repos","events_url":"https://api.github.com/users/Bondza/events{/privacy}","received_events_url":"https://api.github.com/users/Bondza/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T16:26:23Z","updated_at":"2015-08-11T16:26:23Z","author_association":"NONE","body":"I thought that it might have something to do with how Elasticsearch handles BigDecimal. Unfortunately it made my query scripts cause an exception later on.\n\nIt is a bit confusing though, since the field which it assigns is not of type string. It thought that would cause an exception since there is a mapping set for that field?\n\nIt would be awesome if it was fixable! :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/130570176","html_url":"https://github.com/elastic/elasticsearch/issues/12795#issuecomment-130570176","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12795","id":130570176,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMDU3MDE3Ng==","user":{"login":"masaruh","id":572174,"node_id":"MDQ6VXNlcjU3MjE3NA==","avatar_url":"https://avatars3.githubusercontent.com/u/572174?v=4","gravatar_id":"","url":"https://api.github.com/users/masaruh","html_url":"https://github.com/masaruh","followers_url":"https://api.github.com/users/masaruh/followers","following_url":"https://api.github.com/users/masaruh/following{/other_user}","gists_url":"https://api.github.com/users/masaruh/gists{/gist_id}","starred_url":"https://api.github.com/users/masaruh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/masaruh/subscriptions","organizations_url":"https://api.github.com/users/masaruh/orgs","repos_url":"https://api.github.com/users/masaruh/repos","events_url":"https://api.github.com/users/masaruh/events{/privacy}","received_events_url":"https://api.github.com/users/masaruh/received_events","type":"User","site_admin":false},"created_at":"2015-08-13T08:07:51Z","updated_at":"2015-08-13T08:07:51Z","author_association":"CONTRIBUTOR","body":"Groovy returns `BigDecimal` for integer division (http://docs.groovy-lang.org/latest/html/documentation/core-syntax.html#integer_division) and it's serialized as `String` as described in #12385.\n\nBest bet would be to cast/parse yourself...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/130690027","html_url":"https://github.com/elastic/elasticsearch/issues/12795#issuecomment-130690027","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12795","id":130690027,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMDY5MDAyNw==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2015-08-13T14:11:44Z","updated_at":"2015-08-13T14:11:44Z","author_association":"MEMBER","body":"Yes, I tried to find a way where we could automatically change Groovy's integer division, but unfortunately it doesn't look like there's a programmatic way to do it from a Transformer (unlike the constant expressions where we can).\n\nI think right now best bet is to cast to `(double)` as Clint mentioned.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/130721447","html_url":"https://github.com/elastic/elasticsearch/issues/12795#issuecomment-130721447","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12795","id":130721447,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMDcyMTQ0Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-08-13T14:58:31Z","updated_at":"2015-08-13T14:58:31Z","author_association":"CONTRIBUTOR","body":"thanks @dakrone . Closing\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/131010847","html_url":"https://github.com/elastic/elasticsearch/issues/12795#issuecomment-131010847","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12795","id":131010847,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMTAxMDg0Nw==","user":{"login":"Bondza","id":1886115,"node_id":"MDQ6VXNlcjE4ODYxMTU=","avatar_url":"https://avatars1.githubusercontent.com/u/1886115?v=4","gravatar_id":"","url":"https://api.github.com/users/Bondza","html_url":"https://github.com/Bondza","followers_url":"https://api.github.com/users/Bondza/followers","following_url":"https://api.github.com/users/Bondza/following{/other_user}","gists_url":"https://api.github.com/users/Bondza/gists{/gist_id}","starred_url":"https://api.github.com/users/Bondza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bondza/subscriptions","organizations_url":"https://api.github.com/users/Bondza/orgs","repos_url":"https://api.github.com/users/Bondza/repos","events_url":"https://api.github.com/users/Bondza/events{/privacy}","received_events_url":"https://api.github.com/users/Bondza/received_events","type":"User","site_admin":false},"created_at":"2015-08-14T07:55:22Z","updated_at":"2015-08-14T07:55:22Z","author_association":"NONE","body":"Alright, casting works fine so I'll remember this the next time I need to do some scripting in Elasticsearch.\n\nThanks for the help!\n","performed_via_github_app":null}]