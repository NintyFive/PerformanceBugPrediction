[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312926451","html_url":"https://github.com/elastic/elasticsearch/issues/25539#issuecomment-312926451","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25539","id":312926451,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjkyNjQ1MQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-07-04T17:53:52Z","updated_at":"2017-07-04T17:53:52Z","author_association":"CONTRIBUTOR","body":"Can you share a recreation of this issue?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312936139","html_url":"https://github.com/elastic/elasticsearch/issues/25539#issuecomment-312936139","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25539","id":312936139,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjkzNjEzOQ==","user":{"login":"nfvs","id":163961,"node_id":"MDQ6VXNlcjE2Mzk2MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/163961?v=4","gravatar_id":"","url":"https://api.github.com/users/nfvs","html_url":"https://github.com/nfvs","followers_url":"https://api.github.com/users/nfvs/followers","following_url":"https://api.github.com/users/nfvs/following{/other_user}","gists_url":"https://api.github.com/users/nfvs/gists{/gist_id}","starred_url":"https://api.github.com/users/nfvs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nfvs/subscriptions","organizations_url":"https://api.github.com/users/nfvs/orgs","repos_url":"https://api.github.com/users/nfvs/repos","events_url":"https://api.github.com/users/nfvs/events{/privacy}","received_events_url":"https://api.github.com/users/nfvs/received_events","type":"User","site_admin":false},"created_at":"2017-07-04T19:07:12Z","updated_at":"2017-07-04T19:07:55Z","author_association":"NONE","body":"```\r\nPUT /_template/data-template\r\n{\r\n  \"template\": \"data-*\",\r\n  \"order\": 10,\r\n  \"settings\": {\r\n    \"index.mapping.ignore_malformed\": true\r\n  },\r\n  \"mappings\": {\r\n    \"doc1\": {\r\n      \"properties\": {\r\n        \"owner\": \"text\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nFollowed by\r\n\r\n```\r\nPUT /_template/data-template\r\n{\r\n  \"template\": \"data-*\",\r\n  \"order\": 10,\r\n  \"settings\": {\r\n    \"index.mapping.ignore_malformed\": true\r\n  },\r\n  \"mappings\": {\r\n    \"doc1\": {\r\n      \"properties\": {\r\n        \"owner\": \"keyword\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nI should point out that there are indices which were created by that template, and they contain data; however, I was under the impression that the template should only influence **new** indices, not existing ones.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/319908349","html_url":"https://github.com/elastic/elasticsearch/issues/25539#issuecomment-319908349","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25539","id":319908349,"node_id":"MDEyOklzc3VlQ29tbWVudDMxOTkwODM0OQ==","user":{"login":"PnPie","id":7472431,"node_id":"MDQ6VXNlcjc0NzI0MzE=","avatar_url":"https://avatars3.githubusercontent.com/u/7472431?v=4","gravatar_id":"","url":"https://api.github.com/users/PnPie","html_url":"https://github.com/PnPie","followers_url":"https://api.github.com/users/PnPie/followers","following_url":"https://api.github.com/users/PnPie/following{/other_user}","gists_url":"https://api.github.com/users/PnPie/gists{/gist_id}","starred_url":"https://api.github.com/users/PnPie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PnPie/subscriptions","organizations_url":"https://api.github.com/users/PnPie/orgs","repos_url":"https://api.github.com/users/PnPie/repos","events_url":"https://api.github.com/users/PnPie/events{/privacy}","received_events_url":"https://api.github.com/users/PnPie/received_events","type":"User","site_admin":false},"created_at":"2017-08-03T08:48:42Z","updated_at":"2017-08-03T08:49:45Z","author_association":"CONTRIBUTOR","body":"Hello,\r\n\r\nFirstly, the syntax is not really correct, it should be rather like this:\r\n```\r\nPUT /_template/data-template\r\n{\r\n  \"template\": \"data-*\",\r\n  \"order\": 10,\r\n  \"settings\": {\r\n    \"index.mapping.ignore_malformed\": true\r\n  },\r\n  \"mappings\": {\r\n    \"doc1\": {\r\n      \"properties\": {\r\n        \"owner\": {\r\n          \"type\": \"keyword\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nAnd I'm on ES 5.5.1, update of template mappings work well for me.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/319909128","html_url":"https://github.com/elastic/elasticsearch/issues/25539#issuecomment-319909128","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25539","id":319909128,"node_id":"MDEyOklzc3VlQ29tbWVudDMxOTkwOTEyOA==","user":{"login":"nfvs","id":163961,"node_id":"MDQ6VXNlcjE2Mzk2MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/163961?v=4","gravatar_id":"","url":"https://api.github.com/users/nfvs","html_url":"https://github.com/nfvs","followers_url":"https://api.github.com/users/nfvs/followers","following_url":"https://api.github.com/users/nfvs/following{/other_user}","gists_url":"https://api.github.com/users/nfvs/gists{/gist_id}","starred_url":"https://api.github.com/users/nfvs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nfvs/subscriptions","organizations_url":"https://api.github.com/users/nfvs/orgs","repos_url":"https://api.github.com/users/nfvs/repos","events_url":"https://api.github.com/users/nfvs/events{/privacy}","received_events_url":"https://api.github.com/users/nfvs/received_events","type":"User","site_admin":false},"created_at":"2017-08-03T08:52:02Z","updated_at":"2017-08-03T08:52:02Z","author_association":"NONE","body":"@PnPie but do you have any indices using that property? It seems to only fail for me if there are indices using that, which seems strange since current indices shouldn't affect template mappings.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/319920069","html_url":"https://github.com/elastic/elasticsearch/issues/25539#issuecomment-319920069","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25539","id":319920069,"node_id":"MDEyOklzc3VlQ29tbWVudDMxOTkyMDA2OQ==","user":{"login":"PnPie","id":7472431,"node_id":"MDQ6VXNlcjc0NzI0MzE=","avatar_url":"https://avatars3.githubusercontent.com/u/7472431?v=4","gravatar_id":"","url":"https://api.github.com/users/PnPie","html_url":"https://github.com/PnPie","followers_url":"https://api.github.com/users/PnPie/followers","following_url":"https://api.github.com/users/PnPie/following{/other_user}","gists_url":"https://api.github.com/users/PnPie/gists{/gist_id}","starred_url":"https://api.github.com/users/PnPie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PnPie/subscriptions","organizations_url":"https://api.github.com/users/PnPie/orgs","repos_url":"https://api.github.com/users/PnPie/repos","events_url":"https://api.github.com/users/PnPie/events{/privacy}","received_events_url":"https://api.github.com/users/PnPie/received_events","type":"User","site_admin":false},"created_at":"2017-08-03T09:37:54Z","updated_at":"2017-08-03T09:38:38Z","author_association":"CONTRIBUTOR","body":"@nfvs Yeah I just tried it works well even if I created indices using that templates. And just as the templates only impact indices at creation time, so the creation of indices should not have an influence on templates I suppose. And your error message looks like you are changing the mapping of index instead of the templates.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/320013182","html_url":"https://github.com/elastic/elasticsearch/issues/25539#issuecomment-320013182","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25539","id":320013182,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMDAxMzE4Mg==","user":{"login":"nfvs","id":163961,"node_id":"MDQ6VXNlcjE2Mzk2MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/163961?v=4","gravatar_id":"","url":"https://api.github.com/users/nfvs","html_url":"https://github.com/nfvs","followers_url":"https://api.github.com/users/nfvs/followers","following_url":"https://api.github.com/users/nfvs/following{/other_user}","gists_url":"https://api.github.com/users/nfvs/gists{/gist_id}","starred_url":"https://api.github.com/users/nfvs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nfvs/subscriptions","organizations_url":"https://api.github.com/users/nfvs/orgs","repos_url":"https://api.github.com/users/nfvs/repos","events_url":"https://api.github.com/users/nfvs/events{/privacy}","received_events_url":"https://api.github.com/users/nfvs/received_events","type":"User","site_admin":false},"created_at":"2017-08-03T15:59:52Z","updated_at":"2017-08-03T15:59:52Z","author_association":"NONE","body":"> And your error message looks like you are changing the mapping of index instead of the templates.\r\n\r\nI know, which is what I find weird. By the reply you can see that it's correct, since it contains `[indices:admin/template/put]`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/320896469","html_url":"https://github.com/elastic/elasticsearch/issues/25539#issuecomment-320896469","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25539","id":320896469,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMDg5NjQ2OQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-08-08T09:03:09Z","updated_at":"2017-08-08T09:03:09Z","author_association":"CONTRIBUTOR","body":"I tried the following recreation and things work as expected:\r\n\r\n```\r\nPUT /_template/data-template\r\n{\r\n  \"template\": \"data-*\",\r\n  \"order\": 10,\r\n  \"settings\": {\r\n    \"index.mapping.ignore_malformed\": true\r\n  },\r\n  \"mappings\": {\r\n    \"doc1\": {\r\n      \"properties\": {\r\n        \"owner\": {\r\n          \"type\": \"text\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nPUT data-1/doc1/1\r\n{\r\n  \"owner\": \"foo bar\"\r\n}\r\n\r\nPUT /_template/data-template\r\n{\r\n  \"template\": \"data-*\",\r\n  \"order\": 10,\r\n  \"settings\": {\r\n    \"index.mapping.ignore_malformed\": true\r\n  },\r\n  \"mappings\": {\r\n    \"doc1\": {\r\n      \"properties\": {\r\n        \"owner\": {\r\n          \"type\": \"keyword\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nPUT data-2/doc1/1\r\n{\r\n  \"owner\": \"foo bar\"\r\n}\r\n\r\nGET data-1,data-2/_mapping\r\n```\r\n\r\nwhich returns\r\n\r\n```\r\n{\r\n  \"data-2\": {\r\n    \"mappings\": {\r\n      \"doc1\": {\r\n        \"properties\": {\r\n          \"owner\": {\r\n            \"type\": \"keyword\"\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"data-1\": {\r\n    \"mappings\": {\r\n      \"doc1\": {\r\n        \"properties\": {\r\n          \"owner\": {\r\n            \"type\": \"text\"\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nCan you confirm that this recreation fails in your environment?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/329097988","html_url":"https://github.com/elastic/elasticsearch/issues/25539#issuecomment-329097988","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25539","id":329097988,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTA5Nzk4OA==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2017-09-13T08:35:00Z","updated_at":"2017-09-13T08:35:00Z","author_association":"MEMBER","body":"No further feedback. If you are able to recreate this issue using @jpountz's recreation script above then please comment and we can reopen this issue.","performed_via_github_app":null}]