{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1578","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1578/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1578/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1578/events","html_url":"https://github.com/elastic/elasticsearch/issues/1578","id":2690114,"node_id":"MDU6SXNzdWUyNjkwMTE0","number":1578,"title":"Allow 'ignore_unmapped' to process field mappings on each shard","user":{"login":"bryangreen","id":575000,"node_id":"MDQ6VXNlcjU3NTAwMA==","avatar_url":"https://avatars2.githubusercontent.com/u/575000?v=4","gravatar_id":"","url":"https://api.github.com/users/bryangreen","html_url":"https://github.com/bryangreen","followers_url":"https://api.github.com/users/bryangreen/followers","following_url":"https://api.github.com/users/bryangreen/following{/other_user}","gists_url":"https://api.github.com/users/bryangreen/gists{/gist_id}","starred_url":"https://api.github.com/users/bryangreen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bryangreen/subscriptions","organizations_url":"https://api.github.com/users/bryangreen/orgs","repos_url":"https://api.github.com/users/bryangreen/repos","events_url":"https://api.github.com/users/bryangreen/events{/privacy}","received_events_url":"https://api.github.com/users/bryangreen/received_events","type":"User","site_admin":false},"labels":[{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2011-12-30T17:11:34Z","updated_at":"2014-08-01T16:38:49Z","closed_at":"2014-08-01T16:38:49Z","author_association":"NONE","active_lock_reason":null,"body":"The 'ignore_unmapped' feature needs to poll the mapping on each shard rather than going with an all/nothing assumption for the field.\n\nIn reference to: https://groups.google.com/group/elasticsearch/browse_thread/thread/4b677ad9e88b1967\nRelated to issue 1558: https://github.com/elasticsearch/elasticsearch/issues/1558\n\nInitial setup:\nFails with ReduceSearchPhaseException[Failed to execute phase [fetch], [reduce] ]; nested: \nurl: kk,system,library/statustype/_search \nquery: {\"from\":0,\"size\":999,\"sort\":{\"order_no\": {\"order\":\"asc\",\"ignore_unmapped\":true}}} \nThe \"statustype\" item type only exists in the system and library indexes but not in the kk index. \nThe query executes against the kk index and either the system or library index BUT when all three are together the search fails. \nThe title field is defined in the statustype item mapping and exists in all instances. \nRemoving the sort of the query dsl causes the search to succeed. \nIf I remove the \"ignore_unmapped\" part of the sort then I receive errors from the kk index but the search hits still come back for the other indexes... \nPreferably, the \"ignore_unmapped\" feature should allow all data to be returned but provide a cascaded sort feature whereby ignoring certain sort keys but still continuing with the next sort field (if available.) \n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}