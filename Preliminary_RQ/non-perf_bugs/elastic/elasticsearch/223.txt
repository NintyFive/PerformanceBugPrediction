{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/223","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/223/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/223/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/223/events","html_url":"https://github.com/elastic/elasticsearch/issues/223","id":222428,"node_id":"MDU6SXNzdWUyMjI0Mjg=","number":223,"title":"Gateway: Allow to configure a `recovery_after_time` and `recover_after_nodes`","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"labels":[{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":34099,"node_id":"MDU6TGFiZWwzNDA5OQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.09.0","name":"v0.09.0","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2010-06-14T22:25:27Z","updated_at":"2010-06-18T02:32:27Z","closed_at":"2010-06-15T05:26:01Z","author_association":"MEMBER","active_lock_reason":null,"body":"Currently, when the first master starts up, it will recover the cluster state from the gateway and start to create indices immediately. This means that the first node (first master) will start allocating a lot of shards to itself (since other nodes might take time to join the cluster to share the load).\n\nIt would make sense to delay the recovery either by time or by cluster size. For example, to delay the recovery by time set:\n\n```\ngateway:\n  recover_after_time: 1m\n```\n\nAnd to delay recovery after a certain cluster size has been reached:\n\n```\ngateway:\n  recover_after_nodes: 5\n```\n\nNote, the two flags can be combined.\n","closed_by":null,"performed_via_github_app":null}