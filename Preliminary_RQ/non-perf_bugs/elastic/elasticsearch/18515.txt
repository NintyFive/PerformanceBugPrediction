{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/18515","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18515/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18515/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18515/events","html_url":"https://github.com/elastic/elasticsearch/issues/18515","id":156240409,"node_id":"MDU6SXNzdWUxNTYyNDA0MDk=","number":18515,"title":"Non descriptive enough error when reindexing incorrect data","user":{"login":"marclop","id":7286993,"node_id":"MDQ6VXNlcjcyODY5OTM=","avatar_url":"https://avatars1.githubusercontent.com/u/7286993?v=4","gravatar_id":"","url":"https://api.github.com/users/marclop","html_url":"https://github.com/marclop","followers_url":"https://api.github.com/users/marclop/followers","following_url":"https://api.github.com/users/marclop/following{/other_user}","gists_url":"https://api.github.com/users/marclop/gists{/gist_id}","starred_url":"https://api.github.com/users/marclop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marclop/subscriptions","organizations_url":"https://api.github.com/users/marclop/orgs","repos_url":"https://api.github.com/users/marclop/repos","events_url":"https://api.github.com/users/marclop/events{/privacy}","received_events_url":"https://api.github.com/users/marclop/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"},{"id":141145460,"node_id":"MDU6TGFiZWwxNDExNDU0NjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Mapping","name":":Search/Mapping","color":"0e8a16","default":false,"description":"How fields should be indexed"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":92913858,"node_id":"MDU6TGFiZWw5MjkxMzg1OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/good%20first%20issue","name":"good first issue","color":"07569b","default":true,"description":"low hanging fruit"},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-05-23T09:45:31Z","updated_at":"2018-03-14T02:13:05Z","closed_at":"2018-03-14T02:13:05Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: 2.3.1\n**JVM version**: 1.7.0_95\n**OS version**: Amazon Linux 2015.09\n\n**Description of the problem including expected versus actual behaviour**:\n\nReindexing an index fails (when reindexing for the second time) because inserted types are wrong from the mapping (Field value is `\"\"` (`string` type) when it should be `null`(`date` type), error thrown is: `mapper_parsing_exception`. The thrown error should be something like: _Failed inserting `\"\"` into a `date` field_, I spend quite some time until I realised what was wrong, full error is:\n\n``` json\n{\n  \"took\": 294944,\n  \"timed_out\": false,\n  \"total\": 16852802,\n  \"updated\": 0,\n  \"created\": 40,\n  \"batches\": 7190,\n  \"version_conflicts\": 718959,\n  \"noops\": 0,\n  \"retries\": 0,\n  \"failures\": [\n    {\n      \"index\": \"logstash-2016.05.06\",\n      \"type\": \"syslog\",\n      \"id\": \"AVSE8LgGhfFJ1TNSUrWP\",\n      \"cause\": {\n        \"type\": \"mapper_parsing_exception\",\n        \"reason\": \"failed to parse [path.field_name]\",\n        \"caused_by\": {\n          \"type\": \"illegal_argument_exception\",\n          \"reason\": \"Invalid format: \"\"\"\n        }\n      },\n      \"status\": 400\n    }\n  ]\n}\n```\n\nThe thing is, on the first instance, it should have told me this error (indexing time), then if that did not pop up, it should have let me know about the problem on the first reindex operator (from `logstash-2016.05.06` to `logstash-new` and thrown a more descriptive error) not on the 2nd time I reindexed (from `logstash-new` to `logstash-2016.05.06` which was deleted and recreated again with proper index templates and mappings and no data)\n\n**Steps to reproduce**:\n1. Have a `date` field with a `\"\"` value\n2. Reindex index A to index B\n3. Reindex index B to index C\n\n**`_reindex` operation run**\n\n``` json\n{\n  \"conflicts\": \"proceed\",\n  \"source\": {\n    \"index\": \"logstash-new\",\n    \"type\": \"syslog\"\n  },\n  \"dest\": {\n    \"index\": \"logstash-2016.05.06\",\n    \"op_type\": \"create\"\n  }\n}\n```\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}