[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/502750388","html_url":"https://github.com/elastic/elasticsearch/issues/43289#issuecomment-502750388","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43289","id":502750388,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjc1MDM4OA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-06-17T16:13:45Z","updated_at":"2019-06-17T16:13:45Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/502752594","html_url":"https://github.com/elastic/elasticsearch/issues/43289#issuecomment-502752594","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43289","id":502752594,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjc1MjU5NA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-06-17T16:19:52Z","updated_at":"2019-06-17T16:19:52Z","author_association":"CONTRIBUTOR","body":"I am pretty sure the problem here is that the random node that was shut down was the master node and when a new master node was elected it had an empty ML memory tracker.  This led to the assignment of the job to a new node being deferred until after a memory tracker refresh.  Then the job should get reassigned either when there is another cluster state update or when a timer triggers.  There weren't any cluster state updates after the memory refresh completed (because it's a test cluster that's doing nothing except our test) and the default timer interval is 30 seconds, which is less than the time we wait for the job to be assigned.\r\n\r\nSo, there are two possible solutions: either increase the length of time we wait for the job to be assigned to 31 seconds or decrease the timer interval for periodic persistent task assignment rechecks to 1 second.","performed_via_github_app":null}]