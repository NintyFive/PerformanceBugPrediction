[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42885155","html_url":"https://github.com/elastic/elasticsearch/issues/6136#issuecomment-42885155","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6136","id":42885155,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODg1MTU1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-05-12T20:40:40Z","updated_at":"2014-05-12T20:40:40Z","author_association":"CONTRIBUTOR","body":"Hi @VKhazinGladiator \n\nThis issues list is for bugs and feature requests. Please ask questions about how to use Elasticsearch in the forum instead.\n\nthanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42885530","html_url":"https://github.com/elastic/elasticsearch/issues/6136#issuecomment-42885530","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6136","id":42885530,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODg1NTMw","user":{"login":"VKhazinGladiator","id":4368142,"node_id":"MDQ6VXNlcjQzNjgxNDI=","avatar_url":"https://avatars3.githubusercontent.com/u/4368142?v=4","gravatar_id":"","url":"https://api.github.com/users/VKhazinGladiator","html_url":"https://github.com/VKhazinGladiator","followers_url":"https://api.github.com/users/VKhazinGladiator/followers","following_url":"https://api.github.com/users/VKhazinGladiator/following{/other_user}","gists_url":"https://api.github.com/users/VKhazinGladiator/gists{/gist_id}","starred_url":"https://api.github.com/users/VKhazinGladiator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VKhazinGladiator/subscriptions","organizations_url":"https://api.github.com/users/VKhazinGladiator/orgs","repos_url":"https://api.github.com/users/VKhazinGladiator/repos","events_url":"https://api.github.com/users/VKhazinGladiator/events{/privacy}","received_events_url":"https://api.github.com/users/VKhazinGladiator/received_events","type":"User","site_admin":false},"created_at":"2014-05-12T20:43:48Z","updated_at":"2014-05-12T20:43:48Z","author_association":"NONE","body":"Could you please advise how it is not a bug?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42886577","html_url":"https://github.com/elastic/elasticsearch/issues/6136#issuecomment-42886577","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6136","id":42886577,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODg2NTc3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-05-12T20:52:23Z","updated_at":"2014-05-12T20:52:23Z","author_association":"CONTRIBUTOR","body":"Because a `.` is not even indexed.  It is removed by the analyzer.  \n\nReading this will help you to understand why: http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/getting-started.html\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42890260","html_url":"https://github.com/elastic/elasticsearch/issues/6136#issuecomment-42890260","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6136","id":42890260,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODkwMjYw","user":{"login":"VKhazinGladiator","id":4368142,"node_id":"MDQ6VXNlcjQzNjgxNDI=","avatar_url":"https://avatars3.githubusercontent.com/u/4368142?v=4","gravatar_id":"","url":"https://api.github.com/users/VKhazinGladiator","html_url":"https://github.com/VKhazinGladiator","followers_url":"https://api.github.com/users/VKhazinGladiator/followers","following_url":"https://api.github.com/users/VKhazinGladiator/following{/other_user}","gists_url":"https://api.github.com/users/VKhazinGladiator/gists{/gist_id}","starred_url":"https://api.github.com/users/VKhazinGladiator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VKhazinGladiator/subscriptions","organizations_url":"https://api.github.com/users/VKhazinGladiator/orgs","repos_url":"https://api.github.com/users/VKhazinGladiator/repos","events_url":"https://api.github.com/users/VKhazinGladiator/events{/privacy}","received_events_url":"https://api.github.com/users/VKhazinGladiator/received_events","type":"User","site_admin":false},"created_at":"2014-05-12T21:24:00Z","updated_at":"2014-05-12T21:25:01Z","author_association":"NONE","body":"I appreciate that . (dot) is not even indexed and I understand that searching for .(dot) never returns results as one of my correct results 'Title:.' above demonstrates.\n\nWhat does not see to behave as I expect is a combined criteria 'Title:. AND ContentStatus:1' that seem to match all the results for 'ContentStatus:1' while ignoring the 'Title:.' portion of the query.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42892021","html_url":"https://github.com/elastic/elasticsearch/issues/6136#issuecomment-42892021","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6136","id":42892021,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODkyMDIx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-05-12T21:40:10Z","updated_at":"2014-05-12T21:40:10Z","author_association":"CONTRIBUTOR","body":"Hi @VKhazinGladiator \n\nOK, I've reformatted your JSON to make it easier to read. The details of what you were trying to explain were not easily readable before.\n\nThis is just how the query string query works.  If analyzes the query string for each field and builds a query clause out of the terms produced by the analyzer.  You can see this in action with the validate-query API, eg:\n\n```\nPUT /test\nGET /test/_validate/query?explain\n{\n  \"query\": {\n    \"query_string\": {\n      \"query\": \"title:.\"\n    }\n  }\n}\n```\n\nReturns an explanation of `\"\"`, which is mapped to the `MatchNoDocsQuery`.\n\nThis one, however:\n\n```\nGET /test/_validate/query?explain\n{\n  \"query\": {\n    \"query_string\": {\n      \"query\": \"title:. AND foo:bar\"\n    }\n  }\n}\n```\n\nreturns an explanation of `\"foo:bar\"`. Note how it has removed the `title` clause because no terms were generated.  \n\nElasticsearch uses the Lucene query parser syntax for this query, and it is a complicated beast.  It is sensitive to syntax errors, surprising interpretation of boolean logic, and a host of other gotchas. \n\nFrankly, it is much better to write real queries with the query DSL. For instance, here is the explanation for the equivalent query in the DSL:\n\n```\nGET /test/_validate/query?explain\n{\n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {\n          \"match\": {\n            \"title\": \".\"\n          }\n        },\n        {\n          \"match\": {\n            \"foo\": \"bar\"\n          }\n        }\n      ]\n    }\n  }\n}\n```\n\nwhich returns the explanation: `\"+MatchNoDocsQuery +foo:bar\"`, which is exactly what you want.\n\nI definitely wouldn't expose the `query_string` query directly to your users.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42892701","html_url":"https://github.com/elastic/elasticsearch/issues/6136#issuecomment-42892701","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6136","id":42892701,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODkyNzAx","user":{"login":"VKhazinGladiator","id":4368142,"node_id":"MDQ6VXNlcjQzNjgxNDI=","avatar_url":"https://avatars3.githubusercontent.com/u/4368142?v=4","gravatar_id":"","url":"https://api.github.com/users/VKhazinGladiator","html_url":"https://github.com/VKhazinGladiator","followers_url":"https://api.github.com/users/VKhazinGladiator/followers","following_url":"https://api.github.com/users/VKhazinGladiator/following{/other_user}","gists_url":"https://api.github.com/users/VKhazinGladiator/gists{/gist_id}","starred_url":"https://api.github.com/users/VKhazinGladiator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VKhazinGladiator/subscriptions","organizations_url":"https://api.github.com/users/VKhazinGladiator/orgs","repos_url":"https://api.github.com/users/VKhazinGladiator/repos","events_url":"https://api.github.com/users/VKhazinGladiator/events{/privacy}","received_events_url":"https://api.github.com/users/VKhazinGladiator/received_events","type":"User","site_admin":false},"created_at":"2014-05-12T21:47:04Z","updated_at":"2014-05-12T21:47:04Z","author_association":"NONE","body":"Thank you for the detailed comments! Let me re-group on what's next.\n\nP.S. I don't really see a cost-effective alternative exposing query functionality in open-ended Web Api where client app e.g. web app, mobile app, xbox app, and etc. compiles the query string based on its specific requirements. Asking client app to compose elastic search json query would be quite tedious and no less dangerous in my opinion.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42902120","html_url":"https://github.com/elastic/elasticsearch/issues/6136#issuecomment-42902120","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6136","id":42902120,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTAyMTIw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-05-12T23:41:46Z","updated_at":"2014-05-12T23:41:46Z","author_association":"CONTRIBUTOR","body":"You shouldn't be exposing Elasticsearch directly to the outside anyway. Why not put a proxy in front of it that knows how to parse query strings from your apps into something you're happy to pass to Elasticsearch?  Then you do it once for all apps, and at the same time you prevent them from running queries that could take down your server.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42959522","html_url":"https://github.com/elastic/elasticsearch/issues/6136#issuecomment-42959522","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6136","id":42959522,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTU5NTIy","user":{"login":"VKhazinGladiator","id":4368142,"node_id":"MDQ6VXNlcjQzNjgxNDI=","avatar_url":"https://avatars3.githubusercontent.com/u/4368142?v=4","gravatar_id":"","url":"https://api.github.com/users/VKhazinGladiator","html_url":"https://github.com/VKhazinGladiator","followers_url":"https://api.github.com/users/VKhazinGladiator/followers","following_url":"https://api.github.com/users/VKhazinGladiator/following{/other_user}","gists_url":"https://api.github.com/users/VKhazinGladiator/gists{/gist_id}","starred_url":"https://api.github.com/users/VKhazinGladiator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VKhazinGladiator/subscriptions","organizations_url":"https://api.github.com/users/VKhazinGladiator/orgs","repos_url":"https://api.github.com/users/VKhazinGladiator/repos","events_url":"https://api.github.com/users/VKhazinGladiator/events{/privacy}","received_events_url":"https://api.github.com/users/VKhazinGladiator/received_events","type":"User","site_admin":false},"created_at":"2014-05-13T14:10:15Z","updated_at":"2014-05-13T14:10:15Z","author_association":"NONE","body":"I do have a proxy in front of elastic search, the part I am trying to avoid is building a query language to 'parse query strings' as you have also suggested. So far I was happy with exposing lucene as the query language instead of building a custom implementation.\n","performed_via_github_app":null}]