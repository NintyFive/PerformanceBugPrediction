[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/39072909","html_url":"https://github.com/elastic/elasticsearch/issues/5483#issuecomment-39072909","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5483","id":39072909,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDcyOTA5","user":{"login":"hhoffstaette","id":499973,"node_id":"MDQ6VXNlcjQ5OTk3Mw==","avatar_url":"https://avatars2.githubusercontent.com/u/499973?v=4","gravatar_id":"","url":"https://api.github.com/users/hhoffstaette","html_url":"https://github.com/hhoffstaette","followers_url":"https://api.github.com/users/hhoffstaette/followers","following_url":"https://api.github.com/users/hhoffstaette/following{/other_user}","gists_url":"https://api.github.com/users/hhoffstaette/gists{/gist_id}","starred_url":"https://api.github.com/users/hhoffstaette/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhoffstaette/subscriptions","organizations_url":"https://api.github.com/users/hhoffstaette/orgs","repos_url":"https://api.github.com/users/hhoffstaette/repos","events_url":"https://api.github.com/users/hhoffstaette/events{/privacy}","received_events_url":"https://api.github.com/users/hhoffstaette/received_events","type":"User","site_admin":false},"created_at":"2014-03-31T10:14:49Z","updated_at":"2014-03-31T12:44:11Z","author_association":"CONTRIBUTOR","body":"The good news: I can reproduce this successfully - thanks for the detailed instructions.\n\nThe less good news is that it looks like a bug in MVEL's embedded ASM version:\nhttp://jira.codehaus.org/browse/MVEL-308\n\nThe bug manifests itself in that creating the document with availability=null works, but MVEL's ASM optimizer stumbles over the second update since it again contains availability=null.\nI'm not sure why this happens only once, but it does so repeatably after a restart.\nUpdating an initially created document with a non-null value works fine.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/39085605","html_url":"https://github.com/elastic/elasticsearch/issues/5483#issuecomment-39085605","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5483","id":39085605,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDg1NjA1","user":{"login":"ctrochalakis","id":1865,"node_id":"MDQ6VXNlcjE4NjU=","avatar_url":"https://avatars1.githubusercontent.com/u/1865?v=4","gravatar_id":"","url":"https://api.github.com/users/ctrochalakis","html_url":"https://github.com/ctrochalakis","followers_url":"https://api.github.com/users/ctrochalakis/followers","following_url":"https://api.github.com/users/ctrochalakis/following{/other_user}","gists_url":"https://api.github.com/users/ctrochalakis/gists{/gist_id}","starred_url":"https://api.github.com/users/ctrochalakis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctrochalakis/subscriptions","organizations_url":"https://api.github.com/users/ctrochalakis/orgs","repos_url":"https://api.github.com/users/ctrochalakis/repos","events_url":"https://api.github.com/users/ctrochalakis/events{/privacy}","received_events_url":"https://api.github.com/users/ctrochalakis/received_events","type":"User","site_admin":false},"created_at":"2014-03-31T13:05:42Z","updated_at":"2014-03-31T13:05:58Z","author_association":"NONE","body":"Great, I am glad that you have pinpointed the problem. Probably a typo in The MVEL source.\n\nBut, yes, it's very strange that it happens only after a restart.. And also, why does removing an non-null value from both updates fixes everything?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/39087401","html_url":"https://github.com/elastic/elasticsearch/issues/5483#issuecomment-39087401","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5483","id":39087401,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDg3NDAx","user":{"login":"hhoffstaette","id":499973,"node_id":"MDQ6VXNlcjQ5OTk3Mw==","avatar_url":"https://avatars2.githubusercontent.com/u/499973?v=4","gravatar_id":"","url":"https://api.github.com/users/hhoffstaette","html_url":"https://github.com/hhoffstaette","followers_url":"https://api.github.com/users/hhoffstaette/followers","following_url":"https://api.github.com/users/hhoffstaette/following{/other_user}","gists_url":"https://api.github.com/users/hhoffstaette/gists{/gist_id}","starred_url":"https://api.github.com/users/hhoffstaette/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhoffstaette/subscriptions","organizations_url":"https://api.github.com/users/hhoffstaette/orgs","repos_url":"https://api.github.com/users/hhoffstaette/repos","events_url":"https://api.github.com/users/hhoffstaette/events{/privacy}","received_events_url":"https://api.github.com/users/hhoffstaette/received_events","type":"User","site_admin":false},"created_at":"2014-03-31T13:25:24Z","updated_at":"2014-03-31T13:25:24Z","author_association":"CONTRIBUTOR","body":"That is indeed weird, and I have no idea why it does not trip over the same bug. Nevertheless MVEL must be fixed first, then we can see where this goes.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40493806","html_url":"https://github.com/elastic/elasticsearch/issues/5483#issuecomment-40493806","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5483","id":40493806,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDkzODA2","user":{"login":"hhoffstaette","id":499973,"node_id":"MDQ6VXNlcjQ5OTk3Mw==","avatar_url":"https://avatars2.githubusercontent.com/u/499973?v=4","gravatar_id":"","url":"https://api.github.com/users/hhoffstaette","html_url":"https://github.com/hhoffstaette","followers_url":"https://api.github.com/users/hhoffstaette/followers","following_url":"https://api.github.com/users/hhoffstaette/following{/other_user}","gists_url":"https://api.github.com/users/hhoffstaette/gists{/gist_id}","starred_url":"https://api.github.com/users/hhoffstaette/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhoffstaette/subscriptions","organizations_url":"https://api.github.com/users/hhoffstaette/orgs","repos_url":"https://api.github.com/users/hhoffstaette/repos","events_url":"https://api.github.com/users/hhoffstaette/events{/privacy}","received_events_url":"https://api.github.com/users/hhoffstaette/received_events","type":"User","site_admin":false},"created_at":"2014-04-15T15:14:04Z","updated_at":"2014-04-15T15:14:04Z","author_association":"CONTRIBUTOR","body":"Fixed upstream in https://github.com/mvel/mvel/commit/f61874a846114845c0a812d7782f9fd62aad9e37\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42194421","html_url":"https://github.com/elastic/elasticsearch/issues/5483#issuecomment-42194421","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5483","id":42194421,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMTk0NDIx","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-05-05T14:38:17Z","updated_at":"2014-05-05T14:38:17Z","author_association":"MEMBER","body":"@ctrochalakis is it possible to test with master/1.x branch and report if it works for you?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42233221","html_url":"https://github.com/elastic/elasticsearch/issues/5483#issuecomment-42233221","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5483","id":42233221,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMjMzMjIx","user":{"login":"kevinkluge","id":468073,"node_id":"MDQ6VXNlcjQ2ODA3Mw==","avatar_url":"https://avatars2.githubusercontent.com/u/468073?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinkluge","html_url":"https://github.com/kevinkluge","followers_url":"https://api.github.com/users/kevinkluge/followers","following_url":"https://api.github.com/users/kevinkluge/following{/other_user}","gists_url":"https://api.github.com/users/kevinkluge/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinkluge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinkluge/subscriptions","organizations_url":"https://api.github.com/users/kevinkluge/orgs","repos_url":"https://api.github.com/users/kevinkluge/repos","events_url":"https://api.github.com/users/kevinkluge/events{/privacy}","received_events_url":"https://api.github.com/users/kevinkluge/received_events","type":"User","site_admin":false},"created_at":"2014-05-05T20:11:56Z","updated_at":"2014-05-05T20:11:56Z","author_association":"MEMBER","body":"Note that @kimchy upgraded ES to MVEL 2.2.0, which was released after the f61... commit referenced by Holger.  However, Holger's referenced bug remains open.  I'm not sure what state the MVEL fix is in.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42279214","html_url":"https://github.com/elastic/elasticsearch/issues/5483#issuecomment-42279214","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5483","id":42279214,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMjc5MjE0","user":{"login":"ctrochalakis","id":1865,"node_id":"MDQ6VXNlcjE4NjU=","avatar_url":"https://avatars1.githubusercontent.com/u/1865?v=4","gravatar_id":"","url":"https://api.github.com/users/ctrochalakis","html_url":"https://github.com/ctrochalakis","followers_url":"https://api.github.com/users/ctrochalakis/followers","following_url":"https://api.github.com/users/ctrochalakis/following{/other_user}","gists_url":"https://api.github.com/users/ctrochalakis/gists{/gist_id}","starred_url":"https://api.github.com/users/ctrochalakis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctrochalakis/subscriptions","organizations_url":"https://api.github.com/users/ctrochalakis/orgs","repos_url":"https://api.github.com/users/ctrochalakis/repos","events_url":"https://api.github.com/users/ctrochalakis/events{/privacy}","received_events_url":"https://api.github.com/users/ctrochalakis/received_events","type":"User","site_admin":false},"created_at":"2014-05-06T08:46:40Z","updated_at":"2014-05-06T08:46:40Z","author_association":"NONE","body":"No unfortunately it doesn't  work with master\n`version[2.0.0-SNAPSHOT], pid[31544], build[76463ee/2014-05-06T08:35:33Z]`\n\nI had to enable dynamic scripting for the test to run.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42446206","html_url":"https://github.com/elastic/elasticsearch/issues/5483#issuecomment-42446206","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5483","id":42446206,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDQ2MjA2","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2014-05-07T16:00:16Z","updated_at":"2014-05-07T16:00:16Z","author_association":"MEMBER","body":"I will close this for now, sadly, there is nothing we can further do on our side... . We do plan to replace mvel in the near future... . Maybe for now you can try a different language plugin.\n","performed_via_github_app":null}]