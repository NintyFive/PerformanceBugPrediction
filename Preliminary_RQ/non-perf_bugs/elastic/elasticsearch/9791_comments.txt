[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/75263790","html_url":"https://github.com/elastic/elasticsearch/issues/9791#issuecomment-75263790","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9791","id":75263790,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MjYzNzkw","user":{"login":"zmathe","id":981448,"node_id":"MDQ6VXNlcjk4MTQ0OA==","avatar_url":"https://avatars3.githubusercontent.com/u/981448?v=4","gravatar_id":"","url":"https://api.github.com/users/zmathe","html_url":"https://github.com/zmathe","followers_url":"https://api.github.com/users/zmathe/followers","following_url":"https://api.github.com/users/zmathe/following{/other_user}","gists_url":"https://api.github.com/users/zmathe/gists{/gist_id}","starred_url":"https://api.github.com/users/zmathe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zmathe/subscriptions","organizations_url":"https://api.github.com/users/zmathe/orgs","repos_url":"https://api.github.com/users/zmathe/repos","events_url":"https://api.github.com/users/zmathe/events{/privacy}","received_events_url":"https://api.github.com/users/zmathe/received_events","type":"User","site_admin":false},"created_at":"2015-02-20T16:10:30Z","updated_at":"2015-02-20T16:10:30Z","author_association":"NONE","body":"Let me know if you need more information. I can provide you a real example.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76398809","html_url":"https://github.com/elastic/elasticsearch/issues/9791#issuecomment-76398809","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9791","id":76398809,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Mzk4ODA5","user":{"login":"zmathe","id":981448,"node_id":"MDQ6VXNlcjk4MTQ0OA==","avatar_url":"https://avatars3.githubusercontent.com/u/981448?v=4","gravatar_id":"","url":"https://api.github.com/users/zmathe","html_url":"https://github.com/zmathe","followers_url":"https://api.github.com/users/zmathe/followers","following_url":"https://api.github.com/users/zmathe/following{/other_user}","gists_url":"https://api.github.com/users/zmathe/gists{/gist_id}","starred_url":"https://api.github.com/users/zmathe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zmathe/subscriptions","organizations_url":"https://api.github.com/users/zmathe/orgs","repos_url":"https://api.github.com/users/zmathe/repos","events_url":"https://api.github.com/users/zmathe/events{/privacy}","received_events_url":"https://api.github.com/users/zmathe/received_events","type":"User","site_admin":false},"created_at":"2015-02-27T14:05:18Z","updated_at":"2015-02-27T14:05:18Z","author_association":"NONE","body":"I show real example in order to better understand the problem. I would like to replace part of our monitoring system which is based on MySQL and mathplotlib to elasticsearch-kibana. \nFirst plot is the correct plot generated using MySQL.\n![screen shot 2015-02-19 at 18 00 59](https://cloud.githubusercontent.com/assets/981448/6271717/f1c5cd74-b862-11e4-867c-1704c86e1b7d.png)\n\nThe equivalent plot in elasticsearch is:\n![screen shot 2015-02-19 at 17 57 26](https://cloud.githubusercontent.com/assets/981448/6271741/1fad81a0-b863-11e4-8718-03c7b64d5723.png)\n\nAs you can see the number of jobs in the Y axis is ~7 million, which is not correct(the buckets size is 3 hours).\n\nI implemented a simple tool where you execute a query and we can see the result. \n![screen shot 2015-02-19 at 18 18 56](https://cloud.githubusercontent.com/assets/981448/6271841/cfafcbc6-b863-11e4-9684-dc2b020f413a.png)\n\nAs you can see if I do an extra step I can have the correct plot. But this means I can not use Kibana. \n\nThanks,\nZoltan\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76509063","html_url":"https://github.com/elastic/elasticsearch/issues/9791#issuecomment-76509063","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9791","id":76509063,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTA5MDYz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-02-28T04:00:33Z","updated_at":"2015-02-28T04:00:33Z","author_association":"CONTRIBUTOR","body":"@colings86 this sounds like it would fit into the new aggs features?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76727128","html_url":"https://github.com/elastic/elasticsearch/issues/9791#issuecomment-76727128","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9791","id":76727128,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzI3MTI4","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2015-03-02T15:05:35Z","updated_at":"2015-03-02T15:05:35Z","author_association":"MEMBER","body":"@clintongormley yep this would fit into the new agg features in https://github.com/elasticsearch/elasticsearch/issues/9876, although it would probably need to be done through the scriptable implementation.\n\nClosing in favour of that issue (#9876)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76729786","html_url":"https://github.com/elastic/elasticsearch/issues/9791#issuecomment-76729786","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9791","id":76729786,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzI5Nzg2","user":{"login":"zmathe","id":981448,"node_id":"MDQ6VXNlcjk4MTQ0OA==","avatar_url":"https://avatars3.githubusercontent.com/u/981448?v=4","gravatar_id":"","url":"https://api.github.com/users/zmathe","html_url":"https://github.com/zmathe","followers_url":"https://api.github.com/users/zmathe/followers","following_url":"https://api.github.com/users/zmathe/following{/other_user}","gists_url":"https://api.github.com/users/zmathe/gists{/gist_id}","starred_url":"https://api.github.com/users/zmathe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zmathe/subscriptions","organizations_url":"https://api.github.com/users/zmathe/orgs","repos_url":"https://api.github.com/users/zmathe/repos","events_url":"https://api.github.com/users/zmathe/events{/privacy}","received_events_url":"https://api.github.com/users/zmathe/received_events","type":"User","site_admin":false},"created_at":"2015-03-02T15:19:01Z","updated_at":"2015-03-02T15:19:01Z","author_association":"NONE","body":"Thank you very much for adding this to the new aggregation framework!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76923049","html_url":"https://github.com/elastic/elasticsearch/issues/9791#issuecomment-76923049","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9791","id":76923049,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTIzMDQ5","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-03-03T10:41:08Z","updated_at":"2015-03-03T10:41:08Z","author_association":"MEMBER","body":"@zmathe I may be totally missing something but in your aggs examples, I see that the kibana version does a date histogram first, then prodcut terms aggs and then sums the quantity. \n\nThe request under\n\n> I made a simple web page where I can make queries to ES and the result of the query is plotted. I changed the query as follow in order to make the \"correct\" plot.\n\nis different. It does terms aggs first, then date histogram, then summing the quantity. I wonder if just changing the agg order in kibana will also give you what you want?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76947028","html_url":"https://github.com/elastic/elasticsearch/issues/9791#issuecomment-76947028","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9791","id":76947028,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTQ3MDI4","user":{"login":"zmathe","id":981448,"node_id":"MDQ6VXNlcjk4MTQ0OA==","avatar_url":"https://avatars3.githubusercontent.com/u/981448?v=4","gravatar_id":"","url":"https://api.github.com/users/zmathe","html_url":"https://github.com/zmathe","followers_url":"https://api.github.com/users/zmathe/followers","following_url":"https://api.github.com/users/zmathe/following{/other_user}","gists_url":"https://api.github.com/users/zmathe/gists{/gist_id}","starred_url":"https://api.github.com/users/zmathe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zmathe/subscriptions","organizations_url":"https://api.github.com/users/zmathe/orgs","repos_url":"https://api.github.com/users/zmathe/repos","events_url":"https://api.github.com/users/zmathe/events{/privacy}","received_events_url":"https://api.github.com/users/zmathe/received_events","type":"User","site_admin":false},"created_at":"2015-03-03T13:44:28Z","updated_at":"2015-03-03T13:44:28Z","author_association":"NONE","body":"@bleskes  Changing the order does not work in Kibana, because there is an extra step (which calculates the averages), which can not be done in ES. I had to do this extra step in the client side (in the JS).\nChanging the order will give the correct buckets, but I do not want to sum the quantity I want to have the \navg. In the following short example I am going to explain the problem.\nThe dataset I use:\n\n``` json\nPOST /example/transactions/_bulk\n{ \"index\": {}}\n{\"Color\": \"red\", \"quantity\": 1, \"Product\": \"a\", \"time\": \"2015-02-09T09:00:00Z\"}\n{ \"index\": {}}\n{\"Color\": \"red\", \"quantity\": 1, \"Product\": \"b\", \"time\": \"2015-02-09T16:15:00Z\"}\n{ \"index\": {}}\n{\"Color\": \"red\", \"quantity\": 1, \"Product\": \"b\", \"time\": \"2015-02-09T16:30:00Z\"}\n{ \"index\": {}}\n{\"Color\": \"red\", \"quantity\": 1, \"Product\": \"a\", \"time\":\"2015-02-09T09:00:00Z\"}\n{ \"index\": {}}\n{\"Color\": \"red\", \"quantity\": 1, \"Product\": \"a\", \"time\": \"2015-02-09T09:15:00Z\"}\n{ \"index\": {}}\n{\"Color\": \"red\", \"quantity\": 2, \"Product\": \"b\", \"time\": \"2015-02-09T16:15:00Z\"}\n{ \"index\": {}}\n{\"Color\": \"red\", \"quantity\": 1, \"Product\": \"a\", \"time\":\"2015-02-09T09:15:00Z\"}\n{ \"index\": {}}\n{\"Color\": \"red\", \"quantity\": 2, \"Product\": \"b\", \"time\": \"2015-02-09T16:15:00Z\"}\n{ \"index\": {}}\n{\"Color\": \"red\", \"quantity\": 1, \"Product\": \"a\", \"time\": \"2015-02-09T09:15:00Z\"}\n{ \"index\": {}}\n{\"Color\": \"red\", \"quantity\": 2, \"Product\": \"b\", \"time\": \"2015-02-09T16:15:00Z\"}\n```\n\nKibana is using the following query to plot the quantity over the time, group by product:\n\n``` json\nGET /example/_search/?search_type=count\n{\n    \"size\": 0,\n    \"query\": {\n        \"filtered\": {\n            \"query\": {\n                \"query_string\": {\n                    \"query\": \"*\"\n                }\n            },\n            \"filter\": {\n                \"bool\": {\n                    \"must\": [{\n                        \"range\": {\n                            \"time\": {\n                                \"gte\": 1423399451544,\n                                \"lte\": 1423631917911\n                            }\n                        }\n                    }],\n                    \"must_not\": []\n                }\n            }\n        }\n    },\n    \"aggs\": {\n        \"3\": {\n            \"date_histogram\": {\n                \"field\": \"time\",\n                \"interval\": \"3600000ms\",\n                \"min_doc_count\": 1,\n                \"extended_bounds\": {\n                    \"min\": 1423399451544,\n                    \"max\": 1423631917911\n                }\n            },\n            \"aggs\": {\n                \"4\": {\n                    \"terms\": {\n                        \"field\": \"Product\",\n                        \"size\": 0,\n                        \"order\": {\n                            \"1\": \"desc\"\n                        }\n                    },\n                    \"aggs\": {\n                        \"1\": {\n                            \"sum\": {\n                                \"field\": \"quantity\"\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\nThe result of this query:\n\n{\n   \"took\": 3,\n   \"timed_out\": false,\n   \"_shards\": {\n      \"total\": 5,\n      \"successful\": 5,\n      \"failed\": 0\n   },\n   \"hits\": {\n      \"total\": 10,\n      \"max_score\": 0,\n      \"hits\": []\n   },\n   \"aggregations\": {\n      \"3\": {\n         \"buckets\": [\n            {\n               \"4\": {\n                  \"doc_count_error_upper_bound\": 0,\n                  \"sum_other_doc_count\": 0,\n                  \"buckets\": [\n                     {\n                        \"1\": {\n                           \"value\": 5\n                        },\n                        \"key\": \"a\",\n                        \"doc_count\": 5\n                     }\n                  ]\n               },\n               \"key_as_string\": \"2015-02-09T09:00:00.000Z\",\n               \"key\": 1423472400000,\n               \"doc_count\": 5\n            },\n            {\n               \"4\": {\n                  \"doc_count_error_upper_bound\": 0,\n                  \"sum_other_doc_count\": 0,\n                  \"buckets\": [\n                     {\n                        \"1\": {\n                           \"value\": 8\n                        },\n                        \"key\": \"b\",\n                        \"doc_count\": 5\n                     }\n                  ]\n               },\n               \"key_as_string\": \"2015-02-09T16:00:00.000Z\",\n               \"key\": 1423497600000,\n               \"doc_count\": 5\n            }\n         ]\n      }\n   }\n}\n\nChanging the aggs order the query is:\n\nGET /example/_search/?search_type=count\n{\n    \"size\": 0,\n    \"query\": {\n        \"filtered\": {\n            \"query\": {\n                \"query_string\": {\n                    \"query\": \"*\"\n                }\n            },\n            \"filter\": {\n                \"bool\": {\n                    \"must\": [\n                        {\n                            \"range\": {\n                                \"time\": {\n                                   \"gte\": 1423147775940,\n                                    \"lte\": 1423752575940\n                                }\n                            }\n                        }\n                    ],\n                    \"must_not\": []\n                }\n            }\n        }\n    },\n    \"aggs\": {\n        \"2\": {\n            \"terms\": {\n                \"size\": 0,\n                \"field\": \"Product\"\n            },\n            \"aggs\": {\n                \"end_data\": {\n                    \"date_histogram\": {\n                        \"field\": \"time\",\n                        \"interval\": \"1080000ms\",\n                        \"min_doc_count\": 1,\n                        \"extended_bounds\": {\n                           \"min\":1423147775940,\n                           \"max\":1423752575940\n                        }\n                    },\n                    \"aggs\": {\n                        \"times\": {\n                            \"terms\": {\n                                \"field\": \"time\"\n                            },\n                            \"aggs\": {\n                                \"total_jobs\": {\n                                    \"sum\": {\n                                        \"field\": \"quantity\"\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\nThe result of this query is:\n{\n   \"took\": 4,\n   \"timed_out\": false,\n   \"_shards\": {\n      \"total\": 5,\n      \"successful\": 5,\n      \"failed\": 0\n   },\n   \"hits\": {\n      \"total\": 10,\n      \"max_score\": 0,\n      \"hits\": []\n   },\n   \"aggregations\": {\n      \"2\": {\n         \"doc_count_error_upper_bound\": 0,\n         \"sum_other_doc_count\": 0,\n         \"buckets\": [\n            {\n               \"key\": \"a\",\n               \"doc_count\": 5,\n               \"end_data\": {\n                  \"buckets\": [\n                     {\n                        \"key_as_string\": \"2015-02-09T09:00:00.000Z\",\n                        \"key\": 1423472400000,\n                        \"doc_count\": 5,\n                        \"times\": {\n                           \"doc_count_error_upper_bound\": 0,\n                           \"sum_other_doc_count\": 0,\n                           \"buckets\": [\n                              {\n                                 \"key\": 1423473300000,\n                                 \"key_as_string\": \"2015-02-09T09:15:00.000Z\",\n                                 \"doc_count\": 3,\n                                 \"total_jobs\": {\n                                    \"value\": 3\n                                 }\n                              },\n                              {\n                                 \"key\": 1423472400000,\n                                 \"key_as_string\": \"2015-02-09T09:00:00.000Z\",\n                                 \"doc_count\": 2,\n                                 \"total_jobs\": {\n                                    \"value\": 2\n                                 }\n                              }\n                           ]\n                        }\n                     }\n                  ]\n               }\n            },\n            {\n               \"key\": \"b\",\n               \"doc_count\": 5,\n               \"end_data\": {\n                  \"buckets\": [\n                     {\n                        \"key_as_string\": \"2015-02-09T16:12:00.000Z\",\n                        \"key\": 1423498320000,\n                        \"doc_count\": 4,\n                        \"times\": {\n                           \"doc_count_error_upper_bound\": 0,\n                           \"sum_other_doc_count\": 0,\n                           \"buckets\": [\n                              {\n                                 \"key\": 1423498500000,\n                                 \"key_as_string\": \"2015-02-09T16:15:00.000Z\",\n                                 \"doc_count\": 4,\n                                 \"total_jobs\": {\n                                    \"value\": 7\n                                 }\n                              }\n                           ]\n                        }\n                     },\n                     {\n                        \"key_as_string\": \"2015-02-09T16:30:00.000Z\",\n                        \"key\": 1423499400000,\n                        \"doc_count\": 1,\n                        \"times\": {\n                           \"doc_count_error_upper_bound\": 0,\n                           \"sum_other_doc_count\": 0,\n                           \"buckets\": [\n                              {\n                                 \"key\": 1423499400000,\n                                 \"key_as_string\": \"2015-02-09T16:30:00.000Z\",\n                                 \"doc_count\": 1,\n                                 \"total_jobs\": {\n                                    \"value\": 1\n                                 }\n                              }\n                           ]\n                        }\n                     }\n                  ]\n               }\n            }\n         ]\n      }\n   }\n}\n\nAs you can see in the result we have two buckets 'a' and 'b', in the other example we have: 2015-02-09T09:00:00.000Z and 2015-02-09T16:00:00.000Z.\n\nIn the last example in the bucket 'a' I had to make the avgs (because it can not be calculated by ES):\n{\n               \"key\": \"a\",\n               \"doc_count\": 5,\n               \"end_data\": {\n                  \"buckets\": [\n                     {\n                        \"key_as_string\": \"2015-02-09T09:00:00.000Z\",\n                        \"key\": 1423472400000,\n                        \"doc_count\": 5,\n                        \"times\": {\n                           \"doc_count_error_upper_bound\": 0,\n                           \"sum_other_doc_count\": 0,\n                           \"buckets\": [\n                              {\n                                 \"key\": 1423473300000,\n                                 \"key_as_string\": \"2015-02-09T09:15:00.000Z\",\n                                 \"doc_count\": 3,\n                                 \"total_jobs\": {\n                                    \"value\": 3\n                                 }\n                              },\n                              {\n                                 \"key\": 1423472400000,\n                                 \"key_as_string\": \"2015-02-09T09:00:00.000Z\",\n                                 \"doc_count\": 2,\n                                 \"total_jobs\": {\n                                    \"value\": 2\n                                 }\n                              }\n                           ]\n                        }\n                     }\n                  ]\n               }\n            }\n\nI have: a->2015-02-09T09:00:00.000Z and the average of:\n \"buckets\": [\n                              {\n                                 \"key\": 1423473300000,\n                                 \"key_as_string\": \"2015-02-09T09:15:00.000Z\",\n                                 \"doc_count\": 3,\n                                 \"total_jobs\": {\n                                    \"value\": 3\n                                 }\n                              },\n                              {\n                                 \"key\": 1423472400000,\n                                 \"key_as_string\": \"2015-02-09T09:00:00.000Z\",\n                                 \"doc_count\": 2,\n                                 \"total_jobs\": {\n                                    \"value\": 2\n                                 }\n                              }\n                           ]\n3+2/2=2.5.\nAfter the avgs I made the correct buckets by changing the order of the rows:\n 2015-02-09T09:00:00.000Z, a, 2.5.\nHowever in the firs example (the current ES implementation):\n2015-02-09T09:00:00.000Z, a, 5\nYou can see the different:\n\n![screen shot 2015-03-03 at 14 27 48](https://cloud.githubusercontent.com/assets/981448/6463479/bca0959e-c1b2-11e4-939b-6fe434bf6563.png)\n\n\nBecause of the avg calculation I can not use Kibana. I think this will be useful not only us.  I am sorry for the long message.\nThanks,\nZoltan\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76947150","html_url":"https://github.com/elastic/elasticsearch/issues/9791#issuecomment-76947150","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9791","id":76947150,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTQ3MTUw","user":{"login":"zmathe","id":981448,"node_id":"MDQ6VXNlcjk4MTQ0OA==","avatar_url":"https://avatars3.githubusercontent.com/u/981448?v=4","gravatar_id":"","url":"https://api.github.com/users/zmathe","html_url":"https://github.com/zmathe","followers_url":"https://api.github.com/users/zmathe/followers","following_url":"https://api.github.com/users/zmathe/following{/other_user}","gists_url":"https://api.github.com/users/zmathe/gists{/gist_id}","starred_url":"https://api.github.com/users/zmathe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zmathe/subscriptions","organizations_url":"https://api.github.com/users/zmathe/orgs","repos_url":"https://api.github.com/users/zmathe/repos","events_url":"https://api.github.com/users/zmathe/events{/privacy}","received_events_url":"https://api.github.com/users/zmathe/received_events","type":"User","site_admin":false},"created_at":"2015-03-03T13:45:16Z","updated_at":"2015-03-03T13:45:16Z","author_association":"NONE","body":"I am sorry the screen shot is missing in the previous post:\n![screen shot 2015-03-03 at 14 27 48](https://cloud.githubusercontent.com/assets/981448/6463585/d15fb6bc-c1b3-11e4-913d-7ddc9163abbf.png)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/83197296","html_url":"https://github.com/elastic/elasticsearch/issues/9791#issuecomment-83197296","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9791","id":83197296,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMTk3Mjk2","user":{"login":"aschokking","id":399279,"node_id":"MDQ6VXNlcjM5OTI3OQ==","avatar_url":"https://avatars0.githubusercontent.com/u/399279?v=4","gravatar_id":"","url":"https://api.github.com/users/aschokking","html_url":"https://github.com/aschokking","followers_url":"https://api.github.com/users/aschokking/followers","following_url":"https://api.github.com/users/aschokking/following{/other_user}","gists_url":"https://api.github.com/users/aschokking/gists{/gist_id}","starred_url":"https://api.github.com/users/aschokking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aschokking/subscriptions","organizations_url":"https://api.github.com/users/aschokking/orgs","repos_url":"https://api.github.com/users/aschokking/repos","events_url":"https://api.github.com/users/aschokking/events{/privacy}","received_events_url":"https://api.github.com/users/aschokking/received_events","type":"User","site_admin":false},"created_at":"2015-03-18T21:50:25Z","updated_at":"2015-03-18T21:50:25Z","author_association":"NONE","body":"We've been running into this exact same problem with summed averages.\n","performed_via_github_app":null}]