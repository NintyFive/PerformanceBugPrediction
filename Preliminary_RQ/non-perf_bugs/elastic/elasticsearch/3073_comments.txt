[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18276626","html_url":"https://github.com/elastic/elasticsearch/issues/3073#issuecomment-18276626","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3073","id":18276626,"node_id":"MDEyOklzc3VlQ29tbWVudDE4Mjc2NjI2","user":{"login":"chilling","id":2590333,"node_id":"MDQ6VXNlcjI1OTAzMzM=","avatar_url":"https://avatars2.githubusercontent.com/u/2590333?v=4","gravatar_id":"","url":"https://api.github.com/users/chilling","html_url":"https://github.com/chilling","followers_url":"https://api.github.com/users/chilling/followers","following_url":"https://api.github.com/users/chilling/following{/other_user}","gists_url":"https://api.github.com/users/chilling/gists{/gist_id}","starred_url":"https://api.github.com/users/chilling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chilling/subscriptions","organizations_url":"https://api.github.com/users/chilling/orgs","repos_url":"https://api.github.com/users/chilling/repos","events_url":"https://api.github.com/users/chilling/events{/privacy}","received_events_url":"https://api.github.com/users/chilling/received_events","type":"User","site_admin":false},"created_at":"2013-05-22T13:06:25Z","updated_at":"2013-05-22T13:06:25Z","author_association":"CONTRIBUTOR","body":"Hi @kosz85, can you also post a simple example of your indexed data, filters and results?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18277111","html_url":"https://github.com/elastic/elasticsearch/issues/3073#issuecomment-18277111","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3073","id":18277111,"node_id":"MDEyOklzc3VlQ29tbWVudDE4Mjc3MTEx","user":{"login":"kosz85","id":2547425,"node_id":"MDQ6VXNlcjI1NDc0MjU=","avatar_url":"https://avatars3.githubusercontent.com/u/2547425?v=4","gravatar_id":"","url":"https://api.github.com/users/kosz85","html_url":"https://github.com/kosz85","followers_url":"https://api.github.com/users/kosz85/followers","following_url":"https://api.github.com/users/kosz85/following{/other_user}","gists_url":"https://api.github.com/users/kosz85/gists{/gist_id}","starred_url":"https://api.github.com/users/kosz85/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kosz85/subscriptions","organizations_url":"https://api.github.com/users/kosz85/orgs","repos_url":"https://api.github.com/users/kosz85/repos","events_url":"https://api.github.com/users/kosz85/events{/privacy}","received_events_url":"https://api.github.com/users/kosz85/received_events","type":"User","site_admin":false},"created_at":"2013-05-22T13:15:39Z","updated_at":"2013-05-22T13:15:39Z","author_association":"NONE","body":"I may add that 0.90.0 has no matches even for 5000mi\n\n```\n{\n  \"filter\": {\n        \"geo_distance\": {\n          \"distance\": \"50mi\",\n          \"optimize_bbox\": \"memory\",\n          \"location\": {\n            \"lat\": 40.720611,\n            \"lon\": -73.998776\n          }\n        }\n  },\n  \"query\": {\n    \"match_all\": {}\n  },\n  \"size\": 20\n}\n```\n\nAlmost the same data in both instances\n\n0.90.0\n\n```\n{\n    \"took\": 2,\n    \"timed_out\": false,\n    \"_shards\": {\n        \"total\": 3,\n        \"successful\": 3,\n        \"failed\": 0\n    },\n    \"hits\": {\n        \"total\": 0,\n        \"max_score\": null,\n        \"hits\": []\n    }\n}\n```\n\n0.20.2\n\n```\n{\n    \"took\": 3,\n    \"timed_out\": false,\n    \"_shards\": {\n        \"total\": 5,\n        \"successful\": 5,\n        \"failed\": 0\n    },\n    \"hits\": {\n        \"total\": 220,\n        \"max_score\": 1,\n        \"hits\": [\n\n(...)\n              {\n                \"_id\": \"105\",\n                \"_score\": 1,\n                \"_source\": {\n                    \"_id\": 105,\n                    \"location\": \"dr72hbxdbzk3npz479cy\"\n               }\n(...)\n```\n\nExplain on 0.90.0:\n\n```\n{\n  \"query\": {\n    \"filtered\": {\n      \"filter\": {\n          \"geo_distance\": {\n            \"distance\": \"50mi\",\n            \"location\": {\n              \"lat\": 40.720611,\n              \"lon\": -73.998776\n            }\n          }\n       }\n   }\n}\n-------\n{\n    \"ok\": true,\n    \"_index\": \"business_index\",\n    \"_type\": \"business\",\n    \"_id\": \"105\",\n    \"matched\": false,\n    \"explanation\": {\n        \"value\": 0,\n        \"description\": \"ConstantScore(GeoDistanceFilter(location, ARC, 50.0, 40.720611, -73.998776)) doesn't match id 7\"\n    }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19116841","html_url":"https://github.com/elastic/elasticsearch/issues/3073#issuecomment-19116841","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3073","id":19116841,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTE2ODQx","user":{"login":"chilling","id":2590333,"node_id":"MDQ6VXNlcjI1OTAzMzM=","avatar_url":"https://avatars2.githubusercontent.com/u/2590333?v=4","gravatar_id":"","url":"https://api.github.com/users/chilling","html_url":"https://github.com/chilling","followers_url":"https://api.github.com/users/chilling/followers","following_url":"https://api.github.com/users/chilling/following{/other_user}","gists_url":"https://api.github.com/users/chilling/gists{/gist_id}","starred_url":"https://api.github.com/users/chilling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chilling/subscriptions","organizations_url":"https://api.github.com/users/chilling/orgs","repos_url":"https://api.github.com/users/chilling/repos","events_url":"https://api.github.com/users/chilling/events{/privacy}","received_events_url":"https://api.github.com/users/chilling/received_events","type":"User","site_admin":false},"created_at":"2013-06-07T16:14:20Z","updated_at":"2013-06-07T16:14:20Z","author_association":"CONTRIBUTOR","body":"@kosz85 thanks for open this issue. I think my commit will fix this\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19183882","html_url":"https://github.com/elastic/elasticsearch/issues/3073#issuecomment-19183882","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3073","id":19183882,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTgzODgy","user":{"login":"kosz85","id":2547425,"node_id":"MDQ6VXNlcjI1NDc0MjU=","avatar_url":"https://avatars3.githubusercontent.com/u/2547425?v=4","gravatar_id":"","url":"https://api.github.com/users/kosz85","html_url":"https://github.com/kosz85","followers_url":"https://api.github.com/users/kosz85/followers","following_url":"https://api.github.com/users/kosz85/following{/other_user}","gists_url":"https://api.github.com/users/kosz85/gists{/gist_id}","starred_url":"https://api.github.com/users/kosz85/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kosz85/subscriptions","organizations_url":"https://api.github.com/users/kosz85/orgs","repos_url":"https://api.github.com/users/kosz85/repos","events_url":"https://api.github.com/users/kosz85/events{/privacy}","received_events_url":"https://api.github.com/users/kosz85/received_events","type":"User","site_admin":false},"created_at":"2013-06-10T07:22:09Z","updated_at":"2013-06-10T07:22:09Z","author_association":"NONE","body":"Thanks, fix worked after reindexing data. (We checked it on version 0.90.1 patched with this commit)\n","performed_via_github_app":null}]