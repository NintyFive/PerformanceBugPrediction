[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/463091099","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-463091099","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":463091099,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MzA5MTA5OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-02-13T07:35:34Z","updated_at":"2019-02-13T07:35:34Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/463285902","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-463285902","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":463285902,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MzI4NTkwMg==","user":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"created_at":"2019-02-13T17:16:07Z","updated_at":"2019-02-13T17:20:46Z","author_association":"CONTRIBUTOR","body":"@tvernum thanks for creating this. Ironically enough it seems that this is happening on CentOS-7 workers attempting to `yum install` inside the container based on `centos:7`.\r\n\r\nI have been unable to reproduce this using a simple reproduction inside a clean CentOS 7 vagrant box with 20 iterations.\r\n\r\n<details><summary>Attempted reproduction script</summary>\r\n\r\n```\r\n$ cat Dockerfile\r\nFROM centos:7 AS builder\r\nENV PATH /usr/share/elasticsearch/bin:$PATH\r\nENV JAVA_HOME /opt/jdk-11.0.2\r\nRUN curl --retry 8 -s https://download.java.net/java/GA/jdk11/9/GPL/openjdk-11.0.2_linux-x64_bin.tar.gz | tar -C /opt -zxf -\r\nRUN ln -sf /etc/pki/ca-trust/extracted/java/cacerts /opt/jdk-11.0.2/lib/security/cacerts\r\nRUN yum install -y unzip which\r\n```\r\n\r\n```\r\nfor i in {1..20}; do docker build -t testimage . && echo \">>>> Test $i successful\"; docker rmi testimage; done\r\n```\r\n</details>\r\n\r\n<br>\r\n\r\nSpinning up a worker similar to the one used in the failures above I observed that the base OS has certain images already present (incl. centos7) and the above reproduction script was basically a no-op; while this speeds up things, it _might_ be the reason behind some stale things.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/463982047","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-463982047","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":463982047,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Mzk4MjA0Nw==","user":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"created_at":"2019-02-15T10:10:33Z","updated_at":"2019-02-15T10:10:33Z","author_association":"CONTRIBUTOR","body":"Looked at this again.\r\n\r\nIt mostly happens on centos-7 workers but I also spotted it happening on a Ubuntu kibana-ci, devops-ci Ubuntu (beats) immutable workers and even on an openSUSE Leap 42.3 non immutable worker, so it doesn't look specifically related to centos-7 workers. The history seems to start on Jan 17 this year; this doesnâ€™t really chronologically correspond to the packer cache script fix pr in https://github.com/elastic/elasticsearch/pull/38023/files.\r\n\r\nHad a brainstorming session with @atorok on some ideas.\r\n\r\nAlpar pointed out that the failing jobs were for non master branches hence not benefiting from caching. He'll work on a simple PR to extend the caching for older versions.\r\n\r\nI looked at our [Dockerfile](https://github.com/elastic/elasticsearch/blob/8f56e372a651c977c43acc041397d3384db76a6b/distribution/docker/src/docker/Dockerfile#L26) and as an additional action we can:\r\n\r\n1. Remove `yum install -y unzip which` from the stage 0 image -- not needed for some time now.\r\n2. Clean up the [yum section](https://github.com/elastic/elasticsearch/blob/8f56e372a651c977c43acc041397d3384db76a6b/distribution/docker/src/docker/Dockerfile#L53-L55) in stage 1; we still need `yum update -y` but I'll add a retry loop with some sleep to help even further.\r\n\r\nHopefully with all the above steps combined we will get rid of the noise.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/466016775","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-466016775","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":466016775,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjAxNjc3NQ==","user":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"created_at":"2019-02-21T14:21:21Z","updated_at":"2019-02-22T14:44:13Z","author_association":"MEMBER","body":"Re-occurred in builds: \r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.7+periodic/89/console\r\n```\r\n02:06:40 Cannot find a valid baseurl for repo: base/7/x86_64\r\n02:06:40 \u001B[0mCould not retrieve mirrorlist http://mirrorlist.centos.org/?release=7&arch=x86_64&repo=os&infra=container error was\r\n02:06:40 14: curl#7 - \"Failed to connect to 2607:f8f8:700:12::10: Network is unreachable\"\r\n```\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.0+periodic/89/console\r\n```\r\n04:06:23 Cannot find a valid baseurl for repo: base/7/x86_64\r\n04:06:23 \u001B[0mCould not retrieve mirrorlist http://mirrorlist.centos.org/?release=7&arch=x86_64&repo=os&infra=container error was\r\n04:06:23 12: Timeout on http://mirrorlist.centos.org/?release=7&arch=x86_64&repo=os&infra=container: (28, 'Operation too slow. Less than 1000 bytes/sec transferred the last 30 seconds')\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/466332469","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-466332469","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":466332469,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjMzMjQ2OQ==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2019-02-22T09:27:12Z","updated_at":"2019-02-22T09:27:12Z","author_association":"MEMBER","body":"@benwtrent can we please add *at least* the relevant build output here to help investigating? Jenkins links are usually invalid after a few weeks. While it is still possible to get the build output it is much more trouble to go to build-stats and dig for the respective logs.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/466420507","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-466420507","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":466420507,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjQyMDUwNw==","user":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"created_at":"2019-02-22T14:45:20Z","updated_at":"2019-02-22T14:45:20Z","author_association":"MEMBER","body":"@danielmitterdorfer I updated my comment to include the snippet of the timeout failure. I initially did not add them as it did not provide any more information than what was already included in this issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/467487404","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-467487404","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":467487404,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzQ4NzQwNA==","user":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"created_at":"2019-02-26T15:38:07Z","updated_at":"2019-02-26T15:38:07Z","author_association":"CONTRIBUTOR","body":"@atorok this issue seems to persist e.g. in https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.7+matrix-java-periodic/ES_BUILD_JAVA=java11,ES_RUNTIME_JAVA=java11,nodes=immutable&&linux&&docker/40/console. AFAICS updated base images incl. caching support have been building successfully.\r\n\r\nThis is a list of failures the past few days:\r\n\r\n![image](https://user-images.githubusercontent.com/1754575/53424948-d29bc600-39ec-11e9-838b-42e755479cfb.png)\r\n\r\nWDYT, should we be more resilient in all cases by introducing the retry commit: https://github.com/elastic/elasticsearch/commit/6f52008222dc2e9090faa141be425049d9cd37c3?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/467753915","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-467753915","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":467753915,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Nzc1MzkxNQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-02-27T07:27:55Z","updated_at":"2019-02-27T07:27:55Z","author_association":"CONTRIBUTOR","body":"I just checked and we do call the relevant task when building the image `[7.1.0]  [6.7.0] > Task :distribution:docker:pullFixture` I think we build  a different image for the fixture ( since we do it trough docker compose ) than our regular build, I taught that docker would cache and reuse the layers, but this doesn't seem to be the case. \r\n\r\nI'm not against the retries, just looking to understand this a bit better as we also don't seem to be getting all the benefits of the caching. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/467755624","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-467755624","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":467755624,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Nzc1NTYyNA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-02-27T07:35:09Z","updated_at":"2019-02-27T07:35:09Z","author_association":"CONTRIBUTOR","body":"I think it would be better to use `image: \"docker.elastic.co/elasticsearch/elasticsearch-oss:8.0.0-SNAPSHOT\"`  in `docker-compose.yml` and have the fixture depend on the image build, we can then avoid building too images and should also better benefit from the caching. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/467756867","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-467756867","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":467756867,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Nzc1Njg2Nw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-02-27T07:40:21Z","updated_at":"2019-02-27T07:40:21Z","author_association":"CONTRIBUTOR","body":"I checked and `:x-pack:test:smb-fixture:composeUp` is rebuilt also, so something is definitely not right with the caches. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/474885666","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-474885666","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":474885666,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDg4NTY2Ng==","user":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"created_at":"2019-03-20T15:29:56Z","updated_at":"2019-03-20T15:29:56Z","author_association":"CONTRIBUTOR","body":"Another occurrence has been raised in https://github.com/elastic/elasticsearch/issues/40205. The Docker caches didn't seem to get honored.\r\n\r\nDuring a team discussion with @danielmitterdorfer / @rjernst and @mark-vieira we thought it may make sense to bring back this yum retries commit: https://github.com/elastic/elasticsearch/commit/6f52008222dc2e9090faa141be425049d9cd37c3 and backport it back to 7.x/7.0 and even 6.7.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/474993892","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-474993892","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":474993892,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDk5Mzg5Mg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2019-03-20T19:27:51Z","updated_at":"2019-03-20T19:27:51Z","author_association":"MEMBER","body":"yum has a retries setting in yum.conf right? Why don't these retries work?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/475247546","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-475247546","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":475247546,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTI0NzU0Ng==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-03-21T14:19:11Z","updated_at":"2019-03-21T14:19:11Z","author_association":"CONTRIBUTOR","body":"We should do the retires. I looked into it and the caching we do on images won't help us with this as I initially taught as we copy the Dockerfile ( even if we weren't the one used for the cache is still a different checkout ). We also have changing dependencies, as we just built the distirbution so we do want to regenerate the image. \r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/475538943","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-475538943","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":475538943,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTUzODk0Mw==","user":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"created_at":"2019-03-22T08:49:17Z","updated_at":"2019-03-22T08:49:17Z","author_association":"CONTRIBUTOR","body":"> yum has a retries setting in yum.conf right? Why don't these retries work?\r\n\r\nYes there is `retries` and [by default](https://linux.die.net/man/5/yum.conf) it's set to 10, however from what I've seen it only honors it for failures pertinent to specific package files and not earlier failures e.g. pulling the mirrorlist (`Timeout on http://mirrorlist.centos.org`).\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/475540121","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-475540121","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":475540121,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTU0MDEyMQ==","user":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"created_at":"2019-03-22T08:53:28Z","updated_at":"2019-03-22T08:53:28Z","author_association":"CONTRIBUTOR","body":"I raised https://github.com/elastic/elasticsearch/pull/40349 resurrecting the retries","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/477167653","html_url":"https://github.com/elastic/elasticsearch/issues/38832#issuecomment-477167653","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38832","id":477167653,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzE2NzY1Mw==","user":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"created_at":"2019-03-27T13:58:55Z","updated_at":"2019-03-27T13:58:55Z","author_association":"CONTRIBUTOR","body":"#40349 (retries for yum commands in Dockerfile with in-between sleep period) has been merged, I'll close this out now. If the problem surfaces again, feel free to re-open.","performed_via_github_app":null}]