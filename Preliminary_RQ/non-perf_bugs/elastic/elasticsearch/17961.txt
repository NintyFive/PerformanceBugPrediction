{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/17961","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17961/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17961/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17961/events","html_url":"https://github.com/elastic/elasticsearch/issues/17961","id":150953385,"node_id":"MDU6SXNzdWUxNTA5NTMzODU=","number":17961,"title":"Cluster with \"hot-warm\" architecture: hot index shards not assigned when restarting service","user":{"login":"danling","id":6528002,"node_id":"MDQ6VXNlcjY1MjgwMDI=","avatar_url":"https://avatars3.githubusercontent.com/u/6528002?v=4","gravatar_id":"","url":"https://api.github.com/users/danling","html_url":"https://github.com/danling","followers_url":"https://api.github.com/users/danling/followers","following_url":"https://api.github.com/users/danling/following{/other_user}","gists_url":"https://api.github.com/users/danling/gists{/gist_id}","starred_url":"https://api.github.com/users/danling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danling/subscriptions","organizations_url":"https://api.github.com/users/danling/orgs","repos_url":"https://api.github.com/users/danling/repos","events_url":"https://api.github.com/users/danling/events{/privacy}","received_events_url":"https://api.github.com/users/danling/received_events","type":"User","site_admin":false},"labels":[{"id":836504707,"node_id":"MDU6TGFiZWw4MzY1MDQ3MDc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Distributed","name":":Distributed/Distributed","color":"0e8a16","default":false,"description":"A catch all label for anything in the Distributed Area. If you aren't sure, use this one."},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-04-25T19:08:17Z","updated_at":"2018-02-13T19:28:08Z","closed_at":"2016-04-27T22:20:19Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\nGitHub is reserved for bug reports and feature requests. The best place\nto ask a general question is at the Elastic Discourse forums at\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\na feature request, please include one and only one of the below blocks\nin your new issue.\n-->\n\n<!--\nIf you are filing a bug report, please remove the below feature\nrequest block and provide responses for all of the below items.\n-->\n\n**Elasticsearch version**: \nElasticsearch version is 1.7.1\n**JVM version**:\nJava version is\njava version \"1.8.0_60\"\nJava(TM) SE Runtime Environment (build 1.8.0_60-b27)\nJava HotSpot(TM) 64-Bit Server VM (build 25.60-b23, mixed mode)\n\n**OS version**:\nOS is RHEL 7.1\n**Description of the problem including expected versus actual behavior**:\nThe Elasticsearch cluster has 3 data nodes. The cluster is configured using \"hot-warm\" architecture based on the instructions in https://www.elastic.co/blog/hot-warm-architecture. One node is configured as \"hot\" and two nodes are configured as \"warm\".  Hot indices are changed to warm and moved to warm nodes every 3 days. \nThe problem is that when restarting elasticsearch service on either a host or warm node, the cluster status stays in \"yellow\" state because shards for hot indices are unassigned. I have manually update the index settings to change from \"hot\" to \"warm\"\ncurl -XPUT 'localhost:9200/<indexName>/_settings' -d '{ \"index.routing.allocation.require.box_type\" : \"warm\" }'\nWhen indices are changed to warm, the shards are assigned immediately and the cluster status becomes \"green\".\n\nI would expect that the shards of hot indices be assigned when restarting the elasticsearch service just like the warm indices. \n\nDoes anyone know if elasticsearch 2.x has the same behavior or is it the 1.7 only issue?\n\n**Steps to reproduce**:\n1. Configure a cluster using the instructions in  https://www.elastic.co/blog/hot-warm-architecture. \n2. Set at least one index to hot.\n3. restart elasticsearch service and check the cluster health status \n    curl -XGET 'http://localhost:9200/_cluster/health?pretty=true'\n\n**Provide logs (if relevant)**:\n\n<!--\nIf you are filing a feature request, please remove the above bug\nreport block and provide responses for all of the below items.\n-->\n\n**Describe the feature**:\n","closed_by":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"performed_via_github_app":null}