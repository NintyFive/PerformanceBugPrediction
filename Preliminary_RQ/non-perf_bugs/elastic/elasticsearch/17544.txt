{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/17544","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17544/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17544/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17544/events","html_url":"https://github.com/elastic/elasticsearch/issues/17544","id":146048966,"node_id":"MDU6SXNzdWUxNDYwNDg5NjY=","number":17544,"title":"Preserve failures on reindex and update_by_query when conflicts=proceed","user":{"login":"Mpdreamz","id":245275,"node_id":"MDQ6VXNlcjI0NTI3NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/245275?v=4","gravatar_id":"","url":"https://api.github.com/users/Mpdreamz","html_url":"https://github.com/Mpdreamz","followers_url":"https://api.github.com/users/Mpdreamz/followers","following_url":"https://api.github.com/users/Mpdreamz/following{/other_user}","gists_url":"https://api.github.com/users/Mpdreamz/gists{/gist_id}","starred_url":"https://api.github.com/users/Mpdreamz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mpdreamz/subscriptions","organizations_url":"https://api.github.com/users/Mpdreamz/orgs","repos_url":"https://api.github.com/users/Mpdreamz/repos","events_url":"https://api.github.com/users/Mpdreamz/events{/privacy}","received_events_url":"https://api.github.com/users/Mpdreamz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-04-05T17:01:32Z","updated_at":"2016-04-05T19:57:02Z","closed_at":"2016-04-05T19:57:02Z","author_association":"MEMBER","active_lock_reason":null,"body":"```\nPOST /nest-8af80b80/test/_update_by_query?pretty=true&conflicts=proceed\n```\n\nwill return a `200` with:\n\n``` json\n{\n  \"took\" : 20,\n  \"timed_out\" : false,\n  \"total\" : 1,\n  \"updated\" : 0,\n  \"batches\" : 1,\n  \"version_conflicts\" : 1,\n  \"noops\" : 0,\n  \"retries\" : 0,\n  \"failures\" : [ ]\n}\n```\n\nwhile \n\n`POST /nest-41ca4794/test/_update_by_query?pretty=true`\n\nwill return a `409` with\n\n``` json\n{\n  \"took\" : 3,\n  \"timed_out\" : false,\n  \"total\" : 1,\n  \"updated\" : 0,\n  \"batches\" : 1,\n  \"version_conflicts\" : 1,\n  \"noops\" : 0,\n  \"retries\" : 0,\n  \"failures\" : [ {\n    \"index\" : \"nest-6fee3631\",\n    \"type\" : \"test\",\n    \"id\" : \"1\",\n    \"cause\" : {\n      \"type\" : \"version_conflict_engine_exception\",\n      \"reason\" : \"[test][1]: version conflict, current [2], provided [1]\",\n      \"shard\" : \"3\",\n      \"index\" : \"nest-6fee3631\"\n    },\n    \"status\" : 409\n  } ]\n}\n```\n\nIt'd be nice if failures are exposed in both cases.\n","closed_by":{"login":"Mpdreamz","id":245275,"node_id":"MDQ6VXNlcjI0NTI3NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/245275?v=4","gravatar_id":"","url":"https://api.github.com/users/Mpdreamz","html_url":"https://github.com/Mpdreamz","followers_url":"https://api.github.com/users/Mpdreamz/followers","following_url":"https://api.github.com/users/Mpdreamz/following{/other_user}","gists_url":"https://api.github.com/users/Mpdreamz/gists{/gist_id}","starred_url":"https://api.github.com/users/Mpdreamz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mpdreamz/subscriptions","organizations_url":"https://api.github.com/users/Mpdreamz/orgs","repos_url":"https://api.github.com/users/Mpdreamz/repos","events_url":"https://api.github.com/users/Mpdreamz/events{/privacy}","received_events_url":"https://api.github.com/users/Mpdreamz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}