{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/38575","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38575/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38575/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38575/events","html_url":"https://github.com/elastic/elasticsearch/issues/38575","id":407768112,"node_id":"MDU6SXNzdWU0MDc3NjgxMTI=","number":38575,"title":"core.ml.calendars tests failing after version bump","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-02-07T15:52:26Z","updated_at":"2019-02-07T17:23:27Z","closed_at":"2019-02-07T15:59:38Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"After doing the version bumps in #38513 we have these failures locally:\r\n```\r\n2> REPRODUCE WITH: ./gradlew :x-pack:plugin:core:unitTest -Dtests.seed=376ACFDEC0FA510A -Dtests.class=org.elasticsearch.xpack.core.ml.calendars.ScheduledEventTests -Dtests.method=\"testEqualsAndHashcode\" -Dtests.security.manager=true -Dtests.locale=fr-CA -Dtests.timezone=Eire -Dcompiler.java=11 -Druntime.java=11\r\nFAILURE 0.01s J1 | ScheduledEventTests.testEqualsAndHashcode <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: ScheduledEvent hashcode is different from copies hashcode\r\n   > Expected: <1814201430>\r\n   >      but: was <2104666966>\r\n   >    at __randomizedtesting.SeedInfo.seed([376ACFDEC0FA510A:4665B7130F1D1825]:0)\r\n   >    at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   >    at org.elasticsearch.test.EqualsHashCodeTestUtils.checkEqualsAndHashCode(EqualsHashCodeTestUtils.java:90)\r\n   >    at org.elasticsearch.test.AbstractWireTestCase.testEqualsAndHashcode(AbstractWireTestCase.java:61)\r\n   >    at jdk.internal.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)\r\n   >    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n   >    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n   >    at java.base/java.lang.Thread.run(Thread.java:834)\r\n  1> [2019-02-07T15:51:43,756][INFO ][o.e.x.c.m.c.ScheduledEventTests] [testStrictParser] before test\r\n  1> [2019-02-07T15:51:43,757][INFO ][o.e.x.c.m.c.ScheduledEventTests] [testStrictParser] after test\r\n  1> [2019-02-07T15:51:43,758][INFO ][o.e.x.c.m.c.ScheduledEventTests] [testSerialization] before test\r\n  1> [2019-02-07T15:51:43,758][INFO ][o.e.x.c.m.c.ScheduledEventTests] [testSerialization] after test\r\n  2> REPRODUCE WITH: ./gradlew :x-pack:plugin:core:unitTest -Dtests.seed=376ACFDEC0FA510A -Dtests.class=org.elasticsearch.xpack.core.ml.calendars.ScheduledEventTests -Dtests.method=\"testSerialization\" -Dtests.security.manager=true -Dtests.locale=fr-CA -Dtests.timezone=Eire -Dcompiler.java=11 -Druntime.java=11\r\nFAILURE 0.00s J1 | ScheduledEventTests.testSerialization <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: expected:<1743851377> but was:<-1870282015>\r\n   >    at __randomizedtesting.SeedInfo.seed([376ACFDEC0FA510A:63B2AE96E7A86C96]:0)\r\n   >    at org.elasticsearch.test.AbstractWireTestCase.assertEqualInstances(AbstractWireTestCase.java:91)\r\n   >    at org.elasticsearch.test.AbstractWireTestCase.assertSerialization(AbstractWireTestCase.java:84)\r\n   >    at org.elasticsearch.test.AbstractWireTestCase.assertSerialization(AbstractWireTestCase.java:79)\r\n   >    at org.elasticsearch.test.AbstractWireTestCase.testSerialization(AbstractWireTestCase.java:71)\r\n   >    at jdk.internal.reflect.GeneratedMethodAccessor23.invoke(Unknown Source)\r\n   >    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n   >    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n   >    at java.base/java.lang.Thread.run(Thread.java:834)\r\n  1> [2019-02-07T15:51:43,760][INFO ][o.e.x.c.m.c.ScheduledEventTests] [testFromXContent] before test\r\n  1> [2019-02-07T15:51:43,760][INFO ][o.e.x.c.m.c.ScheduledEventTests] [testFromXContent] after test\r\n  2> REPRODUCE WITH: ./gradlew :x-pack:plugin:core:unitTest -Dtests.seed=376ACFDEC0FA510A -Dtests.class=org.elasticsearch.xpack.core.ml.calendars.ScheduledEventTests -\r\nDtests.method=\"testFromXContent\" -Dtests.security.manager=true -Dtests.locale=fr-CA -Dtests.timezone=Eire -Dcompiler.java=11 -Druntime.java=11\r\nFAILURE 0.00s J1 | ScheduledEventTests.testFromXContent <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: expected:<1350791987> but was:<1613511283>\r\n   >    at __randomizedtesting.SeedInfo.seed([376ACFDEC0FA510A:1602FAC6495DB1D0]:0)\r\n   >    at org.elasticsearch.test.AbstractWireTestCase.assertEqualInstances(AbstractWireTestCase.java:91)\r\n   >    at org.elasticsearch.test.AbstractSerializingTestCase.lambda$testFromXContent$0(AbstractSerializingTestCase.java:47)\r\n   >    at org.elasticsearch.test.AbstractXContentTestCase$XContentTester.test(AbstractXContentTestCase.java:137)\r\n   >    at org.elasticsearch.test.AbstractSerializingTestCase.testFromXContent(AbstractSerializingTestCase.java:49)\r\n   >    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n   >    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n   >    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n   >    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n   >    at java.base/java.lang.Thread.run(Thread.java:834)\r\n  2> NOTE: leaving temporary files on disk at: /home/alpar/work/elastic/elasticsearch-7.x/x-pack/plugin/core/build/testrun/unitTest/J1/temp/org.elasticsearch.xpack.core.ml.calendars.ScheduledEventTests_376ACFDEC0FA510A-001\r\n  2> NOTE: test params are: codec=Asserting(Lucene80): {}, docValues:{}, maxPointsInLeafNode=1059, maxMBSortInHeap=7.104696129104226, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@4c83ccd), locale=fr-CA, timezone=Eire\r\n  2> NOTE: Linux 4.20.6-arch1-1-ARCH amd64/Oracle Corporation 11 (64-bit)/cpus=12,threads=1,free=340244984,total=536870912\r\n  2> NOTE: All tests run in this JVM: [XPackPluginTests, ManageApplicationPrivilegesTests, ForecastStatsTests, GetApiKeyResponseTests, PolicyStatsTests, UpdateCalendarJobActionResquestTests, OperationModeTests, ExtractorUtilsTests, DetectionRuleTests, LicensesTransportTests, GetModelSnapshotsActionRequestTests, ModelPlotConfigTests, LicenseOperationModeTests, FrozenIndexRecoveryTests, LicenseStatusTests, SecurityIndexSearcherWrapperIntegrationTests, InitializePolicyContextStepTests, SSLConfigurationReloaderTests, GetBucketActionRequestTests, CategorizerStateTests, PutLifecycleRequestTests, TermsGroupConfigSerializingTests, UpdateProcessActionRequestTests, SecurityNetty4TransportTests, InvalidateTokenRequestTests, DeleteExpiredDataActionResponseTests, JobWrapperSerializingTests, DefaultAuthenticationFailureHandlerTests, SetPriorityActionTests, ExecuteWatchResponseTests, CopyExecutionStateStepTests, GetDatafeedStatsActionRequestTests, LicenseTLSTests, JobParamsTests, PutCalendarActionResponseTests, ShrunkShardsAllocatedStepTests, MlTasksTests, DeprecationInfoActionResponseTests, PostDataActionRequestTests, WaitForFollowShardTasksStepTests, DeleteLifecycleRequestTests, MoveToStepResponseTests, GetJobStatsActionRequestTests, RevertModelSnapshotActionResponseTests, ScheduledEventTests]\r\nCompleted [276/313] on J1 in 0.03s, 7 tests, 3 failures <<< FAILURES!\r\n```\r\nGoing to mute them to unblock the team.","closed_by":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"performed_via_github_app":null}