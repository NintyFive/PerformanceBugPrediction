[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/444976033","html_url":"https://github.com/elastic/elasticsearch/issues/36324#issuecomment-444976033","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36324","id":444976033,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDk3NjAzMw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-12-06T18:21:47Z","updated_at":"2018-12-06T18:21:47Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/444977458","html_url":"https://github.com/elastic/elasticsearch/issues/36324#issuecomment-444977458","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36324","id":444977458,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDk3NzQ1OA==","user":{"login":"gwbrown","id":1522844,"node_id":"MDQ6VXNlcjE1MjI4NDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1522844?v=4","gravatar_id":"","url":"https://api.github.com/users/gwbrown","html_url":"https://github.com/gwbrown","followers_url":"https://api.github.com/users/gwbrown/followers","following_url":"https://api.github.com/users/gwbrown/following{/other_user}","gists_url":"https://api.github.com/users/gwbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gwbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwbrown/subscriptions","organizations_url":"https://api.github.com/users/gwbrown/orgs","repos_url":"https://api.github.com/users/gwbrown/repos","events_url":"https://api.github.com/users/gwbrown/events{/privacy}","received_events_url":"https://api.github.com/users/gwbrown/received_events","type":"User","site_admin":false},"created_at":"2018-12-06T18:26:31Z","updated_at":"2018-12-06T18:26:31Z","author_association":"CONTRIBUTOR","body":"It is also worth noting that this overlaps somewhat with the [Migration Assistance API](https://www.elastic.co/guide/en/elasticsearch/reference/current/migration-api-assistance.html).  There would be value in providing the machine-readable recommendation alongside the human-readable description of the issue, as this would allow a tool (e.g. Kibana) to show the reason behind a recommended change alongside the option to make the change without having to make two separate API calls.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/445014033","html_url":"https://github.com/elastic/elasticsearch/issues/36324#issuecomment-445014033","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36324","id":445014033,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NTAxNDAzMw==","user":{"login":"joshdover","id":1813008,"node_id":"MDQ6VXNlcjE4MTMwMDg=","avatar_url":"https://avatars2.githubusercontent.com/u/1813008?v=4","gravatar_id":"","url":"https://api.github.com/users/joshdover","html_url":"https://github.com/joshdover","followers_url":"https://api.github.com/users/joshdover/followers","following_url":"https://api.github.com/users/joshdover/following{/other_user}","gists_url":"https://api.github.com/users/joshdover/gists{/gist_id}","starred_url":"https://api.github.com/users/joshdover/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshdover/subscriptions","organizations_url":"https://api.github.com/users/joshdover/orgs","repos_url":"https://api.github.com/users/joshdover/repos","events_url":"https://api.github.com/users/joshdover/events{/privacy}","received_events_url":"https://api.github.com/users/joshdover/received_events","type":"User","site_admin":false},"created_at":"2018-12-06T20:13:37Z","updated_at":"2018-12-06T20:13:37Z","author_association":"MEMBER","body":"My main concern with only providing a `recommended_action` field is that would potentially slow down the development of new migration features in Kibana's Upgrade Assistant because we would need to wait on Elasticsearch to update responses in order to tie an action in the UI to a specific deprecation warning.\r\n\r\nAdditionally, this doesn't allow Kibana to make fine-grained decisions about the action. For instance, there could be multiple deprecation types that we initially believe need the same action, but later discover some fundamental difference between them that would change how we process that action. In that case, Kibana would need to fallback again to reading the human-readable (and unstable) `message` field to determine how to process the action. Related is the concern that these recommended actions could be too generic and re-used in ways that are not specific enough.\r\n\r\nAll this said, I don't anticipate adding many actions in Kibana at this time. But I also don't think this actually overlaps with the concerns in #35665, which primarily concerns exception messages. Exceptions are prevalent in the Elasticsearch codebase and I agree that changing all of those to add an error code field would be a large undertaking. However, the Deprecations Info API does not display errors but instead deprecation messages for future versions of Elasticsearch. Introducing a pattern here, whether its a `recommended_action` field or a `deprecation_code` field, I don't think it introduces an inconsistency from the rest of the API surface.\r\n\r\nI argue that adding a unique `deprecation_code` is more flexible for downstream consumers, allowing Kibana to iterate faster on new migration features without relying on brittle human-readable strings.\r\n\r\nI certainly don't want to over-engineer this, and more than anything this is a nice-to-have from a maintainability standpoint. For example, in the API's current form, I will have to have a different string to check between the 6.x branches and 7.x branches (\"Index was created before X.X\"), but this isn't the end of the world. I'm just concerned about forgetting about it and the feature breaking a year or more from now.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/446383145","html_url":"https://github.com/elastic/elasticsearch/issues/36324#issuecomment-446383145","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36324","id":446383145,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NjM4MzE0NQ==","user":{"login":"joshdover","id":1813008,"node_id":"MDQ6VXNlcjE4MTMwMDg=","avatar_url":"https://avatars2.githubusercontent.com/u/1813008?v=4","gravatar_id":"","url":"https://api.github.com/users/joshdover","html_url":"https://github.com/joshdover","followers_url":"https://api.github.com/users/joshdover/followers","following_url":"https://api.github.com/users/joshdover/following{/other_user}","gists_url":"https://api.github.com/users/joshdover/gists{/gist_id}","starred_url":"https://api.github.com/users/joshdover/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshdover/subscriptions","organizations_url":"https://api.github.com/users/joshdover/orgs","repos_url":"https://api.github.com/users/joshdover/repos","events_url":"https://api.github.com/users/joshdover/events{/privacy}","received_events_url":"https://api.github.com/users/joshdover/received_events","type":"User","site_admin":false},"created_at":"2018-12-11T22:15:26Z","updated_at":"2018-12-11T22:15:26Z","author_association":"MEMBER","body":"For the time being, we're going to rely on string matches and will include functional tests to ensure these do not break in future releases. Going to close this.","performed_via_github_app":null}]