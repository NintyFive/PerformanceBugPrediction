[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68696355","html_url":"https://github.com/elastic/elasticsearch/issues/9129#issuecomment-68696355","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9129","id":68696355,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Njk2MzU1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-01-05T11:26:16Z","updated_at":"2015-01-05T11:26:16Z","author_association":"CONTRIBUTOR","body":"@bleskes could you comment on this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68697641","html_url":"https://github.com/elastic/elasticsearch/issues/9129#issuecomment-68697641","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9129","id":68697641,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Njk3NjQx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-01-05T11:40:46Z","updated_at":"2015-01-05T11:40:46Z","author_association":"CONTRIBUTOR","body":"Related to #9130\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68704719","html_url":"https://github.com/elastic/elasticsearch/issues/9129#issuecomment-68704719","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9129","id":68704719,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzA0NzE5","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-01-05T13:01:52Z","updated_at":"2015-01-05T13:01:52Z","author_association":"MEMBER","body":"@mosiddi thx for the detailed report. I want to do some research first. I'll get back to you asap.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68705368","html_url":"https://github.com/elastic/elasticsearch/issues/9129#issuecomment-68705368","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9129","id":68705368,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzA1MzY4","user":{"login":"mosiddi","id":2240862,"node_id":"MDQ6VXNlcjIyNDA4NjI=","avatar_url":"https://avatars1.githubusercontent.com/u/2240862?v=4","gravatar_id":"","url":"https://api.github.com/users/mosiddi","html_url":"https://github.com/mosiddi","followers_url":"https://api.github.com/users/mosiddi/followers","following_url":"https://api.github.com/users/mosiddi/following{/other_user}","gists_url":"https://api.github.com/users/mosiddi/gists{/gist_id}","starred_url":"https://api.github.com/users/mosiddi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mosiddi/subscriptions","organizations_url":"https://api.github.com/users/mosiddi/orgs","repos_url":"https://api.github.com/users/mosiddi/repos","events_url":"https://api.github.com/users/mosiddi/events{/privacy}","received_events_url":"https://api.github.com/users/mosiddi/received_events","type":"User","site_admin":false},"created_at":"2015-01-05T13:09:36Z","updated_at":"2015-01-05T13:09:36Z","author_association":"NONE","body":"Thanks @bleskes! I'll wait for ur analysis. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69702176","html_url":"https://github.com/elastic/elasticsearch/issues/9129#issuecomment-69702176","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9129","id":69702176,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzAyMTc2","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-01-13T06:44:28Z","updated_at":"2015-01-13T06:44:45Z","author_association":"MEMBER","body":"@mosiddi sorry for taking long to get back to you. I did some research but I can not see how this can happen given the current information - which means I'm missing something. Any chance you save the logs and case share them? a reproduction would also be great.\n\nRegarding your questions:\n\n> 1. How master maintains the admin write consistency quorum. When it adds a new index, does it update other master and syncs with them so the quorum is maintained?\n\nWhen the master updates the cluster state it publishes it to all the nodes and waits for their response (up to 30 seconds)\n\n> 1. Does ES maintain the create index sub-states transaction ally (checkpoints) so whatever state the index creation was, when one master crashes the new master can pick maintain idempotency?\n\nNot sure exactly what you mean, but a master crash shouldn't break the indices - another master should just pick things up where the old master left.\n\n> 1. Is this something we have seen earlier?\n\nNo :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69703302","html_url":"https://github.com/elastic/elasticsearch/issues/9129#issuecomment-69703302","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9129","id":69703302,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzAzMzAy","user":{"login":"mosiddi","id":2240862,"node_id":"MDQ6VXNlcjIyNDA4NjI=","avatar_url":"https://avatars1.githubusercontent.com/u/2240862?v=4","gravatar_id":"","url":"https://api.github.com/users/mosiddi","html_url":"https://github.com/mosiddi","followers_url":"https://api.github.com/users/mosiddi/followers","following_url":"https://api.github.com/users/mosiddi/following{/other_user}","gists_url":"https://api.github.com/users/mosiddi/gists{/gist_id}","starred_url":"https://api.github.com/users/mosiddi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mosiddi/subscriptions","organizations_url":"https://api.github.com/users/mosiddi/orgs","repos_url":"https://api.github.com/users/mosiddi/repos","events_url":"https://api.github.com/users/mosiddi/events{/privacy}","received_events_url":"https://api.github.com/users/mosiddi/received_events","type":"User","site_admin":false},"created_at":"2015-01-13T07:00:13Z","updated_at":"2015-01-13T07:00:13Z","author_association":"NONE","body":"I do have the logs... I can share... Can you tell me how to share the logs with you as they will be a bit huge (I will filter out not needed contents though).. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69746866","html_url":"https://github.com/elastic/elasticsearch/issues/9129#issuecomment-69746866","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9129","id":69746866,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzQ2ODY2","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-01-13T13:56:12Z","updated_at":"2015-01-13T13:56:12Z","author_association":"MEMBER","body":"you can mail them to me using first name dot last name at elasticsearch.com . Compress and depending on size you can use something like wetransfer.com . If possible please don't remove anything - you never know what might be relevant... \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69748486","html_url":"https://github.com/elastic/elasticsearch/issues/9129#issuecomment-69748486","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9129","id":69748486,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzQ4NDg2","user":{"login":"mosiddi","id":2240862,"node_id":"MDQ6VXNlcjIyNDA4NjI=","avatar_url":"https://avatars1.githubusercontent.com/u/2240862?v=4","gravatar_id":"","url":"https://api.github.com/users/mosiddi","html_url":"https://github.com/mosiddi","followers_url":"https://api.github.com/users/mosiddi/followers","following_url":"https://api.github.com/users/mosiddi/following{/other_user}","gists_url":"https://api.github.com/users/mosiddi/gists{/gist_id}","starred_url":"https://api.github.com/users/mosiddi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mosiddi/subscriptions","organizations_url":"https://api.github.com/users/mosiddi/orgs","repos_url":"https://api.github.com/users/mosiddi/repos","events_url":"https://api.github.com/users/mosiddi/events{/privacy}","received_events_url":"https://api.github.com/users/mosiddi/received_events","type":"User","site_admin":false},"created_at":"2015-01-13T14:08:41Z","updated_at":"2015-01-13T14:08:41Z","author_association":"NONE","body":"I mailed you the logs from master 01 and master 03\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69768179","html_url":"https://github.com/elastic/elasticsearch/issues/9129#issuecomment-69768179","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9129","id":69768179,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzY4MTc5","user":{"login":"mosiddi","id":2240862,"node_id":"MDQ6VXNlcjIyNDA4NjI=","avatar_url":"https://avatars1.githubusercontent.com/u/2240862?v=4","gravatar_id":"","url":"https://api.github.com/users/mosiddi","html_url":"https://github.com/mosiddi","followers_url":"https://api.github.com/users/mosiddi/followers","following_url":"https://api.github.com/users/mosiddi/following{/other_user}","gists_url":"https://api.github.com/users/mosiddi/gists{/gist_id}","starred_url":"https://api.github.com/users/mosiddi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mosiddi/subscriptions","organizations_url":"https://api.github.com/users/mosiddi/orgs","repos_url":"https://api.github.com/users/mosiddi/repos","events_url":"https://api.github.com/users/mosiddi/events{/privacy}","received_events_url":"https://api.github.com/users/mosiddi/received_events","type":"User","site_admin":false},"created_at":"2015-01-13T16:04:34Z","updated_at":"2015-01-13T16:04:34Z","author_association":"NONE","body":"Hi @bleskes  - Can you also look @ https://github.com/elasticsearch/elasticsearch/issues/9192 and comment :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69784736","html_url":"https://github.com/elastic/elasticsearch/issues/9129#issuecomment-69784736","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9129","id":69784736,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Nzg0NzM2","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-01-13T17:36:35Z","updated_at":"2015-01-13T17:36:35Z","author_association":"MEMBER","body":"Thx for the logs. I think it clarifies things. Your first master got overloaded by the create index request (which were fired without waiting for an answer) to a point it got an OutOfMemory exception. Master 3 took over but because of your very high timeout settings it took a long time (45s ping timeout, 10 retries -> it takes 7.5 minutes worse case for a master failure to be discovered). In that time the old master, which was not completely out but rather dis-functional due to the OOM created some havoc by sending conflicting information to the nodes - most notably in this case - it was publishing cluster state which didn't contain indices that the new master has created. That mislead the nodes to think the indices were deleted and removed them. The error you see are the result of the nodes responding to the new master, telling it that the indices it's talking about do not exist on disk.\n\nA lot work went into 1.4 to make it more resilient to these issues (and others see: http://www.elasticsearch.org/guide/en/elasticsearch/resiliency/current/ ). I suggest you upgrade and check again if this happens to you.\n\nI also strongly suggest to remove your custom fault detection ping timeout settings and keep the defaults. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69787277","html_url":"https://github.com/elastic/elasticsearch/issues/9129#issuecomment-69787277","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9129","id":69787277,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Nzg3Mjc3","user":{"login":"mosiddi","id":2240862,"node_id":"MDQ6VXNlcjIyNDA4NjI=","avatar_url":"https://avatars1.githubusercontent.com/u/2240862?v=4","gravatar_id":"","url":"https://api.github.com/users/mosiddi","html_url":"https://github.com/mosiddi","followers_url":"https://api.github.com/users/mosiddi/followers","following_url":"https://api.github.com/users/mosiddi/following{/other_user}","gists_url":"https://api.github.com/users/mosiddi/gists{/gist_id}","starred_url":"https://api.github.com/users/mosiddi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mosiddi/subscriptions","organizations_url":"https://api.github.com/users/mosiddi/orgs","repos_url":"https://api.github.com/users/mosiddi/repos","events_url":"https://api.github.com/users/mosiddi/events{/privacy}","received_events_url":"https://api.github.com/users/mosiddi/received_events","type":"User","site_admin":false},"created_at":"2015-01-13T17:51:09Z","updated_at":"2015-01-13T17:51:09Z","author_association":"NONE","body":"Thanks @bleskes ! This is good data. We will plan to move to 1.4 then. I'm closing the issue since I've the answer now. \n","performed_via_github_app":null}]