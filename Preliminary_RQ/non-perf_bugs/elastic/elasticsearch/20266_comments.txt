[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244047225","html_url":"https://github.com/elastic/elasticsearch/issues/20266#issuecomment-244047225","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20266","id":244047225,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDA0NzIyNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-09-01T11:06:37Z","updated_at":"2016-09-01T11:06:37Z","author_association":"CONTRIBUTOR","body":"Determining this is only attempted on linux today (https://github.com/elastic/elasticsearch/blob/master/core/src/main/java/org/elasticsearch/env/ESFileStore.java#L57). I'm wondering if Docker is not considered to be Linux by `org.apache.lucene.util.Constants`.\n\nOr maybe it is and the check fails further down in the process.  Could you investigate this method and see what is different about Docker that causes SSD detection to fail?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244070764","html_url":"https://github.com/elastic/elasticsearch/issues/20266#issuecomment-244070764","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20266","id":244070764,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDA3MDc2NA==","user":{"login":"kjelle","id":598905,"node_id":"MDQ6VXNlcjU5ODkwNQ==","avatar_url":"https://avatars2.githubusercontent.com/u/598905?v=4","gravatar_id":"","url":"https://api.github.com/users/kjelle","html_url":"https://github.com/kjelle","followers_url":"https://api.github.com/users/kjelle/followers","following_url":"https://api.github.com/users/kjelle/following{/other_user}","gists_url":"https://api.github.com/users/kjelle/gists{/gist_id}","starred_url":"https://api.github.com/users/kjelle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kjelle/subscriptions","organizations_url":"https://api.github.com/users/kjelle/orgs","repos_url":"https://api.github.com/users/kjelle/repos","events_url":"https://api.github.com/users/kjelle/events{/privacy}","received_events_url":"https://api.github.com/users/kjelle/received_events","type":"User","site_admin":false},"created_at":"2016-09-01T12:59:31Z","updated_at":"2016-09-01T13:00:16Z","author_association":"NONE","body":"Code from `org.apache.lucene.util.Constants`;\nhttps://github.com/apache/lucene-solr/blob/master/lucene/core/src/java/org/apache/lucene/util/Constants.java#L40\n\nI ran a small java program using the same `System.getProperty(\"os.name\")`\n\n```\n$ docker exec elasticsearch-container-data-01 /bin/sh -c \"cat /tmp/PrintLinux.java\"\npublic class PrintLinux {\n    public static void main(String[] args) {\n        String OS_NAME = System.getProperty(\"os.name\");\n        boolean LINUX = OS_NAME.startsWith(\"Linux\");\n        System.out.println(LINUX);\n    }\n}\n```\n\nA quick test tells us the Constants.LINUX is true;\n\n```\n$ docker exec elasticsearch-container-data-01 /bin/sh -c \"cd /tmp; /usr/java/latest/bin/javac PrintLinux.java\"\n$ docker exec elasticsearch-container-data-01 /bin/sh -c \"cd /tmp; /usr/java/latest/bin/java PrintLinux\"\ntrue\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244079539","html_url":"https://github.com/elastic/elasticsearch/issues/20266#issuecomment-244079539","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20266","id":244079539,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDA3OTUzOQ==","user":{"login":"kjelle","id":598905,"node_id":"MDQ6VXNlcjU5ODkwNQ==","avatar_url":"https://avatars2.githubusercontent.com/u/598905?v=4","gravatar_id":"","url":"https://api.github.com/users/kjelle","html_url":"https://github.com/kjelle","followers_url":"https://api.github.com/users/kjelle/followers","following_url":"https://api.github.com/users/kjelle/following{/other_user}","gists_url":"https://api.github.com/users/kjelle/gists{/gist_id}","starred_url":"https://api.github.com/users/kjelle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kjelle/subscriptions","organizations_url":"https://api.github.com/users/kjelle/orgs","repos_url":"https://api.github.com/users/kjelle/repos","events_url":"https://api.github.com/users/kjelle/events{/privacy}","received_events_url":"https://api.github.com/users/kjelle/received_events","type":"User","site_admin":false},"created_at":"2016-09-01T13:32:58Z","updated_at":"2016-09-01T13:32:58Z","author_association":"NONE","body":"There seems to be an expcetion when calling toRealPath in spinsLinux (https://github.com/apache/lucene-solr/blob/master/lucene/core/src/java/org/apache/lucene/util/IOUtils.java#L506)\n\nUsing the IOUtils.spinsLinux directly;\n\n```\njava.nio.file.NoSuchFileException: /dev/sdb1\n        at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)\n        at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)\n        at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)\n        at sun.nio.fs.UnixPath.toRealPath(UnixPath.java:837)\n        at PrintLinux.spinsLinux(PrintLinux.java:49)\n        at PrintLinux.main(PrintLinux.java:15)\n\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244363855","html_url":"https://github.com/elastic/elasticsearch/issues/20266#issuecomment-244363855","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20266","id":244363855,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDM2Mzg1NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-09-02T12:40:46Z","updated_at":"2016-09-02T12:40:46Z","author_association":"CONTRIBUTOR","body":"Apparently you can choose to mount drives in Docker - try adding an entry to fstab?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/258901918","html_url":"https://github.com/elastic/elasticsearch/issues/20266#issuecomment-258901918","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20266","id":258901918,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODkwMTkxOA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-11-07T17:25:40Z","updated_at":"2016-11-07T17:25:40Z","author_association":"MEMBER","body":"No feedback, closing. (Additionally, the SSD detection is done in Lucene; if you continue to have issues, I suggest opening an issue there.)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/285446974","html_url":"https://github.com/elastic/elasticsearch/issues/20266#issuecomment-285446974","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20266","id":285446974,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTQ0Njk3NA==","user":{"login":"ebuildy","id":1219817,"node_id":"MDQ6VXNlcjEyMTk4MTc=","avatar_url":"https://avatars0.githubusercontent.com/u/1219817?v=4","gravatar_id":"","url":"https://api.github.com/users/ebuildy","html_url":"https://github.com/ebuildy","followers_url":"https://api.github.com/users/ebuildy/followers","following_url":"https://api.github.com/users/ebuildy/following{/other_user}","gists_url":"https://api.github.com/users/ebuildy/gists{/gist_id}","starred_url":"https://api.github.com/users/ebuildy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebuildy/subscriptions","organizations_url":"https://api.github.com/users/ebuildy/orgs","repos_url":"https://api.github.com/users/ebuildy/repos","events_url":"https://api.github.com/users/ebuildy/events{/privacy}","received_events_url":"https://api.github.com/users/ebuildy/received_events","type":"User","site_admin":false},"created_at":"2017-03-09T19:01:38Z","updated_at":"2017-03-09T19:01:38Z","author_association":"CONTRIBUTOR","body":"Is there any performance impact because of this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/285449510","html_url":"https://github.com/elastic/elasticsearch/issues/20266#issuecomment-285449510","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20266","id":285449510,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTQ0OTUxMA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2017-03-09T19:10:52Z","updated_at":"2017-03-09T19:10:52Z","author_association":"MEMBER","body":"@ebuildy it is used to set the number of merge threads, it will default to 1 when not on SSD and 4 when on a SSD, but you can manually set this in `index.merge.scheduler.max_thread_count`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/333484918","html_url":"https://github.com/elastic/elasticsearch/issues/20266#issuecomment-333484918","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20266","id":333484918,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzQ4NDkxOA==","user":{"login":"lostpebble","id":1508863,"node_id":"MDQ6VXNlcjE1MDg4NjM=","avatar_url":"https://avatars0.githubusercontent.com/u/1508863?v=4","gravatar_id":"","url":"https://api.github.com/users/lostpebble","html_url":"https://github.com/lostpebble","followers_url":"https://api.github.com/users/lostpebble/followers","following_url":"https://api.github.com/users/lostpebble/following{/other_user}","gists_url":"https://api.github.com/users/lostpebble/gists{/gist_id}","starred_url":"https://api.github.com/users/lostpebble/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lostpebble/subscriptions","organizations_url":"https://api.github.com/users/lostpebble/orgs","repos_url":"https://api.github.com/users/lostpebble/repos","events_url":"https://api.github.com/users/lostpebble/events{/privacy}","received_events_url":"https://api.github.com/users/lostpebble/received_events","type":"User","site_admin":false},"created_at":"2017-10-02T09:30:34Z","updated_at":"2017-10-02T09:30:34Z","author_association":"NONE","body":"Hi everyone,\r\n\r\nRunning into this issue today as well. Just deployed some nodes onto Kubernetes on GKE - provisioned some SSDs for each data node. But when I check the node stats it's showing `spin: true` for the disk under `fs`. Otherwise, all the other stats of the drives are correct (the size etc.) so I think it must be seeing the correct SSD drives but just not detecting them as such.\r\n\r\nThey are not local SSD as recommended (I'll get there eventually), but they are SSD in the same data centre so hoping it won't be too much of a performance bottleneck.\r\n\r\nI guess for now I should just use the manual setting as @dakrone recommended. Had I not been a bit pedantic and checked out all the stats stuff I might have missed it though, so something that should still probably be looked into.\r\n\r\nOr is there a reason I should maybe not increase the number of merge threads? Since they're not completely local SSD drives.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/333723854","html_url":"https://github.com/elastic/elasticsearch/issues/20266#issuecomment-333723854","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20266","id":333723854,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzcyMzg1NA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-10-03T02:50:07Z","updated_at":"2017-10-03T02:50:07Z","author_association":"MEMBER","body":"@lostpebble In 2.x we default to assuming SSD and set the thread counts accordingly and expect users on spinning discs to adjust down accordingly. The SSD detection is for reporting purposes only and in fact as of right now we’ve removed it in 6.0.0.","performed_via_github_app":null}]