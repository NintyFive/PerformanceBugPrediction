[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/555047019","html_url":"https://github.com/elastic/elasticsearch/issues/49247#issuecomment-555047019","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49247","id":555047019,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NTA0NzAxOQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-11-18T14:48:08Z","updated_at":"2019-11-18T14:48:08Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features (:Core/Features/Ingest)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/555059844","html_url":"https://github.com/elastic/elasticsearch/issues/49247#issuecomment-555059844","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49247","id":555059844,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NTA1OTg0NA==","user":{"login":"webmat","id":2300,"node_id":"MDQ6VXNlcjIzMDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2300?v=4","gravatar_id":"","url":"https://api.github.com/users/webmat","html_url":"https://github.com/webmat","followers_url":"https://api.github.com/users/webmat/followers","following_url":"https://api.github.com/users/webmat/following{/other_user}","gists_url":"https://api.github.com/users/webmat/gists{/gist_id}","starred_url":"https://api.github.com/users/webmat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/webmat/subscriptions","organizations_url":"https://api.github.com/users/webmat/orgs","repos_url":"https://api.github.com/users/webmat/repos","events_url":"https://api.github.com/users/webmat/events{/privacy}","received_events_url":"https://api.github.com/users/webmat/received_events","type":"User","site_admin":false},"created_at":"2019-11-18T15:16:16Z","updated_at":"2019-11-18T15:43:07Z","author_association":"NONE","body":"One very important aspect of this added flexibility is specifically to let the user add their own pipelines around stack-provided pipelines without having to modify the existing pipeline.\r\n\r\nI've been feeling that need for a while, and one way I've been thinking about this is to provide \"before hooks\" or \"after hooks\", where users can insert their own pipelines anywhere they need.\r\n\r\nWhen users are forced to modify pipelines provided by products in the stack -- like Beats modules -- they're signing up to permanently having to re-apply their changes whenever they upgrade the product. Or worse, they won't remember, and whatever they improved will be lost when they upgrade.\r\n\r\nApproaching this in this in a generic fashion like before/after hooks would let users work around not only provided stack pipelines, but also around their own team structure & areas of responsibility.\r\n\r\nConsider this example:\r\n\r\n* A stack-provided ingest pipeline like the Filebeat Apache httpd module's is used for multiple web apps\r\n* The team managing a central pipeline hooks after the module's pipeline to perform additional work relevant to all deployments.\r\n  * E.g. adjusting older Beats module outputs to newer versions of ECS\r\n* The team managing one of the Apache deployments have their own adjustments they want to do, before the default processing kicks in.\r\n  * E.g. In a prior life I would append 20-ish kv after a default apache log\r\n\r\nWith this in mind, I think it would be great to offer the ability to hook before/after via the API call, and via the index setting.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/555060668","html_url":"https://github.com/elastic/elasticsearch/issues/49247#issuecomment-555060668","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49247","id":555060668,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NTA2MDY2OA==","user":{"login":"webmat","id":2300,"node_id":"MDQ6VXNlcjIzMDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2300?v=4","gravatar_id":"","url":"https://api.github.com/users/webmat","html_url":"https://github.com/webmat","followers_url":"https://api.github.com/users/webmat/followers","following_url":"https://api.github.com/users/webmat/following{/other_user}","gists_url":"https://api.github.com/users/webmat/gists{/gist_id}","starred_url":"https://api.github.com/users/webmat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/webmat/subscriptions","organizations_url":"https://api.github.com/users/webmat/orgs","repos_url":"https://api.github.com/users/webmat/repos","events_url":"https://api.github.com/users/webmat/events{/privacy}","received_events_url":"https://api.github.com/users/webmat/received_events","type":"User","site_admin":false},"created_at":"2019-11-18T15:18:00Z","updated_at":"2019-11-18T15:19:10Z","author_association":"NONE","body":"Modifying a stack pipeline is possible but is nasty, [as you can see here](https://gist.github.com/webmat/54a3cfb6a59d1fb512591b110be50491) (scroll to \"Ingest Node Pipeline\").","performed_via_github_app":null}]