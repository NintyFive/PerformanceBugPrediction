[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158042625","html_url":"https://github.com/elastic/elasticsearch/issues/14853#issuecomment-158042625","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14853","id":158042625,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODA0MjYyNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-19T12:21:29Z","updated_at":"2015-11-19T12:21:29Z","author_association":"CONTRIBUTOR","body":"@jpountz what do you think?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158085002","html_url":"https://github.com/elastic/elasticsearch/issues/14853#issuecomment-158085002","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14853","id":158085002,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODA4NTAwMg==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-11-19T15:11:54Z","updated_at":"2015-11-19T15:11:54Z","author_association":"CONTRIBUTOR","body":"+1 I think this is a good point\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162417972","html_url":"https://github.com/elastic/elasticsearch/issues/14853#issuecomment-162417972","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14853","id":162417972,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjQxNzk3Mg==","user":{"login":"xzer","id":1311634,"node_id":"MDQ6VXNlcjEzMTE2MzQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1311634?v=4","gravatar_id":"","url":"https://api.github.com/users/xzer","html_url":"https://github.com/xzer","followers_url":"https://api.github.com/users/xzer/followers","following_url":"https://api.github.com/users/xzer/following{/other_user}","gists_url":"https://api.github.com/users/xzer/gists{/gist_id}","starred_url":"https://api.github.com/users/xzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xzer/subscriptions","organizations_url":"https://api.github.com/users/xzer/orgs","repos_url":"https://api.github.com/users/xzer/repos","events_url":"https://api.github.com/users/xzer/events{/privacy}","received_events_url":"https://api.github.com/users/xzer/received_events","type":"User","site_admin":false},"created_at":"2015-12-07T05:54:54Z","updated_at":"2015-12-07T05:54:54Z","author_association":"NONE","body":"@clintongormley  I noticed that you tagged this issue as enhancement, but I think it is actually a bug which cause different data structure between java api and the raw json response format.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162730415","html_url":"https://github.com/elastic/elasticsearch/issues/14853#issuecomment-162730415","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14853","id":162730415,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjczMDQxNQ==","user":{"login":"fltiago","id":384326,"node_id":"MDQ6VXNlcjM4NDMyNg==","avatar_url":"https://avatars0.githubusercontent.com/u/384326?v=4","gravatar_id":"","url":"https://api.github.com/users/fltiago","html_url":"https://github.com/fltiago","followers_url":"https://api.github.com/users/fltiago/followers","following_url":"https://api.github.com/users/fltiago/following{/other_user}","gists_url":"https://api.github.com/users/fltiago/gists{/gist_id}","starred_url":"https://api.github.com/users/fltiago/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fltiago/subscriptions","organizations_url":"https://api.github.com/users/fltiago/orgs","repos_url":"https://api.github.com/users/fltiago/repos","events_url":"https://api.github.com/users/fltiago/events{/privacy}","received_events_url":"https://api.github.com/users/fltiago/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T01:38:07Z","updated_at":"2015-12-08T01:38:07Z","author_association":"NONE","body":"@xzer so, in your opinion those fields `_routing` and `_timestamp` should be in a `metaFields` attribute?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162734717","html_url":"https://github.com/elastic/elasticsearch/issues/14853#issuecomment-162734717","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14853","id":162734717,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjczNDcxNw==","user":{"login":"xzer","id":1311634,"node_id":"MDQ6VXNlcjEzMTE2MzQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1311634?v=4","gravatar_id":"","url":"https://api.github.com/users/xzer","html_url":"https://github.com/xzer","followers_url":"https://api.github.com/users/xzer/followers","following_url":"https://api.github.com/users/xzer/following{/other_user}","gists_url":"https://api.github.com/users/xzer/gists{/gist_id}","starred_url":"https://api.github.com/users/xzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xzer/subscriptions","organizations_url":"https://api.github.com/users/xzer/orgs","repos_url":"https://api.github.com/users/xzer/repos","events_url":"https://api.github.com/users/xzer/events{/privacy}","received_events_url":"https://api.github.com/users/xzer/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T01:59:30Z","updated_at":"2015-12-08T01:59:30Z","author_association":"NONE","body":"@fltiago, yes, I think the _routing and _timestamp should be as meta fields rather than common fields of the query result since the responsed raw json format also does not include them in result fields.\n\nto clarify, assume I performed the following query,\n\n``` javascript\n{\n  \"from\": 0,\n  \"size\": 10,\n  \"query\": {\n    \"bool\": {\n      \"must\": {\n        \"terms\": {\n          \"someIds\": [\n            788,\n            2510,\n            2534,\n            3158\n          ]\n        }\n      }\n    }\n  },\n  \"fields\": \"oneField\",\n}\n```\n\nthen I got the following result:\n\n``` javascript\n\"hits\": [\n\n    {\n        \"_index\": \"some_index\",\n        \"_type\": \"some_type\",\n        \"_id\": \"4108260_1991\",\n        \"_score\": 16.746162,\n        \"_routing\": \"1991\",\n        \"_timestamp\": 1445431608007,\n        \"fields\": {\n            \"oneField\": [\n                4108260\n            ]\n        }\n    }\n    ,\n    {\n        \"_index\": \"some_index\",\n        \"_type\": \"some_type\",\n        \"_id\": \"421549_2002\",\n        \"_score\": 16.746162,\n        \"_routing\": \"2002\",\n        \"_timestamp\": 1445450850478,\n        \"fields\": {\n            \"oneField\": [\n                421549\n            ]\n        }\n    }\n```\n\nOn the java side, when the developer tries to iterate all the queried fields from SearchHit, he should never expect that there are other unknown fields except those are specified  by \"fields\" in the query.\n\nI am agree with that for most cases which does not cause problems even there are two extra fields, but for some cases, like mine, it broke my program.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218748437","html_url":"https://github.com/elastic/elasticsearch/issues/14853#issuecomment-218748437","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14853","id":218748437,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODc0ODQzNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T12:55:36Z","updated_at":"2016-05-12T12:55:36Z","author_association":"CONTRIBUTOR","body":"Closing in favour of #18280\n","performed_via_github_app":null}]