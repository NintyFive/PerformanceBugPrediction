{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3821","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3821/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3821/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3821/events","html_url":"https://github.com/elastic/elasticsearch/issues/3821","id":20417559,"node_id":"MDU6SXNzdWUyMDQxNzU1OQ==","number":3821,"title":"Add support for `shard_size` for terms & terms_stats facets","user":{"login":"uboness","id":211019,"node_id":"MDQ6VXNlcjIxMTAxOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/211019?v=4","gravatar_id":"","url":"https://api.github.com/users/uboness","html_url":"https://github.com/uboness","followers_url":"https://api.github.com/users/uboness/followers","following_url":"https://api.github.com/users/uboness/following{/other_user}","gists_url":"https://api.github.com/users/uboness/gists{/gist_id}","starred_url":"https://api.github.com/users/uboness/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uboness/subscriptions","organizations_url":"https://api.github.com/users/uboness/orgs","repos_url":"https://api.github.com/users/uboness/repos","events_url":"https://api.github.com/users/uboness/events{/privacy}","received_events_url":"https://api.github.com/users/uboness/received_events","type":"User","site_admin":false},"labels":[{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":56772237,"node_id":"MDU6TGFiZWw1Njc3MjIzNw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.90.6","name":"v0.90.6","color":"e0e0e0","default":false,"description":null},{"id":37906111,"node_id":"MDU6TGFiZWwzNzkwNjExMQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.0.0.Beta1","name":"v1.0.0.Beta1","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2013-10-02T19:48:58Z","updated_at":"2013-11-24T23:59:07Z","closed_at":"2013-10-02T20:03:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"`shard_size` will enable to increase the accuracy of the returned term entries.\n\nThe `size` parameter defines how many top terms should be returned out\nof the overall terms list. By default, the node coordinating the\nsearch process will ask each shard to provide its own top `size` terms\nand once all shards respond, it will reduces the results to the final list\nthat will then be sent back to the client. This means that if the number\nof unique terms is greater than `size`, the returned list is slightly off\nand not accurate (it could be that the term counts are slightly off and it\ncould even be that a term that should have been in the top `size` entries\nwas not returned).\n\nThe higher the requested `size` is, the more accurate the results will be,\nbut also, the more expensive it will be to compute the final results (both\ndue to bigger priority queues that are managed on a shard level and due to\nbigger data transfers between the nodes and the client). In an attempt to\nminimize the extra work that comes with bigger requested `size` we a\n`shard_size` parameter was introduced. The once defined, it will determine\nhow many terms the coordinating node is requesting from each shard. Once\nall the shards responded, the coordinating node will then reduce them\nto a final result which will be based on the `size` parameter - this way,\nonce can increase the accuracy of the returned terms and avoid the overhead\nof streaming a big list of terms back to the client.\n\nNote that `shard_size` cannot be smaller than `size`... if that's the case\nelasticsearch will override it and reset it to be equal to `size`.\n","closed_by":{"login":"uboness","id":211019,"node_id":"MDQ6VXNlcjIxMTAxOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/211019?v=4","gravatar_id":"","url":"https://api.github.com/users/uboness","html_url":"https://github.com/uboness","followers_url":"https://api.github.com/users/uboness/followers","following_url":"https://api.github.com/users/uboness/following{/other_user}","gists_url":"https://api.github.com/users/uboness/gists{/gist_id}","starred_url":"https://api.github.com/users/uboness/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uboness/subscriptions","organizations_url":"https://api.github.com/users/uboness/orgs","repos_url":"https://api.github.com/users/uboness/repos","events_url":"https://api.github.com/users/uboness/events{/privacy}","received_events_url":"https://api.github.com/users/uboness/received_events","type":"User","site_admin":false},"performed_via_github_app":null}