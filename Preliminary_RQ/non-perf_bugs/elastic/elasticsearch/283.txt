{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/283","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/283/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/283/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/283/events","html_url":"https://github.com/elastic/elasticsearch/issues/283","id":264498,"node_id":"MDU6SXNzdWUyNjQ0OTg=","number":283,"title":"ThreadLocals not cleared","user":{"login":"daspilker","id":47957,"node_id":"MDQ6VXNlcjQ3OTU3","avatar_url":"https://avatars3.githubusercontent.com/u/47957?v=4","gravatar_id":"","url":"https://api.github.com/users/daspilker","html_url":"https://github.com/daspilker","followers_url":"https://api.github.com/users/daspilker/followers","following_url":"https://api.github.com/users/daspilker/following{/other_user}","gists_url":"https://api.github.com/users/daspilker/gists{/gist_id}","starred_url":"https://api.github.com/users/daspilker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daspilker/subscriptions","organizations_url":"https://api.github.com/users/daspilker/orgs","repos_url":"https://api.github.com/users/daspilker/repos","events_url":"https://api.github.com/users/daspilker/events{/privacy}","received_events_url":"https://api.github.com/users/daspilker/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"assignees":[{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false}],"milestone":null,"comments":18,"created_at":"2010-07-30T13:19:17Z","updated_at":"2016-04-22T12:06:02Z","closed_at":"2016-04-22T12:05:33Z","author_association":"NONE","active_lock_reason":null,"body":"I am running ElasticSearch 0.9.0. My web application uses the Java API to connect to the server. After closing the client node, several API objects are still referenced by ThreadLocals. As a consequence the web application can not be garbage collected after being undeployed. This creates a memory leak.\n\n```\n30.07.2010 14:59:07 org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap\nSCHWERWIEGEND: The web application [] created a ThreadLocal with key of type [null] (value [org.elasticsearch.common.inject.InjectorImpl$1@19d44df]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@149895]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.\n30.07.2010 14:59:07 org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap\nSCHWERWIEGEND: The web application [] created a ThreadLocal with key of type [null] (value [org.elasticsearch.common.util.concurrent.jsr166y.ThreadLocalRandom$1@2d8a59]) and a value of type [org.elasticsearch.common.util.concurrent.jsr166y.ThreadLocalRandom] (value [org.elasticsearch.common.util.concurrent.jsr166y.ThreadLocalRandom@1d60b6a]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.\n30.07.2010 14:59:07 org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap\nSCHWERWIEGEND: The web application [] created a ThreadLocal with key of type [null] (value [org.elasticsearch.common.inject.InjectorImpl$1@19d44df]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@1876a6d]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.\n```\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}