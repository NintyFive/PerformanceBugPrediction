{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/19711","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19711/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19711/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19711/events","html_url":"https://github.com/elastic/elasticsearch/issues/19711","id":168584884,"node_id":"MDU6SXNzdWUxNjg1ODQ4ODQ=","number":19711,"title":"Master: Netty4 rest tests take much longer under linux","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"labels":[{"id":146854632,"node_id":"MDU6TGFiZWwxNDY4NTQ2MzI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Network","name":":Distributed/Network","color":"0e8a16","default":false,"description":"Http and internode communication implementations"},{"id":60445228,"node_id":"MDU6TGFiZWw2MDQ0NTIyOA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest","name":">test","color":"5319e7","default":false,"description":"Issues or PRs that are addressing/adding tests"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2016-08-01T07:36:25Z","updated_at":"2016-08-03T15:42:56Z","closed_at":"2016-08-01T17:49:33Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Elasticsearch version**: master\n\n**JVM version**: 1.8.0_91\n**OS version**:  Fedora 23, Ubuntu\n\n**Description of the problem including expected versus actual behavior**:\nRunning the netty 4 tests under fast linux boxes turns out to be much slower than under osx using a far slower notebook. Asked several other developers to verify on their linux workstations, where the same happened.\n\nI only have remote SSH access to a fast linux box and havent gotten a profiler running via SSH correctly yet, so my current findings are rather external. Will try to setup ASAP.\n\nTwo current findings, which I cannot yet make any sense of\n- I/O seems huge when the test runs. Running `dstat  -r -d -c --disk-util` while the test runs, shows a nearly 100% utilization of the disk, even though there are only 51MB of logs written after a full test run. The test ran on an SSD.\n- Running sysdig for 90 seconds (created 500MB logs) while the test was running, shows that it spends most time in `epoll` and `futex` system calls (far more time than the 90 seconds, so must be run in parallel), could not spot any huge file I/O however.\n\n**Steps to reproduce**:\n1. `cd modules/transport-netty4`\n2. `gradle integTest -Dtests.class='*.Netty4ClientYamlTestSuiteIT'`\n\nAlso, reducing the number of nodes from two to one makes the tests go faster (in both cases), but they are still of by a factor of two between that fast linux workstation and my notebook.\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}