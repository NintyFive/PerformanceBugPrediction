{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8160","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8160/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8160/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8160/events","html_url":"https://github.com/elastic/elasticsearch/issues/8160","id":46254837,"node_id":"MDU6SXNzdWU0NjI1NDgzNw==","number":8160,"title":"TopChildren Queries Waste Memory","user":{"login":"kire321","id":3305188,"node_id":"MDQ6VXNlcjMzMDUxODg=","avatar_url":"https://avatars1.githubusercontent.com/u/3305188?v=4","gravatar_id":"","url":"https://api.github.com/users/kire321","html_url":"https://github.com/kire321","followers_url":"https://api.github.com/users/kire321/followers","following_url":"https://api.github.com/users/kire321/following{/other_user}","gists_url":"https://api.github.com/users/kire321/gists{/gist_id}","starred_url":"https://api.github.com/users/kire321/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kire321/subscriptions","organizations_url":"https://api.github.com/users/kire321/orgs","repos_url":"https://api.github.com/users/kire321/repos","events_url":"https://api.github.com/users/kire321/events{/privacy}","received_events_url":"https://api.github.com/users/kire321/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2014-10-20T10:21:06Z","updated_at":"2014-10-20T17:42:25Z","closed_at":"2014-10-20T17:42:25Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The TopChildrenQuery allocates an array to hold the results of the query. Currently, the size of this array is based on the number of documents in the index and can be many megabytes in size. Instead, it should be based on the number of parent documents that were asked for.\n\nPull request coming soon.\nDetails: Look for `readerParentDocs = new IntObjectOpenHashMap<>(indexReader.maxDoc());` in `src/main/java/org/elasticsearch/index/search/child/TopChildrenQuery.java`\n","closed_by":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"performed_via_github_app":null}