[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241404635","html_url":"https://github.com/elastic/elasticsearch/issues/20099#issuecomment-241404635","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20099","id":241404635,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTQwNDYzNQ==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2016-08-22T12:58:57Z","updated_at":"2016-08-22T12:58:57Z","author_association":"MEMBER","body":"I have just tried to reproduce this with the below example but was not able to get what you are seeing, maybe there is something I am missing. Could you give a similar full reproduction example so we can reproduce what you are seeing and tey to see whats going on?\n\n```\nDELETE test\n\nPOST test/test/1\n{\n  \"foo\": \"bar\"\n}\n\nGET test/_search\n{\n  \"query\": { \"wildcard\" : { \"foo\" : \"63\" } }\n}\n```\n\nResponse form search:\n\n```\n{\n  \"took\" : 48,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 5,\n    \"successful\" : 5,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 0,\n    \"max_score\" : null,\n    \"hits\" : [ ]\n  }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241464706","html_url":"https://github.com/elastic/elasticsearch/issues/20099#issuecomment-241464706","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20099","id":241464706,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTQ2NDcwNg==","user":{"login":"niko-dotlabs","id":18420306,"node_id":"MDQ6VXNlcjE4NDIwMzA2","avatar_url":"https://avatars3.githubusercontent.com/u/18420306?v=4","gravatar_id":"","url":"https://api.github.com/users/niko-dotlabs","html_url":"https://github.com/niko-dotlabs","followers_url":"https://api.github.com/users/niko-dotlabs/followers","following_url":"https://api.github.com/users/niko-dotlabs/following{/other_user}","gists_url":"https://api.github.com/users/niko-dotlabs/gists{/gist_id}","starred_url":"https://api.github.com/users/niko-dotlabs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niko-dotlabs/subscriptions","organizations_url":"https://api.github.com/users/niko-dotlabs/orgs","repos_url":"https://api.github.com/users/niko-dotlabs/repos","events_url":"https://api.github.com/users/niko-dotlabs/events{/privacy}","received_events_url":"https://api.github.com/users/niko-dotlabs/received_events","type":"User","site_admin":false},"created_at":"2016-08-22T16:12:29Z","updated_at":"2016-08-22T16:12:29Z","author_association":"NONE","body":"Just recognized that the field mapping has been set to number. maybe \nthat's the difference...\n\nI'll provide the full reproduction sample as soon as possible.\n\nThanks\n\nAm 22.08.2016 um 15:00 schrieb Colin Goodheart-Smithe:\n\n> I have just tried to reproduce this with the below example but was not \n> able to get what you are seeing, maybe there is something I am \n> missing. Could you give a similar full reproduction example so we can \n> reproduce what you are seeing and tey to see whats going on?\n> \n> |DELETE test POST test/test/1 { \"foo\": \"bar\" } GET test/_search { \n> \"query\": { \"wildcard\" : { \"foo\" : \"63\" } } } |\n> \n> Response form search:\n> \n> |{ \"took\" : 48, \"timed_out\" : false, \"_shards\" : { \"total\" : 5, \n> \"successful\" : 5, \"failed\" : 0 }, \"hits\" : { \"total\" : 0, \"max_score\" \n> : null, \"hits\" : [ ] } } |\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub \n> https://github.com/elastic/elasticsearch/issues/20099#issuecomment-241404635, \n> or mute the thread \n> https://github.com/notifications/unsubscribe-auth/ARkSUtNb0CzUfSYDVQJrdlZxMOhF8L5Sks5qiZ1UgaJpZM4JptYV.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241655956","html_url":"https://github.com/elastic/elasticsearch/issues/20099#issuecomment-241655956","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20099","id":241655956,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTY1NTk1Ng==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T07:58:20Z","updated_at":"2016-08-23T07:58:20Z","author_association":"MEMBER","body":"I've reproduced this on 2.3.1 with the following script:\n\n```\nDELETE test\n\nPOST test/test/1\n{\n  \"foo\": 102\n}\n\nGET test/_search\n{\n  \"query\": { \"wildcard\" : { \"foo\" : \"63\" } }\n}\n```\n\nThis gives the following output for the search request:\n\n```\n{\n  \"took\" : 50,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 5,\n    \"successful\" : 5,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 1,\n    \"max_score\" : 1.0,\n    \"hits\" : [ {\n      \"_index\" : \"test\",\n      \"_type\" : \"test\",\n      \"_id\" : \"1\",\n      \"_score\" : 1.0,\n      \"_source\" : {\n        \"foo\" : 102\n      }\n    } ]\n  }\n}\n```\n\nI was also able to reproduce the same on 2.3.5. In 5.0 this issue is not reproducible and the search request instead fails with:\n\n```\n{\n  \"error\": {\n    \"root_cause\": [\n      {\n        \"type\": \"query_shard_exception\",\n        \"reason\": \"failed to create query: {\\n  \\\"wildcard\\\" : {\\n    \\\"foo\\\" : {\\n      \\\"wildcard\\\" : \\\"63\\\",\\n      \\\"boost\\\" : 1.0\\n    }\\n  }\\n}\",\n        \"index_uuid\": \"g0YKR0jgS6aaiJ9rn4Ku1A\",\n        \"index\": \"test\"\n      }\n    ],\n    \"type\": \"search_phase_execution_exception\",\n    \"reason\": \"all shards failed\",\n    \"phase\": \"query\",\n    \"grouped\": true,\n    \"failed_shards\": [\n      {\n        \"shard\": 0,\n        \"index\": \"test\",\n        \"node\": \"ImBbtNUrTFGhL6uO-m5XKg\",\n        \"reason\": {\n          \"type\": \"query_shard_exception\",\n          \"reason\": \"failed to create query: {\\n  \\\"wildcard\\\" : {\\n    \\\"foo\\\" : {\\n      \\\"wildcard\\\" : \\\"63\\\",\\n      \\\"boost\\\" : 1.0\\n    }\\n  }\\n}\",\n          \"index_uuid\": \"g0YKR0jgS6aaiJ9rn4Ku1A\",\n          \"index\": \"test\",\n          \"caused_by\": {\n            \"type\": \"illegal_argument_exception\",\n            \"reason\": \"Cannot extract a term from a query of type class org.apache.lucene.document.FloatPoint$1: foo:[63.0 TO 63.0]\"\n          }\n        }\n      }\n    ],\n    \"caused_by\": {\n      \"type\": \"query_shard_exception\",\n      \"reason\": \"failed to create query: {\\n  \\\"wildcard\\\" : {\\n    \\\"foo\\\" : {\\n      \\\"wildcard\\\" : \\\"63\\\",\\n      \\\"boost\\\" : 1.0\\n    }\\n  }\\n}\",\n      \"index_uuid\": \"g0YKR0jgS6aaiJ9rn4Ku1A\",\n      \"index\": \"test\",\n      \"caused_by\": {\n        \"type\": \"illegal_argument_exception\",\n        \"reason\": \"Cannot extract a term from a query of type class org.apache.lucene.document.FloatPoint$1: foo:[63.0 TO 63.0]\"\n      }\n    }\n  },\n  \"status\": 400\n}\n```\n\nIt seems correct that a wildcard query will fail on a numeric field in 5.0 since wildcard queries are intended for string fields\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241728805","html_url":"https://github.com/elastic/elasticsearch/issues/20099#issuecomment-241728805","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20099","id":241728805,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTcyODgwNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T13:24:41Z","updated_at":"2016-08-23T13:24:41Z","author_association":"CONTRIBUTOR","body":"> It seems correct that a wildcard query will fail on a numeric field in 5.0 since wildcard queries are intended for string fields\n\nAgreed.  Closing\n","performed_via_github_app":null}]