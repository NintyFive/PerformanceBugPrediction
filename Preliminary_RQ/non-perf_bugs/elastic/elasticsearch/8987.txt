{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8987","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8987/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8987/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8987/events","html_url":"https://github.com/elastic/elasticsearch/issues/8987","id":52247325,"node_id":"MDU6SXNzdWU1MjI0NzMyNQ==","number":8987,"title":"1.4.2 upgrade - alias re-added that was previously deleted","user":{"login":"awick","id":427321,"node_id":"MDQ6VXNlcjQyNzMyMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/427321?v=4","gravatar_id":"","url":"https://api.github.com/users/awick","html_url":"https://github.com/awick","followers_url":"https://api.github.com/users/awick/followers","following_url":"https://api.github.com/users/awick/following{/other_user}","gists_url":"https://api.github.com/users/awick/gists{/gist_id}","starred_url":"https://api.github.com/users/awick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/awick/subscriptions","organizations_url":"https://api.github.com/users/awick/orgs","repos_url":"https://api.github.com/users/awick/repos","events_url":"https://api.github.com/users/awick/events{/privacy}","received_events_url":"https://api.github.com/users/awick/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2014-12-17T14:43:07Z","updated_at":"2014-12-19T12:17:29Z","closed_at":"2014-12-19T10:25:55Z","author_association":"NONE","active_lock_reason":null,"body":"Upgraded from 1.4.1 to 1.4.2 and an alias that I deleted over 6 months ago came back from the dead.  users is supposed to point to only users_v3 and after starting 1.4.2 it points to both users_v2 and users_v3\n\nOnly have 1 master and in the log I see\n\n```\n[2014-12-17 09:04:20,901][DEBUG][gateway.local            ] [moloches-m01a] [users_v2][0]: allocating [[users_v2][0], node[null], [P], s[UNASSIGNED]] to [[moloches-m13b][PGOeObyyTiK7k_371afHVA][moloches-m13][inet[/xxx.xxx.xxx.xxx:9300]]{max_local_storage_nodes=2, master=false}] on primary allocation\n[2014-12-17 09:04:34,190][DEBUG][gateway.local            ] [moloches-m01a] [users_v2][0]: allocating [[users_v2][0], node[null], [R], s[UNASSIGNED]] to [[moloches-m13a][tl3e6In3QvKZBGlqhplDtQ][moloches-m13][inet[/xxx.xxx.xxx.xxx:9301]]{max_local_storage_nodes=2, master=false}] in order to reuse its unallocated persistent store with total_size [16.1kb]\n[2014-12-17 09:04:35,129][DEBUG][gateway.local            ] [moloches-m01a] [users_v2][0]: allocating [[users_v2][0], node[null], [R], s[UNASSIGNED]] to [[moloches-m06a][9SZD9HknSo-UG7mboJHqDA][moloches-m06][inet[/xxx.xxx.xxx.xxx:9301]]{max_local_storage_nodes=2, master=false}] in order to reuse its unallocated persistent store with total_size [16.1kb]\n[2014-12-17 09:04:44,428][WARN ][cluster.metadata         ] [moloches-m01a] [users_v2] re-syncing mappings with cluster state for types [[user]]\n[2014-12-17 09:04:46,831][INFO ][gateway.local.state.meta ] [moloches-m01a] auto importing dangled indices [users_v3/OPEN][sessions-141215/OPEN][queries/OPEN][sessions-141213/OPEN][sessions-141208/OPEN][sessions-141210/OPEN][sessions-141216/OPEN][sessions-141211/OPEN][sessions-141207/OPEN][sessions-141214/OPEN][sessions-141209/OPEN][sessions-141212/OPEN] from [[moloches-m01b][Yl4uY29ATSq8x39XQLm1Ew][moloches-m01][inet[/xxx.xxx.xxx.xxx:9300]]{max_local_storage_nodes=2, master=false}]\n[2014-12-17 09:04:47,133][DEBUG][gateway.local            ] [moloches-m01a] [users_v3][0]: allocating [[users_v3][0], node[null], [P], s[UNASSIGNED]] to [[moloches-m01b][Yl4uY29ATSq8x39XQLm1Ew][moloches-m01][inet[/xxx.xxx.xxx.xxx:9300]]{max_local_storage_nodes=2, master=false}] on primary allocation\n[2014-12-17 09:05:11,302][DEBUG][gateway.local            ] [moloches-m01a] [users_v3][0]: allocating [[users_v3][0], node[null], [R], s[UNASSIGNED]] to [[moloches-m09a][zuz448dfQS2jI2acYVu4mw][moloches-m09][inet[/xxx.xxx.xxx.xxx:9300]]{max_local_storage_nodes=2, master=false}] in order to reuse its unallocated persistent store with total_size [20.3kb]\n[2014-12-17 09:05:11,302][DEBUG][gateway.local            ] [moloches-m01a] [users_v3][0]: allocating [[users_v3][0], node[null], [R], s[UNASSIGNED]] to [[moloches-m08a][KSG0tQ8CQrealhfPRFtJBA][moloches-m08][inet[/xxx.xxx.xxx.xxx:9301]]{max_local_storage_nodes=2, master=false}] in order to reuse its unallocated persistent store with total_size [20.3kb]\n```\n\n```\ncurl http://localhost:9200/_cat/aliases/users\nusers users_v2 - - -\nusers users_v3 - - -\n```\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}