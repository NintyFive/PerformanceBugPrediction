{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15626","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15626/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15626/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15626/events","html_url":"https://github.com/elastic/elasticsearch/issues/15626","id":123627689,"node_id":"MDU6SXNzdWUxMjM2Mjc2ODk=","number":15626,"title":"Unresponsive cluster: weird fluctuating behavior","user":{"login":"vicvega","id":715065,"node_id":"MDQ6VXNlcjcxNTA2NQ==","avatar_url":"https://avatars0.githubusercontent.com/u/715065?v=4","gravatar_id":"","url":"https://api.github.com/users/vicvega","html_url":"https://github.com/vicvega","followers_url":"https://api.github.com/users/vicvega/followers","following_url":"https://api.github.com/users/vicvega/following{/other_user}","gists_url":"https://api.github.com/users/vicvega/gists{/gist_id}","starred_url":"https://api.github.com/users/vicvega/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vicvega/subscriptions","organizations_url":"https://api.github.com/users/vicvega/orgs","repos_url":"https://api.github.com/users/vicvega/repos","events_url":"https://api.github.com/users/vicvega/events{/privacy}","received_events_url":"https://api.github.com/users/vicvega/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-12-23T09:31:17Z","updated_at":"2015-12-24T09:01:16Z","closed_at":"2015-12-24T09:01:16Z","author_association":"NONE","active_lock_reason":null,"body":"Hello\nSince a few days ago, my ES cluster is unresponsive and I noticed a weird fluctuating behavior.\n\nIf a periodically check the status, I see `number_of_pending_tasks` increasing (3 millions and more) and at the same time `unassigned_shards` decreasing (5k). And this is what I expected, but the weird thing is that, at a certain point it falls down and `unassigned_shards` goes back to 10k and `number_of_pending_tasks` back to 4k... and so on again and again... \n\n15 minutes ago my cluster status was \n\n```\n{\n  \"cluster_name\" : \"sods\",\n  \"status\" : \"red\",\n  \"timed_out\" : false,\n  \"number_of_nodes\" : 5,\n  \"number_of_data_nodes\" : 5,\n  \"active_primary_shards\" : 17969,\n  \"active_shards\" : 30613,\n  \"relocating_shards\" : 0,\n  \"initializing_shards\" : 2,\n  \"unassigned_shards\" : 5333,\n  \"delayed_unassigned_shards\" : 0,\n  \"number_of_pending_tasks\" : 3018887,\n  \"number_of_in_flight_fetch\" : 0,\n  \"task_max_waiting_in_queue_millis\" : 19152497,\n  \"active_shards_percent_as_number\" : 85.15911872705018\n}\n```\n\n10 minutes ago\n\n```\n{\n  \"cluster_name\" : \"sods\",\n  \"status\" : \"red\",\n  \"timed_out\" : false,\n  \"number_of_nodes\" : 5,\n  \"number_of_data_nodes\" : 5,\n  \"active_primary_shards\" : 17969,\n  \"active_shards\" : 30857,\n  \"relocating_shards\" : 0,\n  \"initializing_shards\" : 2,\n  \"unassigned_shards\" : 5089,               <==== decreasing, ok\n  \"delayed_unassigned_shards\" : 0,\n  \"number_of_pending_tasks\" : 3385989,               <==== increasing, ok \n  \"number_of_in_flight_fetch\" : 0,\n  \"task_max_waiting_in_queue_millis\" : 20548203,\n  \"active_shards_percent_as_number\" : 85.83787693334817\n}\n```\n\nAnd now \n\n```\n{\n  \"cluster_name\" : \"sods\",\n  \"status\" : \"red\",\n  \"timed_out\" : false,\n  \"number_of_nodes\" : 4,\n  \"number_of_data_nodes\" : 4,\n  \"active_primary_shards\" : 17969,\n  \"active_shards\" : 24204,\n  \"relocating_shards\" : 0,\n  \"initializing_shards\" : 8,\n  \"unassigned_shards\" : 11736,                     <======== up again!\n  \"delayed_unassigned_shards\" : 0,\n  \"number_of_pending_tasks\" : 4660,                     <======== fallen down!\n  \"number_of_in_flight_fetch\" : 0,\n  \"task_max_waiting_in_queue_millis\" : 96240,\n  \"active_shards_percent_as_number\" : 67.33058862801825\n}\n```\n\nThe same thing occurred several times in the last days. Is it a right behavior? \n\nI don't know what is going on. In the log files I see lots of `ProcessClusterEventTimeoutException`. I'm using Elasticsearch 2.0\n\nThanks for any advice\n","closed_by":{"login":"vicvega","id":715065,"node_id":"MDQ6VXNlcjcxNTA2NQ==","avatar_url":"https://avatars0.githubusercontent.com/u/715065?v=4","gravatar_id":"","url":"https://api.github.com/users/vicvega","html_url":"https://github.com/vicvega","followers_url":"https://api.github.com/users/vicvega/followers","following_url":"https://api.github.com/users/vicvega/following{/other_user}","gists_url":"https://api.github.com/users/vicvega/gists{/gist_id}","starred_url":"https://api.github.com/users/vicvega/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vicvega/subscriptions","organizations_url":"https://api.github.com/users/vicvega/orgs","repos_url":"https://api.github.com/users/vicvega/repos","events_url":"https://api.github.com/users/vicvega/events{/privacy}","received_events_url":"https://api.github.com/users/vicvega/received_events","type":"User","site_admin":false},"performed_via_github_app":null}