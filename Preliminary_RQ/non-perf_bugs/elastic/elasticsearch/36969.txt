{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/36969","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36969/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36969/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36969/events","html_url":"https://github.com/elastic/elasticsearch/issues/36969","id":393768970,"node_id":"MDU6SXNzdWUzOTM3Njg5NzA=","number":36969,"title":"span_or containing span_first's on different fields not working as expected","user":{"login":"fuzing","id":11649301,"node_id":"MDQ6VXNlcjExNjQ5MzAx","avatar_url":"https://avatars2.githubusercontent.com/u/11649301?v=4","gravatar_id":"","url":"https://api.github.com/users/fuzing","html_url":"https://github.com/fuzing","followers_url":"https://api.github.com/users/fuzing/followers","following_url":"https://api.github.com/users/fuzing/following{/other_user}","gists_url":"https://api.github.com/users/fuzing/gists{/gist_id}","starred_url":"https://api.github.com/users/fuzing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fuzing/subscriptions","organizations_url":"https://api.github.com/users/fuzing/orgs","repos_url":"https://api.github.com/users/fuzing/repos","events_url":"https://api.github.com/users/fuzing/events{/privacy}","received_events_url":"https://api.github.com/users/fuzing/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-12-23T17:54:13Z","updated_at":"2018-12-26T06:00:53Z","closed_at":"2018-12-26T06:00:53Z","author_association":"NONE","active_lock_reason":null,"body":"Elasticsearch versions: replicated with 6.5 -> 7.0-alpha2.    Probably goes back earlier.\r\n\r\nNote: this is simply the query portion as a JS object (i.e. it is transmitted to the ES server as proper JSON) - \r\n\r\n\r\n`       query: {\r\n          span_or: {\r\n            clauses: [\r\n              {\r\n                span_first: {\r\n                  match: {\r\n                    span_term: {\"title\": {value: \"abc\", boost: 1}}\r\n                  },\r\n                  end: 10,\r\n                }\r\n              },\r\n              {\r\n                span_first: {\r\n                  match: {\r\n                    span_term: {\"subtitle\": {value: \"abc\", boost: 1}}\r\n                  },\r\n                  end: 10,\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        }\r\n`\r\n\r\nThis query causes the following error:\r\n   query_shard_exception -> failed to create query\r\n   illegal argument exception -> Clauses must have same field\r\n\r\nThe way I read the error it appears that ES is complaining about the different field names (i.e. \"title\" vs. \"subtitle\" in the two span_first queries).    Is this the expected behavior?   If so, then how would one achieve the following result?:\r\n\r\n- get the union of results matching the search term \"abc\" on fields \"title\" and \"subtitle\", ranked using span_first heuristics (i.e. terms matched closest to the beginning of the field score higher).\r\n\r\nThank you!\r\n\r\n\r\n","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}