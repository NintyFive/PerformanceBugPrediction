[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/316492446","html_url":"https://github.com/elastic/elasticsearch/issues/25798#issuecomment-316492446","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25798","id":316492446,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNjQ5MjQ0Ng==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-07-19T19:31:23Z","updated_at":"2017-07-19T19:31:23Z","author_association":"MEMBER","body":"Apart from avoiding having our own abstractions for headers and entity etc., the main point of not hiding the apache http client classes is the config part. If one needs to configure ssl or what have you ( and there's many things you can configure in the http client), they can do it using the standard http client config and we can simply link to their documentation.\r\n\r\n> everything that uses the rest client will need to use our provided shaded classes\r\n\r\nThis means that e.g. users providing their config will be using our own `internal.org.apache.http` objects but apart from the imports everything else will be the same? Am I  missing some other implications of this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/316582197","html_url":"https://github.com/elastic/elasticsearch/issues/25798#issuecomment-316582197","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25798","id":316582197,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNjU4MjE5Nw==","user":{"login":"hub-cap","id":613352,"node_id":"MDQ6VXNlcjYxMzM1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/613352?v=4","gravatar_id":"","url":"https://api.github.com/users/hub-cap","html_url":"https://github.com/hub-cap","followers_url":"https://api.github.com/users/hub-cap/followers","following_url":"https://api.github.com/users/hub-cap/following{/other_user}","gists_url":"https://api.github.com/users/hub-cap/gists{/gist_id}","starred_url":"https://api.github.com/users/hub-cap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hub-cap/subscriptions","organizations_url":"https://api.github.com/users/hub-cap/orgs","repos_url":"https://api.github.com/users/hub-cap/repos","events_url":"https://api.github.com/users/hub-cap/events{/privacy}","received_events_url":"https://api.github.com/users/hub-cap/received_events","type":"User","site_admin":false},"created_at":"2017-07-20T02:57:09Z","updated_at":"2017-07-20T02:57:09Z","author_association":"CONTRIBUTOR","body":"I can see the need for custom config when creating your own `CloseableHttpAsyncClient`.\r\n\r\n> This means that e.g. users providing their config will be using our ownÂ internal.org.apache.httpobjects but apart from the imports everything else will be the same? Am I missing some other implications of this?\r\n\r\nThis is correct, a client would just need to change all their `org.apache.http` to `internal.org.apache.http`. \r\n\r\nIll gladly close this issue if this was an expected outcome of the rest client shading work. I wasn't sure so I wanted to bring it up.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/316610927","html_url":"https://github.com/elastic/elasticsearch/issues/25798#issuecomment-316610927","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25798","id":316610927,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNjYxMDkyNw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-07-20T06:37:22Z","updated_at":"2017-07-20T06:37:22Z","author_association":"MEMBER","body":"> Am I missing some other implications of this?\r\n\r\nYes, the implications are we will be forever \"stuck\" with the apache http client.  Keeping this out of the public api is what will allow us to even consider other http clients in the near or long term future.\r\n\r\nGiven the time frame, I assume we will have to live with this for at least 6.x (in which case we should rename the shaded prefix as \"internal\" then becomes very confusing as part of the public api).  But I think it is important to not restrict ourselves to one implementation forever by leaking the implementation details into the api.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/316617053","html_url":"https://github.com/elastic/elasticsearch/issues/25798#issuecomment-316617053","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25798","id":316617053,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNjYxNzA1Mw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-07-20T07:10:53Z","updated_at":"2017-07-20T07:10:53Z","author_association":"MEMBER","body":"I really don't see the problem with this. We can always change the underlying http client in a major version if we feel the need to. I don't think adding all these needed abstractions and maintaining them is worth the trouble, that was a conscious decision from the beginning.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/316617451","html_url":"https://github.com/elastic/elasticsearch/issues/25798#issuecomment-316617451","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25798","id":316617451,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNjYxNzQ1MQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-07-20T07:12:56Z","updated_at":"2017-07-20T07:12:56Z","author_association":"MEMBER","body":"Also, leaking of http client classes is not new with shading, it was already there. Good point on changing the package name as internal can become confusing.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/316653120","html_url":"https://github.com/elastic/elasticsearch/issues/25798#issuecomment-316653120","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25798","id":316653120,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNjY1MzEyMA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-07-20T09:43:14Z","updated_at":"2017-07-20T09:43:14Z","author_association":"CONTRIBUTOR","body":"> I really don't see the problem with this. We can always change the underlying http client in a major version if we feel the need to. I don't think adding all these needed abstractions and maintaining them is worth the trouble, that was a conscious decision from the beginning.\r\n\r\nI agree with this. at this point we have so many things to take care of, additional abstractions might be just noise. We can work towards changing it in 7.0 but for 6 we are set.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/319309631","html_url":"https://github.com/elastic/elasticsearch/issues/25798#issuecomment-319309631","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25798","id":319309631,"node_id":"MDEyOklzc3VlQ29tbWVudDMxOTMwOTYzMQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-08-01T08:51:26Z","updated_at":"2017-08-01T08:51:26Z","author_association":"MEMBER","body":"I will close this issue for now, we can re-open it in the future if we see that it's worth hiding these dependencies / replacing the http client impl, for now it's not.","performed_via_github_app":null}]