{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/42113","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42113/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42113/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42113/events","html_url":"https://github.com/elastic/elasticsearch/issues/42113","id":443417582,"node_id":"MDU6SXNzdWU0NDM0MTc1ODI=","number":42113,"title":"Machine Learning not working with non-wildcarded alias and cross cluster search","user":{"login":"jguay","id":19236038,"node_id":"MDQ6VXNlcjE5MjM2MDM4","avatar_url":"https://avatars2.githubusercontent.com/u/19236038?v=4","gravatar_id":"","url":"https://api.github.com/users/jguay","html_url":"https://github.com/jguay","followers_url":"https://api.github.com/users/jguay/followers","following_url":"https://api.github.com/users/jguay/following{/other_user}","gists_url":"https://api.github.com/users/jguay/gists{/gist_id}","starred_url":"https://api.github.com/users/jguay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jguay/subscriptions","organizations_url":"https://api.github.com/users/jguay/orgs","repos_url":"https://api.github.com/users/jguay/repos","events_url":"https://api.github.com/users/jguay/events{/privacy}","received_events_url":"https://api.github.com/users/jguay/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-05-13T14:04:11Z","updated_at":"2019-07-19T09:24:04Z","closed_at":"2019-07-19T09:23:52Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`):\r\n7.0.1\r\n**Plugins installed**: []\r\nNone\r\n**Description of the problem including expected versus actual behavior**:\r\nRollup caps endpoint and aliases on remote clusters\r\n\r\nAny ML job based on cross cluster search and an alias like \"cluster_two:monitoring-es\" fails. This was narrowed down to the following which also fails : \r\n```\r\nGET cluster_two:monitoring-es/_rollup/data\r\n```\r\n\r\nstack trace : \r\n```\r\n{\"type\": \"server\", \"timestamp\": \"2019-05-08T13:22:37,462+0000\", \"level\": \"DEBUG\", \"component\": \"r.suppressed\", \"cluster.name\": \"cluster0\", \"node.name\": \"es0\", \"cluster.uuid\": \"rTFY3KlpRa-FCxIuwHzxdA\", \"node.id\": \"ywH_S8sjS76Gar0m7v1fdg\",  \"message\": \"path: /cluster_two:monitoring-es/_rollup/data, params: {pretty=, index=cluster_two:monitoring-es}\" , \r\n\"stacktrace\": [\"org.elasticsearch.index.IndexNotFoundException: no such index [cluster_two:monitoring-es]\",\r\n\"at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver$WildcardExpressionResolver.indexNotFoundException(IndexNameExpressionResolver.java:747) ~[elasticsearch-7.0.1.jar:7.0.1]\",\r\n\"at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver$WildcardExpressionResolver.innerResolve(IndexNameExpressionResolver.java:699) ~[elasticsearch-7.0.1.jar:7.0.1]\",\r\n\"at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver$WildcardExpressionResolver.resolve(IndexNameExpressionResolver.java:655) ~[elasticsearch-7.0.1.jar:7.0.1]\",\r\n\"at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:163) ~[elasticsearch-7.0.1.jar:7.0.1]\",\r\n\"at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndexNames(IndexNameExpressionResolver.java:142) ~[elasticsearch-7.0.1.jar:7.0.1]\",\r\n\"at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndexNames(IndexNameExpressionResolver.java:102) ~[elasticsearch-7.0.1.jar:7.0.1]\",\r\n\"at org.elasticsearch.xpack.rollup.action.TransportGetRollupIndexCapsAction.doExecute(TransportGetRollupIndexCapsAction.java:49) ~[?:?]\",\r\n...\r\n```\r\n\r\nThis seems to come from[ this code](https://github.com/elastic/elasticsearch/blob/7.0/server/src/main/java/org/elasticsearch/cluster/metadata/IndexNameExpressionResolver.java#L695-L699)\r\n\r\n**Steps to reproduce**:\r\n\r\n 1. set up [cross cluster search](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-cross-cluster-search.html)\r\n 2. On cluster_two add an index alias\r\n 3. On cluster_one, add pattern \"cluster_two:aliasname\" and check data can be read from Discover\r\n 4. Define any ML job against this patter will fail to start data feed (\"cluster_two:aliasname*\" works around)\r\n 5. Also the following will fail when not wildcarded:\r\n```\r\nGET cluster_two:aliasname/_rollup/data\r\n```","closed_by":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"performed_via_github_app":null}