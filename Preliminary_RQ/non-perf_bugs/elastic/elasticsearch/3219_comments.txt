[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19904595","html_url":"https://github.com/elastic/elasticsearch/issues/3219#issuecomment-19904595","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3219","id":19904595,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTA0NTk1","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-06-24T12:48:08Z","updated_at":"2013-06-24T12:48:08Z","author_association":"CONTRIBUTOR","body":"Thinking about it, its also not possible to NOT cache the result of the lookup... \nMaybe that should also be possible? Or at least, when explicitly not caching the total filter, the lookup shouldn't be cached as well(it just makes no sense in this case).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19906162","html_url":"https://github.com/elastic/elasticsearch/issues/3219#issuecomment-19906162","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3219","id":19906162,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTA2MTYy","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-06-24T13:21:48Z","updated_at":"2013-06-24T13:21:48Z","author_association":"MEMBER","body":"I will fix the cache flag to be taken into account, I think caching the lookup makes sense almost all times, and its bounded by size by default, so you should be ok with defining a small size if you are concerned by it?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19907054","html_url":"https://github.com/elastic/elasticsearch/issues/3219#issuecomment-19907054","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3219","id":19907054,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTA3MDU0","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-06-24T13:37:51Z","updated_at":"2013-06-24T13:37:51Z","author_association":"CONTRIBUTOR","body":"Not really concerned about size as much as with consistency. \nI do think it might be useful to not cache the lookup. It's not that expensive of an operation(at least in my use case), and this way I don't have to worry about keeping the cache up to date(afaik, the only way to guarantee that is assigning it a key and clearing when needed?)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19907235","html_url":"https://github.com/elastic/elasticsearch/issues/3219#issuecomment-19907235","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3219","id":19907235,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTA3MjM1","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-06-24T13:41:11Z","updated_at":"2013-06-24T13:41:11Z","author_association":"MEMBER","body":"in that case, you can simply set `indices.cache.filter.terms.size` to `0`, or are you looking to do it per query call? If so, then we probably need another flag, cause the cache flag always means caching the filter itself (the bitsets per segment).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19907616","html_url":"https://github.com/elastic/elasticsearch/issues/3219#issuecomment-19907616","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3219","id":19907616,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTA3NjE2","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-06-24T13:47:58Z","updated_at":"2013-06-24T13:47:58Z","author_association":"CONTRIBUTOR","body":"I agree this should be possible to set per call, since setting that to 0 basically would interfere with other needs as well.\nBut I do think if you explicitly say _cache -> false, but then, the \"content\" of the filter is cached, makes it kind of pointless not caching in the first place, since the resulting filter will always be the same. Or am I missing something?\nIf its so, then I think its okay just using the global _cache flag as a hint for not caching the result of the lookup. I just dont see the use case where you dont want to cache the total filter, but want to cache the lookup...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19961632","html_url":"https://github.com/elastic/elasticsearch/issues/3219#issuecomment-19961632","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3219","id":19961632,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTYxNjMy","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-06-25T08:57:33Z","updated_at":"2013-06-25T08:57:33Z","author_association":"CONTRIBUTOR","body":"@kimchy \nAs a follow up on that...\nI ran some tests on this feature, where the lookup would fetch around 35K-60K terms, and the average lookup time was below 40ms(the lookup index has one single shard replicated across all nodes). Applying the filter was actually much more expensive, ranging on 700ms-1s. \n\nThis way, maybe it even makes sense caching the total filter using as key the hashed content of the lookup? This way if you are not caching the lookup, you might still get some benefits. Does it make sense?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19975402","html_url":"https://github.com/elastic/elasticsearch/issues/3219#issuecomment-19975402","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3219","id":19975402,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTc1NDAy","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-06-25T13:24:19Z","updated_at":"2013-06-25T13:24:19Z","author_association":"CONTRIBUTOR","body":"I creatd a ticket for that on https://github.com/elasticsearch/elasticsearch/issues/3236\n","performed_via_github_app":null}]