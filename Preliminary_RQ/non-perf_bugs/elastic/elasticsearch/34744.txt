{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/34744","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34744/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34744/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34744/events","html_url":"https://github.com/elastic/elasticsearch/issues/34744","id":372990854,"node_id":"MDU6SXNzdWUzNzI5OTA4NTQ=","number":34744,"title":"Some documented KV Filter options are not supported in 6.4.2","user":{"login":"martinwaite","id":2549711,"node_id":"MDQ6VXNlcjI1NDk3MTE=","avatar_url":"https://avatars2.githubusercontent.com/u/2549711?v=4","gravatar_id":"","url":"https://api.github.com/users/martinwaite","html_url":"https://github.com/martinwaite","followers_url":"https://api.github.com/users/martinwaite/followers","following_url":"https://api.github.com/users/martinwaite/following{/other_user}","gists_url":"https://api.github.com/users/martinwaite/gists{/gist_id}","starred_url":"https://api.github.com/users/martinwaite/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martinwaite/subscriptions","organizations_url":"https://api.github.com/users/martinwaite/orgs","repos_url":"https://api.github.com/users/martinwaite/repos","events_url":"https://api.github.com/users/martinwaite/events{/privacy}","received_events_url":"https://api.github.com/users/martinwaite/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-10-23T13:08:23Z","updated_at":"2018-10-23T14:20:11Z","closed_at":"2018-10-23T14:20:10Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\n\r\nVersion: 6.4.2, Build: default/rpm/04711c2/2018-09-26T13:34:09.098244Z, JVM: 1.8.0_191\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`):\r\n\r\nopenjdk version \"1.8.0_191\"\r\nOpenJDK Runtime Environment (build 1.8.0_191-b12)\r\nOpenJDK 64-Bit Server VM (build 25.191-b12, mixed mode)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\n\r\nLinux myhost 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nSome of the documented configuration options for KV Filter ingress processor are not supported.\r\n\r\n\"recursive\" and \"allow_duplicate_values\" options cannot be used.\r\n\r\n\r\n\r\n**Steps to reproduce**:\r\n\r\n1. recursive option:\r\n```\r\ncat kv.json\r\n{\r\n  \"description\": \"KV\",\r\n  \"processors\": [\r\n    {\r\n      \"set\" : {\r\n        \"field\": \"pipeline\",\r\n        \"value\": \"kv\"\r\n      }\r\n    },\r\n    {\r\n      \"kv\": {\r\n        \"recursive\": false,\r\n        \"field\": \"kv\",\r\n        \"prefix\": \"kv_\",\r\n        \"value_split\": \"=>'\",\r\n        \"field_split\": \"',\",\r\n        \"ignore_missing\": true,\r\n        \"trim_value\": \"'\"\r\n      }\r\n    }\r\n  ]\r\n}\r\n\r\ncurl -X PUT http://myhost:9200/_ingest/pipeline/kv -H \"Content-Type: application/json\" -T kv.json\r\n{\"error\":{\"root_cause\":[{\"type\":\"parse_exception\",\"reason\":\"processor [kv] doesn't support one or more provided configuration parameters [recursive]\",\"header\":{\"processor_type\":\"kv\"}}],\"type\":\"parse_exception\",\"reason\":\"processor [kv] doesn't support one or more provided configuration parameters [recursive]\",\"header\":{\"processor_type\":\"kv\"}},\"status\":400}\r\n```\r\n\r\n 2. allow_duplicate_values option\r\n\r\n```\r\n cat kv.json\r\n{\r\n  \"description\": \"KV\",\r\n  \"processors\": [\r\n    {\r\n      \"set\" : {\r\n        \"field\": \"pipeline\",\r\n        \"value\": \"kv\"\r\n      }\r\n    },\r\n    {\r\n      \"kv\": {\r\n        \"allow_duplicate_values\": true,\r\n        \"field\": \"kv\",\r\n        \"prefix\": \"kv_\",\r\n        \"value_split\": \"=>'\",\r\n        \"field_split\": \"',\",\r\n        \"ignore_missing\": true,\r\n        \"trim_value\": \"'\"\r\n      }\r\n    }\r\n  ]\r\n}\r\n\r\ncurl -X PUT http://myhost:9200/_ingest/pipeline/kv -H \"Content-Type: application/json\" -T kv.json\r\n{\"error\":{\"root_cause\":[{\"type\":\"parse_exception\",\"reason\":\"processor [kv] doesn't support one or more provided configuration parameters [allow_duplicate_values]\",\"header\":{\"processor_type\":\"kv\"}}],\"type\":\"parse_exception\",\"reason\":\"processor [kv] doesn't support one or more provided configuration parameters [allow_duplicate_values]\",\"header\":{\"processor_type\":\"kv\"}},\"status\":400}\r\n```\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n","closed_by":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"performed_via_github_app":null}