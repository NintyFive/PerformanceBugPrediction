[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/348437420","html_url":"https://github.com/elastic/elasticsearch/issues/27539#issuecomment-348437420","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27539","id":348437420,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODQzNzQyMA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-12-01T08:49:06Z","updated_at":"2017-12-01T08:49:06Z","author_association":"MEMBER","body":"Suggestions are built per shard and the best ones are kept on the coordinating node. \r\nWith a `size` of 1 in the phrase suggester options only the best suggestion among the shards is returned so it is normal that this suggestion comes from a single index (a shard in this index to be more precise). Try with a different size and you should see suggestions coming from other shards/index. \r\nI hope you don't mind if I close this issue, we have a forum that is better suited for this kind of questions:\r\nhttps://discuss.elastic.co/c/elasticsearch","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/348495634","html_url":"https://github.com/elastic/elasticsearch/issues/27539#issuecomment-348495634","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27539","id":348495634,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODQ5NTYzNA==","user":{"login":"Zyklop","id":1127789,"node_id":"MDQ6VXNlcjExMjc3ODk=","avatar_url":"https://avatars0.githubusercontent.com/u/1127789?v=4","gravatar_id":"","url":"https://api.github.com/users/Zyklop","html_url":"https://github.com/Zyklop","followers_url":"https://api.github.com/users/Zyklop/followers","following_url":"https://api.github.com/users/Zyklop/following{/other_user}","gists_url":"https://api.github.com/users/Zyklop/gists{/gist_id}","starred_url":"https://api.github.com/users/Zyklop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zyklop/subscriptions","organizations_url":"https://api.github.com/users/Zyklop/orgs","repos_url":"https://api.github.com/users/Zyklop/repos","events_url":"https://api.github.com/users/Zyklop/events{/privacy}","received_events_url":"https://api.github.com/users/Zyklop/received_events","type":"User","site_admin":false},"created_at":"2017-12-01T13:33:33Z","updated_at":"2017-12-01T13:33:33Z","author_association":"NONE","body":"Thank you for your answer. @jimczi \r\nWe tried with your solution and set the size = 10000. If I run the suggest query on one index, I get 10 correct results. For two indices, I get just one result for the other index and loose the 10 that I got on the first index. For queries with more then two indices, no suggestions are returned, no matter what size I use.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/348524948","html_url":"https://github.com/elastic/elasticsearch/issues/27539#issuecomment-348524948","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27539","id":348524948,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODUyNDk0OA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-12-01T15:32:19Z","updated_at":"2017-12-01T15:32:19Z","author_association":"MEMBER","body":"That's probably due to the confidence level of your suggest query. By default the phrase suggester will only return suggestions that score higher than the input phrase. The score of the input phase is computed per shard so the filtering depends on the max score given by a shard for the input phrase.  If one shard contains the input phrase with a high frequency then it is expected that all other suggestions are going to be filtered. You can lower the confidence level and set `confidence:0` for instance but this will impact the precision.","performed_via_github_app":null}]