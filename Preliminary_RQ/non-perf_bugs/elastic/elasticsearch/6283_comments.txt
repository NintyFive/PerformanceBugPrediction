[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/43892800","html_url":"https://github.com/elastic/elasticsearch/issues/6283#issuecomment-43892800","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6283","id":43892800,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODkyODAw","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2014-05-22T14:10:07Z","updated_at":"2014-05-22T14:10:07Z","author_association":"MEMBER","body":"now that I understand the issue more, then this is by design. What state do you need to store on the parser level?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/43921510","html_url":"https://github.com/elastic/elasticsearch/issues/6283#issuecomment-43921510","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6283","id":43921510,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTIxNTEw","user":{"login":"rendel","id":4909531,"node_id":"MDQ6VXNlcjQ5MDk1MzE=","avatar_url":"https://avatars1.githubusercontent.com/u/4909531?v=4","gravatar_id":"","url":"https://api.github.com/users/rendel","html_url":"https://github.com/rendel","followers_url":"https://api.github.com/users/rendel/followers","following_url":"https://api.github.com/users/rendel/following{/other_user}","gists_url":"https://api.github.com/users/rendel/gists{/gist_id}","starred_url":"https://api.github.com/users/rendel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rendel/subscriptions","organizations_url":"https://api.github.com/users/rendel/orgs","repos_url":"https://api.github.com/users/rendel/repos","events_url":"https://api.github.com/users/rendel/events{/privacy}","received_events_url":"https://api.github.com/users/rendel/received_events","type":"User","site_admin":false},"created_at":"2014-05-22T17:52:10Z","updated_at":"2014-05-22T17:52:10Z","author_association":"CONTRIBUTOR","body":"Hi Shai,\n\nIn our scenario, a query is a json object with one or more lucene's boolean expression.\nThe problem is that our query parser includes an instance of the Lucene's flexible StandardQueryParser, which is used to parse the boolean expressions. Before delegating the parsing of the boolean expression to the instance of the StandardQueryParser, its configuration (e.g., StandardQueryConfigHandler) is modified according to some logic (i.e., each boolean expression in the same query can have different configuration). Therefore, the state we need to store is the configuration of the StandardQueryParser.\n\nOne quick solution on our side for the moment is just to create a new query parser for each query. We don't think this will have a huge impact on performance in most of the cases.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/43944193","html_url":"https://github.com/elastic/elasticsearch/issues/6283#issuecomment-43944193","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6283","id":43944193,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTQ0MTkz","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-05-22T21:07:51Z","updated_at":"2014-05-22T21:07:51Z","author_association":"CONTRIBUTOR","body":"we use fixed thread pools so you can just use a ThreadLocal to reuse your parser instances.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/43990419","html_url":"https://github.com/elastic/elasticsearch/issues/6283#issuecomment-43990419","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6283","id":43990419,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTkwNDE5","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2014-05-23T09:51:29Z","updated_at":"2014-05-23T09:51:29Z","author_association":"MEMBER","body":"right, as @s1monw suggested, use the relevant data structures you use as thread locals in the `SirenJsonParser`.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/43991326","html_url":"https://github.com/elastic/elasticsearch/issues/6283#issuecomment-43991326","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6283","id":43991326,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTkxMzI2","user":{"login":"jkot","id":1260637,"node_id":"MDQ6VXNlcjEyNjA2Mzc=","avatar_url":"https://avatars0.githubusercontent.com/u/1260637?v=4","gravatar_id":"","url":"https://api.github.com/users/jkot","html_url":"https://github.com/jkot","followers_url":"https://api.github.com/users/jkot/followers","following_url":"https://api.github.com/users/jkot/following{/other_user}","gists_url":"https://api.github.com/users/jkot/gists{/gist_id}","starred_url":"https://api.github.com/users/jkot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkot/subscriptions","organizations_url":"https://api.github.com/users/jkot/orgs","repos_url":"https://api.github.com/users/jkot/repos","events_url":"https://api.github.com/users/jkot/events{/privacy}","received_events_url":"https://api.github.com/users/jkot/received_events","type":"User","site_admin":false},"created_at":"2014-05-23T10:03:42Z","updated_at":"2014-05-23T10:03:42Z","author_association":"NONE","body":"that's what we will likely do, thanks for the info!\n","performed_via_github_app":null}]