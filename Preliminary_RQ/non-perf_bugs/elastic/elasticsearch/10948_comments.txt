[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/99268597","html_url":"https://github.com/elastic/elasticsearch/issues/10948#issuecomment-99268597","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10948","id":99268597,"node_id":"MDEyOklzc3VlQ29tbWVudDk5MjY4NTk3","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-05-06T00:14:50Z","updated_at":"2015-05-06T00:14:50Z","author_association":"MEMBER","body":"The \"working\" example you have isn't really the same; it is doing a filter, not a function score, in which case the field not existing in the mappings means \"match no docs\".  But for `field_value_factor` (and other functions that try to take the value of a field), if the field does not exist in mappings at all, then the only option is to produce a fake value for each doc (we can do this, but it is trappy and arbitrary).  IMO this does need some more standard behavior throughout ES apis.  For example, we should have the ability to be lenient (warn or ignore) for missing fields, but in those cases we need to have:\n1. Well defined behavior\n2. A standard way to choose what the behavior should be (on #9521 it was discussed for only queries, but function scores are only sort of queries, maybe it should be the same though).\n3. Default to error on missing field (otherwise this is trappy for new users who e.g. mispell a field name in a query)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/100174491","html_url":"https://github.com/elastic/elasticsearch/issues/10948#issuecomment-100174491","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10948","id":100174491,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMDE3NDQ5MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-05-08T09:40:54Z","updated_at":"2015-05-08T09:40:54Z","author_association":"CONTRIBUTOR","body":"In this particular case, we could probably handle this by adding a `missing` parameter, which would be used if a document doesn't have a value, or if the type doesn't have the field mapped.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/100310233","html_url":"https://github.com/elastic/elasticsearch/issues/10948#issuecomment-100310233","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10948","id":100310233,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMDMxMDIzMw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-05-08T17:48:47Z","updated_at":"2015-05-08T17:48:47Z","author_association":"CONTRIBUTOR","body":"https://github.com/elastic/elasticsearch/pull/10845 has already added a `missing` value to `field_value_factor` but it doesn't work for an index which is missing the field in its mapping.\n\nPerhaps the way to go here is to extend support for missing mappings with the suggestion here: https://github.com/elastic/elasticsearch/pull/9521#issuecomment-73662480\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/104583726","html_url":"https://github.com/elastic/elasticsearch/issues/10948#issuecomment-104583726","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10948","id":104583726,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNDU4MzcyNg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-05-22T09:06:35Z","updated_at":"2015-05-22T09:06:35Z","author_association":"CONTRIBUTOR","body":"After discussing this in fix it friday, we think that the new `missing` parameter should be extended to apply to types where the field itself is not mapped.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/133767128","html_url":"https://github.com/elastic/elasticsearch/issues/10948#issuecomment-133767128","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10948","id":133767128,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMzc2NzEyOA==","user":{"login":"andrestc","id":2944739,"node_id":"MDQ6VXNlcjI5NDQ3Mzk=","avatar_url":"https://avatars3.githubusercontent.com/u/2944739?v=4","gravatar_id":"","url":"https://api.github.com/users/andrestc","html_url":"https://github.com/andrestc","followers_url":"https://api.github.com/users/andrestc/followers","following_url":"https://api.github.com/users/andrestc/following{/other_user}","gists_url":"https://api.github.com/users/andrestc/gists{/gist_id}","starred_url":"https://api.github.com/users/andrestc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrestc/subscriptions","organizations_url":"https://api.github.com/users/andrestc/orgs","repos_url":"https://api.github.com/users/andrestc/repos","events_url":"https://api.github.com/users/andrestc/events{/privacy}","received_events_url":"https://api.github.com/users/andrestc/received_events","type":"User","site_admin":false},"created_at":"2015-08-23T00:28:48Z","updated_at":"2015-08-23T00:28:48Z","author_association":"CONTRIBUTOR","body":"I will take a shot at this one.\n","performed_via_github_app":null}]