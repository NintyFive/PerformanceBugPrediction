[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/422250021","html_url":"https://github.com/elastic/elasticsearch/issues/33794#issuecomment-422250021","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33794","id":422250021,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMjI1MDAyMQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-09-18T04:17:24Z","updated_at":"2018-09-18T04:17:24Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/422679421","html_url":"https://github.com/elastic/elasticsearch/issues/33794#issuecomment-422679421","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33794","id":422679421,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMjY3OTQyMQ==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2018-09-19T06:58:08Z","updated_at":"2018-09-19T06:58:08Z","author_association":"CONTRIBUTOR","body":"> unable to install syscall filter \r\nThis is not the reason most probably. Seccomp is not supported on CentOS 6, see https://github.com/elastic/elasticsearch/issues/22899\r\n\r\nThis was failed both on a a Debian and a CentOS worker though, so I'd consider the seccomp warning a red herring. \r\n\r\nI'll keep an eye on the builds and see if we can get a pattern out of the failures.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/423228928","html_url":"https://github.com/elastic/elasticsearch/issues/33794#issuecomment-423228928","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33794","id":423228928,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMzIyODkyOA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2018-09-20T15:33:51Z","updated_at":"2018-09-20T15:33:51Z","author_association":"CONTRIBUTOR","body":"Something with our build looks wrong, this test suite hit Jenkins' timeout while it should have hit randomized-testing's timeout first, which would have given us a dump of all running threads, which in-turn would help know what the JVM is busy doing.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/423965795","html_url":"https://github.com/elastic/elasticsearch/issues/33794#issuecomment-423965795","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33794","id":423965795,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMzk2NTc5NQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2018-09-24T12:59:06Z","updated_at":"2018-09-24T12:59:29Z","author_association":"CONTRIBUTOR","body":"I just looked at the class hierarchy, we have `SecurityTribeTests` < `NativeRealmIntegTestCase` < `SecurityIntegTestCase` < `ESIntegTestCase` < `ESTestCase` < `LuceneTestCase`. `LuceneTestCase` sets a suite timeout of 2 hours via an annotation, which is overridden to 20 minutes by ESTestCase, and then not touched by any other class in the hierarchy. So I don't understand how `SecurityTribeTests.testRetrieveRolesOnTribeNode` ended up running for 12682 seconds (more than 3.5 hours), it should have timed out earlier? @atorok By any chance, does it ring a bell to you?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/424235166","html_url":"https://github.com/elastic/elasticsearch/issues/33794#issuecomment-424235166","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33794","id":424235166,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDIzNTE2Ng==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2018-09-25T07:24:36Z","updated_at":"2018-09-25T07:24:36Z","author_association":"CONTRIBUTOR","body":"@jpountz I haven't seen anything like this before. The timeout is not overridden by the `tests.timeoutSuite` property either from what I can tell. The documentation on the annotation does state this: \r\n```The suite class's static initializer is <b>not</b> part of the measured code``` this is the only one that is not included in the timeout, but doesn't  seem to be relevant here as the test was initialized and running \r\naccording to the heart beat\r\n```\r\nHEARTBEAT J0 PID(15355@elasticsearch-ci-immutable-centos-6-1537213352186499265): 2018-09-17T23:09:27, stalled for 1041s at: SecurityTribeTests.testRetrieveRolesOnTribeNode\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/424241170","html_url":"https://github.com/elastic/elasticsearch/issues/33794#issuecomment-424241170","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33794","id":424241170,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDI0MTE3MA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2018-09-25T07:47:25Z","updated_at":"2018-09-25T07:47:25Z","author_association":"CONTRIBUTOR","body":"I lowered the timeout and replaced the test method with a sleep long enough to trigger it, and timeout mechanism does work, so it seems like the test does something that interferes with it.  \r\nAFAIK the tests are forked into a new JVM and the timeout is likely enforced there, there is probably reason to believe something happen to the JVM itself. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/424279219","html_url":"https://github.com/elastic/elasticsearch/issues/33794#issuecomment-424279219","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33794","id":424279219,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDI3OTIxOQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2018-09-25T09:53:01Z","updated_at":"2018-09-25T09:53:01Z","author_association":"CONTRIBUTOR","body":"Thanks @atorok for looking.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/430123174","html_url":"https://github.com/elastic/elasticsearch/issues/33794#issuecomment-430123174","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33794","id":430123174,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMDEyMzE3NA==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2018-10-16T06:58:32Z","updated_at":"2018-10-16T06:58:32Z","author_association":"CONTRIBUTOR","body":"This failed again with the same issue ( SecurityTribeTests stalled ) https://elasticsearch-ci.elastic.co/view/Elasticsearch/job/elastic+elasticsearch+6.4+matrix-java-periodic/63/ES_BUILD_JAVA=java10,ES_RUNTIME_JAVA=java8fips,nodes=virtual&&linux/consoleFull","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/453132960","html_url":"https://github.com/elastic/elasticsearch/issues/33794#issuecomment-453132960","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33794","id":453132960,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzEzMjk2MA==","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2019-01-10T15:20:58Z","updated_at":"2019-01-10T15:20:58Z","author_association":"MEMBER","body":"@jkakavas any updates for this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/453141402","html_url":"https://github.com/elastic/elasticsearch/issues/33794#issuecomment-453141402","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33794","id":453141402,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzE0MTQwMg==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2019-01-10T15:42:18Z","updated_at":"2019-01-10T15:42:18Z","author_association":"CONTRIBUTOR","body":"I kept an eye on it and never saw any additional failures outside of 6.4. We've stopped running 6.4 in CI so I'd be inclined to close this if no objections and reopen if we get any reproductions","performed_via_github_app":null}]