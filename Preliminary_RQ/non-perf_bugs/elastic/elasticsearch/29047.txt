{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/29047","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29047/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29047/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29047/events","html_url":"https://github.com/elastic/elasticsearch/issues/29047","id":305048012,"node_id":"MDU6SXNzdWUzMDUwNDgwMTI=","number":29047,"title":"Unable to serialize set with elasticsearch-py client","user":{"login":"jaisharma639","id":8330173,"node_id":"MDQ6VXNlcjgzMzAxNzM=","avatar_url":"https://avatars0.githubusercontent.com/u/8330173?v=4","gravatar_id":"","url":"https://api.github.com/users/jaisharma639","html_url":"https://github.com/jaisharma639","followers_url":"https://api.github.com/users/jaisharma639/followers","following_url":"https://api.github.com/users/jaisharma639/following{/other_user}","gists_url":"https://api.github.com/users/jaisharma639/gists{/gist_id}","starred_url":"https://api.github.com/users/jaisharma639/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaisharma639/subscriptions","organizations_url":"https://api.github.com/users/jaisharma639/orgs","repos_url":"https://api.github.com/users/jaisharma639/repos","events_url":"https://api.github.com/users/jaisharma639/events{/privacy}","received_events_url":"https://api.github.com/users/jaisharma639/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2018-03-14T07:23:06Z","updated_at":"2018-03-14T10:02:56Z","closed_at":"2018-03-14T08:56:25Z","author_association":"NONE","active_lock_reason":null,"body":"ES : 2.4.1\r\nPython: 2.7.9\r\n\r\nWhen firing a terms filter query with a set instead of list throws SerializationError. Here is a sample query:\r\n\r\n    {\r\n    \"query\": {\r\n        \"filtered\": {\r\n            \"filter\": {\r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                            \"term\": {\r\n                                \"_type\": \"2017-08-28\"\r\n                            }\r\n                        },\r\n                        {\r\n                            \"terms\": {\r\n                                \"OpID\": {\"0064000000pJH10\"}\r\n                            }\r\n                        }\r\n                    ]\r\n                }\r\n            }\r\n        }\r\n    }\r\n    ,\r\n     \"size\": 0\r\n    }\r\n\r\nGenerally while using terms query to get documents matching multiple values, the array contains unique elements. That way it makes more sense to use a set instead of a list. \r\n\r\nMy question is as to why elasticsearch can't type cast sets to list in such cases instead of trying to serialize and fail? Obviously this can be done on client side, but that requires implementing my own custom encoder to have the conversion.\r\n","closed_by":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"performed_via_github_app":null}