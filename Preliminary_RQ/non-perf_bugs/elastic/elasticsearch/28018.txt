{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28018","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28018/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28018/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28018/events","html_url":"https://github.com/elastic/elasticsearch/issues/28018","id":284963209,"node_id":"MDU6SXNzdWUyODQ5NjMyMDk=","number":28018,"title":"Add last failed node allocation in the Allocation Explain API ","user":{"login":"gmoskovicz","id":1675411,"node_id":"MDQ6VXNlcjE2NzU0MTE=","avatar_url":"https://avatars3.githubusercontent.com/u/1675411?v=4","gravatar_id":"","url":"https://api.github.com/users/gmoskovicz","html_url":"https://github.com/gmoskovicz","followers_url":"https://api.github.com/users/gmoskovicz/followers","following_url":"https://api.github.com/users/gmoskovicz/following{/other_user}","gists_url":"https://api.github.com/users/gmoskovicz/gists{/gist_id}","starred_url":"https://api.github.com/users/gmoskovicz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmoskovicz/subscriptions","organizations_url":"https://api.github.com/users/gmoskovicz/orgs","repos_url":"https://api.github.com/users/gmoskovicz/repos","events_url":"https://api.github.com/users/gmoskovicz/events{/privacy}","received_events_url":"https://api.github.com/users/gmoskovicz/received_events","type":"User","site_admin":false},"labels":[{"id":836504707,"node_id":"MDU6TGFiZWw4MzY1MDQ3MDc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Distributed","name":":Distributed/Distributed","color":"0e8a16","default":false,"description":"A catch all label for anything in the Distributed Area. If you aren't sure, use this one."},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2017-12-28T18:05:07Z","updated_at":"2018-02-13T19:26:20Z","closed_at":"2017-12-29T16:40:29Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Right now, if you use the allocation explain API you will see an output containing the following:\r\n\r\n```\r\n  \"unassigned_info\": {\r\n    \"reason\": \"ALLOCATION_FAILED\",\r\n    \"at\": \"xxxx-xx-xx:05:32.602Z\",\r\n    \"failed_allocation_attempts\": 6,\r\n    \"details\": \"failed to create shard, failure FileSystemException[/xxxxx/xxxxx/xxxx/xxxxxx: Input/output error]\",\r\n    \"last_allocation_status\": \"no_attempt\"\r\n  },\r\n```\r\n\r\nAlong with all the decisions (who are just saying what node we tried on) we **do not have the failed node**. The only way to retrieve that is to go to the master node and look at the logs, for this particular error, and find it there. In the case you have a large number of shards and nodes i think that it will be useful to know at least which node was the one showing this problem.\r\n\r\nThe request here is to add into the details the last node that failed, along with the current detail.\r\n\r\nCC @ywelsch \r\n\r\n","closed_by":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"performed_via_github_app":null}