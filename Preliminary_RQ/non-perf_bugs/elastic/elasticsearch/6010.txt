{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/6010","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6010/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6010/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6010/events","html_url":"https://github.com/elastic/elasticsearch/issues/6010","id":32649011,"node_id":"MDU6SXNzdWUzMjY0OTAxMQ==","number":6010,"title":"for nested queries, field mapper doesn't take path into account","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2014-05-01T21:21:11Z","updated_at":"2014-07-23T12:27:06Z","closed_at":"2014-07-23T12:27:06Z","author_association":"MEMBER","active_lock_reason":null,"body":"The field-mapping behavior around nested queries is somewhat unintuitive. Say a document has two nested documents in its mapping, 'one' and 'two', and each contains a field called 'name'. Then doing a nested query for 'name' with path 'two' may not return any results, because the field resolves to 'one.name':\n\nhttps://gist.github.com/jtibshirani/f63b92ec91e71b35bd4c\n\nUsing the full path 'two.name' fixes the issue, but it'd be awesome if the field mapper could take the path from the query into account when resolving fields, and only consider fields in that nested document.\n\nThis reproduced on ES 1.1.1, and seems related to #4644.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}