{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/4784","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4784/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4784/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4784/events","html_url":"https://github.com/elastic/elasticsearch/issues/4784","id":25812456,"node_id":"MDU6SXNzdWUyNTgxMjQ1Ng==","number":4784,"title":"Completion suggester interaction with synonyms could be improved","user":{"login":"timbunce","id":62403,"node_id":"MDQ6VXNlcjYyNDAz","avatar_url":"https://avatars2.githubusercontent.com/u/62403?v=4","gravatar_id":"","url":"https://api.github.com/users/timbunce","html_url":"https://github.com/timbunce","followers_url":"https://api.github.com/users/timbunce/followers","following_url":"https://api.github.com/users/timbunce/following{/other_user}","gists_url":"https://api.github.com/users/timbunce/gists{/gist_id}","starred_url":"https://api.github.com/users/timbunce/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timbunce/subscriptions","organizations_url":"https://api.github.com/users/timbunce/orgs","repos_url":"https://api.github.com/users/timbunce/repos","events_url":"https://api.github.com/users/timbunce/events{/privacy}","received_events_url":"https://api.github.com/users/timbunce/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2014-01-17T14:58:58Z","updated_at":"2014-12-24T18:32:37Z","closed_at":"2014-12-24T18:32:37Z","author_association":"NONE","active_lock_reason":null,"body":"The current synonym token filter behaviour of _replacing_ the token with the synonym doesn't work well with the completion suggester.\n\nAn option to keep the original token would be helpful.\n\nBackground:\n\nFor synonyms to work well with the completion suggester it's important to define synonyms that map to longer tokens, i.e. `ne => north east`. (If the synonym mapping was an equivalence instead, such as `ne, north east`, then someone entering 'north east' would get suggestions for all completions that begin with `ne` such as `neck`.)\n\nHowever, when a user enters \"ne\" they no longer get suggestions that start with \"ne\". They only get suggestions that start with \"north east\".\n\nA workaround is to explicitly include the short form in the synonym mapping: `ne => north east, ne`.\n\nHowever, that becomes painful to setup and maintain because a single mapping like `exp, expr, express, expw, expy => expressway` now has to be written out as five separate mappings!\n\nI think a simple fix would be to add an option to make the synonym token filter _add_ synonyms instead of _replacing_ the original. Need only apply to the last token in the stream.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}