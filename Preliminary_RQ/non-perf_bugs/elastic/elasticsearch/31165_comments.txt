[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395332306","html_url":"https://github.com/elastic/elasticsearch/issues/31165#issuecomment-395332306","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31165","id":395332306,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTMzMjMwNg==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2018-06-07T08:10:53Z","updated_at":"2018-06-07T08:10:53Z","author_association":"MEMBER","body":"Looks like you hit https://bugs.java.com/view_bug.do?bug_id=JDK-8168628, there's not much we can do.\r\n\r\nYou should try to upgrade your JRE.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395335820","html_url":"https://github.com/elastic/elasticsearch/issues/31165#issuecomment-395335820","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31165","id":395335820,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTMzNTgyMA==","user":{"login":"dixingxing0","id":1303530,"node_id":"MDQ6VXNlcjEzMDM1MzA=","avatar_url":"https://avatars2.githubusercontent.com/u/1303530?v=4","gravatar_id":"","url":"https://api.github.com/users/dixingxing0","html_url":"https://github.com/dixingxing0","followers_url":"https://api.github.com/users/dixingxing0/followers","following_url":"https://api.github.com/users/dixingxing0/following{/other_user}","gists_url":"https://api.github.com/users/dixingxing0/gists{/gist_id}","starred_url":"https://api.github.com/users/dixingxing0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dixingxing0/subscriptions","organizations_url":"https://api.github.com/users/dixingxing0/orgs","repos_url":"https://api.github.com/users/dixingxing0/repos","events_url":"https://api.github.com/users/dixingxing0/events{/privacy}","received_events_url":"https://api.github.com/users/dixingxing0/received_events","type":"User","site_admin":false},"created_at":"2018-06-07T08:23:24Z","updated_at":"2018-06-07T08:23:24Z","author_association":"NONE","body":"@tlrx Thank you !","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/400921793","html_url":"https://github.com/elastic/elasticsearch/issues/31165#issuecomment-400921793","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31165","id":400921793,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMDkyMTc5Mw==","user":{"login":"nalovelyna","id":16200662,"node_id":"MDQ6VXNlcjE2MjAwNjYy","avatar_url":"https://avatars2.githubusercontent.com/u/16200662?v=4","gravatar_id":"","url":"https://api.github.com/users/nalovelyna","html_url":"https://github.com/nalovelyna","followers_url":"https://api.github.com/users/nalovelyna/followers","following_url":"https://api.github.com/users/nalovelyna/following{/other_user}","gists_url":"https://api.github.com/users/nalovelyna/gists{/gist_id}","starred_url":"https://api.github.com/users/nalovelyna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nalovelyna/subscriptions","organizations_url":"https://api.github.com/users/nalovelyna/orgs","repos_url":"https://api.github.com/users/nalovelyna/repos","events_url":"https://api.github.com/users/nalovelyna/events{/privacy}","received_events_url":"https://api.github.com/users/nalovelyna/received_events","type":"User","site_admin":false},"created_at":"2018-06-28T06:09:05Z","updated_at":"2018-06-28T06:09:30Z","author_association":"NONE","body":"Does that works? I use 8u172, getting the same crash\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/416679739","html_url":"https://github.com/elastic/elasticsearch/issues/31165#issuecomment-416679739","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31165","id":416679739,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjY3OTczOQ==","user":{"login":"robert-blankenship","id":7118222,"node_id":"MDQ6VXNlcjcxMTgyMjI=","avatar_url":"https://avatars2.githubusercontent.com/u/7118222?v=4","gravatar_id":"","url":"https://api.github.com/users/robert-blankenship","html_url":"https://github.com/robert-blankenship","followers_url":"https://api.github.com/users/robert-blankenship/followers","following_url":"https://api.github.com/users/robert-blankenship/following{/other_user}","gists_url":"https://api.github.com/users/robert-blankenship/gists{/gist_id}","starred_url":"https://api.github.com/users/robert-blankenship/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robert-blankenship/subscriptions","organizations_url":"https://api.github.com/users/robert-blankenship/orgs","repos_url":"https://api.github.com/users/robert-blankenship/repos","events_url":"https://api.github.com/users/robert-blankenship/events{/privacy}","received_events_url":"https://api.github.com/users/robert-blankenship/received_events","type":"User","site_admin":false},"created_at":"2018-08-28T17:50:16Z","updated_at":"2018-08-28T17:51:07Z","author_association":"NONE","body":"Getting the same issue, on Java 8 u181. We have containers running on multiple appliances, each with identical hardware, but the issue only occurs on a certain container.\r\n\r\nCan we please reopen this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/546669316","html_url":"https://github.com/elastic/elasticsearch/issues/31165#issuecomment-546669316","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31165","id":546669316,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjY2OTMxNg==","user":{"login":"tinawenqiao","id":15771296,"node_id":"MDQ6VXNlcjE1NzcxMjk2","avatar_url":"https://avatars2.githubusercontent.com/u/15771296?v=4","gravatar_id":"","url":"https://api.github.com/users/tinawenqiao","html_url":"https://github.com/tinawenqiao","followers_url":"https://api.github.com/users/tinawenqiao/followers","following_url":"https://api.github.com/users/tinawenqiao/following{/other_user}","gists_url":"https://api.github.com/users/tinawenqiao/gists{/gist_id}","starred_url":"https://api.github.com/users/tinawenqiao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tinawenqiao/subscriptions","organizations_url":"https://api.github.com/users/tinawenqiao/orgs","repos_url":"https://api.github.com/users/tinawenqiao/repos","events_url":"https://api.github.com/users/tinawenqiao/events{/privacy}","received_events_url":"https://api.github.com/users/tinawenqiao/received_events","type":"User","site_admin":false},"created_at":"2019-10-27T07:37:43Z","updated_at":"2019-10-27T07:37:43Z","author_association":"NONE","body":"@dijingran dingï¼ŒHave you solved the problem after you update jdk? Which jdk version do you choose?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/553784414","html_url":"https://github.com/elastic/elasticsearch/issues/31165#issuecomment-553784414","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31165","id":553784414,"node_id":"MDEyOklzc3VlQ29tbWVudDU1Mzc4NDQxNA==","user":{"login":"JosuGZ","id":25986871,"node_id":"MDQ6VXNlcjI1OTg2ODcx","avatar_url":"https://avatars3.githubusercontent.com/u/25986871?v=4","gravatar_id":"","url":"https://api.github.com/users/JosuGZ","html_url":"https://github.com/JosuGZ","followers_url":"https://api.github.com/users/JosuGZ/followers","following_url":"https://api.github.com/users/JosuGZ/following{/other_user}","gists_url":"https://api.github.com/users/JosuGZ/gists{/gist_id}","starred_url":"https://api.github.com/users/JosuGZ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JosuGZ/subscriptions","organizations_url":"https://api.github.com/users/JosuGZ/orgs","repos_url":"https://api.github.com/users/JosuGZ/repos","events_url":"https://api.github.com/users/JosuGZ/events{/privacy}","received_events_url":"https://api.github.com/users/JosuGZ/received_events","type":"User","site_admin":false},"created_at":"2019-11-14T08:41:28Z","updated_at":"2019-11-19T07:55:38Z","author_association":"NONE","body":"**UPDATE**: Apparently I have bad blocks on my drive, so maybe that is the cause.\r\n**UPDATE 2**: I can confirm that the problem was due to the inability of Elastic to read a particular file (`nodes/0/indices/j8uXlvkpRSOwZyS_c5TDgg/1/index/_62yk.cfs`). After ddrescuing the hard drive I'm not experiencing the issue anymore.\r\n\r\n---\r\n\r\nI'm experiencing this issue with the `docker.elastic.co/elasticsearch/elasticsearch:6.8.4` image, I'm not sure if this bug should be solved with the included OpenJDK.\r\n\r\n```\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGBUS (0x7) at pc=0x00007fbf083cc2d0, pid=1, tid=151\r\n#\r\n# JRE version: OpenJDK Runtime Environment (13.0+33) (build 13+33)\r\n# Java VM: OpenJDK 64-Bit Server VM (13+33, mixed mode, sharing, tiered, compressed oops, concurrent mark sweep gc, linux-amd64)\r\n# Problematic frame:\r\n# v  ~StubRoutines::jlong_disjoint_arraycopy\r\n```\r\n\r\nAditionally, I'm getting this on startup:\r\n\r\n```\r\nOpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.\r\nOpenJDK 64-Bit Server VM warning: UseAVX=2 is not supported on this CPU, setting it to UseAVX=1\r\n```\r\n\r\nIt happens right after recovering a huge translog, at the moment one of the shards reach 100% in top, it crashes. Here is about to crash (seccond shard):\r\n\r\n```\r\nrep snap shost snode thost      tnode   t     ty             st       f fr fp     b br bp     to      tor     top\r\nn/a n/a  n/a   n/a   172.18.0.4 KiI4941 45m   existing_store translog 0 0  100.0% 0 0  100.0% 5372000 4130521 76.9%\r\nn/a n/a  n/a   n/a   172.18.0.4 KiI4941 43.6m existing_store done     0 0  100.0% 0 0  100.0% 5369666 5369666 100.0%\r\nn/a n/a  n/a   n/a   172.18.0.4 KiI4941 45m   existing_store translog 0 0  100.0% 0 0  100.0% 5372000 524881  9.8%\r\n```","performed_via_github_app":null}]