[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312680918","html_url":"https://github.com/elastic/elasticsearch/issues/23492#issuecomment-312680918","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23492","id":312680918,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjY4MDkxOA==","user":{"login":"zdenal","id":143357,"node_id":"MDQ6VXNlcjE0MzM1Nw==","avatar_url":"https://avatars0.githubusercontent.com/u/143357?v=4","gravatar_id":"","url":"https://api.github.com/users/zdenal","html_url":"https://github.com/zdenal","followers_url":"https://api.github.com/users/zdenal/followers","following_url":"https://api.github.com/users/zdenal/following{/other_user}","gists_url":"https://api.github.com/users/zdenal/gists{/gist_id}","starred_url":"https://api.github.com/users/zdenal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zdenal/subscriptions","organizations_url":"https://api.github.com/users/zdenal/orgs","repos_url":"https://api.github.com/users/zdenal/repos","events_url":"https://api.github.com/users/zdenal/events{/privacy}","received_events_url":"https://api.github.com/users/zdenal/received_events","type":"User","site_admin":false},"created_at":"2017-07-03T15:51:30Z","updated_at":"2017-07-03T15:51:30Z","author_association":"NONE","body":"Hi @rkalhans have you find any solution for this issue? I am also trying make highlighting works with `function_score` .... w/o success :(\r\n\r\nThanks,\r\nZdenal","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312686504","html_url":"https://github.com/elastic/elasticsearch/issues/23492#issuecomment-312686504","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23492","id":312686504,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjY4NjUwNA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-07-03T16:18:12Z","updated_at":"2017-07-03T16:18:12Z","author_association":"CONTRIBUTOR","body":"I believe this is one of the cases where in the past I used `highlight_query` without the `function_score` to get the job done. It is worth investigating that, I think.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312879601","html_url":"https://github.com/elastic/elasticsearch/issues/23492#issuecomment-312879601","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23492","id":312879601,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjg3OTYwMQ==","user":{"login":"zdenal","id":143357,"node_id":"MDQ6VXNlcjE0MzM1Nw==","avatar_url":"https://avatars0.githubusercontent.com/u/143357?v=4","gravatar_id":"","url":"https://api.github.com/users/zdenal","html_url":"https://github.com/zdenal","followers_url":"https://api.github.com/users/zdenal/followers","following_url":"https://api.github.com/users/zdenal/following{/other_user}","gists_url":"https://api.github.com/users/zdenal/gists{/gist_id}","starred_url":"https://api.github.com/users/zdenal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zdenal/subscriptions","organizations_url":"https://api.github.com/users/zdenal/orgs","repos_url":"https://api.github.com/users/zdenal/repos","events_url":"https://api.github.com/users/zdenal/events{/privacy}","received_events_url":"https://api.github.com/users/zdenal/received_events","type":"User","site_admin":false},"created_at":"2017-07-04T13:33:36Z","updated_at":"2017-07-04T13:33:36Z","author_association":"NONE","body":"@nik9000 this helped me a lot!!! Thank you!!!!\r\n\r\nZdenal\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/317982991","html_url":"https://github.com/elastic/elasticsearch/issues/23492#issuecomment-317982991","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23492","id":317982991,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNzk4Mjk5MQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-07-26T08:17:16Z","updated_at":"2017-07-26T08:17:16Z","author_association":"MEMBER","body":"Highlighting prefix (multi-term) queries inside `function_score` does not work with the `postings` highlighter.\r\nThe `plain` and `fvh` highlighters are not affected and works as expected with the example above.\r\nThe `postings` highlighter has been deprecated in 5.x and is removed from 6 so I'll close this issue.\r\nThe workaround is to use an `highlight_query` as Nik suggested or to upgrade to 5 and use the `unified` highlighter that is able to highlight all text queries exposed in es. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/590101006","html_url":"https://github.com/elastic/elasticsearch/issues/23492#issuecomment-590101006","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23492","id":590101006,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDEwMTAwNg==","user":{"login":"prashanttct07","id":6836305,"node_id":"MDQ6VXNlcjY4MzYzMDU=","avatar_url":"https://avatars3.githubusercontent.com/u/6836305?v=4","gravatar_id":"","url":"https://api.github.com/users/prashanttct07","html_url":"https://github.com/prashanttct07","followers_url":"https://api.github.com/users/prashanttct07/followers","following_url":"https://api.github.com/users/prashanttct07/following{/other_user}","gists_url":"https://api.github.com/users/prashanttct07/gists{/gist_id}","starred_url":"https://api.github.com/users/prashanttct07/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashanttct07/subscriptions","organizations_url":"https://api.github.com/users/prashanttct07/orgs","repos_url":"https://api.github.com/users/prashanttct07/repos","events_url":"https://api.github.com/users/prashanttct07/events{/privacy}","received_events_url":"https://api.github.com/users/prashanttct07/received_events","type":"User","site_admin":false},"created_at":"2020-02-23T18:33:11Z","updated_at":"2020-02-23T18:33:11Z","author_association":"NONE","body":"Has anyone solved the same? As we were trying the same query on 2.0, 2.4, 2.6 with plain and fvh but that is not working too. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/655966781","html_url":"https://github.com/elastic/elasticsearch/issues/23492#issuecomment-655966781","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23492","id":655966781,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTk2Njc4MQ==","user":{"login":"Surt","id":48085,"node_id":"MDQ6VXNlcjQ4MDg1","avatar_url":"https://avatars2.githubusercontent.com/u/48085?v=4","gravatar_id":"","url":"https://api.github.com/users/Surt","html_url":"https://github.com/Surt","followers_url":"https://api.github.com/users/Surt/followers","following_url":"https://api.github.com/users/Surt/following{/other_user}","gists_url":"https://api.github.com/users/Surt/gists{/gist_id}","starred_url":"https://api.github.com/users/Surt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Surt/subscriptions","organizations_url":"https://api.github.com/users/Surt/orgs","repos_url":"https://api.github.com/users/Surt/repos","events_url":"https://api.github.com/users/Surt/events{/privacy}","received_events_url":"https://api.github.com/users/Surt/received_events","type":"User","site_admin":false},"created_at":"2020-07-09T07:50:39Z","updated_at":"2020-07-09T09:43:49Z","author_association":"NONE","body":"Can't do it either. Any tip to make highlight work with function score?\r\nWhat I'm doing:\r\n\r\n\r\n```json\r\nGET /my_index/_search\r\n{\r\n  \"highlight\": {\r\n    \"pre_tags\": [\r\n      \"<tag1>\"\r\n    ],\r\n    \"post_tags\": [\r\n      \"</tag1>\"\r\n    ],\r\n    \"fields\": {\r\n      \"description\": {}\r\n    },\r\n    \"require_field_match\": true\r\n  },\r\n  \"query\": {\r\n    \"function_score\": {\r\n      \"boost_mode\": \"replace\",\r\n      \"functions\": [\r\n        {\r\n          \"filter\": {\r\n            \"bool\": {\r\n              \"must\": [\r\n                {\r\n                  \"match_phrase\": {\r\n                    \"description\": \"findme\"\r\n                  }\r\n                },\r\n                {\r\n                  \"term\": {\r\n                    \"annotable_hash\": {\r\n                      \"value\": \"TEXT\"\r\n                    }\r\n                  }\r\n                }\r\n              ]\r\n            }\r\n          },\r\n          \"weight\": 3.3150000000000004\r\n        }\r\n      ],\r\n      \"min_score\": 1.1,\r\n      \"score_mode\": \"first\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\nResult:\r\n```  \r\n{\r\n  \"took\" : 1,\r\n  \"timed_out\" : false,\r\n  \"_shards\" : {\r\n    \"total\" : 1,\r\n    \"successful\" : 1,\r\n    \"skipped\" : 0,\r\n    \"failed\" : 0\r\n  },\r\n  \"hits\" : {\r\n    \"total\" : {\r\n      \"value\" : 12,\r\n      \"relation\" : \"eq\"\r\n    },\r\n    \"max_score\" : 3.315,\r\n    \"hits\" : [\r\n      {\r\n        \"_index\" : \"my_index\",\r\n        \"_type\" : \"my_index\",\r\n        \"_id\" : \"2084\",\r\n        \"_score\" : 3.315,\r\n        \"_source\" : {\r\n          \"id\" : 2084,\r\n          \"description\" : \"findme\",\r\n          \"annotable_hash\" : \"TEXT\",\r\n        }\r\n      },\r\n\r\n   ......\r\n``` \r\n\r\ncan't get a highlight. I tried using plain and unified highlights.  I'm using es 7.1\r\n\r\n\r\nEDITED: My fault, no query was made. I added a replica of function score as query bool should and now the highlight works like a charm. Thanks!","performed_via_github_app":null}]