{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/52406","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52406/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52406/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52406/events","html_url":"https://github.com/elastic/elasticsearch/issues/52406","id":566246719,"node_id":"MDU6SXNzdWU1NjYyNDY3MTk=","number":52406,"title":"[CI] IndexStatsIT.testConcurrentIndexingAndStatsRequests failure in 7.6","user":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"labels":[{"id":146836529,"node_id":"MDU6TGFiZWwxNDY4MzY1Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Stats","name":":Core/Features/Stats","color":"0e8a16","default":false,"description":"Statistics tracking and retrieval APIs"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-02-17T11:48:05Z","updated_at":"2020-02-24T13:09:42Z","closed_at":"2020-02-24T13:09:42Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.6+multijob-unix-compatibility/os=debian-9&&immutable/65/console\r\n\r\n```\r\n01:43:58 org.elasticsearch.indices.stats.IndexStatsIT > testConcurrentIndexingAndStatsRequests FAILED\r\n01:43:58     java.lang.AssertionError: \r\n01:43:58     Expected: an empty collection\r\n01:43:58          but: <[[test][7] failed, reason [FailedNodeException[Failed node [QSoO4D6ZQ56SM8kqibBAkg]]; nested: RemoteTransportException[[node_s1][127.0.0.1:37625][indices:monitor/stats[n]]]; nested: IllegalStateException[Negative longs unsupported, use writeLong or writeZLong for negative numbers [-1]]; ], [test][5] failed, reason [FailedNodeException[Failed node [QSoO4D6ZQ56SM8kqibBAkg]]; nested: RemoteTransportException[[node_s1][127.0.0.1:37625][indices:monitor/stats[n]]]; nested: IllegalStateException[Negative longs unsupported, use writeLong or writeZLong for negative numbers [-1]]; ], [test][9] failed, reason [FailedNodeException[Failed node [QSoO4D6ZQ56SM8kqibBAkg]]; nested: RemoteTransportException[[node_s1][127.0.0.1:37625][indices:monitor/stats[n]]]; nested: IllegalStateException[Negative longs unsupported, use writeLong or writeZLong for negative numbers [-1]]; ], [test][3] failed, reason [FailedNodeException[Failed node [QSoO4D6ZQ56SM8kqibBAkg]]; nested: RemoteTransportException[[node_s1][127.0.0.1:37625][indices:monitor/stats[n]]]; nested: IllegalStateException[Negative longs unsupported, use writeLong or writeZLong for negative numbers [-1]]; ], [test][1] failed, reason [FailedNodeException[Failed node [QSoO4D6ZQ56SM8kqibBAkg]]; nested: RemoteTransportException[[node_s1][127.0.0.1:37625][indices:monitor/stats[n]]]; nested: IllegalStateException[Negative longs unsupported, use writeLong or writeZLong for negative numbers [-1]]; ]]>\r\n01:43:58         at __randomizedtesting.SeedInfo.seed([72478EA70ABABFF9:C5D6E56E887CA8C7]:0)\r\n01:43:58         at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n01:43:58         at org.junit.Assert.assertThat(Assert.java:956)\r\n01:43:58         at org.junit.Assert.assertThat(Assert.java:923)\r\n01:43:58         at org.elasticsearch.indices.stats.IndexStatsIT.testConcurrentIndexingAndStatsRequests(IndexStatsIT.java:1206)\r\n01:43:58 REPRODUCE WITH: ./gradlew ':server:integTest' --tests \"org.elasticsearch.indices.stats.IndexStatsIT.testConcurrentIndexingAndStatsRequests\" -Dtests.seed=72478EA70ABABFF9 -Dtests.security.manager=true -Dtests.locale=sr-Latn-BA -Dtests.timezone=BET -Dcompiler.java=13\r\n```\r\n\r\nI am not 100% sure this is a true failure, since in the test that ran after this one there is a failing node, but at the same time the error itself in the testConcurrentIndexingAndStatsRequests  test doesn't have a root exception related to the node failure:\r\n\r\n```\r\n01:43:58   1> [2020-02-16T19:43:57,992][INFO ][o.e.c.c.Coordinator      ] [node_s1] master node [{node_s0}{lf2hdgwfShOQpBcXhvQ8mQ}{EkQzmawFRDeKE7Na-uro4Q}{127.0.0.1}{127.0.0.1:40999}{dim}] failed, restarting discovery\r\n01:43:58   1> org.elasticsearch.transport.NodeDisconnectedException: [node_s0][127.0.0.1:40999][disconnected] disconnected\r\n01:43:58   1> [2020-02-16T19:43:57,993][INFO ][o.e.c.s.ClusterApplierService] [node_s1] master node changed {previous [{node_s0}{lf2hdgwfShOQpBcXhvQ8mQ}{EkQzmawFRDeKE7Na-uro4Q}{127.0.0.1}{127.0.0.1:40999}{dim}], current []}, term: 1, version: 164, reason: becoming candidate: onLeaderFailure\r\n01:43:58   1> [2020-02-16T19:43:57,996][WARN ][o.e.c.NodeConnectionsService] [node_s1] failed to connect to {node_s0}{lf2hdgwfShOQpBcXhvQ8mQ}{EkQzmawFRDeKE7Na-uro4Q}{127.0.0.1}{127.0.0.1:40999}{dim} (tried [1] times)\r\n01:43:58   1> org.elasticsearch.transport.ConnectTransportException: [node_s0][127.0.0.1:40999] connect_exception\r\n```","closed_by":{"login":"danhermann","id":22777892,"node_id":"MDQ6VXNlcjIyNzc3ODky","avatar_url":"https://avatars0.githubusercontent.com/u/22777892?v=4","gravatar_id":"","url":"https://api.github.com/users/danhermann","html_url":"https://github.com/danhermann","followers_url":"https://api.github.com/users/danhermann/followers","following_url":"https://api.github.com/users/danhermann/following{/other_user}","gists_url":"https://api.github.com/users/danhermann/gists{/gist_id}","starred_url":"https://api.github.com/users/danhermann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danhermann/subscriptions","organizations_url":"https://api.github.com/users/danhermann/orgs","repos_url":"https://api.github.com/users/danhermann/repos","events_url":"https://api.github.com/users/danhermann/events{/privacy}","received_events_url":"https://api.github.com/users/danhermann/received_events","type":"User","site_admin":false},"performed_via_github_app":null}