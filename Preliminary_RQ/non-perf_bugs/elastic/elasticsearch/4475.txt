{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/4475","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4475/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4475/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4475/events","html_url":"https://github.com/elastic/elasticsearch/issues/4475","id":24398248,"node_id":"MDU6SXNzdWUyNDM5ODI0OA==","number":4475,"title":"field \"tags\" was indexed without position data; cannot run PhraseQuery","user":{"login":"tinytub","id":1871460,"node_id":"MDQ6VXNlcjE4NzE0NjA=","avatar_url":"https://avatars2.githubusercontent.com/u/1871460?v=4","gravatar_id":"","url":"https://api.github.com/users/tinytub","html_url":"https://github.com/tinytub","followers_url":"https://api.github.com/users/tinytub/followers","following_url":"https://api.github.com/users/tinytub/following{/other_user}","gists_url":"https://api.github.com/users/tinytub/gists{/gist_id}","starred_url":"https://api.github.com/users/tinytub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tinytub/subscriptions","organizations_url":"https://api.github.com/users/tinytub/orgs","repos_url":"https://api.github.com/users/tinytub/repos","events_url":"https://api.github.com/users/tinytub/events{/privacy}","received_events_url":"https://api.github.com/users/tinytub/received_events","type":"User","site_admin":false},"labels":[{"id":73544,"node_id":"MDU6TGFiZWw3MzU0NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Enon-issue","name":">non-issue","color":"cfcfcf","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2013-12-17T03:43:43Z","updated_at":"2014-01-14T11:01:34Z","closed_at":"2014-01-14T11:01:28Z","author_association":"NONE","active_lock_reason":null,"body":"Yestoday I update ES to 0.90.7 and logstash to 1.3.1\nuse kibana filter with tag I get these error\n\n[2013-12-17 11:42:29,128][DEBUG][action.search.type       ] [node-10.7.3.121] [logstash-2013.12.17][3], node[aLYmR50MR_W0cQdMGG8Uxw], [P], s[STARTED]: Failed to execute [org.elasticsearch.action.search.SearchRequest@51fc89c6]\norg.elasticsearch.transport.RemoteTransportException: [node-10.7.3.122][inet[/10.7.3.122:9300]][search/phase/query]\nCaused by: org.elasticsearch.search.query.QueryPhaseExecutionException: [logstash-2013.12.17][3]: query[filtered(ConstantScore(_:_))->BooleanFilter(+_:_ +cache(@timestamp:[1387165326783 TO 1387251749031]) +cache(QueryWrapperFilter(+(tags:\"syq yxg\") +(tags:apache))) +BooleanFilter(+_:_))],from[0],size[500],sort[<custom:\"@timestamp\": org.elasticsearch.index.fielddata.fieldcomparator.LongValuesComparatorSource@684f9f43>!]: Query Failed [Failed to execute main query]\n    at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:123)\n    at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:229)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:623)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:612)\n    at org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.run(MessageChannelHandler.java:270)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:724)\nCaused by: java.lang.IllegalStateException: field \"tags\" was indexed without position data; cannot run PhraseQuery (term=syq)\n    at org.apache.lucene.search.PhraseQuery$PhraseWeight.scorer(PhraseQuery.java:273)\n    at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:311)\n    at org.apache.lucene.search.QueryWrapperFilter$1.iterator(QueryWrapperFilter.java:59)\n    at org.elasticsearch.common.lucene.docset.DocIdSets.toCacheable(DocIdSets.java:79)\n    at org.elasticsearch.index.cache.filter.weighted.WeightedFilterCache$FilterCacheFilterWrapper.getDocIdSet(WeightedFilterCache.java:171)\n    at org.elasticsearch.common.lucene.search.XBooleanFilter.getDocIdSet(XBooleanFilter.java:83)\n    at org.elasticsearch.common.lucene.search.ApplyAcceptedDocsFilter.getDocIdSet(ApplyAcceptedDocsFilter.java:45)\n    at org.apache.lucene.search.ConstantScoreQuery$ConstantWeight.scorer(ConstantScoreQuery.java:131)\n    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:624)\n    at org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:167)\n    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:587)\n    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:539)\n    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:510)\n    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:345)\n    at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:112)\n\nhow to fix it ?\n","closed_by":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"performed_via_github_app":null}