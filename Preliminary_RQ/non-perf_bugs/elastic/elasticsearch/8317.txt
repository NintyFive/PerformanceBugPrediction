{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8317","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8317/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8317/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8317/events","html_url":"https://github.com/elastic/elasticsearch/issues/8317","id":47523992,"node_id":"MDU6SXNzdWU0NzUyMzk5Mg==","number":8317,"title":"Portions of a mapping are silently ignored","user":{"login":"waldoj","id":656758,"node_id":"MDQ6VXNlcjY1Njc1OA==","avatar_url":"https://avatars0.githubusercontent.com/u/656758?v=4","gravatar_id":"","url":"https://api.github.com/users/waldoj","html_url":"https://github.com/waldoj","followers_url":"https://api.github.com/users/waldoj/followers","following_url":"https://api.github.com/users/waldoj/following{/other_user}","gists_url":"https://api.github.com/users/waldoj/gists{/gist_id}","starred_url":"https://api.github.com/users/waldoj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waldoj/subscriptions","organizations_url":"https://api.github.com/users/waldoj/orgs","repos_url":"https://api.github.com/users/waldoj/repos","events_url":"https://api.github.com/users/waldoj/events{/privacy}","received_events_url":"https://api.github.com/users/waldoj/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2014-11-02T01:42:47Z","updated_at":"2014-11-03T11:09:24Z","closed_at":"2014-11-03T11:09:24Z","author_association":"NONE","active_lock_reason":null,"body":"I'm running Elasticsearch v1.3.4 on Ubuntu. I've geocoded ~800,000 addresses in an index, and I want to make queries against that geodata. Despite creating an explicit mapping of the coordinates as a geo_point field, my queries fail, with Elasticsearch's log complaining that the field is not a geo_point field. The problem turns out to be that the mapping is silently, partially, failing\n\nExample:\n\n```\ncurl -XPUT localhost:9200/test/_mapping/geodata -d '{                  \n    \"properties\": {\n        \"location\": {\n            \"type\": \"object\",\n            \"coordinates\": {\n                \"type\": \"geo_point\"\n            } \n        }\n    }\n}'\n```\n\nThis returns:\n\n```\n{\"acknowledged\":true}\n```\n\nThen when I verify the result of my request:\n\n```\ncurl -XGET 'http://localhost:9200/business/_mapping/10'\n```\n\nI get this:\n\n```\n{\"business\":{\"mappings\":{\"10\":{\"properties\":{\"location\":{\"type\":\"object\"}}}}}}\n```\n\nThis should create the entire, requested `location` object, including `coordinates` and `\"type\": \"geo_point\"`, but instead it only creates `\"location\":{\"type\":\"object\"}`.\n\nAt the time that I create the mapping, Elasticsearch's log acknowledges its creation, but doesn't report any error:\n\n```\n[2014-11-01 21:33:47,211][INFO ][cluster.metadata         ] [Grey Gargoyle] [business] create_mapping [geodata]\n```\n\nTo reduce the number of moving parts, I've tried omitting `\"type\": \"object\"` (ostensibly an implied value), but that yields an error (`\"MapperParsingException[No type specified for property [location]]\"`), so I'm not sure that a simpler demonstration case is plausible.\n\nI am at a loss for how to proceed. I imagine that this is a bug, but I'm holding out the hope that I'm doing something foolish. After all, I can't see that such a bug would have gone unnoticed.\n","closed_by":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"performed_via_github_app":null}