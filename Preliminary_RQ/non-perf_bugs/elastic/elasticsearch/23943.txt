{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23943","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23943/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23943/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23943/events","html_url":"https://github.com/elastic/elasticsearch/issues/23943","id":219881309,"node_id":"MDU6SXNzdWUyMTk4ODEzMDk=","number":23943,"title":"Unclear error message when using custom \"synonym\" with Analyze API","user":{"login":"tsouza","id":122435,"node_id":"MDQ6VXNlcjEyMjQzNQ==","avatar_url":"https://avatars3.githubusercontent.com/u/122435?v=4","gravatar_id":"","url":"https://api.github.com/users/tsouza","html_url":"https://github.com/tsouza","followers_url":"https://api.github.com/users/tsouza/followers","following_url":"https://api.github.com/users/tsouza/following{/other_user}","gists_url":"https://api.github.com/users/tsouza/gists{/gist_id}","starred_url":"https://api.github.com/users/tsouza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsouza/subscriptions","organizations_url":"https://api.github.com/users/tsouza/orgs","repos_url":"https://api.github.com/users/tsouza/repos","events_url":"https://api.github.com/users/tsouza/events{/privacy}","received_events_url":"https://api.github.com/users/tsouza/received_events","type":"User","site_admin":false},"labels":[{"id":142001965,"node_id":"MDU6TGFiZWwxNDIwMDE5NjU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Analysis","name":":Search/Analysis","color":"0e8a16","default":false,"description":"How text is split into tokens"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2017-04-06T12:24:02Z","updated_at":"2019-04-04T08:04:30Z","closed_at":"2019-04-04T08:04:30Z","author_association":"MEMBER","active_lock_reason":null,"body":"According to `synonym` filter comment:\r\n```\r\n/*\r\n * synonym and synonym_graph are different than everything else since they need access to the tokenizer factories for the index.\r\n * instead of building the infrastructure for plugins we rather make it a real exception to not pollute the general interface and\r\n * hide internal data-structures as much as possible.\r\n*/\r\n```\r\n\r\nBecause of this limitation, if you try to use it like the following (which is a valid syntax since the Analyze API docs mentions it but with `stop` filter instead):\r\n```\r\nGET _analyze\r\n{\r\n  \"tokenizer\": \"standard\",\r\n  \"filter\": [{\r\n    \"type\": \"synonym\",\r\n    \"synonyms\": [\"test,testing\"]\r\n  }],\r\n  \"text\": \"this is a test\"\r\n}\r\n```\r\n\r\nYou will get the following error: `failed to find global token filter under [synonym]`\r\n\r\nThis is misleading since it is the same error that you get if you use an unknown token filter name and, for newbies, specially the ones that just learned about the Analyze API, it can be confusing since `synonym` should be a valid token filter name and the docs does not mentions this particular limitation of `synonym` token filter.\r\n\r\nMoreover, IMO `synonym` should be supported by `/_analyze` API anyway, if possible. Since it only works in the context of an index, the need to create a new test index _every time_ you change the synonym configuration can be a time consuming task compared to simply using the `/_analyze` API.","closed_by":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"performed_via_github_app":null}