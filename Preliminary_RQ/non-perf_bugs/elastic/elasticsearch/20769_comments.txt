[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251773896","html_url":"https://github.com/elastic/elasticsearch/issues/20769#issuecomment-251773896","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20769","id":251773896,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTc3Mzg5Ng==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-10-05T19:26:55Z","updated_at":"2016-10-05T19:26:55Z","author_association":"CONTRIBUTOR","body":"> This now gets flagged by the new strict URL parsing (#20722), as it highlights that _primary is not recognized:\n\nI wonder if it used to just ignore `_primary` without the escaping?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251809940","html_url":"https://github.com/elastic/elasticsearch/issues/20769#issuecomment-251809940","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20769","id":251809940,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTgwOTk0MA==","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"created_at":"2016-10-05T21:50:12Z","updated_at":"2016-10-05T21:52:58Z","author_association":"CONTRIBUTOR","body":"@nik9000 You might be on to something. Booted up the 5.0.0-beta1 release and tried encoded and unencoded. I'm running this locally with one node, so the replica shards on this index are unassigned.\n\nI expected this to fail because the replica is unassigned.\n\n```\ncurl -XGET 'localhost:9200/test/test/_search?preference=_shards:0;_replica'\n>> {\"took\":1,\"timed_out\":false,\"_shards\":{\"total\":1,\"successful\":1,\"failed\":0},\"hits\":{\"total\":1,\"max_score\":1.0,\"hits\":[{\"_index\":\"test\",\"_type\":\"test\",\"_id\":\"3\",\"_score\":1.0,\"_source\":{\"c\":3}}]}}\n```\n\n... But it doesn't. Now, If we escape the semicolon...\n\n```\ncurl -XGET 'localhost:9200/test/test/_search?preference=_shards:0%3B_replica'\n>> {\"error\":{\"root_cause\":[],\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[],\"caused_by\":{\"type\":\"no_shard_available_action_exception\",\"reason\":null,\"index_uuid\":\"d6I_drjZRZydiv4gXBmE5Q\",\"shard\":\"0\",\"index\":\"test\"}},\"status\":503}\n```\n\nI think that's the smoking gun...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251824252","html_url":"https://github.com/elastic/elasticsearch/issues/20769#issuecomment-251824252","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20769","id":251824252,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTgyNDI1Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-10-05T23:01:48Z","updated_at":"2016-10-05T23:02:06Z","author_association":"MEMBER","body":"I think we need a new separator here since the unescaped form never worked and semicolons are reserved anyway.\n","performed_via_github_app":null}]