{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/52869","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52869/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52869/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52869/events","html_url":"https://github.com/elastic/elasticsearch/issues/52869","id":571876675,"node_id":"MDU6SXNzdWU1NzE4NzY2NzU=","number":52869,"title":"There are search and aggregation issues with date type fields in version 5.6","user":{"login":"hirampeng","id":40446885,"node_id":"MDQ6VXNlcjQwNDQ2ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/40446885?v=4","gravatar_id":"","url":"https://api.github.com/users/hirampeng","html_url":"https://github.com/hirampeng","followers_url":"https://api.github.com/users/hirampeng/followers","following_url":"https://api.github.com/users/hirampeng/following{/other_user}","gists_url":"https://api.github.com/users/hirampeng/gists{/gist_id}","starred_url":"https://api.github.com/users/hirampeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hirampeng/subscriptions","organizations_url":"https://api.github.com/users/hirampeng/orgs","repos_url":"https://api.github.com/users/hirampeng/repos","events_url":"https://api.github.com/users/hirampeng/events{/privacy}","received_events_url":"https://api.github.com/users/hirampeng/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-02-27T07:28:27Z","updated_at":"2020-02-28T11:22:56Z","closed_at":"2020-02-27T08:15:17Z","author_association":"NONE","active_lock_reason":null,"body":"my index mapping:\r\n\"mappings\": { \"my_type\": { \"properties\": { \"age\": { \"type\": \"integer\"},\"birth\": { \"type\": \"date\",\"format\": \"yyyy-MM-dd HH:mm:ss||epoch_millis\"},\"group\": { \"type\": \"keyword\"},\"price\": { \"type\": \"float\"}}}}\r\n\r\nmy index date:\r\n[\r\n{ \"group\": \"a\",\"age\": 5,\"price\": 5.2,\"birth\": \"2018-03-03 03:00:00\"},\r\n{\"group\": \"c\",\"age\": 8,\"price\": 5.2,\"birth\": \"2018-03-03 23:00:00\"}\r\n]\r\n\r\nmy search query:\r\n{\r\n    \"size\": 0,\r\n    \"timeout\": \"120000ms\",\r\n    \"query\": {\r\n        \"bool\": {\r\n            \"must\": [\r\n                {\r\n                    \"range\": {\r\n                        \"birth\": {\r\n                            \"from\": 1519833600000,\r\n                            \"to\": null,\r\n                            \"include_lower\": true,\r\n                            \"include_upper\": true,\r\n                            \"boost\": 1\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    \"range\": {\r\n                        \"birth\": {\r\n                            \"from\": null,\r\n                            \"to\": 1520092799000,\r\n                            \"include_lower\": true,\r\n                            \"include_upper\": true,\r\n                            \"boost\": 1\r\n                        }\r\n                    }\r\n                }\r\n            ],\r\n            \"disable_coord\": false,\r\n            \"adjust_pure_negative\": true,\r\n            \"boost\": 1\r\n        }\r\n    },\r\n    \"aggregations\": {\r\n        \"date_histogram#birth$day\": {\r\n            \"date_histogram\": {\r\n                \"field\": \"birth\",\r\n                \"interval\": \"day\",\r\n                \"offset\": 0,\r\n                \"order\": {\r\n                    \"_key\": \"asc\"\r\n                },\r\n                \"keyed\": false,\r\n                \"min_doc_count\": 0\r\n            },\r\n            \"aggregations\": {\r\n                \"value_count#birth\": {\r\n                    \"value_count\": {\r\n                        \"field\": \"birth\"\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nI want to find out the number of records aggregated by day from 00:00:00 on March 1, 2018 to 23:59:59 on March 3, 2018. Why only one record is returned?I don't understand. Can you help me?\r\nNote: my version is 5.6\r\n\r\n\r\n","closed_by":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"performed_via_github_app":null}