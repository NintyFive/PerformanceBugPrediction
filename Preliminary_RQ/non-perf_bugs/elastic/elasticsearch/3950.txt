{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3950","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3950/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3950/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3950/events","html_url":"https://github.com/elastic/elasticsearch/issues/3950","id":21435011,"node_id":"MDU6SXNzdWUyMTQzNTAxMQ==","number":3950,"title":"My ","user":{"login":"norfolkislander","id":5633655,"node_id":"MDQ6VXNlcjU2MzM2NTU=","avatar_url":"https://avatars1.githubusercontent.com/u/5633655?v=4","gravatar_id":"","url":"https://api.github.com/users/norfolkislander","html_url":"https://github.com/norfolkislander","followers_url":"https://api.github.com/users/norfolkislander/followers","following_url":"https://api.github.com/users/norfolkislander/following{/other_user}","gists_url":"https://api.github.com/users/norfolkislander/gists{/gist_id}","starred_url":"https://api.github.com/users/norfolkislander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/norfolkislander/subscriptions","organizations_url":"https://api.github.com/users/norfolkislander/orgs","repos_url":"https://api.github.com/users/norfolkislander/repos","events_url":"https://api.github.com/users/norfolkislander/events{/privacy}","received_events_url":"https://api.github.com/users/norfolkislander/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2013-10-23T05:55:43Z","updated_at":"2013-10-23T08:08:13Z","closed_at":"2013-10-23T08:08:13Z","author_association":"NONE","active_lock_reason":null,"body":"I have setup logstash, elasticsearch and kibana. It all works great however TTL is not always being mapped to indices when they are created (only some of the time)? Initially I tried setting up mappings as per Attaching a TTL field with every log sent via logstash to Elasticsearch . But this just does not seem to work for me? I tried both locations /etc/elasticsearch/mappings/_default/default.json, /etc/elasticsearch/config/mappings/_default/default.json but neither seemed to load the mapping. I did find instructions to create a /etc/elasticsearch/default-mapping.json file which seems to work intermittently.\n\nThe json config file always contained the following (on each location attempt):\n\n{\n    _default_ : {\n        \"_ttl\" : { \"enabled\" : true, \"default\" : \"1d\" }\n    }\n}\n\n{\nlogstash-2013.10.18: {\nlogs: {\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.09: {\nlogs: {\n_ttl: {\nenabled: true,\ndefault: 86400000\n},\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.19: {\nlogs: {\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.07: {\nlogs: {\n_ttl: {\nenabled: true,\ndefault: 86400000\n},\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntags: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.14: {\nlogs: {\n_ttl: {\nenabled: true,\ndefault: 2592000000\n},\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.15: {\nlogs: {\n_ttl: {\nenabled: true,\ndefault: 2592000000\n},\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.16: {\nlogs: {\n_ttl: {\nenabled: true,\ndefault: 2592000000\n},\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.17: {\nlogs: {\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.22: {\nlogs: {\n_ttl: {\nenabled: true,\ndefault: 2592000000\n},\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.13: {\nlogs: {\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.21: {\nlogs: {\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.12: {\nlogs: {\n_ttl: {\nenabled: true,\ndefault: 2592000000\n},\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nkibana-int: {\ntemp: {\nproperties: {\ndashboard: {\ntype: \"string\"\n},\ngroup: {\ntype: \"string\"\n},\ntitle: {\ntype: \"string\"\n},\nuser: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.11: {\nlogs: {\n_ttl: {\nenabled: true,\ndefault: 2592000000\n},\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.10: {\nlogs: {\n_ttl: {\nenabled: true,\ndefault: 86400000\n},\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntags: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.23: {\nlogs: {\n_ttl: {\nenabled: true,\ndefault: 2592000000\n},\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n},\nlogstash-2013.10.20: {\nlogs: {\n_ttl: {\nenabled: true,\ndefault: 2592000000\n},\nproperties: {\n@timestamp: {\ntype: \"date\",\nformat: \"dateOptionalTime\"\n},\n@version: {\ntype: \"string\"\n},\nfacility: {\ntype: \"long\"\n},\nfacility_label: {\ntype: \"string\"\n},\nhost: {\ntype: \"string\"\n},\nlogsource: {\ntype: \"string\"\n},\nmessage: {\ntype: \"string\"\n},\npriority: {\ntype: \"long\"\n},\nprogram: {\ntype: \"string\"\n},\nseverity: {\ntype: \"long\"\n},\nseverity_label: {\ntype: \"string\"\n},\ntimestamp: {\ntype: \"string\"\n},\ntype: {\ntype: \"string\"\n}\n}\n}\n}\n}\n","closed_by":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"performed_via_github_app":null}