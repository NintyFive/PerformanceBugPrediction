[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/365458292","html_url":"https://github.com/elastic/elasticsearch/issues/28674#issuecomment-365458292","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28674","id":365458292,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTQ1ODI5Mg==","user":{"login":"cailen","id":2476173,"node_id":"MDQ6VXNlcjI0NzYxNzM=","avatar_url":"https://avatars2.githubusercontent.com/u/2476173?v=4","gravatar_id":"","url":"https://api.github.com/users/cailen","html_url":"https://github.com/cailen","followers_url":"https://api.github.com/users/cailen/followers","following_url":"https://api.github.com/users/cailen/following{/other_user}","gists_url":"https://api.github.com/users/cailen/gists{/gist_id}","starred_url":"https://api.github.com/users/cailen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cailen/subscriptions","organizations_url":"https://api.github.com/users/cailen/orgs","repos_url":"https://api.github.com/users/cailen/repos","events_url":"https://api.github.com/users/cailen/events{/privacy}","received_events_url":"https://api.github.com/users/cailen/received_events","type":"User","site_admin":false},"created_at":"2018-02-14T00:53:12Z","updated_at":"2018-02-14T00:53:12Z","author_association":"NONE","body":"Furthermore, is it normal for the certificate to be rejecting the SSL?\r\n\r\n```\r\n$ wget https://artifacts.elastic.co/GPG-KEY-elasticsearch      \r\n--2018-02-13 19:43:36--  https://artifacts.elastic.co/GPG-KEY-elasticsearch\r\nResolving artifacts.elastic.co (artifacts.elastic.co)... 2406:da00:ff00::ae81:1d9, 2406:da00:ff00::b848:da1a, 2406:da00:ff00::b849:9c29, ...\r\nConnecting to artifacts.elastic.co (artifacts.elastic.co)|2406:da00:ff00::ae81:1d9|:443... connected.\r\nERROR: cannot verify artifacts.elastic.co's certificate, issued by 'CN=DigiCert SHA2 Secure Server CA,O=DigiCert Inc,C=US':\r\n  Unable to locally verify the issuer's authority.\r\nTo connect to artifacts.elastic.co insecurely, use `--no-check-certificate'.\r\n```\r\n\r\nI checked my cert directory and it is up to date as of 1/9/18 and it has the following DigiCerts:\r\n\r\n```\r\nlrwxrwxrwx 1 root root     66 Jan  9 09:14 DigiCert_Assured_ID_Root_CA.pem -> /usr/share/ca-certificates/mozilla/DigiCert_Assured_ID_Root_CA.crt\r\nlrwxrwxrwx 1 root root     66 Jan  9 09:14 DigiCert_Assured_ID_Root_G2.pem -> /usr/share/ca-certificates/mozilla/DigiCert_Assured_ID_Root_G2.crt\r\nlrwxrwxrwx 1 root root     66 Jan  9 09:14 DigiCert_Assured_ID_Root_G3.pem -> /usr/share/ca-certificates/mozilla/DigiCert_Assured_ID_Root_G3.crt\r\nlrwxrwxrwx 1 root root     62 Jan  9 09:14 DigiCert_Global_Root_CA.pem -> /usr/share/ca-certificates/mozilla/DigiCert_Global_Root_CA.crt\r\nlrwxrwxrwx 1 root root     62 Jan  9 09:14 DigiCert_Global_Root_G2.pem -> /usr/share/ca-certificates/mozilla/DigiCert_Global_Root_G2.crt\r\nlrwxrwxrwx 1 root root     62 Jan  9 09:14 DigiCert_Global_Root_G3.pem -> /usr/share/ca-certificates/mozilla/DigiCert_Global_Root_G3.crt\r\nlrwxrwxrwx 1 root root     73 Jan  9 09:14 DigiCert_High_Assurance_EV_Root_CA.pem -> /usr/share/ca-certificates/mozilla/DigiCert_High_Assurance_EV_Root_CA.crt\r\nlrwxrwxrwx 1 root root     63 Jan  9 09:14 DigiCert_Trusted_Root_G4.pem -> /usr/share/ca-certificates/mozilla/DigiCert_Trusted_Root_G4.crt\r\n```\r\n\r\nI'm not seeing a Digicert SHA2 one.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/366653088","html_url":"https://github.com/elastic/elasticsearch/issues/28674#issuecomment-366653088","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28674","id":366653088,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjY1MzA4OA==","user":{"login":"mgreau","id":501525,"node_id":"MDQ6VXNlcjUwMTUyNQ==","avatar_url":"https://avatars1.githubusercontent.com/u/501525?v=4","gravatar_id":"","url":"https://api.github.com/users/mgreau","html_url":"https://github.com/mgreau","followers_url":"https://api.github.com/users/mgreau/followers","following_url":"https://api.github.com/users/mgreau/following{/other_user}","gists_url":"https://api.github.com/users/mgreau/gists{/gist_id}","starred_url":"https://api.github.com/users/mgreau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgreau/subscriptions","organizations_url":"https://api.github.com/users/mgreau/orgs","repos_url":"https://api.github.com/users/mgreau/repos","events_url":"https://api.github.com/users/mgreau/events{/privacy}","received_events_url":"https://api.github.com/users/mgreau/received_events","type":"User","site_admin":false},"created_at":"2018-02-19T10:48:26Z","updated_at":"2018-02-19T10:48:26Z","author_association":"CONTRIBUTOR","body":"Hi @cailen \r\n\r\nIt could be a problem related to IPv6.\r\nCan you test the following commands please:\r\n\r\n* `wget -v -4  https://artifacts.elastic.co/GPG-KEY-elasticsearch`\r\n* `wget -v -6  https://artifacts.elastic.co/GPG-KEY-elasticsearch`\r\n\r\nAnd also, can you try to force `apt-get` to use IPv4: \r\n\r\n* `apt-get -o Acquire::ForceIPv4=true update`\r\n\r\nLet me know if it helps.\r\nThanks\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372141524","html_url":"https://github.com/elastic/elasticsearch/issues/28674#issuecomment-372141524","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28674","id":372141524,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MjE0MTUyNA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-03-11T19:23:37Z","updated_at":"2018-03-11T19:23:37Z","author_association":"MEMBER","body":"@cailen Did you try the suggestions @mgreau made? I'm going to close this as it does look ipv6 related (I'm able to use wget to get the gpg key without error). Let us know if you still have issues and can provide more data and I will reopen.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/468339522","html_url":"https://github.com/elastic/elasticsearch/issues/28674#issuecomment-468339522","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28674","id":468339522,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODMzOTUyMg==","user":{"login":"mk6032","id":8421707,"node_id":"MDQ6VXNlcjg0MjE3MDc=","avatar_url":"https://avatars2.githubusercontent.com/u/8421707?v=4","gravatar_id":"","url":"https://api.github.com/users/mk6032","html_url":"https://github.com/mk6032","followers_url":"https://api.github.com/users/mk6032/followers","following_url":"https://api.github.com/users/mk6032/following{/other_user}","gists_url":"https://api.github.com/users/mk6032/gists{/gist_id}","starred_url":"https://api.github.com/users/mk6032/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mk6032/subscriptions","organizations_url":"https://api.github.com/users/mk6032/orgs","repos_url":"https://api.github.com/users/mk6032/repos","events_url":"https://api.github.com/users/mk6032/events{/privacy}","received_events_url":"https://api.github.com/users/mk6032/received_events","type":"User","site_admin":false},"created_at":"2019-02-28T16:29:05Z","updated_at":"2019-02-28T16:29:05Z","author_association":"NONE","body":"# curl -v -k https://artifacts.elastic.co/GPG-KEY-elasticsearch\r\n*   Trying 54.225.214.74...\r\n* TCP_NODELAY set\r\n* Connected to artifacts.elastic.co (54.225.214.74) port 443 (#0)\r\n* ALPN, offering h2\r\n* ALPN, offering http/1.1\r\n* Cipher selection: ALL:!EXPORT:!EXPORT40:!EXPORT56:!aNULL:!LOW:!RC4:@STRENGTH\r\n* successfully set certificate verify locations:\r\n*   CAfile: /etc/ssl/certs/ca-certificates.crt\r\n  CApath: /etc/ssl/certs\r\n* TLSv1.2 (OUT), TLS header, Certificate Status (22):\r\n* TLSv1.2 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.2 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.2 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.2 (IN), TLS handshake, Server key exchange (12):\r\n* TLSv1.2 (IN), TLS handshake, Server finished (14):\r\n* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):\r\n* TLSv1.2 (OUT), TLS change cipher, Client hello (1):\r\n* TLSv1.2 (OUT), TLS handshake, Finished (20):\r\n* TLSv1.2 (IN), TLS change cipher, Client hello (1):\r\n* TLSv1.2 (IN), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256\r\n* ALPN, server did not agree to a protocol\r\n* Server certificate:\r\n*  subject: OU=Domain Control Validated; OU=PositiveSSL; CN=deals.concordmonitor.com\r\n*  start date: Jan 22 00:00:00 2018 GMT\r\n*  expire date: Feb  2 23:59:59 2019 GMT\r\n*  issuer: C=GB; ST=Greater Manchester; L=Salford; O=COMODO CA Limited; CN=COMODO RSA Domain Validation Secure Server CA\r\n*  SSL certificate verify result: certificate has expired (10), continuing anyway.\r\n> GET /GPG-KEY-elasticsearch HTTP/1.1\r\n> Host: artifacts.elastic.co\r\n> User-Agent: curl/7.52.1\r\n> Accept: */*\r\n> \r\n< HTTP/1.1 403 Forbidden\r\n..\r\n\r\n# date -u\r\nThu Feb 28 16:28:34 UTC 2019\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/571311997","html_url":"https://github.com/elastic/elasticsearch/issues/28674#issuecomment-571311997","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28674","id":571311997,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTMxMTk5Nw==","user":{"login":"johnbchron","id":8174031,"node_id":"MDQ6VXNlcjgxNzQwMzE=","avatar_url":"https://avatars1.githubusercontent.com/u/8174031?v=4","gravatar_id":"","url":"https://api.github.com/users/johnbchron","html_url":"https://github.com/johnbchron","followers_url":"https://api.github.com/users/johnbchron/followers","following_url":"https://api.github.com/users/johnbchron/following{/other_user}","gists_url":"https://api.github.com/users/johnbchron/gists{/gist_id}","starred_url":"https://api.github.com/users/johnbchron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johnbchron/subscriptions","organizations_url":"https://api.github.com/users/johnbchron/orgs","repos_url":"https://api.github.com/users/johnbchron/repos","events_url":"https://api.github.com/users/johnbchron/events{/privacy}","received_events_url":"https://api.github.com/users/johnbchron/received_events","type":"User","site_admin":false},"created_at":"2020-01-06T20:59:45Z","updated_at":"2020-01-06T20:59:45Z","author_association":"NONE","body":"I know this issue is old, but I'm having the same issue:\r\n\r\n    user@machine: curl -v -k https://artifacts.elastic.co/GPG-KEY-elasticsearch\r\n    * Expire in 0 ms for 6 (transfer 0x55ed2c0e55c0)\r\n    [...]\r\n    * Expire in 50 ms for 1 (transfer 0x55ed2c0e55c0)\r\n    *   Trying 151.101.66.222...\r\n    * TCP_NODELAY set\r\n    * Expire in 149948 ms for 3 (transfer 0x55ed2c0e55c0)\r\n    * Expire in 200 ms for 4 (transfer 0x55ed2c0e55c0)\r\n    * Connected to artifacts.elastic.co (151.101.66.222) port 443 (#0)\r\n    * ALPN, offering h2\r\n    * ALPN, offering http/1.1\r\n    * successfully set certificate verify locations:\r\n    *   CAfile: none\r\n      CApath: /etc/ssl/certs\r\n    * TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n    * error:1408F10B:SSL routines:ssl3_get_record:wrong version number\r\n    * Closing connection 0\r\n    curl: (35) error:1408F10B:SSL routines:ssl3_get_record:wrong version number\r\n\r\nThis hasn't been working for several days now\r\n\r\n    user@machine: sudo apt install openssl\r\n    Reading package lists... Done\r\n    Building dependency tree\r\n    Reading state information... Done\r\n    openssl is already the newest version (1.1.1b-1ubuntu2.4).\r\n    0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\r\n\r\nIf there's other information needed let me know\r\n","performed_via_github_app":null}]