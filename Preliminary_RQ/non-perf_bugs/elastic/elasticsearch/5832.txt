{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/5832","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5832/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5832/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5832/events","html_url":"https://github.com/elastic/elasticsearch/issues/5832","id":31641747,"node_id":"MDU6SXNzdWUzMTY0MTc0Nw==","number":5832,"title":"Allow unittests to run against an external cluster","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"labels":[{"id":60445228,"node_id":"MDU6TGFiZWw2MDQ0NTIyOA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest","name":">test","color":"5319e7","default":false,"description":"Issues or PRs that are addressing/adding tests"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2014-04-16T13:35:13Z","updated_at":"2015-10-15T12:05:35Z","closed_at":"2015-10-15T12:05:35Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Today we run our unittests against an internal cluster but we already have support for `ImmutableCluster` that is used by tests that done't need to modify the cluster. Yet, those tests can easily run against an external cluster. as a first simple step we can just use some Junit magic to make this work ie. we add support for an annotation like `@NeedsJVMLocalCluster` or `@NeedsMutableCluster` and given the cluster we use to run the tests we can just exclude those tests. \nA pure external cluster can then run on all tests that don't have either of these annotations. In a second step we can add a `MutableExternalCluster` impl that can start external processes and tear them down as needed given the test is not annotated with `@NeedsJVMLocalCluster`\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}