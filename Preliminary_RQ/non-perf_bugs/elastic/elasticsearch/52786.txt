{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/52786","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52786/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52786/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52786/events","html_url":"https://github.com/elastic/elasticsearch/issues/52786","id":570726158,"node_id":"MDU6SXNzdWU1NzA3MjYxNTg=","number":52786,"title":"UpdateByQuery fails when max_docs>slices","user":{"login":"glascaleia","id":1336891,"node_id":"MDQ6VXNlcjEzMzY4OTE=","avatar_url":"https://avatars1.githubusercontent.com/u/1336891?v=4","gravatar_id":"","url":"https://api.github.com/users/glascaleia","html_url":"https://github.com/glascaleia","followers_url":"https://api.github.com/users/glascaleia/followers","following_url":"https://api.github.com/users/glascaleia/following{/other_user}","gists_url":"https://api.github.com/users/glascaleia/gists{/gist_id}","starred_url":"https://api.github.com/users/glascaleia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glascaleia/subscriptions","organizations_url":"https://api.github.com/users/glascaleia/orgs","repos_url":"https://api.github.com/users/glascaleia/repos","events_url":"https://api.github.com/users/glascaleia/events{/privacy}","received_events_url":"https://api.github.com/users/glascaleia/received_events","type":"User","site_admin":false},"labels":[{"id":1315850572,"node_id":"MDU6TGFiZWwxMzE1ODUwNTcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Reindex","name":":Distributed/Reindex","color":"0e8a16","default":false,"description":"Issues relating to reindex that are not caused by issues further down"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":1967496670,"node_id":"MDU6TGFiZWwxOTY3NDk2Njcw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Distributed","name":"Team:Distributed","color":"fef2c0","default":false,"description":"Meta label for distributed team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-02-25T17:31:11Z","updated_at":"2020-05-29T12:32:03Z","closed_at":"2020-05-29T12:32:03Z","author_association":"NONE","active_lock_reason":null,"body":"Upgrade elasticsearch from 7.5.2 to 7.6.0 with UpdateByQueryRequest i have the following error \r\nElasticsearchStatusException[Elasticsearch exception [type=action_request_validation_exception, reason=Validation Failed: 1: maxDocs should be greater than 0 if the request is limited to some number of documents or -1 if it isn't but it was [0];]]\r\n\tat org.elasticsearch.rest.BytesRestResponse.errorFromXContent(BytesRestResponse.java:177)\r\n\tat org.elasticsearch.client.RestHighLevelClient.parseEntity(RestHighLevelClient.java:1793)\r\n\tat org.elasticsearch.client.RestHighLevelClient.parseResponseException(RestHighLevelClient.java:1770)\r\n\tat org.elasticsearch.client.RestHighLevelClient$1.onFailure(RestHighLevelClient.java:1686)\r\n\tat org.elasticsearch.client.RestClient$FailureTrackingResponseListener.onDefinitiveFailure(RestClient.java:598)\r\n\tat org.elasticsearch.client.RestClient$1.completed(RestClient.java:343)\r\n\tat org.elasticsearch.client.RestClient$1.completed(RestClient.java:327)\r\n\tat org.apache.http.concurrent.BasicFuture.completed(BasicFuture.java:122)\r\n\tat org.apache.http.impl.nio.client.DefaultClientExchangeHandlerImpl.responseCompleted(DefaultClientExchangeHandlerImpl.java:181)\r\n\tat org.apache.http.nio.protocol.HttpAsyncRequestExecutor.processResponse(HttpAsyncRequestExecutor.java:448)\r\n\tat org.apache.http.nio.protocol.HttpAsyncRequestExecutor.inputReady(HttpAsyncRequestExecutor.java:338)\r\n\tat org.apache.http.impl.nio.DefaultNHttpClientConnection.consumeInput(DefaultNHttpClientConnection.java:265)\r\n\tat org.apache.http.impl.nio.client.InternalIODispatch.onInputReady(InternalIODispatch.java:81)\r\n\tat org.apache.http.impl.nio.client.InternalIODispatch.onInputReady(InternalIODispatch.java:39)\r\n\tat org.apache.http.impl.nio.reactor.AbstractIODispatch.inputReady(AbstractIODispatch.java:114)\r\n\tat org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:162)\r\n\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:337)\r\n\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:315)\r\n\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:276)\r\n\tat org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)\r\n\tat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)\r\n\tat java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1$1.run(Executors.java:668)\r\n\tat java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1$1.run(Executors.java:665)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:391)\r\n\tat java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1.run(Executors.java:665)\r\n\tat java.base/java.lang.Thread.run(Thread.java:830)\r\n\tSuppressed: org.elasticsearch.client.ResponseException: method [POST], host [http://192.168.3.2:9200], URI [/acta_bidone_index/_update_by_query?slices=2&requests_per_second=-1&ignore_unavailable=false&expand_wildcards=open&allow_no_indices=true&ignore_throttled=true&scroll_size=100&refresh=true&conflicts=proceed&max_docs=1&timeout=2m], status line [HTTP/1.1 400 Bad Request]\r\n{\"error\":{\"root_cause\":[{\"type\":\"action_request_validation_exception\",\"reason\":\"Validation Failed: 1: maxDocs should be greater than 0 if the request is limited to some number of documents or -1 if it isn't but it was [0];\"}],\"type\":\"action_request_validation_exception\",\"reason\":\"Validation Failed: 1: maxDocs should be greater than 0 if the request is limited to some number of documents or -1 if it isn't but it was [0];\",\"suppressed\":[{\"type\":\"action_request_validation_exception\",\"reason\":\"Validation Failed: 1: maxDocs should be greater than 0 if the request is limited to some number of documents or -1 if it isn't but it was [0];\"}]},\"status\":400}\r\nThe value of maxDocs is setted to right value that is 1.\r\nWith 7.5.2 all rocks after upgrading to 7.6.0 there is this error.\r\nRegards","closed_by":{"login":"henningandersen","id":33268011,"node_id":"MDQ6VXNlcjMzMjY4MDEx","avatar_url":"https://avatars2.githubusercontent.com/u/33268011?v=4","gravatar_id":"","url":"https://api.github.com/users/henningandersen","html_url":"https://github.com/henningandersen","followers_url":"https://api.github.com/users/henningandersen/followers","following_url":"https://api.github.com/users/henningandersen/following{/other_user}","gists_url":"https://api.github.com/users/henningandersen/gists{/gist_id}","starred_url":"https://api.github.com/users/henningandersen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henningandersen/subscriptions","organizations_url":"https://api.github.com/users/henningandersen/orgs","repos_url":"https://api.github.com/users/henningandersen/repos","events_url":"https://api.github.com/users/henningandersen/events{/privacy}","received_events_url":"https://api.github.com/users/henningandersen/received_events","type":"User","site_admin":false},"performed_via_github_app":null}