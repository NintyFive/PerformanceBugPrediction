[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/469511","html_url":"https://github.com/elastic/elasticsearch/issues/432#issuecomment-469511","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/432","id":469511,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTUxMQ==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-10-14T22:47:53Z","updated_at":"2010-10-14T22:47:53Z","author_association":"MEMBER","body":"Good catch on the relocation bit, now I can narrow down my test for this. Let me run some long running test that tries and simulate what you did, lets see if I manage to recreate this....\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/473394","html_url":"https://github.com/elastic/elasticsearch/issues/432#issuecomment-473394","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/432","id":473394,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MzM5NA==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-10-16T23:29:29Z","updated_at":"2010-10-16T23:29:29Z","author_association":"MEMBER","body":"Heya,\n\n   I ran a test for 24 hours with nodes doing a rolling restart of each node while I have 5 proceses keep indexing (ended up indexing 5 billion docs). All went well... . What I did in the test is that after a restart of a node, I waited till the cluster health was green before restarting another node, maybe thats the difference between how you did the rolling restart (trying to guess where the problem might be).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/480074","html_url":"https://github.com/elastic/elasticsearch/issues/432#issuecomment-480074","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/432","id":480074,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDA3NA==","user":{"login":"ppearcy","id":307414,"node_id":"MDQ6VXNlcjMwNzQxNA==","avatar_url":"https://avatars3.githubusercontent.com/u/307414?v=4","gravatar_id":"","url":"https://api.github.com/users/ppearcy","html_url":"https://github.com/ppearcy","followers_url":"https://api.github.com/users/ppearcy/followers","following_url":"https://api.github.com/users/ppearcy/following{/other_user}","gists_url":"https://api.github.com/users/ppearcy/gists{/gist_id}","starred_url":"https://api.github.com/users/ppearcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppearcy/subscriptions","organizations_url":"https://api.github.com/users/ppearcy/orgs","repos_url":"https://api.github.com/users/ppearcy/repos","events_url":"https://api.github.com/users/ppearcy/events{/privacy}","received_events_url":"https://api.github.com/users/ppearcy/received_events","type":"User","site_admin":false},"created_at":"2010-10-20T03:21:54Z","updated_at":"2010-10-20T03:21:54Z","author_association":"CONTRIBUTOR","body":"Hey, sorry for the delayed response, missed this update. \n\nAlways waiting for a green state before bouncing the next server. \n\nThat sounds like a good stress test. Grasping at straws, but is the work directory being cleared on the restarted node? In my case, the work directory was not cleared on node restart. Also, are all the field types being represented? I'm using string and date/numeric fields, not sure why it'd matter, though.\n\nWe'll be moving up to 0.12 shortly and will keep our eyes out. I added a monitor on my side that should allow me to catch it when it happens. Also, have some metrics flowing to maybe correlate with some other condition.\n\nThanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/480562","html_url":"https://github.com/elastic/elasticsearch/issues/432#issuecomment-480562","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/432","id":480562,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDU2Mg==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-10-20T08:31:25Z","updated_at":"2010-10-20T08:31:25Z","author_association":"MEMBER","body":"I had two tests, one that deletes the work dir each time, and one that doesn't. Both seem to work... . \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/482217","html_url":"https://github.com/elastic/elasticsearch/issues/432#issuecomment-482217","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/432","id":482217,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjIxNw==","user":{"login":"ppearcy","id":307414,"node_id":"MDQ6VXNlcjMwNzQxNA==","avatar_url":"https://avatars3.githubusercontent.com/u/307414?v=4","gravatar_id":"","url":"https://api.github.com/users/ppearcy","html_url":"https://github.com/ppearcy","followers_url":"https://api.github.com/users/ppearcy/followers","following_url":"https://api.github.com/users/ppearcy/following{/other_user}","gists_url":"https://api.github.com/users/ppearcy/gists{/gist_id}","starred_url":"https://api.github.com/users/ppearcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppearcy/subscriptions","organizations_url":"https://api.github.com/users/ppearcy/orgs","repos_url":"https://api.github.com/users/ppearcy/repos","events_url":"https://api.github.com/users/ppearcy/events{/privacy}","received_events_url":"https://api.github.com/users/ppearcy/received_events","type":"User","site_admin":false},"created_at":"2010-10-20T21:49:48Z","updated_at":"2010-10-20T21:49:48Z","author_association":"CONTRIBUTOR","body":"Cool, thanks. Let's see if I can hit this condition again and see what other information I can collect that will be of use. \n\nThanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/484225","html_url":"https://github.com/elastic/elasticsearch/issues/432#issuecomment-484225","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/432","id":484225,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDIyNQ==","user":{"login":"ppearcy","id":307414,"node_id":"MDQ6VXNlcjMwNzQxNA==","avatar_url":"https://avatars3.githubusercontent.com/u/307414?v=4","gravatar_id":"","url":"https://api.github.com/users/ppearcy","html_url":"https://github.com/ppearcy","followers_url":"https://api.github.com/users/ppearcy/followers","following_url":"https://api.github.com/users/ppearcy/following{/other_user}","gists_url":"https://api.github.com/users/ppearcy/gists{/gist_id}","starred_url":"https://api.github.com/users/ppearcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppearcy/subscriptions","organizations_url":"https://api.github.com/users/ppearcy/orgs","repos_url":"https://api.github.com/users/ppearcy/repos","events_url":"https://api.github.com/users/ppearcy/events{/privacy}","received_events_url":"https://api.github.com/users/ppearcy/received_events","type":"User","site_admin":false},"created_at":"2010-10-21T17:28:45Z","updated_at":"2010-10-21T17:28:45Z","author_association":"CONTRIBUTOR","body":"Hey, came across this again, and this time it was 100% for sure from a recovery from the gateway. Not sure how to explain the inconsistencies of when I see this. \n\nThere was a full cluster shutdown. I am not using the local gateway, at the moment, as you suggested. I don't see any relevant logging. \n\nMaybe it would make sense to update the test to include a full cluster restarts? Wouldn't hurt. \n\nThanks again. Know this is one of those painful ones to get to the bottom of. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/484282","html_url":"https://github.com/elastic/elasticsearch/issues/432#issuecomment-484282","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/432","id":484282,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDI4Mg==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-10-21T18:04:58Z","updated_at":"2010-10-21T18:04:58Z","author_association":"MEMBER","body":"The rest I ran included only peer shard recovery, not gateway recovery. How do you know its coming from gateway recovery, is it because of the full cluster shutdown and then startup?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/484290","html_url":"https://github.com/elastic/elasticsearch/issues/432#issuecomment-484290","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/432","id":484290,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDI5MA==","user":{"login":"ppearcy","id":307414,"node_id":"MDQ6VXNlcjMwNzQxNA==","avatar_url":"https://avatars3.githubusercontent.com/u/307414?v=4","gravatar_id":"","url":"https://api.github.com/users/ppearcy","html_url":"https://github.com/ppearcy","followers_url":"https://api.github.com/users/ppearcy/followers","following_url":"https://api.github.com/users/ppearcy/following{/other_user}","gists_url":"https://api.github.com/users/ppearcy/gists{/gist_id}","starred_url":"https://api.github.com/users/ppearcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppearcy/subscriptions","organizations_url":"https://api.github.com/users/ppearcy/orgs","repos_url":"https://api.github.com/users/ppearcy/repos","events_url":"https://api.github.com/users/ppearcy/events{/privacy}","received_events_url":"https://api.github.com/users/ppearcy/received_events","type":"User","site_admin":false},"created_at":"2010-10-21T18:11:15Z","updated_at":"2010-10-21T18:11:15Z","author_association":"CONTRIBUTOR","body":"Yeah, in _this_ case it was from a full recovery from the gateway after a full cluster shutdown. \n\nThanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/484337","html_url":"https://github.com/elastic/elasticsearch/issues/432#issuecomment-484337","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/432","id":484337,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDMzNw==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-10-21T18:30:59Z","updated_at":"2010-10-21T18:30:59Z","author_association":"MEMBER","body":"I see... . Ok, let me create a similar (long running) test that does also full cluster recovery.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/494841","html_url":"https://github.com/elastic/elasticsearch/issues/432#issuecomment-494841","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/432","id":494841,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDg0MQ==","user":{"login":"ppearcy","id":307414,"node_id":"MDQ6VXNlcjMwNzQxNA==","avatar_url":"https://avatars3.githubusercontent.com/u/307414?v=4","gravatar_id":"","url":"https://api.github.com/users/ppearcy","html_url":"https://github.com/ppearcy","followers_url":"https://api.github.com/users/ppearcy/followers","following_url":"https://api.github.com/users/ppearcy/following{/other_user}","gists_url":"https://api.github.com/users/ppearcy/gists{/gist_id}","starred_url":"https://api.github.com/users/ppearcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppearcy/subscriptions","organizations_url":"https://api.github.com/users/ppearcy/orgs","repos_url":"https://api.github.com/users/ppearcy/repos","events_url":"https://api.github.com/users/ppearcy/events{/privacy}","received_events_url":"https://api.github.com/users/ppearcy/received_events","type":"User","site_admin":false},"created_at":"2010-10-26T19:51:45Z","updated_at":"2010-10-26T19:51:45Z","author_association":"CONTRIBUTOR","body":"FYI, I am still hitting this issue. How can one tell from the logs if a recovery occurred from the gateway or a master node? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/494845","html_url":"https://github.com/elastic/elasticsearch/issues/432#issuecomment-494845","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/432","id":494845,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDg0NQ==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-10-26T19:53:11Z","updated_at":"2010-10-26T19:53:11Z","author_association":"MEMBER","body":"Set `index.gateway: DEBUG` for gateway info, and `index.shard.recovery: DEBUG` for shard recovery info.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/508843","html_url":"https://github.com/elastic/elasticsearch/issues/432#issuecomment-508843","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/432","id":508843,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODg0Mw==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-11-01T11:43:42Z","updated_at":"2010-11-01T11:43:42Z","author_association":"MEMBER","body":"hey, spent most of this week trying to simulate this, and finally managed to. I am working on a fix (mostly done) and will be pushed to master. Will update more once I push it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/509373","html_url":"https://github.com/elastic/elasticsearch/issues/432#issuecomment-509373","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/432","id":509373,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTM3Mw==","user":{"login":"ppearcy","id":307414,"node_id":"MDQ6VXNlcjMwNzQxNA==","avatar_url":"https://avatars3.githubusercontent.com/u/307414?v=4","gravatar_id":"","url":"https://api.github.com/users/ppearcy","html_url":"https://github.com/ppearcy","followers_url":"https://api.github.com/users/ppearcy/followers","following_url":"https://api.github.com/users/ppearcy/following{/other_user}","gists_url":"https://api.github.com/users/ppearcy/gists{/gist_id}","starred_url":"https://api.github.com/users/ppearcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppearcy/subscriptions","organizations_url":"https://api.github.com/users/ppearcy/orgs","repos_url":"https://api.github.com/users/ppearcy/repos","events_url":"https://api.github.com/users/ppearcy/events{/privacy}","received_events_url":"https://api.github.com/users/ppearcy/received_events","type":"User","site_admin":false},"created_at":"2010-11-01T15:44:22Z","updated_at":"2010-11-01T15:44:22Z","author_association":"CONTRIBUTOR","body":"Awesome!!! I am extremely grateful for the work involved in tracking this down, know it wasn't easy. Thanks!!!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/532106","html_url":"https://github.com/elastic/elasticsearch/issues/432#issuecomment-532106","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/432","id":532106,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjEwNg==","user":{"login":"ppearcy","id":307414,"node_id":"MDQ6VXNlcjMwNzQxNA==","avatar_url":"https://avatars3.githubusercontent.com/u/307414?v=4","gravatar_id":"","url":"https://api.github.com/users/ppearcy","html_url":"https://github.com/ppearcy","followers_url":"https://api.github.com/users/ppearcy/followers","following_url":"https://api.github.com/users/ppearcy/following{/other_user}","gists_url":"https://api.github.com/users/ppearcy/gists{/gist_id}","starred_url":"https://api.github.com/users/ppearcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppearcy/subscriptions","organizations_url":"https://api.github.com/users/ppearcy/orgs","repos_url":"https://api.github.com/users/ppearcy/repos","events_url":"https://api.github.com/users/ppearcy/events{/privacy}","received_events_url":"https://api.github.com/users/ppearcy/received_events","type":"User","site_admin":false},"created_at":"2010-11-10T16:46:26Z","updated_at":"2010-11-10T16:46:26Z","author_association":"CONTRIBUTOR","body":"Hey, \n  Up on 0.13 and have been bouncing things and haven't hit this. Before, I would have by now. I believe this is fixed.\n\nThanks!\n","performed_via_github_app":null}]