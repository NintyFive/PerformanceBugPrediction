{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/472","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/472/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/472/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/472/events","html_url":"https://github.com/elastic/elasticsearch/issues/472","id":397547,"node_id":"MDU6SXNzdWUzOTc1NDc=","number":472,"title":"Change single operation shard hashing to only use id, and not id and type","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"labels":[{"id":33660,"node_id":"MDU6TGFiZWwzMzY2MA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebreaking","name":">breaking","color":"d93f0b","default":false,"description":null},{"id":53377,"node_id":"MDU6TGFiZWw1MzM3Nw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.13.0","name":"v0.13.0","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2010-11-03T10:47:09Z","updated_at":"2010-11-03T10:47:41Z","closed_at":"2010-11-03T10:47:41Z","author_association":"MEMBER","active_lock_reason":null,"body":"Currently, single operation hashing (index/delete/get) is using the type as part of the hashing to decide which shard to direct to. It make more sense to just use the id for several reasons. \n\nFirst, the new routing control capability will allow to direct docs to be placed in the same placement of another doc (blog, and commends for example) just based on that doc id (the routing when indexing a comment can use the blog post id, and thats it).\n\nThere are future features where this type of hashing will really simplify them, so it make sense to make this change now.\n\nThis change will require to reindex the data. In order to revert back to using the type for hashing as well, set `cluster.routing.operation.use_type` to `true`. This means that a cluster can be started by setting this flag, start another cluster, and reindex data from the old cluster into the new cluster.\n","closed_by":null,"performed_via_github_app":null}