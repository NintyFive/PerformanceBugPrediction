[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264002679","html_url":"https://github.com/elastic/elasticsearch/issues/21893#issuecomment-264002679","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21893","id":264002679,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDAwMjY3OQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-11-30T21:35:04Z","updated_at":"2016-11-30T21:35:04Z","author_association":"CONTRIBUTOR","body":"looks like a bug, thanks for raising this. do you wanna open a PR for this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264002963","html_url":"https://github.com/elastic/elasticsearch/issues/21893#issuecomment-264002963","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21893","id":264002963,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDAwMjk2Mw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-11-30T21:36:03Z","updated_at":"2016-11-30T21:36:03Z","author_association":"CONTRIBUTOR","body":"can you tell how you ran into this exception and what version you are using?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264014343","html_url":"https://github.com/elastic/elasticsearch/issues/21893#issuecomment-264014343","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21893","id":264014343,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDAxNDM0Mw==","user":{"login":"henakamaMSFT","id":8988382,"node_id":"MDQ6VXNlcjg5ODgzODI=","avatar_url":"https://avatars1.githubusercontent.com/u/8988382?v=4","gravatar_id":"","url":"https://api.github.com/users/henakamaMSFT","html_url":"https://github.com/henakamaMSFT","followers_url":"https://api.github.com/users/henakamaMSFT/followers","following_url":"https://api.github.com/users/henakamaMSFT/following{/other_user}","gists_url":"https://api.github.com/users/henakamaMSFT/gists{/gist_id}","starred_url":"https://api.github.com/users/henakamaMSFT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henakamaMSFT/subscriptions","organizations_url":"https://api.github.com/users/henakamaMSFT/orgs","repos_url":"https://api.github.com/users/henakamaMSFT/repos","events_url":"https://api.github.com/users/henakamaMSFT/events{/privacy}","received_events_url":"https://api.github.com/users/henakamaMSFT/received_events","type":"User","site_admin":false},"created_at":"2016-11-30T22:18:08Z","updated_at":"2016-11-30T22:18:08Z","author_association":"CONTRIBUTOR","body":"Sure, be happy to open a PR. We're currently using version 1.7, working on upgrading.\r\n\r\nAfter a node restarted, one of the shards failed to initialize with the error message I listed above. I'm guessing that a write was dropped on the replica at some earlier point, even though the overall operation reported success (if this is a known issue that is fixed in later versions, I'd be very interested to hear it). To fix this, we removed the shard files from the node reporting the wrong doc count and let it recover from the primary.\r\n\r\nWhen checking doc counts with /_cat/shards, I noticed that the doc count didn't match up with the error message. Checked on the source code to see where the number was coming from and found the bug.","performed_via_github_app":null}]