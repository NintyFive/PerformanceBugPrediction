{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/46074","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46074/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46074/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46074/events","html_url":"https://github.com/elastic/elasticsearch/issues/46074","id":486375307,"node_id":"MDU6SXNzdWU0ODYzNzUzMDc=","number":46074,"title":"Bucket Histogram should return the center of bin and not the start of bin","user":{"login":"gk-patel","id":42677721,"node_id":"MDQ6VXNlcjQyNjc3NzIx","avatar_url":"https://avatars0.githubusercontent.com/u/42677721?v=4","gravatar_id":"","url":"https://api.github.com/users/gk-patel","html_url":"https://github.com/gk-patel","followers_url":"https://api.github.com/users/gk-patel/followers","following_url":"https://api.github.com/users/gk-patel/following{/other_user}","gists_url":"https://api.github.com/users/gk-patel/gists{/gist_id}","starred_url":"https://api.github.com/users/gk-patel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gk-patel/subscriptions","organizations_url":"https://api.github.com/users/gk-patel/orgs","repos_url":"https://api.github.com/users/gk-patel/repos","events_url":"https://api.github.com/users/gk-patel/events{/privacy}","received_events_url":"https://api.github.com/users/gk-patel/received_events","type":"User","site_admin":false},"labels":[{"id":141141324,"node_id":"MDU6TGFiZWwxNDExNDEzMjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Aggregations","name":":Analytics/Aggregations","color":"0e8a16","default":false,"description":"Aggregations"},{"id":1967499105,"node_id":"MDU6TGFiZWwxOTY3NDk5MTA1","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Analytics","name":"Team:Analytics","color":"fef2c0","default":false,"description":"Meta label for analytics/geo team"},{"id":929267538,"node_id":"MDU6TGFiZWw5MjkyNjc1Mzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/team-discuss","name":"team-discuss","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2019-08-28T13:14:11Z","updated_at":"2020-09-10T14:07:57Z","closed_at":"2020-09-10T14:07:57Z","author_association":"NONE","active_lock_reason":null,"body":"The \"key\" returned by the bucket histogram aggregations always represents the \"start\" of the bucket. IMHO, the key should return the center of the bucket (i.e. the mean of start and end). Because, this is also good for visualization. \r\n\r\nFor example, for the following Request, \r\n```\r\n\"aggs\": {\r\n    \"2\": {\r\n      \"histogram\": {\r\n        \"field\": \"some_value\",\r\n        \"interval\": 1,\r\n        \"min_doc_count\": 1\r\n      }\r\n    }\r\n  }\r\n```\r\nthe following response was generated,\r\n```\r\n\"aggregations\": {\r\n    \"2\": {\r\n      \"buckets\": [\r\n        {\r\n          \"key\": 0,  \"doc_count\": 31\r\n        },\r\n        {\r\n          \"key\": 6,  \"doc_count\": 1\r\n        },\r\n        {\r\n          \"key\": 7,  \"doc_count\": 1\r\n        }\r\n```\r\nAnd in Kibana, it is show as follows, \r\n\r\n![image](https://user-images.githubusercontent.com/42677721/63858513-e927d780-c9a5-11e9-85b6-f776f74e578b.png)\r\n\r\nBut this is technically wrong, because the values **6** and **7** should be shown at the start of the bucket. \r\n\r\nI thinks its a good idea to show the \"key\" at the center of the bar, but it should be set to a correct value. In my example, that would be **6.5** and **7.5**. \r\n\r\nThank you all for your time and also for considering my request. \r\n\r\n\r\n","closed_by":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"performed_via_github_app":null}