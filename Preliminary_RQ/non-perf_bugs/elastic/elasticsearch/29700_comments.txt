[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384129118","html_url":"https://github.com/elastic/elasticsearch/issues/29700#issuecomment-384129118","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29700","id":384129118,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEyOTExOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-02-10T17:24:20Z","updated_at":"2018-04-25T01:14:25Z","author_association":"COLLABORATOR","body":"*Original comment by @ppf2:*\n\nMaybe we can make it configurable, eg. after backing off due to pressure, we resume the usual marvel indexing rate after N seconds (configurable) of the cluster being in a good state (when the queues have cleared up, etc..).  The other thing to consider here is what if they keep overloading the bulk queues, will this cause the Marvel UI to show broken lines or weirdness?  If so, it will be nice to also have some indicator on the Marvel UI indicating when we are backing off - so that the end user can tell if there is an issue in the cluster vs. Marvel not working properly vs. intentional back-off.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384129120","html_url":"https://github.com/elastic/elasticsearch/issues/29700#issuecomment-384129120","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29700","id":384129120,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEyOTEyMA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-02-10T17:24:22Z","updated_at":"2018-04-25T01:14:25Z","author_association":"COLLABORATOR","body":"*Original comment by @pickypg:*\n\nHaving the UI recognize it will be much harder, but perhaps we can have it warn if it notices the queues approaching full. The agent won't be able to report the problem since the problem prevents it from reporting.\n\nIt occurred to me that maybe we can have the data queue on the agent for a few tries and then send it as a single bulk request, if it has to back off. Then we can backfill the info to a reasonable degree (probably something like 6 payloads for a minute by default), with it rolling off if it keeps queueing.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384129121","html_url":"https://github.com/elastic/elasticsearch/issues/29700#issuecomment-384129121","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29700","id":384129121,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEyOTEyMQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-02-10T17:24:23Z","updated_at":"2018-04-25T01:14:25Z","author_association":"COLLABORATOR","body":"*Original comment by @ppf2:*\n\nLove the idea of backfilling the info :)  Yah UI is definitely much harder to implement, as long as we have some indication somewhere that it is backing off/throttling, it will suffice.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384129124","html_url":"https://github.com/elastic/elasticsearch/issues/29700#issuecomment-384129124","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29700","id":384129124,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEyOTEyNA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-02-10T17:24:24Z","updated_at":"2018-04-25T01:14:25Z","author_association":"COLLABORATOR","body":"*Original comment by @pickypg:*\n\n@pius I created LINK REDACTED for the UI issue. The _good_ side of it being separate means that they can be done independently. It may actually prove the be simpler than dealing with back pressure in the agent, which may require a partial rewrite.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/386603913","html_url":"https://github.com/elastic/elasticsearch/issues/29700#issuecomment-386603913","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29700","id":386603913,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NjYwMzkxMw==","user":{"login":"tomcallahan","id":15988488,"node_id":"MDQ6VXNlcjE1OTg4NDg4","avatar_url":"https://avatars1.githubusercontent.com/u/15988488?v=4","gravatar_id":"","url":"https://api.github.com/users/tomcallahan","html_url":"https://github.com/tomcallahan","followers_url":"https://api.github.com/users/tomcallahan/followers","following_url":"https://api.github.com/users/tomcallahan/following{/other_user}","gists_url":"https://api.github.com/users/tomcallahan/gists{/gist_id}","starred_url":"https://api.github.com/users/tomcallahan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomcallahan/subscriptions","organizations_url":"https://api.github.com/users/tomcallahan/orgs","repos_url":"https://api.github.com/users/tomcallahan/repos","events_url":"https://api.github.com/users/tomcallahan/events{/privacy}","received_events_url":"https://api.github.com/users/tomcallahan/received_events","type":"User","site_admin":false},"created_at":"2018-05-04T13:38:07Z","updated_at":"2018-05-04T13:41:24Z","author_association":"CONTRIBUTOR","body":"This isnâ€™t something we think is worth the effort right now.","performed_via_github_app":null}]