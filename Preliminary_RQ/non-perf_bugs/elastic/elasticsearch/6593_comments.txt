[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158651702","html_url":"https://github.com/elastic/elasticsearch/issues/6593#issuecomment-158651702","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6593","id":158651702,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODY1MTcwMg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-21T15:17:53Z","updated_at":"2015-11-21T15:17:53Z","author_association":"CONTRIBUTOR","body":"@bleskes this is still relevant in master?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158795522","html_url":"https://github.com/elastic/elasticsearch/issues/6593#issuecomment-158795522","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6593","id":158795522,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODc5NTUyMg==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-11-22T20:29:38Z","updated_at":"2015-11-22T20:29:38Z","author_association":"MEMBER","body":"the code is still the same. I don't remember anymore why this was a problem. Maybe @jpountz or @mikemccand can have a look and make suggestions? code is here these days: https://github.com/elastic/elasticsearch/blob/6b2f3a9ad2a8bd7c63d5e179560426a43ecaf9e8/core/src/main/java/org/elasticsearch/search/suggest/completion/CompletionFieldStats.java#L45\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/160306968","html_url":"https://github.com/elastic/elasticsearch/issues/6593#issuecomment-160306968","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6593","id":160306968,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MDMwNjk2OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-28T14:52:55Z","updated_at":"2015-11-28T14:52:55Z","author_association":"CONTRIBUTOR","body":"I've seen the completion stats showing up in hotthreads output, so sounds like it is still an issue\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/160348989","html_url":"https://github.com/elastic/elasticsearch/issues/6593#issuecomment-160348989","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6593","id":160348989,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MDM0ODk4OQ==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-11-29T00:22:54Z","updated_at":"2015-11-29T00:22:54Z","author_association":"CONTRIBUTOR","body":"I've seen this in hot threads as well, but I think it's only really an issue for users with a very large number of fields ... and that will also cause other problems (heavy heap usage).\n\nIs there an API in mappings to efficiently (less than `O(numFields)`) just ask for the completion fields?  If so we should use it; if not, I think this is just a cost of having a huge number of fields.\n\nBut, @areek, is that TODO still true?  I.e. asking for stats will cause all suggesters to load their FSTs if they were not already loaded?  I thought we fixed this before merging the new completion suggester?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/160395307","html_url":"https://github.com/elastic/elasticsearch/issues/6593#issuecomment-160395307","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6593","id":160395307,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MDM5NTMwNw==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-11-29T09:55:42Z","updated_at":"2015-11-29T09:55:42Z","author_association":"MEMBER","body":"> Is there an API in mappings to efficiently (less than O(numFields)) just ask for the completion fields? If so we should use it; if not, I think this is just a cost of having a huge number of fields.\n\nwe currently don't have a look up by type mechanism and  I don't think it's needed - walking all your  in memory map of the mapping should be fine. I was just wondering if the Lucene code does more than just in memory map walking. If not, current code is fine with me and we can close this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/160397673","html_url":"https://github.com/elastic/elasticsearch/issues/6593#issuecomment-160397673","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6593","id":160397673,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MDM5NzY3Mw==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-11-29T10:33:13Z","updated_at":"2015-11-29T10:33:13Z","author_association":"CONTRIBUTOR","body":"> I was just wondering if the Lucene code does more than just in memory map walking.\n\nLucene really doesn't do much under that `atomicReader.fields().terms(fieldName)` call: it's just 2 `TreeMap` lookups (those `Terms` instances are already loaded on init of the `SegmentReader`).  It also calls `ensureOpen` each time, which calls `AtomicInteger.get`.  I guess we could make a trivial improvement to hold onto `atomicReader.fields()` locally ... I'll do that, but it's minor (just saves the `ensureOpen` for each field).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/370588956","html_url":"https://github.com/elastic/elasticsearch/issues/6593#issuecomment-370588956","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6593","id":370588956,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MDU4ODk1Ng==","user":{"login":"nirmalc","id":3236895,"node_id":"MDQ6VXNlcjMyMzY4OTU=","avatar_url":"https://avatars2.githubusercontent.com/u/3236895?v=4","gravatar_id":"","url":"https://api.github.com/users/nirmalc","html_url":"https://github.com/nirmalc","followers_url":"https://api.github.com/users/nirmalc/followers","following_url":"https://api.github.com/users/nirmalc/following{/other_user}","gists_url":"https://api.github.com/users/nirmalc/gists{/gist_id}","starred_url":"https://api.github.com/users/nirmalc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nirmalc/subscriptions","organizations_url":"https://api.github.com/users/nirmalc/orgs","repos_url":"https://api.github.com/users/nirmalc/repos","events_url":"https://api.github.com/users/nirmalc/events{/privacy}","received_events_url":"https://api.github.com/users/nirmalc/received_events","type":"User","site_admin":false},"created_at":"2018-03-05T22:23:53Z","updated_at":"2018-03-05T22:23:53Z","author_association":"CONTRIBUTOR","body":" it will be great if completion is not a part of default _stats output if its expensive call  ","performed_via_github_app":null}]