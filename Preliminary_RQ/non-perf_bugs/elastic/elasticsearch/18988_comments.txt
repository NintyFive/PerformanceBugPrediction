[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227388905","html_url":"https://github.com/elastic/elasticsearch/issues/18988#issuecomment-227388905","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18988","id":227388905,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzM4ODkwNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T09:32:01Z","updated_at":"2016-06-21T09:32:01Z","author_association":"CONTRIBUTOR","body":"@makeyang as usual you have provided a few keywords without explaining what you would like this feature to look like, how you want to use it, etc.  Please provide a reasonable explanation.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227393770","html_url":"https://github.com/elastic/elasticsearch/issues/18988#issuecomment-227393770","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18988","id":227393770,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzM5Mzc3MA==","user":{"login":"makeyang","id":13898618,"node_id":"MDQ6VXNlcjEzODk4NjE4","avatar_url":"https://avatars2.githubusercontent.com/u/13898618?v=4","gravatar_id":"","url":"https://api.github.com/users/makeyang","html_url":"https://github.com/makeyang","followers_url":"https://api.github.com/users/makeyang/followers","following_url":"https://api.github.com/users/makeyang/following{/other_user}","gists_url":"https://api.github.com/users/makeyang/gists{/gist_id}","starred_url":"https://api.github.com/users/makeyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/makeyang/subscriptions","organizations_url":"https://api.github.com/users/makeyang/orgs","repos_url":"https://api.github.com/users/makeyang/repos","events_url":"https://api.github.com/users/makeyang/events{/privacy}","received_events_url":"https://api.github.com/users/makeyang/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T09:53:11Z","updated_at":"2016-06-21T09:56:40Z","author_association":"CONTRIBUTOR","body":"@clintongormley  sorry, I thought u guys would thouth the same thing ~~~\nbetter provide below APIs for monitor nodes/cluster memory consuption:\nrequest API: GET _cat/memory\nresponse:\nnode index_request_memory, index_response_memory, etc, segment_memory, fielddata, filtercache\nXXXXX\n\nthis is basiclly what I thought how I would use it. \nthe basic idea is:\nwhen I give each node some memory for heap space, I can use JVM tools to detected how much heap memory is used, but I don't know the details. \nthe details are consisted of what the part I mention plus segment memory, fielddata etc.\nwe have to know if memory is upder presure or not and which part consump majority part of memory. \nwith and only with this, we can estimate the capisity of memory very precisily. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227397234","html_url":"https://github.com/elastic/elasticsearch/issues/18988#issuecomment-227397234","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18988","id":227397234,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzM5NzIzNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T10:09:14Z","updated_at":"2016-06-21T10:09:14Z","author_association":"CONTRIBUTOR","body":"@makeyang we provide memory stats (with a lot of detail) for segments, fielddata and doc values, caches,  indexing buffers, and a host of other values.  Look at `GET _nodes/stats`. Index request/response and search request/response is all mixed in together as they use a pool of BigArrays, and the memory use is usually transient so it doesn't make sense to report on that.\n\nThe one number we don't report is cluster state size, but there is an open issue for it: https://github.com/elastic/elasticsearch/issues/3415\n\nWhat else is missing?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227400611","html_url":"https://github.com/elastic/elasticsearch/issues/18988#issuecomment-227400611","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18988","id":227400611,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQwMDYxMQ==","user":{"login":"makeyang","id":13898618,"node_id":"MDQ6VXNlcjEzODk4NjE4","avatar_url":"https://avatars2.githubusercontent.com/u/13898618?v=4","gravatar_id":"","url":"https://api.github.com/users/makeyang","html_url":"https://github.com/makeyang","followers_url":"https://api.github.com/users/makeyang/followers","following_url":"https://api.github.com/users/makeyang/following{/other_user}","gists_url":"https://api.github.com/users/makeyang/gists{/gist_id}","starred_url":"https://api.github.com/users/makeyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/makeyang/subscriptions","organizations_url":"https://api.github.com/users/makeyang/orgs","repos_url":"https://api.github.com/users/makeyang/repos","events_url":"https://api.github.com/users/makeyang/events{/privacy}","received_events_url":"https://api.github.com/users/makeyang/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T10:25:03Z","updated_at":"2016-06-21T10:25:03Z","author_association":"CONTRIBUTOR","body":"@clintongormley  I don't agree with this one: the memory use is usually transient so it doesn't make sense to report on that. \nconsider this situation: if the memory presure is caused by heavy indexing or searching, that makes a lot of sense to report these memory consumption.\nremember, we get these values when and only when memory is under presure, then these transient value u mentioned is \"persisited\". \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227402678","html_url":"https://github.com/elastic/elasticsearch/issues/18988#issuecomment-227402678","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18988","id":227402678,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQwMjY3OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T10:35:20Z","updated_at":"2016-06-21T10:35:20Z","author_association":"CONTRIBUTOR","body":"For this we have the [`inflight_requests` circuit breaker](https://www.elastic.co/guide/en/elasticsearch/reference/master/circuit-breaker.html#in-flight-circuit-breaker), which will report its current memory usage.\n\nWhat else is missing?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227403556","html_url":"https://github.com/elastic/elasticsearch/issues/18988#issuecomment-227403556","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18988","id":227403556,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQwMzU1Ng==","user":{"login":"makeyang","id":13898618,"node_id":"MDQ6VXNlcjEzODk4NjE4","avatar_url":"https://avatars2.githubusercontent.com/u/13898618?v=4","gravatar_id":"","url":"https://api.github.com/users/makeyang","html_url":"https://github.com/makeyang","followers_url":"https://api.github.com/users/makeyang/followers","following_url":"https://api.github.com/users/makeyang/following{/other_user}","gists_url":"https://api.github.com/users/makeyang/gists{/gist_id}","starred_url":"https://api.github.com/users/makeyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/makeyang/subscriptions","organizations_url":"https://api.github.com/users/makeyang/orgs","repos_url":"https://api.github.com/users/makeyang/repos","events_url":"https://api.github.com/users/makeyang/events{/privacy}","received_events_url":"https://api.github.com/users/makeyang/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T10:40:08Z","updated_at":"2016-06-21T10:40:08Z","author_association":"CONTRIBUTOR","body":"circuit breaker can't report the memory consumption. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227403960","html_url":"https://github.com/elastic/elasticsearch/issues/18988#issuecomment-227403960","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18988","id":227403960,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQwMzk2MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T10:42:18Z","updated_at":"2016-06-21T10:42:18Z","author_association":"CONTRIBUTOR","body":"Yes it can.  That's what the `estimated_size_in_bytes` is:\n\n```\n    \"in_flight_requests\": {\n      \"limit_size_in_bytes\": 2112618496,\n      \"limit_size\": \"1.9gb\",\n      \"estimated_size_in_bytes\": 0,\n      \"estimated_size\": \"0b\",\n      \"overhead\": 1,\n      \"tripped\": 0\n    },\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227415070","html_url":"https://github.com/elastic/elasticsearch/issues/18988#issuecomment-227415070","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18988","id":227415070,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQxNTA3MA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T11:40:51Z","updated_at":"2016-06-21T11:40:51Z","author_association":"MEMBER","body":"@makeyang I'm not sure what you mean exactly with \n\n> we get these values when and only when memory is under presure, then these transient value u mentioned is \"persisited\".\n\nBut maybe you are looking for something like Marvel - this is a monitoring tool that collects stats data and store it so you can see the historical behavior . See https://www.elastic.co/products/marvel\n","performed_via_github_app":null}]