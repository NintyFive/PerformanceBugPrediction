[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/480267614","html_url":"https://github.com/elastic/elasticsearch/issues/40897#issuecomment-480267614","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40897","id":480267614,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDI2NzYxNA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-04-05T13:04:11Z","updated_at":"2019-04-05T13:04:11Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/480833056","html_url":"https://github.com/elastic/elasticsearch/issues/40897#issuecomment-480833056","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40897","id":480833056,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDgzMzA1Ng==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2019-04-08T13:32:26Z","updated_at":"2019-04-08T13:32:26Z","author_association":"CONTRIBUTOR","body":"@dadoonet - thank you for the very detailed bug report !\r\n\r\nThis is abit confusing, so I had to make my self a table :)\r\n\r\n| |6.7|7.0|org.elasticsearch.client.indices.CreateIndexRequest| org.elasticsearch.action.admin.indices.create.CreateIndexRequest*|\r\n|------|----|---|---------------------------------------------------|------------------------------------------------------------------|\r\n|`include_type_name` |`true` |`false`|`false`|`true`\r\n  \r\n\\* deprectated                                                 \r\n\r\nThe `true` or `false` in the table represents the default value of `include_type_name`. The idea is that in 6.7 to raise visibility if you are using a type (for specific APIs such as this). This is to prepare for 7.0 were types are deprecated and eventually removed in 8.0. \r\n\r\nYou are correct that the Java API is deprecated, and you can't simply switch to the non-deprecated version AND send a type. This is intentional (though admittedly a bit confusing).  The Java API is raising the awareness that you are still using a type in this call. (`_doc` is still considered a type).\r\n\r\nSwitching to the non-deprecated version requires removal of the type. Since you are already using `_doc` (the implicit type) this should be as simple as updating to `org.elasticsearch.client.indices.CreateIndexRequest` and removing the `_doc`.  Once you do that everything should work, and you are also prepared for 7.x.  (If you weren't already using `_doc` you would need update your queries and ensure that you write a new index or re-index with a typeless template)\r\n\r\n```java\r\nimport org.apache.http.HttpHost;\r\nimport org.elasticsearch.client.RequestOptions;\r\nimport org.elasticsearch.client.RestClient;\r\nimport org.elasticsearch.client.RestHighLevelClient;\r\nimport org.elasticsearch.client.indices.CreateIndexRequest;\r\nimport org.elasticsearch.common.xcontent.XContentType;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class App {\r\n    public static void main(String[] args) throws IOException {\r\n        RestHighLevelClient client = new RestHighLevelClient(\r\n                RestClient.builder(HttpHost.create(\"http://localhost:55555\")));\r\n        try {\r\n            CreateIndexRequest cir = new CreateIndexRequest(\"foo5\");\r\n            cir.source(\"{\\n\" +\r\n                    \"  \\\"mappings\\\": {\\n\" +           \r\n                    \"      \\\"properties\\\": {\\n\" +\r\n                    \"        \\\"content\\\": {\\n\" +\r\n                    \"          \\\"type\\\": \\\"text\\\"\\n\" +\r\n                    \"        }\\n\" +\r\n                    \"      }\\n\" +            \r\n                    \"  }\\n\" +\r\n                    \"}\\n\", XContentType.JSON);\r\n            client.indices().create(cir, RequestOptions.DEFAULT);\r\n        } catch (Exception e) {\r\n            e.printStackTrace(System.err);\r\n        } finally {\r\n            client.close();\r\n        }\r\n    }\r\n}\r\n\r\nClosing issue. Please re-open if needed. ","performed_via_github_app":null}]