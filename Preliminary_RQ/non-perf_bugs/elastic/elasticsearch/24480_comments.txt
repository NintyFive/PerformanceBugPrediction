[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299125984","html_url":"https://github.com/elastic/elasticsearch/issues/24480#issuecomment-299125984","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24480","id":299125984,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTEyNTk4NA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2017-05-04T08:32:45Z","updated_at":"2017-05-04T08:32:45Z","author_association":"CONTRIBUTOR","body":"Could it be related to https://discuss.elastic.co/t/elasticsearch-x-pack-plugin-breaks-elasticsearch/82051/4 ?\r\n\r\nDid you install x-pack as root?\r\nIs this the full stack trace?\r\nCan you show us the content of the plugins directory (with permissions)?\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299126899","html_url":"https://github.com/elastic/elasticsearch/issues/24480#issuecomment-299126899","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24480","id":299126899,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTEyNjg5OQ==","user":{"login":"vitalykarasik","id":7628795,"node_id":"MDQ6VXNlcjc2Mjg3OTU=","avatar_url":"https://avatars2.githubusercontent.com/u/7628795?v=4","gravatar_id":"","url":"https://api.github.com/users/vitalykarasik","html_url":"https://github.com/vitalykarasik","followers_url":"https://api.github.com/users/vitalykarasik/followers","following_url":"https://api.github.com/users/vitalykarasik/following{/other_user}","gists_url":"https://api.github.com/users/vitalykarasik/gists{/gist_id}","starred_url":"https://api.github.com/users/vitalykarasik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitalykarasik/subscriptions","organizations_url":"https://api.github.com/users/vitalykarasik/orgs","repos_url":"https://api.github.com/users/vitalykarasik/repos","events_url":"https://api.github.com/users/vitalykarasik/events{/privacy}","received_events_url":"https://api.github.com/users/vitalykarasik/received_events","type":"User","site_admin":false},"created_at":"2017-05-04T08:37:40Z","updated_at":"2017-05-04T08:37:40Z","author_association":"NONE","body":"Ywelsch - many thanks for your answer!\r\nYes, it was permission - I figured it out just before I read your comment :-)\r\n\"chown  -R elasticsearch  /usr/share/elasticsearch/plugins/x-pack/     \" fixed the issue.\r\nYes, I installed as root. I suggest to  update documentation. In fact, we cannot install as \"elasticsearch\" user because it has \"/bin/false\" as its shell.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299166222","html_url":"https://github.com/elastic/elasticsearch/issues/24480#issuecomment-299166222","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24480","id":299166222,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTE2NjIyMg==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2017-05-04T12:05:15Z","updated_at":"2017-05-04T12:05:15Z","author_association":"CONTRIBUTOR","body":"I followed the installation instructions [here](https://www.elastic.co/guide/en/x-pack/current/installing-xpack.html#xpack-package-installation) and cannot reproduce the permissions issue, so I'm wondering where things could have gone wrong.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299168292","html_url":"https://github.com/elastic/elasticsearch/issues/24480#issuecomment-299168292","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24480","id":299168292,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTE2ODI5Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-05-04T12:16:08Z","updated_at":"2017-05-04T12:16:08Z","author_association":"MEMBER","body":"It is expected that installation be done with `root` and this is [documented](https://www.elastic.co/guide/en/x-pack/5.3/installing-xpack.html#xpack-package-installation). Installing as the `elasticsearch` user will simply not work, there are files and directories that need to be written to that the `elasticsearch` user does not have.\r\n\r\nI wonder if you have `umask` in place that is interfering with our expectations (although I thought we addressed this)? Can you check:\r\n\r\n```\r\n$ umask\r\n0002\r\n```\r\n\r\nand share the output here?\r\n\r\nCan you also show all the permissions on the tree starting at `elasticsearch`:\r\n\r\n```\r\n$ tree -L 3 -p\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299428647","html_url":"https://github.com/elastic/elasticsearch/issues/24480#issuecomment-299428647","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24480","id":299428647,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTQyODY0Nw==","user":{"login":"vitalykarasik","id":7628795,"node_id":"MDQ6VXNlcjc2Mjg3OTU=","avatar_url":"https://avatars2.githubusercontent.com/u/7628795?v=4","gravatar_id":"","url":"https://api.github.com/users/vitalykarasik","html_url":"https://github.com/vitalykarasik","followers_url":"https://api.github.com/users/vitalykarasik/followers","following_url":"https://api.github.com/users/vitalykarasik/following{/other_user}","gists_url":"https://api.github.com/users/vitalykarasik/gists{/gist_id}","starred_url":"https://api.github.com/users/vitalykarasik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitalykarasik/subscriptions","organizations_url":"https://api.github.com/users/vitalykarasik/orgs","repos_url":"https://api.github.com/users/vitalykarasik/repos","events_url":"https://api.github.com/users/vitalykarasik/events{/privacy}","received_events_url":"https://api.github.com/users/vitalykarasik/received_events","type":"User","site_admin":false},"created_at":"2017-05-05T10:07:56Z","updated_at":"2017-05-05T10:07:56Z","author_association":"NONE","body":"Yes, I installed as root. I cannot provide original (after install)\nownership/permission details because I already fixed them.\nI guess it's related to umask - it's \"0077\" for root user on my hardened\nUbuntu.\nI suggest set ownership and permission for all installed files explicitly,\nw/o relying on system settings.\n\nThank you both, Vitaly\n\nOn Thu, May 4, 2017 at 3:16 PM, Jason Tedor <notifications@github.com>\nwrote:\n\n> It is expected that installation be done with root and this is documented\n> <https://www.elastic.co/guide/en/x-pack/5.3/installing-xpack.html#xpack-package-installation>.\n> Installing as the elasticsearch user will simply not work, there are\n> files and directories that need to be written to that the elasticsearch\n> user does not have.\n>\n> I wonder if you have umask in place that is interfering with our\n> expectations (although I thought we addressed this)? Can you check:\n>\n> $ umask\n> 0002\n>\n> and share the output here?\n>\n> Can you also show all the permissions on the tree starting at\n> elasticsearch:\n>\n> $ tree -L 3 -p\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/elastic/elasticsearch/issues/24480#issuecomment-299168292>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AHRn-3h12M9B9SFosPsUIL065KmWutSaks5r2cGrgaJpZM4NQV7Q>\n> .\n>\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299431745","html_url":"https://github.com/elastic/elasticsearch/issues/24480#issuecomment-299431745","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24480","id":299431745,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTQzMTc0NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-05-05T10:26:05Z","updated_at":"2017-05-05T10:26:05Z","author_association":"MEMBER","body":"> I guess it's related to umask - it's \"0077\" for root user on my hardened Ubuntu.\r\n\r\nThank you for confirming this, we will look into whether or not this is indeed the cause.\r\n\r\n> I suggest set ownership and permission for all installed files explicitly, w/o relying on system settings.\r\n\r\n[Yes, we do this already](https://github.com/elastic/elasticsearch/blob/v5.3.2/core/src/main/java/org/elasticsearch/plugins/InstallPluginCommand.java#L145-L170), but it appears that we might be missing something somewhere.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299590653","html_url":"https://github.com/elastic/elasticsearch/issues/24480#issuecomment-299590653","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24480","id":299590653,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTU5MDY1Mw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-05-05T22:32:20Z","updated_at":"2017-05-05T22:32:20Z","author_association":"MEMBER","body":"> Thank you for confirming this, we will look into whether or not this is indeed the cause.\r\n\r\nI can reproduce this by setting the umask to 0077.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299596382","html_url":"https://github.com/elastic/elasticsearch/issues/24480#issuecomment-299596382","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24480","id":299596382,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTU5NjM4Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-05-05T23:15:38Z","updated_at":"2017-05-05T23:15:38Z","author_association":"MEMBER","body":"I found the bug, but it raises some challenges. No promises on a fix in the short term.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299611234","html_url":"https://github.com/elastic/elasticsearch/issues/24480#issuecomment-299611234","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24480","id":299611234,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTYxMTIzNA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-05-06T02:55:42Z","updated_at":"2017-05-06T02:55:42Z","author_association":"MEMBER","body":"I found a clean solution and opened #24527.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299654052","html_url":"https://github.com/elastic/elasticsearch/issues/24480#issuecomment-299654052","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24480","id":299654052,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTY1NDA1Mg==","user":{"login":"vitalykarasik","id":7628795,"node_id":"MDQ6VXNlcjc2Mjg3OTU=","avatar_url":"https://avatars2.githubusercontent.com/u/7628795?v=4","gravatar_id":"","url":"https://api.github.com/users/vitalykarasik","html_url":"https://github.com/vitalykarasik","followers_url":"https://api.github.com/users/vitalykarasik/followers","following_url":"https://api.github.com/users/vitalykarasik/following{/other_user}","gists_url":"https://api.github.com/users/vitalykarasik/gists{/gist_id}","starred_url":"https://api.github.com/users/vitalykarasik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitalykarasik/subscriptions","organizations_url":"https://api.github.com/users/vitalykarasik/orgs","repos_url":"https://api.github.com/users/vitalykarasik/repos","events_url":"https://api.github.com/users/vitalykarasik/events{/privacy}","received_events_url":"https://api.github.com/users/vitalykarasik/received_events","type":"User","site_admin":false},"created_at":"2017-05-06T17:22:23Z","updated_at":"2017-05-06T17:22:23Z","author_association":"NONE","body":"Thank you!\n\nOn Sat, May 6, 2017 at 5:56 AM, Jason Tedor <notifications@github.com>\nwrote:\n\n> I found a clean solution and opened #24527\n> <https://github.com/elastic/elasticsearch/pull/24527>.\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/elastic/elasticsearch/issues/24480#issuecomment-299611234>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AHRn-yGOPYneyK4sDMpBP0JvalTTHbP3ks5r2-FLgaJpZM4NQV7Q>\n> .\n>\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299655755","html_url":"https://github.com/elastic/elasticsearch/issues/24480#issuecomment-299655755","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24480","id":299655755,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTY1NTc1NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-05-06T17:51:29Z","updated_at":"2017-05-06T17:51:29Z","author_association":"MEMBER","body":"You're welcome.","performed_via_github_app":null}]