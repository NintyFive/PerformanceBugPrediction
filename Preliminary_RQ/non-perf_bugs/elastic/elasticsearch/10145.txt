{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10145","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10145/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10145/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10145/events","html_url":"https://github.com/elastic/elasticsearch/issues/10145","id":62773239,"node_id":"MDU6SXNzdWU2Mjc3MzIzOQ==","number":10145,"title":"master/1.x branch does not compile with java9","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"labels":[{"id":190834096,"node_id":"MDU6TGFiZWwxOTA4MzQwOTY=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.5.1","name":"v1.5.1","color":"dddddd","default":false,"description":null},{"id":182334038,"node_id":"MDU6TGFiZWwxODIzMzQwMzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.6.0","name":"v1.6.0","color":"dddddd","default":false,"description":null},{"id":76184120,"node_id":"MDU6TGFiZWw3NjE4NDEyMA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v2.0.0-beta1","name":"v2.0.0-beta1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2015-03-18T18:59:20Z","updated_at":"2015-05-09T10:21:41Z","closed_at":"2015-03-24T05:17:14Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"master works fine. Maybe there is a real bug here, e.g. wildcard imports, and a new class in java9 causes a conflict? This is why i hate wildcard imports :)\n\nOtherwise it could be a compiler bug or something:\n\nmain:\n     [echo] Using OpenJDK Runtime Environment 1.9.0-internal-rmuir_2015_03_18_00_27-b00 Oracle Corporation\n[INFO] Executed tasks\n[INFO] \n[INFO] --- maven-antrun-plugin:1.7:run (invalid-patterns) @ elasticsearch ---\n[INFO] Executing tasks\n\nmain:\n[INFO] Executed tasks\n[INFO] \n[INFO] --- buildnumber-maven-plugin:1.2:create (default) @ elasticsearch ---\n[INFO] Checking for local modifications: skipped.\n[INFO] Updating project files from SCM: skipped.\n[INFO] Executing: /bin/sh -c cd /home/rmuir/workspace/elasticsearch && git rev-parse --verify HEAD\n[INFO] Working directory: /home/rmuir/workspace/elasticsearch\n[INFO] Storing buildNumber: 78b5a6a7fc6caa61e1af9fb67e9a2ec2df4f831f at timestamp: 1426705014243\n[INFO] Executing: /bin/sh -c cd /home/rmuir/workspace/elasticsearch && git rev-parse --verify HEAD\n[INFO] Working directory: /home/rmuir/workspace/elasticsearch\n[INFO] Storing buildScmBranch: UNKNOWN\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ elasticsearch ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 2 resources\n[INFO] Copying 5 resources\n[INFO] \n[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ elasticsearch ---\n[INFO] Compiling 3171 source files to /home/rmuir/workspace/elasticsearch/target/classes\n[INFO] -------------------------------------------------------------\n[ERROR] COMPILATION ERROR : \n[INFO] -------------------------------------------------------------\n[ERROR] /home/rmuir/workspace/elasticsearch/src/main/java/org/elasticsearch/common/inject/Scopes.java:[112,23] error: method scope in interface Scope cannot be applied to given types;\n[ERROR]   required: Key<T#1>,Provider<T#1>\n  found: Key<T#2>,ProviderToInternalFactoryAdapter<CAP#1>\n  reason: inferred type does not conform to equality constraint(s)\n    inferred: CAP#1\n    equality constraints(s): CAP#1,T#2\n  where T#1,T#2 are type-variables:\n    T#1 extends Object declared in method <T#1>scope(Key<T#1>,Provider<T#1>)\n    T#2 extends Object declared in method <T#2>scope(Key<T#2>,InjectorImpl,InternalFactory<? extends T#2>,Scoping)\n  where CAP#1 is a fresh type-variable:\n    CAP#1 extends T#2 from capture of ? extends T#2\n/home/rmuir/workspace/elasticsearch/src/main/java/org/elasticsearch/common/collect/Iterators2.java:[34,63] error: incompatible types: PeekingIterator<CAP#1> cannot be converted to PeekingIterator<T>\n[ERROR]   where T is a type-variable:\n    T extends Object declared in method <T>deduplicateSorted(Iterator<? extends T>,Comparator<? super T>)\n  where CAP#1 is a fresh type-variable:\n    CAP#1 extends T from capture of ? extends T\n/home/rmuir/workspace/elasticsearch/src/main/java/org/elasticsearch/common/inject/util/Modules.java:[92,58] error: incompatible types: ImmutableSet<CAP#1> cannot be converted to Set<Module>\n[ERROR]   where CAP#1 is a fresh type-variable:\n    CAP#1 extends Module from capture of ? extends Module\n/home/rmuir/workspace/elasticsearch/src/main/java/org/elasticsearch/common/inject/util/Modules.java:[123,50] error: incompatible types: ImmutableSet<CAP#1> cannot be converted to ImmutableSet<Module>\n[INFO] 4 errors \n[INFO] -------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 26.162 s\n[INFO] Finished at: 2015-03-18T14:57:07-05:00\n[INFO] Final Memory: 23M/531M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project elasticsearch: Compilation failure: Compilation failure:\n[ERROR] /home/rmuir/workspace/elasticsearch/src/main/java/org/elasticsearch/common/inject/Scopes.java:[112,23] error: method scope in interface Scope cannot be applied to given types;\n[ERROR] required: Key<T#1>,Provider<T#1>\n[ERROR] found: Key<T#2>,ProviderToInternalFactoryAdapter<CAP#1>\n[ERROR] reason: inferred type does not conform to equality constraint(s)\n[ERROR] inferred: CAP#1\n[ERROR] equality constraints(s): CAP#1,T#2\n[ERROR] where T#1,T#2 are type-variables:\n[ERROR] T#1 extends Object declared in method <T#1>scope(Key<T#1>,Provider<T#1>)\n[ERROR] T#2 extends Object declared in method <T#2>scope(Key<T#2>,InjectorImpl,InternalFactory<? extends T#2>,Scoping)\n[ERROR] where CAP#1 is a fresh type-variable:\n[ERROR] CAP#1 extends T#2 from capture of ? extends T#2\n[ERROR] /home/rmuir/workspace/elasticsearch/src/main/java/org/elasticsearch/common/collect/Iterators2.java:[34,63] error: incompatible types: PeekingIterator<CAP#1> cannot be converted to PeekingIterator<T>\n[ERROR] where T is a type-variable:\n[ERROR] T extends Object declared in method <T>deduplicateSorted(Iterator<? extends T>,Comparator<? super T>)\n[ERROR] where CAP#1 is a fresh type-variable:\n[ERROR] CAP#1 extends T from capture of ? extends T\n[ERROR] /home/rmuir/workspace/elasticsearch/src/main/java/org/elasticsearch/common/inject/util/Modules.java:[92,58] error: incompatible types: ImmutableSet<CAP#1> cannot be converted to Set<Module>\n[ERROR] where CAP#1 is a fresh type-variable:\n[ERROR] CAP#1 extends Module from capture of ? extends Module\n[ERROR] /home/rmuir/workspace/elasticsearch/src/main/java/org/elasticsearch/common/inject/util/Modules.java:[123,50] error: incompatible types: ImmutableSet<CAP#1> cannot be converted to ImmutableSet<Module>\n[ERROR] -> [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n","closed_by":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"performed_via_github_app":null}