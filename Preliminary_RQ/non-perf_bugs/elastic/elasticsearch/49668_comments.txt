[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/559533234","html_url":"https://github.com/elastic/elasticsearch/issues/49668#issuecomment-559533234","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49668","id":559533234,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTUzMzIzNA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-11-28T15:25:00Z","updated_at":"2019-11-28T15:25:00Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security (:Security/Authorization)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/559567757","html_url":"https://github.com/elastic/elasticsearch/issues/49668#issuecomment-559567757","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49668","id":559567757,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTU2Nzc1Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-11-28T17:26:33Z","updated_at":"2019-11-28T17:26:33Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/CRUD)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/559594110","html_url":"https://github.com/elastic/elasticsearch/issues/49668#issuecomment-559594110","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49668","id":559594110,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTU5NDExMA==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-11-28T20:01:16Z","updated_at":"2019-11-28T20:01:16Z","author_association":"MEMBER","body":"@dnangelxueaoran are you seeing errors in the logs related to creating indices (or other errors)?\r\n\r\nWe solved an issue with this in https://github.com/elastic/elasticsearch/pull/48230 where errors in index creation would lead to leaking `OptoutQueryCache` but maybe we missed a spot.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/559632274","html_url":"https://github.com/elastic/elasticsearch/issues/49668#issuecomment-559632274","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49668","id":559632274,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTYzMjI3NA==","user":{"login":"dnangelxueaoran","id":24287151,"node_id":"MDQ6VXNlcjI0Mjg3MTUx","avatar_url":"https://avatars2.githubusercontent.com/u/24287151?v=4","gravatar_id":"","url":"https://api.github.com/users/dnangelxueaoran","html_url":"https://github.com/dnangelxueaoran","followers_url":"https://api.github.com/users/dnangelxueaoran/followers","following_url":"https://api.github.com/users/dnangelxueaoran/following{/other_user}","gists_url":"https://api.github.com/users/dnangelxueaoran/gists{/gist_id}","starred_url":"https://api.github.com/users/dnangelxueaoran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnangelxueaoran/subscriptions","organizations_url":"https://api.github.com/users/dnangelxueaoran/orgs","repos_url":"https://api.github.com/users/dnangelxueaoran/repos","events_url":"https://api.github.com/users/dnangelxueaoran/events{/privacy}","received_events_url":"https://api.github.com/users/dnangelxueaoran/received_events","type":"User","site_admin":false},"created_at":"2019-11-29T01:41:03Z","updated_at":"2019-11-29T01:43:00Z","author_association":"NONE","body":"@original-brownbear Thank you very much! I will send the debug log to you by mistake, please check if it is the same problem. We have two different error messages, one of which is the same as #48230.\r\n\r\n`[2019-11-29T09:37:03,594][DEBUG][o.e.a.a.i.t.p.TransportPutIndexTemplateAction] [node-3] failed to put template [cloud-sleuth:span_template]\r\njava.lang.IllegalArgumentException: Setting index.mapper.dynamic was removed after version 6.0.0\r\n        at org.elasticsearch.index.mapper.MapperService.<init>(MapperService.java:165) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.index.IndexService.<init>(IndexService.java:180) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.index.IndexModule.newIndexService(IndexModule.java:411) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.indices.IndicesService.createIndexService(IndicesService.java:550) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.indices.IndicesService.createIndex(IndicesService.java:499) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.cluster.metadata.MetaDataIndexTemplateService.validateAndAddTemplate(MetaDataIndexTemplateService.java:235) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n`\r\n\r\n\r\n---------------------------------------------------------------------------------------------------------------\r\n`[2019-11-29T09:30:53,680][DEBUG][o.e.a.b.TransportShardBulkAction] [node-4] [metrics-2019-11][1] failed to execute bulk item (index) index {[metrics-2019-11][doc][NWvItG4B2lkBRSrDQXSQ], source[{\"@timestamp\":\"2019-11-29T01:30:53.196Z\",\"name\":\"http_server_requests\",\"type\":\"timer\",\"exception\":\"None\",\"method\":\"GET\",\"outcome\":\"SUCCESS\",\"status\":\"200\",\"uri\":\"/v1/ns/catalog/instances\",\"count\":0,\"sum\":0.0,\"mean\":0.0,\"max\":0.0}]}\r\njava.lang.IllegalArgumentException: Rejecting mapping update to [metrics-2019-11] as the final mapping would have more than 1 type: [_doc, doc]\r\n        at org.elasticsearch.cluster.metadata.MetaDataMappingService$PutMappingExecutor.applyRequest(MetaDataMappingService.java:272) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.cluster.metadata.MetaDataMappingService$PutMappingExecutor.execute(MetaDataMappingService.java:238) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.cluster.service.MasterService.executeTasks(MasterService.java:702) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.cluster.service.MasterService.calculateTaskOutputs(MasterService.java:324) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.cluster.service.MasterService.runTasks(MasterService.java:219) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.cluster.service.MasterService.access$000(MasterService.java:73) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.cluster.service.MasterService$Batcher.run(MasterService.java:151) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.cluster.service.TaskBatcher.runIfNotProcessed(TaskBatcher.java:150) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.cluster.service.TaskBatcher$BatchedTask.run(TaskBatcher.java:188) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:703) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:252) ~[elasticsearch-7.4.2.jar:7.4.2]`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/559699951","html_url":"https://github.com/elastic/elasticsearch/issues/49668#issuecomment-559699951","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49668","id":559699951,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTY5OTk1MQ==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-11-29T08:13:37Z","updated_at":"2019-11-29T08:13:37Z","author_association":"MEMBER","body":"It looks like this is the same issue fixed by https://github.com/elastic/elasticsearch/pull/48230 but https://github.com/elastic/elasticsearch/pull/48230 wasn't backported as the labelling on the  PR suggests which is why this is still failing. Maybe @DaveCTurner can double check to confirm and maybe backport (in case there is a reason this wasn't eventually backported to `7.4`).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/559707123","html_url":"https://github.com/elastic/elasticsearch/issues/49668#issuecomment-559707123","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49668","id":559707123,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTcwNzEyMw==","user":{"login":"dnangelxueaoran","id":24287151,"node_id":"MDQ6VXNlcjI0Mjg3MTUx","avatar_url":"https://avatars2.githubusercontent.com/u/24287151?v=4","gravatar_id":"","url":"https://api.github.com/users/dnangelxueaoran","html_url":"https://github.com/dnangelxueaoran","followers_url":"https://api.github.com/users/dnangelxueaoran/followers","following_url":"https://api.github.com/users/dnangelxueaoran/following{/other_user}","gists_url":"https://api.github.com/users/dnangelxueaoran/gists{/gist_id}","starred_url":"https://api.github.com/users/dnangelxueaoran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnangelxueaoran/subscriptions","organizations_url":"https://api.github.com/users/dnangelxueaoran/orgs","repos_url":"https://api.github.com/users/dnangelxueaoran/repos","events_url":"https://api.github.com/users/dnangelxueaoran/events{/privacy}","received_events_url":"https://api.github.com/users/dnangelxueaoran/received_events","type":"User","site_admin":false},"created_at":"2019-11-29T08:39:52Z","updated_at":"2019-11-29T08:39:52Z","author_association":"NONE","body":"@original-brownbear  \r\n@DaveCTurner \r\nThank you very much! Yes, it's similar to #48230, we upgraded 7.XX with 7.3.0 first and upgraded to 7.4.2 two weeks ago.\r\nIt is true that there will still be memory leaks.\r\nPlease check it.\r\nDo we need to wait for the next release?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/560192166","html_url":"https://github.com/elastic/elasticsearch/issues/49668#issuecomment-560192166","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49668","id":560192166,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDE5MjE2Ng==","user":{"login":"dnangelxueaoran","id":24287151,"node_id":"MDQ6VXNlcjI0Mjg3MTUx","avatar_url":"https://avatars2.githubusercontent.com/u/24287151?v=4","gravatar_id":"","url":"https://api.github.com/users/dnangelxueaoran","html_url":"https://github.com/dnangelxueaoran","followers_url":"https://api.github.com/users/dnangelxueaoran/followers","following_url":"https://api.github.com/users/dnangelxueaoran/following{/other_user}","gists_url":"https://api.github.com/users/dnangelxueaoran/gists{/gist_id}","starred_url":"https://api.github.com/users/dnangelxueaoran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnangelxueaoran/subscriptions","organizations_url":"https://api.github.com/users/dnangelxueaoran/orgs","repos_url":"https://api.github.com/users/dnangelxueaoran/repos","events_url":"https://api.github.com/users/dnangelxueaoran/events{/privacy}","received_events_url":"https://api.github.com/users/dnangelxueaoran/received_events","type":"User","site_admin":false},"created_at":"2019-12-02T01:47:51Z","updated_at":"2019-12-02T01:47:51Z","author_association":"NONE","body":"@original-brownbear  Will the next version be fixed?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/560302230","html_url":"https://github.com/elastic/elasticsearch/issues/49668#issuecomment-560302230","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49668","id":560302230,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDMwMjIzMA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2019-12-02T09:08:24Z","updated_at":"2019-12-02T09:08:24Z","author_association":"CONTRIBUTOR","body":"Apologies, you're right, the fix was not backported to the 7.4 branch. I do not expect any more releases from that branch so I think all we can do here is remove the `v7.4.2` label. It is addressed in 7.5.0.","performed_via_github_app":null}]