[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32893558","html_url":"https://github.com/elastic/elasticsearch/issues/4813#issuecomment-32893558","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4813","id":32893558,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODkzNTU4","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2014-01-21T15:13:13Z","updated_at":"2014-01-21T15:13:13Z","author_association":"CONTRIBUTOR","body":"How would scoring work if some of the documents have norms and some do not?  Would it just ignore them on all documents because they are false on the `FieldType`?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32897262","html_url":"https://github.com/elastic/elasticsearch/issues/4813#issuecomment-32897262","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4813","id":32897262,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk3MjYy","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-01-21T15:47:38Z","updated_at":"2014-01-21T15:47:38Z","author_association":"CONTRIBUTOR","body":"By default, here is what Lucene would do: Let's assume that we already have 2 segments A and B that have norms. We are now writing segment C and the first `n` documents have been added with norms enabled while the last `maxDoc-n` documents have been added with norms disabled because of a mapping update.\n\nOn the next refresh, segment C will be written, and no document of segment C will have norms (even though the first documents were added with norms -- disabling norms is a destructuive operation). If you run a query on this index, norms will be taken into account on A and B, and norms will be assumed to be all equal to 1 on C since it doesn't have norms.\n\nThen, as background merges happen, A and B are going to be merged with segments that don't have norms and the resulting segment won't have norms either (even for documents that come from A or B).\n\nThis is it for the default behavior. Alternatively, if we want to, something we could do as well would be to wrap the IndexReader to make all segments pretend that they don't have norms as soon as norms get disabled via a mapping update.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32899332","html_url":"https://github.com/elastic/elasticsearch/issues/4813#issuecomment-32899332","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4813","id":32899332,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk5MzMy","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2014-01-21T16:06:23Z","updated_at":"2014-01-21T16:06:23Z","author_association":"CONTRIBUTOR","body":"> Then, as background merges happen, A and B are going to be merged with segments that don't have norms and the resulting segment won't have norms either (even for documents that come from A or B).\n\nWould that make the results from segment C score more highly then segment A and B until the merge unless you did something like wrap the IndexReader?  If you aren't using index time boosts a value of 1 represents a single term, right?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32903444","html_url":"https://github.com/elastic/elasticsearch/issues/4813#issuecomment-32903444","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4813","id":32903444,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAzNDQ0","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-01-21T16:44:07Z","updated_at":"2014-01-21T16:44:07Z","author_association":"CONTRIBUTOR","body":"Yes, very likely, segment C would score higher.\n\nI have to admit I hadn't thought too much about scoring, I mostly thought about users who would realize they were using a particular field solely for matching (without scoring), sorting or aggregations and would like to stop paying the price for norms. So maybe it makes sense to do some wrapping to avoid surprises with scores.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32903863","html_url":"https://github.com/elastic/elasticsearch/issues/4813#issuecomment-32903863","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4813","id":32903863,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAzODYz","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2014-01-21T16:48:30Z","updated_at":"2014-01-21T16:48:30Z","author_association":"CONTRIBUTOR","body":"You could get away with just documenting it very well I suppose.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32904000","html_url":"https://github.com/elastic/elasticsearch/issues/4813#issuecomment-32904000","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4813","id":32904000,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTA0MDAw","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-01-21T16:49:45Z","updated_at":"2014-01-21T16:49:45Z","author_association":"CONTRIBUTOR","body":"Right. I need to think more about the consequences of each option... :-)\n","performed_via_github_app":null}]