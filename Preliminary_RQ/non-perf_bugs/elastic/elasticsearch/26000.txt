{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26000","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26000/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26000/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26000/events","html_url":"https://github.com/elastic/elasticsearch/issues/26000","id":247105660,"node_id":"MDU6SXNzdWUyNDcxMDU2NjA=","number":26000,"title":"Skip hidden files like .DS_Store in plugins directory","user":{"login":"jochenkressin","id":11629865,"node_id":"MDQ6VXNlcjExNjI5ODY1","avatar_url":"https://avatars3.githubusercontent.com/u/11629865?v=4","gravatar_id":"","url":"https://api.github.com/users/jochenkressin","html_url":"https://github.com/jochenkressin","followers_url":"https://api.github.com/users/jochenkressin/followers","following_url":"https://api.github.com/users/jochenkressin/following{/other_user}","gists_url":"https://api.github.com/users/jochenkressin/gists{/gist_id}","starred_url":"https://api.github.com/users/jochenkressin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jochenkressin/subscriptions","organizations_url":"https://api.github.com/users/jochenkressin/orgs","repos_url":"https://api.github.com/users/jochenkressin/repos","events_url":"https://api.github.com/users/jochenkressin/events{/privacy}","received_events_url":"https://api.github.com/users/jochenkressin/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-08-01T15:19:10Z","updated_at":"2017-08-01T15:44:53Z","closed_at":"2017-08-01T15:44:53Z","author_association":"NONE","active_lock_reason":null,"body":"This seems to be a re-occurrence of #12433.\r\n\r\nElasticsearch version: 5.5.0 and 5.5.1\r\nOperating System: Mac OS X 10.11.5\r\n\r\nIf there is any hidden file in the elasticsearch/plugins directory, like .DS_Store on Mac OS X, Elasticsearch interprets this file as a plugin directory and fails to start:\r\n\r\n```\r\n[2017-08-01T17:04:08,486][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [] uncaught exception in thread [main]\r\norg.elasticsearch.bootstrap.StartupException: org.elasticsearch.bootstrap.BootstrapException: java.nio.file.FileSystemException: /xx/xx/elasticsearch-5.5.0/plugins/.DS_Store/plugin-descriptor.properties: Not a directory\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:127) ~[elasticsearch-5.5.0.jar:5.5.0]\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:114) ~[elasticsearch-5.5.0.jar:5.5.0]\r\n\tat org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:67) ~[elasticsearch-5.5.0.jar:5.5.0]\r\n\tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:122) ~[elasticsearch-5.5.0.jar:5.5.0]\r\n\tat org.elasticsearch.cli.Command.main(Command.java:88) ~[elasticsearch-5.5.0.jar:5.5.0]\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:91) ~[elasticsearch-5.5.0.jar:5.5.0]\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:84) ~[elasticsearch-5.5.0.jar:5.5.0]\r\nCaused by: org.elasticsearch.bootstrap.BootstrapException: java.nio.file.FileSystemException: /xx/xx/elasticsearch-5.5.0/plugins/.DS_Store/plugin-descriptor.properties: Not a directory\r\n\tat org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:169) ~[elasticsearch-5.5.0.jar:5.5.0]\r\n\tat org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:351) ~[elasticsearch-5.5.0.jar:5.5.0]\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:123) ~[elasticsearch-5.5.0.jar:5.5.0]\r\n\t... 6 more\r\nCaused by: java.nio.file.FileSystemException: /xx/xx/elasticsearch-5.5.0/plugins/.DS_Store/plugin-descriptor.properties: Not a directory\r\n\tat sun.nio.fs.UnixException.translateToIOException(UnixException.java:91) ~[?:1.8.0_31]\r\n\tat sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102) ~[?:1.8.0_31]\r\n\tat sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107) ~[?:1.8.0_31]\r\n\tat sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214) ~[?:1.8.0_31]\r\n\tat java.nio.file.Files.newByteChannel(Files.java:361) ~[?:1.8.0_31]\r\n\tat java.nio.file.Files.newByteChannel(Files.java:407) ~[?:1.8.0_31]\r\n\tat java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:384) ~[?:1.8.0_31]\r\n\tat java.nio.file.Files.newInputStream(Files.java:152) ~[?:1.8.0_31]\r\n\tat org.elasticsearch.plugins.PluginInfo.readFromProperties(PluginInfo.java:114) ~[elasticsearch-5.5.0.jar:5.5.0]\r\n\tat org.elasticsearch.bootstrap.Spawner.spawnNativePluginControllers(Spawner.java:80) ~[elasticsearch-5.5.0.jar:5.5.0]\r\n\tat org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:167) ~[elasticsearch-5.5.0.jar:5.5.0]\r\n\tat org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:351) ~[elasticsearch-5.5.0.jar:5.5.0]\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:123) ~[elasticsearch-5.5.0.jar:5.5.0]\r\n\t... 6 more\r\n```\r\n\r\nThe same happens if you try to install a plugin and a hidden file is in the elasticsearch/plugins directory:\r\n\r\n```\r\nException in thread \"main\" java.lang.IllegalStateException: Could not load plugin descriptor for existing plugin [.DS_Store]. Was the plugin built before 2.0?\r\n\tat org.elasticsearch.plugins.PluginsService.getPluginBundles(PluginsService.java:334)\r\n\tat org.elasticsearch.plugins.InstallPluginCommand.jarHellCheck(InstallPluginCommand.java:518)\r\n\tat org.elasticsearch.plugins.InstallPluginCommand.verify(InstallPluginCommand.java:500)\r\n\tat org.elasticsearch.plugins.InstallPluginCommand.install(InstallPluginCommand.java:543)\r\n\tat org.elasticsearch.plugins.InstallPluginCommand.execute(InstallPluginCommand.java:217)\r\n\tat org.elasticsearch.plugins.InstallPluginCommand.execute(InstallPluginCommand.java:201)\r\n\tat org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:67)\r\n\tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:122)\r\n\tat org.elasticsearch.cli.MultiCommand.execute(MultiCommand.java:69)\r\n\tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:122)\r\n\tat org.elasticsearch.cli.Command.main(Command.java:88)\r\n\tat org.elasticsearch.plugins.PluginCli.main(PluginCli.java:47)\r\nCaused by: java.nio.file.FileSystemException: /xx/xx/elasticsearch-5.5.0/plugins/.DS_Store/plugin-descriptor.properties: Not a directory\r\n\tat sun.nio.fs.UnixException.translateToIOException(UnixException.java:91)\r\n\tat sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)\r\n\tat sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)\r\n\tat sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)\r\n\tat java.nio.file.Files.newByteChannel(Files.java:361)\r\n\tat java.nio.file.Files.newByteChannel(Files.java:407)\r\n\tat java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:384)\r\n\tat java.nio.file.Files.newInputStream(Files.java:152)\r\n\tat org.elasticsearch.plugins.PluginInfo.readFromProperties(PluginInfo.java:114)\r\n\tat org.elasticsearch.plugins.PluginsService.getPluginBundles(PluginsService.java:331)\r\n\t... 11 more\r\n```","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}