{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23781","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23781/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23781/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23781/events","html_url":"https://github.com/elastic/elasticsearch/issues/23781","id":217734960,"node_id":"MDU6SXNzdWUyMTc3MzQ5NjA=","number":23781,"title":"Remapping Property Types","user":{"login":"jitran","id":2791524,"node_id":"MDQ6VXNlcjI3OTE1MjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2791524?v=4","gravatar_id":"","url":"https://api.github.com/users/jitran","html_url":"https://github.com/jitran","followers_url":"https://api.github.com/users/jitran/followers","following_url":"https://api.github.com/users/jitran/following{/other_user}","gists_url":"https://api.github.com/users/jitran/gists{/gist_id}","starred_url":"https://api.github.com/users/jitran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jitran/subscriptions","organizations_url":"https://api.github.com/users/jitran/orgs","repos_url":"https://api.github.com/users/jitran/repos","events_url":"https://api.github.com/users/jitran/events{/privacy}","received_events_url":"https://api.github.com/users/jitran/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-03-29T00:56:45Z","updated_at":"2017-03-29T01:01:01Z","closed_at":"2017-03-29T01:01:01Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: 5.1\r\n\r\n**Plugins installed**: none\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nWe're shipping logs to AWS Elasticsearch 5.1 using Fluentd. By default, most of our log properties are dynamically mapped to the string type. The Fluentd log collector does not let us define the mapping. It seems once the mapping has been created, it's not possible to change the type to an integer.\r\n\r\nHere's our mapping:\r\n```\r\n{\r\n  \"logstash-2017.03.28\": {\r\n    \"aliases\": {},\r\n    \"mappings\": {\r\n      \"fluentd\": {\r\n        \"properties\": {\r\n          ...\r\n          \"code\": {\r\n            \"type\": \"text\",\r\n            \"fields\": {\r\n              \"keyword\": {\r\n                \"type\": \"keyword\",\r\n                \"ignore_above\": 256\r\n              }\r\n            }\r\n          },\r\n          ...\r\n        }\r\n      }\r\n    },\r\n    \"settings\": {\r\n    ..\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nTrying to use PUT to remap a property:\r\n```\r\nPUT logstash-2017.03.28/_mapping/fluentd\r\n{\r\n  \"properties\": {\r\n    \"code\": {\r\n      \"type\": \"integer\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nError:\r\n```\r\n{\r\n  \"error\": {\r\n    \"root_cause\": [\r\n      {\r\n        \"type\": \"remote_transport_exception\",\r\n        \"reason\": \"[CdG6KXq][x.x.x.x:9300][indices:admin/mapping/put]\"\r\n      }\r\n    ],\r\n    \"type\": \"illegal_argument_exception\",\r\n    \"reason\": \"mapper [code] of different type, current_type [text], merged_type [integer]\"\r\n  },\r\n  \"status\": 400\r\n}\r\n```\r\n\r\nWith the Elasticsearch 2.x series it was possible to remap the property types. Is there a way to do this with ES 5.X ? Is there a way to configure ES to always set a particular property to a specific type?\r\n\r\nThanks","closed_by":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"performed_via_github_app":null}