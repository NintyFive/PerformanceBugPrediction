[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/546282220","html_url":"https://github.com/elastic/elasticsearch/issues/48510#issuecomment-546282220","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48510","id":546282220,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjI4MjIyMA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-10-25T09:37:33Z","updated_at":"2019-10-25T09:37:33Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security (:Security/License)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/546282390","html_url":"https://github.com/elastic/elasticsearch/issues/48510#issuecomment-546282390","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48510","id":546282390,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjI4MjM5MA==","user":{"login":"bytebilly","id":52658645,"node_id":"MDQ6VXNlcjUyNjU4NjQ1","avatar_url":"https://avatars0.githubusercontent.com/u/52658645?v=4","gravatar_id":"","url":"https://api.github.com/users/bytebilly","html_url":"https://github.com/bytebilly","followers_url":"https://api.github.com/users/bytebilly/followers","following_url":"https://api.github.com/users/bytebilly/following{/other_user}","gists_url":"https://api.github.com/users/bytebilly/gists{/gist_id}","starred_url":"https://api.github.com/users/bytebilly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bytebilly/subscriptions","organizations_url":"https://api.github.com/users/bytebilly/orgs","repos_url":"https://api.github.com/users/bytebilly/repos","events_url":"https://api.github.com/users/bytebilly/events{/privacy}","received_events_url":"https://api.github.com/users/bytebilly/received_events","type":"User","site_admin":false},"created_at":"2019-10-25T09:38:02Z","updated_at":"2019-10-25T09:38:02Z","author_association":"NONE","body":"@tvernum could you please take a look and add relevant technical details if needed? Thanks!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/546419261","html_url":"https://github.com/elastic/elasticsearch/issues/48510#issuecomment-546419261","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48510","id":546419261,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjQxOTI2MQ==","user":{"login":"ph","id":640,"node_id":"MDQ6VXNlcjY0MA==","avatar_url":"https://avatars0.githubusercontent.com/u/640?v=4","gravatar_id":"","url":"https://api.github.com/users/ph","html_url":"https://github.com/ph","followers_url":"https://api.github.com/users/ph/followers","following_url":"https://api.github.com/users/ph/following{/other_user}","gists_url":"https://api.github.com/users/ph/gists{/gist_id}","starred_url":"https://api.github.com/users/ph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ph/subscriptions","organizations_url":"https://api.github.com/users/ph/orgs","repos_url":"https://api.github.com/users/ph/repos","events_url":"https://api.github.com/users/ph/events{/privacy}","received_events_url":"https://api.github.com/users/ph/received_events","type":"User","site_admin":false},"created_at":"2019-10-25T16:21:09Z","updated_at":"2019-10-25T16:21:09Z","author_association":"MEMBER","body":"@bytebilly  There a thing we need to make sure is Beats has a static list of supported license type and because of that if you add a new license type beats will report an error with an unknown type. So any older beats will not be able to send data to the cluster.\r\n\r\nTo get around that we should adjust the returned response either by:\r\n\r\n   - Check the User-agent version\r\n   - Add a new parameter query string to specify the version of the client.\r\n   - Or add a specific query string like `allow_enterprise` like @clintongormley proposed.\r\n\r\nChecking the client version is propably the cleanest way / less hacky?\r\n\r\n**Note:** I believe its the same behavior in logstash @jsvd can confirm this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/546423200","html_url":"https://github.com/elastic/elasticsearch/issues/48510#issuecomment-546423200","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48510","id":546423200,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjQyMzIwMA==","user":{"login":"bytebilly","id":52658645,"node_id":"MDQ6VXNlcjUyNjU4NjQ1","avatar_url":"https://avatars0.githubusercontent.com/u/52658645?v=4","gravatar_id":"","url":"https://api.github.com/users/bytebilly","html_url":"https://github.com/bytebilly","followers_url":"https://api.github.com/users/bytebilly/followers","following_url":"https://api.github.com/users/bytebilly/following{/other_user}","gists_url":"https://api.github.com/users/bytebilly/gists{/gist_id}","starred_url":"https://api.github.com/users/bytebilly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bytebilly/subscriptions","organizations_url":"https://api.github.com/users/bytebilly/orgs","repos_url":"https://api.github.com/users/bytebilly/repos","events_url":"https://api.github.com/users/bytebilly/events{/privacy}","received_events_url":"https://api.github.com/users/bytebilly/received_events","type":"User","site_admin":false},"created_at":"2019-10-25T16:32:12Z","updated_at":"2019-10-25T16:32:12Z","author_association":"NONE","body":"Thanks for the feedback @ph.\r\n\r\nWe are still discussing how to handle old versions and backward compatibility.\r\n\r\nOne additional option could be to start sending the new `enterprise` value from version 8.0 (it's unlikely to happen before anyway), and to require all agents (Beats and Logstash) to be at least version 7.7 or whatever is the earliest release we can ship the updated list (maybe 7.6?).\r\n\r\nWhat do you think about that?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/546445551","html_url":"https://github.com/elastic/elasticsearch/issues/48510#issuecomment-546445551","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48510","id":546445551,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjQ0NTU1MQ==","user":{"login":"ph","id":640,"node_id":"MDQ6VXNlcjY0MA==","avatar_url":"https://avatars0.githubusercontent.com/u/640?v=4","gravatar_id":"","url":"https://api.github.com/users/ph","html_url":"https://github.com/ph","followers_url":"https://api.github.com/users/ph/followers","following_url":"https://api.github.com/users/ph/following{/other_user}","gists_url":"https://api.github.com/users/ph/gists{/gist_id}","starred_url":"https://api.github.com/users/ph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ph/subscriptions","organizations_url":"https://api.github.com/users/ph/orgs","repos_url":"https://api.github.com/users/ph/repos","events_url":"https://api.github.com/users/ph/events{/privacy}","received_events_url":"https://api.github.com/users/ph/received_events","type":"User","site_admin":false},"created_at":"2019-10-25T17:39:54Z","updated_at":"2019-10-25T17:39:54Z","author_association":"MEMBER","body":"@bytebilly Adding support in 8.0, 7.7, 7.6 is just adding a new constant in beats.\r\n\r\n>  and to require all agents (Beats and Logstash) to be at least version 7.7 or whatever is the earliest release we can ship the updated list (maybe 7.6?).\r\n\r\nI don't really like this scenario and I believe we need to have a backward compatibility solution for that,  even if we recommend version to match in our stack users are still running older versions and taking their times to upgrade. I think its better if we can land the backward compatibility at the same time. \r\n\r\nAlso, considering that features in beats x-pack only require a basic license for the moment, so making a change that could potentially break users' installation seems a bit too much.\r\n\r\n@clintongormley @urso what do you think?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/546453651","html_url":"https://github.com/elastic/elasticsearch/issues/48510#issuecomment-546453651","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48510","id":546453651,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjQ1MzY1MQ==","user":{"login":"ph","id":640,"node_id":"MDQ6VXNlcjY0MA==","avatar_url":"https://avatars0.githubusercontent.com/u/640?v=4","gravatar_id":"","url":"https://api.github.com/users/ph","html_url":"https://github.com/ph","followers_url":"https://api.github.com/users/ph/followers","following_url":"https://api.github.com/users/ph/following{/other_user}","gists_url":"https://api.github.com/users/ph/gists{/gist_id}","starred_url":"https://api.github.com/users/ph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ph/subscriptions","organizations_url":"https://api.github.com/users/ph/orgs","repos_url":"https://api.github.com/users/ph/repos","events_url":"https://api.github.com/users/ph/events{/privacy}","received_events_url":"https://api.github.com/users/ph/received_events","type":"User","site_admin":false},"created_at":"2019-10-25T18:02:53Z","updated_at":"2019-10-25T18:02:53Z","author_association":"MEMBER","body":"@bytebilly we have the PR open on our side for only adding the type https://github.com/elastic/beats/pull/14249 We can merge it to 7.5 and up.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/547087226","html_url":"https://github.com/elastic/elasticsearch/issues/48510#issuecomment-547087226","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48510","id":547087226,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzA4NzIyNg==","user":{"login":"ph","id":640,"node_id":"MDQ6VXNlcjY0MA==","avatar_url":"https://avatars0.githubusercontent.com/u/640?v=4","gravatar_id":"","url":"https://api.github.com/users/ph","html_url":"https://github.com/ph","followers_url":"https://api.github.com/users/ph/followers","following_url":"https://api.github.com/users/ph/following{/other_user}","gists_url":"https://api.github.com/users/ph/gists{/gist_id}","starred_url":"https://api.github.com/users/ph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ph/subscriptions","organizations_url":"https://api.github.com/users/ph/orgs","repos_url":"https://api.github.com/users/ph/repos","events_url":"https://api.github.com/users/ph/events{/privacy}","received_events_url":"https://api.github.com/users/ph/received_events","type":"User","site_admin":false},"created_at":"2019-10-28T18:35:38Z","updated_at":"2019-10-28T18:35:38Z","author_association":"MEMBER","body":"We merge the new type in 7.5, https://github.com/elastic/beats/pull/14282 so we are ready on our side for any changes.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/554057170","html_url":"https://github.com/elastic/elasticsearch/issues/48510#issuecomment-554057170","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48510","id":554057170,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NDA1NzE3MA==","user":{"login":"bytebilly","id":52658645,"node_id":"MDQ6VXNlcjUyNjU4NjQ1","avatar_url":"https://avatars0.githubusercontent.com/u/52658645?v=4","gravatar_id":"","url":"https://api.github.com/users/bytebilly","html_url":"https://github.com/bytebilly","followers_url":"https://api.github.com/users/bytebilly/followers","following_url":"https://api.github.com/users/bytebilly/following{/other_user}","gists_url":"https://api.github.com/users/bytebilly/gists{/gist_id}","starred_url":"https://api.github.com/users/bytebilly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bytebilly/subscriptions","organizations_url":"https://api.github.com/users/bytebilly/orgs","repos_url":"https://api.github.com/users/bytebilly/repos","events_url":"https://api.github.com/users/bytebilly/events{/privacy}","received_events_url":"https://api.github.com/users/bytebilly/received_events","type":"User","site_admin":false},"created_at":"2019-11-14T20:07:04Z","updated_at":"2019-11-14T20:07:04Z","author_association":"NONE","body":"@tvernum I updated the first comment to reflect the new approach that we agreed on (having an independent Stack license).\r\n\r\nI also added a few open questions that still need to be defined.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/564977975","html_url":"https://github.com/elastic/elasticsearch/issues/48510#issuecomment-564977975","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48510","id":564977975,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDk3Nzk3NQ==","user":{"login":"bytebilly","id":52658645,"node_id":"MDQ6VXNlcjUyNjU4NjQ1","avatar_url":"https://avatars0.githubusercontent.com/u/52658645?v=4","gravatar_id":"","url":"https://api.github.com/users/bytebilly","html_url":"https://github.com/bytebilly","followers_url":"https://api.github.com/users/bytebilly/followers","following_url":"https://api.github.com/users/bytebilly/following{/other_user}","gists_url":"https://api.github.com/users/bytebilly/gists{/gist_id}","starred_url":"https://api.github.com/users/bytebilly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bytebilly/subscriptions","organizations_url":"https://api.github.com/users/bytebilly/orgs","repos_url":"https://api.github.com/users/bytebilly/repos","events_url":"https://api.github.com/users/bytebilly/events{/privacy}","received_events_url":"https://api.github.com/users/bytebilly/received_events","type":"User","site_admin":false},"created_at":"2019-12-12T11:59:52Z","updated_at":"2019-12-12T11:59:52Z","author_association":"NONE","body":"@tvernum I was finally able to get agreement around having the `max_resource_units` for _enterprise_ licenses.\r\n\r\nIn addition to what is already implemented by previous PR, I think we would need to change the following when dealing with an _enterprise_ license:\r\n\r\n- **Update license API**\r\n    - accept the `max_resource_units` field\r\n- **Get license API** (7.x)\r\n    - by default, return `max_nodes` with a bogus value, and don't return `max_resource_units`\r\n    - if `accept_enterprise=true`, return `max_resource_units`, and don't return `max_nodes`\r\n- **Get license API** (8.0)\r\n     - by default, return `max_resource_units`, and don't return `max_nodes`\r\n\r\nThis will provide a fully backward compatible license by default in 7.x, and the new license in 8.0 or in 7.x with the `accept_enterprise=true` set.\r\n\r\nWhat do you think?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/571592935","html_url":"https://github.com/elastic/elasticsearch/issues/48510#issuecomment-571592935","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48510","id":571592935,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTU5MjkzNQ==","user":{"login":"bytebilly","id":52658645,"node_id":"MDQ6VXNlcjUyNjU4NjQ1","avatar_url":"https://avatars0.githubusercontent.com/u/52658645?v=4","gravatar_id":"","url":"https://api.github.com/users/bytebilly","html_url":"https://github.com/bytebilly","followers_url":"https://api.github.com/users/bytebilly/followers","following_url":"https://api.github.com/users/bytebilly/following{/other_user}","gists_url":"https://api.github.com/users/bytebilly/gists{/gist_id}","starred_url":"https://api.github.com/users/bytebilly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bytebilly/subscriptions","organizations_url":"https://api.github.com/users/bytebilly/orgs","repos_url":"https://api.github.com/users/bytebilly/repos","events_url":"https://api.github.com/users/bytebilly/events{/privacy}","received_events_url":"https://api.github.com/users/bytebilly/received_events","type":"User","site_admin":false},"created_at":"2020-01-07T13:47:02Z","updated_at":"2020-01-07T13:47:02Z","author_association":"NONE","body":"@tvernum I noted that in Elasticsearch logs `platinum` is used even if the _enterprise_ license is loaded.\r\n\r\n```\r\n{ ..., \"message\": \"license [46f59c8c-7f27-436a-858e-6b0182ee9c12] mode [platinum] - valid\", ... }\r\n{ ..., \"message\": \"Active license is now [PLATINUM]; Security is enabled\", ... }\r\n```\r\n\r\nThis happens in both `7-6-0-SNAPSHOT` and `8-0-0-SNAPSHOT` releases.\r\nIs there an easy way to show the real license instead?\r\n\r\nOtherwise we could decouple in a separate issue and address it independently, with a different timeline. What do you think?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/571911056","html_url":"https://github.com/elastic/elasticsearch/issues/48510#issuecomment-571911056","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48510","id":571911056,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTkxMTA1Ng==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2020-01-08T06:33:32Z","updated_at":"2020-01-08T06:33:32Z","author_association":"CONTRIBUTOR","body":"> I noted that in Elasticsearch logs platinum is used even if the enterprise license is loaded.\r\n\r\nYes, that is because (from https://github.com/elastic/elasticsearch/pull/49223)\r\n\r\n> Internally an enterprise license is treated as having a \"platinum\" operating mode.\r\n\r\nElasticsearch supports a large number of \"types\", including historical license types that are no longer issued. Internally these are mapped to a set of operating modes that control the behaviour of the license.\r\nEnterprise licenses behave like platinum, hence this message.\r\n\r\nIt will be resolved at such a time as we split enterprise into a separate operating mode.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/574974948","html_url":"https://github.com/elastic/elasticsearch/issues/48510#issuecomment-574974948","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48510","id":574974948,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDk3NDk0OA==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2020-01-16T04:20:19Z","updated_at":"2020-01-16T04:20:19Z","author_association":"CONTRIBUTOR","body":"I raised https://github.com/elastic/elasticsearch/issues/51081 to update the OperationMode, so I believe this issue can now be closed.","performed_via_github_app":null}]