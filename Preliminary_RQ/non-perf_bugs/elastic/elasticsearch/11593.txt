{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/11593","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11593/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11593/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11593/events","html_url":"https://github.com/elastic/elasticsearch/issues/11593","id":87141465,"node_id":"MDU6SXNzdWU4NzE0MTQ2NQ==","number":11593,"title":"Unable To Enable Writes Due To ClusterBlockException","user":{"login":"rholloway","id":3996981,"node_id":"MDQ6VXNlcjM5OTY5ODE=","avatar_url":"https://avatars2.githubusercontent.com/u/3996981?v=4","gravatar_id":"","url":"https://api.github.com/users/rholloway","html_url":"https://github.com/rholloway","followers_url":"https://api.github.com/users/rholloway/followers","following_url":"https://api.github.com/users/rholloway/following{/other_user}","gists_url":"https://api.github.com/users/rholloway/gists{/gist_id}","starred_url":"https://api.github.com/users/rholloway/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rholloway/subscriptions","organizations_url":"https://api.github.com/users/rholloway/orgs","repos_url":"https://api.github.com/users/rholloway/repos","events_url":"https://api.github.com/users/rholloway/events{/privacy}","received_events_url":"https://api.github.com/users/rholloway/received_events","type":"User","site_admin":false},"labels":[{"id":836504707,"node_id":"MDU6TGFiZWw4MzY1MDQ3MDc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Distributed","name":":Distributed/Distributed","color":"0e8a16","default":false,"description":"A catch all label for anything in the Distributed Area. If you aren't sure, use this one."},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2015-06-10T23:22:08Z","updated_at":"2018-02-13T19:56:56Z","closed_at":"2016-01-18T20:20:52Z","author_association":"NONE","active_lock_reason":null,"body":"So while debugging a separate issue in the cluster, I issued the following command via API:\n\ncurl -XPUT 'localhost:9200/test-*/_settings' -d '\n{\n    \"index\" : {\n        \"blocks\": {\n            \"write\": true,\n            \"metadata\": true\n        }\n    }\n}'\n\nThe reasoning is unimportant and related to my stupidity in what exactly this would do, but my plan was to flip right back to false. However, this cannot be done.\n\n{\"error\":\"RemoteTransportException[[es-master2][inet[/<ip>:<port>]][indices:admin/settings/update]]; nested: ClusterBlockException[blocked by: [FORBIDDEN/9/index metadata (api)];]; \",\"status\":403}\n\nAfter learning a bit more of my actions, it sort of makes sense - after all I did forbid it. However, there seems to be no way to undo this change forcefully that I have discovered. If I try to set to false via localhost on master, same response. If I shutdown all master nodes, and add the following to elasticsearch.yml, no luck:\n\nindex.blocks.metadata: false\nindex.blocks.write: false\n\nI'm assuming because API + index specific settings override yml.\n\nHow can this be undone? If I could simply delete these indices, I would. But delete fails because of the same reason. I cannot ignore either, because simple things like localhost:9200/_cat/shards also fails (why, I'm not sure, maybe because index.blocks.metadata is set to true?). While these particular indexes are not so important, other more important ones are on the cluster...\n\nSo, how does one sudo or force their way out of this? There must be a way.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}