{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/48922","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48922/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48922/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48922/events","html_url":"https://github.com/elastic/elasticsearch/issues/48922","id":520528309,"node_id":"MDU6SXNzdWU1MjA1MjgzMDk=","number":48922,"title":"Turn elasticsearch date math into a spec/RFC","user":{"login":"mmkal","id":15040698,"node_id":"MDQ6VXNlcjE1MDQwNjk4","avatar_url":"https://avatars2.githubusercontent.com/u/15040698?v=4","gravatar_id":"","url":"https://api.github.com/users/mmkal","html_url":"https://github.com/mmkal","followers_url":"https://api.github.com/users/mmkal/followers","following_url":"https://api.github.com/users/mmkal/following{/other_user}","gists_url":"https://api.github.com/users/mmkal/gists{/gist_id}","starred_url":"https://api.github.com/users/mmkal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmkal/subscriptions","organizations_url":"https://api.github.com/users/mmkal/orgs","repos_url":"https://api.github.com/users/mmkal/repos","events_url":"https://api.github.com/users/mmkal/events{/privacy}","received_events_url":"https://api.github.com/users/mmkal/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"}],"state":"closed","locked":false,"assignee":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"assignees":[{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2019-11-09T23:33:06Z","updated_at":"2019-12-12T11:03:25Z","closed_at":"2019-11-14T13:17:39Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Feature request -->\r\n\r\nElasticsearch's [date math](https://www.elastic.co/guide/en/elasticsearch/reference/current/common-options.html#date-math) is a really nice way to express many types of queries - not just elasticsearch queries. Since the implementation is already open-source, why not make it an official spec/standard/RFC? I've been on a few teams that have made ad-hoc specs for something very similar, along with not-particularly-robust implementations.\r\n\r\nEven more often, APIs just don't support intuitive features like \"get all resources from the last ten minutes\", without the user having first manually figuring out what \"ten minutes ago\" was in UTC, and formatting it as an ISO string. (In my case, I usually spend five minutes on google/stack overflow and come up with something like `date -r $(( $(date +%s) - 600 )) -u +%FT%TZ`. Then I think \"I should really add this to my bash profile\". Then I start wondering about how to make it configurable so it's not always _ten_ minutes ago. Then I remember Elasticsearch's date math). And then, URLs with query params of what \"ten minutes ago\" meant when they were created become useless very fast.\r\n\r\nSo, my conclusion is: there should be some sort of official standard for date maths, so people can build tools around it. Someone could build a command-line tool and the bash query above could become `date-math now-10m`. Someone else could build a javascript library that parses date-math expressions and converts them to ISO.\r\n\r\nElasticsearch has the best one I'm aware of, so why not use it as a starting point? It could start with just taking [the date-math section of the range query documentation](https://www.elastic.co/guide/en/elasticsearch/reference/current/common-options.html#date-math) and turning it into a standalone RFC.\r\n\r\nThis may not be the best place to post this, let me know if you think I should take this suggestion somewhere else!","closed_by":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"performed_via_github_app":null}