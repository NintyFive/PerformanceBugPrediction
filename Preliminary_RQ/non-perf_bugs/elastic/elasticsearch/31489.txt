{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/31489","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31489/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31489/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31489/events","html_url":"https://github.com/elastic/elasticsearch/issues/31489","id":334298336,"node_id":"MDU6SXNzdWUzMzQyOTgzMzY=","number":31489,"title":"Add warning on unsupported settings to elasticsearch keystore command","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"labels":[{"id":144457604,"node_id":"MDU6TGFiZWwxNDQ0NTc2MDQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Settings","name":":Core/Infra/Settings","color":"0e8a16","default":false,"description":"Settings infrastructure and APIs"},{"id":912838879,"node_id":"MDU6TGFiZWw5MTI4Mzg4Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/Security","name":":Security/Security","color":"0e8a16","default":false,"description":"Security issues without another label"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-06-21T00:51:47Z","updated_at":"2019-08-29T22:54:56Z","closed_at":"2019-08-29T22:54:56Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Elasticsearch version** : 6.2.1\r\n\r\nIn the [documentation](https://www.elastic.co/guide/en/elasticsearch/reference/6.2/secure-settings.html#add-string-to-keystore) of elasticsearch-keystore, we noted the following:\r\n\r\n>Only some settings are designed to be read from the keystore. See documentation for each setting to see if it is supported as part of the keystore.\r\n\r\nThere is an existing [ticket](https://github.com/elastic/elasticsearch/issues/28020) on documenting these settings. \r\n\r\nThis one covers what happens if the end user ends up adding a setting Elasticsearch does not know of via elasticsearch-keystore.  The following is accepted by the command:\r\n\r\n```\r\n./elasticsearch-keystore add mysetting\r\n```\r\n\r\nwill result in Elasticsearch not starting up upon a restart, failing a bootstrap check.\r\n\r\n```\r\n[2018-06-20T17:40:32,952][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [node-1] uncaught exception in thread [main]\r\norg.elasticsearch.bootstrap.StartupException: java.lang.IllegalArgumentException: unknown secure setting [mysetting] please check that any required plugins are installed, or check the breaking changes documentation for removed settings\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:125) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:112) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n\tat org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n\tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) ~[elasticsearch-cli-6.2.1.jar:6.2.1]\r\n```\r\n\r\nHave we considered adding validation at the time of adding a string via elasticsearch-keystore?  Or simply throw a warning back on every invocation of `./elasticsearch-keystore add <setting_name>` to warn users that if they have added an unknown setting, Elasticsearch will fail bootstrap check and not start up?  \r\n\r\nAlso, it will be nice to add this check to the list of [bootstrap](https://www.elastic.co/guide/en/elasticsearch/reference/6.3/bootstrap-checks.html) checks in the documentation.  Thx!\r\n\r\n\r\n\r\n\r\n","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}