{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/37138","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37138/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37138/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37138/events","html_url":"https://github.com/elastic/elasticsearch/issues/37138","id":395898256,"node_id":"MDU6SXNzdWUzOTU4OTgyNTY=","number":37138,"title":"Cannot uninstall Debian package on non-systemd machine","user":{"login":"wolf99","id":281700,"node_id":"MDQ6VXNlcjI4MTcwMA==","avatar_url":"https://avatars2.githubusercontent.com/u/281700?v=4","gravatar_id":"","url":"https://api.github.com/users/wolf99","html_url":"https://github.com/wolf99","followers_url":"https://api.github.com/users/wolf99/followers","following_url":"https://api.github.com/users/wolf99/following{/other_user}","gists_url":"https://api.github.com/users/wolf99/gists{/gist_id}","starred_url":"https://api.github.com/users/wolf99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wolf99/subscriptions","organizations_url":"https://api.github.com/users/wolf99/orgs","repos_url":"https://api.github.com/users/wolf99/repos","events_url":"https://api.github.com/users/wolf99/events{/privacy}","received_events_url":"https://api.github.com/users/wolf99/received_events","type":"User","site_admin":false},"labels":[{"id":114977275,"node_id":"MDU6TGFiZWwxMTQ5NzcyNzU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Packaging","name":":Delivery/Packaging","color":"0e8a16","default":false,"description":"RPM and deb packaging, tar and zip archives, shell and batch scripts"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"assignees":[{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2019-01-04T11:44:14Z","updated_at":"2020-11-11T21:56:07Z","closed_at":"2019-01-15T08:10:31Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version**:\r\n```shell\r\n$ curl -XGET 'localhost:9200'\r\n{\r\n  \"name\" : \"0uaFEGY\",\r\n  \"cluster_name\" : \"elasticsearch\",\r\n  \"cluster_uuid\" : \"IUnb_AZJSIyM1IaxC2cMJQ\",\r\n  \"version\" : {\r\n    \"number\" : \"6.5.4\",\r\n    \"build_flavor\" : \"default\",\r\n    \"build_type\" : \"deb\",\r\n    \"build_hash\" : \"d2ef93d\",\r\n    \"build_date\" : \"2018-12-17T21:17:40.758843Z\",\r\n    \"build_snapshot\" : false,\r\n    \"lucene_version\" : \"7.5.0\",\r\n    \"minimum_wire_compatibility_version\" : \"5.6.0\",\r\n    \"minimum_index_compatibility_version\" : \"5.0.0\"\r\n  },\r\n  \"tagline\" : \"You Know, for Search\"\r\n}\r\n```\r\n\r\n**Plugins installed**: none\r\n\r\n**JVM version**:\r\n```shell\r\njava version \"1.8.0_181\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_181-b13)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.181-b13, mixed mode)\r\n```\r\n**OS version**: Ubuntu 18.04 [WSL]\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\n**Steps to reproduce**:\r\n\r\n1. Install elasticsearch from the APT repository, per https://www.elastic.co/guide/en/elasticsearch/reference/current/deb.html\r\n\r\n2. Configure running with SysV init as per doc linked in step 1.\r\n\r\n3. Ensure elasticsearch is running:\r\n```shell\r\n$ sudo -i service elasticsearch status\r\n * elasticsearch is running\r\n```\r\n\r\n4. Attempt `$sudo apt purge --autoremove elasticsearch`\r\n\r\n**Expected behaviour**\r\nAPT successfully uninstalls elasticsearch\r\n\r\n**Actual behaviour**\r\n```shell\r\n$ sudo apt purge --autoremove elasticsearch\r\nReading package lists... Done\r\nBuilding dependency tree\r\nReading state information... Done\r\nThe following packages will be REMOVED:\r\n  elasticsearch*\r\n0 upgraded, 0 newly installed, 1 to remove and 0 not upgraded.\r\nAfter this operation, 168 MB disk space will be freed.\r\nDo you want to continue? [Y/n] y\r\n(Reading database ... 37566 files and directories currently installed.)\r\nRemoving elasticsearch (6.5.4) ...\r\nStopping elasticsearch service...System has not been booted with systemd as init system (PID 1). Can't operate.\r\ndpkg: error processing package elasticsearch (--remove):\r\n installed elasticsearch package pre-removal script subprocess returned error exit status 1\r\nSystem has not been booted with systemd as init system (PID 1). Can't operate.\r\n### NOT starting on installation, please execute the following statements to configure elasticsearch service to start automatically using systemd\r\n sudo systemctl daemon-reload\r\n sudo systemctl enable elasticsearch.service\r\n### You can start elasticsearch service by executing\r\n sudo systemctl start elasticsearch.service\r\nErrors were encountered while processing:\r\nE: Sub-process /usr/bin/dpkg returned an error code (1)\r\n```\r\nI have attempted the commands suggested by the output, but as the system does not use systemd, these do not have the desired effect.\r\n\r\n```shell\r\n$ sudo systemctl daemon-reload\r\n[sudo] password for you:\r\nSystem has not been booted with systemd as init system (PID 1). Can't operate.\r\n$ sudo systemctl enable elasticsearch.service\r\nSynchronizing state of elasticsearch.service with SysV service script with /lib/systemd/systemd-sysv-install.\r\nExecuting: /lib/systemd/systemd-sysv-install enable elasticsearch\r\nCreated symlink /etc/systemd/system/multi-user.target.wants/elasticsearch.service â†’ /usr/lib/systemd/system/elasticsearch.service.\r\n$ sudo systemctl start elasticsearch\r\nSystem has not been booted with systemd as init system (PID 1). Can't operate.\r\n$ sudo apt purge --autoremove elasticsearch\r\nReading package lists... Done\r\nBuilding dependency tree\r\nReading state information... Done\r\nThe following packages will be REMOVED:\r\n  elasticsearch*\r\n0 upgraded, 0 newly installed, 1 to remove and 0 not upgraded.\r\nAfter this operation, 168 MB disk space will be freed.\r\nDo you want to continue? [Y/n] y\r\n(Reading database ... 37566 files and directories currently installed.)\r\nRemoving elasticsearch (6.5.4) ...\r\nStopping elasticsearch service...System has not been booted with systemd as init system (PID 1). Can't operate.\r\ndpkg: error processing package elasticsearch (--remove):\r\n installed elasticsearch package pre-removal script subprocess returned error exit status 1\r\nSystem has not been booted with systemd as init system (PID 1). Can't operate.\r\n### NOT starting on installation, please execute the following statements to configure elasticsearch service to start automatically using systemd\r\n sudo systemctl daemon-reload\r\n sudo systemctl enable elasticsearch.service\r\n### You can start elasticsearch service by executing\r\n sudo systemctl start elasticsearch.service\r\nErrors were encountered while processing:\r\nE: Sub-process /usr/bin/dpkg returned an error code (1)\r\n```\r\n","closed_by":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"performed_via_github_app":null}