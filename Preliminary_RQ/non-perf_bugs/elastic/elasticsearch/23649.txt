{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23649","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23649/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23649/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23649/events","html_url":"https://github.com/elastic/elasticsearch/issues/23649","id":215332227,"node_id":"MDU6SXNzdWUyMTUzMzIyMjc=","number":23649,"title":"After ES upgrading from 2.3.2 to 5.1.2, ES can't startup","user":{"login":"kevin-tang-rs","id":17384382,"node_id":"MDQ6VXNlcjE3Mzg0Mzgy","avatar_url":"https://avatars1.githubusercontent.com/u/17384382?v=4","gravatar_id":"","url":"https://api.github.com/users/kevin-tang-rs","html_url":"https://github.com/kevin-tang-rs","followers_url":"https://api.github.com/users/kevin-tang-rs/followers","following_url":"https://api.github.com/users/kevin-tang-rs/following{/other_user}","gists_url":"https://api.github.com/users/kevin-tang-rs/gists{/gist_id}","starred_url":"https://api.github.com/users/kevin-tang-rs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevin-tang-rs/subscriptions","organizations_url":"https://api.github.com/users/kevin-tang-rs/orgs","repos_url":"https://api.github.com/users/kevin-tang-rs/repos","events_url":"https://api.github.com/users/kevin-tang-rs/events{/privacy}","received_events_url":"https://api.github.com/users/kevin-tang-rs/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-03-20T05:20:15Z","updated_at":"2017-03-20T05:36:41Z","closed_at":"2017-03-20T05:36:41Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\nGitHub is reserved for bug reports and feature requests. The best place\r\nto ask a general question is at the Elastic Discourse forums at\r\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\r\na feature request, please include one and only one of the below blocks\r\nin your new issue. Note that whether you're filing a bug report or a\r\nfeature request, ensure that your submission is for an\r\n[OS that we support](https://www.elastic.co/support/matrix#show_os).\r\nBug reports on an OS that we do not support or feature requests\r\nspecific to an OS that we do not support will be closed.\r\n-->\r\n\r\n<!--\r\nIf you are filing a bug report, please remove the below feature\r\nrequest block and provide responses for all of the below items.\r\n-->\r\n\r\n**Elasticsearch version**:from 2.3.2 upgrading to 5.1.2\r\n\r\n**Plugins installed**: [readonlyrest]\r\n\r\n**JVM version**:1.8\r\n\r\n**OS version**:ubuntu-14\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\ndo upgrading from ES2.3.2 to ES5.1.2, after the upgrading finished, ES can't startup\r\n**Steps to reproduce**:\r\ndo upgrading from ES2.3.2 to ES5.1.2, after the upgrading finished, ES can't startup\r\n\r\n\r\n**Provide logs (if relevant)**:\r\nsome logs:\r\n[2017-03-20 10:12:57,533][INFO ][node                     ] [7] closing ...\r\n[2017-03-20 10:12:57,591][INFO ][node                     ] [7] closed\r\n[2017-03-20T10:13:23,884][WARN ][o.e.c.l.LogConfigurator  ] ignoring unsupported logging configuration file [/etc/elasticsearch/logging.yml], logging is configured via [/etc/elasticsearch/log4j2.properties]\r\n[2017-03-20T10:13:24,438][INFO ][o.e.n.Node               ] [7] initializing ...\r\n[2017-03-20T10:13:24,621][INFO ][o.e.e.NodeEnvironment    ] [7] using [1] data paths, mounts [[/var (/dev/mapper/vg_var-lv_var)]], net usable_space [73.3gb], net total_space [98.3gb], spins? [possibly], types [ext4]\r\n[2017-03-20T10:13:24,622][INFO ][o.e.e.NodeEnvironment    ] [7] heap size [15.7gb], compressed ordinary object pointers [true]\r\n[2017-03-20T10:13:24,745][INFO ][o.e.n.Node               ] [7] node name [7], node ID [BJxEbzC_QlGT5qdQjvavhg]\r\n[2017-03-20T10:13:24,752][INFO ][o.e.n.Node               ] [7] version[5.1.2], pid[667], build[c8c4c16/2017-01-11T20:18:39.146Z], OS[Linux/3.19.0-73-generic/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/1.8.0_91/25.91-b14]\r\n[2017-03-20T10:13:26,548][INFO ][o.e.p.PluginsService     ] [7] loaded module [aggs-matrix-stats]\r\n[2017-03-20T10:13:26,549][INFO ][o.e.p.PluginsService     ] [7] loaded module [ingest-common]\r\n[2017-03-20T10:13:26,549][INFO ][o.e.p.PluginsService     ] [7] loaded module [lang-expression]\r\n[2017-03-20T10:13:26,549][INFO ][o.e.p.PluginsService     ] [7] loaded module [lang-groovy]\r\n[2017-03-20T10:13:26,549][INFO ][o.e.p.PluginsService     ] [7] loaded module [lang-mustache]\r\n[2017-03-20T10:13:26,549][INFO ][o.e.p.PluginsService     ] [7] loaded module [lang-painless]\r\n[2017-03-20T10:13:26,549][INFO ][o.e.p.PluginsService     ] [7] loaded module [percolator]\r\n[2017-03-20T10:13:26,549][INFO ][o.e.p.PluginsService     ] [7] loaded module [reindex]\r\n[2017-03-20T10:13:26,549][INFO ][o.e.p.PluginsService     ] [7] loaded module [transport-netty3]\r\n[2017-03-20T10:13:26,549][INFO ][o.e.p.PluginsService     ] [7] loaded module [transport-netty4]\r\n[2017-03-20T10:13:26,550][INFO ][o.e.p.PluginsService     ] [7] loaded plugin [readonlyrest]\r\n[2017-03-20T10:13:28,289][INFO ][o.e.p.r.ConfigurationHelper] SSL: Disabled\r\n[2017-03-20T10:13:28,290][INFO ][o.e.p.r.SSLTransportNetty4] [7] creating SSL transport\r\n[2017-03-20T10:13:28,998][INFO ][o.e.p.r.a.ACL            ] ADDING readonlyrest Rules Block :: { name: 'Full access with HTTP auth', policy: ALLOW}\r\n[2017-03-20T10:13:28,999][INFO ][o.e.p.r.ConfigurationHelper] SSL: Disabled\r\n[2017-03-20T10:13:28,999][INFO ][o.e.p.r.IndexLevelActionFilter] [7] Readonly REST plugin was loaded...\r\n[2017-03-20T10:13:28,999][INFO ][o.e.p.r.IndexLevelActionFilter] [7] Readonly REST plugin is enabled. Yay, ponies!\r\n[2017-03-20T10:13:29,210][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_access_log_0_20161107154338/I9jeHlb6R8OkkCCZ2bu53A] upgrading [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_access_log_0_20161107154338] to new naming convention\r\n[2017-03-20T10:13:29,212][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_access_log_0_20161107154338/I9jeHlb6R8OkkCCZ2bu53A] moved from [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_access_log_0_20161107154338] to [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/I9jeHlb6R8OkkCCZ2bu53A]\r\n[2017-03-20T10:13:29,221][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_serv_status_log_0_20170228205001/Ef-QijEBQWGHBUG2_MaUHw] upgrading [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_serv_status_log_0_20170228205001] to new naming convention\r\n[2017-03-20T10:13:29,222][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_serv_status_log_0_20170228205001/Ef-QijEBQWGHBUG2_MaUHw] moved from [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_serv_status_log_0_20170228205001] to [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/Ef-QijEBQWGHBUG2_MaUHw]\r\n[2017-03-20T10:13:29,255][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_serv_status_log_0_20170209011001/my2YWv4JSNeh9nF61t-xqA] upgrading [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_serv_status_log_0_20170209011001] to new naming convention\r\n[2017-03-20T10:13:29,257][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_serv_status_log_0_20170209011001/my2YWv4JSNeh9nF61t-xqA] moved from [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_serv_status_log_0_20170209011001] to [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/my2YWv4JSNeh9nF61t-xqA]\r\n[2017-03-20T10:13:29,264][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_serv_status_log_0_20170119071001/eNlLQyFDT9SJc6lNrI4XTA] upgrading [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_serv_status_log_0_20170119071001] to new naming convention\r\n[2017-03-20T10:13:29,265][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_serv_status_log_0_20170119071001/eNlLQyFDT9SJc6lNrI4XTA] moved from [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_serv_status_log_0_20170119071001] to [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/eNlLQyFDT9SJc6lNrI4XTA]\r\n[2017-03-20T10:13:29,279][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_serv_status_log_0_20170110180001/D5jyxr31RyyZY3-bvraZuw] upgrading [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_serv_status_log_0_20170110180001] to new naming convention\r\n[2017-03-20T10:13:29,280][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_serv_status_log_0_20170110180001/D5jyxr31RyyZY3-bvraZuw] moved from [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_serv_status_log_0_20170110180001] to [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/D5jyxr31RyyZY3-bvraZuw]\r\n[2017-03-20T10:13:29,292][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_serv_status_log_0_20170310083001/DFDGULRBSWCYGB2N_urffA] upgrading [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_serv_status_log_0_20170310083001] to new naming convention\r\n[2017-03-20T10:13:29,292][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_serv_status_log_0_20170310083001/DFDGULRBSWCYGB2N_urffA] moved from [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_serv_status_log_0_20170310083001] to [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/DFDGULRBSWCYGB2N_urffA]\r\n[2017-03-20T10:13:29,297][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_serv_status_log_0_20170128162001/lCb-8NDEQ_22iVUi4RKvaQ] upgrading [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_serv_status_log_0_20170128162001] to new naming convention\r\n[2017-03-20T10:13:29,299][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_serv_status_log_0_20170128162001/lCb-8NDEQ_22iVUi4RKvaQ] moved from [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_serv_status_log_0_20170128162001] to [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/lCb-8NDEQ_22iVUi4RKvaQ]\r\n[2017-03-20T10:13:29,312][INFO ][o.e.c.u.IndexFolderUpgrader] [.kibana/6c9UAlwvQaq9aV90Axl4mg] upgrading [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/.kibana] to new naming convention\r\n[2017-03-20T10:13:29,314][INFO ][o.e.c.u.IndexFolderUpgrader] [.kibana/6c9UAlwvQaq9aV90Axl4mg] moved from [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/.kibana] to [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/6c9UAlwvQaq9aV90Axl4mg]\r\n[2017-03-20T10:13:29,318][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_serv_status_log_0_20170217062001/ty9abSAHSpSNB8Iezn3lig] upgrading [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_serv_status_log_0_20170217062001] to new naming convention\r\n[2017-03-20T10:13:29,319][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_serv_status_log_0_20170217062001/ty9abSAHSpSNB8Iezn3lig] moved from [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_serv_status_log_0_20170217062001] to [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/ty9abSAHSpSNB8Iezn3lig]\r\n[2017-03-20T10:13:29,325][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_sdk_crash_log_0_20161107154339/T3b3d1XhTp-KknlUPJAKBA] upgrading [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_sdk_crash_log_0_20161107154339] to new naming convention\r\n[2017-03-20T10:13:29,325][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_sdk_crash_log_0_20161107154339/T3b3d1XhTp-KknlUPJAKBA] moved from [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_sdk_crash_log_0_20161107154339] to [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/T3b3d1XhTp-KknlUPJAKBA]\r\n[2017-03-20T10:13:29,327][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_db_0/2dav0_WJT-ShGAyUGTPw1Q] upgrading [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_db_0] to new naming convention\r\n[2017-03-20T10:13:29,328][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_db_0/2dav0_WJT-ShGAyUGTPw1Q] moved from [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_db_0] to [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/2dav0_WJT-ShGAyUGTPw1Q]\r\n[2017-03-20T10:13:29,330][INFO ][o.e.c.u.IndexFolderUpgrader] [.http_user_auth/0Ujk9JoyQgOBTK8erx1ptg] upgrading [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/.http_user_auth] to new naming convention\r\n[2017-03-20T10:13:29,331][INFO ][o.e.c.u.IndexFolderUpgrader] [.http_user_auth/0Ujk9JoyQgOBTK8erx1ptg] moved from [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/.http_user_auth] to [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/0Ujk9JoyQgOBTK8erx1ptg]\r\n[2017-03-20T10:13:29,335][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_access_log_0_20170203104001/vgbiJBXVSrSC4sPbl857zg] upgrading [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_access_log_0_20170203104001] to new naming convention\r\n[2017-03-20T10:13:29,336][INFO ][o.e.c.u.IndexFolderUpgrader] [asp_access_log_0_20170203104001/vgbiJBXVSrSC4sPbl857zg] moved from [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/asp_access_log_0_20170203104001] to [/var/asp_data/elasticsearch/b0d147c6-a4ba-11e6-8fa8-0050569a1a6e/nodes/0/indices/vgbiJBXVSrSC4sPbl857zg]\r\n[2017-03-20T10:13:29,733][INFO ][o.e.n.Node               ] [7] initialized\r\n[2017-03-20T10:13:29,733][INFO ][o.e.n.Node               ] [7] starting ...\r\n[2017-03-20T10:13:30,069][INFO ][o.e.t.TransportService   ] [7] publish_address {40.40.41.199:20152}, bound_addresses {40.40.41.199:20152}\r\n[2017-03-20T10:13:30,081][INFO ][o.e.b.BootstrapCheck     ] [7] bound or publishing to a non-loopback or non-link-local address, enforcing bootstrap checks\r\n[2017-03-20T10:13:30,370][WARN ][o.e.t.n.Netty4Transport  ] [7] exception caught on transport layer [[id: 0x98f0fb58, L:/40.40.41.199:20931 - R:/40.40.41.197:20152]], closing connection\r\njava.lang.IndexOutOfBoundsException: readerIndex(2424) + length(1) exceeds writerIndex(2424): UnpooledDuplicatedByteBuf(ridx: 2424, widx: 2424, cap: 524288, unwrapped: PooledHeapByteBuf(ridx: 6, widx: 2424, cap: 524288))\r\n\tat io.netty.buffer.AbstractByteBuf.checkReadableBytes0(AbstractByteBuf.java:1395) ~[?:?]\r\n\tat io.netty.buffer.AbstractByteBuf.readByte(AbstractByteBuf.java:687) ~[?:?]\r\n\tat org.elasticsearch.transport.netty4.ByteBufStreamInput.readByte(ByteBufStreamInput.java:135) ~[?:?]\r\n\tat org.elasticsearch.common.io.stream.FilterStreamInput.readByte(FilterStreamInput.java:40) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.common.io.stream.StreamInput.readString(StreamInput.java:349) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.common.io.stream.StreamInput.readList(StreamInput.java:859) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.common.io.stream.StreamInput.readMapOfLists(StreamInput.java:469) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ThreadContextStruct.<init>(ThreadContext.java:286) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ThreadContextStruct.<init>(ThreadContext.java:273) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext.readHeaders(ThreadContext.java:135) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.transport.TcpTransport.messageReceived(TcpTransport.java:1240) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.channelRead(Netty4MessageChannelHandler.java:74) ~[transport-netty4-5.1.2.jar:5.1.2]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:373) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:351) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:293) [netty-codec-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:280) [netty-codec-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:396) [netty-codec-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:248) [netty-codec-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:373) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:351) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:373) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:129) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:651) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:536) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:490) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:450) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:873) [netty-common-4.1.6.Final.jar:4.1.6.Final]\r\n\tat java.lang.Thread.run(Thread.java:745) [?:1.8.0_91]\r\n[2017-03-20T10:14:00,538][WARN ][o.e.d.z.UnicastZenPing   ] [7] [10] failed send ping to {#zen_unicast_30#}{wDwbtrH1Rh6Wwke17C3o1A}{40.40.41.197}{40.40.41.197:20152}\r\njava.lang.IllegalStateException: handshake failed with {#zen_unicast_30#}{wDwbtrH1Rh6Wwke17C3o1A}{40.40.41.197}{40.40.41.197:20152}\r\n\tat org.elasticsearch.transport.TransportService.handshake(TransportService.java:370) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.transport.TransportService.connectToNodeLightAndHandshake(TransportService.java:345) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.transport.TransportService.connectToNodeLightAndHandshake(TransportService.java:319) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.discovery.zen.UnicastZenPing$2.run(UnicastZenPing.java:473) [elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:458) [elasticsearch-5.1.2.jar:5.1.2]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_91]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_91]\r\n\tat java.lang.Thread.run(Thread.java:745) [?:1.8.0_91]\r\nCaused by: org.elasticsearch.transport.NodeDisconnectedException: [][40.40.41.197:20152][internal:transport/handshake] disconnected\r\n...\r\n......\r\n.........\r\n[2017-03-20T10:14:03,989][INFO ][o.e.p.r.a.ACL            ] request: { id: d868ece85dc645829bc5298b442ea366, type: IndicesStatsRequest, user: root, action: indices:monitor/stats, OA:40.40.41.199, indices:asp_*, M:GET, P:/asp_*/_stats/docs,store, C:<OMITTED, LENGTH=0>, Headers:[Accept-Encoding=identity, Host=40.40.41.199:20151, Connection=close, Authorization=Basic cm9vdDpPV0prWkRFeE9EWXdNbUU1TTJRMVptVmtNRGhqT1dVeE1XSmlZV0ZpWTJZPQ==, User-Agent=Python-urllib/2.7, content-length=0], History:Full access with HTTP auth=[auth_key=true] } matched block: Full access with HTTP auth match: true}\r\n[2017-03-20T10:14:03,996][WARN ][r.suppressed             ] path: /asp_*/_stats/docs,store, params: {metric=docs,store, index=asp_*}\r\norg.elasticsearch.cluster.block.ClusterBlockException: blocked by: [SERVICE_UNAVAILABLE/1/state not recovered / initialized];\r\n\tat org.elasticsearch.cluster.block.ClusterBlocks.globalBlockedException(ClusterBlocks.java:161) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.action.admin.indices.stats.TransportIndicesStatsAction.checkGlobalBlock(TransportIndicesStatsAction.java:70) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.action.admin.indices.stats.TransportIndicesStatsAction.checkGlobalBlock(TransportIndicesStatsAction.java:47) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$AsyncAction.<init>(TransportBroadcastByNodeAction.java:256) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction.doExecute(TransportBroadcastByNodeAction.java:234) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction.doExecute(TransportBroadcastByNodeAction.java:79) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:173) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.action.ingest.IngestActionFilter.apply(IngestActionFilter.java:82) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:171) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.action.support.ActionFilter$Simple.apply(ActionFilter.java:68) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:171) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:145) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:87) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.client.node.NodeClient.executeLocally(NodeClient.java:75) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.client.node.NodeClient.doExecute(NodeClient.java:64) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:403) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.client.support.AbstractClient$IndicesAdmin.execute(AbstractClient.java:1226) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.client.support.AbstractClient$IndicesAdmin.stats(AbstractClient.java:1547) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.rest.action.admin.indices.RestIndicesStatsAction.lambda$prepareRequest$17(RestIndicesStatsAction.java:148) ~[elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.rest.BaseRestHandler.handleRequest(BaseRestHandler.java:82) [elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.rest.RestController.executeHandler(RestController.java:243) [elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.rest.RestController$RestHandlerFilter.process(RestController.java:326) [elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.rest.RestController$ControllerFilterChain.continueProcessing(RestController.java:307) [elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.plugin.readonlyrest.wiring.ReadonlyRestRestAction$1.process(ReadonlyRestRestAction.java:49) [readonlyrest-1.13.0_es5.1.2.jar:1.13.0_es5.1.2]\r\n\tat org.elasticsearch.rest.RestController$ControllerFilterChain.continueProcessing(RestController.java:310) [elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:203) [elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.http.HttpServer.dispatchRequest(HttpServer.java:113) [elasticsearch-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.http.netty4.Netty4HttpServerTransport.dispatchRequest(Netty4HttpServerTransport.java:507) [transport-netty4-client-5.1.2.jar:5.1.2]\r\n\tat org.elasticsearch.http.netty4.Netty4HttpRequestHandler.channelRead0(Netty4HttpRequestHandler.java:69) [transport-netty4-client-5.1.2.jar:5.1.2]\r\n\tat io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:373) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:351) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat org.elasticsearch.http.netty4.pipelining.HttpPipeliningHandler.channelRead(HttpPipeliningHandler.java:66) [transport-netty4-client-5.1.2.jar:5.1.2]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:373) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:351) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102) [netty-codec-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.handler.codec.MessageToMessageCodec.channelRead(MessageToMessageCodec.java:111) [netty-codec-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:373) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:351) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102) [netty-codec-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:373) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:351) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102) [netty-codec-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:373) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:351) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:293) [netty-codec-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:267) [netty-codec-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:373) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:351) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:373) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:351) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:373) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:129) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:651) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:536) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:490) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:450) [netty-transport-4.1.6.Final.jar:4.1.6.Final]\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:873) [netty-common-4.1.6.Final.jar:4.1.6.Final]\r\n\tat java.lang.Thread.run(Thread.java:745) [?:1.8.0_91]\r\n[2017-03-20T10:14:04,144][INFO ][o.e.n.Node               ] [7] stopped\r\n[2017-03-20T10:14:04,144][INFO ][o.e.n.Node               ] [7] closing ...\r\n[2017-03-20T10:14:04,167][INFO ][o.e.n.Node               ] [7] closed\r\n","closed_by":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"performed_via_github_app":null}