{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8200","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8200/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8200/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8200/events","html_url":"https://github.com/elastic/elasticsearch/issues/8200","id":46554757,"node_id":"MDU6SXNzdWU0NjU1NDc1Nw==","number":8200,"title":"Date histogram aggregation Milliseconds problem using minutes in date_range","user":{"login":"deniseoboschetti","id":8430914,"node_id":"MDQ6VXNlcjg0MzA5MTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/8430914?v=4","gravatar_id":"","url":"https://api.github.com/users/deniseoboschetti","html_url":"https://github.com/deniseoboschetti","followers_url":"https://api.github.com/users/deniseoboschetti/followers","following_url":"https://api.github.com/users/deniseoboschetti/following{/other_user}","gists_url":"https://api.github.com/users/deniseoboschetti/gists{/gist_id}","starred_url":"https://api.github.com/users/deniseoboschetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deniseoboschetti/subscriptions","organizations_url":"https://api.github.com/users/deniseoboschetti/orgs","repos_url":"https://api.github.com/users/deniseoboschetti/repos","events_url":"https://api.github.com/users/deniseoboschetti/events{/privacy}","received_events_url":"https://api.github.com/users/deniseoboschetti/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"assignees":[{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2014-10-22T20:13:14Z","updated_at":"2015-11-21T20:06:18Z","closed_at":"2015-11-21T20:06:18Z","author_association":"NONE","active_lock_reason":null,"body":"When using minutes in the date range the returned keys are wrong (minutes and milliseconds).\n\nUsing the query according to:\nhttp://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-aggregations-bucket-daterange-aggregation.html\n\nI'm using ElasticSearch Version 1.3.2.\n\nExample query:\n\"date_range\":{\n\"field\":\"doc_published\",\"\nformat\":\"dateOptionalTime\",\n\"ranges\":[\n{\"from\":\"20140101T00:10:00\",\"to\":\"20140101T00:15:00\"},{\"from\":\"20140101T00:15:00\",\"to\":\"20140101T00:20:00\"}]\n}\n\nExample response:\n{\"key\":\"20140101-01-01T00:10:00.064Z-20140101-01-01T00:14:59.968Z\",\n\"from\":6.3549803335740006E17,\n\"from_as_string\":\"20140101-01-01T00:10:00.064Z\",\n\"to\":6.3549803335769997E17,\n\"to_as_string\":\"20140101-01-01T00:14:59.968Z\"},\n\n{\"key\":\"20140101-01-01T00:14:59.968Z-20140101-01-01T00:20:00.000Z\",\n\"from\":6.3549803335769997E17,\n\"from_as_string\":\"20140101-01-01T00:14:59.968Z\",\n\"to\":6.35498033358E17,\n\"to_as_string\":\"20140101-01-01T00:20:00.000Z\"}\n\nThe returning keys are invalid:\nRECEIVED: 20140101-01-01T00:10:00.064Z-20140101-01-01T00:14:59.968Z\nShould be: \n20140101-01-01T00:10:00.000Z-20140101-01-01T00:14:59.968Z \n\nRECEIVED: 20140101-01-01T00:14:59.968Z-20140101-01-01T00:20:00.000Z\nShould be: \n20140101-01-01T00:15:00.000Z-20140101-01-01T00:20:00.000Z  \n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}