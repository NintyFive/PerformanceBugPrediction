[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76542643","html_url":"https://github.com/elastic/elasticsearch/issues/9931#issuecomment-76542643","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9931","id":76542643,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTQyNjQz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-02-28T19:51:33Z","updated_at":"2015-02-28T19:51:33Z","author_association":"CONTRIBUTOR","body":"@javanna could you take a look at what can be done here please?  If it is not easily fixable, then we could change it to check for >= 23 and <= 23, but that feels suboptimal...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76591346","html_url":"https://github.com/elastic/elasticsearch/issues/9931#issuecomment-76591346","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9931","id":76591346,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTkxMzQ2","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-03-01T10:37:06Z","updated_at":"2015-03-01T10:37:06Z","author_association":"MEMBER","body":"I had a look and I see something different. The json response that I print out as a string before any parsing is the following:\n\n```\n{took=340, timed_out=false, _shards={total=2, successful=2, failed=0}, hits={total=1, max_score=1.0, hits=[{_index=test123, _type=test, _id=1, _score=1.0, fields={my_field=[23.0]}}]}}\n```\n\nAs far as I can see the expression lang is responsible for returning the integer field as a float. The java REST runner just uses the same parser that elasticsearch uses internally, which tries and detect the different numeric types and does see the difference between floats and integers.\n\nI am afraid we have two potentials problems then:\n- numbers are always float when using the expression language, maybe not a problem after all, we just need to be aware of this?\n- the perl runner is somehow interpreting `23.0` as `23` and makes it an integer?\n\nLong story short I don't see any problem with the java REST tests runner here... as far as I can see the original test that was checking for `23.0` was correct, cause that's what the expression script returns. Can you double check please @clintongormley ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76628474","html_url":"https://github.com/elastic/elasticsearch/issues/9931#issuecomment-76628474","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9931","id":76628474,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjI4NDc0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-03-01T20:25:38Z","updated_at":"2015-03-01T20:25:38Z","author_association":"CONTRIBUTOR","body":"@javanna you are right - this is a Perl issue.  It silently converts `23.0` in the JSON into an integer (which is why it logged the integer in the trace logs).  Apologies for the noise - I'll probably have to work around this with a range check.\n","performed_via_github_app":null}]