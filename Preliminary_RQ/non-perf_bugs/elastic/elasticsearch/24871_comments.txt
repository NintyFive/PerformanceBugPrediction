[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303833569","html_url":"https://github.com/elastic/elasticsearch/issues/24871#issuecomment-303833569","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24871","id":303833569,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzgzMzU2OQ==","user":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"created_at":"2017-05-24T19:55:05Z","updated_at":"2017-05-24T19:55:05Z","author_association":"CONTRIBUTOR","body":"@javanna WDYT?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303837920","html_url":"https://github.com/elastic/elasticsearch/issues/24871#issuecomment-303837920","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24871","id":303837920,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzgzNzkyMA==","user":{"login":"andrewvc","id":131427,"node_id":"MDQ6VXNlcjEzMTQyNw==","avatar_url":"https://avatars2.githubusercontent.com/u/131427?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewvc","html_url":"https://github.com/andrewvc","followers_url":"https://api.github.com/users/andrewvc/followers","following_url":"https://api.github.com/users/andrewvc/following{/other_user}","gists_url":"https://api.github.com/users/andrewvc/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewvc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewvc/subscriptions","organizations_url":"https://api.github.com/users/andrewvc/orgs","repos_url":"https://api.github.com/users/andrewvc/repos","events_url":"https://api.github.com/users/andrewvc/events{/privacy}","received_events_url":"https://api.github.com/users/andrewvc/received_events","type":"User","site_admin":false},"created_at":"2017-05-24T20:12:01Z","updated_at":"2017-05-24T20:12:01Z","author_association":"CONTRIBUTOR","body":"It would also be nice to discuss *which* nodes should be queried for this data. \r\n\r\nI would propose that clients:\r\n\r\n1. Be provided with a seed node list to connect to\r\n2. Hit the `/_nodes/http` endpoint on one of those nodes\r\n3. Perform subsequent sniffing requests against nodes on the sniffed list\r\n4. Be allowed to re-sniff the seed list if the sniffed nodes list fails\r\n\r\nThe idea here is that it would be advisable for users to seed their clients with stable nodes, which in many installations will be the master nodes. It is also advisable that clients try to keep load off the master nodes, hence making them a last resort.\r\n\r\nThere is a risk here, that in large installs, if the data nodes were to all disappear a thundering herd of `/_nodes/http` requests could overwhelm the master nodes, but I imagine that would only fill their request queues and would stabilize rather quickly.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303840471","html_url":"https://github.com/elastic/elasticsearch/issues/24871#issuecomment-303840471","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24871","id":303840471,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzg0MDQ3MQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-05-24T20:22:06Z","updated_at":"2017-05-24T20:22:06Z","author_association":"MEMBER","body":"This seems like a general discussion on what Elasticsearch REST clients should do compared to what they do now in terms of sniffing. We should hear what @elastic/es-clients think of this proposal.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303842211","html_url":"https://github.com/elastic/elasticsearch/issues/24871#issuecomment-303842211","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24871","id":303842211,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzg0MjIxMQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-05-24T20:28:54Z","updated_at":"2017-05-24T20:28:54Z","author_association":"MEMBER","body":"I thought that the official clients already allowed to plug in custom selectors so that users can choose which nodes get selected. The java low level REST client doesn't support this yet but there's #21888 for it. Probably the default behaviour when sniffing should be adjusted as I think all nodes are selected by the official clients while master only nodes should be skipped. Apart from that I am not sure what else should change provided that the notion of selector is exposed and pluggable in every client.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303843326","html_url":"https://github.com/elastic/elasticsearch/issues/24871#issuecomment-303843326","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24871","id":303843326,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzg0MzMyNg==","user":{"login":"andrewvc","id":131427,"node_id":"MDQ6VXNlcjEzMTQyNw==","avatar_url":"https://avatars2.githubusercontent.com/u/131427?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewvc","html_url":"https://github.com/andrewvc","followers_url":"https://api.github.com/users/andrewvc/followers","following_url":"https://api.github.com/users/andrewvc/following{/other_user}","gists_url":"https://api.github.com/users/andrewvc/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewvc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewvc/subscriptions","organizations_url":"https://api.github.com/users/andrewvc/orgs","repos_url":"https://api.github.com/users/andrewvc/repos","events_url":"https://api.github.com/users/andrewvc/events{/privacy}","received_events_url":"https://api.github.com/users/andrewvc/received_events","type":"User","site_admin":false},"created_at":"2017-05-24T20:33:21Z","updated_at":"2017-05-24T20:33:21Z","author_association":"CONTRIBUTOR","body":"@javanna I took a look at the python and ruby clients, I can't find any support for this. Maybe I'm missing something? I also don't believe beats supports this either. Maybe @HonzaKral @karmi and @andrewkroh can confirm?\r\n\r\nPerhaps other clients support this? At any rate, the forced omission of master-only nodes would be a great thing to standardize.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303845035","html_url":"https://github.com/elastic/elasticsearch/issues/24871#issuecomment-303845035","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24871","id":303845035,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzg0NTAzNQ==","user":{"login":"andrewkroh","id":4565752,"node_id":"MDQ6VXNlcjQ1NjU3NTI=","avatar_url":"https://avatars2.githubusercontent.com/u/4565752?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewkroh","html_url":"https://github.com/andrewkroh","followers_url":"https://api.github.com/users/andrewkroh/followers","following_url":"https://api.github.com/users/andrewkroh/following{/other_user}","gists_url":"https://api.github.com/users/andrewkroh/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewkroh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewkroh/subscriptions","organizations_url":"https://api.github.com/users/andrewkroh/orgs","repos_url":"https://api.github.com/users/andrewkroh/repos","events_url":"https://api.github.com/users/andrewkroh/events{/privacy}","received_events_url":"https://api.github.com/users/andrewkroh/received_events","type":"User","site_admin":false},"created_at":"2017-05-24T20:40:13Z","updated_at":"2017-05-24T20:40:13Z","author_association":"MEMBER","body":"> I also don't believe beats supports this either.\r\n\r\nCorrect, Beats does not currently have sniffing support. @7AC is working on [go-elasticsearch](https://github.com/elastic/go-elasticsearch) which Beats will eventually use. Having support for this in the client library would be nice.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303848053","html_url":"https://github.com/elastic/elasticsearch/issues/24871#issuecomment-303848053","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24871","id":303848053,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzg0ODA1Mw==","user":{"login":"GlenRSmith","id":1327920,"node_id":"MDQ6VXNlcjEzMjc5MjA=","avatar_url":"https://avatars3.githubusercontent.com/u/1327920?v=4","gravatar_id":"","url":"https://api.github.com/users/GlenRSmith","html_url":"https://github.com/GlenRSmith","followers_url":"https://api.github.com/users/GlenRSmith/followers","following_url":"https://api.github.com/users/GlenRSmith/following{/other_user}","gists_url":"https://api.github.com/users/GlenRSmith/gists{/gist_id}","starred_url":"https://api.github.com/users/GlenRSmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GlenRSmith/subscriptions","organizations_url":"https://api.github.com/users/GlenRSmith/orgs","repos_url":"https://api.github.com/users/GlenRSmith/repos","events_url":"https://api.github.com/users/GlenRSmith/events{/privacy}","received_events_url":"https://api.github.com/users/GlenRSmith/received_events","type":"User","site_admin":false},"created_at":"2017-05-24T20:51:29Z","updated_at":"2017-05-24T20:51:29Z","author_association":"CONTRIBUTOR","body":"https://github.com/elastic/elasticsearch-py/commit/8966902e40b9bb910352b8324ba4ff42ba5a7322","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303848780","html_url":"https://github.com/elastic/elasticsearch/issues/24871#issuecomment-303848780","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24871","id":303848780,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzg0ODc4MA==","user":{"login":"andrewvc","id":131427,"node_id":"MDQ6VXNlcjEzMTQyNw==","avatar_url":"https://avatars2.githubusercontent.com/u/131427?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewvc","html_url":"https://github.com/andrewvc","followers_url":"https://api.github.com/users/andrewvc/followers","following_url":"https://api.github.com/users/andrewvc/following{/other_user}","gists_url":"https://api.github.com/users/andrewvc/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewvc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewvc/subscriptions","organizations_url":"https://api.github.com/users/andrewvc/orgs","repos_url":"https://api.github.com/users/andrewvc/repos","events_url":"https://api.github.com/users/andrewvc/events{/privacy}","received_events_url":"https://api.github.com/users/andrewvc/received_events","type":"User","site_admin":false},"created_at":"2017-05-24T20:54:26Z","updated_at":"2017-05-24T20:54:26Z","author_association":"CONTRIBUTOR","body":"Thanks @GlenRSmith , it looks like the python client rejects master nodes. That's great! It would still be great if we could standardize on node settings filtering as well.\r\n\r\nI mean, maybe this has been tackled before, but ideally clients would all have identical sniffing algorithms, which is what I'm trying to get at here.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303861270","html_url":"https://github.com/elastic/elasticsearch/issues/24871#issuecomment-303861270","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24871","id":303861270,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzg2MTI3MA==","user":{"login":"GlenRSmith","id":1327920,"node_id":"MDQ6VXNlcjEzMjc5MjA=","avatar_url":"https://avatars3.githubusercontent.com/u/1327920?v=4","gravatar_id":"","url":"https://api.github.com/users/GlenRSmith","html_url":"https://github.com/GlenRSmith","followers_url":"https://api.github.com/users/GlenRSmith/followers","following_url":"https://api.github.com/users/GlenRSmith/following{/other_user}","gists_url":"https://api.github.com/users/GlenRSmith/gists{/gist_id}","starred_url":"https://api.github.com/users/GlenRSmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GlenRSmith/subscriptions","organizations_url":"https://api.github.com/users/GlenRSmith/orgs","repos_url":"https://api.github.com/users/GlenRSmith/repos","events_url":"https://api.github.com/users/GlenRSmith/events{/privacy}","received_events_url":"https://api.github.com/users/GlenRSmith/received_events","type":"User","site_admin":false},"created_at":"2017-05-24T21:48:04Z","updated_at":"2017-05-24T21:48:04Z","author_association":"CONTRIBUTOR","body":"@andrewvc of course, and that's very much the broad intent - uniformity and parity among the low-level clients. Striving for that on this particular item isn't objectionable.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303940148","html_url":"https://github.com/elastic/elasticsearch/issues/24871#issuecomment-303940148","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24871","id":303940148,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzk0MDE0OA==","user":{"login":"HonzaKral","id":32132,"node_id":"MDQ6VXNlcjMyMTMy","avatar_url":"https://avatars0.githubusercontent.com/u/32132?v=4","gravatar_id":"","url":"https://api.github.com/users/HonzaKral","html_url":"https://github.com/HonzaKral","followers_url":"https://api.github.com/users/HonzaKral/followers","following_url":"https://api.github.com/users/HonzaKral/following{/other_user}","gists_url":"https://api.github.com/users/HonzaKral/gists{/gist_id}","starred_url":"https://api.github.com/users/HonzaKral/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HonzaKral/subscriptions","organizations_url":"https://api.github.com/users/HonzaKral/orgs","repos_url":"https://api.github.com/users/HonzaKral/repos","events_url":"https://api.github.com/users/HonzaKral/events{/privacy}","received_events_url":"https://api.github.com/users/HonzaKral/received_events","type":"User","site_admin":false},"created_at":"2017-05-25T07:07:35Z","updated_at":"2017-05-25T07:07:35Z","author_association":"MEMBER","body":"Currently there is the default behavior (filtering out master-only nodes) and the ability to override the callback used to filter out the nodes. In python all you have to do is supply your own implementation of the `get_host_info` (0) function and introduce any logic they wish to have which is documented (1).\r\n\r\nSince this is an advanced functionality I think that is sufficient. So far I haven't had a single request for anything more structured/systematic. This approach is common to all the clients.\r\n\r\n0 - https://github.com/elastic/elasticsearch-py/blob/master/elasticsearch/transport.py#L11-L28\r\n1 - https://github.com/elastic/elasticsearch-py/blob/master/elasticsearch/transport.py#L48-L50","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303944132","html_url":"https://github.com/elastic/elasticsearch/issues/24871#issuecomment-303944132","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24871","id":303944132,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzk0NDEzMg==","user":{"login":"russcam","id":208231,"node_id":"MDQ6VXNlcjIwODIzMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/208231?v=4","gravatar_id":"","url":"https://api.github.com/users/russcam","html_url":"https://github.com/russcam","followers_url":"https://api.github.com/users/russcam/followers","following_url":"https://api.github.com/users/russcam/following{/other_user}","gists_url":"https://api.github.com/users/russcam/gists{/gist_id}","starred_url":"https://api.github.com/users/russcam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/russcam/subscriptions","organizations_url":"https://api.github.com/users/russcam/orgs","repos_url":"https://api.github.com/users/russcam/repos","events_url":"https://api.github.com/users/russcam/events{/privacy}","received_events_url":"https://api.github.com/users/russcam/received_events","type":"User","site_admin":false},"created_at":"2017-05-25T07:31:41Z","updated_at":"2017-05-25T07:31:41Z","author_association":"CONTRIBUTOR","body":"[There's documentation for the sniffing behaviour of the .NET clients](https://www.elastic.co/guide/en/elasticsearch/client/net-api/current/sniffing-behaviour.html), which includes the ability to [specify a predicate](https://www.elastic.co/guide/en/elasticsearch/client/net-api/current/sniffing-role-detection.html#_node_predicates) to determine which nodes in the cluster API calls should be executed on.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303990974","html_url":"https://github.com/elastic/elasticsearch/issues/24871#issuecomment-303990974","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24871","id":303990974,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzk5MDk3NA==","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2017-05-25T11:46:25Z","updated_at":"2017-05-25T11:46:35Z","author_association":"CONTRIBUTOR","body":"The Ruby client doesn't do any filtering right now, there's an old open issue: https://github.com/elastic/elasticsearch-ruby/issues/251. So far nobody showed any interest in the feature, though, so I've put on backburner. I've realized that the `Sniffer` class is not injectable via the constructor, which is maybe an oversight on our consistent \"plugability\" of everything, I'd like to add it.\r\n\r\nThe Ruby client, as all the official clients, supports supplying a [custom connection selector](https://github.com/elastic/elasticsearch-ruby/tree/master/elasticsearch-transport#connection-selector), which allows people to programatically select nodes based on arbitrary criteria, eg. the node attributes.\r\n\r\nRegarding the feature itself, I'm not sure I grasp what is exactly being suggested -- it looks to me like a feature request to add a `sniffing_filter` option to the clients. I think along the same lines as @HonzaKral, that it's more or less an advanced functionality, which people can implement via custom component classes, and passing them to the client.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304009379","html_url":"https://github.com/elastic/elasticsearch/issues/24871#issuecomment-304009379","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24871","id":304009379,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDAwOTM3OQ==","user":{"login":"andrewvc","id":131427,"node_id":"MDQ6VXNlcjEzMTQyNw==","avatar_url":"https://avatars2.githubusercontent.com/u/131427?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewvc","html_url":"https://github.com/andrewvc","followers_url":"https://api.github.com/users/andrewvc/followers","following_url":"https://api.github.com/users/andrewvc/following{/other_user}","gists_url":"https://api.github.com/users/andrewvc/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewvc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewvc/subscriptions","organizations_url":"https://api.github.com/users/andrewvc/orgs","repos_url":"https://api.github.com/users/andrewvc/repos","events_url":"https://api.github.com/users/andrewvc/events{/privacy}","received_events_url":"https://api.github.com/users/andrewvc/received_events","type":"User","site_admin":false},"created_at":"2017-05-25T13:25:27Z","updated_at":"2017-05-25T13:25:27Z","author_association":"CONTRIBUTOR","body":"Having spoken to a variety of client authors, the consensus is not to have this discussion on the ES repo since this isn't an ES issue, closing.","performed_via_github_app":null}]