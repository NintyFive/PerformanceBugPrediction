[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/78568455","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-78568455","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":78568455,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NTY4NDU1","user":{"login":"simonbrandhof","id":414010,"node_id":"MDQ6VXNlcjQxNDAxMA==","avatar_url":"https://avatars1.githubusercontent.com/u/414010?v=4","gravatar_id":"","url":"https://api.github.com/users/simonbrandhof","html_url":"https://github.com/simonbrandhof","followers_url":"https://api.github.com/users/simonbrandhof/followers","following_url":"https://api.github.com/users/simonbrandhof/following{/other_user}","gists_url":"https://api.github.com/users/simonbrandhof/gists{/gist_id}","starred_url":"https://api.github.com/users/simonbrandhof/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simonbrandhof/subscriptions","organizations_url":"https://api.github.com/users/simonbrandhof/orgs","repos_url":"https://api.github.com/users/simonbrandhof/repos","events_url":"https://api.github.com/users/simonbrandhof/events{/privacy}","received_events_url":"https://api.github.com/users/simonbrandhof/received_events","type":"User","site_admin":false},"created_at":"2015-03-12T18:56:30Z","updated_at":"2015-03-12T18:56:30Z","author_association":"NONE","body":"If delete-by-query is removed, then how would you truncate an index ? Deleting and creating again the index requires to know metadata, which is not always possible.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/78612598","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-78612598","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":78612598,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjEyNTk4","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-03-12T20:54:11Z","updated_at":"2015-03-12T20:54:11Z","author_association":"CONTRIBUTOR","body":"> If delete-by-query is removed, then how would you truncate an index\n\nDeleting the entire index is much faster than delete-by-query of all docs in the index.  But if that's not an option I suggest you run scan+scroll of your query to get all hits and then do bulk-request deletes of the returned ids.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/78652326","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-78652326","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":78652326,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjUyMzI2","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-03-12T22:16:22Z","updated_at":"2015-03-12T22:16:22Z","author_association":"CONTRIBUTOR","body":"> If delete-by-query is removed, then how would you truncate an index ? Deleting and creating again the index requires to know metadata, which is not always possible.\n\nIn this case I recommend to just read the metadata from the index and put it in your create request, then delete the index and you are done with it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/78653173","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-78653173","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":78653173,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjUzMTcz","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-03-12T22:17:28Z","updated_at":"2015-03-12T22:17:28Z","author_association":"CONTRIBUTOR","body":"@mikemccand I am not sure if we should do this in 1.5 but deprecating it I think is a no brainer?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/78672474","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-78672474","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":78672474,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjcyNDc0","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-03-12T22:50:57Z","updated_at":"2015-03-12T22:50:57Z","author_association":"CONTRIBUTOR","body":"> @mikemccand I am not sure if we should do this in 1.5 but deprecating it I think is a no brainer?\n\nYeah my plan is deprecate in 1.5 and remove in 2.0.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/84887389","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-84887389","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":84887389,"node_id":"MDEyOklzc3VlQ29tbWVudDg0ODg3Mzg5","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-03-23T08:42:30Z","updated_at":"2015-03-23T08:42:30Z","author_association":"CONTRIBUTOR","body":"I started to remove this in 2.0 but got stuck because we use delete-by-query internally to allow deleting an entire type from an index ... once we remove this in 2.0 (#8877) then we can do this issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85663622","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-85663622","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":85663622,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjYzNjIy","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-03-24T19:39:10Z","updated_at":"2015-03-24T19:39:10Z","author_association":"CONTRIBUTOR","body":"Since #8877 is done I went and removed all delete-by-query logic but ... then I realized: what if a user has a DBQ in the translog on a shard and upgrades to 2.0?  Must we support this back-compat case?  Can we \"require\" that users flush (clears the translog) before upgrading?\n\nIf not ... I need to put back the DBQ logic for translog and Engine.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85678347","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-85678347","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":85678347,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Njc4MzQ3","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-03-24T20:25:31Z","updated_at":"2015-03-24T20:25:31Z","author_association":"CONTRIBUTOR","body":"> If not ... I need to put back the DBQ logic for translog and Engine.\n\nI am afraid we have to.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85687385","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-85687385","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":85687385,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Njg3Mzg1","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-03-24T20:54:02Z","updated_at":"2015-03-24T20:54:02Z","author_association":"MEMBER","body":"But we can still remove the public API right? This can just be an internal backcompat implementation detail?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85688292","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-85688292","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":85688292,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Njg4Mjky","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-03-24T20:58:24Z","updated_at":"2015-03-24T20:58:24Z","author_association":"CONTRIBUTOR","body":"> But we can still remove the public API right? This can just be an internal backcompat implementation detail?\n\nYeah ... I also need to fix the static back compat indices to leave some DBQs in the translog and confirm on upgrade the docs are in fact deleted ...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86105228","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-86105228","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":86105228,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MTA1MjI4","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-03-25T16:28:34Z","updated_at":"2015-03-25T16:28:34Z","author_association":"CONTRIBUTOR","body":"> > If not ... I need to put back the DBQ logic for translog and Engine.\n> \n> I am afraid we have to.\n\nMaybe we can simply detect when this (\"DBQ in translog on upgrade\") happens and refuse to start the shard, saying that you must go back to the prior version and flush the shard?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86230080","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-86230080","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":86230080,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MjMwMDgw","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-03-25T21:54:14Z","updated_at":"2015-03-25T21:54:14Z","author_association":"MEMBER","body":"That seems reasonable? This is an extreme edge case. If they are upgrading from 1.5+, the flush is done automatically on shutdown.  And we already recommend running flush before any shutdown in general. So the only way for them to hit this is to have done a DBQ since the last time a flush happened (max 30 mins by default?), and then to have shutdown without doing a flush.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86417327","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-86417327","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":86417327,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NDE3MzI3","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-03-26T09:13:57Z","updated_at":"2015-03-26T09:13:57Z","author_association":"CONTRIBUTOR","body":"> That seems reasonable? This is an extreme edge case. If they are upgrading from 1.5+, the flush is done automatically on shutdown.\n\nAlas, the flush is only done in 1.5+ if a recovery was not also in process when the node was shut down, because a recovery blocks flushes (separately, we need to fix translog so it's ref counted instead: the two operations really should be independent).\n\nAnyway, I think for this we should just keep the \"replay DBQ on upgrade\" ... the DBQ code that we need to keep around to do this is very small: just Engine, TransLog, IndexShard.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86581542","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-86581542","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":86581542,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NTgxNTQy","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2015-03-26T15:44:28Z","updated_at":"2015-03-26T15:47:02Z","author_association":"MEMBER","body":"++ on fixing current behavior of delete by query. I think we all agree on the fix, which is to do a scan search and bulk deletes, instead of using delete-by-query, since thats safer and more consistent with our replication model. It might be a long running task, but relatively lightweight, so I don't think we need to wait for the task management infra if we plan to remove delete-by-query in 2.0, and then add it back when we have it, but just go ahead and replace the current implementation with scan/delete and not deprecate it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86586024","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-86586024","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":86586024,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NTg2MDI0","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-03-26T15:50:58Z","updated_at":"2015-03-26T16:02:33Z","author_association":"MEMBER","body":"+1 on giving the user an alternative, albeit a slowish instead of removing the current implementation first and then later adding a managed one.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86663053","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-86663053","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":86663053,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NjYzMDUz","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-03-26T18:40:54Z","updated_at":"2015-03-26T18:40:54Z","author_association":"CONTRIBUTOR","body":"I agree it would be great to \"delete old way and add new way\" in one go...\n\n> so I don't think we need to wait for the task management infra if we plan to remove delete-by-query in 2.0\n\nThat would be great, if it really is OK to just \"be slow\" sometimes (when the query deleted many docs).  I guess there is precedent here: the optimize API (with wait_for_merge=true) can clearly take a very long time...\n\nSomehow, whichever node receives the DBQ request, must open a client connection (to itself?), run the scan search, scroll through the hits and make bulk delete requests.  I think #10251 is an example of how to do this ...\n\nI'll add a comment on #7052 that we don't need to wait for task management API, and block this issue on it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86663389","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-86663389","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":86663389,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NjYzMzg5","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-03-26T18:42:35Z","updated_at":"2015-03-26T18:42:35Z","author_association":"CONTRIBUTOR","body":"This issue is blocked on #7052.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86696473","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-86696473","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":86696473,"node_id":"MDEyOklzc3VlQ29tbWVudDg2Njk2NDcz","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-03-26T20:11:35Z","updated_at":"2015-03-26T20:11:35Z","author_association":"CONTRIBUTOR","body":"I don't think this need to be blocked on #7052 We can remove this now and add the other one as a followup. Stuff like this should not be blocked syntactic sugar\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86743497","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-86743497","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":86743497,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NzQzNDk3","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-03-26T22:43:14Z","updated_at":"2015-03-26T22:43:14Z","author_association":"CONTRIBUTOR","body":"> I don't think this need to be blocked on #7052 \n\nOK I opened #10288\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/106444511","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-106444511","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":106444511,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNjQ0NDUxMQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-05-28T16:01:36Z","updated_at":"2015-05-28T16:01:36Z","author_association":"CONTRIBUTOR","body":"@mikemccand can we close this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/106489593","html_url":"https://github.com/elastic/elasticsearch/issues/10067#issuecomment-106489593","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10067","id":106489593,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNjQ4OTU5Mw==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-05-28T17:00:14Z","updated_at":"2015-05-28T17:00:14Z","author_association":"CONTRIBUTOR","body":"Yes.\n","performed_via_github_app":null}]