{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/31470","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31470/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31470/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31470/events","html_url":"https://github.com/elastic/elasticsearch/issues/31470","id":334153545,"node_id":"MDU6SXNzdWUzMzQxNTM1NDU=","number":31470,"title":"Handling of core plugins is a pain when using APT repositories to update","user":{"login":"stof","id":439401,"node_id":"MDQ6VXNlcjQzOTQwMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/439401?v=4","gravatar_id":"","url":"https://api.github.com/users/stof","html_url":"https://github.com/stof","followers_url":"https://api.github.com/users/stof/followers","following_url":"https://api.github.com/users/stof/following{/other_user}","gists_url":"https://api.github.com/users/stof/gists{/gist_id}","starred_url":"https://api.github.com/users/stof/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stof/subscriptions","organizations_url":"https://api.github.com/users/stof/orgs","repos_url":"https://api.github.com/users/stof/repos","events_url":"https://api.github.com/users/stof/events{/privacy}","received_events_url":"https://api.github.com/users/stof/received_events","type":"User","site_admin":false},"labels":[{"id":114977275,"node_id":"MDU6TGFiZWwxMTQ5NzcyNzU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Packaging","name":":Delivery/Packaging","color":"0e8a16","default":false,"description":"RPM and deb packaging, tar and zip archives, shell and batch scripts"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-06-20T16:19:50Z","updated_at":"2020-11-11T21:56:30Z","closed_at":"2018-06-21T17:53:32Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`): 5.6.10\r\n\r\n**Plugins installed**: analysis-icu, ingest-attachment\r\n\r\n**JVM version** (`java -version`):\r\n```\r\nopenjdk version \"1.8.0_171\"\r\nOpenJDK Runtime Environment (build 1.8.0_171-8u171-b11-0ubuntu0.16.04.1-b11)\r\nOpenJDK 64-Bit Server VM (build 25.171-b11, mixed mode)\r\n```\r\n\r\n**OS version**: Linux 4.4.0-128-generic #154-Ubuntu SMP Fri May 25 14:15:18 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nWhen upgrading ES patch releases with APT, core plugins are a pain, because each version is built only for a single release of ES and so ES will fail to start with the new version. And the only way to fix this today is to remove all plugins and install them from scratch again.\r\n\r\nI see 3 possible ways to improve this situation (there might be others):\r\n\r\n- provide APT packages for core plugins, so that APT would upgrade the plugins at the same time than upgrading ES (and so versions would match)\r\n- provide a CLI command to easily update all installed plugins (or at least all plugins incompatible with current ES version)\r\n- loosen the version checks for core plugins to allow installing them alongside newer patch releases of the same ES minor version at least (not sure this is actually working regarding compatibility).\r\n\r\n**Steps to reproduce**:\r\n\r\n 1. Install the APT package\r\n 2. Install core plugins (analysis-icu and ingest-attachment) in my case\r\n 3. Update to the next patch release using APT\r\n\r\nES will fail to start in my case.\r\n","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}