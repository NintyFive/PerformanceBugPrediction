[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/331229031","html_url":"https://github.com/elastic/elasticsearch/issues/26741#issuecomment-331229031","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26741","id":331229031,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTIyOTAzMQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-09-21T17:39:25Z","updated_at":"2017-09-21T17:39:25Z","author_association":"MEMBER","body":"Supersedes #18475","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/336269714","html_url":"https://github.com/elastic/elasticsearch/issues/26741#issuecomment-336269714","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26741","id":336269714,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjI2OTcxNA==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2017-10-12T21:09:32Z","updated_at":"2017-10-12T21:09:32Z","author_association":"CONTRIBUTOR","body":"Here's roughly my roadmap for this since it's probably too much for one pull request\r\n\r\n- [ ] Add windows images for server 2012-r2 and 2016 for tests to the vagrantfile and vagrant test plugin. Allow an alternate windows image to be used by setting an environment variable. Don't run any tests on these boxes just yet\r\n\r\n- [ ] Create the groovy project that will be the new portable packaging tests. Add tasks to run these on all boxes, including the windows ones. Don't add all the tests to the new project yet. The bats tests will still run as usual\r\n\r\n- [ ] In parts, move tests from the bats project to the new groovy project. Once all tests are moved over, remove the bats tasks from the build.\r\n\r\n- [ ] Add testing windows installer as a service ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/336278433","html_url":"https://github.com/elastic/elasticsearch/issues/26741#issuecomment-336278433","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26741","id":336278433,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjI3ODQzMw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-10-12T21:32:58Z","updated_at":"2017-10-12T21:33:03Z","author_association":"MEMBER","body":"> Create the groovy project that will be the new portable packaging tests.\r\n\r\nMay I suggest `qa/packaging`? `qa/vagrant` was annoying for many reasons :). After all of them are transitioned, I think we can (and should) remove the remapping we do of the vagrant mount back to `/vagrant`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/336279782","html_url":"https://github.com/elastic/elasticsearch/issues/26741#issuecomment-336279782","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26741","id":336279782,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjI3OTc4Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-10-12T21:37:04Z","updated_at":"2017-10-12T21:37:04Z","author_association":"MEMBER","body":"> Add windows images for server 2012-r2 and 2016 for tests to the vagrantfile and vagrant test plugin. Allow an alternate windows image to be used by setting an environment variable. Don't run any tests on these boxes just yet\r\n\r\nWe should not enable these by default, and the boxes should not be mentioned in the Vagrantfile. The boxes that we are going to use are \"closed source\". We do not refer to \"closed source\" in the open source code base. We should not require open source users to specify an environment variable to get around running these on boxes they can not see. All that we should do is enable these to run if you provide your own box, which we will do on our internal CI.\r\n\r\n> Add testing windows installer as a service\r\n\r\nCan you clarify what this refers to? I think that you mean installing Elasticsearch on Windows as a service, not using the Windows MSI installer but what you write could be interpreted as the latter.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/336288992","html_url":"https://github.com/elastic/elasticsearch/issues/26741#issuecomment-336288992","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26741","id":336288992,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjI4ODk5Mg==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2017-10-12T22:07:46Z","updated_at":"2017-10-12T22:07:46Z","author_association":"CONTRIBUTOR","body":">May I suggest qa/packaging? qa/vagrant was annoying for many reasons :). After all of them are transitioned, I think we can (and should) remove the remapping we do of the vagrant mount back to /vagrant\r\n\r\nSounds good, that seems cleaner ðŸ‘ \r\n\r\n>We should not enable these by default, and the boxes should not be mentioned in the Vagrantfile. The boxes that we are going to use are \"closed source\". We do not refer to \"closed source\" in the open source code base. We should not require open source users to specify an environment variable to get around running these on boxes they can not see. All that we should do is enable these to run if you provide your own box, which we will do on our internal CI.\r\n\r\nAgree, they won't run by default (when `vagrant.boxes` is unset). I think they should run with `vagrant.boxes=all`, and I can add options for `linux-all` (the current behavior of `all`) and `windows-all`\r\n\r\nI see why we wouldn't want to mention the images explicitly in the Vagrantfile (although it looks like vagrant doesn't complain about not finding the image until you try to start it). They'll be hidden behind an environment variable in the Vagrantfile, something like\r\n\r\n```ruby\r\nVagrant.configure(2) do |config|\r\n  if ENV['WINDOWS_PACKAGING']\r\n    config.vm.define 'windows-server-2012r2' do |config|\r\n      config.vm.box = ENV['WINDOWS_2012R2_VAGRANT_BOX']\r\n    end\r\n    config.vm.define 'windows-server-2016' do |config|\r\n      config.vm.box = ENV['WINDOWS_2016_VAGRANT_BOX']\r\n    end\r\n  end\r\n  # the other boxes\r\nend\r\n```\r\n\r\nand then gradle will decide whether to set these env variables. I guess it can get the box names either from command line properties or its own environment (I'll favor command line props)\r\n\r\n>Can you clarify what this refers to? I think that you mean installing Elasticsearch on Windows as a service, not using the Windows MSI installer but what you write could be interpreted as the latter.\r\n\r\nRight, the [elasticsearch-service](https://github.com/elastic/elasticsearch/blob/master/distribution/src/main/resources/bin/elasticsearch-service.bat) script, not the MSI","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/336289562","html_url":"https://github.com/elastic/elasticsearch/issues/26741#issuecomment-336289562","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26741","id":336289562,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjI4OTU2Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-10-12T22:09:43Z","updated_at":"2017-10-12T22:09:43Z","author_association":"MEMBER","body":"Thanks @andyb-elastic, this sounds good to me now.\r\n\r\n> I guess it can get the box names either from command line properties or its own environment (I'll favor command line props)\r\n\r\nI prefer properties too (we can do the `-P` thing that we already do.\r\n\r\n> Right, the [elasticsearch-service](https://github.com/elastic/elasticsearch/blob/master/distribution/src/main/resources/bin/elasticsearch-service.bat) script, not the MSI\r\n\r\nThank you for clarifying, I wanted to make sure the MSI is out of scope here (and belongs elsewhere, in the MSI repository).\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/336375832","html_url":"https://github.com/elastic/elasticsearch/issues/26741#issuecomment-336375832","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26741","id":336375832,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjM3NTgzMg==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2017-10-13T07:41:07Z","updated_at":"2017-10-13T07:41:07Z","author_association":"MEMBER","body":"Thanks @andyb-elastic, this plan looks good. Once the new packaging test project is available, we should make sure to involve many developers to convert the tests from bats to the new format. That will help to parallelize the work and spread the knowledge at the same time (we did this before when migrating settings to a new API or when adding integration test for aggregations).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/351123511","html_url":"https://github.com/elastic/elasticsearch/issues/26741#issuecomment-351123511","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26741","id":351123511,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTEyMzUxMQ==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2017-12-12T17:26:13Z","updated_at":"2017-12-12T17:26:13Z","author_association":"CONTRIBUTOR","body":"We had a discussion about exactly what should be tested with plugins - currently (in bats) we just test that the plugins' jars are installed into the right place but some questioned the value of that. We may want to test basic functionality of the plugins if we can do that in a way that's not too involved.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/407820075","html_url":"https://github.com/elastic/elasticsearch/issues/26741#issuecomment-407820075","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26741","id":407820075,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzgyMDA3NQ==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-07-25T16:44:08Z","updated_at":"2018-07-25T16:44:08Z","author_association":"CONTRIBUTOR","body":"Closing this as the new portable test project is created and running in CI, and basic tests have been ported over to it for all distributions we're currently testing. New work on porting and filling out packaging tests will be tracked in #32143","performed_via_github_app":null}]