{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9435","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9435/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9435/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9435/events","html_url":"https://github.com/elastic/elasticsearch/issues/9435","id":55579239,"node_id":"MDU6SXNzdWU1NTU3OTIzOQ==","number":9435,"title":"connection issue upgrading from 1.3.2 to 1.4.2","user":{"login":"jeacott","id":311357,"node_id":"MDQ6VXNlcjMxMTM1Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/311357?v=4","gravatar_id":"","url":"https://api.github.com/users/jeacott","html_url":"https://github.com/jeacott","followers_url":"https://api.github.com/users/jeacott/followers","following_url":"https://api.github.com/users/jeacott/following{/other_user}","gists_url":"https://api.github.com/users/jeacott/gists{/gist_id}","starred_url":"https://api.github.com/users/jeacott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeacott/subscriptions","organizations_url":"https://api.github.com/users/jeacott/orgs","repos_url":"https://api.github.com/users/jeacott/repos","events_url":"https://api.github.com/users/jeacott/events{/privacy}","received_events_url":"https://api.github.com/users/jeacott/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"assignees":[{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false}],"milestone":null,"comments":13,"created_at":"2015-01-27T05:56:35Z","updated_at":"2015-11-29T02:17:58Z","closed_at":"2015-11-28T13:46:21Z","author_association":"NONE","active_lock_reason":null,"body":"I'd like to preface this by first saying that I'm using spring data elasticsearch, and in this particular case its not clear to me with which project the issue lies.\n\nthe crux of the problem is that I can connect to a remote ES cluster with 1.3.2 but not 1.4.2 regardless of the version running on the remote cluster (tried it with both)\n\nI have an ES client constructed by spring data ES, attempting to connect to a remote ES cluster.\nusing ES version 1.3.2 \n\n```\n  log: \n    [main] o.s.d.e.c.TransportClientFactoryBean     : adding transport node : x.x.x.x:9300\n    no errors\n```\n\nclient settings (copied directly from the debug of the running instance)\n\n```\n{cluster.name=my-remote-cluster, client.transport.sniff=true, client.transport.ignore_cluster_name=false, client.transport.ping_timeout=5s, client.transport.nodes_sampler_interval=5s, name=Jim Hammond, path.logs=C:/logs, network.server=false, node.client=true}\n```\n\nhowever, using 1.4.2\n\n```\n  log:\n   [           main] o.s.d.e.c.TransportClientFactoryBean     : adding transport node : x.x.x.x:9300\n   [           main] .d.e.r.s.AbstractElasticsearchRepository : failed to load elasticsearch nodes : org.elasticsearch.client.transport.NoNodeAvailableException: None of the configured nodes are available: []\n```\n\nclient settings\n\n```\n{cluster.name=my-remote-cluster, client.transport.sniff=true, client.transport.ignore_cluster_name=false, client.transport.ping_timeout=5s, client.transport.nodes_sampler_interval=5s, name=Wolverine, path.logs=C:/logs, network.server=false, node.client=true, client.type=transport}\n```\n\n**note** the extra client.type=transport setting on the end of the 1.4.2 client.\n\nthe code I'm attempting to run is trivial, pure ES api. and the same in both cases:\n\n``` java\npublic void createIndexTemplate() throws Exception {\n        String sourceMapping = IOUtils.toString(this.getClass().getResourceAsStream(\"/mappings/mappings.json\"), \"UTF-8\");\n        String sourceSettings = IOUtils.toString(this.getClass().getResourceAsStream(\"/settings/settings.json\"), \"UTF-8\");\n\n        PutIndexTemplateResponse response = client.admin().indices()\n                .preparePutTemplate(\"sometemplate\")\n                .setTemplate(\"sometemplate*\")\n                .addMapping(\"mymap\", sourceMapping)\n                .setSettings(sourceSettings)\n                .get();\n}\n```\n\nis this an elasticsearch bug? or an issue with the way spring data is creating the client? both?\nsomething else? is there some documentation I missed regarding the upgrade?\n\nThanks in advance\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}