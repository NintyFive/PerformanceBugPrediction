{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/42309","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42309/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42309/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42309/events","html_url":"https://github.com/elastic/elasticsearch/issues/42309","id":446745418,"node_id":"MDU6SXNzdWU0NDY3NDU0MTg=","number":42309,"title":"transforms_stats#\"Test Get Transform Stats\"  fails because pages_processed/checkpoint don't match","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"labels":[{"id":1272783040,"node_id":"MDU6TGFiZWwxMjcyNzgzMDQw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml/Transform","name":":ml/Transform","color":"0e8a16","default":false,"description":"Transform"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2019-05-21T17:46:36Z","updated_at":"2019-05-23T07:42:07Z","closed_at":"2019-05-23T07:42:07Z","author_association":"MEMBER","active_lock_reason":null,"body":"https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+intake/3614/\r\n\r\nReproduction:\r\n\r\n```\r\n./gradlew :x-pack:plugin:integTestRunner --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=data_frame/transforms_stats/Test get transform stats}\" -Dtests.seed=5B30818AA97DC12A -Dtests.security.manager=true -Dtests.locale=en-KE -Dtests.timezone=Europe/Sarajevo -Dcompiler.java=12 -Druntime.java=11 -Dtests.rest.blacklist=getting_started/10_monitor_cluster_health/*\r\n```\r\n\r\nThis failed on CI with:\r\n\r\n> java.lang.AssertionError: Failure at [data_frame/transforms_stats:53]: transforms.0.stats.pages_processed didn't match expected value:\r\ntransforms.0.stats.pages_processed: expected [0] but was [1]\r\n\r\nIt also fails for me locally, but with a different part of the test failing (checkpoint instead of the pages_processed).  Fails reliably for me\r\n\r\n> Caused by:\r\n        java.lang.AssertionError: transforms.0.state.checkpoint didn't match expected value:\r\n         transforms.0.state.checkpoint: expected [0] but was [1]\r\n\r\n```\r\nStash dump on test failure [{\r\n  1>   \"stash\" : {\r\n  1>     \"body\" : {\r\n  1>       \"count\" : 1,\r\n  1>       \"transforms\" : [\r\n  1>         {\r\n  1>           \"id\" : \"airline-transform-stats\",\r\n  1>           \"state\" : {\r\n  1>             \"task_state\" : \"started\",\r\n  1>             \"indexer_state\" : \"started\",\r\n  1>             \"checkpoint\" : 1,\r\n  1>             \"progress\" : {\r\n  1>               \"total_docs\" : 0,\r\n  1>               \"docs_remaining\" : 0,\r\n  1>               \"percent_complete\" : 100.0\r\n  1>             }\r\n  1>           },\r\n  1>           \"stats\" : {\r\n  1>             \"pages_processed\" : 1,\r\n  1>             \"documents_processed\" : 0,\r\n  1>             \"documents_indexed\" : 0,\r\n  1>             \"trigger_count\" : 1,\r\n  1>             \"index_time_in_ms\" : 0,\r\n  1>             \"index_total\" : 0,\r\n  1>             \"index_failures\" : 0,\r\n  1>             \"search_time_in_ms\" : 8,\r\n  1>             \"search_total\" : 1,\r\n  1>             \"search_failures\" : 0\r\n  1>           },\r\n  1>           \"checkpointing\" : {\r\n  1>             \"in_progress\" : {\r\n  1>               \"timestamp_millis\" : 1558460091734\r\n  1>             },\r\n  1>             \"operations_behind\" : -1\r\n  1>           }\r\n  1>         }\r\n  1>       ]\r\n  1>     }\r\n  1>   }\r\n  1> }]\r\n```\r\n\r\nLooks like it started failing yesterday, so I'm guessing it's somehow related to https://github.com/elastic/elasticsearch/pull/42067 /cc @davidkyle \r\n\r\n![image](https://user-images.githubusercontent.com/1224228/58118054-0e9a8d80-7bce-11e9-96c6-691c761efdbd.png)\r\n\r\nSince it fails reliably I'm going to mute this.","closed_by":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"performed_via_github_app":null}