{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/6801","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6801/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6801/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6801/events","html_url":"https://github.com/elastic/elasticsearch/issues/6801","id":37480168,"node_id":"MDU6SXNzdWUzNzQ4MDE2OA==","number":6801,"title":"What to do with a problem node","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2014-07-09T15:51:31Z","updated_at":"2014-12-30T20:34:22Z","closed_at":"2014-12-30T20:30:39Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Twice we've made some silly mistake and added a broken machine to the cluster.  Typically the machine joins the cluster fine and everything looks OK until shards migrate to the node and it can't handle the traffic and starts to thrash its disk or GC forever or whatever.  My question is, can Elasticsearch do anything to help minimize the impact of this broken node?\n\nRight now if you set a timeout on search requests then the node will timeout and you'll just get responses from the nodes that did respond.  That's a start, but I'm wondering if Elasticsearch can do better - like maybe throttle requests back from the node when it goes over a certain number of timeouts.  Or something.  The problem is that I'm not really sure what is a safe thing to do that won't put the whole cluster in danger of a cascading failure.\n\nWhatever Elasticsearch does, this is certainly something that you'd want to see on the cluster health api.\n\nSo, discussion?\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}