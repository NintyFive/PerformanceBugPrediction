[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385618212","html_url":"https://github.com/elastic/elasticsearch/issues/30237#issuecomment-385618212","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30237","id":385618212,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTYxODIxMg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-01T07:43:31Z","updated_at":"2018-05-01T07:43:31Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385629818","html_url":"https://github.com/elastic/elasticsearch/issues/30237#issuecomment-385629818","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30237","id":385629818,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTYyOTgxOA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2018-05-01T09:04:52Z","updated_at":"2018-05-01T09:04:52Z","author_association":"MEMBER","body":"@antonpious removing deletes can be expensive which is why Lucene is not aggressively doing it but rather tries to inline it with the normal merging process (it waits until segments are 10% deleted before trying to merge them away due to that). You do not have the option to only remove deletes from segments because it's inefficient - if you're already copying segment data, you might as well take to opportunity to merge that. You do have the option to only merge segments with deletes in them see `only_expunge_deletes` [here](https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-forcemerge.html) .\r\n\r\nAll of that said - if all indexing stops, a single segment is the best storage option. \r\n\r\nI'm going to close this as this works as intended and I don't see (yet) the need to change it. I'm curious to know what problem you are trying to solve. I suggest you open a discussion on https://discuss.elastic.co/ and link to here. If we end up concluding that something in ES needs to change we can reopen the issue.","performed_via_github_app":null}]