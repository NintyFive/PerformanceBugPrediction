{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14833","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14833/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14833/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14833/events","html_url":"https://github.com/elastic/elasticsearch/issues/14833","id":117598816,"node_id":"MDU6SXNzdWUxMTc1OTg4MTY=","number":14833,"title":"Align handling of interrupts in BulkProcessor","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"labels":[{"id":146829143,"node_id":"MDU6TGFiZWwxNDY4MjkxNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Transport%20API","name":":Core/Infra/Transport API","color":"0e8a16","default":false,"description":"Transport client API"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":266898191,"node_id":"MDU6TGFiZWwyNjY4OTgxOTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v2.2.0","name":"v2.2.0","color":"dddddd","default":false,"description":null},{"id":246685314,"node_id":"MDU6TGFiZWwyNDY2ODUzMTQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v5.0.0-alpha1","name":"v5.0.0-alpha1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-11-18T14:32:16Z","updated_at":"2016-02-19T04:52:49Z","closed_at":"2015-12-18T18:35:42Z","author_association":"MEMBER","active_lock_reason":null,"body":"### Background\n\nIn #14799, I've spotted that `BulkProcessor` does not handle `InterruptedException` properly. `InterruptedException` is the standard Java facility to request cancellation of an ongoing operation in another thread.\n\nAfter some discussion (see #14799), we've decided to move the change to the client API to a dedicated ticket for documentation purposes as this change also interferes with the retry feature in the `BulkProcessor` (see #14620).\n### Current Situation\n\nThere are two code paths in `BulkProcessor`, one for handling bulk requests in a blocking fashion (`concurrentRequests == 0` when constructing `BulkProcessor`)  and one that allows for concurrent bulk requests from the same client. Both handle interruption differently, the latter does it also wrong (by calling `Thread.interrupted` instead of `Thread.currentThread().interrupt()`).\n### Desired Situation\n\nBoth code paths respond to interruption in a well-defined, documented and ideally consistent way (i.e. both either throw `InterruptedException` or restore the interrupt flag).\n","closed_by":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"performed_via_github_app":null}