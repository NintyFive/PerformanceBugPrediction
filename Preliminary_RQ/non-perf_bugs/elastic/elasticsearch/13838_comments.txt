[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/144049996","html_url":"https://github.com/elastic/elasticsearch/issues/13838#issuecomment-144049996","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13838","id":144049996,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NDA0OTk5Ng==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-09-29T12:55:17Z","updated_at":"2015-09-29T12:55:36Z","author_association":"MEMBER","body":"I think that elasticsearch got this index operation 2 times from logstash.\nSo to me, that's more a logstash issue than an elasticsearch one.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/144050389","html_url":"https://github.com/elastic/elasticsearch/issues/13838#issuecomment-144050389","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13838","id":144050389,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NDA1MDM4OQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-09-29T12:57:16Z","updated_at":"2015-09-29T12:57:16Z","author_association":"MEMBER","body":"If you want to make sure that the same event is not indexed twice, then you need to tell logstash to use a specific `_id` which will be extracted from your logstash event.\n\nClosing as I don't think it's an elasticsearch issue here.\n\nFeel free to reopen and comment.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/144060517","html_url":"https://github.com/elastic/elasticsearch/issues/13838#issuecomment-144060517","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13838","id":144060517,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NDA2MDUxNw==","user":{"login":"tigranterteryan","id":7555393,"node_id":"MDQ6VXNlcjc1NTUzOTM=","avatar_url":"https://avatars2.githubusercontent.com/u/7555393?v=4","gravatar_id":"","url":"https://api.github.com/users/tigranterteryan","html_url":"https://github.com/tigranterteryan","followers_url":"https://api.github.com/users/tigranterteryan/followers","following_url":"https://api.github.com/users/tigranterteryan/following{/other_user}","gists_url":"https://api.github.com/users/tigranterteryan/gists{/gist_id}","starred_url":"https://api.github.com/users/tigranterteryan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tigranterteryan/subscriptions","organizations_url":"https://api.github.com/users/tigranterteryan/orgs","repos_url":"https://api.github.com/users/tigranterteryan/repos","events_url":"https://api.github.com/users/tigranterteryan/events{/privacy}","received_events_url":"https://api.github.com/users/tigranterteryan/received_events","type":"User","site_admin":false},"created_at":"2015-09-29T13:37:06Z","updated_at":"2015-09-29T13:40:22Z","author_association":"NONE","body":"I updated logstash to override the _id:\n\n```\n  if \"appdev\" in [tags] {\n    elasticsearch { host => localhost protocol => \"http\" cluster => Jibe_ELK index => \"appdev-%{+YYYY.MM.dd}\" document_id => \"%{contributionId}-%{offset}-%{date}\" workers => 5 }\n  }\n```\n\nAnd logstash.log shows that logstash sends to elasticsearch only one document:\n\n```\n{\n             \"appId\" => \"imas-dev-10.240.21.82\",\n              \"date\" => \"2015-09-29T07:10:52+0000\",\n          \"category\" => \"IMAS_CHATSESSION_MESSAGE_RECEIVED_121\",\n              \"user\" => \"+11000040488\",\n            \"toUser\" => \"+11000040466\",\n       \"messageType\" => \"imdn\",\n    \"contributionId\" => \"FACfIAV6DA\",\n              \"size\" => 265,\n            \"extras\" => {},\n          \"@version\" => \"1\",\n        \"@timestamp\" => \"2015-09-29T07:10:52.000Z\",\n              \"file\" => \"/opt/jibe/jetty_master/reporting_MASTER_local/logs/reporting.log\",\n              \"host\" => \"app3-us\",\n            \"offset\" => \"2868\",\n              \"type\" => \"jibeqa\",\n              \"tags\" => \"appdev\"\n}\n```\n\nBut in Elasticsearch it appears with _id I assigned and with default one:\n\n```\n{\n   \"hits\" : {\n      \"max_score\" : 1,\n      \"total\" : 2,\n      \"hits\" : [\n         {\n            \"_source\" : {\n               \"offset\" : \"2868\",\n               \"date\" : \"2015-09-29T07:10:52+0000\",\n               \"messageType\" : \"imdn\",\n               \"user\" : \"+11000040488\",\n               \"contributionId\" : \"FACfIAV6DA\",\n               \"file\" : \"/opt/jibe/jetty_master/reporting_MASTER_local/logs/reporting.log\",\n               \"host\" : \"app3-us\",\n               \"extras\" : {},\n               \"@version\" : \"1\",\n               \"toUser\" : \"+11000040466\",\n               \"category\" : \"IMAS_CHATSESSION_MESSAGE_RECEIVED_121\",\n               \"appId\" : \"imas-dev-10.240.21.82\",\n               \"type\" : \"jibeqa\",\n               \"size\" : 265,\n               \"@timestamp\" : \"2015-09-29T07:10:52.000Z\",\n               \"tags\" : \"appdev\"\n            },\n            \"_index\" : \"appdev-2015.09.29\",\n            \"_type\" : \"jibeqa\",\n            \"_id\" : \"AVAZT-DeZ2RePRz3MKsB\",\n            \"_score\" : 1\n         },\n         {\n            \"_source\" : {\n               \"appId\" : \"imas-dev-10.240.21.82\",\n               \"category\" : \"IMAS_CHATSESSION_MESSAGE_RECEIVED_121\",\n               \"toUser\" : \"+11000040466\",\n               \"@version\" : \"1\",\n               \"tags\" : \"appdev\",\n               \"size\" : 265,\n               \"@timestamp\" : \"2015-09-29T07:10:52.000Z\",\n               \"type\" : \"jibeqa\",\n               \"user\" : \"+11000040488\",\n               \"messageType\" : \"imdn\",\n               \"date\" : \"2015-09-29T07:10:52+0000\",\n               \"offset\" : \"2868\",\n               \"extras\" : {},\n               \"host\" : \"app3-us\",\n               \"file\" : \"/opt/jibe/jetty_master/reporting_MASTER_local/logs/reporting.log\",\n               \"contributionId\" : \"FACfIAV6DA\"\n            },\n            \"_index\" : \"appdev-2015.09.29\",\n            \"_id\" : \"FACfIAV6DA-2868-2015-09-29T07:10:52+0000\",\n            \"_type\" : \"jibeqa\",\n            \"_score\" : 1\n         }\n      ]\n   },\n   \"_shards\" : {\n      \"total\" : 5,\n      \"failed\" : 0,\n      \"successful\" : 5\n   },\n   \"timed_out\" : false,\n   \"took\" : 3\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/144062370","html_url":"https://github.com/elastic/elasticsearch/issues/13838#issuecomment-144062370","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13838","id":144062370,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NDA2MjM3MA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-09-29T13:40:45Z","updated_at":"2015-09-29T13:40:45Z","author_association":"MEMBER","body":"Did you clean the index first? Any chance those are older data?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/144063307","html_url":"https://github.com/elastic/elasticsearch/issues/13838#issuecomment-144063307","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13838","id":144063307,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NDA2MzMwNw==","user":{"login":"tigranterteryan","id":7555393,"node_id":"MDQ6VXNlcjc1NTUzOTM=","avatar_url":"https://avatars2.githubusercontent.com/u/7555393?v=4","gravatar_id":"","url":"https://api.github.com/users/tigranterteryan","html_url":"https://github.com/tigranterteryan","followers_url":"https://api.github.com/users/tigranterteryan/followers","following_url":"https://api.github.com/users/tigranterteryan/following{/other_user}","gists_url":"https://api.github.com/users/tigranterteryan/gists{/gist_id}","starred_url":"https://api.github.com/users/tigranterteryan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tigranterteryan/subscriptions","organizations_url":"https://api.github.com/users/tigranterteryan/orgs","repos_url":"https://api.github.com/users/tigranterteryan/repos","events_url":"https://api.github.com/users/tigranterteryan/events{/privacy}","received_events_url":"https://api.github.com/users/tigranterteryan/received_events","type":"User","site_admin":false},"created_at":"2015-09-29T13:42:36Z","updated_at":"2015-09-29T13:42:36Z","author_association":"NONE","body":"It's not old data, I checked the search before sending. I can remove everything completely and try again.\nBut did that many times.\nData gets there manually when I send it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/144063834","html_url":"https://github.com/elastic/elasticsearch/issues/13838#issuecomment-144063834","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13838","id":144063834,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NDA2MzgzNA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-09-29T13:43:48Z","updated_at":"2015-09-29T13:43:48Z","author_association":"MEMBER","body":"Ok. I see. If you can reproduce it and describe your full scenario, then open an issue in logstash project.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/144064099","html_url":"https://github.com/elastic/elasticsearch/issues/13838#issuecomment-144064099","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13838","id":144064099,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NDA2NDA5OQ==","user":{"login":"tigranterteryan","id":7555393,"node_id":"MDQ6VXNlcjc1NTUzOTM=","avatar_url":"https://avatars2.githubusercontent.com/u/7555393?v=4","gravatar_id":"","url":"https://api.github.com/users/tigranterteryan","html_url":"https://github.com/tigranterteryan","followers_url":"https://api.github.com/users/tigranterteryan/followers","following_url":"https://api.github.com/users/tigranterteryan/following{/other_user}","gists_url":"https://api.github.com/users/tigranterteryan/gists{/gist_id}","starred_url":"https://api.github.com/users/tigranterteryan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tigranterteryan/subscriptions","organizations_url":"https://api.github.com/users/tigranterteryan/orgs","repos_url":"https://api.github.com/users/tigranterteryan/repos","events_url":"https://api.github.com/users/tigranterteryan/events{/privacy}","received_events_url":"https://api.github.com/users/tigranterteryan/received_events","type":"User","site_admin":false},"created_at":"2015-09-29T13:44:33Z","updated_at":"2015-09-29T13:44:33Z","author_association":"NONE","body":"OK Thank you!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/144068917","html_url":"https://github.com/elastic/elasticsearch/issues/13838#issuecomment-144068917","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13838","id":144068917,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NDA2ODkxNw==","user":{"login":"tigranterteryan","id":7555393,"node_id":"MDQ6VXNlcjc1NTUzOTM=","avatar_url":"https://avatars2.githubusercontent.com/u/7555393?v=4","gravatar_id":"","url":"https://api.github.com/users/tigranterteryan","html_url":"https://github.com/tigranterteryan","followers_url":"https://api.github.com/users/tigranterteryan/followers","following_url":"https://api.github.com/users/tigranterteryan/following{/other_user}","gists_url":"https://api.github.com/users/tigranterteryan/gists{/gist_id}","starred_url":"https://api.github.com/users/tigranterteryan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tigranterteryan/subscriptions","organizations_url":"https://api.github.com/users/tigranterteryan/orgs","repos_url":"https://api.github.com/users/tigranterteryan/repos","events_url":"https://api.github.com/users/tigranterteryan/events{/privacy}","received_events_url":"https://api.github.com/users/tigranterteryan/received_events","type":"User","site_admin":false},"created_at":"2015-09-29T13:57:55Z","updated_at":"2015-09-29T13:57:55Z","author_association":"NONE","body":"For a refference: https://github.com/elastic/logstash/issues/3975\n","performed_via_github_app":null}]