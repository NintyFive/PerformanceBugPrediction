[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/390610482","html_url":"https://github.com/elastic/elasticsearch/issues/30720#issuecomment-390610482","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30720","id":390610482,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDYxMDQ4Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-21T10:01:55Z","updated_at":"2018-05-21T10:01:55Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/391600502","html_url":"https://github.com/elastic/elasticsearch/issues/30720#issuecomment-391600502","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30720","id":391600502,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTYwMDUwMg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-05-24T06:13:40Z","updated_at":"2018-05-24T06:13:40Z","author_association":"MEMBER","body":"I think the issue here is the call to the service manager passes java home unexpanded:\r\n\r\n```\r\n--Jvm \"%%JAVA_HOME%%%JVM_DLL%\"\r\n```\r\n\r\nI believe the double percent signs around JAVA_HOME mean it will not be resolved until the service is started, and the local JAVA_HOME set before running install will not exist.\r\n\r\n@elastic/microsoft Is there any reason this can't be resolved at install time?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/391919740","html_url":"https://github.com/elastic/elasticsearch/issues/30720#issuecomment-391919740","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30720","id":391919740,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTkxOTc0MA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-05-25T02:07:49Z","updated_at":"2018-05-25T02:08:06Z","author_association":"MEMBER","body":"@rjernst This is a deliberate choice so that the we use the system JAVA_HOME and resolve it at runtime so that a user can upgrade the installed Java without having to reinstall the Windows service.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392067965","html_url":"https://github.com/elastic/elasticsearch/issues/30720#issuecomment-392067965","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30720","id":392067965,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjA2Nzk2NQ==","user":{"login":"codebrain","id":148974,"node_id":"MDQ6VXNlcjE0ODk3NA==","avatar_url":"https://avatars3.githubusercontent.com/u/148974?v=4","gravatar_id":"","url":"https://api.github.com/users/codebrain","html_url":"https://github.com/codebrain","followers_url":"https://api.github.com/users/codebrain/followers","following_url":"https://api.github.com/users/codebrain/following{/other_user}","gists_url":"https://api.github.com/users/codebrain/gists{/gist_id}","starred_url":"https://api.github.com/users/codebrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codebrain/subscriptions","organizations_url":"https://api.github.com/users/codebrain/orgs","repos_url":"https://api.github.com/users/codebrain/repos","events_url":"https://api.github.com/users/codebrain/events{/privacy}","received_events_url":"https://api.github.com/users/codebrain/received_events","type":"User","site_admin":false},"created_at":"2018-05-25T14:03:11Z","updated_at":"2018-05-25T14:03:11Z","author_association":"CONTRIBUTOR","body":"The JAVA_HOME variable is evaluated at runtime as per:\r\nhttps://github.com/elastic/windows-installers/blob/master/src/Elastic.Configuration/EnvironmentBased/Java/JavaConfiguration.cs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392068981","html_url":"https://github.com/elastic/elasticsearch/issues/30720#issuecomment-392068981","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30720","id":392068981,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjA2ODk4MQ==","user":{"login":"Mpdreamz","id":245275,"node_id":"MDQ6VXNlcjI0NTI3NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/245275?v=4","gravatar_id":"","url":"https://api.github.com/users/Mpdreamz","html_url":"https://github.com/Mpdreamz","followers_url":"https://api.github.com/users/Mpdreamz/followers","following_url":"https://api.github.com/users/Mpdreamz/following{/other_user}","gists_url":"https://api.github.com/users/Mpdreamz/gists{/gist_id}","starred_url":"https://api.github.com/users/Mpdreamz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mpdreamz/subscriptions","organizations_url":"https://api.github.com/users/Mpdreamz/orgs","repos_url":"https://api.github.com/users/Mpdreamz/repos","events_url":"https://api.github.com/users/Mpdreamz/events{/privacy}","received_events_url":"https://api.github.com/users/Mpdreamz/received_events","type":"User","site_admin":false},"created_at":"2018-05-25T14:06:31Z","updated_at":"2018-05-25T14:08:37Z","author_association":"MEMBER","body":"@codebrain the OP is using the zip for service installation not the MSI.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392098864","html_url":"https://github.com/elastic/elasticsearch/issues/30720#issuecomment-392098864","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30720","id":392098864,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjA5ODg2NA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-05-25T15:43:04Z","updated_at":"2018-05-25T15:43:04Z","author_association":"MEMBER","body":"@jasontedor The docs linked in the original issue comment do state JAVA_HOME may be set locally before installing the service:\r\n\r\n> The Elasticsearch service can be configured prior to installation by setting the following environment variables (either using the set command from the command line, or through the System Properties->Environment Variables GUI).\r\n\r\nWhile we could update the docs to include an exception for JAVA_HOME, I find it odd that the other environment variables there would not also want the same treatment (eg ES_PATH_CONF or ES_JAVA_OPTS).  Is it really that much trouble to run service installation again if changing JAVA_HOME?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392127954","html_url":"https://github.com/elastic/elasticsearch/issues/30720#issuecomment-392127954","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30720","id":392127954,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjEyNzk1NA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-05-25T17:31:48Z","updated_at":"2018-05-25T17:31:48Z","author_association":"MEMBER","body":"I would support that change, yes: that is, we would no longer use `%%JAVA_HOME%%` here and require that if you want to change any environment variables you have to manually manage the service or reinstall, we would only use what is defined at install time.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395334224","html_url":"https://github.com/elastic/elasticsearch/issues/30720#issuecomment-395334224","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30720","id":395334224,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTMzNDIyNA==","user":{"login":"agonzalezgaliana","id":39406939,"node_id":"MDQ6VXNlcjM5NDA2OTM5","avatar_url":"https://avatars0.githubusercontent.com/u/39406939?v=4","gravatar_id":"","url":"https://api.github.com/users/agonzalezgaliana","html_url":"https://github.com/agonzalezgaliana","followers_url":"https://api.github.com/users/agonzalezgaliana/followers","following_url":"https://api.github.com/users/agonzalezgaliana/following{/other_user}","gists_url":"https://api.github.com/users/agonzalezgaliana/gists{/gist_id}","starred_url":"https://api.github.com/users/agonzalezgaliana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agonzalezgaliana/subscriptions","organizations_url":"https://api.github.com/users/agonzalezgaliana/orgs","repos_url":"https://api.github.com/users/agonzalezgaliana/repos","events_url":"https://api.github.com/users/agonzalezgaliana/events{/privacy}","received_events_url":"https://api.github.com/users/agonzalezgaliana/received_events","type":"User","site_admin":false},"created_at":"2018-06-07T08:17:54Z","updated_at":"2018-06-07T08:17:54Z","author_association":"NONE","body":"Hi everybody,\r\n\r\nmay I ask about the status of this issue?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/462684541","html_url":"https://github.com/elastic/elasticsearch/issues/30720#issuecomment-462684541","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30720","id":462684541,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MjY4NDU0MQ==","user":{"login":"agonzalezgaliana","id":39406939,"node_id":"MDQ6VXNlcjM5NDA2OTM5","avatar_url":"https://avatars0.githubusercontent.com/u/39406939?v=4","gravatar_id":"","url":"https://api.github.com/users/agonzalezgaliana","html_url":"https://github.com/agonzalezgaliana","followers_url":"https://api.github.com/users/agonzalezgaliana/followers","following_url":"https://api.github.com/users/agonzalezgaliana/following{/other_user}","gists_url":"https://api.github.com/users/agonzalezgaliana/gists{/gist_id}","starred_url":"https://api.github.com/users/agonzalezgaliana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agonzalezgaliana/subscriptions","organizations_url":"https://api.github.com/users/agonzalezgaliana/orgs","repos_url":"https://api.github.com/users/agonzalezgaliana/repos","events_url":"https://api.github.com/users/agonzalezgaliana/events{/privacy}","received_events_url":"https://api.github.com/users/agonzalezgaliana/received_events","type":"User","site_admin":false},"created_at":"2019-02-12T09:30:06Z","updated_at":"2019-02-12T09:30:06Z","author_association":"NONE","body":"Tested again with version 6.6.0 with the same results. Would it be possible to know the current status? Is there a plan to fix the issue? Thanks.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/464609334","html_url":"https://github.com/elastic/elasticsearch/issues/30720#issuecomment-464609334","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30720","id":464609334,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDYwOTMzNA==","user":{"login":"agonzalezgaliana","id":39406939,"node_id":"MDQ6VXNlcjM5NDA2OTM5","avatar_url":"https://avatars0.githubusercontent.com/u/39406939?v=4","gravatar_id":"","url":"https://api.github.com/users/agonzalezgaliana","html_url":"https://github.com/agonzalezgaliana","followers_url":"https://api.github.com/users/agonzalezgaliana/followers","following_url":"https://api.github.com/users/agonzalezgaliana/following{/other_user}","gists_url":"https://api.github.com/users/agonzalezgaliana/gists{/gist_id}","starred_url":"https://api.github.com/users/agonzalezgaliana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agonzalezgaliana/subscriptions","organizations_url":"https://api.github.com/users/agonzalezgaliana/orgs","repos_url":"https://api.github.com/users/agonzalezgaliana/repos","events_url":"https://api.github.com/users/agonzalezgaliana/events{/privacy}","received_events_url":"https://api.github.com/users/agonzalezgaliana/received_events","type":"User","site_admin":false},"created_at":"2019-02-18T06:58:33Z","updated_at":"2019-02-18T06:58:33Z","author_association":"NONE","body":"Finally we were able to bypass the problem by removing the double percent signs around JAVA_HOME in the call to the service manager. In this way we resolve the path before service starts running.\r\n\r\n`--Jvm \"%JAVA_HOME%%JVM_DLL%\"`","performed_via_github_app":null}]