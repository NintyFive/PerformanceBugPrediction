{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28583","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28583/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28583/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28583/events","html_url":"https://github.com/elastic/elasticsearch/issues/28583","id":295625686,"node_id":"MDU6SXNzdWUyOTU2MjU2ODY=","number":28583,"title":"parsing issue","user":{"login":"scratchy","id":906544,"node_id":"MDQ6VXNlcjkwNjU0NA==","avatar_url":"https://avatars3.githubusercontent.com/u/906544?v=4","gravatar_id":"","url":"https://api.github.com/users/scratchy","html_url":"https://github.com/scratchy","followers_url":"https://api.github.com/users/scratchy/followers","following_url":"https://api.github.com/users/scratchy/following{/other_user}","gists_url":"https://api.github.com/users/scratchy/gists{/gist_id}","starred_url":"https://api.github.com/users/scratchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scratchy/subscriptions","organizations_url":"https://api.github.com/users/scratchy/orgs","repos_url":"https://api.github.com/users/scratchy/repos","events_url":"https://api.github.com/users/scratchy/events{/privacy}","received_events_url":"https://api.github.com/users/scratchy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-02-08T18:52:15Z","updated_at":"2018-02-08T19:25:59Z","closed_at":"2018-02-08T19:25:59Z","author_association":"NONE","active_lock_reason":null,"body":"Hello \r\n\r\nhaving issues during inserts sadly i cant reproduce it. \r\n\r\nTheres to much throughput that i can figure out whats exactly the document.\r\n\r\nHeres how we feed the bulkProcessor:\r\n```\r\n\r\nbyte data[] = JSONWrapper.toJSON_GSON(record).getBytes();\r\nIndexRequest req = new IndexRequest(indexname, \"main\", \"U-\" + record.asin).routing(\"U-\" + record.asin).source(data, XContentType.JSON);\r\nbulkProcessor.add(req);\r\n```\r\n\r\nThe code above works without any trouble running it for different documents.\r\n\r\nAlso when i index the document with BulkProcessor again it seems not to happen anymore.\r\n\r\nRunning on 6.2.0, using BulkProcessor and GSON to send the jsons (excluding nulls)\r\n\r\n`\r\n\u0001\u000Ffailed to parse\u0001(\u0001Cfailed to parse [null]: expected text or object, but got VALUE_NULL(4org.elasticsearch.index.mapper.CompletionFieldMapper\u0001\u001ACompletionFieldMapper.java\u0005parse�\u00044org.elasticsearch.index.mapper.CompletionFieldMapper\u0001\u001ACompletionFieldMapper.java\u0005parse�\u0003-org.elasticsearch.index.mapper.DocumentParser\u0001\u0013DocumentParser.java\u0012parseObjectOrField�\u0003-org.elasticsearch.index.mapper.DocumentParser\u0001\u0013DocumentParser.java parseArray�\u0004-org.elasticsearch.index.mapper.DocumentParser\u0001\u0013DocumentParser.java\u0010innerParseObject�\u0003-org.elasticsearch.index.mapper.DocumentParser\u0001\u0013DocumentParser.java\u0013parseObjectOrNested�\u0003-org.elasticsearch.index.mapper.DocumentParser\u0001\u0013DocumentParser.java\u0015internalParseDocument]-org.elasticsearch.index.mapper.DocumentParser\u0001\u0013DocumentParser.java parseDocumentC-org.elasticsearch.index.mapper.DocumentMapper\u0001\u0013DocumentMapper.java\u0005parse�\u0002(org.elasticsearch.index.shard.IndexShard\u0001\u000FIndexShard.java\fprepareIndex�\u0005(org.elasticsearch.index.shard.IndexShard\u0001\u000FIndexShard.java\u0013applyIndexOperation�\u0005(org.elasticsearch.index.shard.IndexShard\u0001\u000FIndexShard.java\u001CapplyIndexOperationOnPrimary�\u00056org.elasticsearch.action.bulk.TransportShardBulkAction\u0001\u001DTransportShardBulkAction.java\u001CexecuteIndexRequestOnPrimary�\u00046org.elasticsearch.action.bulk.TransportShardBulkAction\u0001\u001DTransportShardBulkAction.java\u0013executeIndexRequest�\u00016org.elasticsearch.action.bulk.TransportShardBulkAction\u0001\u001DTransportShardBulkAction.java\u0016executeBulkItemRequest�\u00016org.elasticsearch.action.bulk.TransportShardBulkAction\u0001\u001DTransportShardBulkAction.java\u0010performOnPrimary{6org.elasticsearch.action.bulk.TransportShardBulkAction\u0001\u001DTransportShardBulkAction.java\u0017shardOperationOnPrimaryn6org.elasticsearch.action.bulk.TransportShardBulkAction\u0001\u001DTransportShardBulkAction.java\u0017shardOperationOnPrimaryH]org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryShardReference\u0001\u001FTransportReplicationAction.java\u0007perform�\b]org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryShardReference\u0001\u001FTransportReplicationAction.java\u0007perform�\u0007Aorg.elasticsearch.action.support.replication.ReplicationOperation\u0001\u0019ReplicationOperation.java\u0007executegZorg.elasticsearch.action.support.replication.TransportReplicationAction$AsyncPrimaryAction\u0001\u001FTransportReplicationAction.java onResponse�\u0002Zorg.elasticsearch.action.support.replication.TransportReplicationAction$AsyncPrimaryAction\u0001\u001FTransportReplicationAction.java onResponse�\u0002Iorg.elasticsearch.action.support.replication.TransportReplicationAction$1\u0001\u001FTransportReplicationAction.java onResponse�\u0007Iorg.elasticsearch.action.support.replication.TransportReplicationAction$1\u0001\u001FTransportReplicationAction.java onResponse�\u00078org.elasticsearch.index.shard.IndexShardOperationPermits\u0001\u001FIndexShardOperationPermits.java\u0007acquire�\u0001(org.elasticsearch.index.shard.IndexShard\u0001\u000FIndexShard.java\u001DacquirePrimaryOperationPermit�\u0011Gorg.elasticsearch.action.support.replication.TransportReplicationAction\u0001\u001FTransportReplicationAction.java\u001CacquirePrimaryShardReference�\u0007Gorg.elasticsearch.action.support.replication.TransportReplicationAction\u0001\u001FTransportReplicationAction.java access$500bZorg.elasticsearch.action.support.replication.TransportReplicationAction$AsyncPrimaryAction\u0001\u001FTransportReplicationAction.java\u0005doRun�\u00029org.elasticsearch.common.util.concurrent.AbstractRunnable\u0001\u0015AbstractRunnable.java\u0003run%horg.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryOperationTransportHandler\u0001\u001FTransportReplicationAction.java\u000FmessageReceived�\u0002horg.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryOperationTransportHandler\u0001\u001FTransportReplicationAction.java\u000FmessageReceived�\u00022org.elasticsearch.transport.RequestHandlerRegistry\u0001\u001BRequestHandlerRegistry.java\u0016processMessageReceivedB.org.elasticsearch.transport.TransportService$7\u0001\u0015TransportService.java\u0005doRun�\u0005Xorg.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable\u0001\u0012ThreadContext.java\u0005doRun�\u00049org.elasticsearch.common.util.concurrent.AbstractRunnable\u0001\u0015AbstractRunnable.java\u0003run%'java.util.concurrent.ThreadPoolExecutor\u0001\u0017ThreadPoolExecutor.java runWorker�\b.java.util.concurrent.ThreadPoolExecutor$Worker\u0001\u0017ThreadPoolExecutor.java\u0003run�\u0004\u0010java.lang.Thread\u0001\u000BThread.java\u0003run�\u0005\u0001\u00013\"-org.elasticsearch.index.mapper.DocumentParser\u0001\u0013DocumentParser.java\u001CwrapInMapperParsingException�\u0001-org.elasticsearch.index.mapper.DocumentParser\u0001\u0013DocumentParser.java parseDocumentF-org.elasticsearch.index.mapper.DocumentMapper\u0001\u0013DocumentMapper.java\u0005parse�\u0002(org.elasticsearch.index.shard.IndexShard\u0001\u000FIndexShard.java\fprepareIndex�\u0005(org.elasticsearch.index.shard.IndexShard\u0001\u000FIndexShard.java\u0013applyIndexOperation�\u0005(org.elasticsearch.index.shard.IndexShard\u0001\u000FIndexShard.java\u001CapplyIndexOperationOnPrimary�\u00056org.elasticsearch.action.bulk.TransportShardBulkAction\u0001\u001DTransportShardBulkAction.java\u001CexecuteIndexRequestOnPrimary�\u00046org.elasticsearch.action.bulk.TransportShardBulkAction\u0001\u001DTransportShardBulkAction.java\u0013executeIndexRequest�\u00016org.elasticsearch.action.bulk.TransportShardBulkAction\u0001\u001DTransportShardBulkAction.java\u0016executeBulkItemRequest�\u00016org.elasticsearch.action.bulk.TransportShardBulkAction\u0001\u001DTransportShardBulkAction.java\u0010performOnPrimary{6org.elasticsearch.action.bulk.TransportShardBulkAction\u0001\u001DTransportShardBulkAction.java\u0017shardOperationOnPrimaryn6org.elasticsearch.action.bulk.TransportShardBulkAction\u0001\u001DTransportShardBulkAction.java\u0017shardOperationOnPrimaryH]org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryShardReference\u0001\u001FTransportReplicationAction.java\u0007perform�\b]org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryShardReference\u0001\u001FTransportReplicationAction.java\u0007perform�\u0007Aorg.elasticsearch.action.support.replication.ReplicationOperation\u0001\u0019ReplicationOperation.java\u0007executegZorg.elasticsearch.action.support.replication.TransportReplicationAction$AsyncPrimaryAction\u0001\u001FTransportReplicationAction.java onResponse�\u0002Zorg.elasticsearch.action.support.replication.TransportReplicationAction$AsyncPrimaryAction\u0001\u001FTransportReplicationAction.java onResponse�\u0002Iorg.elasticsearch.action.support.replication.TransportReplicationAction$1\u0001\u001FTransportReplicationAction.java onResponse�\u0007Iorg.elasticsearch.action.support.replication.TransportReplicationAction$1\u0001\u001FTransportReplicationAction.java onResponse�\u00078org.elasticsearch.index.shard.IndexShardOperationPermits\u0001\u001FIndexShardOperationPermits.java\u0007acquire�\u0001(org.elasticsearch.index.shard.IndexShard\u0001\u000FIndexShard.java\u001DacquirePrimaryOperationPermit�\u0011Gorg.elasticsearch.action.support.replication.TransportReplicationAction\u0001\u001FTransportReplicationAction.java\u001CacquirePrimaryShardReference�\u0007Gorg.elasticsearch.action.support.replication.TransportReplicationAction\u0001\u001FTransportReplicationAction.java access$500bZorg.elasticsearch.action.support.replication.TransportReplicationAction$AsyncPrimaryAction\u0001\u001FTransportReplicationAction.java\u0005doRun�\u00029org.elasticsearch.common.util.concurrent.AbstractRunnable\u0001\u0015AbstractRunnable.java\u0003run%horg.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryOperationTransportHandler\u0001\u001FTransportReplicationAction.java\u000FmessageReceived�\u0002horg.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryOperationTransportHandler\u0001\u001FTransportReplicationAction.java\u000FmessageReceived�\u00022org.elasticsearch.transport.RequestHandlerRegistry\u0001\u001BRequestHandlerRegistry.java\u0016processMessageReceivedB.org.elasticsearch.transport.TransportService$7\u0001\u0015TransportService.java\u0005doRun�\u0005Xorg.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable\u0001\u0012ThreadContext.java\u0005doRun�\u00049org.elasticsearch.common.util.concurrent.AbstractRunnable\u0001\u0015AbstractRunnable.java\u0003run%'java.util.concurrent.ThreadPoolExecutor\u0001\u0017ThreadPoolExecutor.java runWorker�\b.java.util.concurrent.ThreadPoolExecutor$Worker\u0001\u0017ThreadPoolExecutor.java\u0003run�\u0004\u0010java.lang.Thread\u0001\u000BThread.java\u0003run�\u0005\u0003`","closed_by":{"login":"scratchy","id":906544,"node_id":"MDQ6VXNlcjkwNjU0NA==","avatar_url":"https://avatars3.githubusercontent.com/u/906544?v=4","gravatar_id":"","url":"https://api.github.com/users/scratchy","html_url":"https://github.com/scratchy","followers_url":"https://api.github.com/users/scratchy/followers","following_url":"https://api.github.com/users/scratchy/following{/other_user}","gists_url":"https://api.github.com/users/scratchy/gists{/gist_id}","starred_url":"https://api.github.com/users/scratchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scratchy/subscriptions","organizations_url":"https://api.github.com/users/scratchy/orgs","repos_url":"https://api.github.com/users/scratchy/repos","events_url":"https://api.github.com/users/scratchy/events{/privacy}","received_events_url":"https://api.github.com/users/scratchy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}