{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/63504","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63504/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63504/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63504/events","html_url":"https://github.com/elastic/elasticsearch/issues/63504","id":717512030,"node_id":"MDU6SXNzdWU3MTc1MTIwMzA=","number":63504,"title":"Accessing _id field in plugin leads to gibberish","user":{"login":"cjmcgraw","id":4107771,"node_id":"MDQ6VXNlcjQxMDc3NzE=","avatar_url":"https://avatars0.githubusercontent.com/u/4107771?v=4","gravatar_id":"","url":"https://api.github.com/users/cjmcgraw","html_url":"https://github.com/cjmcgraw","followers_url":"https://api.github.com/users/cjmcgraw/followers","following_url":"https://api.github.com/users/cjmcgraw/following{/other_user}","gists_url":"https://api.github.com/users/cjmcgraw/gists{/gist_id}","starred_url":"https://api.github.com/users/cjmcgraw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cjmcgraw/subscriptions","organizations_url":"https://api.github.com/users/cjmcgraw/orgs","repos_url":"https://api.github.com/users/cjmcgraw/repos","events_url":"https://api.github.com/users/cjmcgraw/events{/privacy}","received_events_url":"https://api.github.com/users/cjmcgraw/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":2042400575,"node_id":"MDU6TGFiZWwyMDQyNDAwNTc1","url":"https://api.github.com/repos/elastic/elasticsearch/labels/needs:triage","name":"needs:triage","color":"c5def5","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"assignees":[{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2020-10-08T16:57:53Z","updated_at":"2020-10-17T00:30:03Z","closed_at":"2020-10-12T11:02:34Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\nGitHub is reserved for bug reports and feature requests; it is not the place\r\nfor general questions. If you have a question or an unconfirmed bug , please\r\nvisit the [forums](https://discuss.elastic.co/c/elasticsearch).  Please also\r\ncheck your OS is [supported](https://www.elastic.co/support/matrix#show_os).\r\nIf it is not, the issue is likely to be closed.\r\n\r\nFor security vulnerabilities please only send reports to security@elastic.co.\r\nSee https://www.elastic.co/community/security for more information.\r\n\r\nPlease fill in the following details to help us reproduce the bug:\r\n-->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\nVersion: 7.9.0, Build: default/docker/a479a2a7fce0389512d6a9361301708b92dff667/2020-08-11T21:36:48.204330Z, JVM: 14.0.1\r\n\r\n**Plugins installed**: [custom]\r\n\r\n**JVM version** (`java -version`): \r\nopenjdk 14.0.1 2020-04-14\r\nOpenJDK Runtime Environment AdoptOpenJDK (build 14.0.1+7)\r\nOpenJDK 64-Bit Server VM AdoptOpenJDK (build 14.0.1+7, mixed mode, sharing)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): \r\nLinux 1ed57b24faa6 4.19.76-linuxkit #1 SMP Tue May 26 11:42:35 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nUnexpected outcome when attempting to deserialize _id field\r\n\r\n**Steps to reproduce**:\r\nInternal to ES in a rescore plugin do the following:\r\n\r\n```java\r\n public TopDocs rescore(TopDocs topDocs, IndexSearcher searcher, RescoreContext rescoreContext) throws IOException {\r\n    ScoreDoc scoreDoc = topDocs.scoreDocs[0];\r\n    Document doc = searcher.doc(scoreDoc.doc);\r\n    log.info(\"_id = \" + doc.getField(\"_id\").binaryValue().utf8ToString());\r\n    return topDocs\r\n}\r\n```\r\n\r\nWatching the log we get unexpected id values, that do not match up with _id values from ES:\r\n\r\n```\r\n_id = ??i\r\n```\r\n\r\nEither this isn't working as intended, or there is an issue with mapping es _id's to lucene documents.\r\n\r\n\r\n","closed_by":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"performed_via_github_app":null}