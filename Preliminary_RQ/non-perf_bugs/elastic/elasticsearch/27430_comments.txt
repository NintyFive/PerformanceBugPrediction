[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/345260379","html_url":"https://github.com/elastic/elasticsearch/issues/27430#issuecomment-345260379","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27430","id":345260379,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTI2MDM3OQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-11-17T14:36:47Z","updated_at":"2017-11-17T14:36:47Z","author_association":"MEMBER","body":"@jdconrad The node is dying because of the class format error and we consider all errors fatal. Is the class format error expected here? Can we protect against it and give a clearer error message to the user without the node dying?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/345755766","html_url":"https://github.com/elastic/elasticsearch/issues/27430#issuecomment-345755766","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27430","id":345755766,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTc1NTc2Ng==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2017-11-20T16:48:06Z","updated_at":"2017-11-20T16:48:06Z","author_association":"CONTRIBUTOR","body":"@jasontedor class format errors should never happen.  However, there was a similar issue I was looking into recently (https://github.com/elastic/elasticsearch/issues/27210).  I meant to get back to this.  So I think I can fix this specific bug and will take a look into it this week.  As far the as the class format error goes, we can certainly prevent the node from dying, which shouldn't happen.  However, since these errors are unexpected it's not really possible to give clearer error messaging without fixing each bug on a case by case basis other than saying the user can file a bug report or something along those lines.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/345762575","html_url":"https://github.com/elastic/elasticsearch/issues/27430#issuecomment-345762575","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27430","id":345762575,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTc2MjU3NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-11-20T17:10:19Z","updated_at":"2017-11-20T17:10:19Z","author_association":"MEMBER","body":"Okay, so this looks identical: the problem is the assignment from `void` (the invocation of `Collections#sort`). So there's a workaround for now: stop assigning from `void`, and then we need a fix in Painless to catch this at compilation time. I'm closing this as a duplicate of #27210.","performed_via_github_app":null}]