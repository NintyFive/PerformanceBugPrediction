{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/37255","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37255/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37255/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37255/events","html_url":"https://github.com/elastic/elasticsearch/issues/37255","id":397305092,"node_id":"MDU6SXNzdWUzOTczMDUwOTI=","number":37255,"title":"“order by” translate error","user":{"login":"jjzhang4","id":20834793,"node_id":"MDQ6VXNlcjIwODM0Nzkz","avatar_url":"https://avatars2.githubusercontent.com/u/20834793?v=4","gravatar_id":"","url":"https://api.github.com/users/jjzhang4","html_url":"https://github.com/jjzhang4","followers_url":"https://api.github.com/users/jjzhang4/followers","following_url":"https://api.github.com/users/jjzhang4/following{/other_user}","gists_url":"https://api.github.com/users/jjzhang4/gists{/gist_id}","starred_url":"https://api.github.com/users/jjzhang4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjzhang4/subscriptions","organizations_url":"https://api.github.com/users/jjzhang4/orgs","repos_url":"https://api.github.com/users/jjzhang4/repos","events_url":"https://api.github.com/users/jjzhang4/events{/privacy}","received_events_url":"https://api.github.com/users/jjzhang4/received_events","type":"User","site_admin":false},"labels":[{"id":912794284,"node_id":"MDU6TGFiZWw5MTI3OTQyODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Query%20Languages/SQL","name":":Query Languages/SQL","color":"0e8a16","default":false,"description":"SQL querying"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-01-09T10:27:29Z","updated_at":"2019-01-09T10:38:47Z","closed_at":"2019-01-09T10:38:47Z","author_association":"NONE","active_lock_reason":null,"body":"Hi，\r\n   I want to order by field ‘’num‘’ in SQL statement, but it doesn't work. The ordered field is group by key “release”.\r\nsql statement：\r\n{\"query\":\"select release,num from (select release,count(distinct id) as num from table group by release) as test1 order by num ASC \"}\r\nthe translated dsl：\r\n{\"size\":0,\"_source\":false,\"stored_fields\":\"_none_\",\"aggregations\":{\"groupby\":{\"composite\":{\"size\":1000,\"sources\":[{\"773\":{\"terms\":{\"field\":\"release\",\"missing_bucket\":false,\"order\":\"asc\"}}}]},\"aggregations\":{\"780\":{\"cardinality\":{\"field\":\"id\"}}}}}}\r\nI want dsl：\r\n{\"size\":0,\"_source\":false,\"stored_fields\":\"_none_\",\"aggregations\":{\"groupby\":{\"composite\":{\"size\":1000,\"sources\":[{\"773\":{\"terms\":{\"field\":\"release\",\"missing_bucket\":false,\"order\":{\"id\":\"asc\"}}}}]},\"aggregations\":{\"780\":{\"cardinality\":{\"field\":\"release\"}}}}}}\r\n\r\n","closed_by":{"login":"matriv","id":5058131,"node_id":"MDQ6VXNlcjUwNTgxMzE=","avatar_url":"https://avatars1.githubusercontent.com/u/5058131?v=4","gravatar_id":"","url":"https://api.github.com/users/matriv","html_url":"https://github.com/matriv","followers_url":"https://api.github.com/users/matriv/followers","following_url":"https://api.github.com/users/matriv/following{/other_user}","gists_url":"https://api.github.com/users/matriv/gists{/gist_id}","starred_url":"https://api.github.com/users/matriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matriv/subscriptions","organizations_url":"https://api.github.com/users/matriv/orgs","repos_url":"https://api.github.com/users/matriv/repos","events_url":"https://api.github.com/users/matriv/events{/privacy}","received_events_url":"https://api.github.com/users/matriv/received_events","type":"User","site_admin":false},"performed_via_github_app":null}