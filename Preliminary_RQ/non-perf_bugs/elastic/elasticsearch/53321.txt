{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/53321","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53321/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53321/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53321/events","html_url":"https://github.com/elastic/elasticsearch/issues/53321","id":578278956,"node_id":"MDU6SXNzdWU1NzgyNzg5NTY=","number":53321,"title":"ILM:  Ability to trigger one-off actions","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"labels":[{"id":912828538,"node_id":"MDU6TGFiZWw5MTI4Mjg1Mzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/ILM+SLM","name":":Core/Features/ILM+SLM","color":"0e8a16","default":false,"description":"Index and Snapshot lifecycle management"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-03-10T01:24:50Z","updated_at":"2020-03-10T14:50:14Z","closed_at":"2020-03-10T14:50:09Z","author_association":"MEMBER","active_lock_reason":null,"body":"There are certain situations where users will want to run one-off actions for ILM-managed indices.  \r\n\r\nTo do this using ILM, it's not that straightforward.  You will have to create a new policy with just the actions desired and make sure that the rest of the lifecycle flow can continue smoothly (i.e. any duplicate actions being run again are not disruptive).  Alternatively, create a new policy, update the policy reference in index settings and use the advanced move step API (with the same caution).\r\n\r\nExample 1:\r\n\r\n- User have hundreds of indices managed by ILM where they had an ILM policy with no shrink option in place.  Now they want to run shrink against these indices due to oversharding (which are now in cold/completed phase but still have weeks to go before they will enter the delete phase).\r\n\r\nIt will be nice if there's a way to instruct ILM to simply run shrink (including all the substeps to prepare it for shrink, etc..) against the indices as a one-off action.\r\n\r\nExample 2:\r\n\r\n- Force merge can be expensive for large indices.  With ILM, you can't tell ES to only trigger force merge during a specific time period for it will always be based on min_age.  \r\n\r\nIt will be nice if there's a way to instruct ILM to simply run force-merge as a one-off action.\r\n\r\nRelated: https://github.com/elastic/elasticsearch/issues/37325","closed_by":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"performed_via_github_app":null}