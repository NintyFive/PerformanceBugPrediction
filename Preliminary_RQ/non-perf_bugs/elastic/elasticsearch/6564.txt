{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/6564","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6564/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6564/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6564/events","html_url":"https://github.com/elastic/elasticsearch/issues/6564","id":36079332,"node_id":"MDU6SXNzdWUzNjA3OTMzMg==","number":6564,"title":"Add shards filter","user":{"login":"shadow000fire","id":1693492,"node_id":"MDQ6VXNlcjE2OTM0OTI=","avatar_url":"https://avatars3.githubusercontent.com/u/1693492?v=4","gravatar_id":"","url":"https://api.github.com/users/shadow000fire","html_url":"https://github.com/shadow000fire","followers_url":"https://api.github.com/users/shadow000fire/followers","following_url":"https://api.github.com/users/shadow000fire/following{/other_user}","gists_url":"https://api.github.com/users/shadow000fire/gists{/gist_id}","starred_url":"https://api.github.com/users/shadow000fire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shadow000fire/subscriptions","organizations_url":"https://api.github.com/users/shadow000fire/orgs","repos_url":"https://api.github.com/users/shadow000fire/repos","events_url":"https://api.github.com/users/shadow000fire/events{/privacy}","received_events_url":"https://api.github.com/users/shadow000fire/received_events","type":"User","site_admin":false},"labels":[{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2014-06-19T13:44:10Z","updated_at":"2015-11-21T15:07:35Z","closed_at":"2015-11-21T15:07:35Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I'd like to have a shards_filter that acts very similar to the indices filter (http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-indices-filter.html) where a different filter is executed on different shards.  Instead of specifying index names, you would specify a shard number or routing value.  \n\nWhen specifying shard numbers, the shard would only execute the filter if its own shard # is in the list.  When specifying routing values, the shard would only execute the filter if one of the values in the list would be routed to this shard.  \n\nAlso, the node that receives the initial SearchRequest should route the request based on the \"shards\" key.\n\nAn example request that uses shard numbers\n{\n    \"indices\" : {\n        \"shards\" : [0,1],\n        \"filter\" : {\n            \"term\" : { \"tag\" : \"wow\" }\n        },\n        \"no_match_filter\" : {\n            \"term\" : { \"tag\" : \"kow\" }\n        }\n    }\n}\n\nAn example request that uses routing values\n{\n    \"indices\" : {\n        \"routing\" : [\"CompanyA\"],\n        \"filter\" : {\n            \"term\" : { \"tag\" : \"wow\" }\n        },\n        \"no_match_filter\" : {\n            \"term\" : { \"tag\" : \"kow\" }\n        }\n    }\n}\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}