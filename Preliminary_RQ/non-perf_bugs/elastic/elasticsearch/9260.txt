{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9260","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9260/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9260/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9260/events","html_url":"https://github.com/elastic/elasticsearch/issues/9260","id":54099384,"node_id":"MDU6SXNzdWU1NDA5OTM4NA==","number":9260,"title":"Can't free up space because there's not enough space?  ;)","user":{"login":"darkpixel","id":158380,"node_id":"MDQ6VXNlcjE1ODM4MA==","avatar_url":"https://avatars3.githubusercontent.com/u/158380?v=4","gravatar_id":"","url":"https://api.github.com/users/darkpixel","html_url":"https://github.com/darkpixel","followers_url":"https://api.github.com/users/darkpixel/followers","following_url":"https://api.github.com/users/darkpixel/following{/other_user}","gists_url":"https://api.github.com/users/darkpixel/gists{/gist_id}","starred_url":"https://api.github.com/users/darkpixel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darkpixel/subscriptions","organizations_url":"https://api.github.com/users/darkpixel/orgs","repos_url":"https://api.github.com/users/darkpixel/repos","events_url":"https://api.github.com/users/darkpixel/events{/privacy}","received_events_url":"https://api.github.com/users/darkpixel/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":157995132,"node_id":"MDU6TGFiZWwxNTc5OTUxMzI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.3.8","name":"v1.3.8","color":"dddddd","default":false,"description":null},{"id":157995054,"node_id":"MDU6TGFiZWwxNTc5OTUwNTQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.4.3","name":"v1.4.3","color":"dddddd","default":false,"description":null},{"id":127700367,"node_id":"MDU6TGFiZWwxMjc3MDAzNjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.5.0","name":"v1.5.0","color":"dddddd","default":false,"description":null},{"id":76184120,"node_id":"MDU6TGFiZWw3NjE4NDEyMA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v2.0.0-beta1","name":"v2.0.0-beta1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"assignees":[{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2015-01-12T20:00:23Z","updated_at":"2015-01-13T22:10:04Z","closed_at":"2015-01-13T22:01:34Z","author_association":"NONE","active_lock_reason":null,"body":"One of my nodes is 'low' on space.  Down to ~16 GB.\n\nSo I tried to run curator to remove older logs and I get the following message:\n\n```\n[2015-01-12 11:53:50,250][INFO ][cluster.metadata         ] [tetrad] [logstash-2014.12.13] deleting index\n[2015-01-12 11:53:50,251][DEBUG][action.admin.indices.delete] [tetrad] [logstash-2014.12.13] failed to delete index\njava.lang.IllegalStateException: Free bytes [4518450191893] cannot be less than 0 or greater than total bytes [4509977353216]\n        at org.elasticsearch.cluster.DiskUsage.<init>(DiskUsage.java:36)\n        at org.elasticsearch.cluster.routing.allocation.decider.DiskThresholdDecider.canRemain(DiskThresholdDecider.java:439)\n        at org.elasticsearch.cluster.routing.allocation.decider.AllocationDeciders.canRemain(AllocationDeciders.java:105)\n        at org.elasticsearch.cluster.routing.allocation.AllocationService.moveShards(AllocationService.java:257)\n        at org.elasticsearch.cluster.routing.allocation.AllocationService.reroute(AllocationService.java:223)\n        at org.elasticsearch.cluster.routing.allocation.AllocationService.reroute(AllocationService.java:160)\n        at org.elasticsearch.cluster.routing.allocation.AllocationService.reroute(AllocationService.java:146)\n        at org.elasticsearch.cluster.metadata.MetaDataDeleteIndexService$2.execute(MetaDataDeleteIndexService.java:130)\n        at org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:329)\n        at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:153)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at java.lang.Thread.run(Thread.java:745)\n[2015-01-12 11:53:56,767][INFO ][cluster.routing.allocation.decider] [tetrad] low disk watermark [15%] exceeded on [Pc_MAIWOQVe6qKNtKVIYpw][zefram] free: 16.3gb[14.5%], replicas will not be assigned to this node\n```\n\nThe actual error from curator is:\n\n```\nroot@tetrad:~# /root/.virtualenvs/curator/bin/curator --host localhost delete --older-than 10;\n2015-01-12 11:53:50,238 INFO      Job starting...\n2015-01-12 11:53:50,241 INFO      Deleting indices...\nTraceback (most recent call last):\n  File \"/root/.virtualenvs/curator/bin/curator\", line 9, in <module>\n    load_entry_point('elasticsearch-curator==2.1.1', 'console_scripts', 'curator')()\n  File \"/root/.virtualenvs/curator/local/lib/python2.7/site-packages/curator/curator_script.py\", line 364, in main\n    arguments.func(client, **argdict)\n  File \"/root/.virtualenvs/curator/local/lib/python2.7/site-packages/curator/curator.py\", line 1025, in delete\n    _op_loop(client, matching_indices, op=delete_index, dry_run=dry_run, **kwargs)\n  File \"/root/.virtualenvs/curator/local/lib/python2.7/site-packages/curator/curator.py\", line 767, in _op_loop\n    skipped = op(client, item, **kwargs)\n  File \"/root/.virtualenvs/curator/local/lib/python2.7/site-packages/curator/curator.py\", line 610, in delete_index\n    client.indices.delete(index=index_name)\n  File \"/root/.virtualenvs/curator/local/lib/python2.7/site-packages/elasticsearch/client/utils.py\", line 68, in _wrapped\n    return func(*args, params=params, **kwargs)\n  File \"/root/.virtualenvs/curator/local/lib/python2.7/site-packages/elasticsearch/client/indices.py\", line 188, in delete\n    params=params)\n  File \"/root/.virtualenvs/curator/local/lib/python2.7/site-packages/elasticsearch/transport.py\", line 301, in perform_request\n    status, headers, data = connection.perform_request(method, url, params, body, ignore=ignore, timeout=timeout)\n  File \"/root/.virtualenvs/curator/local/lib/python2.7/site-packages/elasticsearch/connection/http_urllib3.py\", line 82, in perform_request\n    self._raise_error(response.status, raw_data)\n  File \"/root/.virtualenvs/curator/local/lib/python2.7/site-packages/elasticsearch/connection/base.py\", line 102, in _raise_error\n    raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)\nelasticsearch.exceptions.TransportError: TransportError(500, u'IllegalStateException[Free bytes [4518450191893] cannot be less than 0 or greater than total bytes [4509977353216]]')\nroot@tetrad:~# \n```\n","closed_by":{"login":"darkpixel","id":158380,"node_id":"MDQ6VXNlcjE1ODM4MA==","avatar_url":"https://avatars3.githubusercontent.com/u/158380?v=4","gravatar_id":"","url":"https://api.github.com/users/darkpixel","html_url":"https://github.com/darkpixel","followers_url":"https://api.github.com/users/darkpixel/followers","following_url":"https://api.github.com/users/darkpixel/following{/other_user}","gists_url":"https://api.github.com/users/darkpixel/gists{/gist_id}","starred_url":"https://api.github.com/users/darkpixel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darkpixel/subscriptions","organizations_url":"https://api.github.com/users/darkpixel/orgs","repos_url":"https://api.github.com/users/darkpixel/repos","events_url":"https://api.github.com/users/darkpixel/events{/privacy}","received_events_url":"https://api.github.com/users/darkpixel/received_events","type":"User","site_admin":false},"performed_via_github_app":null}