{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28596","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28596/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28596/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28596/events","html_url":"https://github.com/elastic/elasticsearch/issues/28596","id":295798234,"node_id":"MDU6SXNzdWUyOTU3OTgyMzQ=","number":28596,"title":"Should there be a global `max_concurrent_shard_requests` cluster setting?","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-02-09T09:01:42Z","updated_at":"2019-03-01T13:02:06Z","closed_at":"2018-02-13T08:28:42Z","author_association":"MEMBER","active_lock_reason":null,"body":"Search requests have a query parameter called `max_concurrent_shard_requests` which limits the number of shards that will be searched concurrently. At the moment this can be set per request and if not set it defaults to `min(256, nodeCount * default(index.number_of_shards))`. `default(index.number_of_shards)` means the default value of the `index.number_of_shards` settings which itself defaults to 5.\r\n\r\nI am wondering if it is a good idea to allow admins to change this default using a `search.default.max_concurrent_shard_requests` cluster setting so they can control this on across all requests knowing the behaviour of their cluster. We can make the default of this cluster setting the same as the current default for the query parameter.\r\n\r\nI had initially considered this to be better as an index setting but then realised that if it is an index setting and a search is performed across multiple indices, the setting value might be different on each of the indices and then its ambiguous as to which value should be chosen so I think a cluster setting is appropriate here.","closed_by":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"performed_via_github_app":null}