{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28011","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28011/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28011/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28011/events","html_url":"https://github.com/elastic/elasticsearch/issues/28011","id":284888023,"node_id":"MDU6SXNzdWUyODQ4ODgwMjM=","number":28011,"title":"Running integration tests with elasticsearch-nio fails in Intellij","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"labels":[{"id":146854632,"node_id":"MDU6TGFiZWwxNDY4NTQ2MzI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Network","name":":Distributed/Network","color":"0e8a16","default":false,"description":"Http and internode communication implementations"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"tbrooks8","id":862472,"node_id":"MDQ6VXNlcjg2MjQ3Mg==","avatar_url":"https://avatars3.githubusercontent.com/u/862472?v=4","gravatar_id":"","url":"https://api.github.com/users/tbrooks8","html_url":"https://github.com/tbrooks8","followers_url":"https://api.github.com/users/tbrooks8/followers","following_url":"https://api.github.com/users/tbrooks8/following{/other_user}","gists_url":"https://api.github.com/users/tbrooks8/gists{/gist_id}","starred_url":"https://api.github.com/users/tbrooks8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbrooks8/subscriptions","organizations_url":"https://api.github.com/users/tbrooks8/orgs","repos_url":"https://api.github.com/users/tbrooks8/repos","events_url":"https://api.github.com/users/tbrooks8/events{/privacy}","received_events_url":"https://api.github.com/users/tbrooks8/received_events","type":"User","site_admin":false},"assignees":[{"login":"tbrooks8","id":862472,"node_id":"MDQ6VXNlcjg2MjQ3Mg==","avatar_url":"https://avatars3.githubusercontent.com/u/862472?v=4","gravatar_id":"","url":"https://api.github.com/users/tbrooks8","html_url":"https://github.com/tbrooks8","followers_url":"https://api.github.com/users/tbrooks8/followers","following_url":"https://api.github.com/users/tbrooks8/following{/other_user}","gists_url":"https://api.github.com/users/tbrooks8/gists{/gist_id}","starred_url":"https://api.github.com/users/tbrooks8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbrooks8/subscriptions","organizations_url":"https://api.github.com/users/tbrooks8/orgs","repos_url":"https://api.github.com/users/tbrooks8/repos","events_url":"https://api.github.com/users/tbrooks8/events{/privacy}","received_events_url":"https://api.github.com/users/tbrooks8/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2017-12-28T10:38:07Z","updated_at":"2018-01-04T16:57:37Z","closed_at":"2018-01-04T16:57:36Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I cannot run integration tests in IntelliJ that use `elasticsearch-nio` due to security manager permissions issue. As we randomize between `elasticsearch-nio` and `mocksocket`, there's a 50% chance that any integration test such as `testAckedIndexing` fails on my machine.\r\n\r\n```\r\n[2017-12-28T08:09:29,448][TRACE][o.e.d.z.UnicastZenPing   ] [node_t1] [2] failed to ping {node_t0}{xNA81hFRSBSzYh1ndH6GqQ}{3YibJ7JqTEONm0xqSMGRdw}{127.0.0.1}{127.0.0.1:30100}\r\norg.elasticsearch.transport.ConnectTransportException: [node_t0][127.0.0.1:30100] general node connection failure\r\n\tat org.elasticsearch.transport.TcpTransport.openConnection(TcpTransport.java:661) ~[main/:?]\r\n\tat org.elasticsearch.transport.TcpTransport.openConnection(TcpTransport.java:122) ~[main/:?]\r\n\tat org.elasticsearch.test.transport.MockTransportService$LookupTestTransport.openConnection(MockTransportService.java:543) ~[main/:?]\r\n\tat org.elasticsearch.transport.TransportService.openConnection(TransportService.java:348) ~[main/:?]\r\n\tat org.elasticsearch.test.transport.MockTransportService.openConnection(MockTransportService.java:808) ~[main/:?]\r\n\tat org.elasticsearch.discovery.zen.UnicastZenPing$PingingRound.getOrConnect(UnicastZenPing.java:399) ~[main/:?]\r\n\tat org.elasticsearch.discovery.zen.UnicastZenPing$3.doRun(UnicastZenPing.java:508) [main/:?]\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:635) [main/:?]\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [main/:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_111]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_111]\r\n\tat java.lang.Thread.run(Thread.java:745) [?:1.8.0_111]\r\nCaused by: java.security.AccessControlException: access denied (\"java.net.SocketPermission\" \"127.0.0.1:30100\" \"connect,resolve\")\r\n\tat java.security.AccessControlContext.checkPermission(AccessControlContext.java:472) ~[?:1.8.0_111]\r\n\tat java.security.AccessController.checkPermission(AccessController.java:884) ~[?:1.8.0_111]\r\n\tat java.lang.SecurityManager.checkPermission(SecurityManager.java:549) ~[?:1.8.0_111]\r\n\tat java.lang.SecurityManager.checkConnect(SecurityManager.java:1051) ~[?:1.8.0_111]\r\n\tat sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:625) ~[?:?]\r\n\tat org.elasticsearch.nio.ChannelFactory$RawChannelFactory.lambda$connect$0(ChannelFactory.java:215) ~[main/:?]\r\n\tat java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_111]\r\n\tat org.elasticsearch.nio.ChannelFactory$RawChannelFactory.connect(ChannelFactory.java:215) ~[main/:?]\r\n\tat org.elasticsearch.nio.ChannelFactory$RawChannelFactory.openNioChannel(ChannelFactory.java:157) ~[main/:?]\r\n\tat org.elasticsearch.nio.ChannelFactory.openNioChannel(ChannelFactory.java:45) ~[main/:?]\r\n\tat org.elasticsearch.nio.NioGroup.openChannel(NioGroup.java:104) ~[main/:?]\r\n\tat org.elasticsearch.transport.nio.NioTransport.initiateChannel(NioTransport.java:91) ~[main/:?]\r\n\tat org.elasticsearch.transport.nio.NioTransport.initiateChannel(NioTransport.java:57) ~[main/:?]\r\n\tat org.elasticsearch.transport.TcpTransport.openConnection(TcpTransport.java:604) ~[main/:?]\r\n\t... 11 more\r\n```\r\n\r\nmaybe relates #27801","closed_by":{"login":"tbrooks8","id":862472,"node_id":"MDQ6VXNlcjg2MjQ3Mg==","avatar_url":"https://avatars3.githubusercontent.com/u/862472?v=4","gravatar_id":"","url":"https://api.github.com/users/tbrooks8","html_url":"https://github.com/tbrooks8","followers_url":"https://api.github.com/users/tbrooks8/followers","following_url":"https://api.github.com/users/tbrooks8/following{/other_user}","gists_url":"https://api.github.com/users/tbrooks8/gists{/gist_id}","starred_url":"https://api.github.com/users/tbrooks8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbrooks8/subscriptions","organizations_url":"https://api.github.com/users/tbrooks8/orgs","repos_url":"https://api.github.com/users/tbrooks8/repos","events_url":"https://api.github.com/users/tbrooks8/events{/privacy}","received_events_url":"https://api.github.com/users/tbrooks8/received_events","type":"User","site_admin":false},"performed_via_github_app":null}