[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/289475515","html_url":"https://github.com/elastic/elasticsearch/issues/23760#issuecomment-289475515","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23760","id":289475515,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTQ3NTUxNQ==","user":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"created_at":"2017-03-27T14:44:33Z","updated_at":"2017-03-27T14:44:33Z","author_association":"CONTRIBUTOR","body":"@Hexta is there a stack trace in the log files that you can share?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/289483372","html_url":"https://github.com/elastic/elasticsearch/issues/23760#issuecomment-289483372","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23760","id":289483372,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTQ4MzM3Mg==","user":{"login":"Hexta","id":3001133,"node_id":"MDQ6VXNlcjMwMDExMzM=","avatar_url":"https://avatars2.githubusercontent.com/u/3001133?v=4","gravatar_id":"","url":"https://api.github.com/users/Hexta","html_url":"https://github.com/Hexta","followers_url":"https://api.github.com/users/Hexta/followers","following_url":"https://api.github.com/users/Hexta/following{/other_user}","gists_url":"https://api.github.com/users/Hexta/gists{/gist_id}","starred_url":"https://api.github.com/users/Hexta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hexta/subscriptions","organizations_url":"https://api.github.com/users/Hexta/orgs","repos_url":"https://api.github.com/users/Hexta/repos","events_url":"https://api.github.com/users/Hexta/events{/privacy}","received_events_url":"https://api.github.com/users/Hexta/received_events","type":"User","site_admin":false},"created_at":"2017-03-27T15:09:16Z","updated_at":"2017-03-27T15:09:16Z","author_association":"NONE","body":"@abeyad I don't see any stack in the log file.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/289639095","html_url":"https://github.com/elastic/elasticsearch/issues/23760#issuecomment-289639095","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23760","id":289639095,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTYzOTA5NQ==","user":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"created_at":"2017-03-28T01:55:12Z","updated_at":"2017-03-28T01:55:12Z","author_association":"CONTRIBUTOR","body":"@Hexta can you consistently reproduce this?  are you sure the snapshot wasn't deleted first and then the command was re-run again?\r\n\r\nif the `SnapshotMissingException` was thrown after confirming the snapshot exists before proceeding with the delete, the exception *should* show up in the logs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/290386252","html_url":"https://github.com/elastic/elasticsearch/issues/23760#issuecomment-290386252","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23760","id":290386252,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDM4NjI1Mg==","user":{"login":"Hexta","id":3001133,"node_id":"MDQ6VXNlcjMwMDExMzM=","avatar_url":"https://avatars2.githubusercontent.com/u/3001133?v=4","gravatar_id":"","url":"https://api.github.com/users/Hexta","html_url":"https://github.com/Hexta","followers_url":"https://api.github.com/users/Hexta/followers","following_url":"https://api.github.com/users/Hexta/following{/other_user}","gists_url":"https://api.github.com/users/Hexta/gists{/gist_id}","starred_url":"https://api.github.com/users/Hexta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hexta/subscriptions","organizations_url":"https://api.github.com/users/Hexta/orgs","repos_url":"https://api.github.com/users/Hexta/repos","events_url":"https://api.github.com/users/Hexta/events{/privacy}","received_events_url":"https://api.github.com/users/Hexta/received_events","type":"User","site_admin":false},"created_at":"2017-03-30T11:43:14Z","updated_at":"2017-03-30T11:44:42Z","author_association":"NONE","body":"@abeyad I performed queries to ES from Kibana Console. Kibana accesses ES through HAProxy with defined inactivity timeout (1m).\r\nDelete snapshot request took more than 1m and HAProxy closed connection which caused retrying request by Kibana Console.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/290387790","html_url":"https://github.com/elastic/elasticsearch/issues/23760#issuecomment-290387790","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23760","id":290387790,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDM4Nzc5MA==","user":{"login":"Hexta","id":3001133,"node_id":"MDQ6VXNlcjMwMDExMzM=","avatar_url":"https://avatars2.githubusercontent.com/u/3001133?v=4","gravatar_id":"","url":"https://api.github.com/users/Hexta","html_url":"https://github.com/Hexta","followers_url":"https://api.github.com/users/Hexta/followers","following_url":"https://api.github.com/users/Hexta/following{/other_user}","gists_url":"https://api.github.com/users/Hexta/gists{/gist_id}","starred_url":"https://api.github.com/users/Hexta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hexta/subscriptions","organizations_url":"https://api.github.com/users/Hexta/orgs","repos_url":"https://api.github.com/users/Hexta/repos","events_url":"https://api.github.com/users/Hexta/events{/privacy}","received_events_url":"https://api.github.com/users/Hexta/received_events","type":"User","site_admin":false},"created_at":"2017-03-30T11:50:46Z","updated_at":"2017-03-30T11:50:46Z","author_association":"NONE","body":"Is it OK that delete snapshot request doesn't run asynchronously?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/290461718","html_url":"https://github.com/elastic/elasticsearch/issues/23760#issuecomment-290461718","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23760","id":290461718,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDQ2MTcxOA==","user":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"created_at":"2017-03-30T16:14:26Z","updated_at":"2017-03-30T16:14:26Z","author_association":"CONTRIBUTOR","body":"My guess is that the request succeeded the first time, but for some reason there was a problem getting the response back from the proxy to kibana.  You could turn on debug logging for `org.elasticsearch.snapshots` and `org.elasticsearch.repositories` and we could see if there are any particular problems in ES with regards to deleting the snapshot.\r\n\r\n> Is it OK that delete snapshot request doesn't run asynchronously?\r\n\r\nThe snapshot deletion executes asynchronously, but from an API perspective, the HTTP response waits until the snapshot deletion operation completes (either successfully or unsuccessfully or times out) before returning a response.  Not sure if that is your question?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/290656976","html_url":"https://github.com/elastic/elasticsearch/issues/23760#issuecomment-290656976","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23760","id":290656976,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDY1Njk3Ng==","user":{"login":"Hexta","id":3001133,"node_id":"MDQ6VXNlcjMwMDExMzM=","avatar_url":"https://avatars2.githubusercontent.com/u/3001133?v=4","gravatar_id":"","url":"https://api.github.com/users/Hexta","html_url":"https://github.com/Hexta","followers_url":"https://api.github.com/users/Hexta/followers","following_url":"https://api.github.com/users/Hexta/following{/other_user}","gists_url":"https://api.github.com/users/Hexta/gists{/gist_id}","starred_url":"https://api.github.com/users/Hexta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hexta/subscriptions","organizations_url":"https://api.github.com/users/Hexta/orgs","repos_url":"https://api.github.com/users/Hexta/repos","events_url":"https://api.github.com/users/Hexta/events{/privacy}","received_events_url":"https://api.github.com/users/Hexta/received_events","type":"User","site_admin":false},"created_at":"2017-03-31T08:55:35Z","updated_at":"2017-03-31T08:55:35Z","author_association":"NONE","body":"> My guess is that the request succeeded the first time, but for some reason there was a problem getting the response back from the proxy to kibana.\r\n\r\nI inspected requests to ES HTTP service (using tcpflow). I saw that DELETE request performed twice - first immediately after starting the query in Kibana Console, and then after HAProxy timeout.\r\n\r\nAfter setting HAProxy timeout to 5 minutes, 404 errors have gone away. But such configuration is vulnerable to slow DoS attack.\r\n\r\n> The snapshot deletion executes asynchronously, but from an API perspective, the HTTP response waits until the snapshot deletion operation completes (either successfully or unsuccessfully or times out) before returning a response. \r\n\r\nFor ES client delete snapshot query acts like synchronous - DELETE request completes only after deleting all snapshot files. This requests can take too much time, and it would be great to run it in the same manner as creating snapshot request (return acknowledgment and provide /_status for checking operation progress).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/290686929","html_url":"https://github.com/elastic/elasticsearch/issues/23760#issuecomment-290686929","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23760","id":290686929,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDY4NjkyOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-03-31T11:20:47Z","updated_at":"2017-03-31T11:20:47Z","author_association":"CONTRIBUTOR","body":"We could add the `wait_for_completion` parameter to delete snapshot","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/290690825","html_url":"https://github.com/elastic/elasticsearch/issues/23760#issuecomment-290690825","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23760","id":290690825,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDY5MDgyNQ==","user":{"login":"Hexta","id":3001133,"node_id":"MDQ6VXNlcjMwMDExMzM=","avatar_url":"https://avatars2.githubusercontent.com/u/3001133?v=4","gravatar_id":"","url":"https://api.github.com/users/Hexta","html_url":"https://github.com/Hexta","followers_url":"https://api.github.com/users/Hexta/followers","following_url":"https://api.github.com/users/Hexta/following{/other_user}","gists_url":"https://api.github.com/users/Hexta/gists{/gist_id}","starred_url":"https://api.github.com/users/Hexta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hexta/subscriptions","organizations_url":"https://api.github.com/users/Hexta/orgs","repos_url":"https://api.github.com/users/Hexta/repos","events_url":"https://api.github.com/users/Hexta/events{/privacy}","received_events_url":"https://api.github.com/users/Hexta/received_events","type":"User","site_admin":false},"created_at":"2017-03-31T11:43:53Z","updated_at":"2017-03-31T11:43:53Z","author_association":"NONE","body":"@clintongormley I think that would be great.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/376171887","html_url":"https://github.com/elastic/elasticsearch/issues/23760#issuecomment-376171887","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23760","id":376171887,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NjE3MTg4Nw==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2018-03-26T13:48:20Z","updated_at":"2018-03-26T13:48:20Z","author_association":"MEMBER","body":"We talked about this issue today with @ywelsch. While we understand the need to track snapshot deletions and/or wait for them to complete, we didn't feel like it is a high requested feature. Considering that implementing the feature of tracking snapshot deletion progress is not easy, we'd like to close this issue to indicate that we don't have immediate plan to work on it. Please, feel free to add any comment and +1.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/379773202","html_url":"https://github.com/elastic/elasticsearch/issues/23760#issuecomment-379773202","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23760","id":379773202,"node_id":"MDEyOklzc3VlQ29tbWVudDM3OTc3MzIwMg==","user":{"login":"regnarock","id":4267223,"node_id":"MDQ6VXNlcjQyNjcyMjM=","avatar_url":"https://avatars1.githubusercontent.com/u/4267223?v=4","gravatar_id":"","url":"https://api.github.com/users/regnarock","html_url":"https://github.com/regnarock","followers_url":"https://api.github.com/users/regnarock/followers","following_url":"https://api.github.com/users/regnarock/following{/other_user}","gists_url":"https://api.github.com/users/regnarock/gists{/gist_id}","starred_url":"https://api.github.com/users/regnarock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/regnarock/subscriptions","organizations_url":"https://api.github.com/users/regnarock/orgs","repos_url":"https://api.github.com/users/regnarock/repos","events_url":"https://api.github.com/users/regnarock/events{/privacy}","received_events_url":"https://api.github.com/users/regnarock/received_events","type":"User","site_admin":false},"created_at":"2018-04-09T14:33:09Z","updated_at":"2018-04-09T14:33:09Z","author_association":"NONE","body":"+1\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/379774436","html_url":"https://github.com/elastic/elasticsearch/issues/23760#issuecomment-379774436","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23760","id":379774436,"node_id":"MDEyOklzc3VlQ29tbWVudDM3OTc3NDQzNg==","user":{"login":"jmleoni","id":5391729,"node_id":"MDQ6VXNlcjUzOTE3Mjk=","avatar_url":"https://avatars3.githubusercontent.com/u/5391729?v=4","gravatar_id":"","url":"https://api.github.com/users/jmleoni","html_url":"https://github.com/jmleoni","followers_url":"https://api.github.com/users/jmleoni/followers","following_url":"https://api.github.com/users/jmleoni/following{/other_user}","gists_url":"https://api.github.com/users/jmleoni/gists{/gist_id}","starred_url":"https://api.github.com/users/jmleoni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmleoni/subscriptions","organizations_url":"https://api.github.com/users/jmleoni/orgs","repos_url":"https://api.github.com/users/jmleoni/repos","events_url":"https://api.github.com/users/jmleoni/events{/privacy}","received_events_url":"https://api.github.com/users/jmleoni/received_events","type":"User","site_admin":false},"created_at":"2018-04-09T14:36:50Z","updated_at":"2018-04-09T14:36:50Z","author_association":"NONE","body":"+1","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/494201567","html_url":"https://github.com/elastic/elasticsearch/issues/23760#issuecomment-494201567","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23760","id":494201567,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDIwMTU2Nw==","user":{"login":"gmhabchi","id":8139697,"node_id":"MDQ6VXNlcjgxMzk2OTc=","avatar_url":"https://avatars0.githubusercontent.com/u/8139697?v=4","gravatar_id":"","url":"https://api.github.com/users/gmhabchi","html_url":"https://github.com/gmhabchi","followers_url":"https://api.github.com/users/gmhabchi/followers","following_url":"https://api.github.com/users/gmhabchi/following{/other_user}","gists_url":"https://api.github.com/users/gmhabchi/gists{/gist_id}","starred_url":"https://api.github.com/users/gmhabchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmhabchi/subscriptions","organizations_url":"https://api.github.com/users/gmhabchi/orgs","repos_url":"https://api.github.com/users/gmhabchi/repos","events_url":"https://api.github.com/users/gmhabchi/events{/privacy}","received_events_url":"https://api.github.com/users/gmhabchi/received_events","type":"User","site_admin":false},"created_at":"2019-05-21T01:05:58Z","updated_at":"2019-05-21T01:05:58Z","author_association":"NONE","body":"+1","performed_via_github_app":null}]