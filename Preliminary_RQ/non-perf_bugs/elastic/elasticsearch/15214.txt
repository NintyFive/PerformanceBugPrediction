{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15214","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15214/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15214/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15214/events","html_url":"https://github.com/elastic/elasticsearch/issues/15214","id":120153852,"node_id":"MDU6SXNzdWUxMjAxNTM4NTI=","number":15214,"title":"QueryBuilders.QueryString Not Considering Boost If Only One Field is provided.","user":{"login":"vishnuchilamakuru","id":1097838,"node_id":"MDQ6VXNlcjEwOTc4Mzg=","avatar_url":"https://avatars1.githubusercontent.com/u/1097838?v=4","gravatar_id":"","url":"https://api.github.com/users/vishnuchilamakuru","html_url":"https://github.com/vishnuchilamakuru","followers_url":"https://api.github.com/users/vishnuchilamakuru/followers","following_url":"https://api.github.com/users/vishnuchilamakuru/following{/other_user}","gists_url":"https://api.github.com/users/vishnuchilamakuru/gists{/gist_id}","starred_url":"https://api.github.com/users/vishnuchilamakuru/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vishnuchilamakuru/subscriptions","organizations_url":"https://api.github.com/users/vishnuchilamakuru/orgs","repos_url":"https://api.github.com/users/vishnuchilamakuru/repos","events_url":"https://api.github.com/users/vishnuchilamakuru/events{/privacy}","received_events_url":"https://api.github.com/users/vishnuchilamakuru/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-12-03T11:54:43Z","updated_at":"2015-12-03T17:51:30Z","closed_at":"2015-12-03T17:51:30Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Hi,\n\nWe are using ElasticSearch 1.6.0.\nQueryBuilders.QueryString Not Considering Boost If only One Field is provided. But if i repeat the same field with same boost multiple times it considers the boost value.\n\nQueryString With Single Field : \n\n```\n            {\n              \"query_string\": {\n                \"query\": \"samsung mobiles\",\n                \"fields\": [\n                  \"title^100.0\"\n                ],\n                \"auto_generate_phrase_queries\": true,\n                \"minimum_should_match\": \"100%\"\n              }\n```\n\nExplain : true\n\n{\"value\": 0.013228737,\"description\": \"sum of:\",\"details\": [{\"value\": 0.008120831,\"description\": \n\n\"weight(title:samsung in 74534) \n\n[PerFieldSimilarity], result of:\",\"details\": [{\"value\": 0.008120831,\"description\": \"score(doc=74534,freq=1.0), product of:\",\"details\": [{\"value\": 0.0027710546,\"description\": \"queryWeight, product of:\",\"details\": [{\"value\": 4.6889477,\"description\": \"idf(docFreq=7708, maxDocs=308381)\"},{\"value\": 0.0005909758,\"description\": \"queryNorm\"}]},{\"value\": 2.9305923,\"description\": \"fieldWeight in 74534, product of:\",\"details\": [{\"value\": 1,\"description\": \"tf(freq=1.0), with freq of:\",\"details\": [{\"value\": 1,\"description\": \"termFreq=1.0\"}]},{\"value\": 4.6889477,\"description\": \"idf(docFreq=7708, maxDocs=308381)\"},{\"value\": 0.625,\"description\": \"fieldNorm(doc=74534)\"}]}]}]},{\"value\": 0.005107906,\"description\": \"weight(title:mobil in 74534) [PerFieldSimilarity], result of:\",\"details\": [{\"value\": 0.005107906,\"description\": \"score(doc=74534,freq=1.0), product of:\",\"details\": [{\"value\": 0.0021976894,\"description\": \"queryWeight, product of:\",\"details\": [{\"value\": 3.7187467,\"description\": \"idf(docFreq=20339, maxDocs=308381)\"},{\"value\": 0.0005909758,\"description\": \"queryNorm\"}]},{\"value\": 2.3242166,\"description\": \"fieldWeight in 74534, product of:\",\"details\": [{\"value\": 1,\"description\": \"tf(freq=1.0), with freq of:\",\"details\": [{\"value\": 1,\"description\": \"termFreq=1.0\"}]},{\"value\": 3.7187467,\"description\": \"idf(docFreq=20339, maxDocs=308381)\"},{\"value\": 0.625,\"description\": \"fieldNorm(doc=74534)\"}]}]}]}]}\n\nQueryString With Same Field Twice : \n\n```\n            {\n              \"query_string\": {\n                \"query\": \"samsung mobiles\",\n                \"fields\": [\n                  \"title^100.0\",\n                  \"title^100.0\"\n                ],\n                \"auto_generate_phrase_queries\": true,\n                \"minimum_should_match\": \"100%\"\n              }\n```\n\nExplain : true\n\n{\"value\": 1.2471766,\"description\": \"sum of:\",\"details\": [{\"value\": 0.7656144,\"description\": \"max of:\",\"details\": [{\"value\": 0.7656144,\"description\": \n\n\"weight(title:samsung^100.0 in 74534) [PerFieldSimilarity],\n\n result of:\",\"details\": [{\"value\": 0.7656144,\"description\": \"score(doc=74534,freq=1.0), product of:\",\"details\": [{\"value\": 0.26124904,\"description\": \"queryWeight, product of:\",\"details\": [{\"value\": 100,\"description\": \"boost\"},{\"value\": 4.6889477,\"description\": \"idf(docFreq=7708, maxDocs=308381)\"},{\"value\": 0.0005571592,\"description\": \"queryNorm\"}]},{\"value\": 2.9305923,\"description\": \"fieldWeight in 74534, product of:\",\"details\": [{\"value\": 1,\"description\": \"tf(freq=1.0), with freq of:\",\"details\": [{\"value\": 1,\"description\": \"termFreq=1.0\"}]},{\"value\": 4.6889477,\"description\": \"idf(docFreq=7708, maxDocs=308381)\"},{\"value\": 0.625,\"description\": \"fieldNorm(doc=74534)\"}]}]}]},{\"value\": 0.7656144,\"description\": \"weight(title:samsung^100.0 in 74534) [PerFieldSimilarity], result of:\",\"details\": [{\"value\": 0.7656144,\"description\": \"score(doc=74534,freq=1.0), product of:\",\"details\": [{\"value\": 0.26124904,\"description\": \"queryWeight, product of:\",\"details\": [{\"value\": 100,\"description\": \"boost\"},{\"value\": 4.6889477,\"description\": \"idf(docFreq=7708, maxDocs=308381)\"},{\"value\": 0.0005571592,\"description\": \"queryNorm\"}]},{\"value\": 2.9305923,\"description\": \"fieldWeight in 74534, product of:\",\"details\": [{\"value\": 1,\"description\": \"tf(freq=1.0), with freq of:\",\"details\": [{\"value\": 1,\"description\": \"termFreq=1.0\"}]},{\"value\": 4.6889477,\"description\": \"idf(docFreq=7708, maxDocs=308381)\"},{\"value\": 0.625,\"description\": \"fieldNorm(doc=74534)\"}]}]}]}]},{\"value\": 0.48156232,\"description\": \"max of:\",\"details\": [{\"value\": 0.48156232,\"description\": \"weight(title:mobil^100.0 in 74534) [PerFieldSimilarity], result of:\",\"details\": [{\"value\": 0.48156232,\"description\": \"score(doc=74534,freq=1.0), product of:\",\"details\": [{\"value\": 0.20719339,\"description\": \"queryWeight, product of:\",\"details\": [{\"value\": 100,\"description\": \"boost\"},{\"value\": 3.7187467,\"description\": \"idf(docFreq=20339, maxDocs=308381)\"},{\"value\": 0.0005571592,\"description\": \"queryNorm\"}]},{\"value\": 2.3242166,\"description\": \"fieldWeight in 74534, product of:\",\"details\": [{\"value\": 1,\"description\": \"tf(freq=1.0), with freq of:\",\"details\": [{\"value\": 1,\"description\": \"termFreq=1.0\"}]},{\"value\": 3.7187467,\"description\": \"idf(docFreq=20339, maxDocs=308381)\"},{\"value\": 0.625,\"description\": \"fieldNorm(doc=74534)\"}]}]}]},{\"value\": 0.48156232,\"description\": \"weight(title:mobil^100.0 in 74534) [PerFieldSimilarity], result of:\",\"details\": [{\"value\": 0.48156232,\"description\": \"score(doc=74534,freq=1.0), product of:\",\"details\": [{\"value\": 0.20719339,\"description\": \"queryWeight, product of:\",\"details\": [{\"value\": 100,\"description\": \"boost\"},{\"value\": 3.7187467,\"description\": \"idf(docFreq=20339, maxDocs=308381)\"},{\"value\": 0.0005571592,\"description\": \"queryNorm\"}]},{\"value\": 2.3242166,\"description\": \"fieldWeight in 74534, product of:\",\"details\": [{\"value\": 1,\"description\": \"tf(freq=1.0), with freq of:\",\"details\": [{\"value\": 1,\"description\": \"termFreq=1.0\"}]},{\"value\": 3.7187467,\"description\": \"idf(docFreq=20339, maxDocs=308381)\"},{\"value\": 0.625,\"description\": \"fieldNorm(doc=74534)\"}]}]}]}]}]}\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}