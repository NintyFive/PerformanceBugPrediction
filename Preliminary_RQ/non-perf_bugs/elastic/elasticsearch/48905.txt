{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/48905","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48905/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48905/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48905/events","html_url":"https://github.com/elastic/elasticsearch/issues/48905","id":519422231,"node_id":"MDU6SXNzdWU1MTk0MjIyMzE=","number":48905,"title":"missing value not considered in min/max aggregations","user":{"login":"mattweber","id":173955,"node_id":"MDQ6VXNlcjE3Mzk1NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/173955?v=4","gravatar_id":"","url":"https://api.github.com/users/mattweber","html_url":"https://github.com/mattweber","followers_url":"https://api.github.com/users/mattweber/followers","following_url":"https://api.github.com/users/mattweber/following{/other_user}","gists_url":"https://api.github.com/users/mattweber/gists{/gist_id}","starred_url":"https://api.github.com/users/mattweber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattweber/subscriptions","organizations_url":"https://api.github.com/users/mattweber/orgs","repos_url":"https://api.github.com/users/mattweber/repos","events_url":"https://api.github.com/users/mattweber/events{/privacy}","received_events_url":"https://api.github.com/users/mattweber/received_events","type":"User","site_admin":false},"labels":[{"id":141141324,"node_id":"MDU6TGFiZWwxNDExNDEzMjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Aggregations","name":":Analytics/Aggregations","color":"0e8a16","default":false,"description":"Aggregations"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"assignees":[{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false}],"milestone":null,"comments":8,"created_at":"2019-11-07T17:55:53Z","updated_at":"2019-11-12T20:11:44Z","closed_at":"2019-11-12T20:11:44Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The missing value is not considered in min/max aggreagtions in es7 as they were in previous versions and I don't see this documented as a breaking change.  I believe this is due optimization of using segment min/max values.\r\n\r\nTo reproduce run the following against es6 and es7. The missing values should be returned as the min and max value of the aggregation.\r\n\r\n```\r\ncurl -XPUT -H\"Content-Type: application/json\" 'localhost:9200/testmissing/_doc/1' -d '{\"title\": \"with value\", \"value\": 1}'\r\ncurl -XPUT -H\"Content-Type: application/json\" 'localhost:9200/testmissing/_doc/2?refresh' -d '{\"title\": \"missing value\"}'\r\ncurl -XPOST -H\"Content-Type: application/json\" 'localhost:9200/testmissing/_search?pretty' -d '{\r\n    \"size\": 0,\r\n    \"aggs\": {\r\n        \"min_missing\": {\r\n            \"min\": {\r\n                \"field\": \"value\",\r\n                \"missing\": -1\r\n            }\r\n        },\r\n        \"max_missinng\": {\r\n            \"max\": {\r\n                \"field\": \"value\",\r\n                \"missing\": 2\r\n            }\r\n        }\r\n    }\r\n}'\r\n```","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}