[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/8883868","html_url":"https://github.com/elastic/elasticsearch/issues/2289#issuecomment-8883868","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2289","id":8883868,"node_id":"MDEyOklzc3VlQ29tbWVudDg4ODM4Njg=","user":{"login":"snazy","id":957468,"node_id":"MDQ6VXNlcjk1NzQ2OA==","avatar_url":"https://avatars0.githubusercontent.com/u/957468?v=4","gravatar_id":"","url":"https://api.github.com/users/snazy","html_url":"https://github.com/snazy","followers_url":"https://api.github.com/users/snazy/followers","following_url":"https://api.github.com/users/snazy/following{/other_user}","gists_url":"https://api.github.com/users/snazy/gists{/gist_id}","starred_url":"https://api.github.com/users/snazy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snazy/subscriptions","organizations_url":"https://api.github.com/users/snazy/orgs","repos_url":"https://api.github.com/users/snazy/repos","events_url":"https://api.github.com/users/snazy/events{/privacy}","received_events_url":"https://api.github.com/users/snazy/received_events","type":"User","site_admin":false},"created_at":"2012-09-26T09:21:55Z","updated_at":"2012-09-26T09:21:55Z","author_association":"NONE","body":"For 0.19.10 (if possible), too :-)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/8887135","html_url":"https://github.com/elastic/elasticsearch/issues/2289#issuecomment-8887135","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2289","id":8887135,"node_id":"MDEyOklzc3VlQ29tbWVudDg4ODcxMzU=","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2012-09-26T11:47:44Z","updated_at":"2012-09-26T11:47:44Z","author_association":"MEMBER","body":"I think shardsAllocator is configurable using setShardsAllocator method since 0.19.0. All you have to do is implement PreProcessModule and replace default shards allocator with your own shards allocator when ShardsAllocatorModule is getting processed. It may look something like this:\n\n``` java\npublic class MyShardsAllocatorModule extends AbstractModule implements PreProcessModule {\n\n    private final Settings settings;\n\n    public MyShardsAllocatorModule(Settings settings) {\n        this.settings = settings;\n    }\n\n    @Override\n    protected void configure() {\n        // Configure your module\n    }\n\n    @Override\n    public void processModule(Module module) {\n        if (module instanceof ShardsAllocatorModule && \n                settings.getAsBoolean(\"my.shards.allocator.enabled\", false)) {\n            ((ShardsAllocatorModule) module).setShardsAllocator(MyShardsAllocator.class);\n        }\n    }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/8894321","html_url":"https://github.com/elastic/elasticsearch/issues/2289#issuecomment-8894321","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2289","id":8894321,"node_id":"MDEyOklzc3VlQ29tbWVudDg4OTQzMjE=","user":{"login":"snazy","id":957468,"node_id":"MDQ6VXNlcjk1NzQ2OA==","avatar_url":"https://avatars0.githubusercontent.com/u/957468?v=4","gravatar_id":"","url":"https://api.github.com/users/snazy","html_url":"https://github.com/snazy","followers_url":"https://api.github.com/users/snazy/followers","following_url":"https://api.github.com/users/snazy/following{/other_user}","gists_url":"https://api.github.com/users/snazy/gists{/gist_id}","starred_url":"https://api.github.com/users/snazy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snazy/subscriptions","organizations_url":"https://api.github.com/users/snazy/orgs","repos_url":"https://api.github.com/users/snazy/repos","events_url":"https://api.github.com/users/snazy/events{/privacy}","received_events_url":"https://api.github.com/users/snazy/received_events","type":"User","site_admin":false},"created_at":"2012-09-26T15:39:40Z","updated_at":"2012-09-26T15:39:55Z","author_association":"NONE","body":"Hi - yes - seems to work (at least the coding) :-)\nThanks!\nI'll try my stuff tomorrow as a module.\n","performed_via_github_app":null}]