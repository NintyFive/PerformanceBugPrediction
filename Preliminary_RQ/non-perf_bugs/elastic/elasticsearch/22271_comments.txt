[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268074617","html_url":"https://github.com/elastic/elasticsearch/issues/22271#issuecomment-268074617","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22271","id":268074617,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODA3NDYxNw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-12-19T20:50:45Z","updated_at":"2016-12-19T20:50:45Z","author_association":"MEMBER","body":"Can you upgrade your Java version and see if it fixes your problem?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268099350","html_url":"https://github.com/elastic/elasticsearch/issues/22271#issuecomment-268099350","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22271","id":268099350,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODA5OTM1MA==","user":{"login":"ranguard","id":60391,"node_id":"MDQ6VXNlcjYwMzkx","avatar_url":"https://avatars1.githubusercontent.com/u/60391?v=4","gravatar_id":"","url":"https://api.github.com/users/ranguard","html_url":"https://github.com/ranguard","followers_url":"https://api.github.com/users/ranguard/followers","following_url":"https://api.github.com/users/ranguard/following{/other_user}","gists_url":"https://api.github.com/users/ranguard/gists{/gist_id}","starred_url":"https://api.github.com/users/ranguard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ranguard/subscriptions","organizations_url":"https://api.github.com/users/ranguard/orgs","repos_url":"https://api.github.com/users/ranguard/repos","events_url":"https://api.github.com/users/ranguard/events{/privacy}","received_events_url":"https://api.github.com/users/ranguard/received_events","type":"User","site_admin":false},"created_at":"2016-12-19T22:37:40Z","updated_at":"2016-12-19T22:37:40Z","author_association":"NONE","body":"Hi,\n\nWhat should I upgrade it to? And is there any knock on effect for ES cluster?... this is a production env.\n\nMany thanks\n\n> On 19 Dec 2016, at 20:51, David Pilato <notifications@github.com> wrote:\n> \n> Can you upgrade your Java version and see if it fixes your problem?\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268176862","html_url":"https://github.com/elastic/elasticsearch/issues/22271#issuecomment-268176862","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22271","id":268176862,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODE3Njg2Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-12-20T07:45:25Z","updated_at":"2016-12-20T07:45:25Z","author_association":"CONTRIBUTOR","body":"@dadoonet I think we may be missing transitive dependencies. This seems similar to https://github.com/databricks/spark-redshift/issues/103","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268201661","html_url":"https://github.com/elastic/elasticsearch/issues/22271#issuecomment-268201661","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22271","id":268201661,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODIwMTY2MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-12-20T09:55:35Z","updated_at":"2016-12-20T09:55:35Z","author_association":"CONTRIBUTOR","body":"@ranguard could you try adding `joda-time-2.8.1.jar`  to your plugins/cloud-aws/ directory?\r\n\r\nhttps://mvnrepository.com/artifact/joda-time/joda-time/2.8.1\r\n\r\nIf that doesn't work, try adding:\r\n\r\n* `jackson-core-2.5.3.jar` https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core/2.5.3\r\n* `jackson-dataformat-cbor-2.5.3.jar` https://mvnrepository.com/artifact/com.fasterxml.jackson.dataformat/jackson-dataformat-cbor/2.5.3","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268327645","html_url":"https://github.com/elastic/elasticsearch/issues/22271#issuecomment-268327645","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22271","id":268327645,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODMyNzY0NQ==","user":{"login":"ranguard","id":60391,"node_id":"MDQ6VXNlcjYwMzkx","avatar_url":"https://avatars1.githubusercontent.com/u/60391?v=4","gravatar_id":"","url":"https://api.github.com/users/ranguard","html_url":"https://github.com/ranguard","followers_url":"https://api.github.com/users/ranguard/followers","following_url":"https://api.github.com/users/ranguard/following{/other_user}","gists_url":"https://api.github.com/users/ranguard/gists{/gist_id}","starred_url":"https://api.github.com/users/ranguard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ranguard/subscriptions","organizations_url":"https://api.github.com/users/ranguard/orgs","repos_url":"https://api.github.com/users/ranguard/repos","events_url":"https://api.github.com/users/ranguard/events{/privacy}","received_events_url":"https://api.github.com/users/ranguard/received_events","type":"User","site_admin":false},"created_at":"2016-12-20T19:01:07Z","updated_at":"2016-12-20T19:01:07Z","author_association":"NONE","body":"https://mvnrepository.com/artifact/joda-time/joda-time/2.8.1 lead to:\r\n\r\n```\r\n[2016-12-20 18:53:29,680][ERROR][bootstrap                ] Exception\r\njava.lang.IllegalStateException: failed to load bundle [file:/usr/share/elasticsearch/plugins/cloud-aws/cloud-aws-2.4.3.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/commons-codec-1.6.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/aws-java-sdk-kms-1.10.69.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/aws-java-sdk-s3-1.10.69.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/jackson-annotations-2.5.0.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/httpclient-4.3.6.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/aws-java-sdk-core-1.10.69.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/aws-java-sdk-ec2-1.10.69.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/commons-logging-1.1.3.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/joda-time-2.8.1.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/jackson-databind-2.5.3.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/httpcore-4.3.3.jar] due to jar hell\r\n\tat org.elasticsearch.plugins.PluginsService.loadBundles(PluginsService.java:421)\r\n\tat org.elasticsearch.plugins.PluginsService.<init>(PluginsService.java:129)\r\n\tat org.elasticsearch.node.Node.<init>(Node.java:158)\r\n\tat org.elasticsearch.node.Node.<init>(Node.java:140)\r\n\tat org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:143)\r\n\tat org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:194)\r\n\tat org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:286)\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:45)\r\nCaused by: java.lang.IllegalStateException: jar hell!\r\nclass: org.joda.time.base.AbstractDateTime\r\njar1: /usr/share/elasticsearch/lib/joda-time-2.9.5.jar\r\njar2: /usr/share/elasticsearch/plugins/cloud-aws/joda-time-2.8.1.jar\r\n\tat org.elasticsearch.bootstrap.JarHell.checkClass(JarHell.java:280)\r\n\tat org.elasticsearch.bootstrap.JarHell.checkJarHell(JarHell.java:186)\r\n\tat org.elasticsearch.plugins.PluginsService.loadBundles(PluginsService.java:419)\r\n\t... 7 more\r\n```\r\n\r\nAlso adding `jackson-core-2.5.3.jar` and `jackson-dataformat-cbor-2.5.3.jar` also BOOM...\r\n```\r\n[2016-12-20 18:57:49,766][ERROR][bootstrap                ] Exception\r\njava.lang.IllegalStateException: failed to load bundle [file:/usr/share/elasticsearch/plugins/cloud-aws/cloud-aws-2.4.3.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/commons-codec-1.6.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/aws-java-sdk-kms-1.10.69.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/aws-java-sdk-s3-1.10.69.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/jackson-annotations-2.5.0.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/httpclient-4.3.6.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/aws-java-sdk-core-1.10.69.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/aws-java-sdk-ec2-1.10.69.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/jackson-core-2.5.3.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/commons-logging-1.1.3.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/joda-time-2.8.1.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/jackson-dataformat-cbor-2.5.3.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/jackson-databind-2.5.3.jar, file:/usr/share/elasticsearch/plugins/cloud-aws/httpcore-4.3.3.jar] due to jar hell\r\n\tat org.elasticsearch.plugins.PluginsService.loadBundles(PluginsService.java:421)\r\n\tat org.elasticsearch.plugins.PluginsService.<init>(PluginsService.java:129)\r\n\tat org.elasticsearch.node.Node.<init>(Node.java:158)\r\n\tat org.elasticsearch.node.Node.<init>(Node.java:140)\r\n\tat org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:143)\r\n\tat org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:194)\r\n\tat org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:286)\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:45)\r\nCaused by: java.lang.IllegalStateException: jar hell!\r\nclass: com.fasterxml.jackson.core.Base64Variant\r\njar1: /usr/share/elasticsearch/lib/jackson-core-2.8.1.jar\r\njar2: /usr/share/elasticsearch/plugins/cloud-aws/jackson-core-2.5.3.jar\r\n\tat org.elasticsearch.bootstrap.JarHell.checkClass(JarHell.java:280)\r\n\tat org.elasticsearch.bootstrap.JarHell.checkJarHell(JarHell.java:186)\r\n\tat org.elasticsearch.plugins.PluginsService.loadBundles(PluginsService.java:419)\r\n\t... 7 more\r\n```\r\n\r\nFor reference my `cloud-aws` folder looked like this:\r\n```\r\n-rw-r--r-- 1 root root  229998 Apr 24  2015 jackson-core-2.5.3.jar\r\n-rw-r--r-- 1 root root   46519 Apr 25  2015 jackson-dataformat-cbor-2.5.3.jar\r\n-rw-r--r-- 1 root root  621931 Jun 15  2015 joda-time-2.8.1.jar\r\n-rw-r--r-- 1 root root   39815 Dec 18 08:32 jackson-annotations-2.5.0.jar\r\n-rw-r--r-- 1 root root  232771 Dec 18 08:32 commons-codec-1.6.jar\r\n-rw-r--r-- 1 root root   55989 Dec 18 08:32 cloud-aws-2.4.3.jar\r\n-rw-r--r-- 1 root root  622188 Dec 18 08:32 aws-java-sdk-s3-1.10.69.jar\r\n-rw-r--r-- 1 root root  345717 Dec 18 08:32 aws-java-sdk-kms-1.10.69.jar\r\n-rw-r--r-- 1 root root  592008 Dec 18 08:32 httpclient-4.3.6.jar\r\n-rw-r--r-- 1 root root  619790 Dec 18 08:32 aws-java-sdk-core-1.10.69.jar\r\n-rw-r--r-- 1 root root    1638 Dec 18 08:32 plugin-security.policy\r\n-rw-r--r-- 1 root root    2706 Dec 18 08:32 plugin-descriptor.properties\r\n-rw-r--r-- 1 root root 1143162 Dec 18 08:32 jackson-databind-2.5.3.jar\r\n-rw-r--r-- 1 root root  282793 Dec 18 08:32 httpcore-4.3.3.jar\r\n-rw-r--r-- 1 root root   62050 Dec 18 08:32 commons-logging-1.1.3.jar\r\n-rw-r--r-- 1 root root 3193658 Dec 18 08:32 aws-java-sdk-ec2-1.10.69.jar\r\n-rw-r--r-- 1 root root      15 Dec 18 08:32 .name\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268365178","html_url":"https://github.com/elastic/elasticsearch/issues/22271#issuecomment-268365178","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22271","id":268365178,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODM2NTE3OA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-12-20T21:31:32Z","updated_at":"2016-12-20T21:31:32Z","author_association":"MEMBER","body":"I remember an old issue with very old versions of Java7 with AWS SDK.\r\nUpgrading to latest java7 patch solved the issue.\r\n\r\nWas related to date indeed.\r\n\r\nSo could you try to update your Java 7 version?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268373496","html_url":"https://github.com/elastic/elasticsearch/issues/22271#issuecomment-268373496","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22271","id":268373496,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODM3MzQ5Ng==","user":{"login":"ranguard","id":60391,"node_id":"MDQ6VXNlcjYwMzkx","avatar_url":"https://avatars1.githubusercontent.com/u/60391?v=4","gravatar_id":"","url":"https://api.github.com/users/ranguard","html_url":"https://github.com/ranguard","followers_url":"https://api.github.com/users/ranguard/followers","following_url":"https://api.github.com/users/ranguard/following{/other_user}","gists_url":"https://api.github.com/users/ranguard/gists{/gist_id}","starred_url":"https://api.github.com/users/ranguard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ranguard/subscriptions","organizations_url":"https://api.github.com/users/ranguard/orgs","repos_url":"https://api.github.com/users/ranguard/repos","events_url":"https://api.github.com/users/ranguard/events{/privacy}","received_events_url":"https://api.github.com/users/ranguard/received_events","type":"User","site_admin":false},"created_at":"2016-12-20T22:08:04Z","updated_at":"2016-12-20T22:08:04Z","author_association":"NONE","body":"Whats the best way to do that? - I am using the puppet module with java_install = true\n\nThanks\n\n> On 20 Dec 2016, at 21:32, David Pilato <notifications@github.com> wrote:\n> \n> I remember an old issue with very old versions of Java7 with AWS SDK.\n> Upgrading to latest java7 patch solved the issue.\n> \n> Was related to date indeed.\n> \n> So could you try to update your Java 7 version?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268484028","html_url":"https://github.com/elastic/elasticsearch/issues/22271#issuecomment-268484028","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22271","id":268484028,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODQ4NDAyOA==","user":{"login":"ranguard","id":60391,"node_id":"MDQ6VXNlcjYwMzkx","avatar_url":"https://avatars1.githubusercontent.com/u/60391?v=4","gravatar_id":"","url":"https://api.github.com/users/ranguard","html_url":"https://github.com/ranguard","followers_url":"https://api.github.com/users/ranguard/followers","following_url":"https://api.github.com/users/ranguard/following{/other_user}","gists_url":"https://api.github.com/users/ranguard/gists{/gist_id}","starred_url":"https://api.github.com/users/ranguard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ranguard/subscriptions","organizations_url":"https://api.github.com/users/ranguard/orgs","repos_url":"https://api.github.com/users/ranguard/repos","events_url":"https://api.github.com/users/ranguard/events{/privacy}","received_events_url":"https://api.github.com/users/ranguard/received_events","type":"User","site_admin":false},"created_at":"2016-12-21T10:05:37Z","updated_at":"2016-12-21T10:05:37Z","author_association":"NONE","body":"Worked it out - some packages had been kept back, and also we didn't have debian security in the apt list on those boxes!\r\n\r\nSo although the puppet config was the same, there was a Java version difference, this version worked:\r\n\r\n```\r\njava version \"1.7.0_111\"\r\nOpenJDK Runtime Environment (IcedTea 2.6.7) (7u111-2.6.7-2~deb7u1)\r\nOpenJDK 64-Bit Server VM (build 24.111-b01, mixed mode)\r\n```\r\n\r\nMany thanks for the assist","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268484929","html_url":"https://github.com/elastic/elasticsearch/issues/22271#issuecomment-268484929","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22271","id":268484929,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODQ4NDkyOQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-12-21T10:10:23Z","updated_at":"2016-12-21T10:10:23Z","author_association":"MEMBER","body":"Thanks a lot for confirming @ranguard! ","performed_via_github_app":null}]