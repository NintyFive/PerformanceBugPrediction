{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/27142","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27142/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27142/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27142/events","html_url":"https://github.com/elastic/elasticsearch/issues/27142","id":269043653,"node_id":"MDU6SXNzdWUyNjkwNDM2NTM=","number":27142,"title":"Fielddata Error","user":{"login":"pizu","id":7047326,"node_id":"MDQ6VXNlcjcwNDczMjY=","avatar_url":"https://avatars3.githubusercontent.com/u/7047326?v=4","gravatar_id":"","url":"https://api.github.com/users/pizu","html_url":"https://github.com/pizu","followers_url":"https://api.github.com/users/pizu/followers","following_url":"https://api.github.com/users/pizu/following{/other_user}","gists_url":"https://api.github.com/users/pizu/gists{/gist_id}","starred_url":"https://api.github.com/users/pizu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pizu/subscriptions","organizations_url":"https://api.github.com/users/pizu/orgs","repos_url":"https://api.github.com/users/pizu/repos","events_url":"https://api.github.com/users/pizu/events{/privacy}","received_events_url":"https://api.github.com/users/pizu/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-10-27T09:30:18Z","updated_at":"2017-10-27T10:13:18Z","closed_at":"2017-10-27T10:13:18Z","author_association":"NONE","active_lock_reason":null,"body":"Good Morning ALL,\r\n\r\nI need to set the Fielddata, but cannot find where I should add this.\r\n\r\nAm having the below error when trying to access source.\r\n\r\nOct 27 10:50:38 itnetgraylog elasticsearch: [2017-10-27 10:50:38,700][DEBUG][action.search ] [g0_RYrN] [graylog_0][0], node[g0_RYrNlRruQedtzWQBTwQ], [P], s[STARTED], a[id=rXEbg3YTS4mi0DpNLnBFSw]: Failed to execute [org.elasticsearch.action.search.SearchRequest@36ce65c5]\r\nOct 27 10:50:38 itnetgraylog elasticsearch: RemoteTransportException[[g0_RYrN][127.0.0.1:9300][indices:data/read/search[phase/query+fetch]]]; nested: IllegalArgumentException[Fielddata is disabled on text fields by default. Set fielddata=true on [source] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory.];\r\nOct 27 10:50:38 itnetgraylog elasticsearch: Caused by: java.lang.IllegalArgumentException: Fielddata is disabled on text fields by default. Set fielddata=true on [source] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory.\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.index.mapper.core.TextFieldMapper$TextFieldType.fielddataBuilder(TextFieldMapper.java:296)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.index.fielddata.IndexFieldDataService.getForField(IndexFieldDataService.java:111)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.support.ValuesSourceAggregationBuilder.config(ValuesSourceAggregationBuilder.java:355)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.support.ValuesSourceAggregationBuilder.resolveConfig(ValuesSourceAggregationBuilder.java:305)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.support.ValuesSourceAggregationBuilder.doBuild(ValuesSourceAggregationBuilder.java:299)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.support.ValuesSourceAggregationBuilder.doBuild(ValuesSourceAggregationBuilder.java:49)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.AbstractAggregationBuilder.build(AbstractAggregationBuilder.java:126)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.AggregatorFactories$Builder.build(AggregatorFactories.java:211)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.AggregatorFactory.(AggregatorFactory.java:187)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.bucket.filter.FilterAggregatorFactory.(FilterAggregatorFactory.java:43)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.bucket.filter.FilterAggregationBuilder.doBuild(FilterAggregationBuilder.java:77)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.AbstractAggregationBuilder.build(AbstractAggregationBuilder.java:126)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.AggregatorFactories$Builder.build(AggregatorFactories.java:211)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.SearchService.parseSource(SearchService.java:695)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.SearchService.createContext(SearchService.java:550)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:509)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:352)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.action.SearchTransportService$SearchQueryFetchTransportHandler.messageReceived(SearchTransportService.java:339)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.action.SearchTransportService$SearchQueryFetchTransportHandler.messageReceived(SearchTransportService.java:336)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:69)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.transport.TransportService$5.doRun(TransportService.java:517)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:510)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at java.lang.Thread.run(Thread.java:748)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: [2017-10-27 10:50:38,700][DEBUG][action.search ] [g0_RYrN] All shards failed for phase: [query_fetch]\r\nOct 27 10:50:38 itnetgraylog elasticsearch: RemoteTransportException[[g0_RYrN][127.0.0.1:9300][indices:data/read/search[phase/query+fetch]]]; nested: IllegalArgumentException[Fielddata is disabled on text fields by default. Set fielddata=true on [source] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory.];\r\nOct 27 10:50:38 itnetgraylog elasticsearch: Caused by: java.lang.IllegalArgumentException: Fielddata is disabled on text fields by default. Set fielddata=true on [source] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory.\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.index.mapper.core.TextFieldMapper$TextFieldType.fielddataBuilder(TextFieldMapper.java:296)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.index.fielddata.IndexFieldDataService.getForField(IndexFieldDataService.java:111)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.support.ValuesSourceAggregationBuilder.config(ValuesSourceAggregationBuilder.java:355)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.support.ValuesSourceAggregationBuilder.resolveConfig(ValuesSourceAggregationBuilder.java:305)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.support.ValuesSourceAggregationBuilder.doBuild(ValuesSourceAggregationBuilder.java:299)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.support.ValuesSourceAggregationBuilder.doBuild(ValuesSourceAggregationBuilder.java:49)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.AbstractAggregationBuilder.build(AbstractAggregationBuilder.java:126)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.AggregatorFactories$Builder.build(AggregatorFactories.java:211)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.AggregatorFactory.(AggregatorFactory.java:187)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.bucket.filter.FilterAggregatorFactory.(FilterAggregatorFactory.java:43)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.bucket.filter.FilterAggregationBuilder.doBuild(FilterAggregationBuilder.java:77)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.AbstractAggregationBuilder.build(AbstractAggregationBuilder.java:126)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.aggregations.AggregatorFactories$Builder.build(AggregatorFactories.java:211)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.SearchService.parseSource(SearchService.java:695)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.SearchService.createContext(SearchService.java:550)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:509)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:352)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.action.SearchTransportService$SearchQueryFetchTransportHandler.messageReceived(SearchTransportService.java:339)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.search.action.SearchTransportService$SearchQueryFetchTransportHandler.messageReceived(SearchTransportService.java:336)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:69)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.transport.TransportService$5.doRun(TransportService.java:517)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:510)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\nOct 27 10:50:38 itnetgraylog elasticsearch: at java.lang.Thread.run(Thread.java:748)\r\n\r\nThe Above error from logs. When trying to call: http://itnetgraylog:12900/api/sources?range=3600\r\n\r\nLinux itnetgraylog 3.10.0-693.5.2.el7.x86_64 #1 SMP Fri Oct 20 20:32:50 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\nGraylog Version: v2.3.2+3df951e\r\nElasticsearch Version: 5.0.0_alpha5-1\r\nMongoDB Version: 3.4.10-1.el7\r\nOperating System: Centos 7\r\nBrowser version: Latest Chrome/IE/Firefox","closed_by":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"performed_via_github_app":null}