[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76212711","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-76212711","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":76212711,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjEyNzEx","user":{"login":"jhenley45","id":2613827,"node_id":"MDQ6VXNlcjI2MTM4Mjc=","avatar_url":"https://avatars1.githubusercontent.com/u/2613827?v=4","gravatar_id":"","url":"https://api.github.com/users/jhenley45","html_url":"https://github.com/jhenley45","followers_url":"https://api.github.com/users/jhenley45/followers","following_url":"https://api.github.com/users/jhenley45/following{/other_user}","gists_url":"https://api.github.com/users/jhenley45/gists{/gist_id}","starred_url":"https://api.github.com/users/jhenley45/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhenley45/subscriptions","organizations_url":"https://api.github.com/users/jhenley45/orgs","repos_url":"https://api.github.com/users/jhenley45/repos","events_url":"https://api.github.com/users/jhenley45/events{/privacy}","received_events_url":"https://api.github.com/users/jhenley45/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T16:40:39Z","updated_at":"2015-02-26T16:40:39Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76451447","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-76451447","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":76451447,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NDUxNDQ3","user":{"login":"javadevmtl","id":2964042,"node_id":"MDQ6VXNlcjI5NjQwNDI=","avatar_url":"https://avatars2.githubusercontent.com/u/2964042?v=4","gravatar_id":"","url":"https://api.github.com/users/javadevmtl","html_url":"https://github.com/javadevmtl","followers_url":"https://api.github.com/users/javadevmtl/followers","following_url":"https://api.github.com/users/javadevmtl/following{/other_user}","gists_url":"https://api.github.com/users/javadevmtl/gists{/gist_id}","starred_url":"https://api.github.com/users/javadevmtl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javadevmtl/subscriptions","organizations_url":"https://api.github.com/users/javadevmtl/orgs","repos_url":"https://api.github.com/users/javadevmtl/repos","events_url":"https://api.github.com/users/javadevmtl/events{/privacy}","received_events_url":"https://api.github.com/users/javadevmtl/received_events","type":"User","site_admin":false},"created_at":"2015-02-27T19:01:08Z","updated_at":"2015-02-27T19:01:08Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76556740","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-76556740","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":76556740,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTU2NzQw","user":{"login":"TheDeveloper","id":432425,"node_id":"MDQ6VXNlcjQzMjQyNQ==","avatar_url":"https://avatars1.githubusercontent.com/u/432425?v=4","gravatar_id":"","url":"https://api.github.com/users/TheDeveloper","html_url":"https://github.com/TheDeveloper","followers_url":"https://api.github.com/users/TheDeveloper/followers","following_url":"https://api.github.com/users/TheDeveloper/following{/other_user}","gists_url":"https://api.github.com/users/TheDeveloper/gists{/gist_id}","starred_url":"https://api.github.com/users/TheDeveloper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TheDeveloper/subscriptions","organizations_url":"https://api.github.com/users/TheDeveloper/orgs","repos_url":"https://api.github.com/users/TheDeveloper/repos","events_url":"https://api.github.com/users/TheDeveloper/events{/privacy}","received_events_url":"https://api.github.com/users/TheDeveloper/received_events","type":"User","site_admin":false},"created_at":"2015-02-28T23:26:10Z","updated_at":"2015-02-28T23:26:10Z","author_association":"CONTRIBUTOR","body":"+1\n\nI want to have a histogram aggregation that can use the `doc_count` result field from a parent Terms aggregation as its field.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77434907","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-77434907","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":77434907,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDM0OTA3","user":{"login":"tcucchietti","id":5711873,"node_id":"MDQ6VXNlcjU3MTE4NzM=","avatar_url":"https://avatars2.githubusercontent.com/u/5711873?v=4","gravatar_id":"","url":"https://api.github.com/users/tcucchietti","html_url":"https://github.com/tcucchietti","followers_url":"https://api.github.com/users/tcucchietti/followers","following_url":"https://api.github.com/users/tcucchietti/following{/other_user}","gists_url":"https://api.github.com/users/tcucchietti/gists{/gist_id}","starred_url":"https://api.github.com/users/tcucchietti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tcucchietti/subscriptions","organizations_url":"https://api.github.com/users/tcucchietti/orgs","repos_url":"https://api.github.com/users/tcucchietti/repos","events_url":"https://api.github.com/users/tcucchietti/events{/privacy}","received_events_url":"https://api.github.com/users/tcucchietti/received_events","type":"User","site_admin":false},"created_at":"2015-03-05T19:34:31Z","updated_at":"2015-03-05T19:34:31Z","author_association":"CONTRIBUTOR","body":"Big +1 on this!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77441269","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-77441269","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":77441269,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDQxMjY5","user":{"login":"rtremaine","id":666074,"node_id":"MDQ6VXNlcjY2NjA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/666074?v=4","gravatar_id":"","url":"https://api.github.com/users/rtremaine","html_url":"https://github.com/rtremaine","followers_url":"https://api.github.com/users/rtremaine/followers","following_url":"https://api.github.com/users/rtremaine/following{/other_user}","gists_url":"https://api.github.com/users/rtremaine/gists{/gist_id}","starred_url":"https://api.github.com/users/rtremaine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rtremaine/subscriptions","organizations_url":"https://api.github.com/users/rtremaine/orgs","repos_url":"https://api.github.com/users/rtremaine/repos","events_url":"https://api.github.com/users/rtremaine/events{/privacy}","received_events_url":"https://api.github.com/users/rtremaine/received_events","type":"User","site_admin":false},"created_at":"2015-03-05T20:08:11Z","updated_at":"2015-03-05T20:08:11Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/83197524","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-83197524","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":83197524,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMTk3NTI0","user":{"login":"aschokking","id":399279,"node_id":"MDQ6VXNlcjM5OTI3OQ==","avatar_url":"https://avatars0.githubusercontent.com/u/399279?v=4","gravatar_id":"","url":"https://api.github.com/users/aschokking","html_url":"https://github.com/aschokking","followers_url":"https://api.github.com/users/aschokking/followers","following_url":"https://api.github.com/users/aschokking/following{/other_user}","gists_url":"https://api.github.com/users/aschokking/gists{/gist_id}","starred_url":"https://api.github.com/users/aschokking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aschokking/subscriptions","organizations_url":"https://api.github.com/users/aschokking/orgs","repos_url":"https://api.github.com/users/aschokking/repos","events_url":"https://api.github.com/users/aschokking/events{/privacy}","received_events_url":"https://api.github.com/users/aschokking/received_events","type":"User","site_admin":false},"created_at":"2015-03-18T21:51:08Z","updated_at":"2015-03-18T21:51:08Z","author_association":"NONE","body":":+1: \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/83198569","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-83198569","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":83198569,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMTk4NTY5","user":{"login":"aschokking","id":399279,"node_id":"MDQ6VXNlcjM5OTI3OQ==","avatar_url":"https://avatars0.githubusercontent.com/u/399279?v=4","gravatar_id":"","url":"https://api.github.com/users/aschokking","html_url":"https://github.com/aschokking","followers_url":"https://api.github.com/users/aschokking/followers","following_url":"https://api.github.com/users/aschokking/following{/other_user}","gists_url":"https://api.github.com/users/aschokking/gists{/gist_id}","starred_url":"https://api.github.com/users/aschokking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aschokking/subscriptions","organizations_url":"https://api.github.com/users/aschokking/orgs","repos_url":"https://api.github.com/users/aschokking/repos","events_url":"https://api.github.com/users/aschokking/events{/privacy}","received_events_url":"https://api.github.com/users/aschokking/received_events","type":"User","site_admin":false},"created_at":"2015-03-18T21:55:47Z","updated_at":"2015-03-18T21:55:47Z","author_association":"NONE","body":"Is it possible to do these awkwardly now using scripted aggregations? Is that something Kibana4 can take advantage of if they are there?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/83204703","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-83204703","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":83204703,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMjA0NzAz","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2015-03-18T22:13:04Z","updated_at":"2015-03-18T22:13:04Z","author_association":"MEMBER","body":"@aschokking Nope, there's no way to hack this right now...if you want this functionality, you currently have to build it client-side yourself.\n\nThis new functionality essentially adds one or more extra `reduce` phases to the aggregation framework.  For example, currently you can get the average price per day for the last 30 days (`date_histogram` bucket with a `avg` metric).  But you can't get the sum of those averages, since the summation is operating on the agg results and not doc values.  You would have to do that client-side right now by summing up the buckets yourself.\n\nFrom a high level, it looks like this:\n\n1) `map` executes on each doc to collect value\n2) `combine` all the prices together by averaging all the collected values.  This happens on each shard.\n3) Send all the shard results to the coordinating node, `reduce` the shard values together by merging averages\n\nThe new functionality introduces a fourth step:\n\n4) Execute another `reduce` phase, this time iterating over the aggregation buckets and summing the averages.\n\nWe are keeping close communication with the Kibana team, since they want to use a lot of this functionality.  And none of this will \"break\" existing aggregations; in fact, all the new aggs look just like the old aggs.  So Kibana will be able to implement them as they arrive in Elasticsearch, no need for a new major version or anything.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/83264948","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-83264948","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":83264948,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMjY0OTQ4","user":{"login":"aschokking","id":399279,"node_id":"MDQ6VXNlcjM5OTI3OQ==","avatar_url":"https://avatars0.githubusercontent.com/u/399279?v=4","gravatar_id":"","url":"https://api.github.com/users/aschokking","html_url":"https://github.com/aschokking","followers_url":"https://api.github.com/users/aschokking/followers","following_url":"https://api.github.com/users/aschokking/following{/other_user}","gists_url":"https://api.github.com/users/aschokking/gists{/gist_id}","starred_url":"https://api.github.com/users/aschokking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aschokking/subscriptions","organizations_url":"https://api.github.com/users/aschokking/orgs","repos_url":"https://api.github.com/users/aschokking/repos","events_url":"https://api.github.com/users/aschokking/events{/privacy}","received_events_url":"https://api.github.com/users/aschokking/received_events","type":"User","site_admin":false},"created_at":"2015-03-19T02:03:24Z","updated_at":"2015-03-19T02:03:24Z","author_association":"NONE","body":"Thanks for clarifying @polyfractal, that makes sense. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85908543","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-85908543","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":85908543,"node_id":"MDEyOklzc3VlQ29tbWVudDg1OTA4NTQz","user":{"login":"lukas-vlcek","id":205174,"node_id":"MDQ6VXNlcjIwNTE3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/205174?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-vlcek","html_url":"https://github.com/lukas-vlcek","followers_url":"https://api.github.com/users/lukas-vlcek/followers","following_url":"https://api.github.com/users/lukas-vlcek/following{/other_user}","gists_url":"https://api.github.com/users/lukas-vlcek/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-vlcek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-vlcek/subscriptions","organizations_url":"https://api.github.com/users/lukas-vlcek/orgs","repos_url":"https://api.github.com/users/lukas-vlcek/repos","events_url":"https://api.github.com/users/lukas-vlcek/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-vlcek/received_events","type":"User","site_admin":false},"created_at":"2015-03-25T08:02:36Z","updated_at":"2015-03-25T08:02:36Z","author_association":"CONTRIBUTOR","body":"very nice!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90985801","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-90985801","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":90985801,"node_id":"MDEyOklzc3VlQ29tbWVudDkwOTg1ODAx","user":{"login":"lewchuk","id":580096,"node_id":"MDQ6VXNlcjU4MDA5Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/580096?v=4","gravatar_id":"","url":"https://api.github.com/users/lewchuk","html_url":"https://github.com/lewchuk","followers_url":"https://api.github.com/users/lewchuk/followers","following_url":"https://api.github.com/users/lewchuk/following{/other_user}","gists_url":"https://api.github.com/users/lewchuk/gists{/gist_id}","starred_url":"https://api.github.com/users/lewchuk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lewchuk/subscriptions","organizations_url":"https://api.github.com/users/lewchuk/orgs","repos_url":"https://api.github.com/users/lewchuk/repos","events_url":"https://api.github.com/users/lewchuk/events{/privacy}","received_events_url":"https://api.github.com/users/lewchuk/received_events","type":"User","site_admin":false},"created_at":"2015-04-08T17:45:06Z","updated_at":"2015-04-08T17:45:06Z","author_association":"NONE","body":"+1 on adding the secondard reduces, will it be limited to a two level aggregation or can more levels be possible?\n\nI'd suggest a modification to \"Aggregation to calculate the (mean) average value of the buckets in a given aggregation\" to be \"Aggregation to calculate the any/all of the extended_stats values of the buckets in a given aggregation, e.g. after a terms aggregation\". This allows each bucket to be given an equal weight regardless of the number of documents in the underlying buckets.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90992775","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-90992775","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":90992775,"node_id":"MDEyOklzc3VlQ29tbWVudDkwOTkyNzc1","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2015-04-08T18:14:04Z","updated_at":"2015-04-08T18:14:04Z","author_association":"MEMBER","body":"@lewchuk The new functionality should be able to work in multi-level aggregations.  E.g. you can embed these new aggs at multiple levels in the aggregation tree.  \n\nDepending on the agg, they may have certain requirements which must be satisfied (e.g. a `derivative` must be embedded inside a histogram or date_histo, since it expects numerical series of numerical data); you'll receive a validation error if you put it in the wrong place.\n\nMost of these new aggs also support \"chaining\".  For example, you could calculate acceleration by taking the derivative of a derivative of position.  Or do something like take the moving average of the derivative of the position.  Etc etc :)\n\n> I'd suggest a modification to \"Aggregation to calculate the (mean) average value of the buckets in a given aggregation\" to be \"Aggregation to calculate the any/all of the extended_stats values of the buckets in a given aggregation, e.g. after a terms aggregation\".\n\nI believe the plan is to support all the basic \"arithmetic\" functions, not just mean.  So mean/min/max/sum/etc.  Basically mirroring the existing set of metrics...but for agg values instead of document values.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/91087436","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-91087436","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":91087436,"node_id":"MDEyOklzc3VlQ29tbWVudDkxMDg3NDM2","user":{"login":"lewchuk","id":580096,"node_id":"MDQ6VXNlcjU4MDA5Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/580096?v=4","gravatar_id":"","url":"https://api.github.com/users/lewchuk","html_url":"https://github.com/lewchuk","followers_url":"https://api.github.com/users/lewchuk/followers","following_url":"https://api.github.com/users/lewchuk/following{/other_user}","gists_url":"https://api.github.com/users/lewchuk/gists{/gist_id}","starred_url":"https://api.github.com/users/lewchuk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lewchuk/subscriptions","organizations_url":"https://api.github.com/users/lewchuk/orgs","repos_url":"https://api.github.com/users/lewchuk/repos","events_url":"https://api.github.com/users/lewchuk/events{/privacy}","received_events_url":"https://api.github.com/users/lewchuk/received_events","type":"User","site_admin":false},"created_at":"2015-04-09T01:42:48Z","updated_at":"2015-04-09T01:42:48Z","author_association":"NONE","body":"@polyfractal Thanks for the clarification! Will be very excited to unleash the power of these new aggregations.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95213949","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-95213949","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":95213949,"node_id":"MDEyOklzc3VlQ29tbWVudDk1MjEzOTQ5","user":{"login":"Kallin","id":158169,"node_id":"MDQ6VXNlcjE1ODE2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/158169?v=4","gravatar_id":"","url":"https://api.github.com/users/Kallin","html_url":"https://github.com/Kallin","followers_url":"https://api.github.com/users/Kallin/followers","following_url":"https://api.github.com/users/Kallin/following{/other_user}","gists_url":"https://api.github.com/users/Kallin/gists{/gist_id}","starred_url":"https://api.github.com/users/Kallin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kallin/subscriptions","organizations_url":"https://api.github.com/users/Kallin/orgs","repos_url":"https://api.github.com/users/Kallin/repos","events_url":"https://api.github.com/users/Kallin/events{/privacy}","received_events_url":"https://api.github.com/users/Kallin/received_events","type":"User","site_admin":false},"created_at":"2015-04-22T14:41:13Z","updated_at":"2015-04-22T14:41:13Z","author_association":"NONE","body":"periodicity/seasonality stuff sounds interesting. we would like to do detection of customer attrition, many of whom have seasonal behaviour based on the vertical of their industry. this feature sounds like it could help eliminate false positives.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/100752635","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-100752635","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":100752635,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMDc1MjYzNQ==","user":{"login":"goupeng212","id":10542671,"node_id":"MDQ6VXNlcjEwNTQyNjcx","avatar_url":"https://avatars0.githubusercontent.com/u/10542671?v=4","gravatar_id":"","url":"https://api.github.com/users/goupeng212","html_url":"https://github.com/goupeng212","followers_url":"https://api.github.com/users/goupeng212/followers","following_url":"https://api.github.com/users/goupeng212/following{/other_user}","gists_url":"https://api.github.com/users/goupeng212/gists{/gist_id}","starred_url":"https://api.github.com/users/goupeng212/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/goupeng212/subscriptions","organizations_url":"https://api.github.com/users/goupeng212/orgs","repos_url":"https://api.github.com/users/goupeng212/repos","events_url":"https://api.github.com/users/goupeng212/events{/privacy}","received_events_url":"https://api.github.com/users/goupeng212/received_events","type":"User","site_admin":false},"created_at":"2015-05-11T03:14:23Z","updated_at":"2015-05-11T03:14:23Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113276732","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-113276732","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":113276732,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzI3NjczMg==","user":{"login":"acarstoiu","id":9536601,"node_id":"MDQ6VXNlcjk1MzY2MDE=","avatar_url":"https://avatars2.githubusercontent.com/u/9536601?v=4","gravatar_id":"","url":"https://api.github.com/users/acarstoiu","html_url":"https://github.com/acarstoiu","followers_url":"https://api.github.com/users/acarstoiu/followers","following_url":"https://api.github.com/users/acarstoiu/following{/other_user}","gists_url":"https://api.github.com/users/acarstoiu/gists{/gist_id}","starred_url":"https://api.github.com/users/acarstoiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acarstoiu/subscriptions","organizations_url":"https://api.github.com/users/acarstoiu/orgs","repos_url":"https://api.github.com/users/acarstoiu/repos","events_url":"https://api.github.com/users/acarstoiu/events{/privacy}","received_events_url":"https://api.github.com/users/acarstoiu/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T20:13:32Z","updated_at":"2015-06-18T20:13:32Z","author_association":"NONE","body":"I've had a close look at the documentation of the upcoming [pipeline aggregations](https://www.elastic.co/guide/en/elasticsearch/reference/master/search-aggregations-pipeline.html). Quite an exciting stuff :smiley:\n\nYet there's a very important, I'd say capital functionality missing. The primary reason for using the server-side post-aggregations is _not_ laziness (at least not in my case), but performance: it might be killing for your application to receive tons of data on the wire and then crunch them a while to finally spit just a few numbers.\n\nAll pipeline aggregations should have a `supress_source` parameter (or something alike) that would instruct the coordinating node to prune the buckets used as source data from the returned result. Certainly, an aggregation might be supressed by several pipeline aggregations, but one would suffice to have its buckets removed from the reply.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113288211","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-113288211","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":113288211,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzI4ODIxMQ==","user":{"login":"acarstoiu","id":9536601,"node_id":"MDQ6VXNlcjk1MzY2MDE=","avatar_url":"https://avatars2.githubusercontent.com/u/9536601?v=4","gravatar_id":"","url":"https://api.github.com/users/acarstoiu","html_url":"https://github.com/acarstoiu","followers_url":"https://api.github.com/users/acarstoiu/followers","following_url":"https://api.github.com/users/acarstoiu/following{/other_user}","gists_url":"https://api.github.com/users/acarstoiu/gists{/gist_id}","starred_url":"https://api.github.com/users/acarstoiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acarstoiu/subscriptions","organizations_url":"https://api.github.com/users/acarstoiu/orgs","repos_url":"https://api.github.com/users/acarstoiu/repos","events_url":"https://api.github.com/users/acarstoiu/events{/privacy}","received_events_url":"https://api.github.com/users/acarstoiu/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T20:59:10Z","updated_at":"2015-06-18T20:59:10Z","author_association":"NONE","body":"In the meantime I found the `filter_path` parameter which seems a good work-around (although I expect it to be less performant).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/119686768","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-119686768","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":119686768,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTY4Njc2OA==","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2015-07-08T18:20:10Z","updated_at":"2015-07-08T18:20:10Z","author_association":"NONE","body":"Read your blog on pipeline aggregations (https://www.elastic.co/blog/out-of-this-world-aggregations) Really nice thank you\n\nI would be interested in few more pipeline aggregations (or rather transformations)\n1. To provide compatibility with huge number of Pivot Table/Chart visualization packages who expect flat dataset and can \"pivot\" on its columns. Flatten aggregation tree - it would flatten tree of nested aggregations to a list of records capturing keys recursively from top down in the records as well as all metrics. \n2. Overlay transformation that can overlay (with various strategies) aggregation buckets from sibling aggregations. For example if we want to bring _missing aggregation into terms aggregation buckets (I know that 2.0 will support it directly but it is for illustration purposes) or overlaying results produced by aggregations on different fields - for example in case management system they want to count number of cases being opened and closed per month so elastic could collate aggs by two separate fields together based on the bucket key (fiscal year). Even more useful case overlaying with calculation (or script)\n3. Arithmetic/expressions to produce derivative metrics based on agg metrics within each bucket. (#2 is probably more generic and more complex case of overlay with calculation) \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120041239","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-120041239","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":120041239,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDA0MTIzOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-07-09T15:43:05Z","updated_at":"2015-07-09T15:43:05Z","author_association":"CONTRIBUTOR","body":"@roytmana I like the idea of (1) flattening aggs into columns\n\n(2) and (3) sound like they could be achieved very easily with https://www.elastic.co/guide/en/elasticsearch/reference/master/search-aggregations-pipeline-bucket-script-aggregation.html\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120044170","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-120044170","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":120044170,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDA0NDE3MA==","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2015-07-09T15:48:13Z","updated_at":"2015-07-09T15:48:13Z","author_association":"NONE","body":"ok @clintongormley  I will play with script pipeline when the beta is out. If you decide to go ahead with (1) I would be happy to provide some use cases.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120449382","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-120449382","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":120449382,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDQ0OTM4Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-07-10T16:17:28Z","updated_at":"2015-07-10T16:17:28Z","author_association":"CONTRIBUTOR","body":"@roytmana just chatted to @colings86 and apparently (2) isn't supported by the bucket_script agg yet.  But we should definitely add support\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120451560","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-120451560","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":120451560,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDQ1MTU2MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-07-10T16:27:03Z","updated_at":"2015-07-10T16:27:03Z","author_association":"CONTRIBUTOR","body":"Hmmmm  actually rereading (2) I'm not entirely sure if I understood it correctly.  The examples you provide are quite different, eg:\n- moving _missing into the list of buckets.. this seems like a fairly arbitrary transform which would require access to the whole agg tree and could potentially result in weird output\n- however the \"open\" vs \"closed\" example sounds like those should be two metrics in each bucket of a date histo, then you could use bucket_script to (eg) add a third metric calculated from `open - closed`\n\nAm I missing something?\n\nThe bit that I said was unsupported by bucket_script was the ability to access two separate histograms \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120461446","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-120461446","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":120461446,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDQ2MTQ0Ng==","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2015-07-10T17:06:16Z","updated_at":"2015-07-10T17:06:16Z","author_association":"NONE","body":"let me try to elaborate a bit\nmoving _missing: currently (and I know it'll be in 2.0) terms agg does not support missing bucket so one way to solve it was to declare a sibling \"missing\" aggregation (with the same sub aggs as in the terms) next to my say terms aggregation and then move its result into terms agg bucket array. This is just one example of the overlaying. \nHere is another one: imagine that you want to selectively drill down sub aggs (that is not to bring subaggs data for every bucket of a parent agg). Example we aggregate by country and city and we want to show breakdown by country and within countries we want to show breakdown by city but only for Germany and France. So \nOne way to do it is to have two sibling aggs one on Country only and the other on Country and City with \"include\" restricting  countries to Germany and France. then overlay second (two level) agg over the first and you have selective subaggregation. It is very useful in UI where user can freely drill down different path of nested aggregations (and they do not wish to drill down into every bucket) and then could change some global filer or search criteria and I need to reload entire visible tree from new query\n\nAs for open/closed. I do not think it could be two metrics in one bucket they are two different fields to bucket on. Here is requirement: I want to calculate number of cases and cost of cases opened and closed in each fiscal year and show them side by side. I have two fields OpenFY and ClosedFY which are pre-calculated. I want to show a chart with two data series one for opened and one for closed (counts and cost). Open an closed are two independent fields (It is even possible that there could be a year when there was no closed at all so there will not be a bucket for this FY in closed)\n\nI want to agg on the first and on the second and then merge results by FY so each bucket will get open and closed metrics together. I do it currently in post processing but I think result tree manipulation support directly in ES would be really useful!\n\nOne more question I have is about nested and reverse_nested (same for parent) aggregations. They introduce extra level in result tree which I am not sure is necessary. It only changes calculation scope but should not alter result tree depth. It makes it rather a headache to deal with it in dynamic metadata driven systems where users do not care how data is laid out they just pick how to aggregate and what to calculate and I may have to cross nested back and forth to accommodate it. Right now in post processing I have to transform my results by removing these extra nodes created due to nested/reverse_nested (a royal headache in entirely dynamic system) before passing it to UI level. I was wondering if it would introduce any problem (name clash?) if nested/reverse_nested did not introduce a separate node and all its subaggs emitted their results into agg owning the nested one.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120464413","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-120464413","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":120464413,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDQ2NDQxMw==","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2015-07-10T17:20:50Z","updated_at":"2015-07-10T17:20:50Z","author_association":"NONE","body":"I want to add that nested/reverse_nested introducing extra levels in result tree is not a trivial matter.\nConsider this example. A Case has Customers and Teams (of employees) who work on the case. I want to see 3 level breakdown of cases by customer by team and by employee. While logically my result tree should have 3 levels actual result tree with all the nesting/un-nesting is good deal more complex. I would greatly appreciate if you give it some thought and see if it an option could be added to skip extra nodes in result tree for calculation scope changing aggs\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/128755725","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-128755725","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":128755725,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODc1NTcyNQ==","user":{"login":"tmandry","id":2280544,"node_id":"MDQ6VXNlcjIyODA1NDQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2280544?v=4","gravatar_id":"","url":"https://api.github.com/users/tmandry","html_url":"https://github.com/tmandry","followers_url":"https://api.github.com/users/tmandry/followers","following_url":"https://api.github.com/users/tmandry/following{/other_user}","gists_url":"https://api.github.com/users/tmandry/gists{/gist_id}","starred_url":"https://api.github.com/users/tmandry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmandry/subscriptions","organizations_url":"https://api.github.com/users/tmandry/orgs","repos_url":"https://api.github.com/users/tmandry/repos","events_url":"https://api.github.com/users/tmandry/events{/privacy}","received_events_url":"https://api.github.com/users/tmandry/received_events","type":"User","site_admin":false},"created_at":"2015-08-07T16:26:10Z","updated_at":"2015-08-07T16:26:10Z","author_association":"NONE","body":"Lag or Timeshift Aggregation: Sort of a generalization of the serial differencing agg which only provides the lag functionality, allowing you to perform operations on values in different buckets (from the same or bucket aggregations.)\n\nUse case: Cohort retention analysis, where I want to see what percentage of users come back the day after their first day. I could do this by bucketing by day and by filtering on both `first_seen_days_ago:0` and `first_seen_days_ago:1`, using the lag aggregation to line up the second filter with the first, and finally dividing values from the same cohort.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/128763711","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-128763711","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":128763711,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODc2MzcxMQ==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2015-08-07T16:53:44Z","updated_at":"2015-08-07T16:53:44Z","author_association":"MEMBER","body":"@tmandry hmm, I can see this being useful.  Would you need/want a newly created field to be appended to each bucket, like:\n\n``` js\n\"buckets\": [\n    {\n        \"key_as_string\": \"2014-07-29T17:00:00.000Z\",\n        \"key\": 1406653200000,\n        \"doc_count\": 7,\n        \"login_today\": {  // <-- original, derived from something like an `avg` metric\n            \"avg\": 1\n        },\n        \"login_yesterday\": {   // <-- derived and shifted via a `timeshift` agg\n            \"avg\": 1\n        }\n    },\n```\n\nOr would it be sufficient if the `serial_diff` agg allowed arbitrary scripting, so that you could perform any mathematical operation other than just subtraction?\n\nThinking about it, the advantage of actually appending a new bucket is that you can use something like `bucket_selector` or `bucket_script` to filter / munge the agg, whereas the arbitrary scripting might be a bit more limiting.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/128778699","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-128778699","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":128778699,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODc3ODY5OQ==","user":{"login":"tmandry","id":2280544,"node_id":"MDQ6VXNlcjIyODA1NDQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2280544?v=4","gravatar_id":"","url":"https://api.github.com/users/tmandry","html_url":"https://github.com/tmandry","followers_url":"https://api.github.com/users/tmandry/followers","following_url":"https://api.github.com/users/tmandry/following{/other_user}","gists_url":"https://api.github.com/users/tmandry/gists{/gist_id}","starred_url":"https://api.github.com/users/tmandry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmandry/subscriptions","organizations_url":"https://api.github.com/users/tmandry/orgs","repos_url":"https://api.github.com/users/tmandry/repos","events_url":"https://api.github.com/users/tmandry/events{/privacy}","received_events_url":"https://api.github.com/users/tmandry/received_events","type":"User","site_admin":false},"created_at":"2015-08-07T17:57:21Z","updated_at":"2015-08-07T17:57:21Z","author_association":"NONE","body":"@polyfractal For my use case, the `serial_diff` approach would work, but appending a new bucket would allow us to enrich the interface with raw user counts in addition to percentages. (At least, I think appending would be necessary.)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/143270932","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-143270932","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":143270932,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MzI3MDkzMg==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2015-09-25T16:35:59Z","updated_at":"2015-09-25T16:35:59Z","author_association":"MEMBER","body":"Been working with pipelines more extensively on a demo project.  A few observations about what is difficult:\n- A \"sliding histogram\" would be _very_ useful.  There are situations where you need to accumulate the results from a range t<sub>i</sub>..t<sub>i+n</sub> into a single value...then repeat the process for the next t<sub>i+1</sub>..t<sub>i+n+1</sub> time range.  After doing that, you want to treat the output of each time range as a point in a new series and perform metrics on that.\n  \n  Currently, the only way to do this is execute a search-per-range and index the results, then run a followup agg.  The main downside to this functionality is that it could produce a very large number of buckets.  But I think the usefulness outweighs the downside\n- An ability to pick out individual buckets from a series.  E.g. a `first`, `last`, `nth` metric.  For example, you could have a `date_histo` embedded in a `terms`, giving one time series per term.  Then you want to calculate a moving avg and some other stuff for each series, and just want the \"final\" value from each series, so you could determine the largest \"final\" value.  Currently there is no way to do that.\n  \n  Alternatively, pathing could be modified to allow `last` etc as special keywords, so you could do `termsAgg>dateAgg[last].value`.  Would tie in nicely with the ability to ask for specific terms too (`termsAgg['foo']>dateAgg.....`)\n- Terms aggs tend to be an impenetrable wall.  It is difficult to access values on either \"side\" of the terms agg since it is a dynamic multi-value bucket.  And double term aggs basically prevent all access entirely\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/143533500","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-143533500","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":143533500,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MzUzMzUwMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-09-27T09:46:38Z","updated_at":"2015-09-27T09:46:38Z","author_association":"CONTRIBUTOR","body":"> An ability to pick out individual buckets from a series. E.g. a first, last, nth metric. \n\ncould be: `dateAgg[-1].value` for last\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/167104275","html_url":"https://github.com/elastic/elasticsearch/issues/9876#issuecomment-167104275","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9876","id":167104275,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NzEwNDI3NQ==","user":{"login":"arivazhagan-jeganathan","id":15650133,"node_id":"MDQ6VXNlcjE1NjUwMTMz","avatar_url":"https://avatars3.githubusercontent.com/u/15650133?v=4","gravatar_id":"","url":"https://api.github.com/users/arivazhagan-jeganathan","html_url":"https://github.com/arivazhagan-jeganathan","followers_url":"https://api.github.com/users/arivazhagan-jeganathan/followers","following_url":"https://api.github.com/users/arivazhagan-jeganathan/following{/other_user}","gists_url":"https://api.github.com/users/arivazhagan-jeganathan/gists{/gist_id}","starred_url":"https://api.github.com/users/arivazhagan-jeganathan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arivazhagan-jeganathan/subscriptions","organizations_url":"https://api.github.com/users/arivazhagan-jeganathan/orgs","repos_url":"https://api.github.com/users/arivazhagan-jeganathan/repos","events_url":"https://api.github.com/users/arivazhagan-jeganathan/events{/privacy}","received_events_url":"https://api.github.com/users/arivazhagan-jeganathan/received_events","type":"User","site_admin":false},"created_at":"2015-12-24T12:26:52Z","updated_at":"2015-12-24T12:26:52Z","author_association":"NONE","body":"Query String with Aggregation parameters works fine with JEST client. but with TCP, is it always mandatory to build AggregationBuilder to execute aggregation? Why JSON aggregation query is not supported in TCP? any specific reason for this?\n","performed_via_github_app":null}]