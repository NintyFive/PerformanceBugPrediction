[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/543526363","html_url":"https://github.com/elastic/elasticsearch/issues/48145#issuecomment-543526363","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48145","id":543526363,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzUyNjM2Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-10-18T05:57:17Z","updated_at":"2019-10-18T05:57:17Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Packaging)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/545094169","html_url":"https://github.com/elastic/elasticsearch/issues/48145#issuecomment-545094169","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48145","id":545094169,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTA5NDE2OQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2019-10-22T18:30:11Z","updated_at":"2019-10-22T18:30:11Z","author_association":"MEMBER","body":"Something is a bit odd here. Are you running as a service, or explicitly starting Elasticsearch? The log message you provided implies you are usinng bin/elasticsearch-service.bat to install and run an ES service, but the msi+elasticsearch.exe has it's own service that it sets up. Also, is `username` your actual user name?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/545377755","html_url":"https://github.com/elastic/elasticsearch/issues/48145#issuecomment-545377755","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48145","id":545377755,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTM3Nzc1NQ==","user":{"login":"18549","id":46347740,"node_id":"MDQ6VXNlcjQ2MzQ3NzQw","avatar_url":"https://avatars2.githubusercontent.com/u/46347740?v=4","gravatar_id":"","url":"https://api.github.com/users/18549","html_url":"https://github.com/18549","followers_url":"https://api.github.com/users/18549/followers","following_url":"https://api.github.com/users/18549/following{/other_user}","gists_url":"https://api.github.com/users/18549/gists{/gist_id}","starred_url":"https://api.github.com/users/18549/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/18549/subscriptions","organizations_url":"https://api.github.com/users/18549/orgs","repos_url":"https://api.github.com/users/18549/repos","events_url":"https://api.github.com/users/18549/events{/privacy}","received_events_url":"https://api.github.com/users/18549/received_events","type":"User","site_admin":false},"created_at":"2019-10-23T10:27:50Z","updated_at":"2019-10-23T10:27:50Z","author_association":"NONE","body":"I installed using the msi and started the service installed by the msi, I did not run any of the batch files or explicitly install any service. I modified 'username' in the log path to elide my real name.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/545690982","html_url":"https://github.com/elastic/elasticsearch/issues/48145#issuecomment-545690982","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48145","id":545690982,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTY5MDk4Mg==","user":{"login":"russcam","id":208231,"node_id":"MDQ6VXNlcjIwODIzMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/208231?v=4","gravatar_id":"","url":"https://api.github.com/users/russcam","html_url":"https://github.com/russcam","followers_url":"https://api.github.com/users/russcam/followers","following_url":"https://api.github.com/users/russcam/following{/other_user}","gists_url":"https://api.github.com/users/russcam/gists{/gist_id}","starred_url":"https://api.github.com/users/russcam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/russcam/subscriptions","organizations_url":"https://api.github.com/users/russcam/orgs","repos_url":"https://api.github.com/users/russcam/repos","events_url":"https://api.github.com/users/russcam/events{/privacy}","received_events_url":"https://api.github.com/users/russcam/received_events","type":"User","site_admin":false},"created_at":"2019-10-24T00:30:59Z","updated_at":"2019-10-24T00:30:59Z","author_association":"CONTRIBUTOR","body":"@18549 Would you be able to provide a list of the explicit steps that you performed? For example,\r\n\r\n1. Installed Elasticsearch 7.3.0 using the MSI. Ran with the defaults _except_ chose to manually start the Windows Service. (If you have the MSI log file here too, that will be super helpful. As with any MSI installation package, a log file for the installation process can be found within the `%TEMP%` directory, with a randomly generated name adhering to the format `MSI<random>.LOG`.).\r\n2. Start Windows Service using the Service Control Manager GUI / PowerShell on command line\r\n\r\netc.\r\n\r\nAs @rjernst says, the error message is odd here as the elasticsearch.exe installed by the MSI doesn't use Apache Commons Daemon to run. In what file (name and path) was this log line found?\r\n\r\nDo you have any other versions of Elasticsearch installed on the machine? If so, were they installed using the MSI or using the zip distribution? Was installation of Elasticsearch 7.3.0 with the MSI a clean installation, or was it an upgrade of a previously installed version?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/545739559","html_url":"https://github.com/elastic/elasticsearch/issues/48145#issuecomment-545739559","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48145","id":545739559,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTczOTU1OQ==","user":{"login":"russcam","id":208231,"node_id":"MDQ6VXNlcjIwODIzMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/208231?v=4","gravatar_id":"","url":"https://api.github.com/users/russcam","html_url":"https://github.com/russcam","followers_url":"https://api.github.com/users/russcam/followers","following_url":"https://api.github.com/users/russcam/following{/other_user}","gists_url":"https://api.github.com/users/russcam/gists{/gist_id}","starred_url":"https://api.github.com/users/russcam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/russcam/subscriptions","organizations_url":"https://api.github.com/users/russcam/orgs","repos_url":"https://api.github.com/users/russcam/repos","events_url":"https://api.github.com/users/russcam/events{/privacy}","received_events_url":"https://api.github.com/users/russcam/received_events","type":"User","site_admin":false},"created_at":"2019-10-24T04:32:38Z","updated_at":"2019-10-24T04:32:38Z","author_association":"CONTRIBUTOR","body":"I've run through the following steps:\r\n\r\n1. Installed Elasticsearch 7.3.0 using the MSI, with all default settings.\r\n2. Verified Elasticsearch is running\r\n3. Stopped Elasticsearch service using the Services control panel\r\n4. Deleted the `elasticsearch` folder created in `C:\\WINDOWS\\TEMP`. This is where installation of the Windows service and the default account that it runs under will create this directory. This can be verified using the Nodes API `http://localhost:9200/_nodes?filter_path=nodes.*.jvm.input_arguments`\r\n\r\n    which returns the following\r\n\r\n    ```\r\n    {\r\n        \"nodes\": {\r\n            \"dx9fhEVGQZySGjs-CWQdyQ\": {\r\n                \"jvm\": {\r\n                    \"input_arguments\": [\r\n                        \"-XX:+UseConcMarkSweepGC\",\r\n                        \"-XX:CMSInitiatingOccupancyFraction=75\",\r\n                        \"-XX:+UseCMSInitiatingOccupancyOnly\",\r\n                        \"-Des.networkaddress.cache.ttl=60\",\r\n                        \"-Des.networkaddress.cache.negative.ttl=10\",\r\n                        \"-XX:+AlwaysPreTouch\",\r\n                        \"-Xss1m\",\r\n                        \"-Djava.awt.headless=true\",\r\n                        \"-Dfile.encoding=UTF-8\",\r\n                        \"-Djna.nosys=true\",\r\n                        \"-XX:-OmitStackTraceInFastThrow\",\r\n                        \"-Dio.netty.noUnsafe=true\",\r\n                        \"-Dio.netty.noKeySetOptimization=true\",\r\n                        \"-Dio.netty.recycler.maxCapacityPerThread=0\",\r\n                        \"-Dlog4j.shutdownHookEnabled=false\",\r\n                        \"-Dlog4j2.disable.jmx=true\",\r\n                        \"-Djava.io.tmpdir=C:\\\\WINDOWS\\\\TEMP\\\\elasticsearch\",\r\n                        \"-XX:+HeapDumpOnOutOfMemoryError\",\r\n                        \"-XX:HeapDumpPath=data\",\r\n                        \"-XX:ErrorFile=logs/hs_err_pid%p.log\",\r\n                        \"-Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,pid,tags:filecount=32,filesize=64m\",\r\n                        \"-Djava.locale.providers=COMPAT\",\r\n                        \"-Xmx2048m\",\r\n                        \"-Xms2048m\",\r\n                        \"-Dio.netty.allocator.type=pooled\",\r\n                        \"-XX:MaxDirectMemorySize=1073741824\",\r\n                        \"-Delasticsearch\",\r\n                        \"-Des.path.home=C:\\\\Program Files\\\\Elastic\\\\Elasticsearch\\\\7.3.0\",\r\n                        \"-Des.path.conf=C:\\\\ProgramData\\\\Elastic\\\\Elasticsearch\\\\config\"\r\n                    ]\r\n                }\r\n            }\r\n        }\r\n    }\r\n    ```\r\n5. Started Elasticsearch service again using the Services control panel\r\n6. Observed that the service successfully starts, Elasticsearch is running, and `elasticsearch` folder created in `C:\\WINDOWS\\TEMP`\r\n\r\nWith these steps, I can't replicate what you're seeing. I tried with Elasticsearch 7.3.0 and latest 7.4.1.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/545985008","html_url":"https://github.com/elastic/elasticsearch/issues/48145#issuecomment-545985008","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48145","id":545985008,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTk4NTAwOA==","user":{"login":"18549","id":46347740,"node_id":"MDQ6VXNlcjQ2MzQ3NzQw","avatar_url":"https://avatars2.githubusercontent.com/u/46347740?v=4","gravatar_id":"","url":"https://api.github.com/users/18549","html_url":"https://github.com/18549","followers_url":"https://api.github.com/users/18549/followers","following_url":"https://api.github.com/users/18549/following{/other_user}","gists_url":"https://api.github.com/users/18549/gists{/gist_id}","starred_url":"https://api.github.com/users/18549/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/18549/subscriptions","organizations_url":"https://api.github.com/users/18549/orgs","repos_url":"https://api.github.com/users/18549/repos","events_url":"https://api.github.com/users/18549/events{/privacy}","received_events_url":"https://api.github.com/users/18549/received_events","type":"User","site_admin":false},"created_at":"2019-10-24T15:56:50Z","updated_at":"2019-10-24T15:56:50Z","author_association":"NONE","body":"I think I might have made a mistake and taken the version information from my development machine which has 7.3 on it that I installed using the bat file, whereas the server has 7.4 installed on it from the elasticsearch-7.4.0.msi Sorry about that.\r\n\r\nOn the server that experienced the failure the elasticsearch temp folder was initially created in my user directory, but now that directory is being created in c:\\windows\\temp, I don't know why that's changed but it seems happy enough now and we haven't experienced any subsequent failures.\r\n\r\nI can't find any msi logs left over from the original installation so seeing as how it's not reproducable and is working now I'm happy for this to be closed.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/546026540","html_url":"https://github.com/elastic/elasticsearch/issues/48145#issuecomment-546026540","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48145","id":546026540,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjAyNjU0MA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2019-10-24T17:43:10Z","updated_at":"2019-10-24T17:43:10Z","author_association":"MEMBER","body":"Thanks @18549","performed_via_github_app":null}]