{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9976","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9976/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9976/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9976/events","html_url":"https://github.com/elastic/elasticsearch/issues/9976","id":59787861,"node_id":"MDU6SXNzdWU1OTc4Nzg2MQ==","number":9976,"title":"Docs: Are there outdated APIs  (e.g., DateHistogram) in Java API docs? ","user":{"login":"saleese","id":1940613,"node_id":"MDQ6VXNlcjE5NDA2MTM=","avatar_url":"https://avatars2.githubusercontent.com/u/1940613?v=4","gravatar_id":"","url":"https://api.github.com/users/saleese","html_url":"https://github.com/saleese","followers_url":"https://api.github.com/users/saleese/followers","following_url":"https://api.github.com/users/saleese/following{/other_user}","gists_url":"https://api.github.com/users/saleese/gists{/gist_id}","starred_url":"https://api.github.com/users/saleese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saleese/subscriptions","organizations_url":"https://api.github.com/users/saleese/orgs","repos_url":"https://api.github.com/users/saleese/repos","events_url":"https://api.github.com/users/saleese/events{/privacy}","received_events_url":"https://api.github.com/users/saleese/received_events","type":"User","site_admin":false},"labels":[{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"}],"state":"closed","locked":false,"assignee":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"assignees":[{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2015-03-04T11:53:56Z","updated_at":"2015-06-16T07:45:52Z","closed_at":"2015-06-16T07:45:51Z","author_association":"NONE","active_lock_reason":null,"body":"I am checking the APIs in Java API docs, and it seems that I found outdated APIs. I hope some contributors may confirm whether the followings are outdated or not: \n1. QueryBuilders.queryString\n   https://github.com/elasticsearch/elasticsearch/blob/master/docs/java-api/search.asciidoc. The page includes the following code snippet:\n   MultiSearch API …\n\n``` java\nSearchRequestBuilder srb1 = node.client()\n     .prepareSearch().setQuery(QueryBuilders.queryString(\"elasticsearch\")).setSize(1);\n```\n\n==> I found that the QueryBuilders class does not have the queryString method.\n1. DateHistogram\n   https://github.com/elasticsearch/elasticsearch/blob/master/docs/java-api/aggs.asciidoc. The page includes the following code snippet:\n   Structuring aggregations …\n\n``` java\nSearchResponse sr = node.client().prepareSearch()     \n   .addAggregation(               \n      AggregationBuilders.terms(\"by_country\").field(\"country\")         \n      .subAggregation(AggregationBuilders.dateHistogram(\"by_year\")             \n      .field(\"dateOfBirth\")             \n      .interval((DateHistogram.Interval.YEAR)             \n .subAggregation(AggregationBuilders.avg(\"avg_children\").field(\"children\"))         )     \n)     \n.execute().actionGet();\n```\n\n==> I found that the DateHistogram class was deleted in Jan. 27th, this year. For the class, the following pages also should be checked: https://github.com/elasticsearch/elasticsearch/blob/master/docs/java-api/aggregations/bucket/datehistogram-aggregation.asciidoc\n1. DateRange\n   https://github.com/elasticsearch/elasticsearch/blob/master/docs/java-api/aggregations/bucket/daterange-aggregation.asciidoc.\n   Use aggregation response\n   Import Aggregation definition classes:\n\n``` java\nimport org.elasticsearch.search.aggregations.bucket.range.date.DateRange;\n// sr is here your SearchResponse object \nDateRange agg = sr.getAggregations().get(\"agg\");  \n// For each entry \nfor (DateRange.Bucket entry : agg.getBuckets()) {     \n   String key = entry.getKey();                    \n   // Date range as key     \n   DateTime fromAsDate = entry.getFromAsDate();    \n   // Date bucket from as a Date     \n   DateTime toAsDate = entry.getToAsDate();        \n   // Date bucket to as a Date     \n   long docCount = entry.getDocCount();            \n   // Doc count      \n   logger.info(\"key [{}], from [{}], to [{}], doc_count [{}]\", key, fromAsDate, toAsDate, docCount); }\n```\n\n==> I found that the DateRange class was deleted in Jan. 27th, this year, and does not exist anymore. \n1. IPv4Range\n   https://github.com/elasticsearch/elasticsearch/blob/master/docs/java-api/aggregations/bucket/iprange-aggregation.asciidoc\n   Use aggregation response\n   Import Aggregation definition classes:\n\n``` java\nimport org.elasticsearch.search.aggregations.bucket.range.ipv4.IPv4Range;\n// sr is here your SearchResponse object \nIPv4Range agg = sr.getAggregations().get(\"agg\");  \n// For each entry \nfor (IPv4Range.Bucket entry : agg.getBuckets()) {\n     String key = entry.getKey();                    \n     // Ip range as key     \n     String fromAsString = entry.getFromAsString();  \n     // Ip bucket from as a String     \n     String toAsString = entry.getToAsString();      \n     // Ip bucket to as a String     \n     long docCount = entry.getDocCount();            \n     // Doc count      \n     logger.info(\"key [{}], from [{}], to [{}], doc_count [{}]\", key, fromAsString, toAsString, docCount); }\n```\n\n==> I found that the IPv4Range class was also deleted in Jan. 27th, this year. \n\nThanks in advance,\nSeonah\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}