[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/67180746","html_url":"https://github.com/elastic/elasticsearch/issues/8976#issuecomment-67180746","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8976","id":67180746,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTgwNzQ2","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2014-12-16T15:53:37Z","updated_at":"2014-12-16T15:53:37Z","author_association":"CONTRIBUTOR","body":"Could you add more information around the costs and benefits compared to Elasticsearch's traditional replication?  Could you compare and contrast this to SOLR's old master/slave replication system?  It reads a lot like I remember that working except that I imagine you can fail over to a shadow replica.  Or maybe you can't do that without losing data?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/67181316","html_url":"https://github.com/elastic/elasticsearch/issues/8976#issuecomment-67181316","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8976","id":67181316,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTgxMzE2","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2014-12-16T15:56:50Z","updated_at":"2014-12-16T15:56:50Z","author_association":"MEMBER","body":"@nik9000 good idea, I have added a costs/benefits section at the end of the issue body\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/67181951","html_url":"https://github.com/elastic/elasticsearch/issues/8976#issuecomment-67181951","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8976","id":67181951,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTgxOTUx","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2014-12-16T16:00:38Z","updated_at":"2014-12-16T16:00:38Z","author_association":"MEMBER","body":"this is mainly beneficial for the shared storage use case, I think we can add the cost / benefits on that section as well. Where in the shared storage case, the same shard is pointing to the same location from all copies of the shard, one reduces the index size (relaying on the shared storage (block) storage replication semantics). The cost is that ES flushes will control the visibility of data for search on the replica shards (flush is more expensive), since a lucene commit needs to be initiated, and that failover will take longer since a new IndexWriter will need to be opened on the newly promoted primary shard.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/67183801","html_url":"https://github.com/elastic/elasticsearch/issues/8976#issuecomment-67183801","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8976","id":67183801,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTgzODAx","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2014-12-16T16:10:51Z","updated_at":"2014-12-16T16:10:51Z","author_association":"CONTRIBUTOR","body":"> Search and retrieval are not real time\n\nI think this'd be super variable.  Usually it'd be quite quick to just sync out the new segments and tombstones for old segments but after a merge you could end up syncing data out for many minutes unless you crank up the rate limits.\n\n> this is mainly beneficial for the shared storage use case, I think we can add the cost / benefits on that section as well. Where in the shared storage case, the same shard is pointing to the same location from all copies of the shard, one reduces the index size (relaying on the shared storage (block) storage replication semantics). The cost is that ES flushes will control the visibility of data for search on the replica shards (flush is more expensive), since a lucene commit needs to be initiated, and that failover will take longer since a new IndexWriter will need to be opened on the newly promoted primary shard.\n\nI agree this makes more sense in a shared storage environment.  Maybe a note on some of the cost lines saying they don't apply to shared storage?\n\nIs the plan to keep multiple copies of the data in the same shared volume or have each shadow replica read the master's files?  I don't know how easy sharing files with the master would be but it'd provide more obvious disk savings.  I think.  I know shared storage will typically come with deduplication on the storage side but the last time I looked into it that was a batch operation.\n\n> In order to ensure the data is being synchronized in a fast enough manner, The\n> user will need to tune the flush threshold for the index to a desired number. A\n> flush is needed to fsync segment files to disk, so they will be visible to all\n> other replica nodes. Users should test what flush threshold levels they are\n> comfortable with, as increased flushing can impact indexing performance. This\n> testing can be performed at any time, there is no need to wait for this feature\n> to be available first.\n\nThat should be fine for high end shared storage users though.  Fsync is comparatively very cheep on those systems with huge battery backed write behind caches.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/75734317","html_url":"https://github.com/elastic/elasticsearch/issues/8976#issuecomment-75734317","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8976","id":75734317,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NzM0MzE3","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-02-24T10:41:21Z","updated_at":"2015-02-24T10:41:21Z","author_association":"CONTRIBUTOR","body":"@dakrone I pushed the prototype for non-fs to a branch based on top of todays master.... just for reference though\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/106841927","html_url":"https://github.com/elastic/elasticsearch/issues/8976#issuecomment-106841927","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8976","id":106841927,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNjg0MTkyNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-05-29T15:11:22Z","updated_at":"2015-05-29T15:11:22Z","author_association":"CONTRIBUTOR","body":"Closing - added in v1.5.0\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/106866911","html_url":"https://github.com/elastic/elasticsearch/issues/8976#issuecomment-106866911","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8976","id":106866911,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNjg2NjkxMQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2015-05-29T16:40:08Z","updated_at":"2015-05-29T16:40:08Z","author_association":"MEMBER","body":"Re-opening, this is a meta issue, still needs stage 3 to be implemented.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/199605473","html_url":"https://github.com/elastic/elasticsearch/issues/8976#issuecomment-199605473","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8976","id":199605473,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTYwNTQ3Mw==","user":{"login":"makeyang","id":13898618,"node_id":"MDQ6VXNlcjEzODk4NjE4","avatar_url":"https://avatars2.githubusercontent.com/u/13898618?v=4","gravatar_id":"","url":"https://api.github.com/users/makeyang","html_url":"https://github.com/makeyang","followers_url":"https://api.github.com/users/makeyang/followers","following_url":"https://api.github.com/users/makeyang/following{/other_user}","gists_url":"https://api.github.com/users/makeyang/gists{/gist_id}","starred_url":"https://api.github.com/users/makeyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/makeyang/subscriptions","organizations_url":"https://api.github.com/users/makeyang/orgs","repos_url":"https://api.github.com/users/makeyang/repos","events_url":"https://api.github.com/users/makeyang/events{/privacy}","received_events_url":"https://api.github.com/users/makeyang/received_events","type":"User","site_admin":false},"created_at":"2016-03-22T03:05:30Z","updated_at":"2016-03-22T03:05:30Z","author_association":"CONTRIBUTOR","body":"so in 2.4, the shadow replica can be used on normal filesystem?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/199705838","html_url":"https://github.com/elastic/elasticsearch/issues/8976#issuecomment-199705838","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8976","id":199705838,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTcwNTgzOA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-03-22T08:54:24Z","updated_at":"2016-03-22T08:54:24Z","author_association":"CONTRIBUTOR","body":"@makeyang no we are currently not working on stage 3\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/199717438","html_url":"https://github.com/elastic/elasticsearch/issues/8976#issuecomment-199717438","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8976","id":199717438,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTcxNzQzOA==","user":{"login":"makeyang","id":13898618,"node_id":"MDQ6VXNlcjEzODk4NjE4","avatar_url":"https://avatars2.githubusercontent.com/u/13898618?v=4","gravatar_id":"","url":"https://api.github.com/users/makeyang","html_url":"https://github.com/makeyang","followers_url":"https://api.github.com/users/makeyang/followers","following_url":"https://api.github.com/users/makeyang/following{/other_user}","gists_url":"https://api.github.com/users/makeyang/gists{/gist_id}","starred_url":"https://api.github.com/users/makeyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/makeyang/subscriptions","organizations_url":"https://api.github.com/users/makeyang/orgs","repos_url":"https://api.github.com/users/makeyang/repos","events_url":"https://api.github.com/users/makeyang/events{/privacy}","received_events_url":"https://api.github.com/users/makeyang/received_events","type":"User","site_admin":false},"created_at":"2016-03-22T09:34:56Z","updated_at":"2016-03-22T09:34:56Z","author_association":"CONTRIBUTOR","body":"in 2.4, which stage are we in and before 2.4, which stage are we in?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/200036791","html_url":"https://github.com/elastic/elasticsearch/issues/8976#issuecomment-200036791","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8976","id":200036791,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMDAzNjc5MQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-03-22T21:27:02Z","updated_at":"2016-03-22T21:27:02Z","author_association":"MEMBER","body":"> in 2.4, which stage are we in and before 2.4, which stage are we in?\n\n@makeyang in both cases (before and after release) stage 3 is currently not being worked on.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215333588","html_url":"https://github.com/elastic/elasticsearch/issues/8976#issuecomment-215333588","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8976","id":215333588,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTMzMzU4OA==","user":{"login":"chenryn","id":1219655,"node_id":"MDQ6VXNlcjEyMTk2NTU=","avatar_url":"https://avatars3.githubusercontent.com/u/1219655?v=4","gravatar_id":"","url":"https://api.github.com/users/chenryn","html_url":"https://github.com/chenryn","followers_url":"https://api.github.com/users/chenryn/followers","following_url":"https://api.github.com/users/chenryn/following{/other_user}","gists_url":"https://api.github.com/users/chenryn/gists{/gist_id}","starred_url":"https://api.github.com/users/chenryn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenryn/subscriptions","organizations_url":"https://api.github.com/users/chenryn/orgs","repos_url":"https://api.github.com/users/chenryn/repos","events_url":"https://api.github.com/users/chenryn/events{/privacy}","received_events_url":"https://api.github.com/users/chenryn/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T07:23:22Z","updated_at":"2016-04-28T07:23:22Z","author_association":"NONE","body":"stage 3 would not be implemented?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215541859","html_url":"https://github.com/elastic/elasticsearch/issues/8976#issuecomment-215541859","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8976","id":215541859,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTU0MTg1OQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T19:49:17Z","updated_at":"2016-04-28T19:49:17Z","author_association":"MEMBER","body":"@chenryn it's not currently being worked on, but doesn't mean there isn't interest.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304361440","html_url":"https://github.com/elastic/elasticsearch/issues/8976#issuecomment-304361440","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8976","id":304361440,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDM2MTQ0MA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2017-05-26T18:53:09Z","updated_at":"2017-05-26T18:53:09Z","author_association":"MEMBER","body":"Shadow replicas have been removed and this is no longer applicable","performed_via_github_app":null}]