[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17340770","html_url":"https://github.com/elastic/elasticsearch/issues/2967#issuecomment-17340770","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2967","id":17340770,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzQwNzcw","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2013-05-02T14:23:01Z","updated_at":"2013-05-02T14:23:01Z","author_association":"MEMBER","body":"I'm not sure if this should be supported, it can lead to unexpected behaviour (like what executes first). It is not a common use case. I think the best way to handle this is to just add your partial document to the script itself.\n\nIf both `script` and `doc` is specified, then `doc` is ignored. I agree the documentation should  be clearer about this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17341027","html_url":"https://github.com/elastic/elasticsearch/issues/2967#issuecomment-17341027","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2967","id":17341027,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzQxMDI3","user":{"login":"akahn","id":26099,"node_id":"MDQ6VXNlcjI2MDk5","avatar_url":"https://avatars2.githubusercontent.com/u/26099?v=4","gravatar_id":"","url":"https://api.github.com/users/akahn","html_url":"https://github.com/akahn","followers_url":"https://api.github.com/users/akahn/followers","following_url":"https://api.github.com/users/akahn/following{/other_user}","gists_url":"https://api.github.com/users/akahn/gists{/gist_id}","starred_url":"https://api.github.com/users/akahn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akahn/subscriptions","organizations_url":"https://api.github.com/users/akahn/orgs","repos_url":"https://api.github.com/users/akahn/repos","events_url":"https://api.github.com/users/akahn/events{/privacy}","received_events_url":"https://api.github.com/users/akahn/received_events","type":"User","site_admin":false},"created_at":"2013-05-02T14:27:41Z","updated_at":"2013-05-02T14:27:49Z","author_association":"CONTRIBUTOR","body":"Thanks. Adding my document to the script itself is the workaround I chose. \n\nWhat do you think of elasticsearch returning a client error when multiple update methods are provided?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17341588","html_url":"https://github.com/elastic/elasticsearch/issues/2967#issuecomment-17341588","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2967","id":17341588,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzQxNTg4","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2013-05-02T14:36:55Z","updated_at":"2013-05-02T14:36:55Z","author_association":"MEMBER","body":"Returning a client error makes sense when both `script` and `doc` is specified. This should be added.\n\nBtw: you can also add your partial document as a parameter to the script. This is a nice optimisation because it allows Elasticsearch to cache the compiled version of the script.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17343852","html_url":"https://github.com/elastic/elasticsearch/issues/2967#issuecomment-17343852","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2967","id":17343852,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzQzODUy","user":{"login":"akahn","id":26099,"node_id":"MDQ6VXNlcjI2MDk5","avatar_url":"https://avatars2.githubusercontent.com/u/26099?v=4","gravatar_id":"","url":"https://api.github.com/users/akahn","html_url":"https://github.com/akahn","followers_url":"https://api.github.com/users/akahn/followers","following_url":"https://api.github.com/users/akahn/following{/other_user}","gists_url":"https://api.github.com/users/akahn/gists{/gist_id}","starred_url":"https://api.github.com/users/akahn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akahn/subscriptions","organizations_url":"https://api.github.com/users/akahn/orgs","repos_url":"https://api.github.com/users/akahn/repos","events_url":"https://api.github.com/users/akahn/events{/privacy}","received_events_url":"https://api.github.com/users/akahn/received_events","type":"User","site_admin":false},"created_at":"2013-05-02T15:13:46Z","updated_at":"2013-05-02T15:13:46Z","author_association":"CONTRIBUTOR","body":"Cool. I will take a look at that and try to submit a patch.\n\nCan you explain what you mean by adding a partial document as a parameter to the script? Right now I'm just doing `ctx._source.count += 1; ctx._source.foo = 'barbaz';â€¦`.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17689432","html_url":"https://github.com/elastic/elasticsearch/issues/2967#issuecomment-17689432","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2967","id":17689432,"node_id":"MDEyOklzc3VlQ29tbWVudDE3Njg5NDMy","user":{"login":"akahn","id":26099,"node_id":"MDQ6VXNlcjI2MDk5","avatar_url":"https://avatars2.githubusercontent.com/u/26099?v=4","gravatar_id":"","url":"https://api.github.com/users/akahn","html_url":"https://github.com/akahn","followers_url":"https://api.github.com/users/akahn/followers","following_url":"https://api.github.com/users/akahn/following{/other_user}","gists_url":"https://api.github.com/users/akahn/gists{/gist_id}","starred_url":"https://api.github.com/users/akahn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akahn/subscriptions","organizations_url":"https://api.github.com/users/akahn/orgs","repos_url":"https://api.github.com/users/akahn/repos","events_url":"https://api.github.com/users/akahn/events{/privacy}","received_events_url":"https://api.github.com/users/akahn/received_events","type":"User","site_admin":false},"created_at":"2013-05-09T20:59:01Z","updated_at":"2013-05-09T20:59:01Z","author_association":"CONTRIBUTOR","body":"@martijnvg The above patch makes elasticsearch consider an update request invalid if it contains both both doc and script.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17692026","html_url":"https://github.com/elastic/elasticsearch/issues/2967#issuecomment-17692026","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2967","id":17692026,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NjkyMDI2","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2013-05-09T21:46:22Z","updated_at":"2013-05-09T21:46:22Z","author_association":"MEMBER","body":"@akahn Looks good, I will pull this in soon.\n\nI meant that `1` and `barbaz` are provided as argument to the script like this:\n\n```\n\"script\" : \"ctx._source.counter += count; ctx._source.foo = foo;\",\n    \"params\" : {\n        \"count\" : 4,\n        \"foo\" : \"barbaz\"\n    },\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/344237771","html_url":"https://github.com/elastic/elasticsearch/issues/2967#issuecomment-344237771","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2967","id":344237771,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDIzNzc3MQ==","user":{"login":"thefourtheye","id":696611,"node_id":"MDQ6VXNlcjY5NjYxMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/696611?v=4","gravatar_id":"","url":"https://api.github.com/users/thefourtheye","html_url":"https://github.com/thefourtheye","followers_url":"https://api.github.com/users/thefourtheye/followers","following_url":"https://api.github.com/users/thefourtheye/following{/other_user}","gists_url":"https://api.github.com/users/thefourtheye/gists{/gist_id}","starred_url":"https://api.github.com/users/thefourtheye/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thefourtheye/subscriptions","organizations_url":"https://api.github.com/users/thefourtheye/orgs","repos_url":"https://api.github.com/users/thefourtheye/repos","events_url":"https://api.github.com/users/thefourtheye/events{/privacy}","received_events_url":"https://api.github.com/users/thefourtheye/received_events","type":"User","site_admin":false},"created_at":"2017-11-14T12:00:40Z","updated_at":"2017-11-14T12:00:40Z","author_association":"CONTRIBUTOR","body":"> I think the best way to handle this is to just add your partial document to the script itself.\r\n\r\nHow do I do that? Could someone give an example?","performed_via_github_app":null}]