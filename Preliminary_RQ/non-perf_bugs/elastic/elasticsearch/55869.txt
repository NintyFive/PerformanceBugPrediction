{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/55869","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55869/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55869/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55869/events","html_url":"https://github.com/elastic/elasticsearch/issues/55869","id":608436742,"node_id":"MDU6SXNzdWU2MDg0MzY3NDI=","number":55869,"title":"[CI] org.elasticsearch.discovery.ClusterDisruptionIT » testRestartNodeWhileIndexing failed on master","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"labels":[{"id":836504707,"node_id":"MDU6TGFiZWw4MzY1MDQ3MDc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Distributed","name":":Distributed/Distributed","color":"0e8a16","default":false,"description":"A catch all label for anything in the Distributed Area. If you aren't sure, use this one."},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":1967496670,"node_id":"MDU6TGFiZWwxOTY3NDk2Njcw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Distributed","name":"Team:Distributed","color":"fef2c0","default":false,"description":"Meta label for distributed team"}],"state":"closed","locked":false,"assignee":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"assignees":[{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2020-04-28T16:06:13Z","updated_at":"2020-04-28T17:39:17Z","closed_at":"2020-04-28T17:39:17Z","author_association":"MEMBER","active_lock_reason":null,"body":"Failure looks like it missed some documents after the restart:\r\n\r\n```\r\n:server:integTest » org.elasticsearch.discovery.ClusterDisruptionIT » testRestartNodeWhileIndexing (56.774s)\r\n\r\nExpected: a value equal to or greater than <100>\r\n     but: <51> was less than <100>\r\njava.lang.AssertionError:\r\n\r\nExpected: a value equal to or greater than <100>\r\n     but: <51> was less than <100>\r\nat __randomizedtesting.SeedInfo.seed([81650DAFA571AE12:EE85DE97AD79E6E0]:0)\r\nat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\nat org.junit.Assert.assertThat(Assert.java:956)\r\nat org.junit.Assert.assertThat(Assert.java:923)\r\nat org.elasticsearch.discovery.ClusterDisruptionIT.lambda$testRestartNodeWhileIndexing$10(ClusterDisruptionIT.java:492)\r\nat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:892)\r\nat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:865)\r\nat org.elasticsearch.discovery.ClusterDisruptionIT.testRestartNodeWhileIndexing(ClusterDisruptionIT.java:492)\r\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nat java.lang.reflect.Method.invoke(Method.java:566)\r\nat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1758)\r\nat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)\r\n```\r\n\r\nThe reproduce line is:\r\n\r\n```\r\n./gradlew ':server:integTest' --tests \"org.elasticsearch.discovery.ClusterDisruptionIT.testRestartNodeWhileIndexing\" -Dtests.seed=81650DAFA571AE12 -Dtests.security.manager=true -Dtests.locale=lt -Dtests.timezone=America/Panama -Dcompiler.java=14 -Druntime.java=11\r\n```\r\n\r\nBut it doesn't reproduce for me.\r\n\r\nLink: https://gradle-enterprise.elastic.co/s/uswlaskxqvvtw/tests/kyv2y2z3r4v7k-5jnxwnv3ti4aw?open-stacktraces=WzBd","closed_by":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"performed_via_github_app":null}