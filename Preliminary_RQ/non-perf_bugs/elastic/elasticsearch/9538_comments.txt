[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113304727","html_url":"https://github.com/elastic/elasticsearch/issues/9538#issuecomment-113304727","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9538","id":113304727,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzMwNDcyNw==","user":{"login":"vineelyalamarthy","id":515877,"node_id":"MDQ6VXNlcjUxNTg3Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/515877?v=4","gravatar_id":"","url":"https://api.github.com/users/vineelyalamarthy","html_url":"https://github.com/vineelyalamarthy","followers_url":"https://api.github.com/users/vineelyalamarthy/followers","following_url":"https://api.github.com/users/vineelyalamarthy/following{/other_user}","gists_url":"https://api.github.com/users/vineelyalamarthy/gists{/gist_id}","starred_url":"https://api.github.com/users/vineelyalamarthy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vineelyalamarthy/subscriptions","organizations_url":"https://api.github.com/users/vineelyalamarthy/orgs","repos_url":"https://api.github.com/users/vineelyalamarthy/repos","events_url":"https://api.github.com/users/vineelyalamarthy/events{/privacy}","received_events_url":"https://api.github.com/users/vineelyalamarthy/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T22:24:20Z","updated_at":"2015-06-18T22:24:20Z","author_association":"NONE","body":"@clintongormley   can u please tell me how to complete rest of this bug (It says 2 out of 6 completed,can u give any pointers)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/297871615","html_url":"https://github.com/elastic/elasticsearch/issues/9538#issuecomment-297871615","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9538","id":297871615,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Nzg3MTYxNQ==","user":{"login":"zyqu","id":2723844,"node_id":"MDQ6VXNlcjI3MjM4NDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/2723844?v=4","gravatar_id":"","url":"https://api.github.com/users/zyqu","html_url":"https://github.com/zyqu","followers_url":"https://api.github.com/users/zyqu/followers","following_url":"https://api.github.com/users/zyqu/following{/other_user}","gists_url":"https://api.github.com/users/zyqu/gists{/gist_id}","starred_url":"https://api.github.com/users/zyqu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyqu/subscriptions","organizations_url":"https://api.github.com/users/zyqu/orgs","repos_url":"https://api.github.com/users/zyqu/repos","events_url":"https://api.github.com/users/zyqu/events{/privacy}","received_events_url":"https://api.github.com/users/zyqu/received_events","type":"User","site_admin":false},"created_at":"2017-04-28T00:02:02Z","updated_at":"2017-04-28T00:02:02Z","author_association":"NONE","body":"Greetings, I am getting familiar with the code base and would like to contribute to this bug fix. \r\n\r\nMy plan is to a check on the content body of request in the method \"handleRequest\" of class \"org.elasticsearch.rest.BaseRestHandler\" regarding whether the byte array can be encoded into the utf8 character set properly. \r\n\r\nPlease let me know if you have any comment on the plan or the issue has been resolved by anyone else. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/297884132","html_url":"https://github.com/elastic/elasticsearch/issues/9538#issuecomment-297884132","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9538","id":297884132,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Nzg4NDEzMg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-04-28T01:37:44Z","updated_at":"2017-04-28T01:38:06Z","author_association":"MEMBER","body":"That sounds like a very expensive thing to do on every request with a body.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/297888747","html_url":"https://github.com/elastic/elasticsearch/issues/9538#issuecomment-297888747","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9538","id":297888747,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Nzg4ODc0Nw==","user":{"login":"zyqu","id":2723844,"node_id":"MDQ6VXNlcjI3MjM4NDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/2723844?v=4","gravatar_id":"","url":"https://api.github.com/users/zyqu","html_url":"https://github.com/zyqu","followers_url":"https://api.github.com/users/zyqu/followers","following_url":"https://api.github.com/users/zyqu/following{/other_user}","gists_url":"https://api.github.com/users/zyqu/gists{/gist_id}","starred_url":"https://api.github.com/users/zyqu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyqu/subscriptions","organizations_url":"https://api.github.com/users/zyqu/orgs","repos_url":"https://api.github.com/users/zyqu/repos","events_url":"https://api.github.com/users/zyqu/events{/privacy}","received_events_url":"https://api.github.com/users/zyqu/received_events","type":"User","site_admin":false},"created_at":"2017-04-28T02:13:42Z","updated_at":"2017-04-28T02:13:42Z","author_association":"NONE","body":"Or only verify the input in the method \"prepareRequest\" of class \"org.elasticsearch.rest.action.document.RestIndexAction\"?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372440939","html_url":"https://github.com/elastic/elasticsearch/issues/9538#issuecomment-372440939","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9538","id":372440939,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MjQ0MDkzOQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2018-03-12T19:51:46Z","updated_at":"2018-03-12T19:51:46Z","author_association":"CONTRIBUTOR","body":"I'm not sure this is actually a problem with the REST layer. At least, it doesn't have to be. One way to fix this is to add the validity assertions to the places where they are needed. Like, we could assert valid utf-8 as we parse the `_source`. In most other cases I think invalid utf-8 is just going to result in a parse error anyway because the field won't be recognized. I suppose for things like script parameters it *might* make it through and be useless.\r\n\r\nI'm not super sure how useful this is to do on our side. I mean, it is certainly confusing on the client side to get things back you can't parse, especially if you didn't produce the invalid utf-8 in the first place. Which makes me think that maybe this is more important for things like settings values and `_source` but not something we need to do on every request with a body.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/373088151","html_url":"https://github.com/elastic/elasticsearch/issues/9538#issuecomment-373088151","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9538","id":373088151,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MzA4ODE1MQ==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-03-14T16:34:32Z","updated_at":"2018-03-14T16:34:32Z","author_association":"CONTRIBUTOR","body":"[RFC 7159 section 8.2](https://tools.ietf.org/html/rfc7159#section-8.2) says:\r\n\r\n> However, the ABNF in this specification allows member names and string values to contain bit sequences that cannot encode Unicode characters; for example, \"\\uDEAD\" (a single unpaired UTF-16 surrogate).  Instances of this have been observed, for example, when a library truncates a UTF-16 string without checking whether the truncation split a surrogate pair.  The behavior of software that receives JSON texts containing such values is unpredictable; for example, implementations might return different values for the length of a string value or even suffer fatal runtime exceptions.\r\n\r\nThe right thing to do here is undefined, but I'm inclined to think that accepting it is best. One possible reason to support this is that Windows pathnames are allowed to include unpaired surrogates, so rejecting them could trip up anyone who is trying to store Windows pathnames in Elasticsearch, e.g. for security audit purposes.\r\n\r\nAccepting it is [what Jackson does](http://seriot.ch/json/parsing.html#22) which is why Elasticsearch does so, and adding extra restrictions would be painful.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/373089481","html_url":"https://github.com/elastic/elasticsearch/issues/9538#issuecomment-373089481","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9538","id":373089481,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MzA4OTQ4MQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2018-03-14T16:38:14Z","updated_at":"2018-03-14T16:38:14Z","author_association":"CONTRIBUTOR","body":"Yeah. In this case I'm going to close as \"won'tfix\" with the guidance: \"don't put invalid utf-8 in the index if you can't handle it\".","performed_via_github_app":null}]