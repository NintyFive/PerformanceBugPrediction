{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14781","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14781/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14781/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14781/events","html_url":"https://github.com/elastic/elasticsearch/issues/14781","id":117191737,"node_id":"MDU6SXNzdWUxMTcxOTE3Mzc=","number":14781,"title":"_type not using doc_values in ES 2.0","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"labels":[{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-11-16T18:45:06Z","updated_at":"2015-11-16T21:09:49Z","closed_at":"2015-11-16T21:09:49Z","author_association":"MEMBER","active_lock_reason":null,"body":"```\nPOST /_cache/clear\nDELETE testfd\nPOST testfd/type/1\n{\n  \"test\":\"test\"\n}\nGET testfd/_search\n{\n  \"size\": 0, \n  \"aggs\": {\n    \"NAME\": {\n      \"terms\": {\n        \"field\": \"_type\",\n        \"size\": 10\n      }\n    }\n  }\n}\n\nGET /_cat/fielddata?v\n```\n\nTesting on ES 1.7 and ES 2.0, the above loads the same amount of fielddata into the fd cache.\n\nOn ES 1.7, put mapping api's change of _type to use doc_values or disable fd options do not throw an error, but they are not honored.\n\nOn ES 2.0, we explicitly throw an error when someone tries to modify the _type.  However, it also appears that we do not use doc_values for _type by default in ES 2.0.\n\nIf this is the expected behavior, it will be nice to document accordingly.  We do have use cases in the field where users are aggregating against the _type field.  Workaround is to tag each document with a custom \"type\" field and educate users to aggregate against this field instead of _type, though it will be helpful to provide a way to disable fielddata loading for _type as well.\n","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}