[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86490909","html_url":"https://github.com/elastic/elasticsearch/issues/10267#issuecomment-86490909","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10267","id":86490909,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NDkwOTA5","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-03-26T12:34:03Z","updated_at":"2015-03-26T12:34:03Z","author_association":"MEMBER","body":"> Have the impression that concurrent recoveries apply to both source and target nodes\n\nThe `cluster.routing.allocation.node_concurrent_recoveries` settings concerns initializng shards, which implicitly mean target nodes. \n\nFor the source node we have the `indices.recovery.concurrent_streams` which control how many concurrent out going file copy requests we can have. That effectively throttles recoveries on the source.  \n\nWas this causing any issue?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86731036","html_url":"https://github.com/elastic/elasticsearch/issues/10267#issuecomment-86731036","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10267","id":86731036,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NzMxMDM2","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2015-03-26T21:50:40Z","updated_at":"2015-03-26T21:50:40Z","author_association":"MEMBER","body":"Thanks @bleskes .  Tried `indices.recovery.concurrent_streams` but it does not appear to have an effect.  The following are the settings:\n\n```\n{\n   \"persistent\": {\n      \"indices\": {\n         \"recovery\": {\n            \"concurrent_streams\": \"1\"\n         }\n      },\n      \"cluster\": {\n         \"routing\": {\n            \"allocation\": {\n               \"cluster_concurrent_rebalance\": \"2\",\n               \"node_concurrent_recoveries\": \"2\"\n            }\n         }\n      }\n   },\n   \"transient\": {}\n}\n```\n\nAnd the source is still showing 6 out going file copy requests.\n\n![image](https://cloud.githubusercontent.com/assets/7216393/6857863/0b920fea-d3c7-11e4-89d0-75f1dfe44a9e.png)\n\nFor a ~100 node cluster with a node getting excluded, this is causing many out going file copy requests from the source node.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87451678","html_url":"https://github.com/elastic/elasticsearch/issues/10267#issuecomment-87451678","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10267","id":87451678,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NDUxNjc4","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-03-29T18:10:45Z","updated_at":"2015-03-29T18:10:45Z","author_association":"MEMBER","body":"@ppf2  yeah. I agree it's confusing. `indices.recovery.concurrent_streams` doesn't limit the number of source recoveries that can go on but rather how big the pull of out going requests they can have. The default of 3 means that all the recoveries copying files of a node can only have 3 \"inflight\" requests _together_. We also have a separate pool (and setting) for very small files to make sure those are not blocked by 3 large files. I'm wondering if we can just make do with the same concurrent recoveries as we do for the target side.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162245324","html_url":"https://github.com/elastic/elasticsearch/issues/10267#issuecomment-162245324","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10267","id":162245324,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjI0NTMyNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-12-05T20:59:27Z","updated_at":"2015-12-05T20:59:27Z","author_association":"CONTRIBUTOR","body":"@bleskes anything to do here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162285592","html_url":"https://github.com/elastic/elasticsearch/issues/10267#issuecomment-162285592","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10267","id":162285592,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjI4NTU5Mg==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-12-06T08:00:05Z","updated_at":"2015-12-06T08:00:05Z","author_association":"MEMBER","body":"yeah, I think this is still an open confusion. There were some extra discussion https://github.com/elastic/elasticsearch/issues/15161#issuecomment-161227518 and  https://github.com/elastic/elasticsearch/issues/15161#issuecomment-161755836 \n\nThe gist of the concern is that we need to find a way not to throttle recovery of replicas (from the primary)  for new indices. The reason is that two long ongoing relocations doesn't throttle getting to green when creating new indices (who's shard are small/empty so they don't matter).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/374535335","html_url":"https://github.com/elastic/elasticsearch/issues/10267#issuecomment-374535335","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10267","id":374535335,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NDUzNTMzNQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-20T09:46:00Z","updated_at":"2018-03-20T09:46:00Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/374536572","html_url":"https://github.com/elastic/elasticsearch/issues/10267#issuecomment-374536572","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10267","id":374536572,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NDUzNjU3Mg==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-03-20T09:50:14Z","updated_at":"2018-03-20T09:50:14Z","author_association":"CONTRIBUTOR","body":"This is an interesting idea but since its opening we have not seen enough feedback that it is something we should pursue. We prefer to close this issue as a clear indication that we are not going to work on this at this time. We are always open to reconsidering this in the future based on compelling feedback; despite this issue being closed please feel free to leave feedback (including +1s).\r\n","performed_via_github_app":null}]