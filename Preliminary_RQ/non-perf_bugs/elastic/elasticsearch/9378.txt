{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9378","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9378/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9378/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9378/events","html_url":"https://github.com/elastic/elasticsearch/issues/9378","id":55033364,"node_id":"MDU6SXNzdWU1NTAzMzM2NA==","number":9378,"title":"Replace a master node and using same node.name breaks cluster","user":{"login":"jlintz","id":121029,"node_id":"MDQ6VXNlcjEyMTAyOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/121029?v=4","gravatar_id":"","url":"https://api.github.com/users/jlintz","html_url":"https://github.com/jlintz","followers_url":"https://api.github.com/users/jlintz/followers","following_url":"https://api.github.com/users/jlintz/following{/other_user}","gists_url":"https://api.github.com/users/jlintz/gists{/gist_id}","starred_url":"https://api.github.com/users/jlintz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlintz/subscriptions","organizations_url":"https://api.github.com/users/jlintz/orgs","repos_url":"https://api.github.com/users/jlintz/repos","events_url":"https://api.github.com/users/jlintz/events{/privacy}","received_events_url":"https://api.github.com/users/jlintz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-01-21T15:29:23Z","updated_at":"2015-01-21T16:32:10Z","closed_at":"2015-01-21T16:32:10Z","author_association":"NONE","active_lock_reason":null,"body":"Recently on our logstash ES cluster we were running into memory issues on our master nodes so I went to upgrade the instance sizes on the nodes.  I replaced the 3 instance and re-used the same node.name as before.  After replacing them, the cluster health was green but logstash could not index to the cluster.  There were no errors, in the ES server logs on the master, client or data nodes.  Running logstash in debug showed it was receiving logs but then things seemed to be silently being dropped.  What finally got the cluster back into a working state was restarting ES on all the data nodes.  I assume there is some old IP being cached, but it was odd to not see any errors and the cluster health being reported as green.\n\nDid I do something wrong here?  For the time being I've put a note that in the event of replacing a failed node to just re-use a different hostname.  \n\nI'm running ES 1.3.4 on\njava version \"1.7.0_65\"\nOpenJDK Runtime Environment (IcedTea 2.5.3) (7u71-2.5.3-0ubuntu0.12.04.1)\nOpenJDK 64-Bit Server VM (build 24.65-b04, mixed mode)\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}