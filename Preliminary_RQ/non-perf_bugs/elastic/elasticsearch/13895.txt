{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/13895","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13895/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13895/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13895/events","html_url":"https://github.com/elastic/elasticsearch/issues/13895","id":109402300,"node_id":"MDU6SXNzdWUxMDk0MDIzMDA=","number":13895,"title":"ExtendableQueryParser equivalent in ElasticSearch?","user":{"login":"tad9ab","id":14132263,"node_id":"MDQ6VXNlcjE0MTMyMjYz","avatar_url":"https://avatars3.githubusercontent.com/u/14132263?v=4","gravatar_id":"","url":"https://api.github.com/users/tad9ab","html_url":"https://github.com/tad9ab","followers_url":"https://api.github.com/users/tad9ab/followers","following_url":"https://api.github.com/users/tad9ab/following{/other_user}","gists_url":"https://api.github.com/users/tad9ab/gists{/gist_id}","starred_url":"https://api.github.com/users/tad9ab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tad9ab/subscriptions","organizations_url":"https://api.github.com/users/tad9ab/orgs","repos_url":"https://api.github.com/users/tad9ab/repos","events_url":"https://api.github.com/users/tad9ab/events{/privacy}","received_events_url":"https://api.github.com/users/tad9ab/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-10-01T23:09:26Z","updated_at":"2018-02-14T13:30:50Z","closed_at":"2015-10-16T10:06:39Z","author_association":"NONE","active_lock_reason":null,"body":"I have a usecase to intercept a Lucene query from a user, then do query manipulation for certain fields so that we can make their query a bit more \"smart\".  For example, if they send us an IPv4 CIDR, we want to convert this to a numeric range.\n\nWe tried using the ExtendableQueryParser, then using the subsequent query in the QueryStringQueryBuilder.  This works for the most part, but gets tricky once special characters are introduced.  Lucene will \"drop\" these once the toString is called on the Query object that is created from parsing the string query.  When we feed this in to the QueryStringQueryParser, the query that is generated causes ES to fail because things aren't escaped properly anymore (because Lucene's QueryParser's toString removed them).\n\nMy hope is that if ExtendableQueryParser (or equivalent) was built into ES, we could just modify specific key/values in the query, and let everything else pass through.\n\nI can provide more info if needed, please let me know.\n\nEdit: we are using ES 1.7.2\n\nThanks!\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}