[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/686499166","html_url":"https://github.com/elastic/elasticsearch/issues/61913#issuecomment-686499166","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61913","id":686499166,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjQ5OTE2Ng==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-09-03T13:39:53Z","updated_at":"2020-09-03T13:39:53Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core (:ml)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/686501542","html_url":"https://github.com/elastic/elasticsearch/issues/61913#issuecomment-686501542","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61913","id":686501542,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjUwMTU0Mg==","user":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"created_at":"2020-09-03T13:43:31Z","updated_at":"2020-09-03T13:43:31Z","author_association":"MEMBER","body":"I think the test failed because it got an old snapshot of the c++ binary. I will investigate.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/686502968","html_url":"https://github.com/elastic/elasticsearch/issues/61913#issuecomment-686502968","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61913","id":686502968,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjUwMjk2OA==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2020-09-03T13:45:46Z","updated_at":"2020-09-03T13:45:46Z","author_association":"MEMBER","body":"Given the frequency of the failures, the test will be muted in #61914 and #61915.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/686503477","html_url":"https://github.com/elastic/elasticsearch/issues/61913#issuecomment-686503477","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61913","id":686503477,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjUwMzQ3Nw==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2020-09-03T13:46:37Z","updated_at":"2020-09-03T13:46:37Z","author_association":"MEMBER","body":"> I think the test failed because it got an old snapshot of the c++ binary. I will investigate.\r\n\r\n@benwtrent Note that it failed regularly on the last 30 days - but maybe for different causes","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/686507075","html_url":"https://github.com/elastic/elasticsearch/issues/61913#issuecomment-686507075","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61913","id":686507075,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjUwNzA3NQ==","user":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"created_at":"2020-09-03T13:52:03Z","updated_at":"2020-09-03T13:52:03Z","author_association":"MEMBER","body":"@tlrx thanks. I thought the new binary would fix it, but alas this failing build had the newest C++ binary. \r\n\r\nsome internal race condition is definitely occurring. Feel free to mute. Back to the drawing board :(","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/689015538","html_url":"https://github.com/elastic/elasticsearch/issues/61913#issuecomment-689015538","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61913","id":689015538,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTAxNTUzOA==","user":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"created_at":"2020-09-08T17:07:16Z","updated_at":"2020-09-08T17:07:16Z","author_association":"MEMBER","body":"When a job is forced closed, we simply remove the task from the cluster state and return to the caller. \r\n\r\nThis means we immediately perceive the job as closed, even though we persist progress during the `onCancelled()` callback.\r\n\r\nTo prevent this from happening, I have opened a PR that shortcuts progress storage if the previously stored progress is the same.\r\n\r\nWhen a job is failed, we persist the progress. \r\n\r\nThis means that when `onCancelled()` is called after a force close call, the current progress will be the same as the progress already persisted, and nothing will happen. \r\n\r\nHopefully, this fixes this race condition.","performed_via_github_app":null}]