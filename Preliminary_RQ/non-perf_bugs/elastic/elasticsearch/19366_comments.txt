[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/231781361","html_url":"https://github.com/elastic/elasticsearch/issues/19366#issuecomment-231781361","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19366","id":231781361,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTc4MTM2MQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-07-11T16:05:56Z","updated_at":"2016-07-11T16:05:56Z","author_association":"MEMBER","body":"The Elasticsearch REST APIs are JSON-based, so you can and should just submit the request here as a JSON request, submitting as YAML is not going to work here because of that detection.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/232345408","html_url":"https://github.com/elastic/elasticsearch/issues/19366#issuecomment-232345408","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19366","id":232345408,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjM0NTQwOA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-07-13T12:52:30Z","updated_at":"2016-07-13T12:52:30Z","author_association":"MEMBER","body":"actually we do support YAML as a body. The reason why it doesn't work is that the initial space in your body throws off the [auto detection](https://github.com/elastic/elasticsearch/blob/master/core/src/main/java/org/elasticsearch/common/xcontent/XContentFactory.java#L247). This works:\n\n```\nboaz$ curl -XPUT localhost:9200/some-index/_settings?pretty --data-binary '---\nanalysis:\n  analyzer:\n    default: { type: keyword }\n'\n```\n\nSadly we currently do not listen to the content type http header. This is discussed in #19388 . The result of that issue will also determine whether we want to be friendlier to yaml skip leading whitespace (as we now do for JSON), which I think we can keep this one closed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/232346483","html_url":"https://github.com/elastic/elasticsearch/issues/19366#issuecomment-232346483","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19366","id":232346483,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjM0NjQ4Mw==","user":{"login":"popravich","id":323442,"node_id":"MDQ6VXNlcjMyMzQ0Mg==","avatar_url":"https://avatars0.githubusercontent.com/u/323442?v=4","gravatar_id":"","url":"https://api.github.com/users/popravich","html_url":"https://github.com/popravich","followers_url":"https://api.github.com/users/popravich/followers","following_url":"https://api.github.com/users/popravich/following{/other_user}","gists_url":"https://api.github.com/users/popravich/gists{/gist_id}","starred_url":"https://api.github.com/users/popravich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/popravich/subscriptions","organizations_url":"https://api.github.com/users/popravich/orgs","repos_url":"https://api.github.com/users/popravich/repos","events_url":"https://api.github.com/users/popravich/events{/privacy}","received_events_url":"https://api.github.com/users/popravich/received_events","type":"User","site_admin":false},"created_at":"2016-07-13T12:57:21Z","updated_at":"2016-07-13T12:57:27Z","author_association":"NONE","body":"Hi,\nAs just mentioned in related issue, YAML parser can parse JSON, so it can be used as one.\n\nYour example doesn't work as well, it fails because of `SettingsLoaderFactory.loaderFromSource`\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/232357853","html_url":"https://github.com/elastic/elasticsearch/issues/19366#issuecomment-232357853","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19366","id":232357853,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjM1Nzg1Mw==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-07-13T13:40:14Z","updated_at":"2016-07-13T13:40:14Z","author_association":"MEMBER","body":"> Your example doesn't work as well\n\nbleh, you are right. I checked the cluster settings action, not the index one (where my analysis is correct). On the index level you are correct, it doesn't work now and the JSON detection borks the yaml one. I'm opening it again, but it will have to wait for #19388 to see what is the best course of action.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/232465328","html_url":"https://github.com/elastic/elasticsearch/issues/19366#issuecomment-232465328","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19366","id":232465328,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjQ2NTMyOA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-07-13T19:45:11Z","updated_at":"2016-07-13T19:45:11Z","author_association":"CONTRIBUTOR","body":"Content detection is just flawed.  We should remove it as per #19388.  Current content detection would also break SMILE or CBOR if it happened to contain a `{` character\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/232617100","html_url":"https://github.com/elastic/elasticsearch/issues/19366#issuecomment-232617100","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19366","id":232617100,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjYxNzEwMA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-07-14T09:39:41Z","updated_at":"2016-07-14T09:39:41Z","author_association":"MEMBER","body":"@clintongormley the content detection on the setting part is indeed broken, but in other places (like the indexing code) we look at byte markers at the beginning of the request, so that doesn't happen. I'll respond to the removal part on the other ticket.\n","performed_via_github_app":null}]