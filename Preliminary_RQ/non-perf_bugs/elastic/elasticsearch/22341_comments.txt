[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269041468","html_url":"https://github.com/elastic/elasticsearch/issues/22341#issuecomment-269041468","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22341","id":269041468,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTA0MTQ2OA==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2016-12-23T20:22:12Z","updated_at":"2016-12-23T20:22:41Z","author_association":"CONTRIBUTOR","body":"I'd expect to see a bucket for every `15m` between `2016-12-22T19:00:00Z` and `2016-12-23T19:00:00Z`. Instead I get\r\n\r\n```json\r\n\r\n      \"buckets\": [\r\n        {\r\n          \"key_as_string\": \"2016-12-22T22:15:00.000Z\",\r\n          \"key\": 1482444900000,\r\n          \"doc_count\": 1,\r\n          \"cardinality_id\": {\r\n            \"value\": 1\r\n          }\r\n        },\r\n        {\r\n          \"key_as_string\": \"2016-12-22T22:30:00.000Z\",\r\n          \"key\": 1482445800000,\r\n          \"doc_count\": 1,\r\n          \"cardinality_id\": {\r\n            \"value\": 1\r\n          }\r\n        }\r\n      ]\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269050072","html_url":"https://github.com/elastic/elasticsearch/issues/22341#issuecomment-269050072","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22341","id":269050072,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTA1MDA3Mg==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-12-23T21:59:17Z","updated_at":"2016-12-23T21:59:17Z","author_association":"CONTRIBUTOR","body":"Aggregations do not know about the query, only about the matching docs, so they do not know about the bounds of the filter you used in the query part.\r\n\r\nYou can tell the date histogram to generate buckets for the whole range by passing `min_doc_count: 0` and the values of the bounds:\r\n\r\n```\r\nPOST /events/events/_search\r\n{\r\n  \"size\": 0,\r\n  \"aggs\": {\r\n    \"date_date\": {\r\n      \"date_histogram\": {\r\n        \"field\": \"date\",\r\n        \"interval\": \"15m\",\r\n        \"min_doc_count\": 0, \r\n        \"format\": \"date_optional_time\",\r\n        \"extended_bounds\": {\r\n          \"min\": \"2016-12-22T19:00:00Z\",\r\n          \"max\": \"2016-12-23T19:00:00Z\"\r\n        }\r\n      },\r\n      \"aggs\": {\r\n        \"cardinality_id\": {\r\n          \"cardinality\": {\r\n            \"field\": \"id\"\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"query\": {\r\n    \"bool\": {\r\n      \"filter\": [\r\n        {\r\n          \"bool\": {\r\n            \"must\": [\r\n              {\r\n                \"range\": {\r\n                  \"date\": {\r\n                    \"gte\": \"2016-12-22T19:00:00Z\",\r\n                    \"lte\": \"2016-12-23T19:00:00Z\"\r\n                  }\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269348876","html_url":"https://github.com/elastic/elasticsearch/issues/22341#issuecomment-269348876","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22341","id":269348876,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM0ODg3Ng==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2016-12-27T16:31:53Z","updated_at":"2016-12-27T16:31:53Z","author_association":"CONTRIBUTOR","body":"@jpountz Thanks! I just wanted to point out that the marvel intellisense doesn't show extended bounds in the auto completion.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269350551","html_url":"https://github.com/elastic/elasticsearch/issues/22341#issuecomment-269350551","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22341","id":269350551,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM1MDU1MQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-12-27T16:45:23Z","updated_at":"2016-12-27T16:45:23Z","author_association":"CONTRIBUTOR","body":"Thanks, I opened https://github.com/elastic/kibana/issues/9651","performed_via_github_app":null}]