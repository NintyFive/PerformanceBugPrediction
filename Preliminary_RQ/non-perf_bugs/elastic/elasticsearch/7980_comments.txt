[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61713589","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-61713589","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":61713589,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzEzNTg5","user":{"login":"saahn","id":4174358,"node_id":"MDQ6VXNlcjQxNzQzNTg=","avatar_url":"https://avatars3.githubusercontent.com/u/4174358?v=4","gravatar_id":"","url":"https://api.github.com/users/saahn","html_url":"https://github.com/saahn","followers_url":"https://api.github.com/users/saahn/followers","following_url":"https://api.github.com/users/saahn/following{/other_user}","gists_url":"https://api.github.com/users/saahn/gists{/gist_id}","starred_url":"https://api.github.com/users/saahn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saahn/subscriptions","organizations_url":"https://api.github.com/users/saahn/orgs","repos_url":"https://api.github.com/users/saahn/repos","events_url":"https://api.github.com/users/saahn/events{/privacy}","received_events_url":"https://api.github.com/users/saahn/received_events","type":"User","site_admin":false},"created_at":"2014-11-04T21:01:11Z","updated_at":"2014-11-04T21:01:11Z","author_association":"NONE","body":"Hi, I just ran into this issue today and was wondering if you had any idea when this patch would be released. Is the target version 1.3.5 or 1.4? Thanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61731509","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-61731509","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":61731509,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzMxNTA5","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2014-11-04T23:03:28Z","updated_at":"2014-11-04T23:03:28Z","author_association":"MEMBER","body":"@saahn yes, 1.3.5  and 1.4.0. You can check labels on the issue #7981 to see all versions that it was merged into.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76151889","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76151889","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76151889,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MTUxODg5","user":{"login":"sarkis","id":42673,"node_id":"MDQ6VXNlcjQyNjcz","avatar_url":"https://avatars1.githubusercontent.com/u/42673?v=4","gravatar_id":"","url":"https://api.github.com/users/sarkis","html_url":"https://github.com/sarkis","followers_url":"https://api.github.com/users/sarkis/followers","following_url":"https://api.github.com/users/sarkis/following{/other_user}","gists_url":"https://api.github.com/users/sarkis/gists{/gist_id}","starred_url":"https://api.github.com/users/sarkis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarkis/subscriptions","organizations_url":"https://api.github.com/users/sarkis/orgs","repos_url":"https://api.github.com/users/sarkis/repos","events_url":"https://api.github.com/users/sarkis/events{/privacy}","received_events_url":"https://api.github.com/users/sarkis/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T10:05:40Z","updated_at":"2015-02-26T10:05:40Z","author_association":"NONE","body":"We've run into (what I believe) is this issue. Running 1.4.4 and there is a snapshot that is:\n\nIN_PROGRESS when I check localhost:9200/_snapshot/backups/snapshot_name endpoint\nABORTED when I check localhost:9200/_cluster/state\n\n-XDELETE hangs when attempting to delete the snapshot\n\nThe reason I believe it is this issue - we upgraded and restarted Elasticsearch around the time this snapshot was running. \n\n@imotov I also tried to use your cleanup script - however it returns with \"No snapshots found\" and the snapshot is still stuck in the same states above.\n\nAny other ideas on a way to force delete this snapshot? It is currently blocking us from getting any other snapshots created.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76173545","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76173545","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76173545,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MTczNTQ1","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T12:57:46Z","updated_at":"2015-02-26T12:57:46Z","author_association":"MEMBER","body":"@sarkis which type of repository and which version are you using? Could you post the snapshot part of the cluster state here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76228548","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76228548","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76228548,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjI4NTQ4","user":{"login":"sarkis","id":42673,"node_id":"MDQ6VXNlcjQyNjcz","avatar_url":"https://avatars1.githubusercontent.com/u/42673?v=4","gravatar_id":"","url":"https://api.github.com/users/sarkis","html_url":"https://github.com/sarkis","followers_url":"https://api.github.com/users/sarkis/followers","following_url":"https://api.github.com/users/sarkis/following{/other_user}","gists_url":"https://api.github.com/users/sarkis/gists{/gist_id}","starred_url":"https://api.github.com/users/sarkis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarkis/subscriptions","organizations_url":"https://api.github.com/users/sarkis/orgs","repos_url":"https://api.github.com/users/sarkis/repos","events_url":"https://api.github.com/users/sarkis/events{/privacy}","received_events_url":"https://api.github.com/users/sarkis/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T17:54:07Z","updated_at":"2015-02-26T17:54:07Z","author_association":"NONE","body":"@imotov snapshot part of cluster state: https://gist.github.com/sarkis/f46de23dc81b1dba0d1a\n\nWe're now on ES 1.4.4 the snapshot was started on ES 1.4.2, and we ran into troubles as the snapshot was running while upgrading 1.4.2 -> 1.4.4. We are using an fs snapshot, more info:\n\n{\"backups_sea\":{\"type\":\"fs\",\"settings\":{\"compress\":\"true\",\"location\":\"/path/to/snapshot_dir\"}}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76229751","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76229751","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76229751,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjI5NzUx","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T17:59:30Z","updated_at":"2015-02-26T17:59:30Z","author_association":"MEMBER","body":"@sarkis how many nodes are in the cluster right now? Is the node bhwQqwZ2QuCUPjcZGrGpuQ still running? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76230895","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76230895","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76230895,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjMwODk1","user":{"login":"sarkis","id":42673,"node_id":"MDQ6VXNlcjQyNjcz","avatar_url":"https://avatars1.githubusercontent.com/u/42673?v=4","gravatar_id":"","url":"https://api.github.com/users/sarkis","html_url":"https://github.com/sarkis","followers_url":"https://api.github.com/users/sarkis/followers","following_url":"https://api.github.com/users/sarkis/following{/other_user}","gists_url":"https://api.github.com/users/sarkis/gists{/gist_id}","starred_url":"https://api.github.com/users/sarkis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarkis/subscriptions","organizations_url":"https://api.github.com/users/sarkis/orgs","repos_url":"https://api.github.com/users/sarkis/repos","events_url":"https://api.github.com/users/sarkis/events{/privacy}","received_events_url":"https://api.github.com/users/sarkis/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T18:04:38Z","updated_at":"2015-02-26T18:04:57Z","author_association":"NONE","body":"@imotov 1 gateway and 2 data nodes (1 set to master)\n\nI cannot find that node name - I assume it was renamed upon rolling restart or possibly from the upgrade?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76232485","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76232485","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76232485,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjMyNDg1","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T18:12:25Z","updated_at":"2015-02-26T18:12:25Z","author_association":"MEMBER","body":"@sarkis  Are you sure it doesn't appear in `curl \"localhost:9200/_nodes?pretty\"` output?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76234755","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76234755","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76234755,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjM0NzU1","user":{"login":"sarkis","id":42673,"node_id":"MDQ6VXNlcjQyNjcz","avatar_url":"https://avatars1.githubusercontent.com/u/42673?v=4","gravatar_id":"","url":"https://api.github.com/users/sarkis","html_url":"https://github.com/sarkis","followers_url":"https://api.github.com/users/sarkis/followers","following_url":"https://api.github.com/users/sarkis/following{/other_user}","gists_url":"https://api.github.com/users/sarkis/gists{/gist_id}","starred_url":"https://api.github.com/users/sarkis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarkis/subscriptions","organizations_url":"https://api.github.com/users/sarkis/orgs","repos_url":"https://api.github.com/users/sarkis/repos","events_url":"https://api.github.com/users/sarkis/events{/privacy}","received_events_url":"https://api.github.com/users/sarkis/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T18:22:50Z","updated_at":"2015-02-26T18:22:50Z","author_association":"NONE","body":"@imotov just double checked - nothing.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76239067","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76239067","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76239067,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjM5MDY3","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T18:40:24Z","updated_at":"2015-02-26T18:40:24Z","author_association":"MEMBER","body":"@sarkis did you try running cleanup script after the upgrade or before? Did you restart master node during upgrade or it is still running 1.4.2? Does master node have proper access to the shared file system, or read/write operations with the shared files system still hang?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76240826","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76240826","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76240826,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjQwODI2","user":{"login":"sarkis","id":42673,"node_id":"MDQ6VXNlcjQyNjcz","avatar_url":"https://avatars1.githubusercontent.com/u/42673?v=4","gravatar_id":"","url":"https://api.github.com/users/sarkis","html_url":"https://github.com/sarkis","followers_url":"https://api.github.com/users/sarkis/followers","following_url":"https://api.github.com/users/sarkis/following{/other_user}","gists_url":"https://api.github.com/users/sarkis/gists{/gist_id}","starred_url":"https://api.github.com/users/sarkis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarkis/subscriptions","organizations_url":"https://api.github.com/users/sarkis/orgs","repos_url":"https://api.github.com/users/sarkis/repos","events_url":"https://api.github.com/users/sarkis/events{/privacy}","received_events_url":"https://api.github.com/users/sarkis/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T18:45:36Z","updated_at":"2015-02-26T18:49:52Z","author_association":"NONE","body":"@imotov I tried running the cleanup script after the upgrade.\n\nThe master node was restarted and is running 1.4.4 - if I had known about this issue I would have stopped the snapshot before rolling restarts/upgrades :(\n\nThe snapshot directory is a nfs mount and the \"elasticsearch\" user does have proper read/write perms. I just double checked this on all nodes in the cluster.\n\nThanks a lot for the help and quick responses.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76243585","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76243585","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76243585,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjQzNTg1","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T18:58:05Z","updated_at":"2015-02-26T18:58:05Z","author_association":"MEMBER","body":"@sarkis I am completely puzzled about what went wrong and I am still trying to figure out what happened and how to reproduce the issue. With a single master node, the snapshot should have disappeared during restart. There is simply no place for it to survive since snapshot information is not getting persisted on disk. Even if the snapshot somehow survived the restart, the cleanup script should have removed it. So, I feel that I am missing something important about the issue. \n\nWhen you said rolling restart, what did you mean? Could you describe the process in as many details as possible. Was snapshot stuck before the upgrade or was it simply taking long time. What was the upgrade process? Which nodes did you restart first? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76256341","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76256341","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76256341,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjU2MzQx","user":{"login":"sarkis","id":42673,"node_id":"MDQ6VXNlcjQyNjcz","avatar_url":"https://avatars1.githubusercontent.com/u/42673?v=4","gravatar_id":"","url":"https://api.github.com/users/sarkis","html_url":"https://github.com/sarkis","followers_url":"https://api.github.com/users/sarkis/followers","following_url":"https://api.github.com/users/sarkis/following{/other_user}","gists_url":"https://api.github.com/users/sarkis/gists{/gist_id}","starred_url":"https://api.github.com/users/sarkis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarkis/subscriptions","organizations_url":"https://api.github.com/users/sarkis/orgs","repos_url":"https://api.github.com/users/sarkis/repos","events_url":"https://api.github.com/users/sarkis/events{/privacy}","received_events_url":"https://api.github.com/users/sarkis/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T19:55:49Z","updated_at":"2015-02-26T20:02:44Z","author_association":"NONE","body":"@imotov Sure - so we have 2 data nodes and 1 gateway node (total of 3 nodes). The rolling restart was done following the recommended way to do so via elasticsearch documentation: \n\n1) turn off allocation\n2) upgrade / restart gateway\n3) turn on allocation (wait for green)\n4) turn off allocation\n5) upgrade / restart non-master data node\n6) turn on allocation (wait for green)\n7) turn off allocation\n8) upgrade / restart master data node\n9) turn on allocation\n\nI think we have tried everything we could at this point as well. Would you recommend removing/adding back the repo? What's the best way to just get around this? I understand you wanted to reproduce it on your end but I'd like to get snapshots working ASAP. \n\nUpdate: I know there isn't truly a \"master\" - I called the above nodes master and non-master based off of info from paramedic at the time of upgrades\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76262224","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76262224","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76262224,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjYyMjI0","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T20:22:07Z","updated_at":"2015-02-26T20:22:07Z","author_association":"MEMBER","body":"So they are all master-eligible nodes! That explains the first part - how snapshot survived restart. It doesn't explain how it happened in the first place, though. Removing and adding back the repo is not going to help. There are really only two ways to go - I can try to figure out what went wrong and fix cleanup script to clean the issue or you can do full cluster restart (shut down all master-eligible nodes and then start them back up). By the way, what do you mean by \"gateway\"?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76262966","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76262966","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76262966,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjYyOTY2","user":{"login":"sarkis","id":42673,"node_id":"MDQ6VXNlcjQyNjcz","avatar_url":"https://avatars1.githubusercontent.com/u/42673?v=4","gravatar_id":"","url":"https://api.github.com/users/sarkis","html_url":"https://github.com/sarkis","followers_url":"https://api.github.com/users/sarkis/followers","following_url":"https://api.github.com/users/sarkis/following{/other_user}","gists_url":"https://api.github.com/users/sarkis/gists{/gist_id}","starred_url":"https://api.github.com/users/sarkis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarkis/subscriptions","organizations_url":"https://api.github.com/users/sarkis/orgs","repos_url":"https://api.github.com/users/sarkis/repos","events_url":"https://api.github.com/users/sarkis/events{/privacy}","received_events_url":"https://api.github.com/users/sarkis/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T20:26:49Z","updated_at":"2015-02-26T21:47:38Z","author_association":"NONE","body":"~~We have a dedicated node for this: http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/modules-gateway.html~~\n\nOn the full cluster restart - do you mean to shut them all down at the same time and bring them back up? Does that mean there will be data loss in the time it takes to bring them both back up?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76266133","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76266133","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76266133,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjY2MTMz","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T20:38:05Z","updated_at":"2015-02-26T20:38:05Z","author_association":"MEMBER","body":"@sarkis not sure I am following. Are you using non-local gateway on one of your nodes? Which gateway are you using there? How did you configure this node comparing to all other nodes? Could you send me your complete cluster state (you can send it to igor.motov@elasticsearch.com if you don't want to post it here).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76267116","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76267116","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76267116,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjY3MTE2","user":{"login":"sarkis","id":42673,"node_id":"MDQ6VXNlcjQyNjcz","avatar_url":"https://avatars1.githubusercontent.com/u/42673?v=4","gravatar_id":"","url":"https://api.github.com/users/sarkis","html_url":"https://github.com/sarkis","followers_url":"https://api.github.com/users/sarkis/followers","following_url":"https://api.github.com/users/sarkis/following{/other_user}","gists_url":"https://api.github.com/users/sarkis/gists{/gist_id}","starred_url":"https://api.github.com/users/sarkis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarkis/subscriptions","organizations_url":"https://api.github.com/users/sarkis/orgs","repos_url":"https://api.github.com/users/sarkis/repos","events_url":"https://api.github.com/users/sarkis/events{/privacy}","received_events_url":"https://api.github.com/users/sarkis/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T20:41:36Z","updated_at":"2015-02-26T20:41:36Z","author_association":"NONE","body":"@imotov sorry for the confusion - our 3rd non-data, non-master node we refer to as a gateway is the entry point to the cluster. It's one and only purpose is to pass traffic through to the data nodes. Sending you the full cluster state via e-mail.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76270320","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76270320","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76270320,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjcwMzIw","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T20:53:06Z","updated_at":"2015-02-26T20:53:06Z","author_association":"MEMBER","body":"OK, so \"gateway\" node doesn't have anything to do with [gateways](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/modules-gateway.html) and it's simply a client node. Got it! I will be waiting for the cluster state to continue investigation. Thanks!\n\nFull cluster restart will make cluster unavailable for indexing and searching while nodes are restarting and shards are recovering. Depending on how you are indexing data it might or might not cause loss of data (if your client has a retry logic to reindex failed records, it shouldn't lead to any data loss).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76281387","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76281387","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76281387,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjgxMzg3","user":{"login":"sarkis","id":42673,"node_id":"MDQ6VXNlcjQyNjcz","avatar_url":"https://avatars1.githubusercontent.com/u/42673?v=4","gravatar_id":"","url":"https://api.github.com/users/sarkis","html_url":"https://github.com/sarkis","followers_url":"https://api.github.com/users/sarkis/followers","following_url":"https://api.github.com/users/sarkis/following{/other_user}","gists_url":"https://api.github.com/users/sarkis/gists{/gist_id}","starred_url":"https://api.github.com/users/sarkis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarkis/subscriptions","organizations_url":"https://api.github.com/users/sarkis/orgs","repos_url":"https://api.github.com/users/sarkis/repos","events_url":"https://api.github.com/users/sarkis/events{/privacy}","received_events_url":"https://api.github.com/users/sarkis/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T21:48:46Z","updated_at":"2015-02-26T21:48:46Z","author_association":"NONE","body":"@imotov sent the cluster state - let me know if I can do anything else. I am looking for a window we can do a full restart to see if this will fix our problem.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76455587","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76455587","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76455587,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NDU1NTg3","user":{"login":"sarkis","id":42673,"node_id":"MDQ6VXNlcjQyNjcz","avatar_url":"https://avatars1.githubusercontent.com/u/42673?v=4","gravatar_id":"","url":"https://api.github.com/users/sarkis","html_url":"https://github.com/sarkis","followers_url":"https://api.github.com/users/sarkis/followers","following_url":"https://api.github.com/users/sarkis/following{/other_user}","gists_url":"https://api.github.com/users/sarkis/gists{/gist_id}","starred_url":"https://api.github.com/users/sarkis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarkis/subscriptions","organizations_url":"https://api.github.com/users/sarkis/orgs","repos_url":"https://api.github.com/users/sarkis/repos","events_url":"https://api.github.com/users/sarkis/events{/privacy}","received_events_url":"https://api.github.com/users/sarkis/received_events","type":"User","site_admin":false},"created_at":"2015-02-27T19:25:44Z","updated_at":"2015-02-27T19:25:44Z","author_association":"NONE","body":"In case others come here with the same issue. @imotov's updated cleanup script (https://github.com/imotov/elasticsearch-snapshot-cleanup) for 1.4.4 worked in clearing up the ABORTED snapshots.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76458333","html_url":"https://github.com/elastic/elasticsearch/issues/7980#issuecomment-76458333","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7980","id":76458333,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NDU4MzMz","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-02-27T19:41:26Z","updated_at":"2015-02-27T19:41:26Z","author_association":"MEMBER","body":"Since it seems to be a different problem, I have created a [separate issue](https://github.com/elasticsearch/elasticsearch/issues/9924) for it.\n","performed_via_github_app":null}]