{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/51880","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51880/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51880/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51880/events","html_url":"https://github.com/elastic/elasticsearch/issues/51880","id":559889506,"node_id":"MDU6SXNzdWU1NTk4ODk1MDY=","number":51880,"title":"yaml parser for elasticsearch.yml wrongly parsing lists","user":{"login":"naturalgeek","id":3707331,"node_id":"MDQ6VXNlcjM3MDczMzE=","avatar_url":"https://avatars1.githubusercontent.com/u/3707331?v=4","gravatar_id":"","url":"https://api.github.com/users/naturalgeek","html_url":"https://github.com/naturalgeek","followers_url":"https://api.github.com/users/naturalgeek/followers","following_url":"https://api.github.com/users/naturalgeek/following{/other_user}","gists_url":"https://api.github.com/users/naturalgeek/gists{/gist_id}","starred_url":"https://api.github.com/users/naturalgeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/naturalgeek/subscriptions","organizations_url":"https://api.github.com/users/naturalgeek/orgs","repos_url":"https://api.github.com/users/naturalgeek/repos","events_url":"https://api.github.com/users/naturalgeek/events{/privacy}","received_events_url":"https://api.github.com/users/naturalgeek/received_events","type":"User","site_admin":false},"labels":[{"id":144457604,"node_id":"MDU6TGFiZWwxNDQ0NTc2MDQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Settings","name":":Core/Infra/Settings","color":"0e8a16","default":false,"description":"Settings infrastructure and APIs"},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-02-04T18:06:32Z","updated_at":"2020-02-14T13:42:28Z","closed_at":"2020-02-14T13:42:28Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\n7.5.2 (recent form official repo)\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`): \r\nopenjdk version \"1.8.0_242\"\r\nOpenJDK Runtime Environment (build 1.8.0_242-8u242-b08-0ubuntu3~16.04-b08)\r\nOpenJDK 64-Bit Server VM (build 25.242-b08, mixed mode)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\nLinux elk0 4.15.0-1067-azure #72-Ubuntu SMP Wed Jan 15 15:07:27 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nDefining a list with unquoted children on the same level as the parent are not parsed properly\r\n\r\nExample:\r\n\r\nWorks:\r\n\r\n```\r\ncluster.initial_master_nodes:\r\n  - foo\r\n  - bar\r\n\r\n```\r\nAlso works:\r\n\r\n```\r\ncluster.initial_master_nodes:\r\n  - \"foo\"\r\n  - \"bar\"\r\n```\r\n\r\nAlso works:\r\n\r\n```\r\ncluster.initial_master_nodes:\r\n- \"foo\"\r\n- \"bar\"\r\n```\r\n\r\n**But**\r\n**won't work:**\r\n\r\n```\r\ncluster.initial_master_nodes:\r\n- foo\r\n- bar\r\n```\r\n\r\n\r\nAccording to my understanding, the last list is also a valid yaml syntax.\r\nPyYaml used by Ansible e.g. in the filter \"to_nice_yaml\" produces exactly the last array.\r\n\r\nFun fact: elasticsearch's official role \"ansible-elasticsearch\" uses this filter to build the elasticsearch.yaml.\r\nAs a workaround for ansible users: you can use \"to_yaml\" in the template instead, which produces a working onliner.\r\n\r\n**Steps to reproduce**:\r\n\r\nWrite a config in the described list format.\r\n\r\n**Provide logs (if relevant)**:\r\n\r\nLogs are not relevant.\r\n","closed_by":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"performed_via_github_app":null}