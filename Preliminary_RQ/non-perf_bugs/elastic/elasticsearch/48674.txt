{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/48674","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48674/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48674/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48674/events","html_url":"https://github.com/elastic/elasticsearch/issues/48674","id":514474974,"node_id":"MDU6SXNzdWU1MTQ0NzQ5NzQ=","number":48674,"title":"[CI] CcrRollingUpgradeIT.testUniDirectionalIndexFollowing and testUniDirectionalIndexFollowing failing","user":{"login":"bizybot","id":902768,"node_id":"MDQ6VXNlcjkwMjc2OA==","avatar_url":"https://avatars2.githubusercontent.com/u/902768?v=4","gravatar_id":"","url":"https://api.github.com/users/bizybot","html_url":"https://github.com/bizybot","followers_url":"https://api.github.com/users/bizybot/followers","following_url":"https://api.github.com/users/bizybot/following{/other_user}","gists_url":"https://api.github.com/users/bizybot/gists{/gist_id}","starred_url":"https://api.github.com/users/bizybot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bizybot/subscriptions","organizations_url":"https://api.github.com/users/bizybot/orgs","repos_url":"https://api.github.com/users/bizybot/repos","events_url":"https://api.github.com/users/bizybot/events{/privacy}","received_events_url":"https://api.github.com/users/bizybot/received_events","type":"User","site_admin":false},"labels":[{"id":912824565,"node_id":"MDU6TGFiZWw5MTI4MjQ1NjU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/CCR","name":":Distributed/CCR","color":"0e8a16","default":false,"description":"Issues around the Cross Cluster State Replication features"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"assignees":[{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2019-10-30T08:18:16Z","updated_at":"2019-10-31T23:07:04Z","closed_at":"2019-10-31T23:07:04Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I see following failures:\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+matrix-java-periodic/ES_BUILD_JAVA=openjdk12,ES_RUNTIME_JAVA=zulu11,nodes=general-purpose/297/console\r\n\r\nI could not reproduce this locally\r\n```\r\n./gradlew ':x-pack:qa:rolling-upgrade-multi-cluster:v7.4.2#follower#oneThirdUpgradedTest' \\\r\n--tests \"org.elasticsearch.upgrades.CcrRollingUpgradeIT.testUniDirectionalIndexFollowing\" \\\r\n-Dtests.seed=510357B4ACC8328 \\\r\n-Dtests.security.manager=true \\\r\n-Dtests.locale=nb \\\r\n-Dtests.timezone=Asia/Omsk \\\r\n-Dcompiler.java=12 \\\r\n-Druntime.java=11\r\n```\r\n\r\nfrom the console log:\r\n```\r\norg.elasticsearch.upgrades.CcrRollingUpgradeIT > testUniDirectionalIndexFollowing FAILED\r\n    java.net.SocketTimeoutException: 60 000 milliseconds timeout on connection http-outgoing-1 [ACTIVE]\r\n        at __randomizedtesting.SeedInfo.seed([510357B4ACC8328:8954A07E9DF7A26D]:0)\r\n        at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:808)\r\n        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:248)\r\n        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:235)\r\n        at org.elasticsearch.upgrades.CcrRollingUpgradeIT.index(CcrRollingUpgradeIT.java:346)\r\n        at org.elasticsearch.upgrades.CcrRollingUpgradeIT.testUniDirectionalIndexFollowing(CcrRollingUpgradeIT.java:57)\r\n\r\n        Caused by:\r\n        java.net.SocketTimeoutException: 60 000 milliseconds timeout on connection http-outgoing-1 [ACTIVE]\r\nREPRODUCE WITH: ./gradlew ':x-pack:qa:rolling-upgrade-multi-cluster:v7.4.2#follower#oneThirdUpgradedTest' --tests \"org.elasticsearch.upgrades.CcrRollingUpgradeIT.testUniDirectionalIndexFollowing\" -Dtests.seed=510357B4ACC8328 -Dtests.security.manager=true -Dtests.locale=nb -Dtests.timezone=Asia/Omsk -Dcompiler.java=12 -Druntime.java=11\r\n\r\nSuite: Test class org.elasticsearch.upgrades.CcrRollingUpgradeIT\r\n  1> [2019-10-30T11:17:23,519][INFO ][o.e.u.CcrRollingUpgradeIT] [testUniDirectionalIndexFollowing] before test\r\n  1> [2019-10-30T11:17:23,774][INFO ][o.e.u.CcrRollingUpgradeIT] [testUniDirectionalIndexFollowing] initializing REST clients against [http://[::1]:42919, http://127.0.0.1:42967, http://[::1]:41767, http://127.0.0.1:39367, http://[::1]:33291, http://127.0.0.1:45883]\r\n  1> [2019-10-30T11:17:24,371][INFO ][o.e.u.CcrRollingUpgradeIT] [testUniDirectionalIndexFollowing] Leader host: 127.0.0.1:38855, follower host: 127.0.0.1:45883\r\n  1> [2019-10-30T11:17:24,372][INFO ][o.e.u.CcrRollingUpgradeIT] [testUniDirectionalIndexFollowing] Configuring leader remote cluster [127.0.0.1:44977]\r\n  1> [2019-10-30T11:17:24,489][INFO ][o.e.u.CcrRollingUpgradeIT] [testUniDirectionalIndexFollowing] Configuring follower remote cluster [127.0.0.1:33947]\r\n  1> [2019-10-30T11:17:24,547][INFO ][o.e.u.CcrRollingUpgradeIT] [testUniDirectionalIndexFollowing] clusterName=FOLLOWER, upgradeState=ONE_THIRD\r\n  1> [2019-10-30T11:18:24,667][INFO ][o.e.u.CcrRollingUpgradeIT] [testUniDirectionalIndexFollowing] after test\r\n  2> REPRODUCE WITH: ./gradlew ':x-pack:qa:rolling-upgrade-multi-cluster:v7.4.2#follower#oneThirdUpgradedTest' --tests \"org.elasticsearch.upgrades.CcrRollingUpgradeIT.testUniDirectionalIndexFollowing\" -Dtests.seed=510357B4ACC8328 -Dtests.security.manager=true -Dtests.locale=nb -Dtests.timezone=Asia/Omsk -Dcompiler.java=12 -Druntime.java=11\r\n  2> java.net.SocketTimeoutException: 60 000 milliseconds timeout on connection http-outgoing-1 [ACTIVE]\r\n        at __randomizedtesting.SeedInfo.seed([510357B4ACC8328:8954A07E9DF7A26D]:0)\r\n        at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:808)\r\n        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:248)\r\n        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:235)\r\n        at org.elasticsearch.upgrades.CcrRollingUpgradeIT.index(CcrRollingUpgradeIT.java:346)\r\n        at org.elasticsearch.upgrades.CcrRollingUpgradeIT.testUniDirectionalIndexFollowing(CcrRollingUpgradeIT.java:57)\r\n\r\n        Caused by:\r\n        java.net.SocketTimeoutException: 60 000 milliseconds timeout on connection http-outgoing-1 [ACTIVE]\r\n  1> [2019-10-30T11:18:24,845][INFO ][o.e.u.CcrRollingUpgradeIT] [testCannotFollowLeaderInUpgradedCluster] before test\r\n  1> [2019-10-30T11:18:24,847][INFO ][o.e.u.CcrRollingUpgradeIT] [testCannotFollowLeaderInUpgradedCluster] after test\r\n  1> [2019-10-30T11:18:24,936][INFO ][o.e.u.CcrRollingUpgradeIT] [testBiDirectionalIndexFollowing] before test\r\n  1> [2019-10-30T11:18:24,937][INFO ][o.e.u.CcrRollingUpgradeIT] [testBiDirectionalIndexFollowing] clusterName=FOLLOWER, upgradeState=ONE_THIRD\r\n  1> [2019-10-30T11:18:26,987][INFO ][o.e.u.CcrRollingUpgradeIT] [testBiDirectionalIndexFollowing] after test\r\n  1> [2019-10-30T11:18:27,049][INFO ][o.e.u.CcrRollingUpgradeIT] [testAutoFollowing] before test\r\n  1> [2019-10-30T11:18:29,824][INFO ][o.e.u.CcrRollingUpgradeIT] [testAutoFollowing] after test\r\n  2> NOTE: leaving temporary files on disk at: /dev/shm/elastic+elasticsearch+7.x+matrix-java-periodic/ES_BUILD_JAVA/openjdk12/ES_RUNTIME_JAVA/zulu11/nodes/general-purpose/x-pack/qa/rolling-upgrade-multi-cluster/build/testrun/v7.4.2#follower#oneThirdUpgradedTest/temp/org.elasticsearch.upgrades.CcrRollingUpgradeIT_510357B4ACC8328-001\r\n  2> NOTE: test params are: codec=Asserting(Lucene80): {}, docValues:{}, maxPointsInLeafNode=413, maxMBSortInHeap=7.116858195882148, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@5bfd65c2), locale=nb, timezone=Asia/Omsk\r\n  2> NOTE: Linux 4.12.14-lp151.28.20-default amd64/Azul Systems, Inc. 11.0.3 (64-bit)/cpus=32,threads=1,free=431642752,total=536870912\r\n  2> NOTE: All tests run in this JVM: [CcrRollingUpgradeIT]\r\n\r\n4 tests completed, 1 failed\r\n\r\nTests with failures:\r\n - org.elasticsearch.upgrades.CcrRollingUpgradeIT.testUniDirectionalIndexFollowing\r\n\r\n=== Standard output of node `node{:x-pack:qa:rolling-upgrade-multi-cluster:v7.4.2-leader-0}` ===\r\n\r\n»    ↓ errors and warnings from /dev/shm/elastic+elasticsearch+7.x+matrix-java-periodic/ES_BUILD_JAVA/openjdk12/ES_RUNTIME_JAVA/zulu11/nodes/general-purpose/x-pack/qa/rolling-upgrade-multi-cluster/build/testclusters/v7.4.2-leader-0/logs/es.stdout.log ↓\r\n» WARN ][o.e.d.FileBasedSeedHostsProvider] [v7.4.2-leader-0] expected, but did not find, a dynamic hosts list at [/dev/shm/elastic+elasticsearch+7.x+matrix-java-periodic/ES_BUILD_JAVA/openjdk12/ES_RUNTIME_JAVA/zulu11/nodes/general-purpose/x-pack/qa/rolling-upgrade-multi-cluster/build/testclusters/v7.4.2-leader-0/config/unicast_hosts.txt]\r\n» ERROR][o.e.ExceptionsHelper     ] [v7.4.2-leader-0] fatal error\r\n»  \tat org.elasticsearch.ExceptionsHelper.lambda$maybeDieOnAnotherThread$4(ExceptionsHelper.java:300)\r\n»  \tat java.base/java.util.Optional.ifPresent(Optional.java:183)\r\n»  \tat org.elasticsearch.ExceptionsHelper.maybeDieOnAnotherThread(ExceptionsHelper.java:290)\r\n»  \tat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.exceptionCaught(Netty4MessageChannelHandler.java:70)\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:297)\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.notifyHandlerException(AbstractChannelHandlerContext.java:831)\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:376)\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352)\r\n»  \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:328)\r\n»  \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:302)\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352)\r\n»  \tat io.netty.handler.logging.LoggingHandler.channelRead(LoggingHandler.java:241)\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352)\r\n»  \tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1421)\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)\r\n»  \tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:930)\r\n»  \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)\r\n»  \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:697)\r\n»  \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:597)\r\n»  \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:551)\r\n»  \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:511)\r\n»  \tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918)\r\n»  \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n»  \tat java.base/java.lang.Thread.run(Thread.java:834)\r\n» ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [v7.4.2-leader-0] fatal error in thread [Thread-3], exiting\r\n»  java.lang.AssertionError: retention lease renewal for [v7.4.2-follower/follower_index1/ALvGbq34QKuAh1FJyYzC8g-following-leader/leader_index1/T-Ew0iFUR863h91xY8P7Vw] from [ccr] renewed a lower retaining sequence number [63] than the current lease retaining sequence number [64]\r\n»  \tat org.elasticsearch.index.seqno.ReplicationTracker.renewRetentionLease(ReplicationTracker.java:401) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.shard.IndexShard.renewRetentionLease(IndexShard.java:2148) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.seqno.RetentionLeaseActions$Renew$TransportAction.doRetentionLeaseAction(RetentionLeaseActions.java:206) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.seqno.RetentionLeaseActions$Renew$TransportAction.doRetentionLeaseAction(RetentionLeaseActions.java:182) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.seqno.RetentionLeaseActions$TransportRetentionLeaseAction.lambda$asyncShardOperation$0(RetentionLeaseActions.java:100) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.ActionListener$3.onResponse(ActionListener.java:112) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.shard.IndexShard.lambda$wrapPrimaryOperationPermitListener$21(IndexShard.java:2753) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.ActionListener$3.onResponse(ActionListener.java:112) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.shard.IndexShardOperationPermits.acquire(IndexShardOperationPermits.java:285) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.shard.IndexShardOperationPermits.acquire(IndexShardOperationPermits.java:237) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.shard.IndexShard.acquirePrimaryOperationPermit(IndexShard.java:2727) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.seqno.RetentionLeaseActions$TransportRetentionLeaseAction.asyncShardOperation(RetentionLeaseActions.java:97) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.seqno.RetentionLeaseActions$TransportRetentionLeaseAction.asyncShardOperation(RetentionLeaseActions.java:59) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$ShardTransportHandler.messageReceived(TransportSingleShardAction.java:289) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$ShardTransportHandler.messageReceived(TransportSingleShardAction.java:282) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:63) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.TransportService.sendLocalRequest(TransportService.java:746) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.TransportService.access$100(TransportService.java:74) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.TransportService$3.sendRequest(TransportService.java:127) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.TransportService.sendRequestInternal(TransportService.java:692) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.TransportService.sendRequest(TransportService.java:602) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.TransportService.sendRequest(TransportService.java:577) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.perform(TransportSingleShardAction.java:246) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.start(TransportSingleShardAction.java:201) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction.doExecute(TransportSingleShardAction.java:103) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction.doExecute(TransportSingleShardAction.java:62) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:153) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:129) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:64) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$TransportHandler.messageReceived(TransportSingleShardAction.java:278) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$TransportHandler.messageReceived(TransportSingleShardAction.java:273) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:63) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.InboundHandler$RequestHandler.doRun(InboundHandler.java:264) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.common.util.concurrent.EsExecutors$DirectExecutorService.execute(EsExecutors.java:225) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.InboundHandler.handleRequest(InboundHandler.java:185) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:118) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:102) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:663) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.channelRead(Netty4MessageChannelHandler.java:62) ~[?:?]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) ~[?:?]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) ~[?:?]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352) ~[?:?]\r\n»  \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:328) ~[?:?]\r\n»  \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:302) ~[?:?]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) ~[?:?]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) ~[?:?]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352) ~[?:?]\r\n»  \tat io.netty.handler.logging.LoggingHandler.channelRead(LoggingHandler.java:241) ~[?:?]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) ~[?:?]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) ~[?:?]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352) ~[?:?]\r\n»  \tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1421) ~[?:?]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) ~[?:?]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) ~[?:?]\r\n»  \tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:930) ~[?:?]\r\n»  \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163) ~[?:?]\r\n»  \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:697) ~[?:?]\r\n»  \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:597) ~[?:?]\r\n»  \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:551) ~[?:?]\r\n»  \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:511) ~[?:?]\r\n»  \tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918) ~[?:?]\r\n»  \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[?:?]\r\n»  \tat java.lang.Thread.run(Thread.java:834) [?:?]\r\n» WARN ][o.e.t.TcpTransport       ] [v7.4.2-leader-0] exception caught on transport layer [Netty4TcpChannel{localAddress=/127.0.0.1:34101, remoteAddress=/127.0.0.1:46222}], closing connection\r\n»  java.lang.Exception: java.lang.AssertionError: retention lease renewal for [v7.4.2-follower/follower_index1/ALvGbq34QKuAh1FJyYzC8g-following-leader/leader_index1/T-Ew0iFUR863h91xY8P7Vw] from [ccr] renewed a lower retaining sequence number [63] than the current lease retaining sequence number [64]\r\n»  \tat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.exceptionCaught(Netty4MessageChannelHandler.java:75) [transport-netty4-client-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:297) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.notifyHandlerException(AbstractChannelHandlerContext.java:831) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:376) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:328) [netty-codec-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:302) [netty-codec-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.handler.logging.LoggingHandler.channelRead(LoggingHandler.java:241) [netty-handler-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1421) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:930) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:697) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:597) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:551) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:511) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918) [netty-common-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) [netty-common-4.1.38.Final.jar:4.1.38.Final]\r\n»  \tat java.lang.Thread.run(Thread.java:834) [?:?]\r\n»  Caused by: java.lang.AssertionError: retention lease renewal for [v7.4.2-follower/follower_index1/ALvGbq34QKuAh1FJyYzC8g-following-leader/leader_index1/T-Ew0iFUR863h91xY8P7Vw] from [ccr] renewed a lower retaining sequence number [63] than the current lease retaining sequence number [64]\r\n»  \tat org.elasticsearch.index.seqno.ReplicationTracker.renewRetentionLease(ReplicationTracker.java:401) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.shard.IndexShard.renewRetentionLease(IndexShard.java:2148) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.seqno.RetentionLeaseActions$Renew$TransportAction.doRetentionLeaseAction(RetentionLeaseActions.java:206) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.seqno.RetentionLeaseActions$Renew$TransportAction.doRetentionLeaseAction(RetentionLeaseActions.java:182) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.seqno.RetentionLeaseActions$TransportRetentionLeaseAction.lambda$asyncShardOperation$0(RetentionLeaseActions.java:100) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.ActionListener$3.onResponse(ActionListener.java:112) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.shard.IndexShard.lambda$wrapPrimaryOperationPermitListener$21(IndexShard.java:2753) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.ActionListener$3.onResponse(ActionListener.java:112) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.shard.IndexShardOperationPermits.acquire(IndexShardOperationPermits.java:285) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.shard.IndexShardOperationPermits.acquire(IndexShardOperationPermits.java:237) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.shard.IndexShard.acquirePrimaryOperationPermit(IndexShard.java:2727) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.seqno.RetentionLeaseActions$TransportRetentionLeaseAction.asyncShardOperation(RetentionLeaseActions.java:97) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.index.seqno.RetentionLeaseActions$TransportRetentionLeaseAction.asyncShardOperation(RetentionLeaseActions.java:59) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$ShardTransportHandler.messageReceived(TransportSingleShardAction.java:289) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$ShardTransportHandler.messageReceived(TransportSingleShardAction.java:282) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:63) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.TransportService.sendLocalRequest(TransportService.java:746) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.TransportService.access$100(TransportService.java:74) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.TransportService$3.sendRequest(TransportService.java:127) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.TransportService.sendRequestInternal(TransportService.java:692) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.TransportService.sendRequest(TransportService.java:602) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.TransportService.sendRequest(TransportService.java:577) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.perform(TransportSingleShardAction.java:246) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction.start(TransportSingleShardAction.java:201) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction.doExecute(TransportSingleShardAction.java:103) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction.doExecute(TransportSingleShardAction.java:62) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:153) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:129) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:64) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$TransportHandler.messageReceived(TransportSingleShardAction.java:278) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$TransportHandler.messageReceived(TransportSingleShardAction.java:273) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:63) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.InboundHandler$RequestHandler.doRun(InboundHandler.java:264) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.common.util.concurrent.EsExecutors$DirectExecutorService.execute(EsExecutors.java:225) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.InboundHandler.handleRequest(InboundHandler.java:185) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:118) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:102) ~[elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:663) [elasticsearch-7.4.2-SNAPSHOT.jar:7.4.2-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.channelRead(Netty4MessageChannelHandler.java:62) ~[?:?]\r\n»  \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) ~[?:?]\r\n»  \t... 23 more\r\n```","closed_by":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"performed_via_github_app":null}