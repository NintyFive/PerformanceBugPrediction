[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/204565153","html_url":"https://github.com/elastic/elasticsearch/issues/17482#issuecomment-204565153","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17482","id":204565153,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNDU2NTE1Mw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-04-01T21:03:50Z","updated_at":"2016-04-01T21:03:50Z","author_association":"MEMBER","body":"> official es docker image\n\nJust so that there is no confusion: there is not an official Docker image provided by Elastic at this time. Any images that you currently obtain off of Docker Hub that are marked as \"official\" are not vetted by Elastic. (And I'm not saying that you're confused here, this is for clarity for anyone else reading this thread.)\n\n> Did we lose the records that would have been indexed, or does BulkProcessor wait for the index to get in a state where it can write and retry?\n\nHow did you configure the `BulkProcessor`? How are you committing message consumption back to Kafka?\n\n> If the latter, are these exceptions \"harmless\" as stated in #15478 (there were multiple exceptions there so not sure if this was considered the harmless one).\n\nThe situation in #15478 is quite different than your situation. The logging in #15478 was debug logging from stats requests where shards were being ignored because they were in a state not ready to receive such requests. A stats request missing a recovering shard is not a big deal. Your situation is concerning indexing into a primary shard and how you handle this exception is critically important to whether or not there is a data loss. Thus, the questions above about how you configured the `BulkProcessor` and how you're handling topic consumption.\n\nI note that you truncated part of the exception message (in particular, the log level and the log prefix). Is there any chance that you can provide the remainder of the log message, including any additional pieces of the exception if there are any (there might not be other than the missing level and prefix)?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/205539986","html_url":"https://github.com/elastic/elasticsearch/issues/17482#issuecomment-205539986","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17482","id":205539986,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNTUzOTk4Ng==","user":{"login":"reflection","id":652093,"node_id":"MDQ6VXNlcjY1MjA5Mw==","avatar_url":"https://avatars2.githubusercontent.com/u/652093?v=4","gravatar_id":"","url":"https://api.github.com/users/reflection","html_url":"https://github.com/reflection","followers_url":"https://api.github.com/users/reflection/followers","following_url":"https://api.github.com/users/reflection/following{/other_user}","gists_url":"https://api.github.com/users/reflection/gists{/gist_id}","starred_url":"https://api.github.com/users/reflection/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reflection/subscriptions","organizations_url":"https://api.github.com/users/reflection/orgs","repos_url":"https://api.github.com/users/reflection/repos","events_url":"https://api.github.com/users/reflection/events{/privacy}","received_events_url":"https://api.github.com/users/reflection/received_events","type":"User","site_admin":false},"created_at":"2016-04-04T23:28:56Z","updated_at":"2016-04-04T23:28:56Z","author_association":"NONE","body":"Automatic offset committing in Kafka with the new consumer wasn't working the way I thought it would.  I switched back to the old high-level consumer, and these errors went away.\n\nThat being said, if we do see these kind of errors, [BulkProcessor](https://www.elastic.co/guide/en/elasticsearch/client/java-api/current/java-docs-bulk-processor.html) looks like it would retry with whatever you set in its BackoffPolicy.\n","performed_via_github_app":null}]