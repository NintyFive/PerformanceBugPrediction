{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26523","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26523/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26523/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26523/events","html_url":"https://github.com/elastic/elasticsearch/issues/26523","id":255725860,"node_id":"MDU6SXNzdWUyNTU3MjU4NjA=","number":26523,"title":"Fuzzy queries give incorrect scores","user":{"login":"isonil","id":8492408,"node_id":"MDQ6VXNlcjg0OTI0MDg=","avatar_url":"https://avatars0.githubusercontent.com/u/8492408?v=4","gravatar_id":"","url":"https://api.github.com/users/isonil","html_url":"https://github.com/isonil","followers_url":"https://api.github.com/users/isonil/followers","following_url":"https://api.github.com/users/isonil/following{/other_user}","gists_url":"https://api.github.com/users/isonil/gists{/gist_id}","starred_url":"https://api.github.com/users/isonil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/isonil/subscriptions","organizations_url":"https://api.github.com/users/isonil/orgs","repos_url":"https://api.github.com/users/isonil/repos","events_url":"https://api.github.com/users/isonil/events{/privacy}","received_events_url":"https://api.github.com/users/isonil/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"}],"state":"closed","locked":false,"assignee":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"assignees":[{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2017-09-06T20:04:44Z","updated_at":"2017-09-07T22:53:47Z","closed_at":"2017-09-07T22:53:47Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version**: 5.5.2\r\n\r\nFuzzy queries give completely random unintuitive scores.\r\n\r\nFor example, searching for `testitem3` will give `testitem3` the **lowest** score, which is contradictory to what all fuzzy queries tutorials you can find say and is completely unintuitive.\r\n\r\nExample query:\r\n\r\n```\r\n{\r\n  \"size\": 5,\r\n  \"query\": {\r\n    \"match\": {\r\n      \"name\": {\r\n        \"query\": \"testitem3\",\r\n        \"fuzziness\": \"AUTO\",\r\n        \"fuzzy_transpositions\": true\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nResult:\r\n```\r\n{\r\n  \"took\" : 8,\r\n  \"timed_out\" : false,\r\n  \"_shards\" : {\r\n    \"total\" : 5,\r\n    \"successful\" : 5,\r\n    \"failed\" : 0\r\n  },\r\n  \"hits\" : {\r\n    \"total\" : 3,\r\n    \"max_score\" : 0.8582256,\r\n    \"hits\" : [\r\n      {\r\n        \"_index\" : \"project\",\r\n        \"_type\" : \"itemsearch\",\r\n        \"_id\" : \"1\",\r\n        \"_score\" : 0.8582256,\r\n        \"_source\" : {\r\n          \"id\" : 1,\r\n          \"name\" : \"testitem\"\r\n        }\r\n      },\r\n      {\r\n        \"_index\" : \"project\",\r\n        \"_type\" : \"itemsearch\",\r\n        \"_id\" : \"2\",\r\n        \"_score\" : 0.6161308,\r\n        \"_source\" : {\r\n          \"id\" : 2,\r\n          \"name\" : \"testitem2\"\r\n        }\r\n      },\r\n      {\r\n        \"_index\" : \"project\",\r\n        \"_type\" : \"itemsearch\",\r\n        \"_id\" : \"3\",\r\n        \"_score\" : 0.2876821,\r\n        \"_source\" : {\r\n          \"id\" : 3,\r\n          \"name\" : \"testitem3\"\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n","closed_by":{"login":"isonil","id":8492408,"node_id":"MDQ6VXNlcjg0OTI0MDg=","avatar_url":"https://avatars0.githubusercontent.com/u/8492408?v=4","gravatar_id":"","url":"https://api.github.com/users/isonil","html_url":"https://github.com/isonil","followers_url":"https://api.github.com/users/isonil/followers","following_url":"https://api.github.com/users/isonil/following{/other_user}","gists_url":"https://api.github.com/users/isonil/gists{/gist_id}","starred_url":"https://api.github.com/users/isonil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/isonil/subscriptions","organizations_url":"https://api.github.com/users/isonil/orgs","repos_url":"https://api.github.com/users/isonil/repos","events_url":"https://api.github.com/users/isonil/events{/privacy}","received_events_url":"https://api.github.com/users/isonil/received_events","type":"User","site_admin":false},"performed_via_github_app":null}