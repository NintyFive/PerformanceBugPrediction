{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/36545","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36545/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36545/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36545/events","html_url":"https://github.com/elastic/elasticsearch/issues/36545","id":390233804,"node_id":"MDU6SXNzdWUzOTAyMzM4MDQ=","number":36545,"title":"If an ingest node changes the target index, the original index is still created. ","user":{"login":"clement-tourriere","id":4599746,"node_id":"MDQ6VXNlcjQ1OTk3NDY=","avatar_url":"https://avatars1.githubusercontent.com/u/4599746?v=4","gravatar_id":"","url":"https://api.github.com/users/clement-tourriere","html_url":"https://github.com/clement-tourriere","followers_url":"https://api.github.com/users/clement-tourriere/followers","following_url":"https://api.github.com/users/clement-tourriere/following{/other_user}","gists_url":"https://api.github.com/users/clement-tourriere/gists{/gist_id}","starred_url":"https://api.github.com/users/clement-tourriere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clement-tourriere/subscriptions","organizations_url":"https://api.github.com/users/clement-tourriere/orgs","repos_url":"https://api.github.com/users/clement-tourriere/repos","events_url":"https://api.github.com/users/clement-tourriere/events{/privacy}","received_events_url":"https://api.github.com/users/clement-tourriere/received_events","type":"User","site_admin":false},"labels":[{"id":268963484,"node_id":"MDU6TGFiZWwyNjg5NjM0ODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Ingest","name":":Core/Features/Ingest","color":"0e8a16","default":false,"description":"Execution or management of Ingest Pipelines"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":962378555,"node_id":"MDU6TGFiZWw5NjIzNzg1NTU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.5.0","name":"v6.5.0","color":"Dddddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-12-12T13:48:43Z","updated_at":"2019-03-06T22:18:44Z","closed_at":"2019-03-06T22:18:44Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** elasticsearch >= 6.5\r\n\r\n**Plugins installed**: None\r\n\r\n**JVM version** (11.0.1)\r\n\r\nDate name processor creates prefixed index additionally to the date timed index. \r\nThis comportement has been introduced by this PR that creates the index before executing the pipeline: https://github.com/elastic/elasticsearch/pull/32786\r\n\r\n**Steps to reproduce**:\r\n\r\nFrom a clean elasticsearch instance (from 6.5), just follow the example from date name processor documentation: \r\n\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/date-index-name-processor.html\r\n\r\n```sh\r\n# Create the processor\r\ncurl -X PUT \"localhost:9200/_ingest/pipeline/monthlyindex\" -H 'Content-Type: application/json' -d'\r\n{\r\n  \"description\": \"monthly date-time index naming\",\r\n  \"processors\" : [\r\n    {\r\n      \"date_index_name\" : {\r\n        \"field\" : \"date1\",\r\n        \"index_name_prefix\" : \"myindex-\",\r\n        \"date_rounding\" : \"M\"\r\n      }\r\n    }\r\n  ]\r\n}\r\n'\r\n\r\n# Index a document\r\n\r\ncurl -X PUT \"localhost:9200/myindex/_doc/1?pipeline=monthlyindex\" -H 'Content-Type: application/json' -d'\r\n{\r\n  \"date1\" : \"2016-04-25T12:02:01.789Z\"\r\n}\r\n'\r\n\r\n\r\n# my_index and myindex-2016-04-01 are created\r\ncurl -XGET \"http://localhost:9200/_cat/indices?v\"\r\n\r\n```\r\n","closed_by":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"performed_via_github_app":null}