{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10487","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10487/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10487/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10487/events","html_url":"https://github.com/elastic/elasticsearch/issues/10487","id":67140614,"node_id":"MDU6SXNzdWU2NzE0MDYxNA==","number":10487,"title":"Dangling indices may not be imported if found on elected master node","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"labels":[{"id":152510590,"node_id":"MDU6TGFiZWwxNTI1MTA1OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Recovery","name":":Distributed/Recovery","color":"0e8a16","default":false,"description":"Anything around constructing a new shard, either from a local or a remote source."},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-04-08T14:18:25Z","updated_at":"2016-01-18T13:20:52Z","closed_at":"2016-01-18T10:05:24Z","author_association":"MEMBER","active_lock_reason":null,"body":"Dangling indices are indices that are found on disk but do not exist in the cluster state. To be safe, those are imported into the cluster state instead of automatically deleting them. This is done by reading their meta data and sending the master node a request to add them to the current meta data. \n\nAt the moment, this request may be lost if the dangling index is discovered on the master and the master only (which means the master imported it's cluster state from another node it deemed better, or index is copied into alive cluster, like our tests do ). This is because the dangling request import logic doesn't take into account that the local node might be the master and tries to send the request via the transport layer to itself. However, the local node may not be connected (we only connect if the local node is a unicast host target or after 10s have passed and `InternalClusterService.ReconnectToNodes` kicks in).  \n\nA generic solution was added in #10350 but it had to be pulled out, we now need to fix this in the dangling index code.\n","closed_by":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"performed_via_github_app":null}