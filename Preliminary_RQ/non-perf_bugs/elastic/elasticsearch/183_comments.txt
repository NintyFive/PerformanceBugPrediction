[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/247696","html_url":"https://github.com/elastic/elasticsearch/issues/183#issuecomment-247696","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/183","id":247696,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NzY5Ng==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-05-20T17:44:32Z","updated_at":"2010-05-20T17:44:32Z","author_association":"MEMBER","body":"Are you releasing the first node from its sleep? I understand you sue the service wrapper, and the service wrapper pings the jvm to see if its alive.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/247719","html_url":"https://github.com/elastic/elasticsearch/issues/183#issuecomment-247719","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/183","id":247719,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NzcxOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2010-05-20T17:53:20Z","updated_at":"2010-05-20T17:53:20Z","author_association":"CONTRIBUTOR","body":"No, i'm killing it while it is asleep.  If the JVM isn't responding then  the service wrapper sends a `kill -9` as well, which (I think) replicates this situation.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/247722","html_url":"https://github.com/elastic/elasticsearch/issues/183#issuecomment-247722","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/183","id":247722,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NzcyMg==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-05-20T17:55:50Z","updated_at":"2010-05-20T17:55:50Z","author_association":"MEMBER","body":"In this case, the socket might not have closed. It will do its retry pings (with timeout) and after they fail, the node will be considered dead. So, you are running now with pure elasticsearch script, no service wrapper?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/247726","html_url":"https://github.com/elastic/elasticsearch/issues/183#issuecomment-247726","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/183","id":247726,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NzcyNg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2010-05-20T17:58:52Z","updated_at":"2010-05-20T17:58:52Z","author_association":"CONTRIBUTOR","body":"In live I use the service wrapper. This test was just run directly.  How long should it take to timeout? Because I left it for a few minutes, and it didn't recover\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/247799","html_url":"https://github.com/elastic/elasticsearch/issues/183#issuecomment-247799","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/183","id":247799,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Nzc5OQ==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-05-20T19:08:00Z","updated_at":"2010-05-20T19:08:00Z","author_association":"MEMBER","body":"ok, so, after 1.5 minutes, it should detect it as disconnected. These values are configurable at: http://www.elasticsearch.com/docs/elasticsearch/modules/discovery/zen/. Note, I am still playing around with the best default values, you don't want to put it a too low  a value, since a node going through a long GC should usually not be considered disconnected (it will reconnect once its back if it has been).\n\nBut, there was a bug in this logic. So basically, the FD detection ended up only relying on socket close event. I have pushed a fix for this just now.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/316090","html_url":"https://github.com/elastic/elasticsearch/issues/183#issuecomment-316090","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/183","id":316090,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNjA5MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2010-07-17T11:59:07Z","updated_at":"2010-07-17T11:59:07Z","author_association":"CONTRIBUTOR","body":"Fixed\n","performed_via_github_app":null}]