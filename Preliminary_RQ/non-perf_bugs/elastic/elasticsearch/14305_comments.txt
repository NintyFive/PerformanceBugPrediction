[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/152298496","html_url":"https://github.com/elastic/elasticsearch/issues/14305#issuecomment-152298496","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14305","id":152298496,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MjI5ODQ5Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-29T19:43:43Z","updated_at":"2015-10-29T19:43:43Z","author_association":"CONTRIBUTOR","body":"Aggs are not supported with scan in 2.0.  In 1.x, they were supported, but were recalculated for each subsequent request and returned incorrect values.  Aggs results are calculated over ALL hits, not just the hits that are returned in a single request.\n\nWhy are you wanting to use aggs with scanning?  I suggest you make two requests: one with size zero for the aggs, and another with scroll/scan to scroll through all the docs.\n","performed_via_github_app":null}]