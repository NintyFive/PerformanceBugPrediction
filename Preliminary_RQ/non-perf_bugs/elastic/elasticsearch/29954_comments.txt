[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384132786","html_url":"https://github.com/elastic/elasticsearch/issues/29954#issuecomment-384132786","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29954","id":384132786,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMjc4Ng==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-07-03T11:14:38Z","updated_at":"2018-04-25T01:33:02Z","author_association":"COLLABORATOR","body":"*Original comment by @sophiec20:*\n\nAlso consider including validation when field conflicts exist.\r\n\r\nIf job-1 has been created using a partitoning field `host` then this is added to the mappings of the shared results index.\r\n\r\nIf a subsequent job-2 is created using `host.keyword` then the job creation will fail, because the results index already contains this field (named as `host`). \r\n\r\nHaving these extra mapping fields makes it much better for searching results as the end-user can use familiar syntax `host: server1`. \r\n\r\nTo workaround this, we currently recommend using a dedicated index for job-2. This will keep their results separate allowing `host` and `host.keyword` to exist in different indices.\r\n\r\nAs the results index always uses keywords as a data type, an alternative would be to check if `host.keyword` is a multi-field (and not a nested field) and then truncate the field name to plain `host`. This may lead to downstream issues in the UI where is has to plot source data and would need to know if it should use `host` or `host.keyword`.\r\n\r\nAlternatively/additionally, some checks could be added to job `_validate` steps. An error is currently returned when we create the job `PUT <job_id>` which describes the field conflicts however it would be better if we could include this in a validation step.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/581441661","html_url":"https://github.com/elastic/elasticsearch/issues/29954#issuecomment-581441661","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29954","id":581441661,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTQ0MTY2MQ==","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"created_at":"2020-02-03T14:31:20Z","updated_at":"2020-02-03T14:31:20Z","author_association":"MEMBER","body":"Closing as the re-design is complete and #51814 is now tracking the outstanding mapping collision discussion. ","performed_via_github_app":null}]