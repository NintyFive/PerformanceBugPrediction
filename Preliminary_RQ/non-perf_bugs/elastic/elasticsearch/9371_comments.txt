[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70835993","html_url":"https://github.com/elastic/elasticsearch/issues/9371#issuecomment-70835993","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9371","id":70835993,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODM1OTkz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-01-21T13:27:27Z","updated_at":"2015-01-21T13:27:27Z","author_association":"CONTRIBUTOR","body":"Previously, setting just `search_analyzer` and leaving `index_analyzer` blank, would have caused the index analyzer to use the \"default\" at index time, where the default could have been specified in the `_analyzer` field.  \n\nGiven that we're planning on removing that in #9279, I'm +1 on this change.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/71177414","html_url":"https://github.com/elastic/elasticsearch/issues/9371#issuecomment-71177414","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9371","id":71177414,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTc3NDE0","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2015-01-23T10:54:03Z","updated_at":"2015-01-23T10:54:03Z","author_association":"MEMBER","body":"`index_analyzer` is a useful name since it is explicit about what it applies to. I think we should keep the settings as they are but throw an exception if the `analyzer` setting is used with any of the other settings (`index_analyzer`, `search_analyzer`, `search_quote_analyzer`). This removes the trappy behaviours since if you are doing something complex you have to set each option explicitly but allows the simple use cases where you want to set an analyzer for all situations in one go. It also means that we don't negate the point of having a default analyzer in the mappings so you can still set e.g. the `index_analyzer` to be blank and it will use the default analyzer. Having the three names explicit means that its clear which analyzer applies to which situation (index, search or lucene phrase)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/71193360","html_url":"https://github.com/elastic/elasticsearch/issues/9371#issuecomment-71193360","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9371","id":71193360,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTkzMzYw","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-01-23T13:33:44Z","updated_at":"2015-01-23T13:33:44Z","author_association":"CONTRIBUTOR","body":"@colings86 That does not remove all the trappy behaviors. There are two traps: one is the \"defaults\" if you leave something blank (see clinton's example), the other is using 'analyzer' in combination with index/search analyzer.\n\n+1 to ryan's proposal. I'm -1 to any solution that doesnt solve both the traps.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/71194540","html_url":"https://github.com/elastic/elasticsearch/issues/9371#issuecomment-71194540","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9371","id":71194540,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTk0NTQw","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2015-01-23T13:44:22Z","updated_at":"2015-01-23T13:45:20Z","author_association":"MEMBER","body":"@rmuir sorry, I think what I wrote didn't explain completely what my thinking is. What I propose is that we leave the names of the options as they are (because the names are currently clear on what they affect) but we add validation that says:\n1. If you specify `analyzer` you can't specify `index_analyzer`, `search_analyzer` or `search_quote_analyzer` as well. Doing so will throw a parse exception\n2. You must specify `index_analyzer` and `search_analyzer` together or we throw a parse exception\n3. If you specify `search_quote_analyzer` you must specify `search_analyzer` (and because of 2. you must also specify `index_analyzer`) or we throw a parse exception\n\nThinking about it, I don't think it's a good idea to let people set either `search_analyzer` or `index_analyzer` to the default analyzer since you need to be careful about these settings and don't want an unexpected change to the default analyzer to screw up these settings. But I think the above rules still apply\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/71207410","html_url":"https://github.com/elastic/elasticsearch/issues/9371#issuecomment-71207410","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9371","id":71207410,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjA3NDEw","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-01-23T15:15:41Z","updated_at":"2015-01-23T15:15:41Z","author_association":"CONTRIBUTOR","body":"I agree, with those rules it can also solve the problems.\n\nHowever, i think its a more complicated set of rules to enforce, just to support exotic cases. Either way, as long as the 'analyzer' case is easy, i am fine.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/71239897","html_url":"https://github.com/elastic/elasticsearch/issues/9371#issuecomment-71239897","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9371","id":71239897,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjM5ODk3","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-01-23T18:29:10Z","updated_at":"2015-01-23T18:29:10Z","author_association":"MEMBER","body":"@colings86 Yes, those rules will \"work\" for validation, but I agree with Robert that it is just added complication. It also makes the system more difficult on the user.  Imagine a typical case where you have set your `analyzer`, and now you want to add some query time synonyms.  You go to set your `search_analyzer`, and now you have to _remove_ `analyzer`, add `index_analyzer` and add `search_analyzer`.  But why? You won't be changing the analyzer for indexing, you would only be moving it from one setting name to another. Now instead, with what i proposed, you would only add `search_analyzer` and you are done.  Anyone who is advanced enough to understand they need to set a `search_analyzer` can understand that the generically named `analyzer` is the general analyzer used, and setting `search_analyzer` is an _override_ of the analyzer at search time, and likewise, setting `search_quote_analyzer` is an _override_ of the search analyzer at search time.  This build up pattern is easy to understand, and easy on the user to use.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/71509861","html_url":"https://github.com/elastic/elasticsearch/issues/9371#issuecomment-71509861","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9371","id":71509861,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTA5ODYx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-01-26T18:22:53Z","updated_at":"2015-01-26T18:22:53Z","author_association":"CONTRIBUTOR","body":"I like the clarity of the name `index_analyzer`, but I do find @rjernst's logic compelling and easier to explain.  It also solves the issue we have currently that you can set the `analyzer`, but if you retrieve the mapping you get back the `index_analyzer` and the `search_analyzer`.\n\nI think I'm opting for `analyzer` <  `search_analyzer` < `search_quote_analyzer`.\n","performed_via_github_app":null}]