[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157373473","html_url":"https://github.com/elastic/elasticsearch/issues/14706#issuecomment-157373473","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14706","id":157373473,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzM3MzQ3Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-17T13:43:28Z","updated_at":"2015-11-17T13:43:28Z","author_association":"CONTRIBUTOR","body":"Hi @krisb78 \n\nCould you try it without the cloud aws plugin and see if you have the same problem?  Also, could you upload the output of `GET /_cluster/state` (which you'll need to get from the 1.7.2 cluster)\n\nthanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157382634","html_url":"https://github.com/elastic/elasticsearch/issues/14706#issuecomment-157382634","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14706","id":157382634,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzM4MjYzNA==","user":{"login":"krisb78","id":222033,"node_id":"MDQ6VXNlcjIyMjAzMw==","avatar_url":"https://avatars3.githubusercontent.com/u/222033?v=4","gravatar_id":"","url":"https://api.github.com/users/krisb78","html_url":"https://github.com/krisb78","followers_url":"https://api.github.com/users/krisb78/followers","following_url":"https://api.github.com/users/krisb78/following{/other_user}","gists_url":"https://api.github.com/users/krisb78/gists{/gist_id}","starred_url":"https://api.github.com/users/krisb78/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krisb78/subscriptions","organizations_url":"https://api.github.com/users/krisb78/orgs","repos_url":"https://api.github.com/users/krisb78/repos","events_url":"https://api.github.com/users/krisb78/events{/privacy}","received_events_url":"https://api.github.com/users/krisb78/received_events","type":"User","site_admin":false},"created_at":"2015-11-17T14:19:19Z","updated_at":"2015-11-17T14:19:19Z","author_association":"NONE","body":"Hi @clintongormley ,\n\nHere's my cluster state, I'll try to start the node without cloud-aws and let you know shortly.\n\n[cluster_state.txt](https://github.com/elastic/elasticsearch/files/36746/cluster_state.txt)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157384259","html_url":"https://github.com/elastic/elasticsearch/issues/14706#issuecomment-157384259","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14706","id":157384259,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzM4NDI1OQ==","user":{"login":"dominicbartl","id":489705,"node_id":"MDQ6VXNlcjQ4OTcwNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/489705?v=4","gravatar_id":"","url":"https://api.github.com/users/dominicbartl","html_url":"https://github.com/dominicbartl","followers_url":"https://api.github.com/users/dominicbartl/followers","following_url":"https://api.github.com/users/dominicbartl/following{/other_user}","gists_url":"https://api.github.com/users/dominicbartl/gists{/gist_id}","starred_url":"https://api.github.com/users/dominicbartl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dominicbartl/subscriptions","organizations_url":"https://api.github.com/users/dominicbartl/orgs","repos_url":"https://api.github.com/users/dominicbartl/repos","events_url":"https://api.github.com/users/dominicbartl/events{/privacy}","received_events_url":"https://api.github.com/users/dominicbartl/received_events","type":"User","site_admin":false},"created_at":"2015-11-17T14:23:06Z","updated_at":"2015-11-17T14:23:06Z","author_association":"NONE","body":"I just ran into the same issue.\n[cluster-state.json.txt](https://github.com/elastic/elasticsearch/files/36756/cluster-state.json.txt)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157384464","html_url":"https://github.com/elastic/elasticsearch/issues/14706#issuecomment-157384464","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14706","id":157384464,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzM4NDQ2NA==","user":{"login":"krisb78","id":222033,"node_id":"MDQ6VXNlcjIyMjAzMw==","avatar_url":"https://avatars3.githubusercontent.com/u/222033?v=4","gravatar_id":"","url":"https://api.github.com/users/krisb78","html_url":"https://github.com/krisb78","followers_url":"https://api.github.com/users/krisb78/followers","following_url":"https://api.github.com/users/krisb78/following{/other_user}","gists_url":"https://api.github.com/users/krisb78/gists{/gist_id}","starred_url":"https://api.github.com/users/krisb78/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krisb78/subscriptions","organizations_url":"https://api.github.com/users/krisb78/orgs","repos_url":"https://api.github.com/users/krisb78/repos","events_url":"https://api.github.com/users/krisb78/events{/privacy}","received_events_url":"https://api.github.com/users/krisb78/received_events","type":"User","site_admin":false},"created_at":"2015-11-17T14:23:40Z","updated_at":"2015-11-17T14:23:40Z","author_association":"NONE","body":"Tried without cloud-aws, but got the same error:\n\n```\nroot@cubitsearch-master-1:/usr/share/elasticsearch# sudo -u elasticsearch /usr/bin/java -Xms3g -Xmx3g -Xmn200m -Djava.awt.headless=true -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+HeapDumpOnOutOfMemoryError -XX:+DisableExplicitGC -Dfile.encoding=UTF-8 -Djna.nosys=true -Des.path.home=/usr/share/elasticsearch -cp /usr/share/elasticsearch/lib/elasticsearch-2.0.0.jar:/usr/share/elasticsearch/lib/* org.elasticsearch.bootstrap.Elasticsearch start -Des.default.path.home=/usr/share/elasticsearch -Des.default.path.logs=/var/log/elasticsearch -Des.default.path.data=/var/lib/elasticsearch -Des.default.path.work=/tmp/elasticsearch -Des.default.path.conf=/etc/elasticsearch -Des.max-open-files=true\n[2015-11-17 14:22:36,284][INFO ][bootstrap                ] max_open_files [4096]\n[2015-11-17 14:22:37,329][INFO ][node                     ] [cubitsearch-master-1] version[2.0.0], pid[7642], build[de54438/2015-10-22T08:09:48Z]\n[2015-11-17 14:22:37,329][INFO ][node                     ] [cubitsearch-master-1] initializing ...\n[2015-11-17 14:22:37,664][INFO ][plugins                  ] [cubitsearch-master-1] loaded [], sites []\n[2015-11-17 14:22:38,048][INFO ][env                      ] [cubitsearch-master-1] using [1] data paths, mounts [[/ (/dev/xvda1)]], net usable_space [5.8gb], net total_space [7.8gb], spins? [no], types [ext4]\n[2015-11-17 14:22:46,488][ERROR][gateway                  ] [cubitsearch-master-1] failed to read local state, exiting...\njava.lang.ClassCastException: org.elasticsearch.cluster.metadata.AliasOrIndex$Index cannot be cast to org.elasticsearch.cluster.metadata.AliasOrIndex$Alias\n    at org.elasticsearch.cluster.metadata.MetaData$Builder.build(MetaData.java:1008)\n    at org.elasticsearch.gateway.MetaStateService.loadFullState(MetaStateService.java:104)\n    at org.elasticsearch.gateway.GatewayMetaState.loadMetaState(GatewayMetaState.java:97)\n    at org.elasticsearch.gateway.GatewayMetaState.pre20Upgrade(GatewayMetaState.java:223)\n    at org.elasticsearch.gateway.GatewayMetaState.<init>(GatewayMetaState.java:85)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n    at org.elasticsearch.common.inject.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:56)\n    at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:86)\n    at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:104)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:47)\n    at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:865)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:43)\n    at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:59)\n    at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:46)\n    at org.elasticsearch.common.inject.SingleParameterInjector.inject(SingleParameterInjector.java:42)\n    at org.elasticsearch.common.inject.SingleParameterInjector.getAll(SingleParameterInjector.java:66)\n    at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:85)\n    at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:104)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:47)\n    at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:865)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:43)\n    at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:59)\n    at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:46)\n    at org.elasticsearch.common.inject.SingleParameterInjector.inject(SingleParameterInjector.java:42)\n    at org.elasticsearch.common.inject.SingleParameterInjector.getAll(SingleParameterInjector.java:66)\n    at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:85)\n    at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:104)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:47)\n    at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:865)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:43)\n    at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:59)\n    at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:46)\n    at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:201)\n    at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:193)\n    at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:858)\n    at org.elasticsearch.common.inject.InjectorBuilder.loadEagerSingletons(InjectorBuilder.java:193)\n    at org.elasticsearch.common.inject.InjectorBuilder.injectDynamically(InjectorBuilder.java:175)\n    at org.elasticsearch.common.inject.InjectorBuilder.build(InjectorBuilder.java:110)\n    at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:93)\n    at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:70)\n    at org.elasticsearch.common.inject.ModulesBuilder.createInjector(ModulesBuilder.java:47)\n    at org.elasticsearch.node.Node.<init>(Node.java:198)\n    at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:145)\n    at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:170)\n    at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:270)\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35)\n[2015-11-17 14:22:48,683][ERROR][gateway                  ] [cubitsearch-master-1] failed to read local state, exiting...\njava.lang.ClassCastException: org.elasticsearch.cluster.metadata.AliasOrIndex$Index cannot be cast to org.elasticsearch.cluster.metadata.AliasOrIndex$Alias\n    at org.elasticsearch.cluster.metadata.MetaData$Builder.build(MetaData.java:1008)\n    at org.elasticsearch.gateway.MetaStateService.loadFullState(MetaStateService.java:104)\n    at org.elasticsearch.gateway.GatewayMetaState.loadMetaState(GatewayMetaState.java:97)\n    at org.elasticsearch.gateway.GatewayMetaState.pre20Upgrade(GatewayMetaState.java:223)\n    at org.elasticsearch.gateway.GatewayMetaState.<init>(GatewayMetaState.java:85)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n    at org.elasticsearch.common.inject.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:56)\n    at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:86)\n    at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:104)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:47)\n    at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:865)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:43)\n    at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:59)\n    at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:46)\n    at org.elasticsearch.common.inject.SingleParameterInjector.inject(SingleParameterInjector.java:42)\n    at org.elasticsearch.common.inject.SingleParameterInjector.getAll(SingleParameterInjector.java:66)\n    at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:85)\n    at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:104)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:47)\n    at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:865)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:43)\n    at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:59)\n    at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:46)\n    at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:201)\n    at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:193)\n    at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:858)\n    at org.elasticsearch.common.inject.InjectorBuilder.loadEagerSingletons(InjectorBuilder.java:193)\n    at org.elasticsearch.common.inject.InjectorBuilder.injectDynamically(InjectorBuilder.java:175)\n    at org.elasticsearch.common.inject.InjectorBuilder.build(InjectorBuilder.java:110)\n    at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:93)\n    at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:70)\n    at org.elasticsearch.common.inject.ModulesBuilder.createInjector(ModulesBuilder.java:47)\n    at org.elasticsearch.node.Node.<init>(Node.java:198)\n    at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:145)\n    at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:170)\n    at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:270)\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35)\n[2015-11-17 14:22:50,248][ERROR][gateway                  ] [cubitsearch-master-1] failed to read local state, exiting...\njava.lang.ClassCastException: org.elasticsearch.cluster.metadata.AliasOrIndex$Index cannot be cast to org.elasticsearch.cluster.metadata.AliasOrIndex$Alias\n    at org.elasticsearch.cluster.metadata.MetaData$Builder.build(MetaData.java:1008)\n    at org.elasticsearch.gateway.MetaStateService.loadFullState(MetaStateService.java:104)\n    at org.elasticsearch.gateway.GatewayMetaState.loadMetaState(GatewayMetaState.java:97)\n    at org.elasticsearch.gateway.GatewayMetaState.pre20Upgrade(GatewayMetaState.java:223)\n    at org.elasticsearch.gateway.GatewayMetaState.<init>(GatewayMetaState.java:85)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n    at org.elasticsearch.common.inject.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:56)\n    at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:86)\n    at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:104)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:47)\n    at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:865)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:43)\n    at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:59)\n    at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:46)\n    at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:201)\n    at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:193)\n    at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:858)\n    at org.elasticsearch.common.inject.InjectorBuilder.loadEagerSingletons(InjectorBuilder.java:193)\n    at org.elasticsearch.common.inject.InjectorBuilder.injectDynamically(InjectorBuilder.java:175)\n    at org.elasticsearch.common.inject.InjectorBuilder.build(InjectorBuilder.java:110)\n    at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:93)\n    at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:70)\n    at org.elasticsearch.common.inject.ModulesBuilder.createInjector(ModulesBuilder.java:47)\n    at org.elasticsearch.node.Node.<init>(Node.java:198)\n    at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:145)\n    at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:170)\n    at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:270)\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35)\nException in thread \"main\" java.lang.ClassCastException: org.elasticsearch.cluster.metadata.AliasOrIndex$Index cannot be cast to org.elasticsearch.cluster.metadata.AliasOrIndex$Alias\n    at org.elasticsearch.cluster.metadata.MetaData$Builder.build(MetaData.java:1008)\n    at org.elasticsearch.gateway.MetaStateService.loadFullState(MetaStateService.java:104)\n    at org.elasticsearch.gateway.GatewayMetaState.loadMetaState(GatewayMetaState.java:97)\n    at org.elasticsearch.gateway.GatewayMetaState.pre20Upgrade(GatewayMetaState.java:223)\n    at org.elasticsearch.gateway.GatewayMetaState.<init>(GatewayMetaState.java:85)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n    at <<<guice>>>\n    at org.elasticsearch.node.Node.<init>(Node.java:198)\n    at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:145)\n    at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:170)\n    at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:270)\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35)\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157761765","html_url":"https://github.com/elastic/elasticsearch/issues/14706#issuecomment-157761765","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14706","id":157761765,"node_id":"MDEyOklzc3VlQ29tbWVudDE1Nzc2MTc2NQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-11-18T16:07:13Z","updated_at":"2015-11-18T16:07:13Z","author_association":"MEMBER","body":"@krisb78 Looking at your cluster stats I found that there is an index named `hotcoffee_v1` and also an alias named `hotcoffee_v1`. Alias and index names need to be unique in a cluster, so this causes this  unexpected failure. I wonder how this could have happened... did you by any chance do a restore with a rename?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157768252","html_url":"https://github.com/elastic/elasticsearch/issues/14706#issuecomment-157768252","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14706","id":157768252,"node_id":"MDEyOklzc3VlQ29tbWVudDE1Nzc2ODI1Mg==","user":{"login":"krisb78","id":222033,"node_id":"MDQ6VXNlcjIyMjAzMw==","avatar_url":"https://avatars3.githubusercontent.com/u/222033?v=4","gravatar_id":"","url":"https://api.github.com/users/krisb78","html_url":"https://github.com/krisb78","followers_url":"https://api.github.com/users/krisb78/followers","following_url":"https://api.github.com/users/krisb78/following{/other_user}","gists_url":"https://api.github.com/users/krisb78/gists{/gist_id}","starred_url":"https://api.github.com/users/krisb78/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krisb78/subscriptions","organizations_url":"https://api.github.com/users/krisb78/orgs","repos_url":"https://api.github.com/users/krisb78/repos","events_url":"https://api.github.com/users/krisb78/events{/privacy}","received_events_url":"https://api.github.com/users/krisb78/received_events","type":"User","site_admin":false},"created_at":"2015-11-18T16:28:08Z","updated_at":"2015-11-18T16:28:08Z","author_association":"NONE","body":"This indeed is the case - I first created a template with the pattern set to 'hotcoffee_v1*', then started indexing into the 'hotcoffee_v1' index - the cluster (1.7.2) didn't complain.\n\nSo I have:\n\n```\n[LIVE] krisba@cubitsearch-client-2:~$ curl -XGET localhost:9200/_template/hotcoffee_v1?pretty\n{\n  \"hotcoffee_v1\" : {\n    \"order\" : 0,\n    \"template\" : \"hotcoffee_v1*\",\n    \"settings\" : {\n      \"index.merge.policy.merge_factor\" : \"30\",\n      \"index.refresh_interval\" : \"-1\"\n    },\n    \"mappings\" : {\n      \"hotcoffee\" : {\n        \"dynamic_templates\" : [ {\n          \"store_generic\" : {\n            \"mapping\" : {\n              \"index\" : \"not_analyzed\",\n              \"store\" : true,\n              \"doc_values\" : true\n            },\n            \"match\" : \"*\"\n          }\n        } ],\n        \"_ttl\" : {\n          \"enabled\" : true,\n          \"default\" : \"90d\"\n        },\n        \"properties\" : {\n          \"pf_timestamp\" : {\n            \"store\" : \"true\",\n            \"doc_values\" : true,\n            \"type\" : \"date\"\n          },\n          \"pf_prev_timestamp\" : {\n            \"store\" : \"true\",\n            \"doc_values\" : true,\n            \"type\" : \"date\"\n          }\n        }\n      }\n    },\n    \"aliases\" : {\n      \"hotcoffee_v1\" : { }\n    }\n  }\n}\n```\n\nand then\n\n```\n[LIVE] krisba@cubitsearch-client-2:~$ curl -XGET localhost:9200/hotcoffee_v1?pretty\n{\n  \"hotcoffee_v1\" : {\n    \"aliases\" : {\n      \"hotcoffee_v1\" : { }\n    },\n    \"mappings\" : {\n      \"hotcoffee\" : {\n        \"dynamic_templates\" : [ {\n          \"store_generic\" : {\n            \"mapping\" : {\n              \"index\" : \"not_analyzed\",\n              \"store\" : true,\n              \"doc_values\" : true\n            },\n            \"match\" : \"*\"\n          }\n        } ],\n        \"_ttl\" : {\n          \"enabled\" : true,\n          \"default\" : 7776000000\n        },\n        \"properties\" : {\n          \"ach_name\" : {\n            \"type\" : \"string\",\n            \"index\" : \"not_analyzed\",\n            \"store\" : true,\n            \"doc_values\" : true\n          },\n          \"app_name\" : {\n            \"type\" : \"string\",\n            \"index\" : \"not_analyzed\",\n            \"store\" : true,\n            \"doc_values\" : true\n          },\n          \"appid\" : {\n            \"type\" : \"long\",\n            \"store\" : true,\n            \"doc_values\" : true\n          },\n          \"pf_network\" : {\n            \"type\" : \"string\",\n            \"index\" : \"not_analyzed\",\n            \"store\" : true,\n            \"doc_values\" : true\n          },\n          \"pf_playtime_delta\" : {\n            \"type\" : \"long\",\n            \"store\" : true,\n            \"doc_values\" : true\n          },\n          \"pf_prev_timestamp\" : {\n            \"type\" : \"date\",\n            \"store\" : true,\n            \"doc_values\" : true,\n            \"format\" : \"dateOptionalTime\"\n          },\n          \"pf_steamid\" : {\n            \"type\" : \"string\",\n            \"index\" : \"not_analyzed\",\n            \"store\" : true,\n            \"doc_values\" : true\n          },\n          \"pf_timestamp\" : {\n            \"type\" : \"date\",\n            \"store\" : true,\n            \"doc_values\" : true,\n            \"format\" : \"dateOptionalTime\"\n          },\n          \"pf_type\" : {\n            \"type\" : \"string\",\n            \"index\" : \"not_analyzed\",\n            \"store\" : true,\n            \"doc_values\" : true\n          },\n          \"playtime_2weeks\" : {\n            \"type\" : \"long\",\n            \"store\" : true,\n            \"doc_values\" : true\n          },\n          \"playtime_forever\" : {\n            \"type\" : \"long\",\n            \"store\" : true,\n            \"doc_values\" : true\n          },\n          \"timestamp_delta_minutes\" : {\n            \"type\" : \"long\",\n            \"store\" : true,\n            \"doc_values\" : true\n          }\n        }\n      }\n    },\n    \"settings\" : {\n      \"index\" : {\n        \"creation_date\" : \"1433238565453\",\n        \"uuid\" : \"tE5bQrzkT5-Hei6TMp7KVQ\",\n        \"number_of_replicas\" : \"1\",\n        \"number_of_shards\" : \"5\",\n        \"refresh_interval\" : \"-1\",\n        \"version\" : {\n          \"created\" : \"1050299\"\n        },\n        \"merge\" : {\n          \"policy\" : {\n            \"merge_factor\" : \"30\"\n          }\n        }\n      }\n    },\n    \"warmers\" : { }\n  }\n}\n```\n\nI think I have one more index/template set up like that, it never caused me a problem in 1.7.2...\n\nHas it changed in 2.0.0 ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157771036","html_url":"https://github.com/elastic/elasticsearch/issues/14706#issuecomment-157771036","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14706","id":157771036,"node_id":"MDEyOklzc3VlQ29tbWVudDE1Nzc3MTAzNg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-11-18T16:38:02Z","updated_at":"2015-11-18T16:38:02Z","author_association":"MEMBER","body":"No (except than the error that you're seeing that expects index and alias names to be unique). So this error needs to be fixed and be able to handle alias and index with the same name.\n\nI do think that adding an alias with the same name as the index via index templates should not be allowed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157776609","html_url":"https://github.com/elastic/elasticsearch/issues/14706#issuecomment-157776609","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14706","id":157776609,"node_id":"MDEyOklzc3VlQ29tbWVudDE1Nzc3NjYwOQ==","user":{"login":"krisb78","id":222033,"node_id":"MDQ6VXNlcjIyMjAzMw==","avatar_url":"https://avatars3.githubusercontent.com/u/222033?v=4","gravatar_id":"","url":"https://api.github.com/users/krisb78","html_url":"https://github.com/krisb78","followers_url":"https://api.github.com/users/krisb78/followers","following_url":"https://api.github.com/users/krisb78/following{/other_user}","gists_url":"https://api.github.com/users/krisb78/gists{/gist_id}","starred_url":"https://api.github.com/users/krisb78/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krisb78/subscriptions","organizations_url":"https://api.github.com/users/krisb78/orgs","repos_url":"https://api.github.com/users/krisb78/repos","events_url":"https://api.github.com/users/krisb78/events{/privacy}","received_events_url":"https://api.github.com/users/krisb78/received_events","type":"User","site_admin":false},"created_at":"2015-11-18T16:53:10Z","updated_at":"2015-11-18T16:53:10Z","author_association":"NONE","body":"Hm, I see your point...\n\nI'll check if renaming these aliases fixes the issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157817361","html_url":"https://github.com/elastic/elasticsearch/issues/14706#issuecomment-157817361","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14706","id":157817361,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzgxNzM2MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-18T18:45:54Z","updated_at":"2015-11-18T18:45:54Z","author_association":"CONTRIBUTOR","body":"> I do think that adding an alias with the same name as the index via index templates should not be allowed.\n\nagreed!  We should \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157818351","html_url":"https://github.com/elastic/elasticsearch/issues/14706#issuecomment-157818351","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14706","id":157818351,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzgxODM1MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-18T18:48:54Z","updated_at":"2015-11-18T18:48:54Z","author_association":"CONTRIBUTOR","body":"It looks like trying to create an index and alias with the same name in 2.0 throws the same exception, so this should become clearer with the better exception proposed in #14842\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157819172","html_url":"https://github.com/elastic/elasticsearch/issues/14706#issuecomment-157819172","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14706","id":157819172,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzgxOTE3Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-18T18:51:35Z","updated_at":"2015-11-18T18:51:35Z","author_association":"CONTRIBUTOR","body":"It looks like it is impossible to remove an alias with the same name as an index in 1.x: \n\n```\nInvalidAliasNameException[[foo] Invalid alias name [foo], an index exists with the same name as the alias]\n```\n\nSo I think the only solution is to reindex into a new index, and to delete the old index\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158018973","html_url":"https://github.com/elastic/elasticsearch/issues/14706#issuecomment-158018973","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14706","id":158018973,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODAxODk3Mw==","user":{"login":"krisb78","id":222033,"node_id":"MDQ6VXNlcjIyMjAzMw==","avatar_url":"https://avatars3.githubusercontent.com/u/222033?v=4","gravatar_id":"","url":"https://api.github.com/users/krisb78","html_url":"https://github.com/krisb78","followers_url":"https://api.github.com/users/krisb78/followers","following_url":"https://api.github.com/users/krisb78/following{/other_user}","gists_url":"https://api.github.com/users/krisb78/gists{/gist_id}","starred_url":"https://api.github.com/users/krisb78/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krisb78/subscriptions","organizations_url":"https://api.github.com/users/krisb78/orgs","repos_url":"https://api.github.com/users/krisb78/repos","events_url":"https://api.github.com/users/krisb78/events{/privacy}","received_events_url":"https://api.github.com/users/krisb78/received_events","type":"User","site_admin":false},"created_at":"2015-11-19T10:40:29Z","updated_at":"2015-11-19T10:40:29Z","author_association":"NONE","body":"Ok, I think I will be able to get out of this by making sure I don't create new indices with the same names as the aliases defined in my templates.\n\nThanks a lot for looking into this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161557549","html_url":"https://github.com/elastic/elasticsearch/issues/14706#issuecomment-161557549","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14706","id":161557549,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTU1NzU0OQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-12-03T09:03:44Z","updated_at":"2015-12-03T09:03:44Z","author_association":"MEMBER","body":"Fixed via #14842\n","performed_via_github_app":null}]