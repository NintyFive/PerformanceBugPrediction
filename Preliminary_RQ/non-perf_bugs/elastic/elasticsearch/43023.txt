{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43023","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43023/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43023/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43023/events","html_url":"https://github.com/elastic/elasticsearch/issues/43023","id":454047595,"node_id":"MDU6SXNzdWU0NTQwNDc1OTU=","number":43023,"title":"java.lang.NoSuchMethodError: org.elasticsearch.action.index.IndexRequest.ifSeqNo()","user":{"login":"huangdeyao","id":15030961,"node_id":"MDQ6VXNlcjE1MDMwOTYx","avatar_url":"https://avatars2.githubusercontent.com/u/15030961?v=4","gravatar_id":"","url":"https://api.github.com/users/huangdeyao","html_url":"https://github.com/huangdeyao","followers_url":"https://api.github.com/users/huangdeyao/followers","following_url":"https://api.github.com/users/huangdeyao/following{/other_user}","gists_url":"https://api.github.com/users/huangdeyao/gists{/gist_id}","starred_url":"https://api.github.com/users/huangdeyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huangdeyao/subscriptions","organizations_url":"https://api.github.com/users/huangdeyao/orgs","repos_url":"https://api.github.com/users/huangdeyao/repos","events_url":"https://api.github.com/users/huangdeyao/events{/privacy}","received_events_url":"https://api.github.com/users/huangdeyao/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2019-06-10T08:06:52Z","updated_at":"2019-06-10T09:16:41Z","closed_at":"2019-06-10T08:27:19Z","author_association":"NONE","active_lock_reason":null,"body":"Elasticsearch version:\r\n7.1.1\r\n\r\nPlugins installed: []\r\n\r\nJVM version (java -version):\r\nopenjdk version \"1.8\" 2018-07-17\r\nOpenJDK Runtime Environment (build 10.0.2+13-suse-lp150.7.1-x8664)\r\nOpenJDK 64-Bit Server VM (build 10.0.2+13-suse-lp150.7.1-x8664, mixed mode)\r\n\r\nOS version (uname -a if on a Unix-like system):\r\ncentos7.0\r\n\r\nDescription of the problem including expected versus actual behavior:\r\nI tried to create an index using RestHighLevelClient and encountered a bug,\r\n\r\nSteps to reproduce:\r\npom.xml\r\n--------------------\r\n       <dependency>\r\n            <groupId>org.elasticsearch.client</groupId>\r\n            <artifactId>elasticsearch-rest-high-level-client</artifactId>\r\n            <version>7.1.1</version>\r\n        </dependency>\r\n----------------------------\r\n java\r\n-----------------------------\r\n```java\r\n  @Autowired\r\n    RestHighLevelClient restHighLevelClient;\r\n\r\n   @Test\r\n    public void contextLoads() throws IOException {\r\n        XContentBuilder builder = XContentFactory.jsonBuilder();\r\n        builder.startObject();\r\n        {\r\n            builder.field(\"user\", \"kimchy\");\r\n            builder.timeField(\"postDate\", new Date());\r\n            builder.field(\"message\", \"trying out Elasticsearch\");\r\n        }\r\n        builder.endObject();\r\n        IndexRequest request = new IndexRequest(\"test_index\")\r\n                .id(\"1\")\r\n                .type(\"hi\")\r\n                .source(builder)\r\n                .opType(DocWriteRequest.OpType.CREATE);\r\n        IndexResponse indexResponse = restHighLevelClient.index(request, RequestOptions.DEFAULT);\r\n        logger.info(indexResponse.toString());\r\n    }\r\n```\r\n-----------------------------\r\nResult:\r\n```\r\njava.lang.NoSuchMethodError: org.elasticsearch.action.index.IndexRequest.ifSeqNo()J\r\n\r\n\tat org.elasticsearch.client.RequestConverters.index(RequestConverters.java:329)\r\n\tat org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1429)\r\n\tat org.elasticsearch.client.RestHighLevelClient.performRequest(RestHighLevelClient.java:1403)\r\n\tat org.elasticsearch.client.RestHighLevelClient.performRequestAndParseEntity(RestHighLevelClient.java:1373)\r\n\tat org.elasticsearch.client.RestHighLevelClient.index(RestHighLevelClient.java:821)\r\n\tat com.elastic.search.SearchApplicationTests.contextLoads(SearchApplicationTests.java:56)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n```\r\nCannot find declaration to go to\r\n[img](http://article-1251741670.cos.ap-chengdu.myqcloud.com/home/20190610040836837.png)\r\nThe same example (with doc as a type) work in 7.1.1.\r\nhttps://www.elastic.co/guide/en/elasticsearch/client/java-rest/master/java-rest-high-document-index.html","closed_by":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"performed_via_github_app":null}