[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/437264613","html_url":"https://github.com/elastic/elasticsearch/issues/35373#issuecomment-437264613","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35373","id":437264613,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNzI2NDYxMw==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2018-11-09T06:34:23Z","updated_at":"2018-11-09T06:35:40Z","author_association":"MEMBER","body":"@AlekseiPipl before I address the actual issue, can I please ask you to format code blocks using Markdown syntax in the future? You can achieve this by enclosing code blocks in triple backticks, e.g. the following text:\r\n\r\n<pre>\r\n```\r\nthis is a formatted code block\r\n```\r\n</pre>\r\n\r\nis then rendered as:\r\n\r\n```\r\nthis is a formatted code block\r\n```\r\n\r\nThis makes stack traces much easier to read.\r\n\r\nAlso, this appears to be a question, and we'd like to direct these kinds of things to the [forums](https://discuss.elastic.co/). This allows us to use GitHub for verified bug reports, feature requests, and pull requests. I will address your question here now anyway:\r\n\r\nThe symptom we see is:\r\n\r\n```\r\nsdk_client_exception: Unable to execute HTTP request: Connect to es-apps-backup.s3.amazonaws.com:443 [es-apps-backup.s3.amazonaws.com/52.219.104.156] failed: connect timed out\r\n```\r\n\r\nThis is most likely caused by the fact that you have specified proxy settings in the [repository settings](https://www.elastic.co/guide/en/elasticsearch/plugins/6.4/repository-s3-repository.html) but you should have specified them as [client settings](https://www.elastic.co/guide/en/elasticsearch/plugins/6.4/repository-s3-client.html#repository-s3-client).\r\n\r\nSo you can specify the repository with:\r\n\r\n```\r\nPUT _snapshot/my_s3_repository\r\n{\r\n  \"type\": \"s3\",\r\n  \"settings\": {\r\n    \"bucket\": \"my_bucket\"\r\n  }\r\n}\r\n```\r\n\r\nYou need to specify client settings using the naming scheme `s3.client.CLIENT_NAME.SETTING_NAME` in `elasticsearch.yml` (secure settings go into the keystore) as mentioned in the docs. The default client name is `default`, hence the client settings need to be prefixed with `s3.client.default`:\r\n\r\ne.g.\r\n\r\n```\r\ns3.client.default.proxy.host: \"proxy.XXXXX.pro\"\r\ns3.client.default.proxy.port: 3128\r\n```\r\n\r\nPlease check the docs for other relevant [client settings](https://www.elastic.co/guide/en/elasticsearch/plugins/6.4/repository-s3-client.html#repository-s3-client).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/437654263","html_url":"https://github.com/elastic/elasticsearch/issues/35373#issuecomment-437654263","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35373","id":437654263,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNzY1NDI2Mw==","user":{"login":"AlekseiPipl","id":29835035,"node_id":"MDQ6VXNlcjI5ODM1MDM1","avatar_url":"https://avatars1.githubusercontent.com/u/29835035?v=4","gravatar_id":"","url":"https://api.github.com/users/AlekseiPipl","html_url":"https://github.com/AlekseiPipl","followers_url":"https://api.github.com/users/AlekseiPipl/followers","following_url":"https://api.github.com/users/AlekseiPipl/following{/other_user}","gists_url":"https://api.github.com/users/AlekseiPipl/gists{/gist_id}","starred_url":"https://api.github.com/users/AlekseiPipl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlekseiPipl/subscriptions","organizations_url":"https://api.github.com/users/AlekseiPipl/orgs","repos_url":"https://api.github.com/users/AlekseiPipl/repos","events_url":"https://api.github.com/users/AlekseiPipl/events{/privacy}","received_events_url":"https://api.github.com/users/AlekseiPipl/received_events","type":"User","site_admin":false},"created_at":"2018-11-11T09:08:57Z","updated_at":"2018-11-11T09:08:57Z","author_association":"NONE","body":"Thanks a lot!\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/437655375","html_url":"https://github.com/elastic/elasticsearch/issues/35373#issuecomment-437655375","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35373","id":437655375,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNzY1NTM3NQ==","user":{"login":"AlekseiPipl","id":29835035,"node_id":"MDQ6VXNlcjI5ODM1MDM1","avatar_url":"https://avatars1.githubusercontent.com/u/29835035?v=4","gravatar_id":"","url":"https://api.github.com/users/AlekseiPipl","html_url":"https://github.com/AlekseiPipl","followers_url":"https://api.github.com/users/AlekseiPipl/followers","following_url":"https://api.github.com/users/AlekseiPipl/following{/other_user}","gists_url":"https://api.github.com/users/AlekseiPipl/gists{/gist_id}","starred_url":"https://api.github.com/users/AlekseiPipl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlekseiPipl/subscriptions","organizations_url":"https://api.github.com/users/AlekseiPipl/orgs","repos_url":"https://api.github.com/users/AlekseiPipl/repos","events_url":"https://api.github.com/users/AlekseiPipl/events{/privacy}","received_events_url":"https://api.github.com/users/AlekseiPipl/received_events","type":"User","site_admin":false},"created_at":"2018-11-11T09:30:45Z","updated_at":"2018-11-11T09:30:45Z","author_association":"NONE","body":"It actually work.\r\n","performed_via_github_app":null}]