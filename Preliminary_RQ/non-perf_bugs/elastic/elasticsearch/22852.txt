{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22852","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22852/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22852/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22852/events","html_url":"https://github.com/elastic/elasticsearch/issues/22852","id":203881371,"node_id":"MDU6SXNzdWUyMDM4ODEzNzE=","number":22852,"title":"MLT Query Unlike clause issue","user":{"login":"SKumarMN","id":2056311,"node_id":"MDQ6VXNlcjIwNTYzMTE=","avatar_url":"https://avatars2.githubusercontent.com/u/2056311?v=4","gravatar_id":"","url":"https://api.github.com/users/SKumarMN","html_url":"https://github.com/SKumarMN","followers_url":"https://api.github.com/users/SKumarMN/followers","following_url":"https://api.github.com/users/SKumarMN/following{/other_user}","gists_url":"https://api.github.com/users/SKumarMN/gists{/gist_id}","starred_url":"https://api.github.com/users/SKumarMN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SKumarMN/subscriptions","organizations_url":"https://api.github.com/users/SKumarMN/orgs","repos_url":"https://api.github.com/users/SKumarMN/repos","events_url":"https://api.github.com/users/SKumarMN/events{/privacy}","received_events_url":"https://api.github.com/users/SKumarMN/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-01-29T17:03:42Z","updated_at":"2017-01-30T12:41:30Z","closed_at":"2017-01-30T12:41:30Z","author_association":"NONE","active_lock_reason":null,"body":"\r\n**Elasticsearch version**: 5.0.2\r\n\r\n**Plugins installed**: [ None]\r\n\r\n**JVM version**: 1.8\r\n\r\n**OS version**: Windows 7\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nThe text/ document in \"unlike\" query is not influencing the MLT query\r\n\r\nData : \r\n\r\n{ \"index\":  { \"_index\": \"library\", \"_type\": \"book\",\"_id\":1 }}\r\n{\"title\":\"Magic Of Thinking Big\", \"description\":\"Millions of people throughout the world have improved their lives using The Magic of Thinking Big. Dr. David J. Schwartz, long regarded as one of the foremost experts on motivation, will help you sell better, manage better, earn more money, and—most important of all—find greater happiness and peace of mind.\" }\r\n{ \"index\":  { \"_index\": \"library\", \"_type\": \"book\",\"_id\":2 }}\r\n{\"title\":\"The Power of Positive Thinking\", \"description\":\"The book describes the power positive thinking has and how a firm belief in something, does actually help in achieving it\" }\r\n{ \"index\":  { \"_index\": \"library\", \"_type\": \"book\",\"_id\":3 }}\r\n{\"title\":\"Think and Grow Rich\", \"description\":\"Think And Grow Rich has earned itself the reputation of being considered a textbook for actionable techniques that can help one get better at doing anything, not just by rich and wealthy, but also by people doing wonderful work in their respective fields. \" }\r\n{ \"index\":  { \"_index\": \"library\", \"_type\": \"book\",\"_id\":4 }}\r\n{\"title\":\"The Magic of thinking Big\", \"description\":\"First published in 1959, David J Schwartz's classic teachings are as powerful today as they were then. Practical, empowering and hugely engaging, this book will not only inspire you, it will give you the tools to change your life for the better - starting from now.\" }\r\n{ \"index\":  { \"_index\": \"library\", \"_type\": \"book\",\"_id\":5 }}\r\n{\"title\":\"How to Stop Worrying and Start Living\", \"description\":\"The book is written to help readers by changing their habit of worrying. The author Dale Carnegie has shared his personal experiences, wherein he was mostly unsatisfied and worried about lot of life situations.\" }\r\n{ \"index\":  { \"_index\": \"library\", \"_type\": \"book\",\"_id\":6 }}\r\n{\"title\":\"Practicing The Power Of Now\", \"description\":\"To make the journey into The Power of Now we will need to leave our analytical mind and its false created self, the ego, behind.\" }\r\n\r\nQuery:\r\n{ \r\n    \"query\": {\r\n        \"more_like_this\" : {\r\n            \"like\" :[\r\n            {\r\n                \"_index\" : \"library\",\r\n                \"_type\" : \"book\",\r\n                \"_id\" : \"3\"\r\n            }],\r\n            \"unlike\":\"leave our analytical mind\",\r\n            \"min_term_freq\" : 2,\r\n            \"min_doc_freq\":2\r\n        \t\r\n        }\r\n    }\r\n}\r\n\r\nResponse: \r\n\r\n{\r\n  \"took\": 25,\r\n  \"timed_out\": false,\r\n  \"_shards\": {\r\n    \"total\": 5,\r\n    \"successful\": 5,\r\n    \"failed\": 0\r\n  },\r\n  \"hits\": {\r\n    \"total\": 3,\r\n    \"max_score\": 0.13702196,\r\n    \"hits\": [\r\n      {\r\n        \"_index\": \"library\",\r\n        \"_type\": \"book\",\r\n        \"_id\": \"2\",\r\n        \"_score\": 0.13702196,\r\n        \"_source\": {\r\n          \"title\": \"The Power of Positive Thinking\",\r\n          \"description\": \"The book describes the power positive thinking has and how a firm belief in something, does actually help in achieving it\"\r\n        }\r\n      },\r\n      {\r\n        \"_index\": \"library\",\r\n        \"_type\": \"book\",\r\n        \"_id\": \"6\",\r\n        \"_score\": 0.13702196,\r\n        \"_source\": {\r\n          \"title\": \"Practicing The Power Of Now\",\r\n          \"description\": \"To make the journey into The Power of Now we will **need to leave our analytical** mind and its false created self, the ego, behind.\"\r\n        }\r\n      },\r\n      {\r\n        \"_index\": \"library\",\r\n        \"_type\": \"book\",\r\n        \"_id\": \"4\",\r\n        \"_score\": 0.09183437,\r\n        \"_source\": {\r\n          \"title\": \"The Magic of thinking Big\",\r\n          \"description\": \"First published in 1959, David J Schwartz's classic teachings are as powerful today as they were then. Practical, empowering and hugely engaging, this book will not only inspire you, it will give you the tools to change your life for the better - starting from now.\"\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\n\r\nEven though \"leave our analytical mind\" text is used in \"unlike\" clause, the returned results still contain documents with those terms\r\n\r\n\r\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}