[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/29507888","html_url":"https://github.com/elastic/elasticsearch/issues/4295#issuecomment-29507888","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4295","id":29507888,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTA3ODg4","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2013-11-29T10:30:36Z","updated_at":"2013-11-29T10:30:36Z","author_association":"MEMBER","body":"What gives the following?\n\n``` sh\ncurl -XGET \"http://localhost:9200/test4/_status?pretty\"\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/29544226","html_url":"https://github.com/elastic/elasticsearch/issues/4295#issuecomment-29544226","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4295","id":29544226,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTQ0MjI2","user":{"login":"mohitanchlia","id":614804,"node_id":"MDQ6VXNlcjYxNDgwNA==","avatar_url":"https://avatars2.githubusercontent.com/u/614804?v=4","gravatar_id":"","url":"https://api.github.com/users/mohitanchlia","html_url":"https://github.com/mohitanchlia","followers_url":"https://api.github.com/users/mohitanchlia/followers","following_url":"https://api.github.com/users/mohitanchlia/following{/other_user}","gists_url":"https://api.github.com/users/mohitanchlia/gists{/gist_id}","starred_url":"https://api.github.com/users/mohitanchlia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mohitanchlia/subscriptions","organizations_url":"https://api.github.com/users/mohitanchlia/orgs","repos_url":"https://api.github.com/users/mohitanchlia/repos","events_url":"https://api.github.com/users/mohitanchlia/events{/privacy}","received_events_url":"https://api.github.com/users/mohitanchlia/received_events","type":"User","site_admin":false},"created_at":"2013-11-30T02:24:02Z","updated_at":"2013-12-02T21:41:58Z","author_association":"NONE","body":"{\n   \"ok\":true,\n   \"_shards\":{\n      \"total\":10,\n      \"successful\":8,\n      \"failed\":0\n   },\n   \"indices\":{\n      \"test4\":{\n         \"index\":{\n            \"primary_size\":\"495b\",\n            \"primary_size_in_bytes\":495,\n            \"size\":\"732b\",\n            \"size_in_bytes\":732\n         },\n         \"translog\":{\n            \"operations\":0\n         },\n         \"docs\":{\n            \"num_docs\":0,\n            \"max_doc\":0,\n            \"deleted_docs\":0\n         },\n         \"merges\":{\n            \"current\":0,\n            \"current_docs\":0,\n            \"current_size\":\"0b\",\n            \"current_size_in_bytes\":0,\n            \"total\":0,\n            \"total_time\":\"0s\",\n            \"total_time_in_millis\":0,\n            \"total_docs\":0,\n            \"total_size\":\"0b\",\n            \"total_size_in_bytes\":0\n         },\n         \"refresh\":{\n            \"total\":5,\n            \"total_time\":\"0s\",\n            \"total_time_in_millis\":0\n         },\n         \"flush\":{\n            \"total\":3136,\n            \"total_time\":\"729ms\",\n            \"total_time_in_millis\":729\n         },\n         \"shards\":{\n            \"0\":[\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":false,\n                     \"node\":\"uVJnmV0aRpyMH1kXQ02caQ\",\n                     \"relocating_node\":null,\n                     \"shard\":0,\n                     \"index\":\"test4\"\n                  },\n                  \"state\":\"STARTED\",\n                  \"index\":{\n                     \"size\":\"79b\",\n                     \"size_in_bytes\":79\n                  },\n                  \"translog\":{\n                     \"id\":1385070793627,\n                     \"operations\":0\n                  },\n                  \"docs\":{\n                     \"num_docs\":0,\n                     \"max_doc\":0,\n                     \"deleted_docs\":0\n                  },\n                  \"merges\":{\n                     \"current\":0,\n                     \"current_docs\":0,\n                     \"current_size\":\"0b\",\n                     \"current_size_in_bytes\":0,\n                     \"total\":0,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0,\n                     \"total_docs\":0,\n                     \"total_size\":\"0b\",\n                     \"total_size_in_bytes\":0\n                  },\n                  \"refresh\":{\n                     \"total\":0,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0\n                  },\n                  \"flush\":{\n                     \"total\":392,\n                     \"total_time\":\"57ms\",\n                     \"total_time_in_millis\":57\n                  }\n               },\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":true,\n                     \"node\":\"kzSLZgACQOOskCjdt_H6EA\",\n                     \"relocating_node\":null,\n                     \"shard\":0,\n                     \"index\":\"test4\"\n                  },\n                  \"state\":\"STARTED\",\n                  \"index\":{\n                     \"size\":\"99b\",\n                     \"size_in_bytes\":99\n                  },\n                  \"translog\":{\n                     \"id\":1385070793627,\n                     \"operations\":0\n                  },\n                  \"docs\":{\n                     \"num_docs\":0,\n                     \"max_doc\":0,\n                     \"deleted_docs\":0\n                  },\n                  \"merges\":{\n                     \"current\":0,\n                     \"current_docs\":0,\n                     \"current_size\":\"0b\",\n                     \"current_size_in_bytes\":0,\n                     \"total\":0,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0,\n                     \"total_docs\":0,\n                     \"total_size\":\"0b\",\n                     \"total_size_in_bytes\":0\n                  },\n                  \"refresh\":{\n                     \"total\":1,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0\n                  },\n                  \"flush\":{\n                     \"total\":392,\n                     \"total_time\":\"97ms\",\n                     \"total_time_in_millis\":97\n                  }\n               }\n            ],\n            \"1\":[\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":true,\n                     \"node\":\"uVJnmV0aRpyMH1kXQ02caQ\",\n                     \"relocating_node\":null,\n                     \"shard\":1,\n                     \"index\":\"test4\"\n                  },\n                  \"state\":\"STARTED\",\n                  \"index\":{\n                     \"size\":\"99b\",\n                     \"size_in_bytes\":99\n                  },\n                  \"translog\":{\n                     \"id\":1385070803635,\n                     \"operations\":0\n                  },\n                  \"docs\":{\n                     \"num_docs\":0,\n                     \"max_doc\":0,\n                     \"deleted_docs\":0\n                  },\n                  \"merges\":{\n                     \"current\":0,\n                     \"current_docs\":0,\n                     \"current_size\":\"0b\",\n                     \"current_size_in_bytes\":0,\n                     \"total\":0,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0,\n                     \"total_docs\":0,\n                     \"total_size\":\"0b\",\n                     \"total_size_in_bytes\":0\n                  },\n                  \"refresh\":{\n                     \"total\":1,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0\n                  },\n                  \"flush\":{\n                     \"total\":392,\n                     \"total_time\":\"98ms\",\n                     \"total_time_in_millis\":98\n                  }\n               },\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":false,\n                     \"node\":\"kzSLZgACQOOskCjdt_H6EA\",\n                     \"relocating_node\":null,\n                     \"shard\":1,\n                     \"index\":\"test4\"\n                  },\n                  \"state\":\"STARTED\",\n                  \"index\":{\n                     \"size\":\"79b\",\n                     \"size_in_bytes\":79\n                  },\n                  \"translog\":{\n                     \"id\":1385070803635,\n                     \"operations\":0\n                  },\n                  \"docs\":{\n                     \"num_docs\":0,\n                     \"max_doc\":0,\n                     \"deleted_docs\":0\n                  },\n                  \"merges\":{\n                     \"current\":0,\n                     \"current_docs\":0,\n                     \"current_size\":\"0b\",\n                     \"current_size_in_bytes\":0,\n                     \"total\":0,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0,\n                     \"total_docs\":0,\n                     \"total_size\":\"0b\",\n                     \"total_size_in_bytes\":0\n                  },\n                  \"refresh\":{\n                     \"total\":0,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0\n                  },\n                  \"flush\":{\n                     \"total\":392,\n                     \"total_time\":\"108ms\",\n                     \"total_time_in_millis\":108\n                  }\n               }\n            ],\n            \"2\":[\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":true,\n                     \"node\":\"kzSLZgACQOOskCjdt_H6EA\",\n                     \"relocating_node\":null,\n                     \"shard\":2,\n                     \"index\":\"test4\"\n                  },\n                  \"state\":\"STARTED\",\n                  \"index\":{\n                     \"size\":\"99b\",\n                     \"size_in_bytes\":99\n                  },\n                  \"translog\":{\n                     \"id\":1385070793641,\n                     \"operations\":0\n                  },\n                  \"docs\":{\n                     \"num_docs\":0,\n                     \"max_doc\":0,\n                     \"deleted_docs\":0\n                  },\n                  \"merges\":{\n                     \"current\":0,\n                     \"current_docs\":0,\n                     \"current_size\":\"0b\",\n                     \"current_size_in_bytes\":0,\n                     \"total\":0,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0,\n                     \"total_docs\":0,\n                     \"total_size\":\"0b\",\n                     \"total_size_in_bytes\":0\n                  },\n                  \"refresh\":{\n                     \"total\":1,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0\n                  },\n                  \"flush\":{\n                     \"total\":392,\n                     \"total_time\":\"85ms\",\n                     \"total_time_in_millis\":85\n                  }\n               }\n            ],\n            \"3\":[\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":true,\n                     \"node\":\"uVJnmV0aRpyMH1kXQ02caQ\",\n                     \"relocating_node\":null,\n                     \"shard\":3,\n                     \"index\":\"test4\"\n                  },\n                  \"state\":\"STARTED\",\n                  \"index\":{\n                     \"size\":\"99b\",\n                     \"size_in_bytes\":99\n                  },\n                  \"translog\":{\n                     \"id\":1385070803647,\n                     \"operations\":0\n                  },\n                  \"docs\":{\n                     \"num_docs\":0,\n                     \"max_doc\":0,\n                     \"deleted_docs\":0\n                  },\n                  \"merges\":{\n                     \"current\":0,\n                     \"current_docs\":0,\n                     \"current_size\":\"0b\",\n                     \"current_size_in_bytes\":0,\n                     \"total\":0,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0,\n                     \"total_docs\":0,\n                     \"total_size\":\"0b\",\n                     \"total_size_in_bytes\":0\n                  },\n                  \"refresh\":{\n                     \"total\":1,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0\n                  },\n                  \"flush\":{\n                     \"total\":392,\n                     \"total_time\":\"78ms\",\n                     \"total_time_in_millis\":78\n                  }\n               },\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":false,\n                     \"node\":\"kzSLZgACQOOskCjdt_H6EA\",\n                     \"relocating_node\":null,\n                     \"shard\":3,\n                     \"index\":\"test4\"\n                  },\n                  \"state\":\"STARTED\",\n                  \"index\":{\n                     \"size\":\"79b\",\n                     \"size_in_bytes\":79\n                  },\n                  \"translog\":{\n                     \"id\":1385070803647,\n                     \"operations\":0\n                  },\n                  \"docs\":{\n                     \"num_docs\":0,\n                     \"max_doc\":0,\n                     \"deleted_docs\":0\n                  },\n                  \"merges\":{\n                     \"current\":0,\n                     \"current_docs\":0,\n                     \"current_size\":\"0b\",\n                     \"current_size_in_bytes\":0,\n                     \"total\":0,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0,\n                     \"total_docs\":0,\n                     \"total_size\":\"0b\",\n                     \"total_size_in_bytes\":0\n                  },\n                  \"refresh\":{\n                     \"total\":0,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0\n                  },\n                  \"flush\":{\n                     \"total\":392,\n                     \"total_time\":\"102ms\",\n                     \"total_time_in_millis\":102\n                  }\n               }\n            ],\n            \"4\":[\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":true,\n                     \"node\":\"kzSLZgACQOOskCjdt_H6EA\",\n                     \"relocating_node\":null,\n                     \"shard\":4,\n                     \"index\":\"test4\"\n                  },\n                  \"state\":\"STARTED\",\n                  \"index\":{\n                     \"size\":\"99b\",\n                     \"size_in_bytes\":99\n                  },\n                  \"translog\":{\n                     \"id\":1385070793656,\n                     \"operations\":0\n                  },\n                  \"docs\":{\n                     \"num_docs\":0,\n                     \"max_doc\":0,\n                     \"deleted_docs\":0\n                  },\n                  \"merges\":{\n                     \"current\":0,\n                     \"current_docs\":0,\n                     \"current_size\":\"0b\",\n                     \"current_size_in_bytes\":0,\n                     \"total\":0,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0,\n                     \"total_docs\":0,\n                     \"total_size\":\"0b\",\n                     \"total_size_in_bytes\":0\n                  },\n                  \"refresh\":{\n                     \"total\":1,\n                     \"total_time\":\"0s\",\n                     \"total_time_in_millis\":0\n                  },\n                  \"flush\":{\n                     \"total\":392,\n                     \"total_time\":\"104ms\",\n                     \"total_time_in_millis\":104\n                  }\n               }\n            ]\n         }\n      }\n   }\n}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/29640711","html_url":"https://github.com/elastic/elasticsearch/issues/4295#issuecomment-29640711","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4295","id":29640711,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NjQwNzEx","user":{"login":"mohitanchlia","id":614804,"node_id":"MDQ6VXNlcjYxNDgwNA==","avatar_url":"https://avatars2.githubusercontent.com/u/614804?v=4","gravatar_id":"","url":"https://api.github.com/users/mohitanchlia","html_url":"https://github.com/mohitanchlia","followers_url":"https://api.github.com/users/mohitanchlia/followers","following_url":"https://api.github.com/users/mohitanchlia/following{/other_user}","gists_url":"https://api.github.com/users/mohitanchlia/gists{/gist_id}","starred_url":"https://api.github.com/users/mohitanchlia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mohitanchlia/subscriptions","organizations_url":"https://api.github.com/users/mohitanchlia/orgs","repos_url":"https://api.github.com/users/mohitanchlia/repos","events_url":"https://api.github.com/users/mohitanchlia/events{/privacy}","received_events_url":"https://api.github.com/users/mohitanchlia/received_events","type":"User","site_admin":false},"created_at":"2013-12-02T17:53:43Z","updated_at":"2013-12-02T17:53:43Z","author_association":"NONE","body":"Did you see anything glaring from the _status output?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/29660374","html_url":"https://github.com/elastic/elasticsearch/issues/4295#issuecomment-29660374","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4295","id":29660374,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NjYwMzc0","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2013-12-02T21:39:19Z","updated_at":"2013-12-02T21:39:19Z","author_association":"MEMBER","body":"Really strange. Your index `test4` seems to have bad allocation.\n2 replica shards are not allocated.\n\nI extracted that here:\n\n``` javascript\n{\n   \"ok\":true,\n   \"_shards\":{\n      \"total\":10,\n      \"successful\":8,\n      \"failed\":0\n   },\n   \"indices\":{\n      \"test4\":{\n         \"shards\":{\n            \"0\":[\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":false,\n                     \"node\":\"uVJnmV0aRpyMH1kXQ02caQ\"\n                  }\n               },\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":true,\n                     \"node\":\"kzSLZgACQOOskCjdt_H6EA\"\n                  }\n               }\n            ],\n            \"1\":[\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":true,\n                     \"node\":\"uVJnmV0aRpyMH1kXQ02caQ\"\n                  }\n               },\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":false,\n                     \"node\":\"kzSLZgACQOOskCjdt_H6EA\"\n                  }\n               }\n            ],\n            \"2\":[\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":true,\n                     \"node\":\"kzSLZgACQOOskCjdt_H6EA\"\n                  }\n               }\n            ],\n            \"3\":[\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":true,\n                     \"node\":\"uVJnmV0aRpyMH1kXQ02caQ\"\n                  }\n               },\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":false,\n                     \"node\":\"kzSLZgACQOOskCjdt_H6EA\"\n                  }\n               }\n            ],\n            \"4\":[\n               {\n                  \"routing\":{\n                     \"state\":\"STARTED\",\n                     \"primary\":true,\n                     \"node\":\"kzSLZgACQOOskCjdt_H6EA\"\n                  }\n               }\n            ]\n         }\n      }\n   }\n}\n```\n\nIt seems that something goes wrong here. Could you create a new index from scratch, check that without any allocation it is well allocated on both nodes (run the same `_status` query) and only then reallocate the index?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/29736274","html_url":"https://github.com/elastic/elasticsearch/issues/4295#issuecomment-29736274","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4295","id":29736274,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzM2Mjc0","user":{"login":"mohitanchlia","id":614804,"node_id":"MDQ6VXNlcjYxNDgwNA==","avatar_url":"https://avatars2.githubusercontent.com/u/614804?v=4","gravatar_id":"","url":"https://api.github.com/users/mohitanchlia","html_url":"https://github.com/mohitanchlia","followers_url":"https://api.github.com/users/mohitanchlia/followers","following_url":"https://api.github.com/users/mohitanchlia/following{/other_user}","gists_url":"https://api.github.com/users/mohitanchlia/gists{/gist_id}","starred_url":"https://api.github.com/users/mohitanchlia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mohitanchlia/subscriptions","organizations_url":"https://api.github.com/users/mohitanchlia/orgs","repos_url":"https://api.github.com/users/mohitanchlia/repos","events_url":"https://api.github.com/users/mohitanchlia/events{/privacy}","received_events_url":"https://api.github.com/users/mohitanchlia/received_events","type":"User","site_admin":false},"created_at":"2013-12-03T18:20:30Z","updated_at":"2013-12-03T18:20:30Z","author_association":"NONE","body":"Not sure why this is happening? I create couple of indexes and all show the\nsame. It appears that there is a issue somewhere where if you try to\nallocate replicas > available nodes then it ends up in this situation. So\nif I say replica of 2 and if I just have 1 node then it goes in this state.\nIf I have 2 nodes then it works fine.\n\nOn Mon, Dec 2, 2013 at 1:39 PM, David Pilato notifications@github.comwrote:\n\n> Really strange. Your index test4 seems to have bad allocation.\n> 2 replica shards are not allocated.\n> \n> I extracted that here:\n> \n> {\n>    \"ok\":true,\n>    \"_shards\":{\n>       \"total\":10,\n>       \"successful\":8,\n>       \"failed\":0\n>    },\n>    \"indices\":{\n>       \"test4\":{\n> \n> ```\n>      \"shards\":{\n>         \"0\":[\n>            {\n>               \"routing\":{\n>                  \"state\":\"STARTED\",\n>                  \"primary\":false,\n>                  \"node\":\"uVJnmV0aRpyMH1kXQ02caQ\"\n>               }\n>            },\n> \n>            {\n>               \"routing\":{\n>                  \"state\":\"STARTED\",\n>                  \"primary\":true,\n>                  \"node\":\"kzSLZgACQOOskCjdt_H6EA\"\n>               }\n>            }\n>         ],\n> \n>         \"1\":[\n>            {\n>               \"routing\":{\n>                  \"state\":\"STARTED\",\n>                  \"primary\":true,\n>                  \"node\":\"uVJnmV0aRpyMH1kXQ02caQ\"\n>               }\n>            },\n> \n>            {\n>               \"routing\":{\n>                  \"state\":\"STARTED\",\n>                  \"primary\":false,\n>                  \"node\":\"kzSLZgACQOOskCjdt_H6EA\"\n>               }\n>            }\n>         ],\n> \n>         \"2\":[\n>            {\n>               \"routing\":{\n>                  \"state\":\"STARTED\",\n>                  \"primary\":true,\n>                  \"node\":\"kzSLZgACQOOskCjdt_H6EA\"\n>               }\n>            }\n>         ],\n> \n>         \"3\":[\n>            {\n>               \"routing\":{\n>                  \"state\":\"STARTED\",\n>                  \"primary\":true,\n>                  \"node\":\"uVJnmV0aRpyMH1kXQ02caQ\"\n>               }\n>            },\n> \n>            {\n>               \"routing\":{\n>                  \"state\":\"STARTED\",\n>                  \"primary\":false,\n>                  \"node\":\"kzSLZgACQOOskCjdt_H6EA\"\n>               }\n>            }\n>         ],\n> \n>         \"4\":[\n>            {\n>               \"routing\":{\n>                  \"state\":\"STARTED\",\n>                  \"primary\":true,\n>                  \"node\":\"kzSLZgACQOOskCjdt_H6EA\"\n>               }\n>            }\n> \n>         ]\n>      }\n>   }\n> ```\n> \n>    }}\n> \n> It seems that something goes wrong here. Could you create a new index from\n> scratch, check that without any allocation it is well allocated on both\n> nodes (run the same _status query) and only then reallocate the index?\n> \n> â€”\n> Reply to this email directly or view it on GitHubhttps://github.com/elasticsearch/elasticsearch/issues/4295#issuecomment-29660374\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/37537904","html_url":"https://github.com/elastic/elasticsearch/issues/4295#issuecomment-37537904","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4295","id":37537904,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NTM3OTA0","user":{"login":"julienadam","id":1760370,"node_id":"MDQ6VXNlcjE3NjAzNzA=","avatar_url":"https://avatars1.githubusercontent.com/u/1760370?v=4","gravatar_id":"","url":"https://api.github.com/users/julienadam","html_url":"https://github.com/julienadam","followers_url":"https://api.github.com/users/julienadam/followers","following_url":"https://api.github.com/users/julienadam/following{/other_user}","gists_url":"https://api.github.com/users/julienadam/gists{/gist_id}","starred_url":"https://api.github.com/users/julienadam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julienadam/subscriptions","organizations_url":"https://api.github.com/users/julienadam/orgs","repos_url":"https://api.github.com/users/julienadam/repos","events_url":"https://api.github.com/users/julienadam/events{/privacy}","received_events_url":"https://api.github.com/users/julienadam/received_events","type":"User","site_admin":false},"created_at":"2014-03-13T14:20:25Z","updated_at":"2014-03-13T14:20:25Z","author_association":"NONE","body":"I'm having a similar issue. I have 3 nodes, tagged with a \"zone\" attribute A,B,C respectively. Then I created an index and set \"index.routing.allocation.require.zone\": \"A\". But then when I add data it gets spread on multiple nodes, including nodes not tagged with A at all.\n\nHowever if I setup 2 nodes on zone A, 2 on zone B and 2 on zone C, when I add data, it gets spread only on zone A which is what I need. It means I have to have 2 nodes in each zone to do it however.\n\nBasically what I would like is to store data produced in zone A and B locally, and have everything replicated to zone C. What would the best way to do that ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/37552498","html_url":"https://github.com/elastic/elasticsearch/issues/4295#issuecomment-37552498","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4295","id":37552498,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NTUyNDk4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-03-13T16:16:04Z","updated_at":"2014-03-13T16:16:04Z","author_association":"CONTRIBUTOR","body":"> I'm having a similar issue. I have 3 nodes, tagged with a \"zone\" attribute A,B,C respectively. Then I created an index and set \"index.routing.allocation.require.zone\": \"A\". But then when I add data it gets spread on multiple nodes, including nodes not tagged with A at all.\n\nThis is not a bug. It tries to allocate to the tagged nodes, but it won't put replicas on the same node as primaries. Because you only have one node labelled `A`, it'll put some one set of shards on there, but then will use another node for the others.\n\n> Basically what I would like is to store data produced in zone A and B locally, and have everything replicated to zone C. What would the best way to do that ?\n\nWhat you are looking for is awareness: http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/modules-cluster.html#allocation-awareness\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/37625825","html_url":"https://github.com/elastic/elasticsearch/issues/4295#issuecomment-37625825","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4295","id":37625825,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NjI1ODI1","user":{"login":"julienadam","id":1760370,"node_id":"MDQ6VXNlcjE3NjAzNzA=","avatar_url":"https://avatars1.githubusercontent.com/u/1760370?v=4","gravatar_id":"","url":"https://api.github.com/users/julienadam","html_url":"https://github.com/julienadam","followers_url":"https://api.github.com/users/julienadam/followers","following_url":"https://api.github.com/users/julienadam/following{/other_user}","gists_url":"https://api.github.com/users/julienadam/gists{/gist_id}","starred_url":"https://api.github.com/users/julienadam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julienadam/subscriptions","organizations_url":"https://api.github.com/users/julienadam/orgs","repos_url":"https://api.github.com/users/julienadam/repos","events_url":"https://api.github.com/users/julienadam/events{/privacy}","received_events_url":"https://api.github.com/users/julienadam/received_events","type":"User","site_admin":false},"created_at":"2014-03-14T08:31:17Z","updated_at":"2014-03-14T08:31:17Z","author_association":"NONE","body":"Indeed, that makes a lot of sense. Though for beginners and for more clarity it would help if this was mentioned in the docs.\n\nThanks for your help !\n","performed_via_github_app":null}]