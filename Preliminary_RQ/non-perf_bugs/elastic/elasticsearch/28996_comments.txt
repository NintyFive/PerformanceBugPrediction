[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372354359","html_url":"https://github.com/elastic/elasticsearch/issues/28996#issuecomment-372354359","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28996","id":372354359,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MjM1NDM1OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-12T15:38:45Z","updated_at":"2018-03-12T15:38:45Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372354811","html_url":"https://github.com/elastic/elasticsearch/issues/28996#issuecomment-372354811","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28996","id":372354811,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MjM1NDgxMQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2018-03-12T15:39:54Z","updated_at":"2018-03-12T15:39:54Z","author_association":"MEMBER","body":"I don't think we want to relax the SM permissions. We should discuss and decide whether this is something we want to support (seems reasonable) and if so document how to do so.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372358477","html_url":"https://github.com/elastic/elasticsearch/issues/28996#issuecomment-372358477","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28996","id":372358477,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MjM1ODQ3Nw==","user":{"login":"vincentarnaud90","id":37067128,"node_id":"MDQ6VXNlcjM3MDY3MTI4","avatar_url":"https://avatars2.githubusercontent.com/u/37067128?v=4","gravatar_id":"","url":"https://api.github.com/users/vincentarnaud90","html_url":"https://github.com/vincentarnaud90","followers_url":"https://api.github.com/users/vincentarnaud90/followers","following_url":"https://api.github.com/users/vincentarnaud90/following{/other_user}","gists_url":"https://api.github.com/users/vincentarnaud90/gists{/gist_id}","starred_url":"https://api.github.com/users/vincentarnaud90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vincentarnaud90/subscriptions","organizations_url":"https://api.github.com/users/vincentarnaud90/orgs","repos_url":"https://api.github.com/users/vincentarnaud90/repos","events_url":"https://api.github.com/users/vincentarnaud90/events{/privacy}","received_events_url":"https://api.github.com/users/vincentarnaud90/received_events","type":"User","site_admin":false},"created_at":"2018-03-12T15:49:49Z","updated_at":"2018-03-12T15:49:49Z","author_association":"NONE","body":"I made a mistake, it misses \"connect\" permission instead of \"resolve\". I'm correcting the initial post.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372844575","html_url":"https://github.com/elastic/elasticsearch/issues/28996#issuecomment-372844575","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28996","id":372844575,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mjg0NDU3NQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-03-13T22:46:30Z","updated_at":"2018-03-13T22:46:30Z","author_association":"MEMBER","body":"We did a lot of work to remove connect permissions from core. I don't think we should add it back.\r\n\r\nI think this goes back to us using log4j api directly. If it was wrapped, we could have logging implementations in modules, and relegate this permission only to that module.  But this (logging api issue) has been contentious in the past.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372996970","html_url":"https://github.com/elastic/elasticsearch/issues/28996#issuecomment-372996970","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28996","id":372996970,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mjk5Njk3MA==","user":{"login":"vincentarnaud90","id":37067128,"node_id":"MDQ6VXNlcjM3MDY3MTI4","avatar_url":"https://avatars2.githubusercontent.com/u/37067128?v=4","gravatar_id":"","url":"https://api.github.com/users/vincentarnaud90","html_url":"https://github.com/vincentarnaud90","followers_url":"https://api.github.com/users/vincentarnaud90/followers","following_url":"https://api.github.com/users/vincentarnaud90/following{/other_user}","gists_url":"https://api.github.com/users/vincentarnaud90/gists{/gist_id}","starred_url":"https://api.github.com/users/vincentarnaud90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vincentarnaud90/subscriptions","organizations_url":"https://api.github.com/users/vincentarnaud90/orgs","repos_url":"https://api.github.com/users/vincentarnaud90/repos","events_url":"https://api.github.com/users/vincentarnaud90/events{/privacy}","received_events_url":"https://api.github.com/users/vincentarnaud90/received_events","type":"User","site_admin":false},"created_at":"2018-03-14T12:00:48Z","updated_at":"2018-03-14T12:00:48Z","author_association":"NONE","body":"Hi, I made some further testing. It seems to work fine using TCP instead of UDP, so we will see to switch protocol in syslog configuration.  \r\nI also made a test inside a simple plugin (implementing an action filter which log something) to see if I can do something in there. Since it has it's own security policy, I though I might add the 'connect' permission. It didn't work as well (need to set permission inside elasticsearch jar) so I was wondering how \"overriding\" security policy works for plugins.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/373280935","html_url":"https://github.com/elastic/elasticsearch/issues/28996#issuecomment-373280935","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28996","id":373280935,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MzI4MDkzNQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-03-15T07:02:54Z","updated_at":"2018-03-15T07:02:54Z","author_association":"MEMBER","body":"Please see the [plugin author help docs](https://www.elastic.co/guide/en/elasticsearch/plugins/current/plugin-authors.html#plugin-authors-jsm) on security policies.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/373398647","html_url":"https://github.com/elastic/elasticsearch/issues/28996#issuecomment-373398647","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28996","id":373398647,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MzM5ODY0Nw==","user":{"login":"vincentarnaud90","id":37067128,"node_id":"MDQ6VXNlcjM3MDY3MTI4","avatar_url":"https://avatars2.githubusercontent.com/u/37067128?v=4","gravatar_id":"","url":"https://api.github.com/users/vincentarnaud90","html_url":"https://github.com/vincentarnaud90","followers_url":"https://api.github.com/users/vincentarnaud90/followers","following_url":"https://api.github.com/users/vincentarnaud90/following{/other_user}","gists_url":"https://api.github.com/users/vincentarnaud90/gists{/gist_id}","starred_url":"https://api.github.com/users/vincentarnaud90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vincentarnaud90/subscriptions","organizations_url":"https://api.github.com/users/vincentarnaud90/orgs","repos_url":"https://api.github.com/users/vincentarnaud90/repos","events_url":"https://api.github.com/users/vincentarnaud90/events{/privacy}","received_events_url":"https://api.github.com/users/vincentarnaud90/received_events","type":"User","site_admin":false},"created_at":"2018-03-15T14:39:18Z","updated_at":"2018-03-15T14:39:18Z","author_association":"NONE","body":"Ok thanks, I should have read the doc, sorry.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/373441255","html_url":"https://github.com/elastic/elasticsearch/issues/28996#issuecomment-373441255","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28996","id":373441255,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MzQ0MTI1NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-03-15T16:37:15Z","updated_at":"2018-03-15T16:37:15Z","author_association":"MEMBER","body":"> It seems to work fine using TCP instead of UDP, so we will see to switch protocol in syslog configuration.\r\n\r\nIf the TCP connection is terminated and Log4j needs to reconnect, this will not work because on the reconnect the security manager will be in place and reject the connection.\r\n\r\nAdditionally, I do not think you want to be synchronously writing to a network while logging. This can impact the entire system anywhere. We do not currently support the asynchronous appenders.\r\n\r\nMore broadly, I would say that we have other components in the stack that can forward logs to syslog. The advantage of these is that they are out of process from Elasticsearch, so if they fail or have issues they do not impact Elasticsearch itself.\r\n\r\nIn short, we do not support this, and it's possible that we will consider technical solutions that it make it clear that we do not support this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/373578161","html_url":"https://github.com/elastic/elasticsearch/issues/28996#issuecomment-373578161","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28996","id":373578161,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MzU3ODE2MQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-03-16T01:49:42Z","updated_at":"2018-03-16T01:49:42Z","author_association":"MEMBER","body":"Closing as won’t fix.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/373746793","html_url":"https://github.com/elastic/elasticsearch/issues/28996#issuecomment-373746793","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28996","id":373746793,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mzc0Njc5Mw==","user":{"login":"vincentarnaud90","id":37067128,"node_id":"MDQ6VXNlcjM3MDY3MTI4","avatar_url":"https://avatars2.githubusercontent.com/u/37067128?v=4","gravatar_id":"","url":"https://api.github.com/users/vincentarnaud90","html_url":"https://github.com/vincentarnaud90","followers_url":"https://api.github.com/users/vincentarnaud90/followers","following_url":"https://api.github.com/users/vincentarnaud90/following{/other_user}","gists_url":"https://api.github.com/users/vincentarnaud90/gists{/gist_id}","starred_url":"https://api.github.com/users/vincentarnaud90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vincentarnaud90/subscriptions","organizations_url":"https://api.github.com/users/vincentarnaud90/orgs","repos_url":"https://api.github.com/users/vincentarnaud90/repos","events_url":"https://api.github.com/users/vincentarnaud90/events{/privacy}","received_events_url":"https://api.github.com/users/vincentarnaud90/received_events","type":"User","site_admin":false},"created_at":"2018-03-16T15:20:57Z","updated_at":"2018-03-16T15:20:57Z","author_association":"NONE","body":"Hi, thanks for the answer, we will see how we can do it outside elasticsearch then.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542507560","html_url":"https://github.com/elastic/elasticsearch/issues/28996#issuecomment-542507560","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28996","id":542507560,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjUwNzU2MA==","user":{"login":"jamshid","id":8549,"node_id":"MDQ6VXNlcjg1NDk=","avatar_url":"https://avatars0.githubusercontent.com/u/8549?v=4","gravatar_id":"","url":"https://api.github.com/users/jamshid","html_url":"https://github.com/jamshid","followers_url":"https://api.github.com/users/jamshid/followers","following_url":"https://api.github.com/users/jamshid/following{/other_user}","gists_url":"https://api.github.com/users/jamshid/gists{/gist_id}","starred_url":"https://api.github.com/users/jamshid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamshid/subscriptions","organizations_url":"https://api.github.com/users/jamshid/orgs","repos_url":"https://api.github.com/users/jamshid/repos","events_url":"https://api.github.com/users/jamshid/events{/privacy}","received_events_url":"https://api.github.com/users/jamshid/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T04:27:44Z","updated_at":"2019-10-16T04:27:44Z","author_association":"NONE","body":"Wow that's a big limitation -- elasticsearch does not support UDP or TCP syslog? \r\nIdeally it would be mentioned at https://www.elastic.co/guide/en/elasticsearch/reference/current/logging.html with pointers to alternative solutions.\r\n\r\nI know this is not supported but if anyone else has to get an ancient Elasticsearch cluster with a working syslog configuration upgraded you can workaround this by adding a `grant` in a security policy that gets loaded like JAVA_HOME/lib/security/java.policy:\r\n```\r\n# Adds:\r\n#    permission java.net.SocketPermission \"mysyslog:514\", \"connect,resolve\";\r\nsed --in-place 's/permission java.net.SocketPermission \"localhost:0\", \"listen\";.*$/permission java.net.SocketPermission \"localhost:0\", \"listen\"; permission java.net.SocketPermission \"'\"${SYSLOG_HOST}:${SYSLOG_PORT}\"'\", \"connect,resolve\";/g' /etc/java/java-1.8.0-openjdk/java-1.8.0-openjdk-1.8.0.222.b10-0.el8_0.x86_64/lib/security/java.policy\r\n```","performed_via_github_app":null}]