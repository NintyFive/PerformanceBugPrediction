{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1543","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1543/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1543/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1543/events","html_url":"https://github.com/elastic/elasticsearch/issues/1543","id":2567194,"node_id":"MDU6SXNzdWUyNTY3MTk0","number":1543,"title":"timestamp term match broken in 0.18.5","user":{"login":"dobe","id":48020,"node_id":"MDQ6VXNlcjQ4MDIw","avatar_url":"https://avatars0.githubusercontent.com/u/48020?v=4","gravatar_id":"","url":"https://api.github.com/users/dobe","html_url":"https://github.com/dobe","followers_url":"https://api.github.com/users/dobe/followers","following_url":"https://api.github.com/users/dobe/following{/other_user}","gists_url":"https://api.github.com/users/dobe/gists{/gist_id}","starred_url":"https://api.github.com/users/dobe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dobe/subscriptions","organizations_url":"https://api.github.com/users/dobe/orgs","repos_url":"https://api.github.com/users/dobe/repos","events_url":"https://api.github.com/users/dobe/events{/privacy}","received_events_url":"https://api.github.com/users/dobe/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":192286,"node_id":"MDU6TGFiZWwxOTIyODY=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.18.6","name":"v0.18.6","color":"DDDDDD","default":false,"description":null},{"id":174398,"node_id":"MDU6TGFiZWwxNzQzOTg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.19.0.RC1","name":"v0.19.0.RC1","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2011-12-15T14:44:50Z","updated_at":"2011-12-15T19:02:10Z","closed_at":"2011-12-15T18:49:46Z","author_association":"NONE","active_lock_reason":null,"body":"using a boolean query with a timestamp in a term, returns non-matching items. \n\nthe example below returns all items with searched domain and ANY \"ts\" value in 0.18.5. in 0.17.6 the \"ts\" field must match. we already tried it with integer and string fields instead of the timestamp field which works, so it seems this is timestamp related?\n\nwe also tried using a filtered query and filtering by \"ts\" which does not work either.\n\ne.g:\n\n``` javascript\n{\n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {\n          \"term\": {\n            \"domains\": \"adidas.com\"\n          }\n        },\n        {\n          \"term\": {\n            \"ts\": 1316995200000\n          }\n        }\n      ]\n    }\n  },\n  \"fields\": \"*\"\n}\n```\n\nwe also tried using the \"ts\" as the only requirement. in this case entries from the matching day are returned but the time does not need to match.\n\n``` javascript\n{\n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {\n          \"term\": {\n            \"ts\": 1316995200000\n          }\n        }\n      ]\n    }\n  },\n  \"fields\": \"*\"\n}\n```\n\nthe searched timestamp is Mo Sep 26 00:00:00 UTC 2011, but results appear with timestamps like this ts: 2011-09-26T04:19:38.000Z\n","closed_by":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}