[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/267555880","html_url":"https://github.com/elastic/elasticsearch/issues/22205#issuecomment-267555880","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22205","id":267555880,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzU1NTg4MA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2016-12-16T09:45:29Z","updated_at":"2016-12-16T09:45:29Z","author_association":"MEMBER","body":"We reserve github for bugs or feature request. You can ask questions like this in the forum:\r\nhttps://discuss.elastic.co/c/elasticsearch\r\n\r\nRegarding your issue, the script is useless here since you can use the `sum` aggregation directly on a field name. Though the sum will be  15.5 since the aggregation takes all the values that are contained in the document for this field regardless of the query. You'll need to take a look at nested fields if you want to solve your issue:\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/5.1/nested.html\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/5.1/search-aggregations-bucket-nested-aggregation.html","performed_via_github_app":null}]