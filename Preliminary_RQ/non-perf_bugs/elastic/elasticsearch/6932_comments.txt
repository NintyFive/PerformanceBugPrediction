[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/57620315","html_url":"https://github.com/elastic/elasticsearch/issues/6932#issuecomment-57620315","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6932","id":57620315,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjIwMzE1","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-10-02T12:06:38Z","updated_at":"2014-10-02T12:06:38Z","author_association":"CONTRIBUTOR","body":"@clintongormley Your fix for the fuzzy rewrite looks good. However, where do you see that the default rewrite method for fuzzy is `top_terms_n`?\n\n> The match_phrase_prefix should (IMO) use a constant_score_auto rewrite on the final term (and this should be settable with rewrite), but this functionality is implemented with the MultiPhraseQuery which doesn't support the rewrite methods. \n\nThe rewrite methods are for multi-term queries but `match_phrase_prefix` is a bit more complicated than that. In particular positions need to be taken into account so I'm not sure if we can allow to take all possible terms into account (even without taking care of scoring) without making this query super costly.\n\nIndeed rewrite is not used, and apart from fuzzy queries the `match` query never generates multi-term queries so we should probably remove that parameter.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/59474269","html_url":"https://github.com/elastic/elasticsearch/issues/6932#issuecomment-59474269","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6932","id":59474269,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDc0MjY5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-10-17T07:09:06Z","updated_at":"2014-10-17T07:09:06Z","author_association":"CONTRIBUTOR","body":"> @clintongormley Your fix for the fuzzy rewrite looks good. However, where do you see that the default rewrite method for fuzzy is top_terms_n?\n\nThe `fuzzy_rewrite` param defaults to `null`, so if you don't set it, you get the default setting:\nhttps://github.com/apache/lucene-solr/blob/trunk/lucene/core/src/java/org/apache/lucene/search/FuzzyQuery.java#L101\n","performed_via_github_app":null}]