{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/21707","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21707/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21707/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21707/events","html_url":"https://github.com/elastic/elasticsearch/issues/21707","id":190747368,"node_id":"MDU6SXNzdWUxOTA3NDczNjg=","number":21707,"title":"Increase socket timeouts when reindexing","user":{"login":"hariso","id":2166300,"node_id":"MDQ6VXNlcjIxNjYzMDA=","avatar_url":"https://avatars0.githubusercontent.com/u/2166300?v=4","gravatar_id":"","url":"https://api.github.com/users/hariso","html_url":"https://github.com/hariso","followers_url":"https://api.github.com/users/hariso/followers","following_url":"https://api.github.com/users/hariso/following{/other_user}","gists_url":"https://api.github.com/users/hariso/gists{/gist_id}","starred_url":"https://api.github.com/users/hariso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hariso/subscriptions","organizations_url":"https://api.github.com/users/hariso/orgs","repos_url":"https://api.github.com/users/hariso/repos","events_url":"https://api.github.com/users/hariso/events{/privacy}","received_events_url":"https://api.github.com/users/hariso/received_events","type":"User","site_admin":false},"labels":[{"id":145572580,"node_id":"MDU6TGFiZWwxNDU1NzI1ODA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/CRUD","name":":Distributed/CRUD","color":"0e8a16","default":false,"description":"A catch all label for issues around indexing, updating and getting a doc by id. Not search."},{"id":486905930,"node_id":"MDU6TGFiZWw0ODY5MDU5MzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v5.2.0","name":"v5.2.0","color":"dddddd","default":false,"description":null},{"id":334286612,"node_id":"MDU6TGFiZWwzMzQyODY2MTI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.0.0-alpha1","name":"v6.0.0-alpha1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"assignees":[{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false}],"milestone":null,"comments":16,"created_at":"2016-11-21T15:23:22Z","updated_at":"2018-02-13T19:42:35Z","closed_at":"2016-12-05T15:55:07Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I'm involved in reindexing a large amount of data, a mix of smaller and larger documents. The source and target index belong to different clusters, and using different versions (source: 1.7.5, target: 5.0.1)\r\n\r\nThe reindexing is done in chunks, where the chunks are data ranges from the source index. And while some chunks we reindex without any problem, for some we see something like `Error(type=socket_timeout_exception, reason=null, additionalProperties={})` in the target cluster.\r\n\r\nWe have a small tool which coordinates a number of reindex tasks, and retries failures. However, in this case, the source cluster, sooner or later, becomes unstable: we start seeing OutOfMemoryErrors, nodes get down etc. My assumptions is that, if the socket timeout was higher, the target cluster would be able to consume the data, and not just flood the source with requests.\r\n\r\nSo far I see two options:\r\n1. Use smaller and smaller chunks.\r\n2. Use a larger socket timeout.\r\n\r\nNo. 1 isn't really helping. For no. 2 I couldn't find a way to accomplish.\r\n\r\n**My question is**:  How can I work around those socket timeouts?\r\n\r\nThanks in advance!","closed_by":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"performed_via_github_app":null}