{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/40308","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40308/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40308/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40308/events","html_url":"https://github.com/elastic/elasticsearch/issues/40308","id":423694284,"node_id":"MDU6SXNzdWU0MjM2OTQyODQ=","number":40308,"title":"Remove explicit non needed deps from generated pom.xml","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null},{"id":176784422,"node_id":"MDU6TGFiZWwxNzY3ODQ0MjI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/won't%20fix","name":"won't fix","color":"f7c6c7","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-03-21T11:59:16Z","updated_at":"2019-03-21T17:18:16Z","closed_at":"2019-03-21T17:08:50Z","author_association":"MEMBER","active_lock_reason":null,"body":"In the `x-content` module we have explicitly declared a dependency on `snakeyaml`. See https://github.com/elastic/elasticsearch/blob/ddddbdfe6dffbac458d4d6997931271cf6d8fa85/libs/x-content/build.gradle#L37\r\n\r\n\r\nBut we are never using that library explicitly in our source code. That's a transitive dependency needed by `jackson-dataformat-yaml` I guess. \r\n\r\nThe problem I'm facing is that in my project I'm depending on `elasticsearch-rest-high-level-client:7.0.0-beta1`:\r\n\r\n```\r\n+-fr.pilato.elasticsearch.crawler:fscrawler-elasticsearch-client-v7:2.7-SNAPSHOT\r\n  +-org.elasticsearch.client:elasticsearch-rest-high-level-client:7.0.0-beta1\r\n    +-org.elasticsearch:elasticsearch:7.0.0-beta1\r\n      +-org.elasticsearch:elasticsearch-x-content:7.0.0-beta1\r\n        +-org.yaml:snakeyaml:1.17\r\n```\r\n\r\nIn the generated `pom.xml` (see https://search.maven.org/artifact/org.elasticsearch/elasticsearch-x-content/7.0.0-beta1/jar), we are explicitly depending on `snakeyaml`:\r\n\r\n```xml\r\n    <dependency>\r\n      <groupId>org.yaml</groupId>\r\n      <artifactId>snakeyaml</artifactId>\r\n      <version>1.17</version>\r\n      <scope>compile</scope>\r\n    </dependency>\r\n```\r\n\r\nIf I want to depend in my project on another jackson version (2.9.8), I must explicitly set as well `snakeyaml` dependency manually which IMHO breaks the transitive dependency management principe.\r\n\r\nIf we remove this explicit dep, my project dependency tree could become then:\r\n\r\n```\r\n+-fr.pilato.elasticsearch.crawler:fscrawler-elasticsearch-client-v7:2.7-SNAPSHOT\r\n  +-org.elasticsearch.client:elasticsearch-rest-high-level-client:7.0.0-beta1\r\n    +-org.elasticsearch:elasticsearch:7.0.0-beta1\r\n      +-org.elasticsearch:elasticsearch-x-content:7.0.0-beta1\r\n        +-com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.8.11\r\n          +-org.yaml:snakeyaml:1.17\r\n```\r\n\r\nAnd if I decide to depend on jackson 2.9.8 instead, that will become automatically:\r\n\r\n```\r\n+-fr.pilato.elasticsearch.crawler:fscrawler-elasticsearch-client-v7:2.7-SNAPSHOT\r\n  +-org.elasticsearch.client:elasticsearch-rest-high-level-client:7.0.0-beta1\r\n    +-org.elasticsearch:elasticsearch:7.0.0-beta1\r\n      +-org.elasticsearch:elasticsearch-x-content:7.0.0-beta1\r\n        +-com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.9.8\r\n          +-org.yaml:snakeyaml:1.23\r\n```\r\n\r\nCan we exclude in the generated `pom.xml` this dependency?\r\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}