[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/693362895","html_url":"https://github.com/elastic/elasticsearch/issues/62445#issuecomment-693362895","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62445","id":693362895,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MzM2Mjg5NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-09-16T12:09:09Z","updated_at":"2020-09-16T12:09:09Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-docs (>docs)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/694942181","html_url":"https://github.com/elastic/elasticsearch/issues/62445#issuecomment-694942181","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62445","id":694942181,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDk0MjE4MQ==","user":{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false},"created_at":"2020-09-18T15:42:59Z","updated_at":"2020-09-18T16:22:03Z","author_association":"CONTRIBUTOR","body":"Hi @fdartayre \r\n\r\nWe cover `node.remote_cluster_client` in our remote cluster settings here:\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/7.9/modules-remote-clusters.html#remote-cluster-settings\r\n\r\nThat content doesn't seem like a great fit under node roles as it's not an actual node role but a separate node setting.\r\n\r\n@lockewritesdocs -- You recently touched these docs. Any additional thoughts on this? If not, I can close this ticket.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/694989703","html_url":"https://github.com/elastic/elasticsearch/issues/62445#issuecomment-694989703","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62445","id":694989703,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDk4OTcwMw==","user":{"login":"lockewritesdocs","id":25848033,"node_id":"MDQ6VXNlcjI1ODQ4MDMz","avatar_url":"https://avatars2.githubusercontent.com/u/25848033?v=4","gravatar_id":"","url":"https://api.github.com/users/lockewritesdocs","html_url":"https://github.com/lockewritesdocs","followers_url":"https://api.github.com/users/lockewritesdocs/followers","following_url":"https://api.github.com/users/lockewritesdocs/following{/other_user}","gists_url":"https://api.github.com/users/lockewritesdocs/gists{/gist_id}","starred_url":"https://api.github.com/users/lockewritesdocs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lockewritesdocs/subscriptions","organizations_url":"https://api.github.com/users/lockewritesdocs/orgs","repos_url":"https://api.github.com/users/lockewritesdocs/repos","events_url":"https://api.github.com/users/lockewritesdocs/events{/privacy}","received_events_url":"https://api.github.com/users/lockewritesdocs/received_events","type":"User","site_admin":false},"created_at":"2020-09-18T17:23:52Z","updated_at":"2020-09-18T17:23:52Z","author_association":"CONTRIBUTOR","body":"Hmm, this is interesting. We indicate that:\r\n>By default, any node in the cluster can act as a cross-cluster client and connect to remote clusters.\r\n\r\nUsers can toggle whether a cluster can be a remote cluster by setting `node.remote_cluster_client` to `false`, but I think that whether a node is eligible to be a remote cluster is different than their node _role_. I agree with James that this setting is separate. \r\n\r\n@fdartayre, when might users set `node.remote_cluster_client` to `false`? I'm just trying to understand the connection between setting node roles and configuring remote cluster eligibility. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/695972738","html_url":"https://github.com/elastic/elasticsearch/issues/62445#issuecomment-695972738","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62445","id":695972738,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTk3MjczOA==","user":{"login":"fdartayre","id":30438455,"node_id":"MDQ6VXNlcjMwNDM4NDU1","avatar_url":"https://avatars2.githubusercontent.com/u/30438455?v=4","gravatar_id":"","url":"https://api.github.com/users/fdartayre","html_url":"https://github.com/fdartayre","followers_url":"https://api.github.com/users/fdartayre/followers","following_url":"https://api.github.com/users/fdartayre/following{/other_user}","gists_url":"https://api.github.com/users/fdartayre/gists{/gist_id}","starred_url":"https://api.github.com/users/fdartayre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fdartayre/subscriptions","organizations_url":"https://api.github.com/users/fdartayre/orgs","repos_url":"https://api.github.com/users/fdartayre/repos","events_url":"https://api.github.com/users/fdartayre/events{/privacy}","received_events_url":"https://api.github.com/users/fdartayre/received_events","type":"User","site_admin":false},"created_at":"2020-09-21T08:21:56Z","updated_at":"2020-09-21T13:10:02Z","author_association":"NONE","body":"@lockewritesdocs from my experience, explicitly disabling remote cluster client (setting `node.remote_cluster_client` to `false`) was not very common. \r\n\r\nThe main problem I see with not mentioning `remote_cluster_client` in https://www.elastic.co/guide/en/elasticsearch/reference/7.9/modules-node.html is the following. When setting node roles via `node.roles: [ ]` instead of `node.<role>: true|false`, if one configures something like this:\r\n```\r\nnode.roles: [ master, data, ingest ]\r\n```\r\nIt will disable remote cluster connections. So the user won't be able to configure remote clusters (they have disabled the default setting by not explicitly configuring it), which is probably not what they intended to do. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/696101185","html_url":"https://github.com/elastic/elasticsearch/issues/62445#issuecomment-696101185","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62445","id":696101185,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjEwMTE4NQ==","user":{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false},"created_at":"2020-09-21T13:06:07Z","updated_at":"2020-09-21T13:06:07Z","author_association":"CONTRIBUTOR","body":"@lockewritesdocs I did some testing this morning and @fdartayre is right. It looks like `remote_cluster_client` is a node role although it's not been documented as such.\r\n\r\nHere's how I tested it:\r\n\r\n1. Start up a 7.x cluster and run a nodes info API request.\r\n\r\n```\r\nGET /_nodes/settings\r\n``` \r\n\r\nThe response will list the default node roles. Note `remote_cluster_client` is included in the list.\r\n\r\n```\r\n...\r\n      \"roles\" : [\r\n        \"data\",\r\n        \"ingest\",\r\n        \"master\",\r\n        \"ml\",\r\n        \"remote_cluster_client\",\r\n        \"transform\"\r\n      ],\r\n...\r\n```\r\n2. Shut down the cluster and add this to `elasticsearch.yml`:\r\n\r\n```\r\nnode.roles: [ master, data, ingest ]\r\n```\r\n\r\n3.  Restart the cluster and rerun the nodes info API request.\r\n```\r\nGET /_nodes/settings\r\n``` \r\n\r\nThe response will no longer list `remote_cluster_client` in the node roles list.\r\n```\r\n...\r\n      \"roles\" : [\r\n        \"master\",\r\n        \"data\",\r\n        \"ingest\"\r\n      ],\r\n...\r\n```\r\n\r\nSeems like pretty trappy behavior, and we should document `remote_cluster_client` as a role. Let me know if you want me to take care of the update. Thanks for raising @fdartayre.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/696334230","html_url":"https://github.com/elastic/elasticsearch/issues/62445#issuecomment-696334230","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62445","id":696334230,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjMzNDIzMA==","user":{"login":"lockewritesdocs","id":25848033,"node_id":"MDQ6VXNlcjI1ODQ4MDMz","avatar_url":"https://avatars2.githubusercontent.com/u/25848033?v=4","gravatar_id":"","url":"https://api.github.com/users/lockewritesdocs","html_url":"https://github.com/lockewritesdocs","followers_url":"https://api.github.com/users/lockewritesdocs/followers","following_url":"https://api.github.com/users/lockewritesdocs/following{/other_user}","gists_url":"https://api.github.com/users/lockewritesdocs/gists{/gist_id}","starred_url":"https://api.github.com/users/lockewritesdocs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lockewritesdocs/subscriptions","organizations_url":"https://api.github.com/users/lockewritesdocs/orgs","repos_url":"https://api.github.com/users/lockewritesdocs/repos","events_url":"https://api.github.com/users/lockewritesdocs/events{/privacy}","received_events_url":"https://api.github.com/users/lockewritesdocs/received_events","type":"User","site_admin":false},"created_at":"2020-09-21T19:48:36Z","updated_at":"2020-09-21T19:48:36Z","author_association":"CONTRIBUTOR","body":"Appreciate the explanation @jrodewig! I opened #62730 to resolve this issue.","performed_via_github_app":null}]