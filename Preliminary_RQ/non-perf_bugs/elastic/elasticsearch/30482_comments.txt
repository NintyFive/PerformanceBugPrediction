[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387688109","html_url":"https://github.com/elastic/elasticsearch/issues/30482#issuecomment-387688109","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30482","id":387688109,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzY4ODEwOQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-09T09:58:18Z","updated_at":"2018-05-09T09:58:18Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387688283","html_url":"https://github.com/elastic/elasticsearch/issues/30482#issuecomment-387688283","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30482","id":387688283,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzY4ODI4Mw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2018-05-09T09:58:56Z","updated_at":"2018-05-09T09:58:56Z","author_association":"CONTRIBUTOR","body":"cc @elastic/microsoft ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/388559798","html_url":"https://github.com/elastic/elasticsearch/issues/30482#issuecomment-388559798","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30482","id":388559798,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODU1OTc5OA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-05-12T14:43:03Z","updated_at":"2018-05-12T14:43:03Z","author_association":"MEMBER","body":"I do not think that you want to rely on the stop event being registered to monitor whether or not the Elasticsearch service is healthy. The problem here is that if, for example, there is a JVM crash then it is also the case that the stop method would not be called, the application is terminating abnormally. In this case, you would be left with the service not running yet no stop event being registered. We treat a fatal error (such as an out of memory error) the same way: we immediately terminate the running JVM without calling allowing any shutdown code to execute as we do not trust the state of the JVM at this point.\r\n\r\nAs such, I am going to close this as won't fix and I encourage you to find a different method for monitoring the health of the Elasticsearch service on Windows.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/388719863","html_url":"https://github.com/elastic/elasticsearch/issues/30482#issuecomment-388719863","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30482","id":388719863,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODcxOTg2Mw==","user":{"login":"askids","id":10394218,"node_id":"MDQ6VXNlcjEwMzk0MjE4","avatar_url":"https://avatars0.githubusercontent.com/u/10394218?v=4","gravatar_id":"","url":"https://api.github.com/users/askids","html_url":"https://github.com/askids","followers_url":"https://api.github.com/users/askids/followers","following_url":"https://api.github.com/users/askids/following{/other_user}","gists_url":"https://api.github.com/users/askids/gists{/gist_id}","starred_url":"https://api.github.com/users/askids/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/askids/subscriptions","organizations_url":"https://api.github.com/users/askids/orgs","repos_url":"https://api.github.com/users/askids/repos","events_url":"https://api.github.com/users/askids/events{/privacy}","received_events_url":"https://api.github.com/users/askids/received_events","type":"User","site_admin":false},"created_at":"2018-05-14T07:18:26Z","updated_at":"2018-05-14T07:18:26Z","author_association":"NONE","body":"I am not an Java expert. So I may be wrong in some of the next points that I mention. In case of JVM crash, you don't have an option. But here, this is clearly an error that you are able to intercept. So why can't the stop event be registered? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/388788832","html_url":"https://github.com/elastic/elasticsearch/issues/30482#issuecomment-388788832","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30482","id":388788832,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODc4ODgzMg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-05-14T11:45:41Z","updated_at":"2018-05-14T11:45:41Z","author_association":"MEMBER","body":"> So why can't the stop event be registered?\r\n\r\nIt’s not that it *can’t*, it’s that we *won’t*. As I explained:\r\n\r\n> We treat a fatal error (such as an out of memory error) the same way [as a JVM crash]: we immediately terminate the running JVM without calling allowing any shutdown code to execute as we do not trust the state of the JVM at this point.\r\n\r\nIt’s a deliberate decision to not execute any shutdown code as we do not trust the state of the JVM.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/389857947","html_url":"https://github.com/elastic/elasticsearch/issues/30482#issuecomment-389857947","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30482","id":389857947,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTg1Nzk0Nw==","user":{"login":"askids","id":10394218,"node_id":"MDQ6VXNlcjEwMzk0MjE4","avatar_url":"https://avatars0.githubusercontent.com/u/10394218?v=4","gravatar_id":"","url":"https://api.github.com/users/askids","html_url":"https://github.com/askids","followers_url":"https://api.github.com/users/askids/followers","following_url":"https://api.github.com/users/askids/following{/other_user}","gists_url":"https://api.github.com/users/askids/gists{/gist_id}","starred_url":"https://api.github.com/users/askids/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/askids/subscriptions","organizations_url":"https://api.github.com/users/askids/orgs","repos_url":"https://api.github.com/users/askids/repos","events_url":"https://api.github.com/users/askids/events{/privacy}","received_events_url":"https://api.github.com/users/askids/received_events","type":"User","site_admin":false},"created_at":"2018-05-17T13:00:50Z","updated_at":"2018-05-17T13:00:50Z","author_association":"NONE","body":"On a side note, how does Elastic stack monitor other windows services? Won't it also be relying on the registered windows events?","performed_via_github_app":null}]