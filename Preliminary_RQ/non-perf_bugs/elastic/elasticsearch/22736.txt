{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22736","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22736/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22736/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22736/events","html_url":"https://github.com/elastic/elasticsearch/issues/22736","id":202436258,"node_id":"MDU6SXNzdWUyMDI0MzYyNTg=","number":22736,"title":"[feature request]reject clients' read/write requests when cluster avalanche effects happens(may call this the safe mode of cluster)","user":{"login":"makeyang","id":13898618,"node_id":"MDQ6VXNlcjEzODk4NjE4","avatar_url":"https://avatars2.githubusercontent.com/u/13898618?v=4","gravatar_id":"","url":"https://api.github.com/users/makeyang","html_url":"https://github.com/makeyang","followers_url":"https://api.github.com/users/makeyang/followers","following_url":"https://api.github.com/users/makeyang/following{/other_user}","gists_url":"https://api.github.com/users/makeyang/gists{/gist_id}","starred_url":"https://api.github.com/users/makeyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/makeyang/subscriptions","organizations_url":"https://api.github.com/users/makeyang/orgs","repos_url":"https://api.github.com/users/makeyang/repos","events_url":"https://api.github.com/users/makeyang/events{/privacy}","received_events_url":"https://api.github.com/users/makeyang/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-01-23T03:02:20Z","updated_at":"2017-01-23T10:41:06Z","closed_at":"2017-01-23T10:00:52Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the feature**:\r\n**1. cluster deployment:**\r\n    1. usually I deploy cluster this way: with some dedicated master nodes(usually 3) with some dedicated data noeds and with some dedicated gateway nodes.\r\n    2. close sniff or I customerized client logic that will filter out no dedicated gateway nodes.\r\n**2. problem met:**\r\n    1. when there are some traffic spike, some data nodes will long GC and without response.\r\n    2. then one node will lead the others get requests hold in memory and then long GC too.\r\n    3. then the whole cluster will unavaiable and hard to recovery\r\n    4 let's call this cluster avalanche effects\r\n**3. one possible way to make the pain less(may call this safe mode):**\r\n    1. if avalanche effects happens or will happen based on some monitor data, then let the gateway node reject clients' read/write requests\r\n    2. we may call this the safe mode of cluster, which will protect cluster and make it recovery more quickly","closed_by":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"performed_via_github_app":null}