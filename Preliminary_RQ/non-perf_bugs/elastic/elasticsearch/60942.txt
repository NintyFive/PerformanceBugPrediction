{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/60942","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60942/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60942/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60942/events","html_url":"https://github.com/elastic/elasticsearch/issues/60942","id":676493295,"node_id":"MDU6SXNzdWU2NzY0OTMyOTU=","number":60942,"title":"Extend ingest_geoip ASN processing to utilise the MaxMind subnet information","user":{"login":"ansell","id":82365,"node_id":"MDQ6VXNlcjgyMzY1","avatar_url":"https://avatars3.githubusercontent.com/u/82365?v=4","gravatar_id":"","url":"https://api.github.com/users/ansell","html_url":"https://github.com/ansell","followers_url":"https://api.github.com/users/ansell/followers","following_url":"https://api.github.com/users/ansell/following{/other_user}","gists_url":"https://api.github.com/users/ansell/gists{/gist_id}","starred_url":"https://api.github.com/users/ansell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ansell/subscriptions","organizations_url":"https://api.github.com/users/ansell/orgs","repos_url":"https://api.github.com/users/ansell/repos","events_url":"https://api.github.com/users/ansell/events{/privacy}","received_events_url":"https://api.github.com/users/ansell/received_events","type":"User","site_admin":false},"labels":[{"id":268963484,"node_id":"MDU6TGFiZWwyNjg5NjM0ODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Ingest","name":":Core/Features/Ingest","color":"0e8a16","default":false,"description":"Execution or management of Ingest Pipelines"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":1967496097,"node_id":"MDU6TGFiZWwxOTY3NDk2MDk3","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Core/Features","name":"Team:Core/Features","color":"fef2c0","default":false,"description":"Meta label for core/features team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-08-11T00:21:48Z","updated_at":"2020-09-24T16:51:58Z","closed_at":"2020-09-24T16:51:58Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"This is a feature request to extend the MaxMind GeoIP2 ASN processing that was added in #27849 to also utilise the subnet that MaxMind expose in their GeoIP2 ASN API. I have found it necessary in the past to manually isolate particular subnets from ASN's when diagnosing issues. This feature request would automatically add that field to smooth diagnosis of particular issues.\r\n\r\nThe MaxMind API method that would be utilised is `com.maxmind.geoip2.model.AsnResponse.getNetwork()`:\r\n\r\nhttps://github.com/maxmind/GeoIP2-java/blob/master/src/main/java/com/maxmind/geoip2/model/AsnResponse.java#L70-L79\r\n\r\nThe main place where the feature request would need to be implemented is in `org.elasticsearch.ingest.geoip.GeoIpProcessor.retrieveAsnGeoData`:\r\n\r\nhttps://github.com/elastic/elasticsearch/blob/69a6a18d8dc3f95001cfe6f55c1451ac616f7e84/modules/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/GeoIpProcessor.java#L333-L368\r\n","closed_by":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"performed_via_github_app":null}