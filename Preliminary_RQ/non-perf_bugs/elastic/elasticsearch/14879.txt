{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14879","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14879/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14879/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14879/events","html_url":"https://github.com/elastic/elasticsearch/issues/14879","id":118007245,"node_id":"MDU6SXNzdWUxMTgwMDcyNDU=","number":14879,"title":"Odd Primary Shard Distribution","user":{"login":"kaanbasal","id":3204601,"node_id":"MDQ6VXNlcjMyMDQ2MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/3204601?v=4","gravatar_id":"","url":"https://api.github.com/users/kaanbasal","html_url":"https://github.com/kaanbasal","followers_url":"https://api.github.com/users/kaanbasal/followers","following_url":"https://api.github.com/users/kaanbasal/following{/other_user}","gists_url":"https://api.github.com/users/kaanbasal/gists{/gist_id}","starred_url":"https://api.github.com/users/kaanbasal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaanbasal/subscriptions","organizations_url":"https://api.github.com/users/kaanbasal/orgs","repos_url":"https://api.github.com/users/kaanbasal/repos","events_url":"https://api.github.com/users/kaanbasal/events{/privacy}","received_events_url":"https://api.github.com/users/kaanbasal/received_events","type":"User","site_admin":false},"labels":[{"id":837246479,"node_id":"MDU6TGFiZWw4MzcyNDY0Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Allocation","name":":Distributed/Allocation","color":"0e8a16","default":false,"description":"All issues relating to the decision making around placing a shard (both master logic & on the nodes)"},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2015-11-20T10:06:24Z","updated_at":"2018-02-14T14:05:15Z","closed_at":"2015-12-14T21:16:56Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\nUsing version **2.0**, with **3 nodes, 9 shards, 2 replicas** with default settings. \nAt the beginning all of the primary shards were distributed over all 3 nodes evenly. After restarting some of the nodes, all of the primary shards are located on the same node, and even restarting the node which full of primary shards, not changed this distribution.\nHere some screenshots from kopf plugin:\n**After Index Created:**\n<img width=\"412\" alt=\"screen shot 2015-11-20 at 12 05 28\" src=\"https://cloud.githubusercontent.com/assets/3204601/11297126/0695ac4e-8f7f-11e5-916f-5f123274fa5e.png\">\n**After node-3 and node-1 restarted: (one by one)**\n<img width=\"408\" alt=\"screen shot 2015-11-20 at 11 42 45\" src=\"https://cloud.githubusercontent.com/assets/3204601/11296630/ea62767c-8f7b-11e5-8fff-e90004c4c13a.png\">\n**After node-2 restarted:**\n<img width=\"417\" alt=\"screen shot 2015-11-20 at 12 00 43\" src=\"https://cloud.githubusercontent.com/assets/3204601/11297035/5d60c6ea-8f7e-11e5-872c-3ff7016a6a0e.png\">\nI tried to use \"cluster.routing.allocation.balance.primary\" config but it's deprecated and not working on version 2.0.\nSo my questions are there is any way to distribute primary shards over all of the nodes evenly or there is any known downside about this behaviour?\n","closed_by":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"performed_via_github_app":null}