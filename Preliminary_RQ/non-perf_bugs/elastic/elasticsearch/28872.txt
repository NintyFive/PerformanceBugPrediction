{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28872","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28872/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28872/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28872/events","html_url":"https://github.com/elastic/elasticsearch/issues/28872","id":301503707,"node_id":"MDU6SXNzdWUzMDE1MDM3MDc=","number":28872,"title":"Unknown setting [es.enforce.bootstrap.checks] in docker.elastic.co/elasticsearch/elasticsearch:6.2.2","user":{"login":"MetalArend","id":1175661,"node_id":"MDQ6VXNlcjExNzU2NjE=","avatar_url":"https://avatars3.githubusercontent.com/u/1175661?v=4","gravatar_id":"","url":"https://api.github.com/users/MetalArend","html_url":"https://github.com/MetalArend","followers_url":"https://api.github.com/users/MetalArend/followers","following_url":"https://api.github.com/users/MetalArend/following{/other_user}","gists_url":"https://api.github.com/users/MetalArend/gists{/gist_id}","starred_url":"https://api.github.com/users/MetalArend/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MetalArend/subscriptions","organizations_url":"https://api.github.com/users/MetalArend/orgs","repos_url":"https://api.github.com/users/MetalArend/repos","events_url":"https://api.github.com/users/MetalArend/events{/privacy}","received_events_url":"https://api.github.com/users/MetalArend/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-03-01T18:04:24Z","updated_at":"2018-03-01T19:47:24Z","closed_at":"2018-03-01T19:38:15Z","author_association":"NONE","active_lock_reason":null,"body":"**ElasticSearch version**: docker.elastic.co/elasticsearch/elasticsearch:6.2.2 on docker 17.12.0-ce, build c97c6d6 inside a CentOS 7 vagrant box\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nAdding the setting `es.enforce.bootstrap.checks` on the 6.2.2 version docker container throws the error `unknown setting [es.enforce.bootstrap.checks] please check that any required plugins are installed, or check the breaking changes documentation for removed settings`. I could not find a docker repository, so I hope reporting it here is okay?\r\n\r\n**Steps to reproduce**:\r\n\r\nI am running the latest (current) version of ElasticSearch from an official docker image as a service in a docker-compose file called swarm.yml. I declared this service as follows:\r\n\r\n```\r\n  elasticsearch:\r\n    image: docker.elastic.co/elasticsearch/elasticsearch:6.2.2\r\n    environment:\r\n      - \"ES_JAVA_OPTS=-Xms512m -Xmx512m\"\r\n      - cluster.name=6_2_2-cluster\r\n      - es.enforce.bootstrap.checks=true\r\n      - bootstrap.memory_lock=false\r\n      - xpack.security.enabled=false\r\n    volumes:\r\n      - elasticsearch-data:/usr/share/elasticsearch/data\r\n    networks:\r\n      - elk\r\n    ports:\r\n      - target: 9200\r\n      - target: 9300\r\n```\r\nI run this stack with the command `docker stack deploy --compose-file swarm.yml`, and start following the logs with `docker service logs --follow <stackname>_elasticsearch`.\r\n\r\nI tried adding the `es.enforce.bootstrap.checks=true` both in the environment, as well as `-Des.enforce.bootstrap.checks=true` inside the ES_JAVA_OPTS string, and both give me the same error: `org.elasticsearch.bootstrap.StartupException: java.lang.IllegalArgumentException: unknown setting [es.enforce.bootstrap.checks] please check that any required plugins are installed, or check the breaking changes documentation for removed settings`. Afaik this option is still mentioned in the current 6.2 documentation, as well as on master.\r\n\r\nI actually expected the bootstrap checks to fail, but not on providing their value. I can't figure out why this is failing, or which setting to use.\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n```\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:34,336][INFO ][o.e.n.Node               ] [] initializing ...\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:34,418][INFO ][o.e.e.NodeEnvironment    ] [2GwlB1E] using [1] data paths, mounts [[/usr/share/elasticsearch/data (/dev/mapper/VolGroup00-LogVol00)]], net usable_space [34.7gb], net total_space [37.4gb], types [xfs]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:34,418][INFO ][o.e.e.NodeEnvironment    ] [2GwlB1E] heap size [495.3mb], compressed ordinary object pointers [true]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:34,432][INFO ][o.e.n.Node               ] node name [2GwlB1E] derived from node ID [2GwlB1E1TcKKJnLINWHimA]; set [node.name] to override\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:34,433][INFO ][o.e.n.Node               ] version[6.2.2], pid[1], build[10b1edd/2018-02-16T19:01:30.685723Z], OS[Linux/3.10.0-693.11.6.el7.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/1.8.0_161/25.161-b14]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:34,433][INFO ][o.e.n.Node               ] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/tmp/elasticsearch.8DdktKnh, -XX:+HeapDumpOnOutOfMemoryError, -XX:+PrintGCDetails, -XX:+PrintGCDateStamps, -XX:+PrintTenuringDistribution, -XX:+PrintGCApplicationStoppedTime, -Xloggc:logs/gc.log, -XX:+UseGCLogFileRotation, -XX:NumberOfGCLogFiles=32, -XX:GCLogFileSize=64m, -Des.cgroups.hierarchy.override=/, -Xms512m, -Xmx512m, -Des.path.home=/usr/share/elasticsearch, -Des.path.conf=/usr/share/elasticsearch/config]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,678][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded module [aggs-matrix-stats]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,678][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded module [analysis-common]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,678][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded module [ingest-common]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,679][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded module [lang-expression]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,679][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded module [lang-mustache]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,679][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded module [lang-painless]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,679][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded module [mapper-extras]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,679][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded module [parent-join]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,679][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded module [percolator]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,679][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded module [rank-eval]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,679][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded module [reindex]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,679][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded module [repository-url]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,680][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded module [transport-netty4]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,680][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded module [tribe]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,680][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded plugin [ingest-geoip]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,680][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded plugin [ingest-user-agent]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,680][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded plugin [x-pack-core]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,680][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded plugin [x-pack-deprecation]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,680][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded plugin [x-pack-graph]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,680][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded plugin [x-pack-logstash]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,680][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded plugin [x-pack-ml]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,681][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded plugin [x-pack-monitoring]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,681][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded plugin [x-pack-security]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,681][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded plugin [x-pack-upgrade]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:36,681][INFO ][o.e.p.PluginsService     ] [2GwlB1E] loaded plugin [x-pack-watcher]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | [2018-03-01T17:48:38,708][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [] uncaught exception in thread [main]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | org.elasticsearch.bootstrap.StartupException: java.lang.IllegalArgumentException: unknown setting [es.enforce.bootstrap.checks] please check that any required plugins are installed, or check the breaking changes documentation for removed settings\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:125) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:112) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) ~[elasticsearch-cli-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.cli.Command.main(Command.java:90) ~[elasticsearch-cli-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:92) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:85) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | Caused by: java.lang.IllegalArgumentException: unknown setting [es.enforce.bootstrap.checks] please check that any required plugins are installed, or check the breaking changes documentation for removed settings\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.common.settings.AbstractScopedSettings.validate(AbstractScopedSettings.java:346) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.common.settings.AbstractScopedSettings.validate(AbstractScopedSettings.java:310) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.common.settings.AbstractScopedSettings.validate(AbstractScopedSettings.java:284) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.common.settings.SettingsModule.<init>(SettingsModule.java:134) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.node.Node.<init>(Node.java:331) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.node.Node.<init>(Node.java:246) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.bootstrap.Bootstrap$5.<init>(Bootstrap.java:213) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:213) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:323) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:121) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nes622_elasticsearch.1.lghtgi9ebvye@localhost.localdomain    | \t... 6 more\r\n```","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}