[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/111200943","html_url":"https://github.com/elastic/elasticsearch/issues/9558#issuecomment-111200943","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9558","id":111200943,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTIwMDk0Mw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-06-11T16:40:34Z","updated_at":"2015-06-11T16:40:34Z","author_association":"CONTRIBUTOR","body":"Breaking down by field would be complicated since queries may apply to several fields (eg. bool) and other queries don't apply to the field that you think they do (eg. the exists filter which queries the _field_names field instead of the field that documents should have).\n\nBreaking down by query type would be easier but I'm afraid the output could be misleading since we cache the rewritten queries (on purpose). So for instance if you use bounding box filters, you might only see boolean queries and range queries in the cache.\n\nI'm not totally against it, just wanted to give more information about the trade-offs / challenges. :)\n\nCurrently the tracking of the statistics of the filter cache is a bit hack-ish due to the fact that this cache is per-node while elasticsearch allows to report per-shard statistics. So we have a map between shard ids and the segments that they have and use this information to break down stats per shard. If we want to add more stats to the filter cache, I think we should first try to clean up the way we do reporting of the filter cache usage, which might require us to stop breaking down statistics by shard first.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/111231777","html_url":"https://github.com/elastic/elasticsearch/issues/9558#issuecomment-111231777","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9558","id":111231777,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTIzMTc3Nw==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2015-06-11T18:24:41Z","updated_at":"2015-06-11T18:24:41Z","author_association":"MEMBER","body":"Thanks for the perspective!  When I hear about this requirement in the field, they are often related to figuring out what makes sense to cache so I think this auto cache PR will help (https://github.com/elastic/elasticsearch/pull/8573).  Though some users are also trying to figure out in similar way what makes sense to add to the warmers based on the field accessed in the cache. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/111551952","html_url":"https://github.com/elastic/elasticsearch/issues/9558#issuecomment-111551952","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9558","id":111551952,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTU1MTk1Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-12T16:41:32Z","updated_at":"2015-06-12T16:41:32Z","author_association":"CONTRIBUTOR","body":"I think that if the shard is node level, then the stats should also be node level, especially if implementing them at shard level involves lots of hackery.\n\n@ppf2 regarding warmers - I think we can do a better job there: we should be auto-warming the N most popular and expensive filters, or something like that.  Warmers have pretty much been replaced by field level options like `eager_global_ordinals`. With a bit more work we can make all warming either configurable or automatic without requiring the user to figure it out for themselves.\n\nThis seems a better investment of time to me.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/111552842","html_url":"https://github.com/elastic/elasticsearch/issues/9558#issuecomment-111552842","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9558","id":111552842,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTU1Mjg0Mg==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2015-06-12T16:45:01Z","updated_at":"2015-06-12T16:45:01Z","author_association":"MEMBER","body":"@clintongormley Agreed :+1: \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154061181","html_url":"https://github.com/elastic/elasticsearch/issues/9558#issuecomment-154061181","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9558","id":154061181,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDA2MTE4MQ==","user":{"login":"ycombinator","id":51061,"node_id":"MDQ6VXNlcjUxMDYx","avatar_url":"https://avatars2.githubusercontent.com/u/51061?v=4","gravatar_id":"","url":"https://api.github.com/users/ycombinator","html_url":"https://github.com/ycombinator","followers_url":"https://api.github.com/users/ycombinator/followers","following_url":"https://api.github.com/users/ycombinator/following{/other_user}","gists_url":"https://api.github.com/users/ycombinator/gists{/gist_id}","starred_url":"https://api.github.com/users/ycombinator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ycombinator/subscriptions","organizations_url":"https://api.github.com/users/ycombinator/orgs","repos_url":"https://api.github.com/users/ycombinator/repos","events_url":"https://api.github.com/users/ycombinator/events{/privacy}","received_events_url":"https://api.github.com/users/ycombinator/received_events","type":"User","site_admin":false},"created_at":"2015-11-05T13:41:14Z","updated_at":"2015-11-05T13:41:14Z","author_association":"CONTRIBUTOR","body":"Also requested by @icedfish. He is also interested in a related feature: to be able to automatically warm up the top X queries (same as Clint's comment above), but I could not find a separate public issue for this related feature request so mentioning it here.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162211092","html_url":"https://github.com/elastic/elasticsearch/issues/9558#issuecomment-162211092","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9558","id":162211092,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjIxMTA5Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-12-05T15:10:03Z","updated_at":"2015-12-05T15:10:03Z","author_association":"CONTRIBUTOR","body":"I think that exposing the contents of the filter cache these days is nothing more than a debug tool.  The use case of using it to find filters to warm is something that should be done automatically by elasticsearch, not by the user. Given the complexity of exposing this API, I'm going to close this issue in favour of improving warmers (https://github.com/elastic/elasticsearch/issues/9331)\n","performed_via_github_app":null}]