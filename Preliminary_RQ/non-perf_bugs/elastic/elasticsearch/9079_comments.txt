[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68198729","html_url":"https://github.com/elastic/elasticsearch/issues/9079#issuecomment-68198729","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9079","id":68198729,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTk4NzI5","user":{"login":"andyboagra","id":8370784,"node_id":"MDQ6VXNlcjgzNzA3ODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/8370784?v=4","gravatar_id":"","url":"https://api.github.com/users/andyboagra","html_url":"https://github.com/andyboagra","followers_url":"https://api.github.com/users/andyboagra/followers","following_url":"https://api.github.com/users/andyboagra/following{/other_user}","gists_url":"https://api.github.com/users/andyboagra/gists{/gist_id}","starred_url":"https://api.github.com/users/andyboagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyboagra/subscriptions","organizations_url":"https://api.github.com/users/andyboagra/orgs","repos_url":"https://api.github.com/users/andyboagra/repos","events_url":"https://api.github.com/users/andyboagra/events{/privacy}","received_events_url":"https://api.github.com/users/andyboagra/received_events","type":"User","site_admin":false},"created_at":"2014-12-28T05:16:31Z","updated_at":"2014-12-28T05:16:31Z","author_association":"NONE","body":"The test case i have is a basic unit test case for the feature.  To me it is not a corner case (may be i am mistaken).  If anyone can recommend a workaround, that would help as well.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68214828","html_url":"https://github.com/elastic/elasticsearch/issues/9079#issuecomment-68214828","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9079","id":68214828,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjE0ODI4","user":{"login":"missinglink","id":738069,"node_id":"MDQ6VXNlcjczODA2OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/738069?v=4","gravatar_id":"","url":"https://api.github.com/users/missinglink","html_url":"https://github.com/missinglink","followers_url":"https://api.github.com/users/missinglink/followers","following_url":"https://api.github.com/users/missinglink/following{/other_user}","gists_url":"https://api.github.com/users/missinglink/gists{/gist_id}","starred_url":"https://api.github.com/users/missinglink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/missinglink/subscriptions","organizations_url":"https://api.github.com/users/missinglink/orgs","repos_url":"https://api.github.com/users/missinglink/repos","events_url":"https://api.github.com/users/missinglink/events{/privacy}","received_events_url":"https://api.github.com/users/missinglink/received_events","type":"User","site_admin":false},"created_at":"2014-12-28T18:24:48Z","updated_at":"2014-12-28T18:32:32Z","author_association":"CONTRIBUTOR","body":"Hey @andyboagra I figured out what was going on, I actually had this issue a while back and it took some time for me to remember what the deal was.\n\nThe co-ordinates you specified for the `envelope` are in the wrong order, [the docs](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/mapping-geo-shape-type.html#_envelope) say that the format `\"consists of coordinates for upper left and lower right points of the shape to represent a bounding rectangle\"`.\n\nYou should be using:\n\n``` javascript\n\"coordinates\": [\n  [\"-118.68\", \"35.32\"],\n  [\"-118.58\", \"35.30\"]\n]\n```\n\n... instead of \n\n``` javascript\n\"coordinates\": [\n  [\"-118.58\", \"35.32\"],\n  [\"-118.68\", \"35.30\"]\n]\n```\n\nIt's actually quite annoying that you don't get a warning, as changing the `lat` values throws `InvalidShapeException` inside `spatial4j` yet changing the `lon` doesn't.\n\nI'm assuming that the envelope you created wraps all the way around the world and excludes only the small section you were trying to target, although I didn't spend the time investigating more.\n\nHope that helps, I'll try to write up a minimal testcase regarding the bbox validation and open a separate ticket.\n\nIf you can confirm this works this issue can probably be closed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68370694","html_url":"https://github.com/elastic/elasticsearch/issues/9079#issuecomment-68370694","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9079","id":68370694,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzcwNjk0","user":{"login":"andyboagra","id":8370784,"node_id":"MDQ6VXNlcjgzNzA3ODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/8370784?v=4","gravatar_id":"","url":"https://api.github.com/users/andyboagra","html_url":"https://github.com/andyboagra","followers_url":"https://api.github.com/users/andyboagra/followers","following_url":"https://api.github.com/users/andyboagra/following{/other_user}","gists_url":"https://api.github.com/users/andyboagra/gists{/gist_id}","starred_url":"https://api.github.com/users/andyboagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyboagra/subscriptions","organizations_url":"https://api.github.com/users/andyboagra/orgs","repos_url":"https://api.github.com/users/andyboagra/repos","events_url":"https://api.github.com/users/andyboagra/events{/privacy}","received_events_url":"https://api.github.com/users/andyboagra/received_events","type":"User","site_admin":false},"created_at":"2014-12-30T16:25:05Z","updated_at":"2014-12-30T16:25:05Z","author_association":"NONE","body":"Works as expected based on Peter's suggestion.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68390356","html_url":"https://github.com/elastic/elasticsearch/issues/9079#issuecomment-68390356","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9079","id":68390356,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzkwMzU2","user":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"created_at":"2014-12-30T19:48:20Z","updated_at":"2014-12-30T19:48:20Z","author_association":"CONTRIBUTOR","body":"@andyboagra Great to hear you got it working! A patch has been pushed to self correct coordinate order on envelope shape type.  Many thanks to both you and @missinglink for identifying this issue.  Cheers!  \n","performed_via_github_app":null}]