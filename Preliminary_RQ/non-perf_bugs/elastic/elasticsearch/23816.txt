{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23816","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23816/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23816/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23816/events","html_url":"https://github.com/elastic/elasticsearch/issues/23816","id":218111409,"node_id":"MDU6SXNzdWUyMTgxMTE0MDk=","number":23816,"title":"Controller the threads number to transfer data from hot to warm.","user":{"login":"zhuqunzhou","id":10348876,"node_id":"MDQ6VXNlcjEwMzQ4ODc2","avatar_url":"https://avatars2.githubusercontent.com/u/10348876?v=4","gravatar_id":"","url":"https://api.github.com/users/zhuqunzhou","html_url":"https://github.com/zhuqunzhou","followers_url":"https://api.github.com/users/zhuqunzhou/followers","following_url":"https://api.github.com/users/zhuqunzhou/following{/other_user}","gists_url":"https://api.github.com/users/zhuqunzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/zhuqunzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhuqunzhou/subscriptions","organizations_url":"https://api.github.com/users/zhuqunzhou/orgs","repos_url":"https://api.github.com/users/zhuqunzhou/repos","events_url":"https://api.github.com/users/zhuqunzhou/events{/privacy}","received_events_url":"https://api.github.com/users/zhuqunzhou/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2017-03-30T07:57:30Z","updated_at":"2017-03-30T08:49:51Z","closed_at":"2017-03-30T08:49:51Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**:5.2.2\r\n\r\n**Plugins installed**: x-pack\r\n\r\n**JVM version**:1.8.0_111\r\n\r\n**OS version**:CentOS Linux release 7.2.1511\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nBefore `es5` i can use `cluster.routing.allocation.cluster_concurrent_rebalance` configuration to controller the threads number to transfer data from hot nodes to warm nodes.\r\n\r\nBut,`v5.2.2` the configuration doesn't seem to work.\r\n\r\n    curl -XPUT 'localhost:9200/_cluster/settings' -d '\r\n    {\r\n      \"persistent\": {\r\n        \"cluster.routing.allocation.cluster_concurrent_rebalance\": 1\r\n      }\r\n    }'\r\n\r\nBut,`es` will transfer all shards(such as 35 shards) to the warm nodes together.\r\n\r\n![transfer](https://cloud.githubusercontent.com/assets/10348876/24493443/6d320880-1561-11e7-9097-1a90694a7d76.png)\r\n","closed_by":{"login":"zhuqunzhou","id":10348876,"node_id":"MDQ6VXNlcjEwMzQ4ODc2","avatar_url":"https://avatars2.githubusercontent.com/u/10348876?v=4","gravatar_id":"","url":"https://api.github.com/users/zhuqunzhou","html_url":"https://github.com/zhuqunzhou","followers_url":"https://api.github.com/users/zhuqunzhou/followers","following_url":"https://api.github.com/users/zhuqunzhou/following{/other_user}","gists_url":"https://api.github.com/users/zhuqunzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/zhuqunzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhuqunzhou/subscriptions","organizations_url":"https://api.github.com/users/zhuqunzhou/orgs","repos_url":"https://api.github.com/users/zhuqunzhou/repos","events_url":"https://api.github.com/users/zhuqunzhou/events{/privacy}","received_events_url":"https://api.github.com/users/zhuqunzhou/received_events","type":"User","site_admin":false},"performed_via_github_app":null}