[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312875854","html_url":"https://github.com/elastic/elasticsearch/issues/25518#issuecomment-312875854","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25518","id":312875854,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjg3NTg1NA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-07-04T13:18:38Z","updated_at":"2017-07-04T13:18:38Z","author_association":"CONTRIBUTOR","body":"I'm not sure we should do anything. I think a popular use-case of fuzzy queries is to search regardless of potential typos. If I'm assuming that the query is correct and I want to find docs that have the term mistyped, then applying synonyms might make sense. On the other hand, if the term is mistyped and I want to find documents that have the correct typing, then applying synonyms does not sound like a good idea anymore.\r\n\r\nAnother perspective on this issue: If you apply synonyms, it means that you want to search based on the meaning of words, and it is likely that you are also applying stemming so that plurals and singulars are collapsed into the same token for instance. However stemming makes little sense in combination with fuzzy queries, or otherwise you could end up with weird things such as jumping being considered at a distance 2 of jam due to the removal of -ing suffixes. It gets even worse when the stemmer also changes letters, eg. they often replace trailing `y`s with `i`s in english.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312878041","html_url":"https://github.com/elastic/elasticsearch/issues/25518#issuecomment-312878041","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25518","id":312878041,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjg3ODA0MQ==","user":{"login":"tobymiller1","id":28922583,"node_id":"MDQ6VXNlcjI4OTIyNTgz","avatar_url":"https://avatars1.githubusercontent.com/u/28922583?v=4","gravatar_id":"","url":"https://api.github.com/users/tobymiller1","html_url":"https://github.com/tobymiller1","followers_url":"https://api.github.com/users/tobymiller1/followers","following_url":"https://api.github.com/users/tobymiller1/following{/other_user}","gists_url":"https://api.github.com/users/tobymiller1/gists{/gist_id}","starred_url":"https://api.github.com/users/tobymiller1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tobymiller1/subscriptions","organizations_url":"https://api.github.com/users/tobymiller1/orgs","repos_url":"https://api.github.com/users/tobymiller1/repos","events_url":"https://api.github.com/users/tobymiller1/events{/privacy}","received_events_url":"https://api.github.com/users/tobymiller1/received_events","type":"User","site_admin":false},"created_at":"2017-07-04T13:27:36Z","updated_at":"2017-07-04T13:27:36Z","author_association":"NONE","body":"In which case surely synonyms and fuzziness should be completely incompatible, and throw an error, rather than silently not applying fuzziness to words with synonyms?\r\n\r\nIn my use case, which prompted this bug report, we definitely need to do both. If synonyms and fuzziness become incompatible we would bool together one query for each, but this would confuse the scoring in correctly spelt cases so not ideal.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312879804","html_url":"https://github.com/elastic/elasticsearch/issues/25518#issuecomment-312879804","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25518","id":312879804,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjg3OTgwNA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-07-04T13:34:23Z","updated_at":"2017-07-04T13:34:23Z","author_association":"CONTRIBUTOR","body":"Yeah, there are multiple cases like that, for instance prefix queries make little sense if the analyzer has edge ngrams, wildcard queries make little sense if the analyzer has a stemmer, etc. but analyzers are totally opaque (for good reasons) so we can't check for which filters they wrap.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312880510","html_url":"https://github.com/elastic/elasticsearch/issues/25518#issuecomment-312880510","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25518","id":312880510,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjg4MDUxMA==","user":{"login":"tobymiller1","id":28922583,"node_id":"MDQ6VXNlcjI4OTIyNTgz","avatar_url":"https://avatars1.githubusercontent.com/u/28922583?v=4","gravatar_id":"","url":"https://api.github.com/users/tobymiller1","html_url":"https://github.com/tobymiller1","followers_url":"https://api.github.com/users/tobymiller1/followers","following_url":"https://api.github.com/users/tobymiller1/following{/other_user}","gists_url":"https://api.github.com/users/tobymiller1/gists{/gist_id}","starred_url":"https://api.github.com/users/tobymiller1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tobymiller1/subscriptions","organizations_url":"https://api.github.com/users/tobymiller1/orgs","repos_url":"https://api.github.com/users/tobymiller1/repos","events_url":"https://api.github.com/users/tobymiller1/events{/privacy}","received_events_url":"https://api.github.com/users/tobymiller1/received_events","type":"User","site_admin":false},"created_at":"2017-07-04T13:37:41Z","updated_at":"2017-07-04T13:37:41Z","author_association":"NONE","body":"Fair enough. It does seem that synonyms and fuzziness have a sensible way that they could behave together, even if in most cases it's a bad idea, though.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314045225","html_url":"https://github.com/elastic/elasticsearch/issues/25518#issuecomment-314045225","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25518","id":314045225,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDA0NTIyNQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2017-07-10T08:51:18Z","updated_at":"2017-07-10T08:51:18Z","author_association":"MEMBER","body":"@jpountz after reading your comments, I don't know if we should keep this issue open. Do you think there is anything we should do here? Or maybe add another round of discussion?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314047519","html_url":"https://github.com/elastic/elasticsearch/issues/25518#issuecomment-314047519","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25518","id":314047519,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDA0NzUxOQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-07-10T09:00:09Z","updated_at":"2017-07-10T09:00:09Z","author_association":"CONTRIBUTOR","body":"I understand this might be a bit controversial, so I did not want to close the issue right away. @jimczi Do you have an opinion about this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/317740286","html_url":"https://github.com/elastic/elasticsearch/issues/25518#issuecomment-317740286","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25518","id":317740286,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNzc0MDI4Ng==","user":{"login":"al","id":10687,"node_id":"MDQ6VXNlcjEwNjg3","avatar_url":"https://avatars2.githubusercontent.com/u/10687?v=4","gravatar_id":"","url":"https://api.github.com/users/al","html_url":"https://github.com/al","followers_url":"https://api.github.com/users/al/followers","following_url":"https://api.github.com/users/al/following{/other_user}","gists_url":"https://api.github.com/users/al/gists{/gist_id}","starred_url":"https://api.github.com/users/al/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/al/subscriptions","organizations_url":"https://api.github.com/users/al/orgs","repos_url":"https://api.github.com/users/al/repos","events_url":"https://api.github.com/users/al/events{/privacy}","received_events_url":"https://api.github.com/users/al/received_events","type":"User","site_admin":false},"created_at":"2017-07-25T13:39:46Z","updated_at":"2017-07-25T13:39:46Z","author_association":"NONE","body":"FWIW I'd like to add that I also have a use case where I'd like to be able to perform synonym expansion  followed by fuzzy matching. Basically I'd like to define the synonyms `google,alphabet` so that a search for _google_ would match _google_, and _alphabet_, but also _gooogle_, _alpabet_, etc.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/318579937","html_url":"https://github.com/elastic/elasticsearch/issues/25518#issuecomment-318579937","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25518","id":318579937,"node_id":"MDEyOklzc3VlQ29tbWVudDMxODU3OTkzNw==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-07-28T07:16:14Z","updated_at":"2017-07-28T07:16:14Z","author_association":"MEMBER","body":"Sorry I missed the ping. I agree with @jpountz, applying fuzziness to query-time synonyms sounds weird to me. If a synonym rule matches an input it means that the input is correctly spelt and that the expansion should match exact terms. The other problem is that we can't differentiate the original term(s) from its synonyms after the analysis so we can't apply fuzziness to the input terms only (which IMO would be an acceptable solution) and it becomes even harder if the synonyms is multi-word.\r\nThe workaround is to use index-time synonyms that would index both terms `google, alphabet` when `google` or `alphabet` are encountered in the documents. The fuzziness would work for a query like `google` which is expected but also for a query like `alpabet` with fuzziness enabled.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372979387","html_url":"https://github.com/elastic/elasticsearch/issues/25518#issuecomment-372979387","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25518","id":372979387,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mjk3OTM4Nw==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2018-03-14T10:48:45Z","updated_at":"2018-03-14T10:48:45Z","author_association":"CONTRIBUTOR","body":"cc @elastic/es-search-aggs ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/479463107","html_url":"https://github.com/elastic/elasticsearch/issues/25518#issuecomment-479463107","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25518","id":479463107,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3OTQ2MzEwNw==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2019-04-03T12:13:07Z","updated_at":"2019-04-03T12:13:07Z","author_association":"CONTRIBUTOR","body":"It looks as though we have a consensus here that we want to keep the existing behaviour.  Shall I close this @jimczi @jpountz ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/479481135","html_url":"https://github.com/elastic/elasticsearch/issues/25518#issuecomment-479481135","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25518","id":479481135,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3OTQ4MTEzNQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2019-04-03T13:07:24Z","updated_at":"2019-04-03T13:07:24Z","author_association":"CONTRIBUTOR","body":"Maybe make it a documentation issue @romseygeek. My mind hasn't changed but I can understand how this can be confusing.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/479796223","html_url":"https://github.com/elastic/elasticsearch/issues/25518#issuecomment-479796223","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25518","id":479796223,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3OTc5NjIyMw==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2019-04-04T08:11:25Z","updated_at":"2019-04-04T08:11:25Z","author_association":"CONTRIBUTOR","body":"I documented this in #40783 ","performed_via_github_app":null}]