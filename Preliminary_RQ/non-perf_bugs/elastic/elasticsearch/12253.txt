{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/12253","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12253/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12253/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12253/events","html_url":"https://github.com/elastic/elasticsearch/issues/12253","id":95099464,"node_id":"MDU6SXNzdWU5NTA5OTQ2NA==","number":12253,"title":"_default_ mapping not created in most randomizedtesting cases","user":{"login":"mikerott","id":857712,"node_id":"MDQ6VXNlcjg1NzcxMg==","avatar_url":"https://avatars2.githubusercontent.com/u/857712?v=4","gravatar_id":"","url":"https://api.github.com/users/mikerott","html_url":"https://github.com/mikerott","followers_url":"https://api.github.com/users/mikerott/followers","following_url":"https://api.github.com/users/mikerott/following{/other_user}","gists_url":"https://api.github.com/users/mikerott/gists{/gist_id}","starred_url":"https://api.github.com/users/mikerott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikerott/subscriptions","organizations_url":"https://api.github.com/users/mikerott/orgs","repos_url":"https://api.github.com/users/mikerott/repos","events_url":"https://api.github.com/users/mikerott/events{/privacy}","received_events_url":"https://api.github.com/users/mikerott/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-07-15T03:55:04Z","updated_at":"2015-07-15T12:45:58Z","closed_at":"2015-07-15T12:45:46Z","author_association":"NONE","active_lock_reason":null,"body":"I have a class that extends `ElasticsearchIntegrationTest` as part of our test infrastructure.  I've overridden `nodeSettings` and `indexSettings` methods in order to take back some control from the `RandomizedTest` class up the class hierarchy.  This worked well when we ran against ES 1.1.1.  Now, against 1.5.2, I'm hitting a blocker.  First, I had to explicitly add `plugin.types` to the `Settings` returned from `nodeSettings`, but that problem was only 30 minutes to find!  The blocker for me is that ES won't create the `_default_` mapping in roughly 90% of the times I run my unit test.\n\nAt this point, I've found which `@Seed` consistently passes, and which consistently fails, so it's clearly some randomization that's causing it.  Problem is, I don't know how to find which setting is causing the difference in behavior.  If I could only see what values the randomizer picked under each seed, I surely could spot the difference.\n\nHow can I make `RandomizedTest` be more verbose?  I can pause my test in a debugger and go poke around on port 9200, or use the Java API.  Anything will do.  In which case(s) will ES _not_ create the `_default_` mapping?\n\nI have a full (easy) re-create scenario for this that I can upload somewhere.\n","closed_by":{"login":"mikerott","id":857712,"node_id":"MDQ6VXNlcjg1NzcxMg==","avatar_url":"https://avatars2.githubusercontent.com/u/857712?v=4","gravatar_id":"","url":"https://api.github.com/users/mikerott","html_url":"https://github.com/mikerott","followers_url":"https://api.github.com/users/mikerott/followers","following_url":"https://api.github.com/users/mikerott/following{/other_user}","gists_url":"https://api.github.com/users/mikerott/gists{/gist_id}","starred_url":"https://api.github.com/users/mikerott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikerott/subscriptions","organizations_url":"https://api.github.com/users/mikerott/orgs","repos_url":"https://api.github.com/users/mikerott/repos","events_url":"https://api.github.com/users/mikerott/events{/privacy}","received_events_url":"https://api.github.com/users/mikerott/received_events","type":"User","site_admin":false},"performed_via_github_app":null}