{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15976","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15976/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15976/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15976/events","html_url":"https://github.com/elastic/elasticsearch/issues/15976","id":126604435,"node_id":"MDU6SXNzdWUxMjY2MDQ0MzU=","number":15976,"title":"Upgrade Azure Storage client to 4.0.0","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"labels":[{"id":143077482,"node_id":"MDU6TGFiZWwxNDMwNzc0ODI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Snapshot/Restore","name":":Distributed/Snapshot/Restore","color":"0e8a16","default":false,"description":"Anything directly related to the `_snapshot/*` APIs"},{"id":151933706,"node_id":"MDU6TGFiZWwxNTE5MzM3MDY=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eupgrade","name":">upgrade","color":"c7def8","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"assignees":[{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2016-01-14T08:28:56Z","updated_at":"2018-02-14T13:53:31Z","closed_at":"2016-02-29T14:18:11Z","author_association":"MEMBER","active_lock_reason":null,"body":"We are using `2.0.0` today but Azure team now recommends:\n\n``` xml\n<dependency>\n    <groupId>com.microsoft.azure</groupId>\n    <artifactId>azure-storage</artifactId>\n    <version>4.0.0</version>\n</dependency>\n```\n\nRelease notes from 2.0.0:\n## 2015.10.05 Version 4.0.0\n- Removed deprecated table AtomPub support.\n- Removed deprecated constructors which take service clients in favor of constructors which take credentials.\n- Added support for \"Add\" permissions on Blob SAS.\n- Added support for \"Create\" permissions on Blob and File SAS.\n- Added support for IP Restricted SAS and Protocol SAS.\n- Added support for Account SAS to all services.\n- Added support for Minute and Hour Metrics to FileServiceProperties and added support for File Metrics to CloudAnalyticsClient.\n- Removed deprecated startCopyFromBlob() on CloudBlob. Use startCopy() instead.\n- Removed deprecated Credentials and StorageKey classes. Please use the appropriate methods on StorageCredentialsAccountAndKey instead.\n## 2015.09.16 Version 3.1.0\n- Fixed a bug in table where a select on a non-existent field resulted in a null reference exception if the corresponding field in the TableEntity was not nullable.\n- Fixed a bug in table where JsonParser was automatically closing the response stream before it was completely drained causing socket exhaustion.\n- Fixed a bug in StorageCredentialsAccountAndKey.updateKey(String) which prevented valid keys from being set.\n- Added CloudBlobContainer.listBlobs(final String, final boolean) method.\n- Fixed a bug in blob where using AccessConditions on block blob uploads larger than 64MB done with the upload\\* methods or block blob uploads done openOutputStream with would fail if the blob did not already exist.\n- Added support for setting a proxy per request. Proxy can be set on an OperationContext instance and will be used when that instance is passed to the request method.\n## 2015.08.04 Version 3.0.0\n- Added support for SAS to the Azure File service.\n- Added support for Append Blob.\n- Added support for Access Control Lists (ACL) to File Shares.\n- Added support for getting and setting of CORS rules to File service.\n- Added support for ShareStats to File Shares.\n- Added support for copying an Azure File to another Azure File or a Block Blob asynchronously, and aborting Azure File copy operations asynchronously.\n- Added support for copying a Blob to an Azure File asynchronously.\n- Added support for setting a maximum quota property on a File Share.\n- Removed deprecated AuthenticationScheme and its getter and setter. In the future only SharedKey will be used.\n- Removed deprecated getter/setters for all request option properties on the service clients. Please use the default request options getter/setters instead.\n- Removed getSubDirectoryReference() for blob directories and file directories. Use getDirectoryReference() instead. \n- Removed getEntityClass() in TableQuery. Please use getClazzType() instead.\n- Added client-side verification for lease duration and break periods.\n- Deprecated the setters in table for timestamp as this property is only modifiable by the service.\n- Deprecated startCopyFromBlob() on CloudBlob. Use startCopy() instead.\n- Deprecated the Credentials and StorageKey classes. Please use the appropriate methods on StorageCredentialsAccountAndKey instead.\n- Deprecated constructors which take service clients in favor of constructors which take credentials.\n- Fixed a bug where the DateBackwardCompatibility flag was not applied if set on the CloudTableClient default request options.\n- Changed library behavior to retry all exceptions thrown when parsing a response object.\n- Changed behavior to stop removing query parameters passed in with the resource URI if that URI contains a SAS token. Some query parameters such as comp, restype, snapshot and api-version will still be removed.\n- Added support for logging StringToSign to SharedKey and SAS.\n- **Added a connect timeout to prevent hangs when establishing the network connection.**\n- **Made performance enhancements to the BlobOutputStream class.**\n## 2015.05.26 Version 2.2.0\n- Fixed a bug where maximum execution time was ignored for file, queue, and table services.\n- **Changed the socket timeout to be set to the service side timeout plus 5 minutes when maximum execution time is not set.**\n- **Changed the socket timeout to default to 5 minutes rather than infinite when neither service side timeout or maximum execution time are set.**\n- Fixed a bug where MD5 was calculated for commitBlockList even though UseTransactionalMD5 was set to false.\n- Fixed a bug where selecting fields that did not exist returned an error rather than an EntityProperty with a null value.\n- Fixed a bug where table entities with a single quote in their partition or row key could be inserted but not operated on in any other way.\n## 2015.04.01 Version 2.1.0\n- Fixed a bug for all listing API's where next() would sometimes throw an exception if hasNext() had not been called even if there were more elements to iterate on.\n- Added sequence number to the blob properties. This is populated for page blobs.\n- Creating a page blob sets its length property.\n- Added support for page blob sequence numbers and sequence number access conditions. \n- Fixed a bug in abort copy where the lease access condition was not sent to the service.\n- Fixed an issue in startCopyFromBlob where if the URI of the source blob contained certain non-ASCII characters they would not be encoded appropriately. This would result in Authorization failures.\n- Fixed a small performance issue in XML serialization.\n- Fixed a bug in BlobOutputStream and FileOutputStream where flush added data to a request pool rather than immediately committing it to the Azure service.\n- Refactored to remove the blob, queue, and file package dependency on table in the error handling code.\n- Added additional client-side logging for REST requests, responses, and errors.\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}