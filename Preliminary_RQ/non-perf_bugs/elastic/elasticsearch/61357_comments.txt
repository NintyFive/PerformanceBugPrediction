[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/677451240","html_url":"https://github.com/elastic/elasticsearch/issues/61357#issuecomment-677451240","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61357","id":677451240,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzQ1MTI0MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-08-20T08:16:42Z","updated_at":"2020-08-20T08:16:42Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Core)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/677451331","html_url":"https://github.com/elastic/elasticsearch/issues/61357#issuecomment-677451331","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61357","id":677451331,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzQ1MTMzMQ==","user":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"created_at":"2020-08-20T08:16:56Z","updated_at":"2020-08-20T08:16:56Z","author_association":"CONTRIBUTOR","body":"CC @pgomulka ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/677690209","html_url":"https://github.com/elastic/elasticsearch/issues/61357#issuecomment-677690209","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61357","id":677690209,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzY5MDIwOQ==","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"created_at":"2020-08-20T14:10:50Z","updated_at":"2020-08-20T14:10:50Z","author_association":"CONTRIBUTOR","body":"agree on the documentation update. \r\nthe reason why `strict_date_optional_time_nanos` is that previously it was incorrectly assumed that strict formats require more fields to be present - hence it required minimum 3 fractions of a second.  When in fact strict prefix should indicate that strict validation is enforced.\r\n`strict_date_optional_time` on the other hand requires 1-9 fractions of a second (it can support nanoseconds). This might be the second reason why `strict_date_optional_time_nanos` was enforcing min 3 fraction of a second - to make it different to `strict_date_optional_time`. @rjernst do you happen to remember more reasoning behind this?\r\n\r\nWorth remembering -  `strict_date_optional_time_nanos` with `date` field will lead to loose of precision on nanosecond part.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/677897454","html_url":"https://github.com/elastic/elasticsearch/issues/61357#issuecomment-677897454","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61357","id":677897454,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Nzg5NzQ1NA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2020-08-20T20:50:51Z","updated_at":"2020-08-20T20:50:51Z","author_association":"MEMBER","body":"> do you happen to remember more reasoning behind this?\r\n\r\nI do not. These patterns were made by @spinscale, maybe he might remember more context.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/678871281","html_url":"https://github.com/elastic/elasticsearch/issues/61357#issuecomment-678871281","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61357","id":678871281,"node_id":"MDEyOklzc3VlQ29tbWVudDY3ODg3MTI4MQ==","user":{"login":"kiju98","id":25359646,"node_id":"MDQ6VXNlcjI1MzU5NjQ2","avatar_url":"https://avatars2.githubusercontent.com/u/25359646?v=4","gravatar_id":"","url":"https://api.github.com/users/kiju98","html_url":"https://github.com/kiju98","followers_url":"https://api.github.com/users/kiju98/followers","following_url":"https://api.github.com/users/kiju98/following{/other_user}","gists_url":"https://api.github.com/users/kiju98/gists{/gist_id}","starred_url":"https://api.github.com/users/kiju98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiju98/subscriptions","organizations_url":"https://api.github.com/users/kiju98/orgs","repos_url":"https://api.github.com/users/kiju98/repos","events_url":"https://api.github.com/users/kiju98/events{/privacy}","received_events_url":"https://api.github.com/users/kiju98/received_events","type":"User","site_admin":false},"created_at":"2020-08-24T02:28:42Z","updated_at":"2020-08-24T02:28:42Z","author_association":"NONE","body":"FYI, I see `strict_date_optional_time_nanos` in 7.6.2 allowed 2 digit nanoseconds as below:\r\n```\r\nPUT test-date\r\n{\r\n  \"mappings\": {\r\n    \"properties\": {\r\n      \"datetest-nano\": {\r\n        \"type\": \"date_nanos\",\r\n        \"format\": \"strict_date_optional_time_nanos\"\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nPOST test-date/_doc/123\r\n{\r\n  \"datetest-nano\": \"2020-06-19T07:16:17.02Z\"\r\n}\r\n=>\r\n{\r\n  \"_index\" : \"test-date\",\r\n  \"_type\" : \"_doc\",\r\n  \"_id\" : \"123\",\r\n  \"_version\" : 2,\r\n  \"result\" : \"updated\",\r\n  \"_shards\" : {\r\n    \"total\" : 2,\r\n    \"successful\" : 1,\r\n    \"failed\" : 0\r\n  },\r\n  \"_seq_no\" : 1,\r\n  \"_primary_term\" : 1\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/678989467","html_url":"https://github.com/elastic/elasticsearch/issues/61357#issuecomment-678989467","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61357","id":678989467,"node_id":"MDEyOklzc3VlQ29tbWVudDY3ODk4OTQ2Nw==","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"created_at":"2020-08-24T08:34:50Z","updated_at":"2020-08-24T08:34:50Z","author_association":"CONTRIBUTOR","body":"@kiju98 are you sure about this? I tested this as well now and it did not work - failed to be parsed. It has to have at least 3 digits for `fraction of second` part.\r\ncan you confirm the mapping?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/679917359","html_url":"https://github.com/elastic/elasticsearch/issues/61357#issuecomment-679917359","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61357","id":679917359,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTkxNzM1OQ==","user":{"login":"kiju98","id":25359646,"node_id":"MDQ6VXNlcjI1MzU5NjQ2","avatar_url":"https://avatars2.githubusercontent.com/u/25359646?v=4","gravatar_id":"","url":"https://api.github.com/users/kiju98","html_url":"https://github.com/kiju98","followers_url":"https://api.github.com/users/kiju98/followers","following_url":"https://api.github.com/users/kiju98/following{/other_user}","gists_url":"https://api.github.com/users/kiju98/gists{/gist_id}","starred_url":"https://api.github.com/users/kiju98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiju98/subscriptions","organizations_url":"https://api.github.com/users/kiju98/orgs","repos_url":"https://api.github.com/users/kiju98/repos","events_url":"https://api.github.com/users/kiju98/events{/privacy}","received_events_url":"https://api.github.com/users/kiju98/received_events","type":"User","site_admin":false},"created_at":"2020-08-25T09:34:23Z","updated_at":"2020-08-25T09:34:53Z","author_association":"NONE","body":"Yes, I just tested again and got the same success with the two digit nanoseconds `2020-06-19T07:16:17.02Z` in `7.6.2`. The mapping is as below:\r\n```\r\nGET test-date/_mapping\r\n=>\r\n{\r\n  \"test-date\" : {\r\n    \"mappings\" : {\r\n      \"properties\" : {\r\n        \"datetest-nano\" : {\r\n          \"type\" : \"date_nanos\",\r\n          \"format\" : \"strict_date_optional_time_nanos\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/688374697","html_url":"https://github.com/elastic/elasticsearch/issues/61357#issuecomment-688374697","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61357","id":688374697,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODM3NDY5Nw==","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"created_at":"2020-09-07T14:52:59Z","updated_at":"2020-09-07T14:52:59Z","author_association":"CONTRIBUTOR","body":"@kiju98 thank you for being persistent and confirming the mapping\r\nI think this is because of JDK you were using. Allowing parsing 2digits when 3 were required was a JDK bug\r\nhttps://bugs.openjdk.java.net/browse/JDK-8230136\r\nit was fixed in jdk 14\r\n\r\ncan you confirm java version you used?\r\n\r\nalso please bear in mind that we don't support jdk14 in 7.6. JDK 14 is supported since 7.7","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/688557443","html_url":"https://github.com/elastic/elasticsearch/issues/61357#issuecomment-688557443","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61357","id":688557443,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU1NzQ0Mw==","user":{"login":"kiju98","id":25359646,"node_id":"MDQ6VXNlcjI1MzU5NjQ2","avatar_url":"https://avatars2.githubusercontent.com/u/25359646?v=4","gravatar_id":"","url":"https://api.github.com/users/kiju98","html_url":"https://github.com/kiju98","followers_url":"https://api.github.com/users/kiju98/followers","following_url":"https://api.github.com/users/kiju98/following{/other_user}","gists_url":"https://api.github.com/users/kiju98/gists{/gist_id}","starred_url":"https://api.github.com/users/kiju98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiju98/subscriptions","organizations_url":"https://api.github.com/users/kiju98/orgs","repos_url":"https://api.github.com/users/kiju98/repos","events_url":"https://api.github.com/users/kiju98/events{/privacy}","received_events_url":"https://api.github.com/users/kiju98/received_events","type":"User","site_admin":false},"created_at":"2020-09-08T00:45:25Z","updated_at":"2020-09-08T00:45:25Z","author_association":"NONE","body":"Thank you for the information @pgomulka \r\nThe JDK was `openjdk version \"13.0.2\" 2020-01-14` bundled with Elasticsearch 7.6.2.\r\nFor 7.8.1 I used `openjdk version \"14.0.1\" 2020-04-14` bundled with Elasticserach 7.8.1.\r\nSo the result is consistent with your answer.\r\n\r\nHow about the documentation update? Are we waiting for @spinscale 's opinion?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/689620225","html_url":"https://github.com/elastic/elasticsearch/issues/61357#issuecomment-689620225","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61357","id":689620225,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTYyMDIyNQ==","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"created_at":"2020-09-09T15:00:12Z","updated_at":"2020-09-09T15:00:12Z","author_association":"CONTRIBUTOR","body":"I will follow up with a documentation update","performed_via_github_app":null}]