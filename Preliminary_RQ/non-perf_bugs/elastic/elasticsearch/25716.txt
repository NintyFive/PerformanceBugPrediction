{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25716","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25716/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25716/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25716/events","html_url":"https://github.com/elastic/elasticsearch/issues/25716","id":242830668,"node_id":"MDU6SXNzdWUyNDI4MzA2Njg=","number":25716,"title":"Snapshot of ES data based on node.attr.box_type field option","user":{"login":"jayannah","id":4325281,"node_id":"MDQ6VXNlcjQzMjUyODE=","avatar_url":"https://avatars0.githubusercontent.com/u/4325281?v=4","gravatar_id":"","url":"https://api.github.com/users/jayannah","html_url":"https://github.com/jayannah","followers_url":"https://api.github.com/users/jayannah/followers","following_url":"https://api.github.com/users/jayannah/following{/other_user}","gists_url":"https://api.github.com/users/jayannah/gists{/gist_id}","starred_url":"https://api.github.com/users/jayannah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jayannah/subscriptions","organizations_url":"https://api.github.com/users/jayannah/orgs","repos_url":"https://api.github.com/users/jayannah/repos","events_url":"https://api.github.com/users/jayannah/events{/privacy}","received_events_url":"https://api.github.com/users/jayannah/received_events","type":"User","site_admin":false},"labels":[{"id":143077482,"node_id":"MDU6TGFiZWwxNDMwNzc0ODI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Snapshot/Restore","name":":Distributed/Snapshot/Restore","color":"0e8a16","default":false,"description":"Anything directly related to the `_snapshot/*` APIs"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-07-13T21:05:53Z","updated_at":"2017-08-04T13:32:07Z","closed_at":"2017-08-04T13:32:07Z","author_association":"NONE","active_lock_reason":null,"body":"\r\n<!-- Feature request --> /  <!-- Bug report -->\r\nSnapshot of ES data based on node.attr.box_type field option\r\n\r\n\r\n**Elasticsearch version**:   5.4.2\r\n**Plugins installed**: []  S3-repository, X-pack\r\n\r\n**JVM version** (`java -version`):  1.8.73\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): 3.13.0-119-generic #166-Ubuntu SMP Wed May 3 12:18:55 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nScenario:\r\n          We have ES cluster deployed in 3 AWS availability Zones (AZs).  We are using node.attr.box_type in elasticsearch.yml file to differentiate the ES node in each AZs.  We would like to schedule separate backup calls for each AZs.. \r\n\r\n Hence we are looking for option to specify \"node.attr.box_type\" with value \"us-east-1a\" so that it will backup only the data from ES node set to \"node.attr.box_type\" as \"us-east-1a\"\r\n\r\nWe didn't find such options in the documentation https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-snapshots.html \r\n\r\n**Steps to reproduce**:\r\n1. Create ES cluster in us-east-1a  and us-east-1b\r\n2. 50% of data node will be set \"node.attr.box_type\" as \"us-east-1a\" and rest with \"node.attr.box_type\" as \"us-east-1b\"\r\n3. Would like to create separate s3 repository for \"us-east-1a\"  and \"us-east-1b\"\r\n4. Take backup from ES nodes in \"us-east-1a\" and \"us-east-1b\" separately and store them in different S3 bucket if required..\r\n\r\n\r\nNote: Our usecase is more complex, just made it simple to understand the requirement.\r\n\r\n\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}