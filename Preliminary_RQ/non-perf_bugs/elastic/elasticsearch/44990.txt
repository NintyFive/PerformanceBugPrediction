{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/44990","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44990/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44990/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44990/events","html_url":"https://github.com/elastic/elasticsearch/issues/44990","id":474345909,"node_id":"MDU6SXNzdWU0NzQzNDU5MDk=","number":44990,"title":"java.lang.NoSuchMethodError: org.elasticsearch.common.logging.Loggers.getLogger(Ljava/lang/String;)Lorg/apache/logging/log4j/Logger","user":{"login":"xcmy-cy","id":23381983,"node_id":"MDQ6VXNlcjIzMzgxOTgz","avatar_url":"https://avatars1.githubusercontent.com/u/23381983?v=4","gravatar_id":"","url":"https://api.github.com/users/xcmy-cy","html_url":"https://github.com/xcmy-cy","followers_url":"https://api.github.com/users/xcmy-cy/followers","following_url":"https://api.github.com/users/xcmy-cy/following{/other_user}","gists_url":"https://api.github.com/users/xcmy-cy/gists{/gist_id}","starred_url":"https://api.github.com/users/xcmy-cy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xcmy-cy/subscriptions","organizations_url":"https://api.github.com/users/xcmy-cy/orgs","repos_url":"https://api.github.com/users/xcmy-cy/repos","events_url":"https://api.github.com/users/xcmy-cy/events{/privacy}","received_events_url":"https://api.github.com/users/xcmy-cy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-07-30T02:59:59Z","updated_at":"2019-09-20T21:57:59Z","closed_at":"2019-07-30T05:26:26Z","author_association":"NONE","active_lock_reason":null,"body":"version:elasticsearch 7.2\r\n\r\nthrow an exception,when i run the test class.\r\ntest calss:\r\n   @Test\r\n    public void count() throws UnknownHostException {\r\n        TransportClient client = config.client();\r\n        GetResponse documentFields = client.prepareGet(\"user\", \"emp\", \"1\").get();\r\n\r\n        System.out.println(documentFields.getSource());\r\n        client.close();\r\n    }\r\n\r\nexception:\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\n\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\r\n\tat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\r\n\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'client' defined in class path resource [com/xcmy/elasticsearch/ElasticsearchConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.elasticsearch.client.transport.TransportClient]: Factory method 'client' threw exception; nested exception is java.lang.NoSuchMethodError: org.elasticsearch.common.logging.Loggers.getLogger(Ljava/lang/String;)Lorg/apache/logging/log4j/Logger;\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1321)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1160)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:845)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:743)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:390)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)\r\n\t... 25 more\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.elasticsearch.client.transport.TransportClient]: Factory method 'client' threw exception; nested exception is java.lang.NoSuchMethodError: org.elasticsearch.common.logging.Loggers.getLogger(Ljava/lang/String;)Lorg/apache/logging/log4j/Logger;\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622)\r\n\t... 43 more\r\nCaused by: java.lang.NoSuchMethodError: org.elasticsearch.common.logging.Loggers.getLogger(Ljava/lang/String;)Lorg/apache/logging/log4j/Logger;\r\n\tat org.elasticsearch.transport.netty4.Netty4InternalESLogger.<init>(Netty4InternalESLogger.java:34)\r\n\tat org.elasticsearch.transport.netty4.Netty4Utils$1.newInstance(Netty4Utils.java:53)\r\n\tat io.netty.util.internal.logging.InternalLoggerFactory.getInstance(InternalLoggerFactory.java:93)\r\n\tat io.netty.util.internal.logging.InternalLoggerFactory.getInstance(InternalLoggerFactory.java:86)\r\n\tat io.netty.util.internal.PlatformDependent.<clinit>(PlatformDependent.java:70)\r\n\tat io.netty.util.ConstantPool.<init>(ConstantPool.java:32)\r\n\tat io.netty.util.AttributeKey$1.<init>(AttributeKey.java:27)\r\n\tat io.netty.util.AttributeKey.<clinit>(AttributeKey.java:27)\r\n\tat org.elasticsearch.transport.netty4.Netty4Transport.<clinit>(Netty4Transport.java:231)\r\n\tat org.elasticsearch.transport.Netty4Plugin.getSettings(Netty4Plugin.java:56)\r\n\tat org.elasticsearch.plugins.PluginsService.lambda$getPluginSettings$0(PluginsService.java:89)\r\n\tat java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:267)\r\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1374)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\r\n\tat org.elasticsearch.plugins.PluginsService.getPluginSettings(PluginsService.java:89)\r\n\tat org.elasticsearch.client.transport.TransportClient.buildTemplate(TransportClient.java:146)\r\n\tat org.elasticsearch.client.transport.TransportClient.<init>(TransportClient.java:286)\r\n\tat org.elasticsearch.transport.client.PreBuiltTransportClient.<init>(PreBuiltTransportClient.java:130)\r\n\tat org.elasticsearch.transport.client.PreBuiltTransportClient.<init>(PreBuiltTransportClient.java:116)\r\n\tat org.elasticsearch.transport.client.PreBuiltTransportClient.<init>(PreBuiltTransportClient.java:106)\r\n\tat com.xcmy.elasticsearch.ElasticsearchConfig.client(ElasticsearchConfig.java:31)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n\t... 44 more\r\n\r\nEnter the Netty4InternalESLogger.java:34:\r\nNetty4InternalESLogger(String name) {\r\n        super(name);\r\n(line34)        this.logger = Loggers.getLogger(name);\r\n    }\r\n<img width=\"443\" alt=\"WX20190730-105735@2x\" src=\"https://user-images.githubusercontent.com/23381983/62097274-e065b800-b2b8-11e9-9e3c-15140e6e7c26.png\">\r\nThere is no getLogger(String) methods.","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}