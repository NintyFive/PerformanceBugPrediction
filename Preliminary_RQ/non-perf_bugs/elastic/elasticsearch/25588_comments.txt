[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/313647995","html_url":"https://github.com/elastic/elasticsearch/issues/25588#issuecomment-313647995","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25588","id":313647995,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzY0Nzk5NQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-07-07T10:37:35Z","updated_at":"2017-07-07T10:37:35Z","author_association":"MEMBER","body":"> It is possible to use the existing filter cache to implement this ? A named view would simply be then a named filter. The name references the stored/cached bitset.\r\n\r\nNo, the filter cache is per segment so you cannot expect to cache your view in a single call. It should be recomputed on each newly added segment (and after merges, ...).\r\nCreating a `view` of a particular filter in a single call is only valid if your index does not change.\r\nThe filter cache does not contain the document itself but just a pointer to the internal id of the documents that match the filter in the segment. The entry is valid for this segment only and when the documents are updated (or added) a new entry needs to be computed in the new segment.\r\n\r\nSo If your main problem is just a slow `terms` query then you should try another approach and follow the advices given in the discussions that you linked.\r\nGiant queries with lots of terms that try to return documents based on their _id is clearly an anti pattern in ES and should be avoided. They are plenty of solutions to circumvent this problem so I'll close this issue for now and we can discuss in the forum if you want. Just open a new thread describing your problem and I'll be happy to help.\r\n","performed_via_github_app":null}]