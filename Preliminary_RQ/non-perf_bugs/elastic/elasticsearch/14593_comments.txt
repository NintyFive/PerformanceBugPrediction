[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154547310","html_url":"https://github.com/elastic/elasticsearch/issues/14593#issuecomment-154547310","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14593","id":154547310,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDU0NzMxMA==","user":{"login":"seang-es","id":6352850,"node_id":"MDQ6VXNlcjYzNTI4NTA=","avatar_url":"https://avatars1.githubusercontent.com/u/6352850?v=4","gravatar_id":"","url":"https://api.github.com/users/seang-es","html_url":"https://github.com/seang-es","followers_url":"https://api.github.com/users/seang-es/followers","following_url":"https://api.github.com/users/seang-es/following{/other_user}","gists_url":"https://api.github.com/users/seang-es/gists{/gist_id}","starred_url":"https://api.github.com/users/seang-es/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seang-es/subscriptions","organizations_url":"https://api.github.com/users/seang-es/orgs","repos_url":"https://api.github.com/users/seang-es/repos","events_url":"https://api.github.com/users/seang-es/events{/privacy}","received_events_url":"https://api.github.com/users/seang-es/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T21:29:36Z","updated_at":"2015-11-06T21:29:36Z","author_association":"NONE","body":"This would be an extremely helpful feature for us.  We get tons of cases where the customer has unassigned shards and does not know why, and until we get logs from them, we have no answer.  A quick answer would help the user self-diagnose.  If it could be linked with _cat/shards to give us a single coherent display showing what's unassigned and why, it would be incredible.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154548093","html_url":"https://github.com/elastic/elasticsearch/issues/14593#issuecomment-154548093","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14593","id":154548093,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDU0ODA5Mw==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T21:32:54Z","updated_at":"2015-11-06T21:32:54Z","author_association":"MEMBER","body":"Finally, great to see this API being discussed and planned!  Linking https://github.com/elastic/elasticsearch/issues/9471 as well.\n\n+1 on a single API to get all the information/causes on why a shard cannot be unassigned.   It doesn't look like this one will cover the corruption scenario and the user will have to use the other API (https://github.com/elastic/elasticsearch/pull/11545)?  Having a single API will not only be helpful for admins but also facilitate future Marvel's reporting of unassigned shards and their reasons.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154548432","html_url":"https://github.com/elastic/elasticsearch/issues/14593#issuecomment-154548432","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14593","id":154548432,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDU0ODQzMg==","user":{"login":"GlenRSmith","id":1327920,"node_id":"MDQ6VXNlcjEzMjc5MjA=","avatar_url":"https://avatars3.githubusercontent.com/u/1327920?v=4","gravatar_id":"","url":"https://api.github.com/users/GlenRSmith","html_url":"https://github.com/GlenRSmith","followers_url":"https://api.github.com/users/GlenRSmith/followers","following_url":"https://api.github.com/users/GlenRSmith/following{/other_user}","gists_url":"https://api.github.com/users/GlenRSmith/gists{/gist_id}","starred_url":"https://api.github.com/users/GlenRSmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GlenRSmith/subscriptions","organizations_url":"https://api.github.com/users/GlenRSmith/orgs","repos_url":"https://api.github.com/users/GlenRSmith/repos","events_url":"https://api.github.com/users/GlenRSmith/events{/privacy}","received_events_url":"https://api.github.com/users/GlenRSmith/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T21:34:25Z","updated_at":"2015-11-06T21:34:25Z","author_association":"CONTRIBUTOR","body":":+1: How about the request body have properties that allow interrogation based on shard states?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154549246","html_url":"https://github.com/elastic/elasticsearch/issues/14593#issuecomment-154549246","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14593","id":154549246,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDU0OTI0Ng==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T21:37:30Z","updated_at":"2015-11-06T21:37:30Z","author_association":"MEMBER","body":"> How about the request body have properties that allow interrogation based on shard states?\n\nI'm not sure what you mean by this, can you elaborate?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154550198","html_url":"https://github.com/elastic/elasticsearch/issues/14593#issuecomment-154550198","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14593","id":154550198,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDU1MDE5OA==","user":{"login":"GlenRSmith","id":1327920,"node_id":"MDQ6VXNlcjEzMjc5MjA=","avatar_url":"https://avatars3.githubusercontent.com/u/1327920?v=4","gravatar_id":"","url":"https://api.github.com/users/GlenRSmith","html_url":"https://github.com/GlenRSmith","followers_url":"https://api.github.com/users/GlenRSmith/followers","following_url":"https://api.github.com/users/GlenRSmith/following{/other_user}","gists_url":"https://api.github.com/users/GlenRSmith/gists{/gist_id}","starred_url":"https://api.github.com/users/GlenRSmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GlenRSmith/subscriptions","organizations_url":"https://api.github.com/users/GlenRSmith/orgs","repos_url":"https://api.github.com/users/GlenRSmith/repos","events_url":"https://api.github.com/users/GlenRSmith/events{/privacy}","received_events_url":"https://api.github.com/users/GlenRSmith/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T21:41:47Z","updated_at":"2015-11-06T21:41:47Z","author_association":"CONTRIBUTOR","body":"> I'm not sure what you mean by this, can you elaborate?\n\nSkip the step of finding the unallocated shards and asking about each of them individually, and just\n\n```\nGET /_cluster/allocation/explain\n{\n  \"index\": \"myindex\"\n  \"shard\": {\n    \"state\": \"unallocated\"\n  }\n}\n```\n\nNot a literal proposal of form, but gets my intent across, I think.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154841980","html_url":"https://github.com/elastic/elasticsearch/issues/14593#issuecomment-154841980","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14593","id":154841980,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDg0MTk4MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-08T17:14:05Z","updated_at":"2015-11-08T17:14:05Z","author_association":"CONTRIBUTOR","body":"I like the idea a lot, but I'd reorganise things a bit, especially so it works better in the 500 node case.  I think the disk usage stats should also be available in the nodes stats API. In this API, I'd perhaps include the disk (relevant?) usage stats in the disk usage decider, rather than in a separate section (ie put it where it is relevant).\n\nPerhaps default to a non-verbose output which doesn't list every YES decision, but only the first NO decision for each node.\n\nBtw, what is this supposed to represent?\n\n```\n    \"shard_sizes\": {\n        \"[myindex][0][P]\": 1228718,\n        \"[myindex][0][R]\": 1231289,\n        \"[myindex][1][P]\": 1248718,\n        \"[myindex][1][R]\": 1298718,\n    }\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155164304","html_url":"https://github.com/elastic/elasticsearch/issues/14593#issuecomment-155164304","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14593","id":155164304,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTE2NDMwNA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2015-11-09T19:22:37Z","updated_at":"2015-11-09T19:22:37Z","author_association":"MEMBER","body":"> I think the disk usage stats should also be available in the nodes stats API.\n\nI think this is doable, but is more complex because the stats are only available to the master node, so they're much harder to retrieve.\n\n> Perhaps default to a non-verbose output which doesn't list every YES decision, but only the first NO decision for each node.\n\nThis is similar to what I proposed, show all \"NO\" decisions (showing only the first one doesn't help since it could be a red herring for people to fix) and eliding all the \"YES\" decisions by default.\n\n> Btw, what is this supposed to represent? `... shard_sizes ...`\n\nThe ClusterInfoService gathers shard sizes every 30 seconds which are used for the disk decider, they aren't node-specific so they don't really belong in the nodes stats, so I figured they might be useful here.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155192294","html_url":"https://github.com/elastic/elasticsearch/issues/14593#issuecomment-155192294","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14593","id":155192294,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTE5MjI5NA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2015-11-09T21:03:08Z","updated_at":"2015-11-09T21:03:08Z","author_association":"MEMBER","body":"> I'd perhaps include the disk (relevant?) usage stats in the disk usage decider\n\nHmm... we could add a `public ToXContent supplementaryInfo()` method to the `AllocationDecider` method that would allow certain deciders to return any additional information. Interesting idea...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/174071704","html_url":"https://github.com/elastic/elasticsearch/issues/14593#issuecomment-174071704","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14593","id":174071704,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NDA3MTcwNA==","user":{"login":"jordansissel","id":131818,"node_id":"MDQ6VXNlcjEzMTgxOA==","avatar_url":"https://avatars1.githubusercontent.com/u/131818?v=4","gravatar_id":"","url":"https://api.github.com/users/jordansissel","html_url":"https://github.com/jordansissel","followers_url":"https://api.github.com/users/jordansissel/followers","following_url":"https://api.github.com/users/jordansissel/following{/other_user}","gists_url":"https://api.github.com/users/jordansissel/gists{/gist_id}","starred_url":"https://api.github.com/users/jordansissel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jordansissel/subscriptions","organizations_url":"https://api.github.com/users/jordansissel/orgs","repos_url":"https://api.github.com/users/jordansissel/repos","events_url":"https://api.github.com/users/jordansissel/events{/privacy}","received_events_url":"https://api.github.com/users/jordansissel/received_events","type":"User","site_admin":false},"created_at":"2016-01-22T22:23:20Z","updated_at":"2016-01-22T22:23:20Z","author_association":"CONTRIBUTOR","body":"I would also love this feature. +1 - Here's my story:\n\nOne scenario that is hard to debug (I ran into today) is if I configure ES cluster.routing.allocation.awareness.attributes to a nonsense attribute name (meaning, one that doesn't exist and is not set on any nodes), I will end up with new indices that are not able to allocate any shards. The explanation if I use `_reroute?dry_run&explain` today is _slightly_ confusing, and as I understand it, the reroute API is a very advanced feature, so exposing newbies to it would be not so nice.\n\nHaving a friendlier (less advanced, whatever) way of asking why a shard is not assigned/allocated would be ever so lovely. <3 <3\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/183450962","html_url":"https://github.com/elastic/elasticsearch/issues/14593#issuecomment-183450962","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14593","id":183450962,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MzQ1MDk2Mg==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2016-02-12T18:59:44Z","updated_at":"2016-02-12T18:59:44Z","author_association":"MEMBER","body":"Came across this while searching for this kind of feature. Definitely want! +1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/190736670","html_url":"https://github.com/elastic/elasticsearch/issues/14593#issuecomment-190736670","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14593","id":190736670,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDczNjY3MA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-03-01T14:13:03Z","updated_at":"2016-03-01T14:13:03Z","author_association":"MEMBER","body":"I looked at this again and I like it.  I agree that it runs the danger of being too verbose. Here are some minor suggestions:\n\n1) If we can't put the disk free stats on the node stats, I would output it last. Same goes for shard sizes. This assumes that a NO decision will tell the values it based things on (which might make these sections completely irrelevant)\n2) Put the \"yes\" node first. We should be able to see in a quick glance if a shard can be assigned.\n3) Try to rename nodes - I find it confusing. My only alternative is \"possible_allocations\" - though that's longish.\n\nLast - why do we need to specify a primary flag in the request?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/190769877","html_url":"https://github.com/elastic/elasticsearch/issues/14593#issuecomment-190769877","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14593","id":190769877,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDc2OTg3Nw==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-03-01T15:25:32Z","updated_at":"2016-03-01T15:25:32Z","author_association":"MEMBER","body":"> Last - why do we need to specify a primary flag in the request?\n\nAllocation Deciders can have different rules for primary versus replica, additionally, when retrieving the shard from the cluster state, I plan to use the usassigned_info in the response as well, so we need to differentiate between the two.\n","performed_via_github_app":null}]