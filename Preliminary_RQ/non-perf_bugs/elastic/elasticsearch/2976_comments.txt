[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17359215","html_url":"https://github.com/elastic/elasticsearch/issues/2976#issuecomment-17359215","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2976","id":17359215,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzU5MjE1","user":{"login":"brupm","id":336,"node_id":"MDQ6VXNlcjMzNg==","avatar_url":"https://avatars3.githubusercontent.com/u/336?v=4","gravatar_id":"","url":"https://api.github.com/users/brupm","html_url":"https://github.com/brupm","followers_url":"https://api.github.com/users/brupm/followers","following_url":"https://api.github.com/users/brupm/following{/other_user}","gists_url":"https://api.github.com/users/brupm/gists{/gist_id}","starred_url":"https://api.github.com/users/brupm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brupm/subscriptions","organizations_url":"https://api.github.com/users/brupm/orgs","repos_url":"https://api.github.com/users/brupm/repos","events_url":"https://api.github.com/users/brupm/events{/privacy}","received_events_url":"https://api.github.com/users/brupm/received_events","type":"User","site_admin":false},"created_at":"2013-05-02T19:28:29Z","updated_at":"2013-05-02T19:28:29Z","author_association":"NONE","body":"@kimchy @clintongormley would you guys please take a look at this one, I'll buy you a beer in your next San Diego trip :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17359525","html_url":"https://github.com/elastic/elasticsearch/issues/2976#issuecomment-17359525","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2976","id":17359525,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzU5NTI1","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-05-02T19:33:52Z","updated_at":"2013-05-02T19:33:52Z","author_association":"MEMBER","body":"@brupm you have the lat and lon reversed, once I switched it, it works fine\n\n```\n### Delete and Create index with proper mappings\n\ncurl -X DELETE http://localhost:9200/search\n\ncurl -X POST http://localhost:9200/search -d '{\n  \"mappings\": {\n    \"document\": {\n      \"properties\": {\n        \"name\": {\n          \"type\": \"string\"\n        },\n        \"lat_lon\": {\n          \"type\": \"geo_point\"\n        }\n      }\n    }\n  }\n}\n'\n\n### Index document\n\ncurl -X POST \"http://localhost:9200/search/document/\" -d '{\n  \"name\": \"Kimberly\",\n  \"lat_lon\": [\n    -95.36,\n    29.76\n  ]\n}'\n\n### Search with a geo_distance filter and a radius of 100 miles.\n\ncurl -X GET 'http://localhost:9200/search/_search?pretty' -d '{\n  \"filter\": {\n    \"geo_distance\": {\n      \"lat_lon\": [\n        -96.61,\n        32.8\n      ],\n      \"distance\": \"100mi\"\n    }\n  }\n}'\n\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17359755","html_url":"https://github.com/elastic/elasticsearch/issues/2976#issuecomment-17359755","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2976","id":17359755,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzU5NzU1","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-05-02T19:38:00Z","updated_at":"2013-05-02T19:38:00Z","author_association":"MEMBER","body":"chatted to @brupm on IRC, that was the problem, closing...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17361603","html_url":"https://github.com/elastic/elasticsearch/issues/2976#issuecomment-17361603","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2976","id":17361603,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzYxNjAz","user":{"login":"brupm","id":336,"node_id":"MDQ6VXNlcjMzNg==","avatar_url":"https://avatars3.githubusercontent.com/u/336?v=4","gravatar_id":"","url":"https://api.github.com/users/brupm","html_url":"https://github.com/brupm","followers_url":"https://api.github.com/users/brupm/followers","following_url":"https://api.github.com/users/brupm/following{/other_user}","gists_url":"https://api.github.com/users/brupm/gists{/gist_id}","starred_url":"https://api.github.com/users/brupm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brupm/subscriptions","organizations_url":"https://api.github.com/users/brupm/orgs","repos_url":"https://api.github.com/users/brupm/repos","events_url":"https://api.github.com/users/brupm/events{/privacy}","received_events_url":"https://api.github.com/users/brupm/received_events","type":"User","site_admin":false},"created_at":"2013-05-02T20:11:23Z","updated_at":"2013-05-02T20:11:23Z","author_association":"NONE","body":"Ok, this is _SUPER_ confusing. \n\nThe docs are misleading, the example of the array one is incorrect. It does not communicate that it needs to be both indexed and searched as [lon,lat] \n\nIf you index as lan,lon and search as lat,lon it will work most of the time, the higher the radius the more incorrect it will be, so with smaller radiuses one may confuse it with diving vs. arc distance. \n\nI prose the following: \n1. Clarify in the docs that for array both indexing and searching needs to be [lon,lat]\n2. Fix the example for array as it is incorrect.\n3. Provide an index example for the hash indexing ie.: `location: { lat: 29.76, lon: -95.36 }`\n","performed_via_github_app":null}]