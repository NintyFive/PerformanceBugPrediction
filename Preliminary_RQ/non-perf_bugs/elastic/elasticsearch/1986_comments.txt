[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/5997537","html_url":"https://github.com/elastic/elasticsearch/issues/1986#issuecomment-5997537","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1986","id":5997537,"node_id":"MDEyOklzc3VlQ29tbWVudDU5OTc1Mzc=","user":{"login":"robert-abbott","id":617991,"node_id":"MDQ6VXNlcjYxNzk5MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/617991?v=4","gravatar_id":"","url":"https://api.github.com/users/robert-abbott","html_url":"https://github.com/robert-abbott","followers_url":"https://api.github.com/users/robert-abbott/followers","following_url":"https://api.github.com/users/robert-abbott/following{/other_user}","gists_url":"https://api.github.com/users/robert-abbott/gists{/gist_id}","starred_url":"https://api.github.com/users/robert-abbott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robert-abbott/subscriptions","organizations_url":"https://api.github.com/users/robert-abbott/orgs","repos_url":"https://api.github.com/users/robert-abbott/repos","events_url":"https://api.github.com/users/robert-abbott/events{/privacy}","received_events_url":"https://api.github.com/users/robert-abbott/received_events","type":"User","site_admin":false},"created_at":"2012-05-29T22:17:48Z","updated_at":"2012-05-29T22:17:48Z","author_association":"NONE","body":"Saw this issue on both 0.19.2 & 0.19.4\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23402867","html_url":"https://github.com/elastic/elasticsearch/issues/1986#issuecomment-23402867","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1986","id":23402867,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDAyODY3","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-08-28T09:50:40Z","updated_at":"2013-08-28T09:50:40Z","author_association":"MEMBER","body":"As a side note, it's now possible to manually choose the highlighter type to be used, using the `type` field. Therefore you can use the plain highlighter even though you stored term_vectors for a specific field.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23567263","html_url":"https://github.com/elastic/elasticsearch/issues/1986#issuecomment-23567263","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1986","id":23567263,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTY3MjYz","user":{"login":"robert-abbott","id":617991,"node_id":"MDQ6VXNlcjYxNzk5MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/617991?v=4","gravatar_id":"","url":"https://api.github.com/users/robert-abbott","html_url":"https://github.com/robert-abbott","followers_url":"https://api.github.com/users/robert-abbott/followers","following_url":"https://api.github.com/users/robert-abbott/following{/other_user}","gists_url":"https://api.github.com/users/robert-abbott/gists{/gist_id}","starred_url":"https://api.github.com/users/robert-abbott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robert-abbott/subscriptions","organizations_url":"https://api.github.com/users/robert-abbott/orgs","repos_url":"https://api.github.com/users/robert-abbott/repos","events_url":"https://api.github.com/users/robert-abbott/events{/privacy}","received_events_url":"https://api.github.com/users/robert-abbott/received_events","type":"User","site_admin":false},"created_at":"2013-08-30T15:03:36Z","updated_at":"2013-08-30T15:03:36Z","author_association":"NONE","body":"great, when was this introduced?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23573508","html_url":"https://github.com/elastic/elasticsearch/issues/1986#issuecomment-23573508","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1986","id":23573508,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTczNTA4","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-08-30T16:33:39Z","updated_at":"2013-08-30T16:33:39Z","author_association":"MEMBER","body":"Looks like it was introduced in 0.20.0 after pull request #2350 was pushed to master.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32200060","html_url":"https://github.com/elastic/elasticsearch/issues/1986#issuecomment-32200060","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1986","id":32200060,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMjAwMDYw","user":{"login":"ajhalani","id":1163503,"node_id":"MDQ6VXNlcjExNjM1MDM=","avatar_url":"https://avatars3.githubusercontent.com/u/1163503?v=4","gravatar_id":"","url":"https://api.github.com/users/ajhalani","html_url":"https://github.com/ajhalani","followers_url":"https://api.github.com/users/ajhalani/followers","following_url":"https://api.github.com/users/ajhalani/following{/other_user}","gists_url":"https://api.github.com/users/ajhalani/gists{/gist_id}","starred_url":"https://api.github.com/users/ajhalani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajhalani/subscriptions","organizations_url":"https://api.github.com/users/ajhalani/orgs","repos_url":"https://api.github.com/users/ajhalani/repos","events_url":"https://api.github.com/users/ajhalani/events{/privacy}","received_events_url":"https://api.github.com/users/ajhalani/received_events","type":"User","site_admin":false},"created_at":"2014-01-13T19:07:28Z","updated_at":"2014-01-13T19:07:28Z","author_association":"NONE","body":"Was the root cause found for this issue? \n\nThough it's possible to use the plain highlighter, it kinda defeats the purpose of configuring fvh. Also it adds complexity to application to dynamically switch between different highlighters. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48350751","html_url":"https://github.com/elastic/elasticsearch/issues/1986#issuecomment-48350751","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1986","id":48350751,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MzUwNzUx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-08T15:10:34Z","updated_at":"2014-07-08T15:10:34Z","author_association":"CONTRIBUTOR","body":"The situation has improved - now only the proximity query with FVH doesn't work correctly.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48351763","html_url":"https://github.com/elastic/elasticsearch/issues/1986#issuecomment-48351763","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1986","id":48351763,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MzUxNzYz","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2014-07-08T15:15:49Z","updated_at":"2014-07-08T15:15:49Z","author_association":"CONTRIBUTOR","body":"For completeness sake the [highlighter](https://github.com/wikimedia/search-highlighter) we use supports phrases properly with slop and reduces span queries to term queries.  I believe its just a tiny step up from the fvh in that regard.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161722058","html_url":"https://github.com/elastic/elasticsearch/issues/1986#issuecomment-161722058","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1986","id":161722058,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTcyMjA1OA==","user":{"login":"vineet85","id":12549304,"node_id":"MDQ6VXNlcjEyNTQ5MzA0","avatar_url":"https://avatars0.githubusercontent.com/u/12549304?v=4","gravatar_id":"","url":"https://api.github.com/users/vineet85","html_url":"https://github.com/vineet85","followers_url":"https://api.github.com/users/vineet85/followers","following_url":"https://api.github.com/users/vineet85/following{/other_user}","gists_url":"https://api.github.com/users/vineet85/gists{/gist_id}","starred_url":"https://api.github.com/users/vineet85/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vineet85/subscriptions","organizations_url":"https://api.github.com/users/vineet85/orgs","repos_url":"https://api.github.com/users/vineet85/repos","events_url":"https://api.github.com/users/vineet85/events{/privacy}","received_events_url":"https://api.github.com/users/vineet85/received_events","type":"User","site_admin":false},"created_at":"2015-12-03T17:22:23Z","updated_at":"2015-12-04T14:59:46Z","author_association":"NONE","body":"@clintongormley - Does the FVH currently support proximity queries? Can you tell me what the latest is on this issue? Thanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161764511","html_url":"https://github.com/elastic/elasticsearch/issues/1986#issuecomment-161764511","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1986","id":161764511,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTc2NDUxMQ==","user":{"login":"vineet85","id":12549304,"node_id":"MDQ6VXNlcjEyNTQ5MzA0","avatar_url":"https://avatars0.githubusercontent.com/u/12549304?v=4","gravatar_id":"","url":"https://api.github.com/users/vineet85","html_url":"https://github.com/vineet85","followers_url":"https://api.github.com/users/vineet85/followers","following_url":"https://api.github.com/users/vineet85/following{/other_user}","gists_url":"https://api.github.com/users/vineet85/gists{/gist_id}","starred_url":"https://api.github.com/users/vineet85/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vineet85/subscriptions","organizations_url":"https://api.github.com/users/vineet85/orgs","repos_url":"https://api.github.com/users/vineet85/repos","events_url":"https://api.github.com/users/vineet85/events{/privacy}","received_events_url":"https://api.github.com/users/vineet85/received_events","type":"User","site_admin":false},"created_at":"2015-12-03T19:54:38Z","updated_at":"2015-12-04T15:01:53Z","author_association":"NONE","body":"The FVH still highlights if we use the ES Query_String_Query\n\n```\n    POST localhost:9200/testIndex/_search\n    {\n       \"query\": {\n       \"query_string\": {\n       \"default_field\": \"fulltext.exact\",\n       \"query\": \"\\\"significant parsing\\\"~4\"\n       }\n   }, \n   \"highlight\": {\n      \"fields\": {\n         \"fulltext.exact\": {\n            \"type\": \"fvh\",\n            \"number_of_fragments\": 0\n         }\n      },\n      \"require_field_match\": true\n   }\n}\n```\n\nHowever it is not supported when using the Span Query\n\n```\nPOST localhost:9200/testIndex/_search\n{\n    \"query\": {\n        \"filtered\": {\n            \"query\": {\n                \"span_near\": {\n                    \"clauses\": [{\n                        \"span_term\": {\n                            \"fulltext.exact\": \"significant\"\n                        }\n                    }, {\n                        \"span_term\": {\n                            \"fulltext.exact\": \"complexity\"\n                        }\n                    }],\n                    \"slop\": 4,\n                    \"in_order\": false\n                }\n            },\n            \"filter\": {\n                \"term\": {\n                    \"documentid\": \"1de7343c6bdd400b936f76782db93065\"\n                }\n            }\n        }\n    },\n    \"highlight\": {\n        \"fields\": {\n            \"fulltext.exact\": {\n                \"matched_fields\": [\"fulltext.exact\"],\n                \"type\": \"fvh\",\n                \"number_of_fragments\": 0\n            }\n        },\n        \"require_field_match\": true\n    }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/258666555","html_url":"https://github.com/elastic/elasticsearch/issues/1986#issuecomment-258666555","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1986","id":258666555,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODY2NjU1NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-06T09:13:52Z","updated_at":"2016-11-06T09:13:52Z","author_association":"CONTRIBUTOR","body":"As of 5.0, the `plain` highlighter works for all cases below, the `fvh` highlighter fails for out of order proximity queries and for all span queries.\n\nUpdated recreation:\n\n```\nPUT /twitter/\n\nPUT /twitter/tweet/_mapping\n{\n  \"properties\": {\n    \"message\": {\n      \"type\": \"text\",\n      \"term_vector\": \"with_positions_offsets\"\n    }\n  }\n}\n\nPUT /twitter/tweet/1\n{\n  \"user\": \"kimchy\",\n  \"post_date\": \"2009-11-15T14:12:12\",\n  \"message\": \"trying out Elastic and Search\"\n}\n\nPUT /twitter/tweet/2\n{\n  \"user\": \"kimchy\",\n  \"post_date\": \"2009-11-15T14:12:12\",\n  \"message\": \"trying out Search and Elastic\"\n}\n\nGET /twitter/tweet/_search\n{\n  \"query\": {\n    \"query_string\": {\n      \"default_field\": \"message\",\n      \"query\": \"\\\"Elastic Search\\\"~4\"\n    }\n  },\n  \"highlight\": {\n    \"fields\": {\n      \"message\": {\n        \"type\": \"fvh\"\n      }\n    }\n  }\n}\n\nPOST /twitter/tweet/_search\n{\n  \"query\": {\n    \"span_near\": {\n      \"clauses\": [\n        {\n          \"span_term\": {\n            \"message\": \"search\"\n          }\n        },\n        {\n          \"span_term\": {\n            \"message\": \"elastic\"\n          }\n        }\n      ],\n      \"slop\": 4,\n      \"in_order\": false\n    }\n  },\n  \"highlight\": {\n    \"fields\": {\n      \"message\": {\n        \"type\": \"fvh\"\n      }\n    }\n  }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/262827250","html_url":"https://github.com/elastic/elasticsearch/issues/1986#issuecomment-262827250","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1986","id":262827250,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjgyNzI1MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-24T18:09:41Z","updated_at":"2016-11-24T18:09:41Z","author_association":"CONTRIBUTOR","body":"Closing in favour of #21621","performed_via_github_app":null}]