{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26761","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26761/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26761/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26761/events","html_url":"https://github.com/elastic/elasticsearch/issues/26761","id":259947724,"node_id":"MDU6SXNzdWUyNTk5NDc3MjQ=","number":26761,"title":"_update_by_query's default size accidentally changed to 1000","user":{"login":"rfraposa","id":5323324,"node_id":"MDQ6VXNlcjUzMjMzMjQ=","avatar_url":"https://avatars1.githubusercontent.com/u/5323324?v=4","gravatar_id":"","url":"https://api.github.com/users/rfraposa","html_url":"https://github.com/rfraposa","followers_url":"https://api.github.com/users/rfraposa/followers","following_url":"https://api.github.com/users/rfraposa/following{/other_user}","gists_url":"https://api.github.com/users/rfraposa/gists{/gist_id}","starred_url":"https://api.github.com/users/rfraposa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rfraposa/subscriptions","organizations_url":"https://api.github.com/users/rfraposa/orgs","repos_url":"https://api.github.com/users/rfraposa/repos","events_url":"https://api.github.com/users/rfraposa/events{/privacy}","received_events_url":"https://api.github.com/users/rfraposa/received_events","type":"User","site_admin":false},"labels":[{"id":145572580,"node_id":"MDU6TGFiZWwxNDU1NzI1ODA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/CRUD","name":":Distributed/CRUD","color":"0e8a16","default":false,"description":"A catch all label for issues around indexing, updating and getting a doc by id. Not search."},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":356863226,"node_id":"MDU6TGFiZWwzNTY4NjMyMjY=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Pioneer%20Program","name":"Pioneer Program","color":"b60205","default":false,"description":null},{"id":699760326,"node_id":"MDU6TGFiZWw2OTk3NjAzMjY=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.0.0-rc1","name":"v6.0.0-rc1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2017-09-22T21:54:19Z","updated_at":"2018-02-13T19:41:33Z","closed_at":"2017-09-25T20:25:28Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Feature request -->\r\n\r\n**Describe the feature**:  `scroll_size` seems to be ignored in my request\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):  6.0.0-beta2\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`): JDK 8\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): Ubuntu\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\n**Steps to reproduce**:\r\n\r\nNo matter what value I set for `scroll_size`, the following request only updates 1,000 documents:\r\n```\r\nPOST crimes/_update_by_query?scroll_size=4000\r\n{\r\n  \"query\" : {\r\n    \"match\": {\r\n      \"area.ward\": \"6\"\r\n    }\r\n  },\r\n  \"script\" : {\r\n    \"source\" : \"ctx._source.area.ward=10\"\r\n  }\r\n}\r\n```\r\nHere is the response I get:\r\n```\r\n{\r\n  \"took\": 112,\r\n  \"timed_out\": false,\r\n  \"total\": 1000,\r\n  \"updated\": 1000,\r\n  \"deleted\": 0,\r\n  \"batches\": 1,\r\n  \"version_conflicts\": 0,\r\n  \"noops\": 0,\r\n  \"retries\": {\r\n    \"bulk\": 0,\r\n    \"search\": 0\r\n  },\r\n  \"throttled_millis\": 0,\r\n  \"requests_per_second\": -1,\r\n  \"throttled_until_millis\": 0,\r\n  \"failures\": []\r\n}\r\n```\r\n\r\nAm I doing something wrong? \r\n\r\n","closed_by":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"performed_via_github_app":null}