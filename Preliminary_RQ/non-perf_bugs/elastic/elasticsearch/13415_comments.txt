[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138851701","html_url":"https://github.com/elastic/elasticsearch/issues/13415#issuecomment-138851701","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13415","id":138851701,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODg1MTcwMQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-09-09T09:20:56Z","updated_at":"2015-09-09T09:20:56Z","author_association":"MEMBER","body":"I don't understand. \n\nEnvironment class uses `org.apache.lucene.util.Constants` which is part of Lucene core.\n\nIn which context are you seeing an error? Can you describe what you are doing?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138852733","html_url":"https://github.com/elastic/elasticsearch/issues/13415#issuecomment-138852733","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13415","id":138852733,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODg1MjczMw==","user":{"login":"fakeh","id":3152827,"node_id":"MDQ6VXNlcjMxNTI4Mjc=","avatar_url":"https://avatars2.githubusercontent.com/u/3152827?v=4","gravatar_id":"","url":"https://api.github.com/users/fakeh","html_url":"https://github.com/fakeh","followers_url":"https://api.github.com/users/fakeh/followers","following_url":"https://api.github.com/users/fakeh/following{/other_user}","gists_url":"https://api.github.com/users/fakeh/gists{/gist_id}","starred_url":"https://api.github.com/users/fakeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fakeh/subscriptions","organizations_url":"https://api.github.com/users/fakeh/orgs","repos_url":"https://api.github.com/users/fakeh/repos","events_url":"https://api.github.com/users/fakeh/events{/privacy}","received_events_url":"https://api.github.com/users/fakeh/received_events","type":"User","site_admin":false},"created_at":"2015-09-09T09:26:47Z","updated_at":"2015-09-09T09:27:12Z","author_association":"NONE","body":"Hi dadoonet, \nelasticsearch-2.0.0-beta1.jar shades most of the packages from org.apache.lucence except util. Since Environment references Constants, the ES jar is insufficient on its own to deploy (so what's the point in shading the Lucene dependencies?).\n\nSpecifically, I'm trying to load the ES Java client in Karaf 4.0.1 (an OSGi container) and am encountering:\n\n```\nCaused by: java.lang.NoClassDefFoundError: Could not initialize class org.elasticsearch.env.Environment\n    at org.elasticsearch.node.internal.InternalSettingsPreparer.prepareSettings(InternalSettingsPreparer.java:97)\n    at org.elasticsearch.node.internal.InternalSettingsPreparer.prepareSettings(InternalSettingsPreparer.java:70)\n    at org.elasticsearch.client.transport.TransportClient$Builder.build(TransportClient.java:114)\n```\n\nI hoped that it was because Environment wasn't able to load the Constants class, which it references statically, but even after providing the util package the class still does not load.\n\nBest, Dan.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138854967","html_url":"https://github.com/elastic/elasticsearch/issues/13415#issuecomment-138854967","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13415","id":138854967,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODg1NDk2Nw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-09-09T09:33:49Z","updated_at":"2015-09-09T09:33:49Z","author_association":"MEMBER","body":"Are you using the shaded version of elasticsearch 2.0.0-beta1? What is exactly your dependency?\n\nNote that we won't provide a shaded version anymore in 2.0.0: https://github.com/elastic/elasticsearch/pull/13252\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138858826","html_url":"https://github.com/elastic/elasticsearch/issues/13415#issuecomment-138858826","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13415","id":138858826,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODg1ODgyNg==","user":{"login":"fakeh","id":3152827,"node_id":"MDQ6VXNlcjMxNTI4Mjc=","avatar_url":"https://avatars2.githubusercontent.com/u/3152827?v=4","gravatar_id":"","url":"https://api.github.com/users/fakeh","html_url":"https://github.com/fakeh","followers_url":"https://api.github.com/users/fakeh/followers","following_url":"https://api.github.com/users/fakeh/following{/other_user}","gists_url":"https://api.github.com/users/fakeh/gists{/gist_id}","starred_url":"https://api.github.com/users/fakeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fakeh/subscriptions","organizations_url":"https://api.github.com/users/fakeh/orgs","repos_url":"https://api.github.com/users/fakeh/repos","events_url":"https://api.github.com/users/fakeh/events{/privacy}","received_events_url":"https://api.github.com/users/fakeh/received_events","type":"User","site_admin":false},"created_at":"2015-09-09T09:46:52Z","updated_at":"2015-09-09T09:46:52Z","author_association":"NONE","body":"I wasn't aware there was an unshaded version. From Maven Central, as per the blog about the beta:\n\n```\n    <dependency>\n        <groupId>org.elasticsearch</groupId>\n        <artifactId>elasticsearch</artifactId>\n        <version>2.0.0-beta1</version>\n    </dependency>\n```\n\nIf you're not shading future releases then this issue shouldn't continue to be a problem :) If I can't figure out this NoClassDefFoundError then I'll make a separate issue.\n\nDo you have some documentation of the dependencies? There's rather a lot of them and when constructing an OSGi environment it can be painful to figure out which are required and which are optional.\n\nPS hopefully the ServiceMix wizards will pick up ES 2.0.0 ASAP!\n\nBest, Dan.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138859461","html_url":"https://github.com/elastic/elasticsearch/issues/13415#issuecomment-138859461","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13415","id":138859461,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODg1OTQ2MQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-09-09T09:49:54Z","updated_at":"2015-09-09T09:49:54Z","author_association":"MEMBER","body":"The version you are using is not the shaded version. So it should work fine. I think you have another issue here.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138860518","html_url":"https://github.com/elastic/elasticsearch/issues/13415#issuecomment-138860518","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13415","id":138860518,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODg2MDUxOA==","user":{"login":"fakeh","id":3152827,"node_id":"MDQ6VXNlcjMxNTI4Mjc=","avatar_url":"https://avatars2.githubusercontent.com/u/3152827?v=4","gravatar_id":"","url":"https://api.github.com/users/fakeh","html_url":"https://github.com/fakeh","followers_url":"https://api.github.com/users/fakeh/followers","following_url":"https://api.github.com/users/fakeh/following{/other_user}","gists_url":"https://api.github.com/users/fakeh/gists{/gist_id}","starred_url":"https://api.github.com/users/fakeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fakeh/subscriptions","organizations_url":"https://api.github.com/users/fakeh/orgs","repos_url":"https://api.github.com/users/fakeh/repos","events_url":"https://api.github.com/users/fakeh/events{/privacy}","received_events_url":"https://api.github.com/users/fakeh/received_events","type":"User","site_admin":false},"created_at":"2015-09-09T09:55:33Z","updated_at":"2015-09-09T09:55:33Z","author_association":"NONE","body":"Here's the jar in central: http://search.maven.org/remotecontent?filepath=org/elasticsearch/elasticsearch/2.0.0-beta1/elasticsearch-2.0.0-beta1.jar \n\nIt's got org.apache.lucene (except util) and joda.time packages in it.\n\nDan\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138861572","html_url":"https://github.com/elastic/elasticsearch/issues/13415#issuecomment-138861572","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13415","id":138861572,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODg2MTU3Mg==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-09-09T10:01:34Z","updated_at":"2015-09-09T10:01:34Z","author_association":"MEMBER","body":"I understand now what you are saying. This won't change in 2.0.0.\n\nYes we have specific versions of some Lucene classes in our repository.\nBut you still need to add Lucene and other dependencies by yourself.\n\nIf you are using maven, depending on elasticsearch-2.0.0-beta1 should pull lucene-core where the class you are looking for is located.\n\nI think your classpath is incorrect here.\n\nI don't see that as an issue on our side.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138864768","html_url":"https://github.com/elastic/elasticsearch/issues/13415#issuecomment-138864768","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13415","id":138864768,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODg2NDc2OA==","user":{"login":"fakeh","id":3152827,"node_id":"MDQ6VXNlcjMxNTI4Mjc=","avatar_url":"https://avatars2.githubusercontent.com/u/3152827?v=4","gravatar_id":"","url":"https://api.github.com/users/fakeh","html_url":"https://github.com/fakeh","followers_url":"https://api.github.com/users/fakeh/followers","following_url":"https://api.github.com/users/fakeh/following{/other_user}","gists_url":"https://api.github.com/users/fakeh/gists{/gist_id}","starred_url":"https://api.github.com/users/fakeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fakeh/subscriptions","organizations_url":"https://api.github.com/users/fakeh/orgs","repos_url":"https://api.github.com/users/fakeh/repos","events_url":"https://api.github.com/users/fakeh/events{/privacy}","received_events_url":"https://api.github.com/users/fakeh/received_events","type":"User","site_admin":false},"created_at":"2015-09-09T10:13:35Z","updated_at":"2015-09-09T10:13:35Z","author_association":"NONE","body":"As I said initially, I'm not sure of your intentions regarding bundling these packages. I wonder why it's beneficial to have specific packages included if the resultant jar is not then independent from requiring the source jars in addition?\n\n`I think your classpath is incorrect here.`\n\nAbsolutely. But I do think that Elastic are in the best position to help issues when moving from Maven dependency resolution to other systems (production, CI, etc).\n\nPS Is there some other meaning of shading packages, hence our confusion?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138867415","html_url":"https://github.com/elastic/elasticsearch/issues/13415#issuecomment-138867415","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13415","id":138867415,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODg2NzQxNQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-09-09T10:29:39Z","updated_at":"2015-09-09T10:29:39Z","author_association":"MEMBER","body":"> PS Is there some other meaning of shading packages, hence our confusion?\n\nWe used to shade some dependencies such as JODA, guava, jackson... and relocate all packages.\nThat's what we call \"shading\".\n\n> But I do think that Elastic are in the best position to help issues when moving from Maven dependency resolution to other systems (production, CI, etc).\n\nI'd like to understand what the fix would look like for you. Is there anything wrong with OSGi if a project has classes located either in org.apache.lucene and ore.elasticsearch?\nDo we need to add any META information? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138875107","html_url":"https://github.com/elastic/elasticsearch/issues/13415#issuecomment-138875107","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13415","id":138875107,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODg3NTEwNw==","user":{"login":"fakeh","id":3152827,"node_id":"MDQ6VXNlcjMxNTI4Mjc=","avatar_url":"https://avatars2.githubusercontent.com/u/3152827?v=4","gravatar_id":"","url":"https://api.github.com/users/fakeh","html_url":"https://github.com/fakeh","followers_url":"https://api.github.com/users/fakeh/followers","following_url":"https://api.github.com/users/fakeh/following{/other_user}","gists_url":"https://api.github.com/users/fakeh/gists{/gist_id}","starred_url":"https://api.github.com/users/fakeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fakeh/subscriptions","organizations_url":"https://api.github.com/users/fakeh/orgs","repos_url":"https://api.github.com/users/fakeh/repos","events_url":"https://api.github.com/users/fakeh/events{/privacy}","received_events_url":"https://api.github.com/users/fakeh/received_events","type":"User","site_admin":false},"created_at":"2015-09-09T10:55:03Z","updated_at":"2015-09-09T10:55:03Z","author_association":"NONE","body":"> I'd like to understand what the fix would look like for you.\n\nIdeally, ES would be built with OSGi manifest headers from source! This isn't terribly hard as part of the bundle's release cycle but does require some understanding of tooling and some testing, but can be burdensome for us third parties to keep up with releases, reorganising the jars and make some assumptions and guesses about the original intention of the library's organisation. ServiceMix has been doing this for you for [some time](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.apache.servicemix.bundles%22%20AND%20a%3A%22org.apache.servicemix.bundles.elasticsearch%22) and looking at their POMs would be a great place to start if you were to take this route.\n\nIn lieu of OSGi support at source, I would recommend not including third party libraries within your jars at all giving us the flexibility to supply our own versions via OSGi resolution.\n\n> Is there anything wrong with OSGi if a project has classes located either in org.apache.lucene and ore.elasticsearch?\n\nWhilst it is not an insurmountable problem, having resolution of some org.apache.lucene packages within the jar and some without just seems conceptually weird given that the one(s?) without are still required.\n\nMore generally, keeping the dependencies minimal would be appreciated, perhaps by splitting ES into sub-functionalities?\n\nI'm in a rush to be elsewhere so this isn't a super-informative post, but if you're interested in more I can try to be of help again later.\n\nBest, Dan.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138895176","html_url":"https://github.com/elastic/elasticsearch/issues/13415#issuecomment-138895176","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13415","id":138895176,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODg5NTE3Ng==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-09-09T12:32:21Z","updated_at":"2015-09-09T12:32:21Z","author_association":"CONTRIBUTOR","body":"-1 to OSGI. I don't even need to explain why.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138908408","html_url":"https://github.com/elastic/elasticsearch/issues/13415#issuecomment-138908408","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13415","id":138908408,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODkwODQwOA==","user":{"login":"fakeh","id":3152827,"node_id":"MDQ6VXNlcjMxNTI4Mjc=","avatar_url":"https://avatars2.githubusercontent.com/u/3152827?v=4","gravatar_id":"","url":"https://api.github.com/users/fakeh","html_url":"https://github.com/fakeh","followers_url":"https://api.github.com/users/fakeh/followers","following_url":"https://api.github.com/users/fakeh/following{/other_user}","gists_url":"https://api.github.com/users/fakeh/gists{/gist_id}","starred_url":"https://api.github.com/users/fakeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fakeh/subscriptions","organizations_url":"https://api.github.com/users/fakeh/orgs","repos_url":"https://api.github.com/users/fakeh/repos","events_url":"https://api.github.com/users/fakeh/events{/privacy}","received_events_url":"https://api.github.com/users/fakeh/received_events","type":"User","site_admin":false},"created_at":"2015-09-09T13:26:38Z","updated_at":"2015-09-09T13:26:43Z","author_association":"NONE","body":"> -1 to OSGI. I don't even need to explain why.\n\nI think this issue has become a bit side-tracked with OSGi's involvement. The more general question, I think, is whether to include lucene's .util or not.\nI would, as above, love to see ES distribute OSGi compatible libraries, but it wasn't the original intent of the issue.\n\nDan.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138917313","html_url":"https://github.com/elastic/elasticsearch/issues/13415#issuecomment-138917313","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13415","id":138917313,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODkxNzMxMw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-09-09T13:58:04Z","updated_at":"2015-09-09T13:58:04Z","author_association":"MEMBER","body":"lucene .util package is available in lucene core lib as far as I know. You should add it as a dependency in your project.\n\nIf it's not possible, then I think you have no other choice to shade yourself elasticsearch and its dependencies within the same final jar as it was done by ServiceMix if I read correctly their pom file.\n\nI documented in the issue (https://github.com/elastic/elasticsearch/pull/13252) how to do that.\n\nBack to the original question: we are not going to include lucene .util in elasticsearch jar.\n\nClosing. But feel free to add other comments here or on discuss.elastic.co where other members of the community could also share other solutions/ideas around that.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138933523","html_url":"https://github.com/elastic/elasticsearch/issues/13415#issuecomment-138933523","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13415","id":138933523,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODkzMzUyMw==","user":{"login":"fakeh","id":3152827,"node_id":"MDQ6VXNlcjMxNTI4Mjc=","avatar_url":"https://avatars2.githubusercontent.com/u/3152827?v=4","gravatar_id":"","url":"https://api.github.com/users/fakeh","html_url":"https://github.com/fakeh","followers_url":"https://api.github.com/users/fakeh/followers","following_url":"https://api.github.com/users/fakeh/following{/other_user}","gists_url":"https://api.github.com/users/fakeh/gists{/gist_id}","starred_url":"https://api.github.com/users/fakeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fakeh/subscriptions","organizations_url":"https://api.github.com/users/fakeh/orgs","repos_url":"https://api.github.com/users/fakeh/repos","events_url":"https://api.github.com/users/fakeh/events{/privacy}","received_events_url":"https://api.github.com/users/fakeh/received_events","type":"User","site_admin":false},"created_at":"2015-09-09T14:45:04Z","updated_at":"2015-09-09T14:45:04Z","author_association":"NONE","body":"Having explored more, I see that you're not selecting packages to include, but using the class path to allow you to override individual classes in Lucene and in Joda.\n\nAt least that's that question answered.\n","performed_via_github_app":null}]