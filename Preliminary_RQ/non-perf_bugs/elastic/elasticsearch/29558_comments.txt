[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/381970727","html_url":"https://github.com/elastic/elasticsearch/issues/29558#issuecomment-381970727","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29558","id":381970727,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MTk3MDcyNw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-17T12:15:55Z","updated_at":"2018-04-17T12:15:55Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/381984399","html_url":"https://github.com/elastic/elasticsearch/issues/29558#issuecomment-381984399","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29558","id":381984399,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MTk4NDM5OQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2018-04-17T13:03:33Z","updated_at":"2018-04-17T13:03:33Z","author_association":"MEMBER","body":"I had a look, saw that there's a couple more recent failures that are similar. But it doesn't repro for me and I can't quite see at first glance what the problem could be, nor can I reproduce it when running multiple iterations of this test.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384938279","html_url":"https://github.com/elastic/elasticsearch/issues/29558#issuecomment-384938279","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29558","id":384938279,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDkzODI3OQ==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2018-04-27T11:01:48Z","updated_at":"2018-04-27T11:11:27Z","author_association":"CONTRIBUTOR","body":"Another example in https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.3+matrix-java-periodic/ES_BUILD_JAVA=java10,ES_RUNTIME_JAVA=java10,nodes=linux/5/console\r\n\r\n\t Suite: org.elasticsearch.client.RestClientSingleHostIntegTests\r\n\t ERROR   0.02s J0 | RestClientSingleHostIntegTests.testEncodeParams &lt;&lt;&lt; FAILURES!\r\n\t    > Throwable #1: java.io.IOException: Connection reset by peer\r\n\t    > \tat __randomizedtesting.SeedInfo.seed([8B1467B354CAACAB:353358761BB80C2A]:0)\r\n\t    > \tat org.elasticsearch.client.RestClient$SyncResponseListener.get(RestClient.java:728)\r\n\t    > \tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:235)\r\n\t    > \tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:198)\r\n\t    > \tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:177)\r\n\t    > \tat org.elasticsearch.client.RestClientSingleHostIntegTests.testEncodeParams(RestClientSingleHostIntegTests.java:221)\r\n\t    > \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t    > \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\t    > \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t    > \tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\t    > \tat java.base/java.lang.Thread.run(Thread.java:844)\r\n\t    > Caused by: java.io.IOException: Connection reset by peer\r\n\t    > \tat java.base/sun.nio.ch.FileDispatcherImpl.read0(Native Method)\r\n\t    > \tat java.base/sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39)\r\n\t    > \tat java.base/sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:283)\r\n\t    > \tat java.base/sun.nio.ch.IOUtil.read(IOUtil.java:250)\r\n\r\nAgain no reproduce line in logs and would not reproduce locally.\r\nMock HTTP server closing the connection?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385520201","html_url":"https://github.com/elastic/elasticsearch/issues/29558#issuecomment-385520201","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29558","id":385520201,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTUyMDIwMQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2018-04-30T20:34:02Z","updated_at":"2018-04-30T20:34:02Z","author_association":"MEMBER","body":"another one: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+matrix-java-periodic/ES_BUILD_JAVA=java10,ES_RUNTIME_JAVA=java10,nodes=linux/24/console\r\n\r\n```\r\n16:55:54 Suite: org.elasticsearch.client.RestClientSingleHostIntegTests\r\n16:55:54 ERROR   0.01s J0 | RestClientSingleHostIntegTests.testHeaders <<< FAILURES!\r\n16:55:54    > Throwable #1: java.io.IOException: Connection reset by peer\r\n16:55:54    > \tat __randomizedtesting.SeedInfo.seed([B67B0BD19953E74F:7CAB3B8E1061062F]:0)\r\n16:55:54    > \tat org.elasticsearch.client.RestClient$SyncResponseListener.get(RestClient.java:728)\r\n16:55:54    > \tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:235)\r\n16:55:54    > \tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:198)\r\n16:55:54    > \tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:177)\r\n16:55:54    > \tat org.elasticsearch.client.RestClientSingleHostIntegTests.testHeaders(RestClientSingleHostIntegTests.java:177)\r\n16:55:54    > \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n16:55:54    > \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n16:55:54    > \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n16:55:54    > \tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n16:55:54    > \tat java.base/java.lang.Thread.run(Thread.java:844)\r\n16:55:54    > Caused by: java.io.IOException: Connection reset by peer\r\n16:55:54    > \tat java.base/sun.nio.ch.FileDispatcherImpl.read0(Native Method)\r\n16:55:54    > \tat java.base/sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39)\r\n16:55:54    > \tat java.base/sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:283)\r\n16:55:54    > \tat java.base/sun.nio.ch.IOUtil.read(IOUtil.java:250)\r\n```\r\nit looks like the http server the test sets up crashed, no info as to why (I logged onto the server and couldn't find anything telling in the build folder)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385956941","html_url":"https://github.com/elastic/elasticsearch/issues/29558#issuecomment-385956941","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29558","id":385956941,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTk1Njk0MQ==","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2018-05-02T12:12:41Z","updated_at":"2018-05-02T12:15:03Z","author_association":"MEMBER","body":"another one here https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.3+multijob-unix-compatibility/os=amazon/20/console\r\n\r\n```\r\nSuite: org.elasticsearch.client.RestClientSingleHostIntegTests\r\nERROR   0.01s J0 | RestClientSingleHostIntegTests.testDeleteWithBody <<< FAILURES!\r\n   > Throwable #1: java.io.IOException: Connection reset by peer\r\n   >    at __randomizedtesting.SeedInfo.seed([67C3230DCE755C5:8B6D096CBE2B9D58]:0)\r\n   >    at org.elasticsearch.client.RestClient$SyncResponseListener.get(RestClient.java:728)\r\n   >    at org.elasticsearch.client.RestClient.performRequest(RestClient.java:235)\r\n   >    at org.elasticsearch.client.RestClient.performRequest(RestClient.java:198)\r\n   >    at org.elasticsearch.client.RestClientSingleHostIntegTests.bodyTest(RestClientSingleHostIntegTests.java:321)\r\n   >    at org.elasticsearch.client.RestClientSingleHostIntegTests.bodyTest(RestClientSingleHostIntegTests.java:312)\r\n   >    at org.elasticsearch.client.RestClientSingleHostIntegTests.testDeleteWithBody(RestClientSingleHostIntegTests.java:207)\r\n   >    at java.lang.Thread.run(Thread.java:748)\r\n   > Caused by: java.io.IOException: Connection reset by peer\r\n   >    at sun.nio.ch.FileDispatcherImpl.read0(Native Method)\r\n   >    at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39)\r\n   >    at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)\r\n   >    at sun.nio.ch.IOUtil.read(IOUtil.java:197)\r\n   >    at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)\r\n   >    at org.apache.http.impl.nio.reactor.SessionInputBufferImpl.fill(SessionInputBufferImpl.java:204)\r\n   >    at org.apache.http.impl.nio.codecs.AbstractMessageParser.fillBuffer(AbstractMessageParser.java:136)\r\n   >    at org.apache.http.impl.nio.DefaultNHttpClientConnection.consumeInput(DefaultNHttpClientConnection.java:241)\r\n   >    at org.apache.http.impl.nio.client.InternalIODispatch.onInputReady(InternalIODispatch.java:81)\r\n   >    at org.apache.http.impl.nio.client.InternalIODispatch.onInputReady(InternalIODispatch.java:39)\r\n   >    at org.apache.http.impl.nio.reactor.AbstractIODispatch.inputReady(AbstractIODispatch.java:114)\r\n   >    at org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:162)\r\n   >    at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:337)\r\n   >    at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:315)\r\n   >    at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:276)\r\n   >    at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)\r\n   >    at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:588)\r\n   >    ... 1 more\r\n```\r\n\r\nWild assumption: I do somewhat remember that the default HttpServer does not have an executor configured (meaning it does not use one and uses the thread it used to bind to the port), so if anyone else connects to that port, I dont know how the HttpServer reacts.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387207676","html_url":"https://github.com/elastic/elasticsearch/issues/29558#issuecomment-387207676","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29558","id":387207676,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzIwNzY3Ng==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2018-05-07T21:10:35Z","updated_at":"2018-05-07T21:10:35Z","author_association":"CONTRIBUTOR","body":"Another one: (https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+multijob-unix-compatibility/os=debian/1039/consoleFull)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387924952","html_url":"https://github.com/elastic/elasticsearch/issues/29558#issuecomment-387924952","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29558","id":387924952,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzkyNDk1Mg==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2018-05-10T01:42:40Z","updated_at":"2018-05-10T02:18:08Z","author_association":"CONTRIBUTOR","body":"this has failed again:\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility/os=oraclelinux/2422/console\r\n\r\nI cannot reproduce, but here would be the command:\r\n\r\n```\r\n./gradlew :client:rest:test   -Dtests.seed=D840989E2D6365FD   -Dtests.class=org.elasticsearch.client.RestClientSingleHostIntegTests   -Dtests.method=\"testDeleteWithBody\"\r\n```\r\n\r\nIt has failed 12 times in the last 30 days. I am AwaitsFix'ing it for `master` and `6.x`.\r\nIt has also failed on `6.3`, but I am not sure whether it warrants muting it there, if others disagree\r\nI'll add that too\r\n\r\nUPDATE: nevermind. cannot use AwaitsFix here since the client tests don't have the lucene test framework. The leading theory is that this is an infra issue, but not clear why\r\n\r\nUPDATE2: I do not believe this has to do with any specific one of these test methods, but the suite in general. testDeleteWithBody,testHeaders,testEncodeParams,testGetWithBody have all failed on CI recently. @jasontedor (thanks!) pointed out that one suspicious test to blame may be `testManyAsyncRequests`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/388507895","html_url":"https://github.com/elastic/elasticsearch/issues/29558#issuecomment-388507895","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29558","id":388507895,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODUwNzg5NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-05-11T23:14:50Z","updated_at":"2018-05-11T23:14:50Z","author_association":"MEMBER","body":"This was failing many times per day, and now since #30504 it has not failed at all. This increases my level of hope that we have solved this one.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/389242070","html_url":"https://github.com/elastic/elasticsearch/issues/29558#issuecomment-389242070","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29558","id":389242070,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTI0MjA3MA==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2018-05-15T17:07:39Z","updated_at":"2018-05-15T17:07:39Z","author_association":"CONTRIBUTOR","body":"thanks @jasontedor, I've taken another look and it has continued passing since. I will go ahead and close this.\r\n\r\n<img width=\"566\" alt=\"screen shot 2018-05-15 at 10 07 13 am\" src=\"https://user-images.githubusercontent.com/388837/40072166-c61109b0-5827-11e8-8599-8c5e9c967cd3.png\">\r\n","performed_via_github_app":null}]