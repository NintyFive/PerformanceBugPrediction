{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14322","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14322/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14322/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14322/events","html_url":"https://github.com/elastic/elasticsearch/issues/14322","id":113698892,"node_id":"MDU6SXNzdWUxMTM2OTg4OTI=","number":14322,"title":"Strange limits when using Java API (array of objects) (SOLVED)","user":{"login":"ane18s","id":15350989,"node_id":"MDQ6VXNlcjE1MzUwOTg5","avatar_url":"https://avatars2.githubusercontent.com/u/15350989?v=4","gravatar_id":"","url":"https://api.github.com/users/ane18s","html_url":"https://github.com/ane18s","followers_url":"https://api.github.com/users/ane18s/followers","following_url":"https://api.github.com/users/ane18s/following{/other_user}","gists_url":"https://api.github.com/users/ane18s/gists{/gist_id}","starred_url":"https://api.github.com/users/ane18s/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ane18s/subscriptions","organizations_url":"https://api.github.com/users/ane18s/orgs","repos_url":"https://api.github.com/users/ane18s/repos","events_url":"https://api.github.com/users/ane18s/events{/privacy}","received_events_url":"https://api.github.com/users/ane18s/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"assignees":[{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2015-10-27T21:58:11Z","updated_at":"2015-10-28T22:27:44Z","closed_at":"2015-10-28T22:27:44Z","author_association":"NONE","active_lock_reason":null,"body":"It seems that there is some kind of limit in ES when creating an array of objects. \n\nI created a small example which you can easily try. Just don't forget to set the correct cluster name.\n\nimport org.elasticsearch.ElasticsearchException;\nimport org.elasticsearch.action.admin.indices.create.CreateIndexRequest;\nimport org.elasticsearch.action.admin.indices.delete.DeleteIndexRequest;\nimport org.elasticsearch.client.Client;\nimport org.elasticsearch.client.transport.TransportClient;\nimport org.elasticsearch.common.settings.ImmutableSettings;\nimport org.elasticsearch.common.settings.Settings;\nimport org.elasticsearch.common.transport.InetSocketTransportAddress;\nimport org.elasticsearch.common.xcontent.XContentBuilder;\nimport org.elasticsearch.common.xcontent.XContentFactory;\n\npublic class ESTests {\n\n```\npublic static final String INDEX = \"tempindex\";\npublic static final int SIZE1 = 3;\npublic static final int SIZE2 = 3;\n\npublic static void main(String[] args) throws Exception {\n\n    Client client = new TransportClient(ImmutableSettings.builder().put(\"cluster.name\", \"ncluster\").build())\n            .addTransportAddress(new InetSocketTransportAddress(\"localhost\", 9300));\n    System.out.println(\"Client initialized.\");\n    try {\n        //first delete the old index, if exists.\n        client.admin().indices().delete(new DeleteIndexRequest(INDEX)).actionGet();\n        System.out.println(\"Index deleted.\");\n    } catch (ElasticsearchException e) {\n        //ignore\n    }\n\n    Settings settings = ImmutableSettings.settingsBuilder().build();\n    System.out.println(\"Settings built.\");\n    //Then create a new-clean index.\n    client.admin().indices().create(new CreateIndexRequest(INDEX, settings)).actionGet();\n    System.out.println(\"Index created.\");\n\n    XContentBuilder cb = XContentFactory.jsonBuilder();\n    int id = 1;\n    cb.startObject();\n    cb.field(\"name\", \"test document\");\n\n    {\n\n\n        cb.startArray(\"testArray\");\n        String str = \"\";\n        for(int i = 0; i < SIZE1; i++) str += \"0\";\n\n        for(int i = 0; i < SIZE2; i++) {\n            cb.startObject();\n            cb.field(\"counter\", i);\n            cb.field(\"str\", str);\n            cb.endObject();\n        }\n        cb.endArray();\n\n    }\n\n\n    cb.endObject();\n\n    client.prepareIndex(INDEX, \"document\", Integer.toString(id)).setSource(cb.string()).execute();\n\n}\n```\n\n}\n\nWhen I change the constants SIZE1 and SIZE2, to values 100 and 1000 respectively, the document is not being created! Though, you might need to try bigger numbers on your pc.\n\nTo retrieve the document, I use the Sense plugin for Chrome and the following command: \nPOST /tempindex/document/_search?pretty=1\n{\n     \"query\" : {\n        \"match_all\" : {}\n    }\n}\n\nI have posted a similar question here: https://discuss.elastic.co/t/strange-limits-when-using-java-api/32914 but nobody answered so far.\n\nI am under a deadline so you reply soon, it will help me a lot.\n\nThanks!\n","closed_by":{"login":"ane18s","id":15350989,"node_id":"MDQ6VXNlcjE1MzUwOTg5","avatar_url":"https://avatars2.githubusercontent.com/u/15350989?v=4","gravatar_id":"","url":"https://api.github.com/users/ane18s","html_url":"https://github.com/ane18s","followers_url":"https://api.github.com/users/ane18s/followers","following_url":"https://api.github.com/users/ane18s/following{/other_user}","gists_url":"https://api.github.com/users/ane18s/gists{/gist_id}","starred_url":"https://api.github.com/users/ane18s/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ane18s/subscriptions","organizations_url":"https://api.github.com/users/ane18s/orgs","repos_url":"https://api.github.com/users/ane18s/repos","events_url":"https://api.github.com/users/ane18s/events{/privacy}","received_events_url":"https://api.github.com/users/ane18s/received_events","type":"User","site_admin":false},"performed_via_github_app":null}