[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/206794076","html_url":"https://github.com/elastic/elasticsearch/issues/17572#issuecomment-206794076","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17572","id":206794076,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjc5NDA3Ng==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-04-07T10:01:47Z","updated_at":"2016-04-07T10:01:47Z","author_association":"MEMBER","body":"@andremrezende Thank you for reporting this.\nIs this something you can reproduce with a Java test?\n\nCould you share the full code?\n\nAsking that because IMO this is not supposed to happen.\nThe `client` is not aware that the configuration on the server has changed. Or may be you are using a NodeClient which could potentially explain this?\n\nSo any information you could add would help a lot.\n\nAnd BTW, are you seeing that with elasticsearch 2.3? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/206816593","html_url":"https://github.com/elastic/elasticsearch/issues/17572#issuecomment-206816593","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17572","id":206816593,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjgxNjU5Mw==","user":{"login":"andremrezende","id":4062447,"node_id":"MDQ6VXNlcjQwNjI0NDc=","avatar_url":"https://avatars3.githubusercontent.com/u/4062447?v=4","gravatar_id":"","url":"https://api.github.com/users/andremrezende","html_url":"https://github.com/andremrezende","followers_url":"https://api.github.com/users/andremrezende/followers","following_url":"https://api.github.com/users/andremrezende/following{/other_user}","gists_url":"https://api.github.com/users/andremrezende/gists{/gist_id}","starred_url":"https://api.github.com/users/andremrezende/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andremrezende/subscriptions","organizations_url":"https://api.github.com/users/andremrezende/orgs","repos_url":"https://api.github.com/users/andremrezende/repos","events_url":"https://api.github.com/users/andremrezende/events{/privacy}","received_events_url":"https://api.github.com/users/andremrezende/received_events","type":"User","site_admin":false},"created_at":"2016-04-07T11:03:09Z","updated_at":"2016-04-07T11:52:19Z","author_association":"NONE","body":"The method to add alias is:\n\n```\n private void addAlias(final IndicesAdminClient indices, final String indexName, long cdCatalog) throws DBRElasticsearchException {\n    IndicesAliasesResponse aliasReponse = null;\n    try {\n        //Removes the alias from the old index at the same time as we add it to the new index. The change needs to be atomic.\n        if(lastIndexName!=null && !\"\".equals(lastIndexName)) {\n            aliasReponse = indices.prepareAliases().removeAlias(lastIndexName, ALIAS.PRODUCTS.toString(cdCatalog)).addAlias(indexName, ALIAS.PRODUCTS.toString(cdCatalog)).execute().actionGet();\n            //indices.prepareAliases().removeAlias(lastIndexName, ALIAS.PRODUCTS.toString(cdCatalog)).execute();\n        } else {\n            aliasReponse = indices.prepareAliases().addAlias(indexName, ALIAS.PRODUCTS.toString(cdCatalog)).execute().actionGet();\n        }\n        if (aliasReponse!=null && !aliasReponse.isAcknowledged()) {\n            throw new DBRElasticsearchException(\"Alias: %s error to create: \" + ALIAS.PRODUCTS.toString(cdCatalog));\n        }\n    } catch (InvalidAliasNameException e) {\n             ...\n    }\n}\n```\n\nThe indices parameter is loading on constructor method and shared with other methods.\n\nThanks in advanced,\nAndr√© Rezende\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/206818369","html_url":"https://github.com/elastic/elasticsearch/issues/17572#issuecomment-206818369","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17572","id":206818369,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjgxODM2OQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-04-07T11:05:34Z","updated_at":"2016-04-07T11:05:34Z","author_association":"MEMBER","body":"What kind of client are you using?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/206818921","html_url":"https://github.com/elastic/elasticsearch/issues/17572#issuecomment-206818921","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17572","id":206818921,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjgxODkyMQ==","user":{"login":"andremrezende","id":4062447,"node_id":"MDQ6VXNlcjQwNjI0NDc=","avatar_url":"https://avatars3.githubusercontent.com/u/4062447?v=4","gravatar_id":"","url":"https://api.github.com/users/andremrezende","html_url":"https://github.com/andremrezende","followers_url":"https://api.github.com/users/andremrezende/followers","following_url":"https://api.github.com/users/andremrezende/following{/other_user}","gists_url":"https://api.github.com/users/andremrezende/gists{/gist_id}","starred_url":"https://api.github.com/users/andremrezende/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andremrezende/subscriptions","organizations_url":"https://api.github.com/users/andremrezende/orgs","repos_url":"https://api.github.com/users/andremrezende/repos","events_url":"https://api.github.com/users/andremrezende/events{/privacy}","received_events_url":"https://api.github.com/users/andremrezende/received_events","type":"User","site_admin":false},"created_at":"2016-04-07T11:06:18Z","updated_at":"2016-04-07T11:09:47Z","author_association":"NONE","body":"The property type is: IndicesAdminClient, the java lib is on 1.7.3\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/206828123","html_url":"https://github.com/elastic/elasticsearch/issues/17572#issuecomment-206828123","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17572","id":206828123,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjgyODEyMw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-04-07T11:41:17Z","updated_at":"2016-04-07T11:41:17Z","author_association":"MEMBER","body":"I might be unclear.\n\nHow do you build this client please?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/206830284","html_url":"https://github.com/elastic/elasticsearch/issues/17572#issuecomment-206830284","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17572","id":206830284,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjgzMDI4NA==","user":{"login":"andremrezende","id":4062447,"node_id":"MDQ6VXNlcjQwNjI0NDc=","avatar_url":"https://avatars3.githubusercontent.com/u/4062447?v=4","gravatar_id":"","url":"https://api.github.com/users/andremrezende","html_url":"https://github.com/andremrezende","followers_url":"https://api.github.com/users/andremrezende/followers","following_url":"https://api.github.com/users/andremrezende/following{/other_user}","gists_url":"https://api.github.com/users/andremrezende/gists{/gist_id}","starred_url":"https://api.github.com/users/andremrezende/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andremrezende/subscriptions","organizations_url":"https://api.github.com/users/andremrezende/orgs","repos_url":"https://api.github.com/users/andremrezende/repos","events_url":"https://api.github.com/users/andremrezende/events{/privacy}","received_events_url":"https://api.github.com/users/andremrezende/received_events","type":"User","site_admin":false},"created_at":"2016-04-07T11:48:51Z","updated_at":"2016-04-07T11:52:39Z","author_association":"NONE","body":"```\n        Settings settings = ImmutableSettings.settingsBuilder()\n                    .put(\"cluster.name\", prop.getProperty(\"clusetername\"))\n                    .put(\"client.transport.ping_timeout\", \"100s\")\n                    .put(\"client.transport.sniff\", true)\n                    .put(\"discovery.zen.ping.multicast.enabled\", false)\n                    .put(\"discovery.zen.ping.unicast.enabled\", true)\n                    .put(\"discovery.zen.multicast.enabled\", false)\n                    .put(\"discovery.zen.unicast.enabled\", true).build();\n       client = new TransportClient(settings);\n       client.addTransportAddress(new InetSocketTransportAddress(\n                        'IP_ADDRESS', 9300));\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/206833936","html_url":"https://github.com/elastic/elasticsearch/issues/17572#issuecomment-206833936","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17572","id":206833936,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjgzMzkzNg==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-04-07T11:57:57Z","updated_at":"2016-04-07T11:57:57Z","author_association":"MEMBER","body":"Ok. So it's a `TransportClient`. So I don't understand how this can happen.\n\nAre you able to reproduce this in a test case?\nAlso, can you reproduce with 2.x version?\n\nAsking that because lot of changes have been done in the meantime in 2.x series. For example #11930 might fix what you described.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/206839352","html_url":"https://github.com/elastic/elasticsearch/issues/17572#issuecomment-206839352","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17572","id":206839352,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjgzOTM1Mg==","user":{"login":"andremrezende","id":4062447,"node_id":"MDQ6VXNlcjQwNjI0NDc=","avatar_url":"https://avatars3.githubusercontent.com/u/4062447?v=4","gravatar_id":"","url":"https://api.github.com/users/andremrezende","html_url":"https://github.com/andremrezende","followers_url":"https://api.github.com/users/andremrezende/followers","following_url":"https://api.github.com/users/andremrezende/following{/other_user}","gists_url":"https://api.github.com/users/andremrezende/gists{/gist_id}","starred_url":"https://api.github.com/users/andremrezende/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andremrezende/subscriptions","organizations_url":"https://api.github.com/users/andremrezende/orgs","repos_url":"https://api.github.com/users/andremrezende/repos","events_url":"https://api.github.com/users/andremrezende/events{/privacy}","received_events_url":"https://api.github.com/users/andremrezende/received_events","type":"User","site_admin":false},"created_at":"2016-04-07T12:06:02Z","updated_at":"2016-04-07T12:06:02Z","author_association":"NONE","body":"So, I tried to reproduce it using a test case, but I was not able to get exceptions, just on prodction enviroment. :(\nI did NOT upgrade my ES to 2 because the java api lib is different, and I must change the source code.\nI would like to see any document or reference about this upgrade, change the ES server is easier, but the ES client I don¬¥t think so.\n\nthanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/206929922","html_url":"https://github.com/elastic/elasticsearch/issues/17572#issuecomment-206929922","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17572","id":206929922,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjkyOTkyMg==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-04-07T14:24:33Z","updated_at":"2016-04-07T14:24:33Z","author_association":"MEMBER","body":"> change the ES server is easier\n\nWell. It depends. You will have to check what the migration plugin says and also go through all the braking changes.\n\n> but the ES client I don¬¥t think so.\n\nYes and no. It depends on the result of what I just said ^^^ \n\n> So, I tried to reproduce it using a test case, but I was not able to get exceptions, just on prodction enviroment. :(\n\nMay be you are doing things a bit differently than in your use case?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/206952065","html_url":"https://github.com/elastic/elasticsearch/issues/17572#issuecomment-206952065","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17572","id":206952065,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjk1MjA2NQ==","user":{"login":"andremrezende","id":4062447,"node_id":"MDQ6VXNlcjQwNjI0NDc=","avatar_url":"https://avatars3.githubusercontent.com/u/4062447?v=4","gravatar_id":"","url":"https://api.github.com/users/andremrezende","html_url":"https://github.com/andremrezende","followers_url":"https://api.github.com/users/andremrezende/followers","following_url":"https://api.github.com/users/andremrezende/following{/other_user}","gists_url":"https://api.github.com/users/andremrezende/gists{/gist_id}","starred_url":"https://api.github.com/users/andremrezende/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andremrezende/subscriptions","organizations_url":"https://api.github.com/users/andremrezende/orgs","repos_url":"https://api.github.com/users/andremrezende/repos","events_url":"https://api.github.com/users/andremrezende/events{/privacy}","received_events_url":"https://api.github.com/users/andremrezende/received_events","type":"User","site_admin":false},"created_at":"2016-04-07T15:25:21Z","updated_at":"2016-04-07T15:25:21Z","author_association":"NONE","body":"There are 2 systems, an ERP to update data in ES and another system to \"consume\" data. The exception occurs on consumer when the ERP is removing and adding alias on the same time.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/229575654","html_url":"https://github.com/elastic/elasticsearch/issues/17572#issuecomment-229575654","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17572","id":229575654,"node_id":"MDEyOklzc3VlQ29tbWVudDIyOTU3NTY1NA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-06-30T06:56:20Z","updated_at":"2016-06-30T06:56:20Z","author_association":"MEMBER","body":"I'm going to close this one. I believe it has been fixed in 2.x with #11930 TBH. \nIf you can come with a test, like a load test which change aliases all the time in a process and query the alias in another process and fails, that could be awesome.\nEven more, if you can do it in 1.7 then upgrade to 2.3 and check that it does not occur anymore... That'd be fantastic.\n\nFeel free to reopen or comment if you have any more information.\n","performed_via_github_app":null}]