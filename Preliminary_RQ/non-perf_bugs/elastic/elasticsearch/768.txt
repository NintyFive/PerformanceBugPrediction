{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/768","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/768/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/768/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/768/events","html_url":"https://github.com/elastic/elasticsearch/issues/768","id":665085,"node_id":"MDU6SXNzdWU2NjUwODU=","number":768,"title":"Queries that don't match Lucene query syntax should still be valid","user":{"login":"jaylett","id":80187,"node_id":"MDQ6VXNlcjgwMTg3","avatar_url":"https://avatars3.githubusercontent.com/u/80187?v=4","gravatar_id":"","url":"https://api.github.com/users/jaylett","html_url":"https://github.com/jaylett","followers_url":"https://api.github.com/users/jaylett/followers","following_url":"https://api.github.com/users/jaylett/following{/other_user}","gists_url":"https://api.github.com/users/jaylett/gists{/gist_id}","starred_url":"https://api.github.com/users/jaylett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaylett/subscriptions","organizations_url":"https://api.github.com/users/jaylett/orgs","repos_url":"https://api.github.com/users/jaylett/repos","events_url":"https://api.github.com/users/jaylett/events{/privacy}","received_events_url":"https://api.github.com/users/jaylett/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2011-03-11T11:39:34Z","updated_at":"2013-04-04T19:32:39Z","closed_at":"2013-04-04T19:32:39Z","author_association":"NONE","active_lock_reason":null,"body":"For instance, search for \":wibble\" doesn't work because Lucene places special meaning on \":\" and doesn't expect it at the start of a search:\n\n```\ncurl -XPOST http://localhost:9200/testidx/ -d '              \nindex :\n  store:\n    type: memory\n'\ncurl 'http://localhost:9200/testidx/_search?q=%3awibble&pretty=true'\n```\n\nresults in\n    \"error\" : \"SearchPhaseExecutionException[Failed to execute phase [query], total failure; shardFailures {[TtLvTQ2MQ6S9JIRz8gSjoA][testidx][0]: SearchParseException[[testidx][0]: from[-1],size[-1]: Parse Failure [Failed to parse source [_na_]]]; nested: QueryParsingException[[testidx] Failed to parse query [:wibble]]; nested: ParseException[Cannot parse ':wibble': Encountered \\\" \\\":\\\" \\\": \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    \\\"(\\\" ...\\n    \\\"_\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"_\\\" ...\\n    ]; nested: ParseException[Encountered \\\" \\\":\\\" \\\": \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    \\\"(\\\" ...\\n    \\\"_\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"_\\\" ...\\n    ]; }{[TtLvTQ2MQ6S9JIRz8gSjoA][testidx][1]: SearchParseException[[testidx][1]: from[-1],size[-1]: Parse Failure [Failed to parse source [_na_]]]; nested: QueryParsingException[[testidx] Failed to parse query [:wibble]]; nested: ParseException[Cannot parse ':wibble': Encountered \\\" \\\":\\\" \\\": \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    \\\"(\\\" ...\\n    \\\"_\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"_\\\" ...\\n    ]; nested: ParseException[Encountered \\\" \\\":\\\" \\\": \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    \\\"(\\\" ...\\n    \\\"_\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"_\\\" ...\\n    ]; }{[TtLvTQ2MQ6S9JIRz8gSjoA][testidx][2]: SearchParseException[[testidx][2]: from[-1],size[-1]: Parse Failure [Failed to parse source [_na_]]]; nested: QueryParsingException[[testidx] Failed to parse query [:wibble]]; nested: ParseException[Cannot parse ':wibble': Encountered \\\" \\\":\\\" \\\": \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    \\\"(\\\" ...\\n    \\\"_\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"_\\\" ...\\n    ]; nested: ParseException[Encountered \\\" \\\":\\\" \\\": \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    \\\"(\\\" ...\\n    \\\"_\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"_\\\" ...\\n    ]; }{[TtLvTQ2MQ6S9JIRz8gSjoA][testidx][3]: SearchParseException[[testidx][3]: from[-1],size[-1]: Parse Failure [Failed to parse source [_na_]]]; nested: QueryParsingException[[testidx] Failed to parse query [:wibble]]; nested: ParseException[Cannot parse ':wibble': Encountered \\\" \\\":\\\" \\\": \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    \\\"(\\\" ...\\n    \\\"_\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"_\\\" ...\\n    ]; nested: ParseException[Encountered \\\" \\\":\\\" \\\": \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    \\\"(\\\" ...\\n    \\\"_\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"_\\\" ...\\n    ]; }{[TtLvTQ2MQ6S9JIRz8gSjoA][testidx][4]: SearchParseException[[testidx][4]: from[-1],size[-1]: Parse Failure [Failed to parse source [_na_]]]; nested: QueryParsingException[[testidx] Failed to parse query [:wibble]]; nested: ParseException[Cannot parse ':wibble': Encountered \\\" \\\":\\\" \\\": \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    \\\"(\\\" ...\\n    \\\"_\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"_\\\" ...\\n    ]; nested: ParseException[Encountered \\\" \\\":\\\" \\\": \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    \\\"(\\\" ...\\n    \\\"_\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"_\\\" ...\\n    ]; }]\",\n      \"status\" : 500\n    }\n\nIt is impractical to educate every single user of every single system that uses Elastic Search not to do this, and somewhat painful to have to write code in every single system to avoid the exception at client-end (not to mention that you get an enormous unhelpful stacktrace in `elasticsearch.log` which prevents you seeing actual problems clearly).\n\nI believe that anything a user types into a search box should be a valid search. It may not be a _useful_ one, but that's a different matter entirely :-)\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}