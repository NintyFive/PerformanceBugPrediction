[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50026863","html_url":"https://github.com/elastic/elasticsearch/issues/5458#issuecomment-50026863","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5458","id":50026863,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDI2ODYz","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-07-24T14:39:43Z","updated_at":"2014-07-24T14:39:43Z","author_association":"CONTRIBUTOR","body":"@jxstanford This is a known limitation of `min_doc_count=0`: it might return terms that don't match the query or filters. We just use the index in order to compute them.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73576696","html_url":"https://github.com/elastic/elasticsearch/issues/5458#issuecomment-73576696","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5458","id":73576696,"node_id":"MDEyOklzc3VlQ29tbWVudDczNTc2Njk2","user":{"login":"bradvido","id":884611,"node_id":"MDQ6VXNlcjg4NDYxMQ==","avatar_url":"https://avatars2.githubusercontent.com/u/884611?v=4","gravatar_id":"","url":"https://api.github.com/users/bradvido","html_url":"https://github.com/bradvido","followers_url":"https://api.github.com/users/bradvido/followers","following_url":"https://api.github.com/users/bradvido/following{/other_user}","gists_url":"https://api.github.com/users/bradvido/gists{/gist_id}","starred_url":"https://api.github.com/users/bradvido/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bradvido/subscriptions","organizations_url":"https://api.github.com/users/bradvido/orgs","repos_url":"https://api.github.com/users/bradvido/repos","events_url":"https://api.github.com/users/bradvido/events{/privacy}","received_events_url":"https://api.github.com/users/bradvido/received_events","type":"User","site_admin":false},"created_at":"2015-02-09T19:48:46Z","updated_at":"2015-02-09T19:54:54Z","author_association":"CONTRIBUTOR","body":"Is this considered a bug? It's certainly unexpected behavior that the terms aggregation will match terms that don't match the query filter when you set min_doc_count=0.\n\nAt the very least, this should be (better) documented here: http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html#_minimum_document_count\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/75117096","html_url":"https://github.com/elastic/elasticsearch/issues/5458#issuecomment-75117096","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5458","id":75117096,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MTE3MDk2","user":{"login":"FabriZZio","id":38897,"node_id":"MDQ6VXNlcjM4ODk3","avatar_url":"https://avatars1.githubusercontent.com/u/38897?v=4","gravatar_id":"","url":"https://api.github.com/users/FabriZZio","html_url":"https://github.com/FabriZZio","followers_url":"https://api.github.com/users/FabriZZio/followers","following_url":"https://api.github.com/users/FabriZZio/following{/other_user}","gists_url":"https://api.github.com/users/FabriZZio/gists{/gist_id}","starred_url":"https://api.github.com/users/FabriZZio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FabriZZio/subscriptions","organizations_url":"https://api.github.com/users/FabriZZio/orgs","repos_url":"https://api.github.com/users/FabriZZio/repos","events_url":"https://api.github.com/users/FabriZZio/events{/privacy}","received_events_url":"https://api.github.com/users/FabriZZio/received_events","type":"User","site_admin":false},"created_at":"2015-02-19T19:19:31Z","updated_at":"2015-02-19T19:19:31Z","author_association":"NONE","body":"Is there an alternative way to retrieve aggregations with a `doc count = 0` but using some query or filters?\n\nFor example: we have a use case with documents (products) in an ES index. Each product has a locale (\"nl_be\", \"fr_fr\", ...). When searching for all `locale: \"nl_be\"` documents, we would like to retrieve an aggregation on another field \"category\". \n\n```\n#...\n\"query\": {\n    \"filtered\": {\n      \"filter\": {\n        \"term\": {\n          \"locale\": \"nl_be\"\n        }\n      }\n    }\n},\n\"aggs\": {\n\"nested_categories\": {\n  \"nested\": {\n    \"path\": \"categories\"\n  },\n  \"aggs\": {\n    \"categories\": {\n      \"terms\": {\n        \"field\": \"categories.title\",\n        \"min_doc_count\": 0,\n        \"size\": 0\n      }\n    }\n  }\n}\n```\n\nThis results in `categories` containing all documents, even with `locale` other than 'nl_be'.\n\nThere probably is a very good reason why this `min_doc_count=0` behaves as is, but how can the above scenario be handled (returning category titles, with `doc count = 0` and linked to documents with `locale: \"nl_be\"`.\n\nThanks in advance!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188706342","html_url":"https://github.com/elastic/elasticsearch/issues/5458#issuecomment-188706342","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5458","id":188706342,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODcwNjM0Mg==","user":{"login":"snkiran","id":15902979,"node_id":"MDQ6VXNlcjE1OTAyOTc5","avatar_url":"https://avatars0.githubusercontent.com/u/15902979?v=4","gravatar_id":"","url":"https://api.github.com/users/snkiran","html_url":"https://github.com/snkiran","followers_url":"https://api.github.com/users/snkiran/followers","following_url":"https://api.github.com/users/snkiran/following{/other_user}","gists_url":"https://api.github.com/users/snkiran/gists{/gist_id}","starred_url":"https://api.github.com/users/snkiran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snkiran/subscriptions","organizations_url":"https://api.github.com/users/snkiran/orgs","repos_url":"https://api.github.com/users/snkiran/repos","events_url":"https://api.github.com/users/snkiran/events{/privacy}","received_events_url":"https://api.github.com/users/snkiran/received_events","type":"User","site_admin":false},"created_at":"2016-02-25T10:16:26Z","updated_at":"2016-02-25T10:32:40Z","author_association":"NONE","body":"this is my query below:\nbut i need to display all the missing or null values in the result or output\n\nIP: 52.8.97.179:9200\nGET article_info/article/_search\n{\n\"fields\": [\n\"media_type\"\n],\n\"query\": {\n\"filtered\": {\n\"query\": {\n\"query_string\": {\n\"query\": \"pdf_url:.pdf\"\n}\n},\n\"filter\": {\n\"range\": {\n\"mediadate\": {\n\"from\": \"02-21-2016\",\n\"to\": \"02-24-2016\"\n}\n}\n}\n}\n},\n\"size\": 0,\n\"aggs\": {\n\"days\": {\n\"date_histogram\": {\n\"field\": \"mediadate\",\n\"interval\": \"day\",\n\"format\": \"MM-dd-yyyy\"\n},\n\"aggs\": {\n\"art_count\": {\n\"terms\": {\n\"field\": \"media_type\",\n\"order\" : { \"_term\" : \"desc\" }\n}\n}\n}\n}\n}\n}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188706414","html_url":"https://github.com/elastic/elasticsearch/issues/5458#issuecomment-188706414","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5458","id":188706414,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODcwNjQxNA==","user":{"login":"snkiran","id":15902979,"node_id":"MDQ6VXNlcjE1OTAyOTc5","avatar_url":"https://avatars0.githubusercontent.com/u/15902979?v=4","gravatar_id":"","url":"https://api.github.com/users/snkiran","html_url":"https://github.com/snkiran","followers_url":"https://api.github.com/users/snkiran/followers","following_url":"https://api.github.com/users/snkiran/following{/other_user}","gists_url":"https://api.github.com/users/snkiran/gists{/gist_id}","starred_url":"https://api.github.com/users/snkiran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snkiran/subscriptions","organizations_url":"https://api.github.com/users/snkiran/orgs","repos_url":"https://api.github.com/users/snkiran/repos","events_url":"https://api.github.com/users/snkiran/events{/privacy}","received_events_url":"https://api.github.com/users/snkiran/received_events","type":"User","site_admin":false},"created_at":"2016-02-25T10:16:44Z","updated_at":"2016-02-25T10:16:44Z","author_association":"NONE","body":"this is the result output: but i need to display all the missing or null values on date 02-23-2016 AND 02-24-2016,\nplease help me :\n\n{\n   \"took\": 4,\n   \"timed_out\": false,\n   \"_shards\": {\n      \"total\": 10,\n      \"successful\": 10,\n      \"failed\": 0\n   },\n   \"hits\": {\n      \"total\": 13352,\n      \"max_score\": 0,\n      \"hits\": []\n   },\n   \"aggregations\": {\n      \"days\": {\n         \"buckets\": [\n            {\n               \"key_as_string\": \"02-21-2016\",\n               \"key\": 1456012800000,\n               \"doc_count\": 12496,\n               \"art_count\": {\n                  \"doc_count_error_upper_bound\": 0,\n                  \"sum_other_doc_count\": 0,\n                  \"buckets\": [\n                     {\n                        \"key\": \"wire\",\n                        \"doc_count\": 68\n                     },\n                     {\n                        \"key\": \"web\",\n                        \"doc_count\": 7371\n                     },\n                     {\n                        \"key\": \"social\",\n                        \"doc_count\": 36\n                     },\n                     {\n                        \"key\": \"service\",\n                        \"doc_count\": 68\n                     },\n                     {\n                        \"key\": \"print\",\n                        \"doc_count\": 101\n                     },\n                     {\n                        \"key\": \"media\",\n                        \"doc_count\": 36\n                     },\n                     {\n                        \"key\": \"blog\",\n                        \"doc_count\": 4920\n                     }\n                  ]\n               }\n            },\n            {\n               \"key_as_string\": \"02-22-2016\",\n               \"key\": 1456099200000,\n               \"doc_count\": 854,\n               \"art_count\": {\n                  \"doc_count_error_upper_bound\": 0,\n                  \"sum_other_doc_count\": 0,\n                  \"buckets\": [\n                     {\n                        \"key\": \"wire\",\n                        \"doc_count\": 92\n                     },\n                     {\n                        \"key\": \"web\",\n                        \"doc_count\": 223\n                     },\n                     {\n                        \"key\": \"service\",\n                        \"doc_count\": 92\n                     },\n                     {\n                        \"key\": \"blog\",\n                        \"doc_count\": 539\n                     }\n                  ]\n               }\n            },\n            {\n               \"key_as_string\": \"02-23-2016\",\n               \"key\": 1456185600000,\n               \"doc_count\": 1,\n               \"art_count\": {\n                  \"doc_count_error_upper_bound\": 0,\n                  \"sum_other_doc_count\": 0,\n                  \"buckets\": [\n                     {\n                        \"key\": \"web\",\n                        \"doc_count\": 1\n                     }\n                  ]\n               }\n            },\n            {\n               \"key_as_string\": \"02-24-2016\",\n               \"key\": 1456272000000,\n               \"doc_count\": 1,\n               \"art_count\": {\n                  \"doc_count_error_upper_bound\": 0,\n                  \"sum_other_doc_count\": 0,\n                  \"buckets\": [\n                     {\n                        \"key\": \"web\",\n                        \"doc_count\": 1\n                     }\n                  ]\n               }\n            }\n         ]\n      }\n   }\n}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188748303","html_url":"https://github.com/elastic/elasticsearch/issues/5458#issuecomment-188748303","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5458","id":188748303,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODc0ODMwMw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-02-25T11:44:44Z","updated_at":"2016-02-25T11:44:44Z","author_association":"MEMBER","body":"@snkiran You will have a better chance to get an answer on discuss.elastic.co.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188775153","html_url":"https://github.com/elastic/elasticsearch/issues/5458#issuecomment-188775153","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5458","id":188775153,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODc3NTE1Mw==","user":{"login":"snkiran","id":15902979,"node_id":"MDQ6VXNlcjE1OTAyOTc5","avatar_url":"https://avatars0.githubusercontent.com/u/15902979?v=4","gravatar_id":"","url":"https://api.github.com/users/snkiran","html_url":"https://github.com/snkiran","followers_url":"https://api.github.com/users/snkiran/followers","following_url":"https://api.github.com/users/snkiran/following{/other_user}","gists_url":"https://api.github.com/users/snkiran/gists{/gist_id}","starred_url":"https://api.github.com/users/snkiran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snkiran/subscriptions","organizations_url":"https://api.github.com/users/snkiran/orgs","repos_url":"https://api.github.com/users/snkiran/repos","events_url":"https://api.github.com/users/snkiran/events{/privacy}","received_events_url":"https://api.github.com/users/snkiran/received_events","type":"User","site_admin":false},"created_at":"2016-02-25T12:50:51Z","updated_at":"2016-02-25T12:50:51Z","author_association":"NONE","body":"help me some one as soon\n","performed_via_github_app":null}]