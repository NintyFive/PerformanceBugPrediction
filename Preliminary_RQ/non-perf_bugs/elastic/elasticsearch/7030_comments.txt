[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50870675","html_url":"https://github.com/elastic/elasticsearch/issues/7030#issuecomment-50870675","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7030","id":50870675,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODcwNjc1","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2014-08-01T10:33:44Z","updated_at":"2014-08-01T10:33:44Z","author_association":"CONTRIBUTOR","body":"If we do choose to implement this patch RFC an ASL-licensed impl is here: https://github.com/fge/json-patch \nHowever, do we know how useful this approach will be in practice?\nThe concerns I have are:\n\n1) Limited addressability: the [path syntax](http://tools.ietf.org/html/rfc6901) used in commands only appears to support addressing by field name and not value e.g. I can't reference the particular `car` object in an array of my cars that has the `\"registrationPlate\":\"GD32 1FU\"` to set the `insuredDate`. \n2) Limited operations - setting values are allowed but incrementing existing values is not\n3) Limited data structures - simple arrays as opposed to maps or priority queues.\n\nUodates are central to the use case of \"entity-centric\" indexes where summaries are maintained for entities as they accumulate a number of events over time e.g. customers and their purchases or web sessions and their log entries.  In these scenarios the curation of the profiles have several requirements:\n1) Derived attributes - the `duration` of a web session is the difference between the min and max timestamps of multiple log events attached over time.\n2) Ageing windows - arrays that keep the last N entries rather than accruing endless entries.\n3) Counters - e.g. simple incrementers or more sophisticated count-distinct structures like HyperLogLog for counting the number of other bank accounts an account has transacted with.\n4) Maps - arrays where the object elements are addressable by a key held in an a field value\n\nWhile these more complex requirements can be solved using stored scripts today I can appreciate the motivation to move away from a reliance on script and so we could potentially consider a declarative approach e.g. where our _mapping_ definitions are extended to try to encapsulate some of these common higher-level data types that are maintained over time with additions?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/53030920","html_url":"https://github.com/elastic/elasticsearch/issues/7030#issuecomment-53030920","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7030","id":53030920,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDMwOTIw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-22T07:25:13Z","updated_at":"2014-08-22T07:25:13Z","author_association":"CONTRIBUTOR","body":"Also see #5291\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/83431424","html_url":"https://github.com/elastic/elasticsearch/issues/7030#issuecomment-83431424","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7030","id":83431424,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNDMxNDI0","user":{"login":"iohannis","id":1439226,"node_id":"MDQ6VXNlcjE0MzkyMjY=","avatar_url":"https://avatars1.githubusercontent.com/u/1439226?v=4","gravatar_id":"","url":"https://api.github.com/users/iohannis","html_url":"https://github.com/iohannis","followers_url":"https://api.github.com/users/iohannis/followers","following_url":"https://api.github.com/users/iohannis/following{/other_user}","gists_url":"https://api.github.com/users/iohannis/gists{/gist_id}","starred_url":"https://api.github.com/users/iohannis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iohannis/subscriptions","organizations_url":"https://api.github.com/users/iohannis/orgs","repos_url":"https://api.github.com/users/iohannis/repos","events_url":"https://api.github.com/users/iohannis/events{/privacy}","received_events_url":"https://api.github.com/users/iohannis/received_events","type":"User","site_admin":false},"created_at":"2015-03-19T09:07:41Z","updated_at":"2015-03-19T09:07:41Z","author_association":"NONE","body":"Also looking for a solution to this, having an index with rental properties availability data (as nested objects part of the property) that we update multiple times daily. Question is how we replace the array of nested objects with new ones, so the field values are not simply merged (keeping obsolete availability dates for the properties)? \n\nI have been working just about a month with implementing ElasticSearch, and just now ran into this issue. I cannot find anything in the documentation, and this and the linked issues are the closest to what I am looking for. Any suggestion would be very welcome - even if it's a workaround.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90795012","html_url":"https://github.com/elastic/elasticsearch/issues/7030#issuecomment-90795012","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7030","id":90795012,"node_id":"MDEyOklzc3VlQ29tbWVudDkwNzk1MDEy","user":{"login":"vsiv","id":935772,"node_id":"MDQ6VXNlcjkzNTc3Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/935772?v=4","gravatar_id":"","url":"https://api.github.com/users/vsiv","html_url":"https://github.com/vsiv","followers_url":"https://api.github.com/users/vsiv/followers","following_url":"https://api.github.com/users/vsiv/following{/other_user}","gists_url":"https://api.github.com/users/vsiv/gists{/gist_id}","starred_url":"https://api.github.com/users/vsiv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vsiv/subscriptions","organizations_url":"https://api.github.com/users/vsiv/orgs","repos_url":"https://api.github.com/users/vsiv/repos","events_url":"https://api.github.com/users/vsiv/events{/privacy}","received_events_url":"https://api.github.com/users/vsiv/received_events","type":"User","site_admin":false},"created_at":"2015-04-08T03:42:32Z","updated_at":"2015-04-08T03:42:32Z","author_association":"NONE","body":"@clintongormley a bit curious why scripting isn't a better fit for advanced patching/merging needs? this would help keep the update api simpler, this would allow u guys to move forward with the simpler use cases folks want - ex #7332 and #5291... Just a thought. I do think however a patch language would be cool..\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90865899","html_url":"https://github.com/elastic/elasticsearch/issues/7030#issuecomment-90865899","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7030","id":90865899,"node_id":"MDEyOklzc3VlQ29tbWVudDkwODY1ODk5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-08T09:51:19Z","updated_at":"2015-04-08T09:51:19Z","author_association":"CONTRIBUTOR","body":"@vishalshah-org scripting obviously allows you to do whatever you want, which is fine.  That said, scripting today requires you to add a script to every node, which is quite clumsy.  It'd be nice to have a simple patch language that doesn't require you to expose scripting.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158659697","html_url":"https://github.com/elastic/elasticsearch/issues/7030#issuecomment-158659697","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7030","id":158659697,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODY1OTY5Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-21T16:20:28Z","updated_at":"2015-11-21T16:20:28Z","author_association":"CONTRIBUTOR","body":"I think improving scripting (#13084) is a better idea than trying to invent a patch language in JSON. Closing\n","performed_via_github_app":null}]