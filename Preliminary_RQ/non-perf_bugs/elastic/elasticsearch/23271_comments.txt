[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/281159712","html_url":"https://github.com/elastic/elasticsearch/issues/23271#issuecomment-281159712","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23271","id":281159712,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MTE1OTcxMg==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-02-20T19:08:37Z","updated_at":"2017-02-20T19:08:37Z","author_association":"MEMBER","body":"Actually I did something wrong but still I'm getting this error.\r\n\r\nHere is my mistake. I registered a client called `my_config` but I'm not using it when creating the repository.\r\n\r\nWith:\r\n\r\n```sh\r\ncurl -X POST 'http://127.0.0.1:9200/_snapshot/backups?pretty=true&error_trace=true' -H 'Content-Type: application/json' -d '\r\n{\r\n   \"type\":\"s3\",\r\n   \"settings\":{\r\n      \"client\": \"my_config\",\r\n      \"bucket\": \"BUCKET\",\r\n      \"region\": \"eu-west-1\"\r\n   }\r\n}'\r\n```\r\n\r\nEverything works fine:\r\n\r\n```json\r\n{\r\n  \"acknowledged\" : true\r\n}\r\n```\r\n\r\nSo this appears only when no credentials are found. So when we switch to IAM Profiles instead.\r\nIn such case, AWS is trying to get the metadata from the instance by calling this URL `169.254.169.254:80`.\r\n\r\nI did not test but I believe that IAM Profile won't work.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/282756343","html_url":"https://github.com/elastic/elasticsearch/issues/23271#issuecomment-282756343","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23271","id":282756343,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Mjc1NjM0Mw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-02-27T15:41:50Z","updated_at":"2017-02-27T15:41:50Z","author_association":"MEMBER","body":"Should be fixed by #23297 ","performed_via_github_app":null}]