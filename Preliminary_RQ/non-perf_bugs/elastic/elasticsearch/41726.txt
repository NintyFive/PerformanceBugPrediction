{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/41726","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41726/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41726/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41726/events","html_url":"https://github.com/elastic/elasticsearch/issues/41726","id":439332498,"node_id":"MDU6SXNzdWU0MzkzMzI0OTg=","number":41726,"title":"deb package install fails with  unable to create temporary keystore","user":{"login":"LeeDr","id":13542669,"node_id":"MDQ6VXNlcjEzNTQyNjY5","avatar_url":"https://avatars1.githubusercontent.com/u/13542669?v=4","gravatar_id":"","url":"https://api.github.com/users/LeeDr","html_url":"https://github.com/LeeDr","followers_url":"https://api.github.com/users/LeeDr/followers","following_url":"https://api.github.com/users/LeeDr/following{/other_user}","gists_url":"https://api.github.com/users/LeeDr/gists{/gist_id}","starred_url":"https://api.github.com/users/LeeDr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LeeDr/subscriptions","organizations_url":"https://api.github.com/users/LeeDr/orgs","repos_url":"https://api.github.com/users/LeeDr/repos","events_url":"https://api.github.com/users/LeeDr/events{/privacy}","received_events_url":"https://api.github.com/users/LeeDr/received_events","type":"User","site_admin":false},"labels":[{"id":114977275,"node_id":"MDU6TGFiZWwxMTQ5NzcyNzU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Packaging","name":":Delivery/Packaging","color":"0e8a16","default":false,"description":"RPM and deb packaging, tar and zip archives, shell and batch scripts"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"},{"id":92913658,"node_id":"MDU6TGFiZWw5MjkxMzY1OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/blocker","name":"blocker","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"assignees":[{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2019-05-01T21:25:54Z","updated_at":"2020-11-11T21:55:49Z","closed_at":"2019-05-04T18:03:56Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): Version: 8.0.0-SNAPSHOT, Build: default/deb/73bfdc4/2019-04-30T08:55:06.107343Z, JVM: 12.0.1\r\n\r\n**Plugins installed**: default distribution\r\n\r\n**JVM version** (`java -version`):  JVM: 12.0.1 (packed in deb package)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): Ubuntu 16.04;\r\nLinux vagrant 4.4.0-31-generic #50-Ubuntu SMP Wed Jul 13 00:07:12 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**: Elasticsearch fails to start and logs this in /var/log/syslog;\r\n`unable to create temporary keystore at [/etc/elasticsearch/elasticsearch.keystore.tmp], please check filesystem permissions`\r\n\r\n**Steps to reproduce**:\r\n\r\nPlease include a *minimal* but *complete* recreation of the problem, including\r\n(e.g.) index creation, mappings, settings, query etc.  The easier you make for\r\nus to reproduce it, the more likely that somebody will take the time to look at it.\r\n\r\n 1. get master (8.0.0) snapshot build of elasticsearch deb package with jdk (with or without jdk probably doesn't matter)\r\n 2. install the package `dpkg -i elasticsearch-8.0.0-SNAPSHOT-amd64.deb`\r\n 3. set JAVA_HOME pointing to a suitable JDK.  I used;\r\n`export JAVA_HOME=/usr/share/elasticsearch/jdk`\r\n4. `service elasticsearch start`\r\n5. `tail -n100 /var/log/syslog`\r\n\r\n**Provide logs (if relevant)**:\r\n```\r\nMay  1 20:57:25 vagrant systemd[1]: Started Elasticsearch.\r\nMay  1 20:57:26 vagrant elasticsearch[6191]: OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: Exception in thread \"main\" org.elasticsearch.bootstrap.BootstrapException: org.elasticsearch.cli.UserException: unable to create temporary keystore at [/etc/elasticsearch/elasticsearch.keystore.tmp], please check filesystem permissions\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: Likely root cause: java.nio.file.AccessDeniedException: /etc/elasticsearch/elasticsearch.keystore.tmp\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:90)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:116)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:219)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at java.base/java.nio.file.spi.FileSystemProvider.newOutputStream(FileSystemProvider.java:478)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at java.base/java.nio.file.Files.newOutputStream(Files.java:222)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at org.apache.lucene.store.FSDirectory$FSIndexOutput.<init>(FSDirectory.java:411)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at org.apache.lucene.store.FSDirectory$FSIndexOutput.<init>(FSDirectory.java:407)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at org.apache.lucene.store.FSDirectory.createOutput(FSDirectory.java:255)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at org.elasticsearch.common.settings.KeyStoreWrapper.save(KeyStoreWrapper.java:467)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at org.elasticsearch.bootstrap.Bootstrap.loadSecureSettings(Bootstrap.java:240)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:303)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:159)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:150)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at org.elasticsearch.cli.Command.main(Command.java:90)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:115)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: #011at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:92)\r\nMay  1 20:57:29 vagrant elasticsearch[6191]: Refer to the log for complete error details.\r\nMay  1 20:57:29 vagrant systemd[1]: elasticsearch.service: Main process exited, code=exited, status=1/FAILURE\r\nMay  1 20:57:29 vagrant systemd[1]: elasticsearch.service: Unit entered failed state.\r\nMay  1 20:57:29 vagrant systemd[1]: elasticsearch.service: Failed with result 'exit-code'.\r\n```\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}