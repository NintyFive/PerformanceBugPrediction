[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/293094689","html_url":"https://github.com/elastic/elasticsearch/issues/24031#issuecomment-293094689","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24031","id":293094689,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzA5NDY4OQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-04-10T22:14:51Z","updated_at":"2017-04-10T22:14:51Z","author_association":"MEMBER","body":"Hi @oxymor0n what would you like Elasticsearch to do in those case instead? You are opening/closing an index, which is an operation that cannot be performed if no closed/open index matches the provided expression. You would prefer those apis to be a no-op in those cases, rather than returning an exception?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/293276940","html_url":"https://github.com/elastic/elasticsearch/issues/24031#issuecomment-293276940","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24031","id":293276940,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzI3Njk0MA==","user":{"login":"oxymor0n","id":2345378,"node_id":"MDQ6VXNlcjIzNDUzNzg=","avatar_url":"https://avatars1.githubusercontent.com/u/2345378?v=4","gravatar_id":"","url":"https://api.github.com/users/oxymor0n","html_url":"https://github.com/oxymor0n","followers_url":"https://api.github.com/users/oxymor0n/followers","following_url":"https://api.github.com/users/oxymor0n/following{/other_user}","gists_url":"https://api.github.com/users/oxymor0n/gists{/gist_id}","starred_url":"https://api.github.com/users/oxymor0n/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oxymor0n/subscriptions","organizations_url":"https://api.github.com/users/oxymor0n/orgs","repos_url":"https://api.github.com/users/oxymor0n/repos","events_url":"https://api.github.com/users/oxymor0n/events{/privacy}","received_events_url":"https://api.github.com/users/oxymor0n/received_events","type":"User","site_admin":false},"created_at":"2017-04-11T14:15:27Z","updated_at":"2017-04-12T21:52:48Z","author_association":"NONE","body":"Hello @javanna, thank you for responding.\r\n\r\nIMHO the behavior in the case of closing/opening `_all`or `*`-patterns should be consistent with the current behavior of opening/closing an individual index (which returns `{acknowledged: true}` regardless of whether that index is already opened/closed). \r\n\r\nAlternatively, the error message should be changed and documented. As it is at the moment, it's not immediately clear to the user that the error is due to having no index in a valid state. In my case, I thought it meant that I've somehow broken/disabled the wildcard expansion of index names.\r\n\r\nFurthermore, maybe the error vs no-op behavior should be controlled by the `ignore_unavailable` parameter, which in the document can disable the error \"if the request explicitly refers to a missing index\". Right now, this parameter has no effect on the output of opening/closing wildcards.\r\n\r\nEDIT: seems like this is a result of the default `allow_no_indices` and `expand_wildcards` options\r\n([reference](https://www.elastic.co/guide/en/elasticsearch/reference/5.3/multi-index.html))","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/293523993","html_url":"https://github.com/elastic/elasticsearch/issues/24031#issuecomment-293523993","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24031","id":293523993,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzUyMzk5Mw==","user":{"login":"olcbean","id":26058559,"node_id":"MDQ6VXNlcjI2MDU4NTU5","avatar_url":"https://avatars3.githubusercontent.com/u/26058559?v=4","gravatar_id":"","url":"https://api.github.com/users/olcbean","html_url":"https://github.com/olcbean","followers_url":"https://api.github.com/users/olcbean/followers","following_url":"https://api.github.com/users/olcbean/following{/other_user}","gists_url":"https://api.github.com/users/olcbean/gists{/gist_id}","starred_url":"https://api.github.com/users/olcbean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olcbean/subscriptions","organizations_url":"https://api.github.com/users/olcbean/orgs","repos_url":"https://api.github.com/users/olcbean/repos","events_url":"https://api.github.com/users/olcbean/events{/privacy}","received_events_url":"https://api.github.com/users/olcbean/received_events","type":"User","site_admin":false},"created_at":"2017-04-12T09:30:28Z","updated_at":"2017-04-12T10:44:24Z","author_association":"CONTRIBUTOR","body":"```\r\nPUT test\r\nPOST _all/_open\r\n```\r\nand \r\n```\r\nPUT test\r\nPOST */_open\r\n```\r\nwill both result in `\"reason\": \"no such index\"`\r\n\r\n```\r\nPUT test\r\nPOST test/_open\r\n```\r\nwill result in `\"acknowledged\": true`\r\n\r\nLooking in master it seems that `_all` will be resolved against the closed indices and if there are no currently closed indices an exception will be thrown (as the `allow_no_indices=false`)\r\n\r\n@javanna Could you specify what the correct behavior should be?\r\n\r\n----\r\nI would like to have a go at this once the correct behavior is defined. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/293721468","html_url":"https://github.com/elastic/elasticsearch/issues/24031#issuecomment-293721468","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24031","id":293721468,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzcyMTQ2OA==","user":{"login":"oxymor0n","id":2345378,"node_id":"MDQ6VXNlcjIzNDUzNzg=","avatar_url":"https://avatars1.githubusercontent.com/u/2345378?v=4","gravatar_id":"","url":"https://api.github.com/users/oxymor0n","html_url":"https://github.com/oxymor0n","followers_url":"https://api.github.com/users/oxymor0n/followers","following_url":"https://api.github.com/users/oxymor0n/following{/other_user}","gists_url":"https://api.github.com/users/oxymor0n/gists{/gist_id}","starred_url":"https://api.github.com/users/oxymor0n/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oxymor0n/subscriptions","organizations_url":"https://api.github.com/users/oxymor0n/orgs","repos_url":"https://api.github.com/users/oxymor0n/repos","events_url":"https://api.github.com/users/oxymor0n/events{/privacy}","received_events_url":"https://api.github.com/users/oxymor0n/received_events","type":"User","site_admin":false},"created_at":"2017-04-12T22:07:43Z","updated_at":"2017-04-12T22:07:43Z","author_association":"NONE","body":"I've just became aware of the `allow_no_indices` and `expand_wildcards` options (they weren't mentioned in the Open/Close Index API documentation) - sorry if my unfamiliarity with these API conventions caused some confusion ðŸ˜“ \r\n\r\nSetting `allow_no_indices=true` result in a different error if there is no closed index:\r\n\r\n```\r\nPOST localhost:9200/_all/_open?allow_no_indices=true\r\n{\r\n    \"error\": {\r\n        \"reason\": \"Index name is required\",\r\n        \"root_cause\": [\r\n            {\r\n                \"reason\": \"Index name is required\",\r\n                \"type\": \"illegal_argument_exception\"\r\n            }\r\n        ],\r\n        \"type\": \"illegal_argument_exception\"\r\n    },\r\n    \"status\": 400\r\n}\r\n```\r\n\r\nOnly a combination of `allow_no_indices=true&expand_wildcards=all` results in a successful no-op. \r\n\r\nI understand that this is the default behavior, but imho it is quite obscure. As it is, both `ignore_unavailable` and `allow_no_indices` are not really doing what their documentation says they should do, and it's a bit confusing for new users.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/294117311","html_url":"https://github.com/elastic/elasticsearch/issues/24031#issuecomment-294117311","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24031","id":294117311,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDExNzMxMQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-04-14T08:41:11Z","updated_at":"2017-04-14T08:41:11Z","author_association":"MEMBER","body":"I agree the behaviour is a bit confusing. The indices options are well applicable to read requests, to decide which indices to expand to and whether a request should throw an error or an empty response when no indices match the provided expression. \r\n\r\nThat said, in case of open and close index, these api really need at least one index to perform the action against. That is why when you set `allow_no_indices=true` you get another error further down the road, indicating that allowing no indices is not supported. Given that these are not read apis, I am not sure we should make them work as a no-op when the request resolves to no indices. That would make the response unclear as there currently is no way to distinguish between a request that did something and a request that did nothing. Marking for discussion.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/294177117","html_url":"https://github.com/elastic/elasticsearch/issues/24031#issuecomment-294177117","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24031","id":294177117,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDE3NzExNw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-04-14T15:44:29Z","updated_at":"2017-04-28T12:47:00Z","author_association":"MEMBER","body":"We discussed this as part of FixItFriday, and we would like to align open/close index api to the (desired) behaviour of the delete index api as explained in https://github.com/elastic/elasticsearch/issues/24104#issuecomment-294175335. Specifically, we would like to make open/close a no-op in case there are no matching indices and `allow_no_indices` is set to `true`. That said, the default behaviour should stay strict as-is.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/294177200","html_url":"https://github.com/elastic/elasticsearch/issues/24031#issuecomment-294177200","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24031","id":294177200,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDE3NzIwMA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-04-14T15:44:53Z","updated_at":"2017-04-14T15:44:53Z","author_association":"MEMBER","body":"Once more, @olcbean feel free to send a PR and ping me for review.","performed_via_github_app":null}]