[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158947793","html_url":"https://github.com/elastic/elasticsearch/issues/14939#issuecomment-158947793","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14939","id":158947793,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODk0Nzc5Mw==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-11-23T14:24:51Z","updated_at":"2015-11-23T14:24:51Z","author_association":"CONTRIBUTOR","body":"I don't think we should do this, I think its by far too risky. Changing bootclasspath to modify the behavior of the jvm (either directly or with agent)? no thanks. Looking at their code, I don't think its gonna work under java 9/jigsaw, I think the licensing situation here is still ambiguous, etc.\n\nI also think this agent is an incomplete, risky, knee-jerk reaction to a specific vulnerability. Instead, I think we should just continue to tighten things up in general. For the specific concerns of third party code, e.g. we can start auditing third party libraries that we bring in with forbidden apis (https://github.com/policeman-tools/forbidden-apis/issues/38) to treat them more like our own code. Yes, we can in fact \"know what that code is doing\" :)\n\nOverall, we can continue to lock things down to bring more reliability and security: e.g. do some real code cleanups to address some of the TODOs and exceptions we have in the security policy. This helps both our own code and third party code.\n\nAs far as JDK code, yes its kind of a special case, but I think addressing it by replacing classes in the JDK is the wrong technique. If we distrust the JVM, then we should sandbox it better, and the right guy to do that is the operating system. Today this is minimal (only dropping ability to execute), because its a black and white thing. This is a tradeoff to keep in mind. So if we want to expand e.g. system call filtering to do more, or if we want OS packaging to bring in its own JDK that we apparmor or whatever, we have to think about the implications: we can't have plugins declaring exceptions and stuff like we can at the java level.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158950888","html_url":"https://github.com/elastic/elasticsearch/issues/14939#issuecomment-158950888","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14939","id":158950888,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODk1MDg4OA==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-11-23T14:30:02Z","updated_at":"2015-11-23T14:30:02Z","author_association":"CONTRIBUTOR","body":"Also, forgot to mention, containing the JVM at the OS level doesn't have to be complex. Even stuff like tidying up filesystem permissions in our packaging can be a great improvement there.\n","performed_via_github_app":null}]