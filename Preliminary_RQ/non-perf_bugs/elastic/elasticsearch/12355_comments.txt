[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/123194109","html_url":"https://github.com/elastic/elasticsearch/issues/12355#issuecomment-123194109","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12355","id":123194109,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMzE5NDEwOQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-07-21T07:08:06Z","updated_at":"2015-07-21T07:08:06Z","author_association":"MEMBER","body":"Here is where the exception comes from. As you can see we already have a best effort attempt to detect and report http traffic\n\n```\n if (buffer.getByte(readerIndex) != 'E' || buffer.getByte(readerIndex + 1) != 'S') {\n            // special handling for what is probably HTTP\n            if (bufferStartsWith(buffer, readerIndex, \"GET \") ||\n                bufferStartsWith(buffer, readerIndex, \"POST \") ||\n                bufferStartsWith(buffer, readerIndex, \"PUT \") ||\n                bufferStartsWith(buffer, readerIndex, \"HEAD \") ||\n                bufferStartsWith(buffer, readerIndex, \"DELETE \") ||\n                bufferStartsWith(buffer, readerIndex, \"OPTIONS \") ||\n                bufferStartsWith(buffer, readerIndex, \"PATCH \") ||\n                bufferStartsWith(buffer, readerIndex, \"TRACE \")) {\n\n                throw new HttpOnTransportException(\"This is not a HTTP port\");\n            }\n\n            // we have 6 readable bytes, show 4 (should be enough)\n            throw new StreamCorruptedException(\"invalid internal transport message format, got (\"\n                    + Integer.toHexString(buffer.getByte(readerIndex) & 0xFF) + \",\"\n                    + Integer.toHexString(buffer.getByte(readerIndex + 1) & 0xFF) + \",\"\n                    + Integer.toHexString(buffer.getByte(readerIndex + 2) & 0xFF) + \",\"\n                    + Integer.toHexString(buffer.getByte(readerIndex + 3) & 0xFF) + \")\");\n        }\n```\n\nThis works for me:\n\n```\n$ curl http://127.0.0.1:9300\nThis is not a HTTP port\n```\n\nCan you dig some more?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/123207191","html_url":"https://github.com/elastic/elasticsearch/issues/12355#issuecomment-123207191","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12355","id":123207191,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMzIwNzE5MQ==","user":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"created_at":"2015-07-21T08:06:29Z","updated_at":"2015-07-21T08:06:29Z","author_association":"MEMBER","body":"This error is from 1.4.5, I can see 1.7.0 reports this response.\nWhen did we add this?\n\nOn 21 July 2015 at 17:08, Boaz Leskes notifications@github.com wrote:\n\n> Here is where the exception comes from. As you can see we already have a\n> best effort attempt to detect and report http traffic\n> \n>  if (buffer.getByte(readerIndex) != 'E' || buffer.getByte(readerIndex + 1) != 'S') {\n>             // special handling for what is probably HTTP\n>             if (bufferStartsWith(buffer, readerIndex, \"GET \") ||\n>                 bufferStartsWith(buffer, readerIndex, \"POST \") ||\n>                 bufferStartsWith(buffer, readerIndex, \"PUT \") ||\n>                 bufferStartsWith(buffer, readerIndex, \"HEAD \") ||\n>                 bufferStartsWith(buffer, readerIndex, \"DELETE \") ||\n>                 bufferStartsWith(buffer, readerIndex, \"OPTIONS \") ||\n>                 bufferStartsWith(buffer, readerIndex, \"PATCH \") ||\n>                 bufferStartsWith(buffer, readerIndex, \"TRACE \")) {\n> \n> ```\n>             throw new HttpOnTransportException(\"This is not a HTTP port\");\n>         }\n> \n>         // we have 6 readable bytes, show 4 (should be enough)\n>         throw new StreamCorruptedException(\"invalid internal transport message format, got (\"\n>                 + Integer.toHexString(buffer.getByte(readerIndex) & 0xFF) + \",\"\n>                 + Integer.toHexString(buffer.getByte(readerIndex + 1) & 0xFF) + \",\"\n>                 + Integer.toHexString(buffer.getByte(readerIndex + 2) & 0xFF) + \",\"\n>                 + Integer.toHexString(buffer.getByte(readerIndex + 3) & 0xFF) + \")\");\n>     }\n> ```\n> \n> This works for me:\n> \n> $ curl http://127.0.0.1:9300\n> This is not a HTTP port\n> \n> Can you dig some more?\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/elastic/elasticsearch/issues/12355#issuecomment-123194109\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/123208300","html_url":"https://github.com/elastic/elasticsearch/issues/12355#issuecomment-123208300","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12355","id":123208300,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMzIwODMwMA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-07-21T08:10:17Z","updated_at":"2015-07-21T08:10:17Z","author_association":"MEMBER","body":"issue demystified : https://github.com/elastic/elasticsearch/pull/10108\n\nClosing as a duplicate then. I think it covers it well enough?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/123208541","html_url":"https://github.com/elastic/elasticsearch/issues/12355#issuecomment-123208541","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12355","id":123208541,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMzIwODU0MQ==","user":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"created_at":"2015-07-21T08:11:45Z","updated_at":"2015-07-21T08:11:45Z","author_association":"MEMBER","body":"Thanks mate.\n","performed_via_github_app":null}]