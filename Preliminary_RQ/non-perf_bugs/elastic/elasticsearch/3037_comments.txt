[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17930139","html_url":"https://github.com/elastic/elasticsearch/issues/3037#issuecomment-17930139","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3037","id":17930139,"node_id":"MDEyOklzc3VlQ29tbWVudDE3OTMwMTM5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-05-15T10:08:45Z","updated_at":"2013-05-15T10:11:41Z","author_association":"CONTRIBUTOR","body":"The parameter is `prefix_len` not `prefix_leng`:\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17930258","html_url":"https://github.com/elastic/elasticsearch/issues/3037#issuecomment-17930258","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3037","id":17930258,"node_id":"MDEyOklzc3VlQ29tbWVudDE3OTMwMjU4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-05-15T10:11:32Z","updated_at":"2013-05-15T10:11:32Z","author_association":"CONTRIBUTOR","body":"```\n    curl -XPOST '127.0.0.1:9200/test/_suggest?pretty' -d'{\n      \"did_you_mean\": {\n        \"text\": \"ice\",\n        \"term\": {\n          \"field\": \"name\",\n          \"max_edits\":2,\n          \"suggest_mode\": \"always\",\n          \"min_word_len\": 0,\n          \"prefix_len\": 0\n        }\n      }\n    }'\n    {\n      \"_shards\" : {\n        \"total\" : 1,\n        \"successful\" : 1,\n        \"failed\" : 0\n      },\n      \"did_you_mean\" : [ {\n        \"text\" : \"ice\",\n        \"offset\" : 0,\n        \"length\" : 3,\n        \"options\" : [ {\n          \"text\" : \"iced\",\n          \"score\" : 0.6666666,\n          \"freq\" : 1\n        } ]\n      } ]\n    }\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17933359","html_url":"https://github.com/elastic/elasticsearch/issues/3037#issuecomment-17933359","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3037","id":17933359,"node_id":"MDEyOklzc3VlQ29tbWVudDE3OTMzMzU5","user":{"login":"jtreher","id":1258179,"node_id":"MDQ6VXNlcjEyNTgxNzk=","avatar_url":"https://avatars1.githubusercontent.com/u/1258179?v=4","gravatar_id":"","url":"https://api.github.com/users/jtreher","html_url":"https://github.com/jtreher","followers_url":"https://api.github.com/users/jtreher/followers","following_url":"https://api.github.com/users/jtreher/following{/other_user}","gists_url":"https://api.github.com/users/jtreher/gists{/gist_id}","starred_url":"https://api.github.com/users/jtreher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtreher/subscriptions","organizations_url":"https://api.github.com/users/jtreher/orgs","repos_url":"https://api.github.com/users/jtreher/repos","events_url":"https://api.github.com/users/jtreher/events{/privacy}","received_events_url":"https://api.github.com/users/jtreher/received_events","type":"User","site_admin":false},"created_at":"2013-05-15T11:36:11Z","updated_at":"2013-05-15T11:43:49Z","author_association":"NONE","body":"@clintongormley While I did have a typo in the term suggest, the phrase suggest example is working and demonstrates the issue. Could you reopen?\n\nI will clarify that the gist was demonstrating that the term suggest is providing the term \"iced\" but I believe the candidate generator in the phrase suggest is not provided the term \"iced\" for the phrase suggest to consider because of the word length. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17934296","html_url":"https://github.com/elastic/elasticsearch/issues/3037#issuecomment-17934296","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3037","id":17934296,"node_id":"MDEyOklzc3VlQ29tbWVudDE3OTM0Mjk2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-05-15T12:02:07Z","updated_at":"2013-05-15T12:02:07Z","author_association":"CONTRIBUTOR","body":"@jtreher sorry - got that completely wrong. I'll reopen\n\nI'm seeing the same thing you're seeing.\n\n@s1monw ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17935520","html_url":"https://github.com/elastic/elasticsearch/issues/3037#issuecomment-17935520","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3037","id":17935520,"node_id":"MDEyOklzc3VlQ29tbWVudDE3OTM1NTIw","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-05-15T12:32:08Z","updated_at":"2013-05-15T12:32:08Z","author_association":"CONTRIBUTOR","body":"this seems to be a bug in the min_doc_freq smoothing. The good thing is that this only happens if your query term has a freq = 1 and the replacement has a freq = 1 as well. So in practice this might not be an issue. I will have a fix soon, in the meanwhile this should help:\n\n```\ncurl -XPOST 'localhost:9200/test/_suggest?pretty=true' -d '{                                                                                                                              \n  \"text\": \"ice tea\",\n  \"did_you_mean\": {\n    \"phrase\": {\n      \"field\": \"name_shingled\",\n      \"gram_size\": 3,\n      \"direct_generator\": [\n        {\n          \"field\": \"name\",\n          \"max_edits\": 2,\n          \"suggest_mode\": \"always\",\n          \"min_word_len\": 0,\n          \"prefix_len\": 0,\n          \"min_doc_freq\": 1.0\n        }\n      ]\n    }\n  }\n}'\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17954045","html_url":"https://github.com/elastic/elasticsearch/issues/3037#issuecomment-17954045","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3037","id":17954045,"node_id":"MDEyOklzc3VlQ29tbWVudDE3OTU0MDQ1","user":{"login":"jtreher","id":1258179,"node_id":"MDQ6VXNlcjEyNTgxNzk=","avatar_url":"https://avatars1.githubusercontent.com/u/1258179?v=4","gravatar_id":"","url":"https://api.github.com/users/jtreher","html_url":"https://github.com/jtreher","followers_url":"https://api.github.com/users/jtreher/followers","following_url":"https://api.github.com/users/jtreher/following{/other_user}","gists_url":"https://api.github.com/users/jtreher/gists{/gist_id}","starred_url":"https://api.github.com/users/jtreher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtreher/subscriptions","organizations_url":"https://api.github.com/users/jtreher/orgs","repos_url":"https://api.github.com/users/jtreher/repos","events_url":"https://api.github.com/users/jtreher/events{/privacy}","received_events_url":"https://api.github.com/users/jtreher/received_events","type":"User","site_admin":false},"created_at":"2013-05-15T17:39:44Z","updated_at":"2013-05-15T17:39:44Z","author_association":"NONE","body":"@s1monw Is there any chance that max_term_freq is not being obeyed as well with \"always?\" While this patch fixed this test issue, I actually have a situation where ice appears thousands of times and iced several hundred. I see \"iced\" appear from the term suggest, but it's like the phrase suggest never gets it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17965924","html_url":"https://github.com/elastic/elasticsearch/issues/3037#issuecomment-17965924","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3037","id":17965924,"node_id":"MDEyOklzc3VlQ29tbWVudDE3OTY1OTI0","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-05-15T21:01:17Z","updated_at":"2013-05-15T21:01:17Z","author_association":"CONTRIBUTOR","body":"`max_term_freq` is the maximum threshold (default: 0.01f) of documents a query term can appear in order to provide suggestions. Which means that if you won't even get a candidate for `ice` if the freq exceeds `max_term_freq`. Maybe I am not understanding you question right?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17974446","html_url":"https://github.com/elastic/elasticsearch/issues/3037#issuecomment-17974446","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3037","id":17974446,"node_id":"MDEyOklzc3VlQ29tbWVudDE3OTc0NDQ2","user":{"login":"jtreher","id":1258179,"node_id":"MDQ6VXNlcjEyNTgxNzk=","avatar_url":"https://avatars1.githubusercontent.com/u/1258179?v=4","gravatar_id":"","url":"https://api.github.com/users/jtreher","html_url":"https://github.com/jtreher","followers_url":"https://api.github.com/users/jtreher/followers","following_url":"https://api.github.com/users/jtreher/following{/other_user}","gists_url":"https://api.github.com/users/jtreher/gists{/gist_id}","starred_url":"https://api.github.com/users/jtreher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtreher/subscriptions","organizations_url":"https://api.github.com/users/jtreher/orgs","repos_url":"https://api.github.com/users/jtreher/repos","events_url":"https://api.github.com/users/jtreher/events{/privacy}","received_events_url":"https://api.github.com/users/jtreher/received_events","type":"User","site_admin":false},"created_at":"2013-05-16T00:28:25Z","updated_at":"2013-05-16T00:28:37Z","author_association":"NONE","body":"@s1monw  I have to set max_term_freq in the term suggest to 0.999 (99.9%) to have term show up. However, when I do this in phrase suggest, it's as though the candidate is not generated. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19119915","html_url":"https://github.com/elastic/elasticsearch/issues/3037#issuecomment-19119915","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3037","id":19119915,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTE5OTE1","user":{"login":"jtreher","id":1258179,"node_id":"MDQ6VXNlcjEyNTgxNzk=","avatar_url":"https://avatars1.githubusercontent.com/u/1258179?v=4","gravatar_id":"","url":"https://api.github.com/users/jtreher","html_url":"https://github.com/jtreher","followers_url":"https://api.github.com/users/jtreher/followers","following_url":"https://api.github.com/users/jtreher/following{/other_user}","gists_url":"https://api.github.com/users/jtreher/gists{/gist_id}","starred_url":"https://api.github.com/users/jtreher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtreher/subscriptions","organizations_url":"https://api.github.com/users/jtreher/orgs","repos_url":"https://api.github.com/users/jtreher/repos","events_url":"https://api.github.com/users/jtreher/events{/privacy}","received_events_url":"https://api.github.com/users/jtreher/received_events","type":"User","site_admin":false},"created_at":"2013-06-07T17:08:44Z","updated_at":"2013-06-07T17:08:44Z","author_association":"NONE","body":"@s1monw This did fix the issue I had. It seems to respect max_term_freq now with 0.9.1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19126888","html_url":"https://github.com/elastic/elasticsearch/issues/3037#issuecomment-19126888","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3037","id":19126888,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTI2ODg4","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-06-07T19:07:55Z","updated_at":"2013-06-07T19:07:55Z","author_association":"CONTRIBUTOR","body":"@jtreher I think I did!  \n","performed_via_github_app":null}]