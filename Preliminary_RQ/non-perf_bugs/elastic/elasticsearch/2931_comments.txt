[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16915636","html_url":"https://github.com/elastic/elasticsearch/issues/2931#issuecomment-16915636","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2931","id":16915636,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTE1NjM2","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T09:09:36Z","updated_at":"2013-04-24T09:09:36Z","author_association":"CONTRIBUTOR","body":"@lmenezes yes this is very likely caused by LUCENE-4899 - The release of 4.3 is already rolling and should be done by the end of the week. I will take your example here and put it into the 4.3 upgrade branch and see if it still fails to make sure this is actually fixed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16915790","html_url":"https://github.com/elastic/elasticsearch/issues/2931#issuecomment-16915790","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2931","id":16915790,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTE1Nzkw","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T09:12:23Z","updated_at":"2013-04-24T09:12:23Z","author_association":"CONTRIBUTOR","body":"@s1monw  Cool. Regarding ES updating to 4.3, is it realistic expecting that for 0.90? Or even just a patch for this particular issue? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16915874","html_url":"https://github.com/elastic/elasticsearch/issues/2931#issuecomment-16915874","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2931","id":16915874,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTE1ODc0","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T09:14:22Z","updated_at":"2013-04-24T09:14:22Z","author_association":"CONTRIBUTOR","body":"given that 0.90 is pretty close I can't promise anything but we are considering it. I don't think I can really patch this issue without copying a lot of code. The only thing you can do as a workaround is to not use the term vector highlighter until then.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16916384","html_url":"https://github.com/elastic/elasticsearch/issues/2931#issuecomment-16916384","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2931","id":16916384,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTE2Mzg0","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T09:26:07Z","updated_at":"2013-04-24T09:26:07Z","author_association":"CONTRIBUTOR","body":"Hum... I tried using the regular highlighting, but that yields some pretty weird stuff:\n\n\"logicac<em>m</em><em>logica</em>g ehe<em>m</em>als avinci - the know how co<em>m</em>pany\"\n\nTest:\n\n```\ncurl -XPOST 'http://127.0.0.1:9200/test?' -d '{ \"mappings\" : { \"test\" : { \"properties\" : { \"name\" : { \"type\": \"string\", \"index_analyzer\": \"name_index_analyzer\", \"search_analyzer\": \"name_search_analyzer\"} } } }, \"settings\" : { \"analysis\" : { \"filter\" : { \"my_ngram\" : { \"max_gram\" : 20, \"min_gram\" : 1, \"type\" : \"ngram\" } }, \"analyzer\" : { \"name_index_analyzer\": { \"tokenizer\": \"whitespace\", \"filter\": [ \"my_ngram\" ] }, \"name_search_analyzer\": { \"tokenizer\": \"whitespace\" } } } }}'\n\ncurl -XPUT 'http://localhost:9200/test/test/1' -d '{\"name\": \"logicacmg ehemals avinci - the know how company\"}'\n\ncurl -XGET 'http://localhost:9200/test/test/_search' -d '{ \"query\": { \"match\": { \"name\": { \"query\": \"logica m\" } } }, \"highlight\": { \"fields\": { \"name\": {} } }}'\n```\n\nDoesn't really works for our case. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16916866","html_url":"https://github.com/elastic/elasticsearch/issues/2931#issuecomment-16916866","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2931","id":16916866,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTE2ODY2","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T09:37:34Z","updated_at":"2013-04-24T09:37:34Z","author_association":"CONTRIBUTOR","body":"@s1monw the highlighted stuff wasn't formatted as it should, but I guess you get the idea.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16917816","html_url":"https://github.com/elastic/elasticsearch/issues/2931#issuecomment-16917816","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2931","id":16917816,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTE3ODE2","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T10:01:03Z","updated_at":"2013-04-24T10:01:03Z","author_association":"CONTRIBUTOR","body":"@lmenezes I added the test and it passes, would be good if you can take a look if the result is as you expect it?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16920505","html_url":"https://github.com/elastic/elasticsearch/issues/2931#issuecomment-16920505","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2931","id":16920505,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTIwNTA1","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T11:17:16Z","updated_at":"2013-04-24T11:17:16Z","author_association":"CONTRIBUTOR","body":"@s1monw i think you just added tests for the 2 cases that already work on Lucene pre 4.3. Your are missing the 3rd query, the one that fails. I tried executing the third query and I got the same results on your branch(the weird HL and also the OutOfBounds).\n- as a plus, this branch didn't work on my os x, only on ubuntu. The shards were constantly in \"initializing\", so i wasn't able to run that on osx. any idea?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16935338","html_url":"https://github.com/elastic/elasticsearch/issues/2931#issuecomment-16935338","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2931","id":16935338,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTM1MzM4","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T14:45:05Z","updated_at":"2013-04-24T14:45:05Z","author_association":"CONTRIBUTOR","body":"hey @lmenezes so the issue why this doesn't work / fails is that the ngram filter you are using is basically broken and produces somehow wrong positions. I am working on a fix for this and I will update you accordingly. \n\nregarding mac osx, I am running on osx just fine... did you try mvn clean first?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16935634","html_url":"https://github.com/elastic/elasticsearch/issues/2931#issuecomment-16935634","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2931","id":16935634,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTM1NjM0","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T14:49:23Z","updated_at":"2013-04-24T14:49:23Z","author_association":"CONTRIBUTOR","body":"hey @s1monw cool!\n\nabout the mac osx, i'll give it a go later today and let you know. it was a fresh clone from github, so clean shouldnt be necessary i believe. anyway, i'll keep you posted just in case. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16946939","html_url":"https://github.com/elastic/elasticsearch/issues/2931#issuecomment-16946939","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2931","id":16946939,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTQ2OTM5","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T16:49:53Z","updated_at":"2013-04-24T16:49:53Z","author_association":"CONTRIBUTOR","body":"I opened [LUCENE-4955](https://issues.apache.org/jira/browse/LUCENE-4955) for this since this is really caused by a bug / problem in the NGramFilter. This won't make it into lucene 4.3 but we can temporarily port that once it's committed in lucene.\n","performed_via_github_app":null}]