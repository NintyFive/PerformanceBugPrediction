[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234992802","html_url":"https://github.com/elastic/elasticsearch/issues/19576#issuecomment-234992802","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19576","id":234992802,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDk5MjgwMg==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-07-25T15:44:14Z","updated_at":"2016-07-25T15:44:14Z","author_association":"MEMBER","body":"Ouch. I'm not sure at all that the LockObtainFailedException is relevant to the data loss. I do see how it's an artifact of an OOM as things may not be cleared correctly after an OOM , which is why [we recommend restarting the node](https://www.elastic.co/blog/a-heap-of-trouble).\n\nThe problem is caused by the fact that one the node has been restarted, it doesn't find any cluster state in it's data folder and thinks all indices are gone:\n\n```\n[INFO ][gateway ] [] recovered [0] indices into cluster_state\n```\n\nWhile that is troubling on it's own, it doesn't still explain the data lost as normally ES will reimport that indices from their data folders, with the following message in the logs:\n\n```\ndangling index, exists on local file system, but not in cluster metadata\n```\n\n> the index directories are still present, but contain only _state, no data.\n\nIt's a bit weird also that you do have `_state` folders and files. When ES deletes indices it will delete all the folder as well.\n\nCan you provide a list of the current directory structure, with the files?\n\nIf there is anything else that you think is relevant, given the above explanation - please share. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235011509","html_url":"https://github.com/elastic/elasticsearch/issues/19576#issuecomment-235011509","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19576","id":235011509,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTAxMTUwOQ==","user":{"login":"DaveChapman","id":5517266,"node_id":"MDQ6VXNlcjU1MTcyNjY=","avatar_url":"https://avatars3.githubusercontent.com/u/5517266?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveChapman","html_url":"https://github.com/DaveChapman","followers_url":"https://api.github.com/users/DaveChapman/followers","following_url":"https://api.github.com/users/DaveChapman/following{/other_user}","gists_url":"https://api.github.com/users/DaveChapman/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveChapman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveChapman/subscriptions","organizations_url":"https://api.github.com/users/DaveChapman/orgs","repos_url":"https://api.github.com/users/DaveChapman/repos","events_url":"https://api.github.com/users/DaveChapman/events{/privacy}","received_events_url":"https://api.github.com/users/DaveChapman/received_events","type":"User","site_admin":false},"created_at":"2016-07-25T16:47:52Z","updated_at":"2016-07-25T16:47:52Z","author_association":"NONE","body":"Hi, an update to this: the data seems to still be on disk (I had forgotten that we were writing to a number of directories).\n\nAnyway our configuration is as follows:\n\n`path.data: /data0/data,/data1/data,/data2/data`\n\nAnd our data directories are sized as:\n\n`924K   /data0/data`\n`72G    /data1/data`\n`90G    /data2/data`\n\nHowever, data is not being returned from our searches before the time we restarted Elastic this morning (new items are visible however). The cluster state is yellow.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235232755","html_url":"https://github.com/elastic/elasticsearch/issues/19576#issuecomment-235232755","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19576","id":235232755,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTIzMjc1NQ==","user":{"login":"DaveChapman","id":5517266,"node_id":"MDQ6VXNlcjU1MTcyNjY=","avatar_url":"https://avatars3.githubusercontent.com/u/5517266?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveChapman","html_url":"https://github.com/DaveChapman","followers_url":"https://api.github.com/users/DaveChapman/followers","following_url":"https://api.github.com/users/DaveChapman/following{/other_user}","gists_url":"https://api.github.com/users/DaveChapman/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveChapman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveChapman/subscriptions","organizations_url":"https://api.github.com/users/DaveChapman/orgs","repos_url":"https://api.github.com/users/DaveChapman/repos","events_url":"https://api.github.com/users/DaveChapman/events{/privacy}","received_events_url":"https://api.github.com/users/DaveChapman/received_events","type":"User","site_admin":false},"created_at":"2016-07-26T10:43:38Z","updated_at":"2016-07-26T10:43:38Z","author_association":"NONE","body":"Hi, another update. We have restarted the node again and the indices/data have reappeared, however data loaded since the previous restart is missing. Any ideas as to what may have happened here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235241125","html_url":"https://github.com/elastic/elasticsearch/issues/19576#issuecomment-235241125","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19576","id":235241125,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTI0MTEyNQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-07-26T11:27:43Z","updated_at":"2016-07-26T11:27:43Z","author_association":"MEMBER","body":"I suspect something is off in your cluster configuration causing the paths within the data folders to change. Either path locking issues or maybe something stupid like the cluster name changes with a restart. That's why I ask for a dump you current directory structure. If you rather keep it private it  you can mail it to my first name at elastic.co\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235243656","html_url":"https://github.com/elastic/elasticsearch/issues/19576#issuecomment-235243656","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19576","id":235243656,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTI0MzY1Ng==","user":{"login":"DaveChapman","id":5517266,"node_id":"MDQ6VXNlcjU1MTcyNjY=","avatar_url":"https://avatars3.githubusercontent.com/u/5517266?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveChapman","html_url":"https://github.com/DaveChapman","followers_url":"https://api.github.com/users/DaveChapman/followers","following_url":"https://api.github.com/users/DaveChapman/following{/other_user}","gists_url":"https://api.github.com/users/DaveChapman/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveChapman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveChapman/subscriptions","organizations_url":"https://api.github.com/users/DaveChapman/orgs","repos_url":"https://api.github.com/users/DaveChapman/repos","events_url":"https://api.github.com/users/DaveChapman/events{/privacy}","received_events_url":"https://api.github.com/users/DaveChapman/received_events","type":"User","site_admin":false},"created_at":"2016-07-26T11:41:44Z","updated_at":"2016-07-26T11:41:44Z","author_association":"NONE","body":"Hi, I will need to check if I can send you the directory structure, however this may not be helpful as everything is currently working as expected. We are trying to replicate the issue at the moment.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235306484","html_url":"https://github.com/elastic/elasticsearch/issues/19576#issuecomment-235306484","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19576","id":235306484,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTMwNjQ4NA==","user":{"login":"DaveChapman","id":5517266,"node_id":"MDQ6VXNlcjU1MTcyNjY=","avatar_url":"https://avatars3.githubusercontent.com/u/5517266?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveChapman","html_url":"https://github.com/DaveChapman","followers_url":"https://api.github.com/users/DaveChapman/followers","following_url":"https://api.github.com/users/DaveChapman/following{/other_user}","gists_url":"https://api.github.com/users/DaveChapman/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveChapman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveChapman/subscriptions","organizations_url":"https://api.github.com/users/DaveChapman/orgs","repos_url":"https://api.github.com/users/DaveChapman/repos","events_url":"https://api.github.com/users/DaveChapman/events{/privacy}","received_events_url":"https://api.github.com/users/DaveChapman/received_events","type":"User","site_admin":false},"created_at":"2016-07-26T15:33:32Z","updated_at":"2016-07-26T15:33:32Z","author_association":"NONE","body":"So we have managed to trigger the OOM again, however without the LockObtainFailedException. This time the node was able to recover on it's own.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235307225","html_url":"https://github.com/elastic/elasticsearch/issues/19576#issuecomment-235307225","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19576","id":235307225,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTMwNzIyNQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-07-26T15:35:36Z","updated_at":"2016-07-26T15:35:36Z","author_association":"MEMBER","body":"I strongly suspect it had to do with the node restart not the OOM. It's also very hard to predict/reproduce how an OOM will affect the node.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235326192","html_url":"https://github.com/elastic/elasticsearch/issues/19576#issuecomment-235326192","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19576","id":235326192,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTMyNjE5Mg==","user":{"login":"DaveChapman","id":5517266,"node_id":"MDQ6VXNlcjU1MTcyNjY=","avatar_url":"https://avatars3.githubusercontent.com/u/5517266?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveChapman","html_url":"https://github.com/DaveChapman","followers_url":"https://api.github.com/users/DaveChapman/followers","following_url":"https://api.github.com/users/DaveChapman/following{/other_user}","gists_url":"https://api.github.com/users/DaveChapman/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveChapman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveChapman/subscriptions","organizations_url":"https://api.github.com/users/DaveChapman/orgs","repos_url":"https://api.github.com/users/DaveChapman/repos","events_url":"https://api.github.com/users/DaveChapman/events{/privacy}","received_events_url":"https://api.github.com/users/DaveChapman/received_events","type":"User","site_admin":false},"created_at":"2016-07-26T16:34:12Z","updated_at":"2016-07-26T16:34:12Z","author_association":"NONE","body":"We have replicated the OOM with the LockObtainFailedException and see the following in the logs after a restart:\n`[WARN ][rest.suppressed          ] /_bulk Params: {}\nClusterBlockException[blocked by: [SERVICE_UNAVAILABLE/1/state not recovered / initialized];[SERVICE_UNAVAILABLE/2/no master];]\n    at org.elasticsearch.cluster.block.ClusterBlocks.globalBlockedException(ClusterBlocks.java:154)\n    at org.elasticsearch.cluster.block.ClusterBlocks.globalBlockedRaiseException(ClusterBlocks.java:144)\n    at org.elasticsearch.action.bulk.TransportBulkAction.executeBulk(TransportBulkAction.java:212)\n    at org.elasticsearch.action.bulk.TransportBulkAction.doExecute(TransportBulkAction.java:164)\n    at org.elasticsearch.action.bulk.TransportBulkAction.doExecute(TransportBulkAction.java:71)\n    at org.elasticsearch.action.support.TransportAction.doExecute(TransportAction.java:149)\n    at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:137)\n    at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:85)\n    at org.elasticsearch.client.node.NodeClient.doExecute(NodeClient.java:58)\n    at org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:359)\n    at org.elasticsearch.client.FilterClient.doExecute(FilterClient.java:52)\n    at org.elasticsearch.rest.BaseRestHandler$HeadersAndContextCopyClient.doExecute(BaseRestHandler.java:83)\n    at org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:359)\n    at org.elasticsearch.client.support.AbstractClient.bulk(AbstractClient.java:436)\n    at org.elasticsearch.rest.action.bulk.RestBulkAction.handleRequest(RestBulkAction.java:90)\n    at org.elasticsearch.rest.BaseRestHandler.handleRequest(BaseRestHandler.java:54)\n    at org.elasticsearch.rest.RestController.executeHandler(RestController.java:205)\n    at org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:166)\n    at org.elasticsearch.http.HttpServer.internalDispatchRequest(HttpServer.java:128)\n    at org.elasticsearch.http.HttpServer$Dispatcher.dispatchRequest(HttpServer.java:86)\n    at org.elasticsearch.http.netty.NettyHttpServerTransport.dispatchRequest(NettyHttpServerTransport.java:449)\n    at org.elasticsearch.http.netty.HttpRequestHandler.messageReceived(HttpRequestHandler.java:61)\n    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\n    at org.elasticsearch.http.netty.pipelining.HttpPipeliningHandler.messageReceived(HttpPipeliningHandler.java:60)\n    at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:88)\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\n    at org.jboss.netty.handler.codec.http.HttpChunkAggregator.messageReceived(HttpChunkAggregator.java:145)\n    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\n    at org.jboss.netty.handler.codec.http.HttpContentDecoder.messageReceived(HttpContentDecoder.java:108)\n    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\n    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)\n    at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:459)\n    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:536)\n    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:435)\n    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\n    at org.elasticsearch.common.netty.OpenChannelsHandler.handleUpstream(OpenChannelsHandler.java:75)\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)\n    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)\n    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)\n    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)\n    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)\n    at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)\n    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\n    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\n    at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n    at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)`\n\nAfter the restart the indices were again missing, they came back after a second restart.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235330989","html_url":"https://github.com/elastic/elasticsearch/issues/19576#issuecomment-235330989","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19576","id":235330989,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTMzMDk4OQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-07-26T16:50:19Z","updated_at":"2016-07-26T16:50:19Z","author_association":"MEMBER","body":"@DaveChapman thx, sadly it doesn't add much info. I will either need a complete directory listing or debug logs from before and after the issue. Can you send me those? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235550342","html_url":"https://github.com/elastic/elasticsearch/issues/19576#issuecomment-235550342","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19576","id":235550342,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTU1MDM0Mg==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-07-27T10:41:54Z","updated_at":"2016-07-27T10:41:54Z","author_association":"MEMBER","body":"@DaveChapman thx for your e-mail. The problem lies in the fact the after the node restart, the nodes picks up a different data folder lock ordinal then before, causing it not see the previous data. This is setup this way to support multiple nodes on the same server - when a node starts up, it will look for the first ordinal it can lock (others are used by other nodes) and use that. Looking at the logs you sent me, I see what node shutting down and then a new one starting up:\n\n```\n[2016-07-25 10:39:57,637][INFO ][node                     ] [dev3_es] stopped\n[2016-07-25 10:39:57,637][INFO ][node                     ] [dev3_es] closing ...\n[2016-07-25 10:39:57,637][INFO ][node                     ] [dev3_es] stopped\n[2016-07-25 10:39:57,637][INFO ][node                     ] [dev3_es] closing ...\n[2016-07-25 10:40:00,792][INFO ][node                     ] [dev3_es] version[2.3.2], pid[26270], build[b9e4a6a/2016-04-21T16:03:47Z]\n[2016-07-25 10:40:00,793][INFO ][node                     ] [dev3_es] initializing ...\n```\n\nthe weird thing is that we miss a log message saying `closed` from the first node. See [here](https://github.com/elastic/elasticsearch/blob/2.3/core/src/main/java/org/elasticsearch/node/Node.java#L436). \n\nAlso, the new nodes starts up but somehow disappears and a new one is started again:\n\n```\n[2016-07-25 10:40:06,370][INFO ][node                     ] [dev3_es] initialized\n[2016-07-25 10:40:06,370][INFO ][node                     ] [dev3_es] starting ...\n```\n\nAny idea what's going on?\n\nAlso, you can consider using `node.max_local_storage: 1` see [here](https://www.elastic.co/guide/en/elasticsearch/reference/2.3/modules-node.html#max-local-storage-nodes).\n\nI'm closing this now as it seems to be environment related. If not we can reopen. Just a heads up - when if/you re-open, it will be nice to get debug logging of the node startup, with the addition of setting the `env` logger to `TRACE`, it will tell some more of the paths it ended using  and why.\n","performed_via_github_app":null}]