[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40906879","html_url":"https://github.com/elastic/elasticsearch/issues/5687#issuecomment-40906879","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5687","id":40906879,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTA2ODc5","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2014-04-20T22:43:47Z","updated_at":"2014-04-20T22:43:47Z","author_association":"CONTRIBUTOR","body":"Thanks for raising this issue. \nAdding support for doctype prefixes in field names probably brings the expectation that background frequencies are also filtered by the doc type e.g. if an index contains `tweet` and `email` doc types then `tweet.text` should filter out any counts for `email.text` occurrences in the single indexed `text` field held by the es index.\nThis scenario will be expensive as we'll need to drop down a level into postings to count docs that match a doctype filter (ideally only if the index contains > 1 doctype with that field). \nI'm not sure what would happen if the query is on an indiscriminate `text` field (so querying both `email` and `tweet` doc types) but the significant_terms analysis is requested on a qualified `email.text` field - a quick test with a plain `terms` agg suggests the counts produced in this case are not filtered by doc type. So if the foreground stats obtained from FieldData cache are unfiltered then there is a case for making the background stats unfiltered too.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68364184","html_url":"https://github.com/elastic/elasticsearch/issues/5687#issuecomment-68364184","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5687","id":68364184,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzY0MTg0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-30T15:15:35Z","updated_at":"2014-12-30T15:15:35Z","author_association":"CONTRIBUTOR","body":"Closing in favour of #8870\n","performed_via_github_app":null}]