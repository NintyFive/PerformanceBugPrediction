{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8846","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8846/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8846/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8846/events","html_url":"https://github.com/elastic/elasticsearch/issues/8846","id":51427226,"node_id":"MDU6SXNzdWU1MTQyNzIyNg==","number":8846,"title":"Problems when upgrade elasticsearch from 1.3.5 to 1.4.1","user":{"login":"holdstop","id":8157813,"node_id":"MDQ6VXNlcjgxNTc4MTM=","avatar_url":"https://avatars0.githubusercontent.com/u/8157813?v=4","gravatar_id":"","url":"https://api.github.com/users/holdstop","html_url":"https://github.com/holdstop","followers_url":"https://api.github.com/users/holdstop/followers","following_url":"https://api.github.com/users/holdstop/following{/other_user}","gists_url":"https://api.github.com/users/holdstop/gists{/gist_id}","starred_url":"https://api.github.com/users/holdstop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/holdstop/subscriptions","organizations_url":"https://api.github.com/users/holdstop/orgs","repos_url":"https://api.github.com/users/holdstop/repos","events_url":"https://api.github.com/users/holdstop/events{/privacy}","received_events_url":"https://api.github.com/users/holdstop/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2014-12-09T13:29:21Z","updated_at":"2014-12-10T08:59:23Z","closed_at":"2014-12-10T02:33:55Z","author_association":"NONE","active_lock_reason":null,"body":"Hi, all\nI want to upgrade my elasticsearch from 1.3.5 to 1.4.1. I followed this page http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/setup-upgrade.html#rolling-upgrades and performed a rolling upgrade. When I startup a new version node, I got some error logs like this:\n\n```\n[2014-12-09 09:39:26,418][WARN ][cluster.service          ] [5xv144] failed to apply updated cluster state:\nversion [1570], source [zen-disco-receive(from master [[5xv122][LNJfg356QAyA4biMKIII1A][5xv122][inet[/10.1.10.122:9300]]{action.disable_shutdown=true, data=false, max_local_storage_nodes=1, master=true}])]\nnodes:\n   [5xv123][3omD8UaXQTS552OpQd8e9w][5xv123][inet[/10.1.10.123:9300]]{action.disable_shutdown=true, max_local_storage_nodes=1, master=false}\n   [5xv121][YSMiYvyySeKs2muCYSRU9A][5xv121][inet[/10.1.10.121:9300]]{action.disable_shutdown=true, max_local_storage_nodes=1, master=false}\n   (many nodes and shards information)\n   ..........\norg.elasticsearch.indices.IndexCreationException: [bbs] failed to create index\n        at org.elasticsearch.indices.InternalIndicesService.createIndex(InternalIndicesService.java:301)\n        at org.elasticsearch.indices.cluster.IndicesClusterStateService.applyNewIndices(IndicesClusterStateService.java:310)\n        at org.elasticsearch.indices.cluster.IndicesClusterStateService.clusterChanged(IndicesClusterStateService.java:179)\n        at org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:431)\n        at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:153)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\nCaused by: org.elasticsearch.ElasticsearchIllegalStateException: [index.version.created] is not present in the index settings for index with uuid: [null]\n        at org.elasticsearch.Version.indexCreated(Version.java:401)\n        at org.elasticsearch.index.analysis.Analysis.parseAnalysisVersion(Analysis.java:95)\n        at org.elasticsearch.index.analysis.AbstractTokenizerFactory.<init>(AbstractTokenizerFactory.java:41)\n        at org.elasticsearch.index.analysis.IkTokenizerFactory.<init>(IkTokenizerFactory.java:17)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n        at java.lang.reflect.Constructor.newInstance(Unknown Source)\n        at org.elasticsearch.common.inject.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:54)\n        at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:86)\n        at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:98)\n        at org.elasticsearch.common.inject.FactoryProxy.get(FactoryProxy.java:52)\n        at org.elasticsearch.common.inject.InjectorImpl$5$1.call(InjectorImpl.java:781)\n        at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:837)\n        at org.elasticsearch.common.inject.InjectorImpl$5.get(InjectorImpl.java:777)\n        at org.elasticsearch.common.inject.assistedinject.FactoryProvider2.invoke(FactoryProvider2.java:221)\n        at com.sun.proxy.$Proxy16.create(Unknown Source)\n        at org.elasticsearch.index.analysis.AnalysisService.<init>(AnalysisService.java:82)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n        at java.lang.reflect.Constructor.newInstance(Unknown Source)\n        at org.elasticsearch.common.inject.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:54)\n        at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:86)\n        at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:98)\n        at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:45)\n        at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:837)\n        at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:42)\n        at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:57)\n        at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:45)\n        at org.elasticsearch.common.inject.SingleParameterInjector.inject(SingleParameterInjector.java:42)\n        at org.elasticsearch.common.inject.SingleParameterInjector.getAll(SingleParameterInjector.java:66)\n        at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:85)\n        at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:98)\n        at org.elasticsearch.common.inject.FactoryProxy.get(FactoryProxy.java:52)\n        at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:45)\n        at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:837)\n        at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:42)\n        at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:57)\n        at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:45)\n        at org.elasticsearch.common.inject.SingleParameterInjector.inject(SingleParameterInjector.java:42)\n        at org.elasticsearch.common.inject.SingleParameterInjector.getAll(SingleParameterInjector.java:66)\n        at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:85)\n        at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:98)\n        at org.elasticsearch.common.inject.FactoryProxy.get(FactoryProxy.java:52)\n        at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:45)\n        at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:837)\n        at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:42)\n        at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:57)\n        at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:45)\n        at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:200)\n        at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:193)\n        at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:830)\n        at org.elasticsearch.common.inject.InjectorBuilder.loadEagerSingletons(InjectorBuilder.java:193)\n        at org.elasticsearch.common.inject.InjectorBuilder.injectDynamically(InjectorBuilder.java:175)\n        at org.elasticsearch.common.inject.InjectorBuilder.build(InjectorBuilder.java:110)\n        at org.elasticsearch.common.inject.InjectorImpl.createChildInjector(InjectorImpl.java:131)\n        at org.elasticsearch.common.inject.ModulesBuilder.createChildInjector(ModulesBuilder.java:69)\n        at org.elasticsearch.indices.InternalIndicesService.createIndex(InternalIndicesService.java:299)\n        ... 7 more\n```\n","closed_by":{"login":"holdstop","id":8157813,"node_id":"MDQ6VXNlcjgxNTc4MTM=","avatar_url":"https://avatars0.githubusercontent.com/u/8157813?v=4","gravatar_id":"","url":"https://api.github.com/users/holdstop","html_url":"https://github.com/holdstop","followers_url":"https://api.github.com/users/holdstop/followers","following_url":"https://api.github.com/users/holdstop/following{/other_user}","gists_url":"https://api.github.com/users/holdstop/gists{/gist_id}","starred_url":"https://api.github.com/users/holdstop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/holdstop/subscriptions","organizations_url":"https://api.github.com/users/holdstop/orgs","repos_url":"https://api.github.com/users/holdstop/repos","events_url":"https://api.github.com/users/holdstop/events{/privacy}","received_events_url":"https://api.github.com/users/holdstop/received_events","type":"User","site_admin":false},"performed_via_github_app":null}