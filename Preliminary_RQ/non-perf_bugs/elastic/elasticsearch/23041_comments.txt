[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/278285923","html_url":"https://github.com/elastic/elasticsearch/issues/23041#issuecomment-278285923","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23041","id":278285923,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODI4NTkyMw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-02-08T10:10:23Z","updated_at":"2017-02-08T10:10:23Z","author_association":"CONTRIBUTOR","body":"You have fields with the same name in different mapping types, so for instance you have a field called `field1` in one mapping type which is of type `keyword`, then your reindex process is trying to add a field called `field1` to a different mapping type, but with type `long`.\r\n\r\nFields with the same name in different types in the same index must have the same data type.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/278286737","html_url":"https://github.com/elastic/elasticsearch/issues/23041#issuecomment-278286737","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23041","id":278286737,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODI4NjczNw==","user":{"login":"orinciog","id":10981387,"node_id":"MDQ6VXNlcjEwOTgxMzg3","avatar_url":"https://avatars3.githubusercontent.com/u/10981387?v=4","gravatar_id":"","url":"https://api.github.com/users/orinciog","html_url":"https://github.com/orinciog","followers_url":"https://api.github.com/users/orinciog/followers","following_url":"https://api.github.com/users/orinciog/following{/other_user}","gists_url":"https://api.github.com/users/orinciog/gists{/gist_id}","starred_url":"https://api.github.com/users/orinciog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orinciog/subscriptions","organizations_url":"https://api.github.com/users/orinciog/orgs","repos_url":"https://api.github.com/users/orinciog/repos","events_url":"https://api.github.com/users/orinciog/events{/privacy}","received_events_url":"https://api.github.com/users/orinciog/received_events","type":"User","site_admin":false},"created_at":"2017-02-08T10:14:06Z","updated_at":"2017-02-08T10:18:00Z","author_association":"NONE","body":"Hello!\r\nThank you for your quick response, but I only have one type in my index (\"default\"), and I'm trying to reindex only that type.\r\n\r\nAlso, as I already said, creating a document with exactly the same content using POST API works, but reindex fails.\r\n\r\nAnd maybe I was not clear enough: reindex works, but only for a few documents, where \"field1\" is a string. When \"field1\" is a long, than reindex process stops and throws that error.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/278290503","html_url":"https://github.com/elastic/elasticsearch/issues/23041#issuecomment-278290503","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23041","id":278290503,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODI5MDUwMw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-02-08T10:30:35Z","updated_at":"2017-02-08T10:30:35Z","author_association":"CONTRIBUTOR","body":"There is something you're leaving out, because the scenario you describe works just fine:\r\n\r\nDo the following on a 1.x cluster:\r\n\r\n```\r\nPUT index\r\n{\r\n  \"mappings\": {\r\n    \"default\": {\r\n      \"properties\": {\r\n        \"field1\": {\r\n          \"type\": \"string\",\r\n          \"index\": \"not_analyzed\"\r\n        },\r\n        \"field2\": {\r\n          \"type\": \"double\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nPUT index/default/AU0TIvm5KBq_GySoOJR\r\n{\"field1\":1} \r\n\r\nPUT index/default/AU0tz1N8KBq_GySoDvr9\r\n{\"field2\":2}\r\n\r\n```\r\n\r\nthen do the following on a 5.x cluster:\r\n```\r\nPUT index\r\n{\r\n  \"mappings\": {\r\n    \"default\": {\r\n      \"properties\": {\r\n        \"field1\": {\r\n          \"type\": \"keyword\"\r\n        },\r\n        \"field2\": {\r\n          \"type\": \"float\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nPOST _reindex\r\n{\r\n  \"source\": {\r\n    \"remote\": {\r\n      \"host\": \"http://ip.for.1.x.cluster:9200\"\r\n    },\r\n    \"index\": \"index\",\r\n    \"type\": \"default\",\r\n    \"_source\": true\r\n  },\r\n  \"dest\": {\r\n    \"index\": \"index\"\r\n  }\r\n}\r\n```\r\n\r\nThe above works just fine","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/278293267","html_url":"https://github.com/elastic/elasticsearch/issues/23041#issuecomment-278293267","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23041","id":278293267,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODI5MzI2Nw==","user":{"login":"orinciog","id":10981387,"node_id":"MDQ6VXNlcjEwOTgxMzg3","avatar_url":"https://avatars3.githubusercontent.com/u/10981387?v=4","gravatar_id":"","url":"https://api.github.com/users/orinciog","html_url":"https://github.com/orinciog","followers_url":"https://api.github.com/users/orinciog/followers","following_url":"https://api.github.com/users/orinciog/following{/other_user}","gists_url":"https://api.github.com/users/orinciog/gists{/gist_id}","starred_url":"https://api.github.com/users/orinciog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orinciog/subscriptions","organizations_url":"https://api.github.com/users/orinciog/orgs","repos_url":"https://api.github.com/users/orinciog/repos","events_url":"https://api.github.com/users/orinciog/events{/privacy}","received_events_url":"https://api.github.com/users/orinciog/received_events","type":"User","site_admin":false},"created_at":"2017-02-08T10:42:35Z","updated_at":"2017-02-08T10:42:35Z","author_association":"NONE","body":"Ok. Thank you for your quick response. I will investigate deeper and I will update this thread. \r\n\r\nThank you again for such a quick response.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/278397171","html_url":"https://github.com/elastic/elasticsearch/issues/23041#issuecomment-278397171","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23041","id":278397171,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODM5NzE3MQ==","user":{"login":"orinciog","id":10981387,"node_id":"MDQ6VXNlcjEwOTgxMzg3","avatar_url":"https://avatars3.githubusercontent.com/u/10981387?v=4","gravatar_id":"","url":"https://api.github.com/users/orinciog","html_url":"https://github.com/orinciog","followers_url":"https://api.github.com/users/orinciog/followers","following_url":"https://api.github.com/users/orinciog/following{/other_user}","gists_url":"https://api.github.com/users/orinciog/gists{/gist_id}","starred_url":"https://api.github.com/users/orinciog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orinciog/subscriptions","organizations_url":"https://api.github.com/users/orinciog/orgs","repos_url":"https://api.github.com/users/orinciog/repos","events_url":"https://api.github.com/users/orinciog/events{/privacy}","received_events_url":"https://api.github.com/users/orinciog/received_events","type":"User","site_admin":false},"created_at":"2017-02-08T17:21:49Z","updated_at":"2017-02-08T17:23:47Z","author_association":"NONE","body":"Hello!\r\n\r\nI deleted from ES 1.x the two docs that were in trouble (id: AU0TIvm5KBq_GySoOJRi and id: AU0tz1N8KBq_GySoDvr9) and now the reindex works. \r\n\r\nAnyway, there is one problem in reindex and I have a suggestion: the reindex tasks stop when it encounters a mapping error, like the ones up or for example: `' 0.0.0.0' is not an IP string literal.` or any mapping error. \r\n\r\nIt should exists an option, just like `\"conflicts\": \"proceed\"`, that if a mapping error occurs just skip the documents. It will minimize the overall time spent in reindexing process. \r\n\r\nThank you for your help.","performed_via_github_app":null}]