{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/33734","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33734/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33734/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33734/events","html_url":"https://github.com/elastic/elasticsearch/issues/33734","id":360528911,"node_id":"MDU6SXNzdWUzNjA1Mjg5MTE=","number":33734,"title":"Add the ability to set attributes on path.data entries","user":{"login":"bra-fsn","id":820331,"node_id":"MDQ6VXNlcjgyMDMzMQ==","avatar_url":"https://avatars2.githubusercontent.com/u/820331?v=4","gravatar_id":"","url":"https://api.github.com/users/bra-fsn","html_url":"https://github.com/bra-fsn","followers_url":"https://api.github.com/users/bra-fsn/followers","following_url":"https://api.github.com/users/bra-fsn/following{/other_user}","gists_url":"https://api.github.com/users/bra-fsn/gists{/gist_id}","starred_url":"https://api.github.com/users/bra-fsn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bra-fsn/subscriptions","organizations_url":"https://api.github.com/users/bra-fsn/orgs","repos_url":"https://api.github.com/users/bra-fsn/repos","events_url":"https://api.github.com/users/bra-fsn/events{/privacy}","received_events_url":"https://api.github.com/users/bra-fsn/received_events","type":"User","site_admin":false},"labels":[{"id":837246479,"node_id":"MDU6TGFiZWw4MzcyNDY0Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Allocation","name":":Distributed/Allocation","color":"0e8a16","default":false,"description":"All issues relating to the decision making around placing a shard (both master logic & on the nodes)"},{"id":23172,"node_id":"MDU6TGFiZWwyMzE3Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Efeature","name":">feature","color":"006b75","default":false,"description":null},{"id":929267538,"node_id":"MDU6TGFiZWw5MjkyNjc1Mzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/team-discuss","name":"team-discuss","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-09-15T10:39:26Z","updated_at":"2018-09-19T14:24:57Z","closed_at":"2018-09-19T14:24:57Z","author_association":"NONE","active_lock_reason":null,"body":"Elasticsearch currently supports adding attributes to nodes. You can start a node with:\r\n```./bin/elasticsearch -Enode.attr.storage_type=ssd```\r\nand another with:\r\n```./bin/elasticsearch -Enode.attr.storage_type=hdd```\r\nand you can place indices to a hdd or ssd node:\r\n```\r\nPUT /logs_2016-12-26\r\n{\r\n  \"settings\": {\r\n    \"index.routing.allocation.require.storage_type\": \"hdd\"\r\n  }\r\n}\r\n```\r\n\r\nThe problem with this you can only place attributes onto nodes, but a(n elasticsearch) node can have multiple data paths and you can't use this feature to decide what index goes to what path.\r\n\r\nSo I propose a new feature, which makes it possible to add attributes to path.data entries.\r\nSetting this could work like this:\r\n```path.data: /hdd/0;path.attr.storage_type=hdd, /hdd/1;path.attr.storage_type=hdd, /hdd/2;path.attr.storage_type=hdd, /hdd/3, /ssd/0;path.attr.storage_type=ssd, /ssd/1;path.attr.storage_type=ssd```\r\n\r\npath.attr could take precedence over node.attr, meaning if you've started the above node with:\r\n```./bin/elasticsearch -Enode.attr.storage_type=hdd```\r\nand set the routing.allocation for the logs_2016-12-26 to hdd, then it could be placed to any of the /hdd data paths (even onto /hdd/3, which doesn't have a path.attr set, because node.attr takes place there), but not to the ssd ones.\r\n\r\nAnd if you have indices with routing.allocation requiring a storage_type of ssd, they could be placed onto this node (even if it had node.attr.storage_type=hdd), but only to /ssd/* paths, because those paths are marked as storage_type=ssd.\r\n\r\nI think this is easy to do and offers much more flexibility than elasticsearch offers today.","closed_by":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"performed_via_github_app":null}