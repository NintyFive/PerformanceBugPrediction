{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9267","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9267/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9267/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9267/events","html_url":"https://github.com/elastic/elasticsearch/issues/9267","id":54153481,"node_id":"MDU6SXNzdWU1NDE1MzQ4MQ==","number":9267,"title":"Too many files for a index","user":{"login":"zhihuiFan","id":3489747,"node_id":"MDQ6VXNlcjM0ODk3NDc=","avatar_url":"https://avatars3.githubusercontent.com/u/3489747?v=4","gravatar_id":"","url":"https://api.github.com/users/zhihuiFan","html_url":"https://github.com/zhihuiFan","followers_url":"https://api.github.com/users/zhihuiFan/followers","following_url":"https://api.github.com/users/zhihuiFan/following{/other_user}","gists_url":"https://api.github.com/users/zhihuiFan/gists{/gist_id}","starred_url":"https://api.github.com/users/zhihuiFan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhihuiFan/subscriptions","organizations_url":"https://api.github.com/users/zhihuiFan/orgs","repos_url":"https://api.github.com/users/zhihuiFan/repos","events_url":"https://api.github.com/users/zhihuiFan/events{/privacy}","received_events_url":"https://api.github.com/users/zhihuiFan/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-01-13T05:49:27Z","updated_at":"2015-01-13T06:09:19Z","closed_at":"2015-01-13T06:09:19Z","author_association":"NONE","active_lock_reason":null,"body":"In my case,  a index have 1016 files while its size is only 27G.  How can I reduce the number of file for a index to avoid using up all the open file handlers?\n\n[root@lvs2b1c-dlqncu5v9t mongodlog-index-2014.12.01]# pwd\n/datalog01/elasticsearch/dblogsearch/nodes/0/indices/mongodlog-index-2014.12.01\n[root@lvs2b1c-dlqncu5v9t mongodlog-index-2014.12.01]# ls\n0  1  2  3  4  _state\n[root@lvs2b1c-dlqncu5v9t mongodlog-index-2014.12.01]# find . | wc -l\n1016\n[root@lvs2b1c-dlqncu5v9t mongodlog-index-2014.12.01]# du -sh .\n27G .\n\nHere is some sample files. \n\n[root@lvs2b1c-dlqncu5v9t index]# ls /datalog01/elasticsearch/dblogsearch/nodes/0/indices/mongodlog-index-2014.12.01\n0  1  2  3  4  _state\n[root@lvs2b1c-dlqncu5v9t index]# pwd\n/datalog01/elasticsearch/dblogsearch/nodes/0/indices/mongodlog-index-2014.12.01/0/index\n[root@lvs2b1c-dlqncu5v9t index]# ls\n_1qsy_es090_0.blm     _1ulw.fnm             _1vq6_es090_0.doc     _1w42_Lucene49_0.dvd  _1wnr_es090_0.pos     _1wtu_Lucene49_0.dvm  _1x4o_es090_0.tim     _1x4y.fnm             _1x58_Lucene49_0.dvd\n_1qsy_es090_0.doc     _1ulw_Lucene49_0.dvd  _1vq6_es090_0.pos     _1w42_Lucene49_0.dvm  _1wnr_es090_0.tim     _1wtu.nvd             _1x4o_es090_0.tip     _1x4y_Lucene49_0.dvd  _1x58_Lucene49_0.dvm\n_1qsy_es090_0.pos     _1ulw_Lucene49_0.dvm  _1vq6_es090_0.tim     _1w42.nvd             _1wnr_es090_0.tip     _1wtu.nvm             _1x4o.fdt             _1x4y_Lucene49_0.dvm  _1x58.nvd\n_1qsy_es090_0.tim     _1ulw.nvd             _1vq6_es090_0.tip     _1w42.nvm             _1wnr.fdt             _1wtu.si              _1x4o.fdx             _1x4y.nvd             _1x58.nvm\n_1qsy_es090_0.tip     _1ulw.nvm             _1vq6.fdt             _1w42.si              _1wnr.fdx             _1wzo_es090_0.blm     _1x4o.fnm             _1x4y.nvm             _1x58.si\n_1qsy.fdt             _1ulw.si              _1vq6.fdx             _1wgu_es090_0.blm     _1wnr.fnm             _1wzo_es090_0.doc     _1x4o_Lucene49_0.dvd  _1x4y.si              _1x59.cfe\n_1qsy.fdx             _1vfw_es090_0.blm     _1vq6.fnm             _1wgu_es090_0.doc     _1wnr_Lucene49_0.dvd  _1wzo_es090_0.pos     _1x4o_Lucene49_0.dvm  _1x4z.cfe             _1x59.cfs\n_1qsy.fnm             _1vfw_es090_0.doc     _1vq6_Lucene49_0.dvd  _1wgu_es090_0.pos     _1wnr_Lucene49_0.dvm  _1wzo_es090_0.tim     _1x4o.nvd             _1x4z.cfs             _1x59.si\n_1qsy_Lucene49_0.dvd  _1vfw_es090_0.pos     _1vq6_Lucene49_0.dvm  _1wgu_es090_0.tim     _1wnr.nvd             _1wzo_es090_0.tip     _1x4o.nvm             _1x4z.si              _1x5a.cfe\n_1qsy_Lucene49_0.dvm  _1vfw_es090_0.tim     _1vq6.nvd             _1wgu_es090_0.tip     _1wnr.nvm             _1wzo.fdt             _1x4o.si              _1x57.cfe             _1x5a.cfs\n_1qsy.nvd             _1vfw_es090_0.tip     _1vq6.nvm             _1wgu.fdt             _1wnr.si              _1wzo.fdx             _1x4p.cfe             _1x57.cfs             _1x5a.si\n_1qsy.nvm             _1vfw.fdt             _1vq6.si              _1wgu.fdx             _1wtu_es090_0.blm     _1wzo.fnm             _1x4p.cfs             _1x57.si              segments_1k\n_1qsy.si              _1vfw.fdx             _1w42_es090_0.blm     _1wgu.fnm             _1wtu_es090_0.doc     _1wzo_Lucene49_0.dvd  _1x4p.si              _1x58_es090_0.blm     segments.gen\n_1ulw_es090_0.blm     _1vfw.fnm             _1w42_es090_0.doc     _1wgu_Lucene49_0.dvd  _1wtu_es090_0.pos     _1wzo_Lucene49_0.dvm  _1x4y_es090_0.blm     _1x58_es090_0.doc     write.lock\n_1ulw_es090_0.doc     _1vfw_Lucene49_0.dvd  _1w42_es090_0.pos     _1wgu_Lucene49_0.dvm  _1wtu_es090_0.tim     _1wzo.nvd             _1x4y_es090_0.doc     _1x58_es090_0.pos\n_1ulw_es090_0.pos     _1vfw_Lucene49_0.dvm  _1w42_es090_0.tim     _1wgu.nvd             _1wtu_es090_0.tip     _1wzo.nvm             _1x4y_es090_0.pos     _1x58_es090_0.tim\n_1ulw_es090_0.tim     _1vfw.nvd             _1w42_es090_0.tip     _1wgu.nvm             _1wtu.fdt             _1wzo.si              _1x4y_es090_0.tim     _1x58_es090_0.tip\n_1ulw_es090_0.tip     _1vfw.nvm             _1w42.fdt             _1wgu.si              _1wtu.fdx             _1x4o_es090_0.blm     _1x4y_es090_0.tip     _1x58.fdt\n_1ulw.fdt             _1vfw.si              _1w42.fdx             _1wnr_es090_0.blm     _1wtu.fnm             _1x4o_es090_0.doc     _1x4y.fdt             _1x58.fdx\n_1ulw.fdx             _1vq6_es090_0.blm     _1w42.fnm             _1wnr_es090_0.doc     _1wtu_Lucene49_0.dvd  _1x4o_es090_0.pos     _1x4y.fdx             _1x58.fnm\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}