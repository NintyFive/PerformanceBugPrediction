{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/24538","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24538/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24538/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24538/events","html_url":"https://github.com/elastic/elasticsearch/issues/24538","id":226903355,"node_id":"MDU6SXNzdWUyMjY5MDMzNTU=","number":24538,"title":"Nest 5: Scroll issue","user":{"login":"slorena","id":5675790,"node_id":"MDQ6VXNlcjU2NzU3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/5675790?v=4","gravatar_id":"","url":"https://api.github.com/users/slorena","html_url":"https://github.com/slorena","followers_url":"https://api.github.com/users/slorena/followers","following_url":"https://api.github.com/users/slorena/following{/other_user}","gists_url":"https://api.github.com/users/slorena/gists{/gist_id}","starred_url":"https://api.github.com/users/slorena/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slorena/subscriptions","organizations_url":"https://api.github.com/users/slorena/orgs","repos_url":"https://api.github.com/users/slorena/repos","events_url":"https://api.github.com/users/slorena/events{/privacy}","received_events_url":"https://api.github.com/users/slorena/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-05-07T23:06:25Z","updated_at":"2017-05-08T00:58:52Z","closed_at":"2017-05-08T00:58:23Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\nI'm using Elasticsearch 5.1.1 and Nest 5.0 and I'm trying to search items by query.\r\nThis is the code:\r\nvar searchDescriptor = new SearchDescriptor<object>()\r\n                .Index(indexName)\r\n                .Size(itemsPerShard)\r\n                .StoredFields((Field)\"Id\")\r\n                .Scroll(\"1m\")\r\n                .Sort(ss => ss.Ascending(SortSpecialField.DocumentIndexOrder))\r\n                .Query(qd => qd\r\n                    .QueryString(snd => snd\r\n                        .Query(deleteByQuery)\r\n                        .DefaultOperator(Operator.And))\r\n                );\r\nvar scanResults = client.Search<object>(s => searchDescriptor);\r\n\r\nWhen itemsPerShard > 10.000, I receive this error:\r\n{Invalid NEST response built from a unsuccessful low level call on POST: /index/_search?scroll=1m}.\r\nAnd in elasticsearch log file:\r\nBatch size is too large, size must be less than or equal to: [10000] but was [10001]. Scroll batch sizes cost as much memory as result windows so they are controlled by the [index.max_result_window] index level setting.\r\n\r\nHow can I resolve this issue?\r\n\r\nThank you!","closed_by":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"performed_via_github_app":null}