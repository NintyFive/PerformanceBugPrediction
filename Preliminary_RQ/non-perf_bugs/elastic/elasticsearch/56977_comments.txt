[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/631298077","html_url":"https://github.com/elastic/elasticsearch/issues/56977#issuecomment-631298077","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56977","id":631298077,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTI5ODA3Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-05-20T07:41:38Z","updated_at":"2020-05-20T07:41:38Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Packaging)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/639766650","html_url":"https://github.com/elastic/elasticsearch/issues/56977#issuecomment-639766650","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56977","id":639766650,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTc2NjY1MA==","user":{"login":"williamrandolph","id":3253644,"node_id":"MDQ6VXNlcjMyNTM2NDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/3253644?v=4","gravatar_id":"","url":"https://api.github.com/users/williamrandolph","html_url":"https://github.com/williamrandolph","followers_url":"https://api.github.com/users/williamrandolph/followers","following_url":"https://api.github.com/users/williamrandolph/following{/other_user}","gists_url":"https://api.github.com/users/williamrandolph/gists{/gist_id}","starred_url":"https://api.github.com/users/williamrandolph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/williamrandolph/subscriptions","organizations_url":"https://api.github.com/users/williamrandolph/orgs","repos_url":"https://api.github.com/users/williamrandolph/repos","events_url":"https://api.github.com/users/williamrandolph/events{/privacy}","received_events_url":"https://api.github.com/users/williamrandolph/received_events","type":"User","site_admin":false},"created_at":"2020-06-05T20:01:22Z","updated_at":"2020-06-05T20:01:22Z","author_association":"CONTRIBUTOR","body":"I tracked down what the bug is. Our JVM options parser is supposed to emit a string of white-space separated java options. The batch script is expecting single white-spaces, converting them to semi-colons, and feeding that into the service registration command. But the options parser is emitting a double whitespace, which we convert into double semicolons, and the service installation is choking on that and dropping most of our JVM options, including some crucial ones.\r\n\r\nI'm going to look at fixing up the output of the JVM options parser and making the batch script more robust, if possible.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/639802582","html_url":"https://github.com/elastic/elasticsearch/issues/56977#issuecomment-639802582","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56977","id":639802582,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTgwMjU4Mg==","user":{"login":"williamrandolph","id":3253644,"node_id":"MDQ6VXNlcjMyNTM2NDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/3253644?v=4","gravatar_id":"","url":"https://api.github.com/users/williamrandolph","html_url":"https://github.com/williamrandolph","followers_url":"https://api.github.com/users/williamrandolph/followers","following_url":"https://api.github.com/users/williamrandolph/following{/other_user}","gists_url":"https://api.github.com/users/williamrandolph/gists{/gist_id}","starred_url":"https://api.github.com/users/williamrandolph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/williamrandolph/subscriptions","organizations_url":"https://api.github.com/users/williamrandolph/orgs","repos_url":"https://api.github.com/users/williamrandolph/repos","events_url":"https://api.github.com/users/williamrandolph/events{/privacy}","received_events_url":"https://api.github.com/users/williamrandolph/received_events","type":"User","site_admin":false},"created_at":"2020-06-05T20:38:44Z","updated_at":"2020-06-05T20:38:44Z","author_association":"CONTRIBUTOR","body":"### Cause\r\n\r\nThe \"missing\" option is a setting that only gets inserted on JDK 14 and newer, so this problem should only occur on JDK 13 and earlier. This was added in ticket #54853. It's only an issue with the Windows service; the other startup commands can tolerate an extra whitespace just fine.\r\n\r\n### Workaround\r\n\r\nThe workaround in the original issue isn't ideal because it still drops a lot of JVM options. The better workaround would be to add a line to `elasticsearch-service.bat` that will remove the double semicolon. There is already a line that translates spaces to semicolons:\r\n\r\n```\r\nif not \"%ES_JAVA_OPTS%\" == \"\" set ES_JAVA_OPTS=%ES_JAVA_OPTS: =;%\r\n```\r\n\r\nImmediately after this, insert:\r\n\r\n```\r\nif not \"%ES_JAVA_OPTS%\" == \"\" set ES_JAVA_OPTS=%ES_JAVA_OPTS:;;=;%\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/694964638","html_url":"https://github.com/elastic/elasticsearch/issues/56977#issuecomment-694964638","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56977","id":694964638,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDk2NDYzOA==","user":{"login":"alitoca","id":35346639,"node_id":"MDQ6VXNlcjM1MzQ2NjM5","avatar_url":"https://avatars3.githubusercontent.com/u/35346639?v=4","gravatar_id":"","url":"https://api.github.com/users/alitoca","html_url":"https://github.com/alitoca","followers_url":"https://api.github.com/users/alitoca/followers","following_url":"https://api.github.com/users/alitoca/following{/other_user}","gists_url":"https://api.github.com/users/alitoca/gists{/gist_id}","starred_url":"https://api.github.com/users/alitoca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alitoca/subscriptions","organizations_url":"https://api.github.com/users/alitoca/orgs","repos_url":"https://api.github.com/users/alitoca/repos","events_url":"https://api.github.com/users/alitoca/events{/privacy}","received_events_url":"https://api.github.com/users/alitoca/received_events","type":"User","site_admin":false},"created_at":"2020-09-18T16:29:33Z","updated_at":"2020-09-18T16:29:33Z","author_association":"NONE","body":"> if not \"%ES_JAVA_OPTS%\" == \"\" set ES_JAVA_OPTS=%ES_JAVA_OPTS:;;=;%\r\n\r\nThis solution is not working.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/696172846","html_url":"https://github.com/elastic/elasticsearch/issues/56977#issuecomment-696172846","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56977","id":696172846,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjE3Mjg0Ng==","user":{"login":"williamrandolph","id":3253644,"node_id":"MDQ6VXNlcjMyNTM2NDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/3253644?v=4","gravatar_id":"","url":"https://api.github.com/users/williamrandolph","html_url":"https://github.com/williamrandolph","followers_url":"https://api.github.com/users/williamrandolph/followers","following_url":"https://api.github.com/users/williamrandolph/following{/other_user}","gists_url":"https://api.github.com/users/williamrandolph/gists{/gist_id}","starred_url":"https://api.github.com/users/williamrandolph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/williamrandolph/subscriptions","organizations_url":"https://api.github.com/users/williamrandolph/orgs","repos_url":"https://api.github.com/users/williamrandolph/repos","events_url":"https://api.github.com/users/williamrandolph/events{/privacy}","received_events_url":"https://api.github.com/users/williamrandolph/received_events","type":"User","site_admin":false},"created_at":"2020-09-21T15:01:32Z","updated_at":"2020-09-21T15:01:32Z","author_association":"CONTRIBUTOR","body":"@alitoca Can you provide any more details or steps to reproduce? What is the output if you `echo` the `ES_JAVA_OPTS` variable after this substitution?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/696218640","html_url":"https://github.com/elastic/elasticsearch/issues/56977#issuecomment-696218640","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56977","id":696218640,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjIxODY0MA==","user":{"login":"alitoca","id":35346639,"node_id":"MDQ6VXNlcjM1MzQ2NjM5","avatar_url":"https://avatars3.githubusercontent.com/u/35346639?v=4","gravatar_id":"","url":"https://api.github.com/users/alitoca","html_url":"https://github.com/alitoca","followers_url":"https://api.github.com/users/alitoca/followers","following_url":"https://api.github.com/users/alitoca/following{/other_user}","gists_url":"https://api.github.com/users/alitoca/gists{/gist_id}","starred_url":"https://api.github.com/users/alitoca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alitoca/subscriptions","organizations_url":"https://api.github.com/users/alitoca/orgs","repos_url":"https://api.github.com/users/alitoca/repos","events_url":"https://api.github.com/users/alitoca/events{/privacy}","received_events_url":"https://api.github.com/users/alitoca/received_events","type":"User","site_admin":false},"created_at":"2020-09-21T16:14:10Z","updated_at":"2020-09-21T16:14:10Z","author_association":"NONE","body":"@williamrandolph \r\n1. [Failed] Java installed prior to zip install instruction didn't work with error mentioned here. \r\n2. [Failed] Java installed prior to MSI didn't work either.\r\n![msi installer error](https://user-images.githubusercontent.com/35346639/93792677-d2cd6900-fc03-11ea-97b6-cd5f9f0732f4.png)\r\n3.[Worked] No java installed prior, MSI install worked for me.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/696810592","html_url":"https://github.com/elastic/elasticsearch/issues/56977#issuecomment-696810592","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56977","id":696810592,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjgxMDU5Mg==","user":{"login":"williamrandolph","id":3253644,"node_id":"MDQ6VXNlcjMyNTM2NDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/3253644?v=4","gravatar_id":"","url":"https://api.github.com/users/williamrandolph","html_url":"https://github.com/williamrandolph","followers_url":"https://api.github.com/users/williamrandolph/followers","following_url":"https://api.github.com/users/williamrandolph/following{/other_user}","gists_url":"https://api.github.com/users/williamrandolph/gists{/gist_id}","starred_url":"https://api.github.com/users/williamrandolph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/williamrandolph/subscriptions","organizations_url":"https://api.github.com/users/williamrandolph/orgs","repos_url":"https://api.github.com/users/williamrandolph/repos","events_url":"https://api.github.com/users/williamrandolph/events{/privacy}","received_events_url":"https://api.github.com/users/williamrandolph/received_events","type":"User","site_admin":false},"created_at":"2020-09-22T15:52:52Z","updated_at":"2020-09-22T15:52:52Z","author_association":"CONTRIBUTOR","body":"@alitoca If a Java installation is affecting the Elasticsearch installation, you may be having issues with the `JAVA_HOME` environment variable. Consider setting `JAVA_HOME` so that it points to the `jdk` directory within the Elasticsearch home directory: https://www.elastic.co/guide/en/elasticsearch/reference/7.9/setup.html\r\n\r\nAnother option is to upgrade your installed JDK to JDK 14 or newer. However, we recommend using the JDK that is distributed with Elasticsearch.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/709950694","html_url":"https://github.com/elastic/elasticsearch/issues/56977#issuecomment-709950694","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56977","id":709950694,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTk1MDY5NA==","user":{"login":"paksboda","id":22146275,"node_id":"MDQ6VXNlcjIyMTQ2Mjc1","avatar_url":"https://avatars2.githubusercontent.com/u/22146275?v=4","gravatar_id":"","url":"https://api.github.com/users/paksboda","html_url":"https://github.com/paksboda","followers_url":"https://api.github.com/users/paksboda/followers","following_url":"https://api.github.com/users/paksboda/following{/other_user}","gists_url":"https://api.github.com/users/paksboda/gists{/gist_id}","starred_url":"https://api.github.com/users/paksboda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paksboda/subscriptions","organizations_url":"https://api.github.com/users/paksboda/orgs","repos_url":"https://api.github.com/users/paksboda/repos","events_url":"https://api.github.com/users/paksboda/events{/privacy}","received_events_url":"https://api.github.com/users/paksboda/received_events","type":"User","site_admin":false},"created_at":"2020-10-16T09:59:59Z","updated_at":"2020-10-16T09:59:59Z","author_association":"NONE","body":"@williamrandolph \r\nI am facing same issue and I applied your workaround but still its giving same error. Not sure what I am missing here as I can see system property properly appended and separated by semicolons in command line echo.\r\n\r\nC:\\Software\\elasticsearch-7.7.0\\bin>elasticsearch-service.bat install\r\nInstalling service      :  \"elasticsearch-service-x64\"\r\nUsing JAVA_HOME (64-bit):  \"C:\\Software\\openjdk-11+28_windows-x64_bin\\jdk-11\"\r\n-Des.networkaddress.cache.ttl=60;-Des.networkaddress.cache.negative.ttl=10;-XX:+AlwaysPreTouch;-Xss1m;-Djava.awt.headless=true;-Dfile.encoding=UTF-8;-Djna.nosys=true;-XX:-OmitStackTraceInFastThrow;;-Dio.netty.noUnsafe=true;-Dio.netty.noKeySetOptimization=true;-Dio.netty.recycler.maxCapacityPerThread=0;-Dio.netty.allocator.numDirectArenas=0;-Dlog4j.shutdownHookEnabled=false;-Dlog4j2.disable.jmx=true;-Djava.locale.providers=SPI,COMPAT;-Xms1g;-Xmx1g;-XX:+UseConcMarkSweepGC;-XX:CMSInitiatingOccupancyFraction=75;-XX:+UseCMSInitiatingOccupancyOnly;-Djava.io.tmpdir=C:\\Users\\user\\AppData\\Local\\Temp\\elasticsearch;-XX:+HeapDumpOnOutOfMemoryError;-XX:HeapDumpPath=data;-XX:ErrorFile=logs/hs_err_pid%p.log;-Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,pid,tags:filecount=32,filesize=64m;-XX:MaxDirectMemorySize=536870912;-Des.path.home=C:\\Software\\elasticsearch-7.7.0;-D**es.path.conf**=C:\\Software\\elasticsearch-7.7.0\\config;\r\nThe service 'elasticsearch-service-x64' has been installed.\r\n\r\nWhen starting service it gives error and in elasticsearch-service-x64-stderr.2020-10-16.log file I can see below error.\r\n2020-10-16 15:20:52 Commons Daemon procrun stderr initialized\r\nERROR: the system property [es.path.conf] must be set\r\n\r\n\r\nNot sure why it is still complaining as es.path.conf is there in system properties now.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/710022543","html_url":"https://github.com/elastic/elasticsearch/issues/56977#issuecomment-710022543","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56977","id":710022543,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDAyMjU0Mw==","user":{"login":"paksboda","id":22146275,"node_id":"MDQ6VXNlcjIyMTQ2Mjc1","avatar_url":"https://avatars2.githubusercontent.com/u/22146275?v=4","gravatar_id":"","url":"https://api.github.com/users/paksboda","html_url":"https://github.com/paksboda","followers_url":"https://api.github.com/users/paksboda/followers","following_url":"https://api.github.com/users/paksboda/following{/other_user}","gists_url":"https://api.github.com/users/paksboda/gists{/gist_id}","starred_url":"https://api.github.com/users/paksboda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paksboda/subscriptions","organizations_url":"https://api.github.com/users/paksboda/orgs","repos_url":"https://api.github.com/users/paksboda/repos","events_url":"https://api.github.com/users/paksboda/events{/privacy}","received_events_url":"https://api.github.com/users/paksboda/received_events","type":"User","site_admin":false},"created_at":"2020-10-16T12:44:19Z","updated_at":"2020-10-16T12:44:19Z","author_association":"NONE","body":"@williamrandolph \r\nI tried solution provided by @haedri in below issue and its working for me.\r\nhttps://github.com/elastic/elasticsearch/issues/61333","performed_via_github_app":null}]