{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/33880","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33880/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33880/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33880/events","html_url":"https://github.com/elastic/elasticsearch/issues/33880","id":362029248,"node_id":"MDU6SXNzdWUzNjIwMjkyNDg=","number":33880,"title":"Return total count with bucket_sort","user":{"login":"mpskovvang","id":7034075,"node_id":"MDQ6VXNlcjcwMzQwNzU=","avatar_url":"https://avatars3.githubusercontent.com/u/7034075?v=4","gravatar_id":"","url":"https://api.github.com/users/mpskovvang","html_url":"https://github.com/mpskovvang","followers_url":"https://api.github.com/users/mpskovvang/followers","following_url":"https://api.github.com/users/mpskovvang/following{/other_user}","gists_url":"https://api.github.com/users/mpskovvang/gists{/gist_id}","starred_url":"https://api.github.com/users/mpskovvang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mpskovvang/subscriptions","organizations_url":"https://api.github.com/users/mpskovvang/orgs","repos_url":"https://api.github.com/users/mpskovvang/repos","events_url":"https://api.github.com/users/mpskovvang/events{/privacy}","received_events_url":"https://api.github.com/users/mpskovvang/received_events","type":"User","site_admin":false},"labels":[{"id":141141324,"node_id":"MDU6TGFiZWwxNDExNDEzMjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Aggregations","name":":Analytics/Aggregations","color":"0e8a16","default":false,"description":"Aggregations"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-09-20T05:58:22Z","updated_at":"2018-11-21T13:26:04Z","closed_at":"2018-11-21T13:26:04Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the feature:**\r\nIt would be a great feature if the `bucket_sort` could return the total size of the multi-bucket.\r\n\r\nWhen used to truncate the result buckets the total size could be used for a simple pagination. I know `composite` is better for scrolling large result sets, but in my case I would like to paginate through just 1,000 results. The `bucket_sort` reduces the response size and load time.\r\n\r\nIf you use `terms` aggregation with `size` set to 1000, the `bucket_sort` count would return 1000 or less.\r\n\r\nI believe the count of buckets is available when applied to the pipiline, which means the feature would come at no cost?\r\n\r\nRight now the alternative is the `cardinality` aggregation, but it comes with a cost.","closed_by":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"performed_via_github_app":null}