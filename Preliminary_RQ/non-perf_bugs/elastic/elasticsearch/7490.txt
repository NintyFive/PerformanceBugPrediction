{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/7490","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7490/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7490/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7490/events","html_url":"https://github.com/elastic/elasticsearch/issues/7490","id":41355479,"node_id":"MDU6SXNzdWU0MTM1NTQ3OQ==","number":7490,"title":"After Upgrade 1.3.1 to 1.3.2 then Can't find master node(1.3.1) on AWS EC2 with multicast","user":{"login":"groge","id":7495073,"node_id":"MDQ6VXNlcjc0OTUwNzM=","avatar_url":"https://avatars1.githubusercontent.com/u/7495073?v=4","gravatar_id":"","url":"https://api.github.com/users/groge","html_url":"https://github.com/groge","followers_url":"https://api.github.com/users/groge/followers","following_url":"https://api.github.com/users/groge/following{/other_user}","gists_url":"https://api.github.com/users/groge/gists{/gist_id}","starred_url":"https://api.github.com/users/groge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/groge/subscriptions","organizations_url":"https://api.github.com/users/groge/orgs","repos_url":"https://api.github.com/users/groge/repos","events_url":"https://api.github.com/users/groge/events{/privacy}","received_events_url":"https://api.github.com/users/groge/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"assignees":[{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2014-08-28T04:56:50Z","updated_at":"2014-09-22T19:39:30Z","closed_at":"2014-09-22T19:39:30Z","author_association":"NONE","active_lock_reason":null,"body":"Hi \nWhen I upgraded Elasticsearch cluster 1.3.1 to 1.3.2, and restarting node by node, \nBut when i restarted first node, it could't find existing master node, and became a master node by self. So I restart that node several times, but it still couldn't find existing master node which is previous version of ES(1.3.1).\nSo It parted from the cluster and make new cluster with same name.\nAfter all other nodes restarted. all nodes joined new version of ES cluster. \n\nIt means, when I upgrade Elasticsearch cluster which using multicast on AWS EC2, I should stop the service  and restart all nodes. Is it right?\n\nMy Env\n- AWS EC2 \n- 6 data nodes (master is 3 node only)\n- multicast\n\nContent of `/etc/elasticsearch/elasticsearch.yml`:\n\n```\ncluster.name: MyCluster\nnode.name: \"Node1\"\nnode.master: true\nnode.data: true\nnode.zone: eu-west-1a \ncluster.routing.allocation.awareness.force.zone.values: eu-west-1a,eu-west-1b,eu-                                                                                                                                                                                               west-1c\ncluster.routing.allocation.awareness.attributes: zone\n# Node1 - zone:eu-west-1a - master&data <= first restart for upgrade node\n# Node2 - zone:eu-west-1a - data only\n# Node3 - zone:eu-west-1b - master&data <= current master node 1.3.1\n# Node4 - zone:eu-west-1b - data only\n# Node5 - zone:eu-west-1c - master&data\n# Node6 - zone:eu-west-1c - data only\n\ndiscovery.zen.ping.multicast.enabled: true\ncloud:\n    aws:\n        access_key: Key\n        secret_key: Key\n        region: eu-west-1\ndiscovery:\n    type: ec2\n```\n\nThanks.\n\nDaniel\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}