{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8242","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8242/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8242/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8242/events","html_url":"https://github.com/elastic/elasticsearch/issues/8242","id":46920922,"node_id":"MDU6SXNzdWU0NjkyMDkyMg==","number":8242,"title":"Received a join request for an existing node","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"assignees":[{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2014-10-27T15:42:57Z","updated_at":"2015-11-21T20:14:06Z","closed_at":"2015-11-21T20:14:06Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"We had an outage this morning caused by 10/18 of our nodes being unable to clear any of their old generation.  The cause of this isn't yet clear to me so this bug isn't about that.  After restarting the full nodes I believe the cluster handshaking code had some trouble:\n\n```\n[2014-10-27 14:50:49,000][WARN ][discovery.zen            ] [elastic1002] received join request from node [[elastic1017][iiL0v4nPSy6dwAo-Ro5e1Q][elastic1017][inet[/10.64.48.39:9300]]{rack=D3, row=D, master=false}], but found existing node [elastic1017][ua7AQNuDQfu78lHZUz8G6A][elastic1017][inet[/10.64.48.39:9300]]{rack=D3, row=D, master=false} with same address, removing existing node\n[2014-10-27 14:50:49,000][INFO ][cluster.service          ] [elastic1002] removed {[elastic1017][ua7AQNuDQfu78lHZUz8G6A][elastic1017][inet[/10.64.48.39:9300]]{rack=D3, row=D, master=false},}, added {[elastic1017][iiL0v4nPSy6dwAo-Ro5e1Q][elastic1017][inet[/10.64.48.39:9300]]{rack=D3, row=D, master=false},}, reason: zen-disco-receive(join from node[[elastic1017][iiL0v4nPSy6dwAo-Ro5e1Q][elastic1017][inet[/10.64.48.39:9300]]{rack=D3, row=D, master=false}])\n...\n[2014-10-27 14:50:52,047][INFO ][discovery.zen            ] [elastic1002] received a join request for an existing node [[elastic1017][iiL0v4nPSy6dwAo-Ro5e1Q][elastic1017][inet[/10.64.48.39:9300]]{rack=D3, row=D, master=false}]\n```\n\nIn the end I had to restart the cluster master to get it to seed control to another node.  The new node worked as expected and added the other nodes back.\nThis is Elasticsearch 1.3.4.  I know 1.4 contains lots of work on the zen code.  Any chance this is something it'd handle?\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}