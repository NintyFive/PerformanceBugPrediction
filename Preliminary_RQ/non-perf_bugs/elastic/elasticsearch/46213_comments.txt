[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/527033920","html_url":"https://github.com/elastic/elasticsearch/issues/46213#issuecomment-527033920","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46213","id":527033920,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzAzMzkyMA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-09-02T07:24:11Z","updated_at":"2019-09-02T07:24:11Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/527091074","html_url":"https://github.com/elastic/elasticsearch/issues/46213#issuecomment-527091074","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46213","id":527091074,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzA5MTA3NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-09-02T10:12:59Z","updated_at":"2019-09-02T10:12:59Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-analytics-geo","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/527447975","html_url":"https://github.com/elastic/elasticsearch/issues/46213#issuecomment-527447975","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46213","id":527447975,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzQ0Nzk3NQ==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2019-09-03T13:01:08Z","updated_at":"2019-09-03T13:01:08Z","author_association":"CONTRIBUTOR","body":"Thanks for this write-up, @flash1293 \r\n\r\nIf https://github.com/elastic/elasticsearch/pull/46257 is adopted then we eliminate the exponential growth of RAM with number of filters. I suspect that means the role of `index.max_adjacency_matrix_filters` becomes similar to that of `indices.query.bool.max_clause_count ` in limiting disk seeks. \r\nThe limit on RAM usage caused by many intersections I would expect to be controlled by the existing `search.max_buckets` (PR 46257 eliminates the additional RAM usage that is untracked by this setting).\r\n\r\nWhen it comes to asking for a partial adjacency_matrix do you need both the `columns` and `rows` params? Do you not just need a single array of filter IDs representing the new additions to a client-side graph?\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/527807148","html_url":"https://github.com/elastic/elasticsearch/issues/46213#issuecomment-527807148","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46213","id":527807148,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzgwNzE0OA==","user":{"login":"flash1293","id":1508364,"node_id":"MDQ6VXNlcjE1MDgzNjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/1508364?v=4","gravatar_id":"","url":"https://api.github.com/users/flash1293","html_url":"https://github.com/flash1293","followers_url":"https://api.github.com/users/flash1293/followers","following_url":"https://api.github.com/users/flash1293/following{/other_user}","gists_url":"https://api.github.com/users/flash1293/gists{/gist_id}","starred_url":"https://api.github.com/users/flash1293/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flash1293/subscriptions","organizations_url":"https://api.github.com/users/flash1293/orgs","repos_url":"https://api.github.com/users/flash1293/repos","events_url":"https://api.github.com/users/flash1293/events{/privacy}","received_events_url":"https://api.github.com/users/flash1293/received_events","type":"User","site_admin":false},"created_at":"2019-09-04T08:50:18Z","updated_at":"2019-09-04T08:50:18Z","author_association":"NONE","body":"Hi @markharwood The limit settings make sense, thanks for looking into that and thanks for the super fast PR.\r\n\r\n> When it comes to asking for a partial adjacency_matrix do you need both the columns and rows params? Do you not just need a single array of filter IDs representing the new additions to a client-side graph?\r\n\r\nFor new additions it works fine but not for incrementally (step by step)  fetching a large matrix - in this case we would fetch almost twice as much as necessary.\r\n\r\nConsider the following matrix - the blue cells are the ones potentially containing data\r\n<img width=\"487\" alt=\"Screenshot 2019-09-04 at 10 34 16\" src=\"https://user-images.githubusercontent.com/1508364/64239464-92b81d00-cf00-11e9-9bc6-897d463e6398.png\">\r\n\r\nLet's say we want to scan through the matrix three columns at a time. We would start like this (`\"columns\": [\"A\", \"B\", \"C\"]`), only getting the cells we wanted:\r\n<img width=\"488\" alt=\"Screenshot 2019-09-04 at 10 34 38\" src=\"https://user-images.githubusercontent.com/1508364/64239547-bc714400-cf00-11e9-8bc3-b2eb28da9f53.png\">\r\n\r\nNext request would be `\"columns\": [\"D\", \"E\", \"F\"]` - however the server doesn't now the order of the columns (because `filters` is an object with no guaranteed order), so it has to assume we want all possible pairings with `D`, `E` and `F`:\r\n<img width=\"484\" alt=\"Screenshot 2019-09-04 at 10 45 30\" src=\"https://user-images.githubusercontent.com/1508364/64239776-22f66200-cf01-11e9-92fe-99ddb86302b6.png\">\r\n\r\nThis would also return the block highlighted in red, because the second request doesn't know we already got these cells in the first request (highlighted in darker shade).\r\n\r\nIf the user can specify columns and rows, they can tell the server to omit the \"red\" part of the matrix:\r\n```\r\n\"columns\": [\"D\", \"E\", \"F\"],\r\n\"rows\": [\"D\", \"E\", \"F\", ..., \"Q\"]\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/648873126","html_url":"https://github.com/elastic/elasticsearch/issues/46213#issuecomment-648873126","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46213","id":648873126,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODg3MzEyNg==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2020-06-24T14:57:11Z","updated_at":"2020-06-24T14:57:11Z","author_association":"CONTRIBUTOR","body":"This one has gone cold so closing - we can always reopen if required @flash1293 ","performed_via_github_app":null}]