[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/526684868","html_url":"https://github.com/elastic/elasticsearch/issues/46193#issuecomment-526684868","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46193","id":526684868,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjY4NDg2OA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-08-30T17:31:49Z","updated_at":"2019-08-30T17:31:49Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/527182706","html_url":"https://github.com/elastic/elasticsearch/issues/46193#issuecomment-527182706","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46193","id":527182706,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzE4MjcwNg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2019-09-02T15:19:09Z","updated_at":"2019-09-02T15:19:09Z","author_association":"MEMBER","body":"So the ip addresses are then provided as json array in the source field (the `field` setting in the pipeline config)? If that is the case then is the expected behaviour is that the geo information is appended in the configured `target_field` (in the order matching to the order of the ip addresses in the configured source field)?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/527478825","html_url":"https://github.com/elastic/elasticsearch/issues/46193#issuecomment-527478825","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46193","id":527478825,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzQ3ODgyNQ==","user":{"login":"webmat","id":2300,"node_id":"MDQ6VXNlcjIzMDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2300?v=4","gravatar_id":"","url":"https://api.github.com/users/webmat","html_url":"https://github.com/webmat","followers_url":"https://api.github.com/users/webmat/followers","following_url":"https://api.github.com/users/webmat/following{/other_user}","gists_url":"https://api.github.com/users/webmat/gists{/gist_id}","starred_url":"https://api.github.com/users/webmat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/webmat/subscriptions","organizations_url":"https://api.github.com/users/webmat/orgs","repos_url":"https://api.github.com/users/webmat/repos","events_url":"https://api.github.com/users/webmat/events{/privacy}","received_events_url":"https://api.github.com/users/webmat/received_events","type":"User","site_admin":false},"created_at":"2019-09-03T14:17:29Z","updated_at":"2019-09-03T14:17:29Z","author_association":"NONE","body":"I think an acceptable implementation would be to loop over addresses, and simply decorate the event based on the first IP that has a match in the DB.\r\n\r\nThe most likely scenario this will happen is in situations specifically like `host.ip`, where a host has a bunch of IP addresses for real and virtual network interfaces. So most of them would be private, and potentially one of them would be a public address. If there's more than one public address assigned to the host, only the first one would be geolocated. The other ones would likely have yielded a similar result anyway.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/555412803","html_url":"https://github.com/elastic/elasticsearch/issues/46193#issuecomment-555412803","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46193","id":555412803,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NTQxMjgwMw==","user":{"login":"sspreitzer","id":2178355,"node_id":"MDQ6VXNlcjIxNzgzNTU=","avatar_url":"https://avatars2.githubusercontent.com/u/2178355?v=4","gravatar_id":"","url":"https://api.github.com/users/sspreitzer","html_url":"https://github.com/sspreitzer","followers_url":"https://api.github.com/users/sspreitzer/followers","following_url":"https://api.github.com/users/sspreitzer/following{/other_user}","gists_url":"https://api.github.com/users/sspreitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/sspreitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sspreitzer/subscriptions","organizations_url":"https://api.github.com/users/sspreitzer/orgs","repos_url":"https://api.github.com/users/sspreitzer/repos","events_url":"https://api.github.com/users/sspreitzer/events{/privacy}","received_events_url":"https://api.github.com/users/sspreitzer/received_events","type":"User","site_admin":false},"created_at":"2019-11-19T09:27:06Z","updated_at":"2019-11-19T09:27:06Z","author_association":"NONE","body":"I am opting for a geoip feature where the ingest would iterates over an array of IPs and enrich the document's geoip field with an array of geoip information.\r\n\r\n(Furthermore opening the possibility to point to point paths in visualizations. As well opening up the possibility for computed searches shortest paths, triangulations, etc..)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/558711038","html_url":"https://github.com/elastic/elasticsearch/issues/46193#issuecomment-558711038","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46193","id":558711038,"node_id":"MDEyOklzc3VlQ29tbWVudDU1ODcxMTAzOA==","user":{"login":"rwaight","id":43173714,"node_id":"MDQ6VXNlcjQzMTczNzE0","avatar_url":"https://avatars1.githubusercontent.com/u/43173714?v=4","gravatar_id":"","url":"https://api.github.com/users/rwaight","html_url":"https://github.com/rwaight","followers_url":"https://api.github.com/users/rwaight/followers","following_url":"https://api.github.com/users/rwaight/following{/other_user}","gists_url":"https://api.github.com/users/rwaight/gists{/gist_id}","starred_url":"https://api.github.com/users/rwaight/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rwaight/subscriptions","organizations_url":"https://api.github.com/users/rwaight/orgs","repos_url":"https://api.github.com/users/rwaight/repos","events_url":"https://api.github.com/users/rwaight/events{/privacy}","received_events_url":"https://api.github.com/users/rwaight/received_events","type":"User","site_admin":false},"created_at":"2019-11-26T16:32:33Z","updated_at":"2019-11-26T16:32:33Z","author_association":"NONE","body":"Hi @probakowski, thank you for opening the PR!  Would it be possible to backport to `7.4`?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/562262633","html_url":"https://github.com/elastic/elasticsearch/issues/46193#issuecomment-562262633","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46193","id":562262633,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MjI2MjYzMw==","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"created_at":"2019-12-05T18:48:54Z","updated_at":"2019-12-05T18:48:54Z","author_association":"CONTRIBUTOR","body":"@rwaight Now that 7.5 is released I doubt there will be any further releases of the 7.4 branch","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/562291957","html_url":"https://github.com/elastic/elasticsearch/issues/46193#issuecomment-562291957","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46193","id":562291957,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MjI5MTk1Nw==","user":{"login":"rwaight","id":43173714,"node_id":"MDQ6VXNlcjQzMTczNzE0","avatar_url":"https://avatars1.githubusercontent.com/u/43173714?v=4","gravatar_id":"","url":"https://api.github.com/users/rwaight","html_url":"https://github.com/rwaight","followers_url":"https://api.github.com/users/rwaight/followers","following_url":"https://api.github.com/users/rwaight/following{/other_user}","gists_url":"https://api.github.com/users/rwaight/gists{/gist_id}","starred_url":"https://api.github.com/users/rwaight/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rwaight/subscriptions","organizations_url":"https://api.github.com/users/rwaight/orgs","repos_url":"https://api.github.com/users/rwaight/repos","events_url":"https://api.github.com/users/rwaight/events{/privacy}","received_events_url":"https://api.github.com/users/rwaight/received_events","type":"User","site_admin":false},"created_at":"2019-12-05T19:58:05Z","updated_at":"2019-12-11T19:46:43Z","author_association":"NONE","body":"Thanks for clarifying this with me, @jbaiera!  I'll keep an eye on this for release in `7.6`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/597214780","html_url":"https://github.com/elastic/elasticsearch/issues/46193#issuecomment-597214780","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46193","id":597214780,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzIxNDc4MA==","user":{"login":"robertdeheer","id":16097375,"node_id":"MDQ6VXNlcjE2MDk3Mzc1","avatar_url":"https://avatars3.githubusercontent.com/u/16097375?v=4","gravatar_id":"","url":"https://api.github.com/users/robertdeheer","html_url":"https://github.com/robertdeheer","followers_url":"https://api.github.com/users/robertdeheer/followers","following_url":"https://api.github.com/users/robertdeheer/following{/other_user}","gists_url":"https://api.github.com/users/robertdeheer/gists{/gist_id}","starred_url":"https://api.github.com/users/robertdeheer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robertdeheer/subscriptions","organizations_url":"https://api.github.com/users/robertdeheer/orgs","repos_url":"https://api.github.com/users/robertdeheer/repos","events_url":"https://api.github.com/users/robertdeheer/events{/privacy}","received_events_url":"https://api.github.com/users/robertdeheer/received_events","type":"User","site_admin":false},"created_at":"2020-03-10T17:30:27Z","updated_at":"2020-03-10T17:30:27Z","author_association":"NONE","body":"I'm still seeing a similar issue in 7.6.0. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/597280666","html_url":"https://github.com/elastic/elasticsearch/issues/46193#issuecomment-597280666","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46193","id":597280666,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzI4MDY2Ng==","user":{"login":"probakowski","id":3896475,"node_id":"MDQ6VXNlcjM4OTY0NzU=","avatar_url":"https://avatars1.githubusercontent.com/u/3896475?v=4","gravatar_id":"","url":"https://api.github.com/users/probakowski","html_url":"https://github.com/probakowski","followers_url":"https://api.github.com/users/probakowski/followers","following_url":"https://api.github.com/users/probakowski/following{/other_user}","gists_url":"https://api.github.com/users/probakowski/gists{/gist_id}","starred_url":"https://api.github.com/users/probakowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/probakowski/subscriptions","organizations_url":"https://api.github.com/users/probakowski/orgs","repos_url":"https://api.github.com/users/probakowski/repos","events_url":"https://api.github.com/users/probakowski/events{/privacy}","received_events_url":"https://api.github.com/users/probakowski/received_events","type":"User","site_admin":false},"created_at":"2020-03-10T19:49:38Z","updated_at":"2020-03-10T19:49:38Z","author_association":"CONTRIBUTOR","body":"@robertdeheer would you mind sharing exact error/stacktrace?\r\nI've just tested it on `7.6.0` with:\r\n```\r\nPUT _ingest/pipeline/testpipe\r\n{\r\n  \"processors\": [\r\n    {\r\n      \"geoip\": {\r\n        \"field\": \"ip\",\r\n        \"target_field\": \"geo\",\r\n        \"ignore_missing\": true\r\n      }\r\n    }\r\n  ]\r\n}\r\n\r\nPOST _ingest/pipeline/testpipe/_simulate\r\n{\r\n  \"docs\": [\r\n    {\r\n      \"_source\": {\r\n        \"ip\": [\"192.168.1.1\", \"151.101.2.217\"]\r\n      }\r\n    }\r\n  ]\r\n}\r\n```\r\nand it works as expected","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/597290246","html_url":"https://github.com/elastic/elasticsearch/issues/46193#issuecomment-597290246","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46193","id":597290246,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzI5MDI0Ng==","user":{"login":"robertdeheer","id":16097375,"node_id":"MDQ6VXNlcjE2MDk3Mzc1","avatar_url":"https://avatars3.githubusercontent.com/u/16097375?v=4","gravatar_id":"","url":"https://api.github.com/users/robertdeheer","html_url":"https://github.com/robertdeheer","followers_url":"https://api.github.com/users/robertdeheer/followers","following_url":"https://api.github.com/users/robertdeheer/following{/other_user}","gists_url":"https://api.github.com/users/robertdeheer/gists{/gist_id}","starred_url":"https://api.github.com/users/robertdeheer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robertdeheer/subscriptions","organizations_url":"https://api.github.com/users/robertdeheer/orgs","repos_url":"https://api.github.com/users/robertdeheer/repos","events_url":"https://api.github.com/users/robertdeheer/events{/privacy}","received_events_url":"https://api.github.com/users/robertdeheer/received_events","type":"User","site_admin":false},"created_at":"2020-03-10T20:11:07Z","updated_at":"2020-03-10T20:11:07Z","author_association":"NONE","body":"Yes, the code you provided worked. I realized that my issue is probably\nrelated to locating hosts in a private network and visualizing them in\nkibana. That’s a different issue.\n\nThanks,\nRob\n\nOn Tue, Mar 10, 2020 at 12:49 PM Przemko Robakowski <\nnotifications@github.com> wrote:\n\n> @robertdeheer <https://github.com/robertdeheer> would you mind sharing\n> exact error/stacktrace?\n> I've just tested it on 7.6.0 with:\n>\n> PUT _ingest/pipeline/testpipe\n> {\n>   \"processors\": [\n>     {\n>       \"geoip\": {\n>         \"field\": \"ip\",\n>         \"target_field\": \"geo\",\n>         \"ignore_missing\": true\n>       }\n>     }\n>   ]\n> }\n>\n> POST _ingest/pipeline/testpipe/_simulate\n> {\n>   \"docs\": [\n>     {\n>       \"_source\": {\n>         \"ip\": [\"192.168.1.1\", \"151.101.2.217\"]\n>       }\n>     }\n>   ]\n> }\n>\n> and it works as expected\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/elastic/elasticsearch/issues/46193?email_source=notifications&email_token=AD22AX3N46Q6XSOIOJZHFZLRG2KWJA5CNFSM4ISPSR6KYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEOM4PGQ#issuecomment-597280666>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AD22AXY3V5W6LO3ZZTUF5DLRG2KWJANCNFSM4ISPSR6A>\n> .\n>\n","performed_via_github_app":null}]