{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/59125","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/59125/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/59125/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/59125/events","html_url":"https://github.com/elastic/elasticsearch/issues/59125","id":652172410,"node_id":"MDU6SXNzdWU2NTIxNzI0MTA=","number":59125,"title":"[ML] Add a \"verbose\" option to the data frame analytics stats endpoint","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"assignees":[{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2020-07-07T09:40:21Z","updated_at":"2020-08-04T09:54:07Z","closed_at":"2020-08-04T09:54:07Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The data frame analytics stats endpoint can return extremely verbose information that is only useful if it is plotted on a chart.  For example:\r\n\r\n<img width=\"1904\" alt=\"Screenshot 2020-04-07 at 12 52 24\" src=\"https://user-images.githubusercontent.com/7405510/86758282-a7db6c00-c03b-11ea-8c73-95227ed21753.png\">\r\n\r\nFor REST API clients that do not have the ability to plot the `fold_values` on a chart the information is just clutter that makes it hard to see other elements of the stats.\r\n\r\nTo avoid this problem we should have a `?verbose` option on the REST endpoint for data frame analytics stats.  (This does not need to be implemented in the Java clients as they can always retrieve the whole object and the user just doesn't call the methods that return verbose information if they don't want it.)\r\n\r\nAn example of a parameter that only affects the X-Content representation of the results is `?explain` on the `find_file_structure` endpoint.  This doesn't go into the request but instead gets passed in the `params` argument to the `toXContent` methods that render the response in JSON so they can decide not to print certain things.  So `?verbose` for data frame analytics stats can be done similarly.\r\n\r\nOne complication is that these same `toXContent` methods also create the JSON when the stats are indexed.  In this case we need to keep all the fields.  One way to make this work would be to make them write all the fields by default and only skip the detail when the `verbose` parameter was explicitly false, but default `verbose` to false if not specified in the REST handler.  Another way would be to have a `FOR_INTERNAL_STORAGE` parameter that we pass from the places where we're persisting to an index.\r\n\r\nThe final question is exactly which fields to omit when `?verbose` is not specified.  Certainly `fold_values`, but maybe there are others.  Please have a look and propose something that seems reasonable.","closed_by":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"performed_via_github_app":null}