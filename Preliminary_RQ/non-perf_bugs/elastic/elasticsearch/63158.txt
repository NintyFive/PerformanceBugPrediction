{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/63158","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63158/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63158/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63158/events","html_url":"https://github.com/elastic/elasticsearch/issues/63158","id":713440384,"node_id":"MDU6SXNzdWU3MTM0NDAzODQ=","number":63158,"title":"[test failure] 40_geohash_grid/Test geohash_grid aggregation circuit breaker fails","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"labels":[{"id":141079527,"node_id":"MDU6TGFiZWwxNDEwNzk1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Geo","name":":Analytics/Geo","color":"0e8a16","default":false,"description":"Indexing, search aggregations of geo points and shapes"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":1967499105,"node_id":"MDU6TGFiZWwxOTY3NDk5MTA1","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Analytics","name":"Team:Analytics","color":"fef2c0","default":false,"description":"Meta label for analytics/geo team"}],"state":"closed","locked":false,"assignee":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"assignees":[{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2020-10-02T08:18:53Z","updated_at":"2020-10-30T15:02:24Z","closed_at":"2020-10-30T15:02:23Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"<!--\r\nPlease fill out the following information, and ensure you have attempted\r\nto reproduce locally\r\n-->\r\nhappens twice\r\n\r\n**Build scan**:\r\nhttps://gradle-enterprise.elastic.co/s/kbr7f543ybnte/tests/:x-pack:plugin:spatial:yamlRestTest/org.elasticsearch.xpack.spatial.SpatialClientYamlTestSuiteIT/test%20%7Byaml=%2F40_geohash_grid%2FTest%20geohash_grid%20aggregation%20circuit%20breaker%7D#1\r\n\r\nmost recent:\r\nhttps://gradle-enterprise.elastic.co/s/wegrukq224tum/tests/:x-pack:plugin:spatial:yamlRestTest/org.elasticsearch.xpack.spatial.SpatialClientYamlTestSuiteIT/test%20%7Byaml=%2F40_geohash_grid%2FTest%20geohash_grid%20aggregation%20circuit%20breaker%7D#1\r\n\r\n**Repro line**:\r\n./gradlew ':x-pack:plugin:spatial:yamlRestTest' --tests \"org.elasticsearch.xpack.spatial.SpatialClientYamlTestSuiteIT.test {yaml=/40_geohash_grid/Test geohash_grid aggregation circuit breaker}\" -Dtests.seed=4CE10608F06C2C44 -Dtests.security.manager=true -Dtests.locale=en-PH -Dtests.timezone=AET -Druntime.java=8\r\n\r\n**Reproduces locally?**:\r\nno\r\n\r\n**Applicable branches**:\r\n7.x\r\n\r\n**Failure history**:\r\n<!--\r\nLink to build stats and possible indication of when this started failing and how often it fails\r\n<https://build-stats.elastic.co/app/kibana>\r\n-->\r\nhttps://build-stats.elastic.co/app/kibana#/discover?_g=(refreshInterval:(pause:!t,value:0),time:(from:now-7d,mode:quick,to:now))&_a=(columns:!(_source),index:b646ed00-7efc-11e8-bf69-63c8ef516157,interval:auto,query:(language:lucene,query:'%22Data%20too%20large,%20data%20for%22'),sort:!(process.time-start,desc))\r\n\r\n**Failure excerpt**:\r\n```\r\n\r\nCaused by: CircuitBreakingException[[request] Data too large, data for [<agg [grid]>] would be [37888/37kb], which is larger than the limit of [25600/25kb]] |  \r\n-- | --\r\n  | at org.elasticsearch.common.breaker.ChildMemoryCircuitBreaker.circuitBreak(ChildMemoryCircuitBreaker.java:76) |  \r\n  | at org.elasticsearch.common.breaker.ChildMemoryCircuitBreaker.limit(ChildMemoryCircuitBreaker.java:150) |  \r\n  | at org.elasticsearch.common.breaker.ChildMemoryCircuitBreaker.addEstimateBytesAndMaybeBreak(ChildMemoryCircuitBreaker.java:104) |  \r\n  | at org.elasticsearch.search.aggregations.AggregatorBase.addRequestCircuitBreakerBytes(AggregatorBase.java:148) |  \r\n  | at org.elasticsearch.search.aggregations.AggregatorBase.<init>(AggregatorBase.java:108) |  \r\n  | at org.elasticsearch.search.aggregations.bucket.BucketsAggregator.<init>(BucketsAggregator.java:59) |  \r\n  | at org.elasticsearch.search.aggregations.bucket.geogrid.GeoGridAggregator.<init>(GeoGridAggregator.java:55) |  \r\n  | at org.elasticsearch.search.aggregations.bucket.geogrid.GeoTileGridAggregator.<init>(GeoTileGridAggregator.java:41) |  \r\n  | at org.elasticsearch.xpack.spatial.search.aggregations.bucket.geogrid.GeoShapeTileGridAggregator.<init>(GeoShapeTileGridAggregator.java:23) |  \r\n  | at org.elasticsearch.xpack.spatial.SpatialPlugin.lambda$registerGeoShapeGridAggregators$3(SpatialPlugin.java:153) |  \r\n  | at org.elasticsearch.search.aggregations.bucket.geogrid.GeoTileGridAggregatorFactory.doCreateInternal(GeoTileGridAggregatorFactory.java:79) |  \r\n  | at org.elasticsearch.search.aggregations.support.ValuesSourceAggregatorFactory.createInternal(ValuesSourceAggregatorFactory.java:49) |  \r\n  | at org.elasticsearch.search.aggregations.AggregatorFactory.create(AggregatorFactory.java:77) |  \r\n  | at org.elasticsearch.search.aggregations.AggregatorFactories.createTopLevelAggregators(AggregatorFactories.java:213) |  \r\n  | at org.elasticsearch.search.aggregations.AggregationPhase.preProcess(AggregationPhase.java:51) |  \r\n  | at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:147) |  \r\n  | at org.elasticsearch.indices.IndicesService.lambda$loadIntoContext$21(IndicesService.java:1391) |  \r\n  | at org.elasticsearch.indices.IndicesService.lambda$cacheShardLevelResult$22(IndicesService.java:1443) |  \r\n  | at org.elasticsearch.indices.IndicesRequestCache$Loader.load(IndicesRequestCache.java:165) |  \r\n  | at org.elasticsearch.indices.IndicesRequestCache$Loader.load(IndicesRequestCache.java:148) |  \r\n  | at org.elasticsearch.common.cache.Cache.computeIfAbsent(Cache.java:433) |  \r\n  | at org.elasticsearch.indices.IndicesRequestCache.getOrCompute(IndicesRequestCache.java:120) |  \r\n  | at org.elasticsearch.indices.IndicesService.cacheShardLevelResult(IndicesService.java:1449) |  \r\n  | at org.elasticsearch.indices.IndicesService.loadIntoContext(IndicesService.java:1389) |  \r\n  | at org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:370) |  \r\n  | at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:431) |  \r\n  | at org.elasticsearch.search.SearchService.access$500(SearchService.java:141) |  \r\n  | at org.elasticsearch.search.SearchService$2.lambda$onResponse$0(SearchService.java:401) |  \r\n  | at org.elasticsearch.action.ActionRunnable.lambda$supply$0(ActionRunnable.java:58) |  \r\n  | at org.elasticsearch.action.ActionRunnable$2.doRun(ActionRunnable.java:73) |  \r\n  | at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\r\n\r\n```\r\n\r\n","closed_by":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}