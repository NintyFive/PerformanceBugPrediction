{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/40907","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40907/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40907/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40907/events","html_url":"https://github.com/elastic/elasticsearch/issues/40907","id":429877311,"node_id":"MDU6SXNzdWU0Mjk4NzczMTE=","number":40907,"title":"match_phrase_prefix NOT working as expected for other languages","user":{"login":"kasiselvamk","id":6265907,"node_id":"MDQ6VXNlcjYyNjU5MDc=","avatar_url":"https://avatars0.githubusercontent.com/u/6265907?v=4","gravatar_id":"","url":"https://api.github.com/users/kasiselvamk","html_url":"https://github.com/kasiselvamk","followers_url":"https://api.github.com/users/kasiselvamk/followers","following_url":"https://api.github.com/users/kasiselvamk/following{/other_user}","gists_url":"https://api.github.com/users/kasiselvamk/gists{/gist_id}","starred_url":"https://api.github.com/users/kasiselvamk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kasiselvamk/subscriptions","organizations_url":"https://api.github.com/users/kasiselvamk/orgs","repos_url":"https://api.github.com/users/kasiselvamk/repos","events_url":"https://api.github.com/users/kasiselvamk/events{/privacy}","received_events_url":"https://api.github.com/users/kasiselvamk/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2019-04-05T18:14:33Z","updated_at":"2019-04-12T13:28:26Z","closed_at":"2019-04-12T13:28:26Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`): latest version\r\n\r\n**Plugins installed**: [NA]\r\n\r\n**JVM version** (`java -version`):1.8\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): ubuntu-latest\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nmatch_phrase_prefix NOT working as expected for other languages\r\nwhen in insert below words;\r\n \"word\" : \"க்ஷுத்ரஸ்வாஸம்\"\r\n \"word\" : \"க்ஷேத்திரம்\"\r\n\"word\" : \"க்ஷேமதண்டுலம்\"\r\n**and try to search with character \"க்\" it is returning above word's --> which is not expected.\r\nPlease follow below easy step to reproduce,\r\nplease help on how to resolve this issue.....**\r\nexample:-\r\n\"க்ஷேத்திரம்\" -->unicode rep.\r\nக\r\n்\r\nஷ\r\nே\r\nத\r\n்\r\nத\r\nி\r\nர\r\nம\r\n்\r\n**Steps to reproduce**:\r\n\r\n**Please include a *minimal* but *complete* recreation of the problem, including\r\n(e.g.) index creation, mappings, settings, query etc.  The easier you make for\r\nus to reproduce it, the more likely that somebody will take the time to look at it.**\r\n\r\n 1. create index as given.\r\n 2.insert data \r\n 3.run search \r\n\r\n 1. create index as given.\r\n\r\nPUT /tamil_example\r\n{\r\n  \"settings\": {\r\n    \"analysis\": {\r\n      \"filter\": {\r\n        \"tamil_stop\": {\r\n          \"type\": \"stop\",\r\n          \"stopwords\": \"_none_\"\r\n        },\r\n        \"tamil_keywords\": {\r\n          \"type\": \"keyword_marker\",\r\n          \"keywords\": []\r\n        },\r\n        \"tamil_stemmer\": {\r\n          \"type\": \"stemmer\",\r\n          \"language\": \"minimal_english\"\r\n        }\r\n      },\r\n      \"analyzer\": {\r\n        \"tamil_analyzer\": {\r\n          \"tokenizer\": \"standard\",\r\n          \"filter\": [\r\n            \"lowercase\",\r\n            \"decimal_digit\",\r\n            \"tamil_keywords\",\r\n            \"indic_normalization\",\r\n            \"tamil_stop\",\r\n            \"tamil_stemmer\"\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"mappings\": {\r\n    \"_doc\": {\r\n      \"properties\": {\r\n        \"word\": {\r\n          \"type\": \"text\",\r\n          \"analyzer\": \"tamil_analyzer\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n 2.insert data \r\n\r\nPUT tamil_example/_doc/1\r\n{\r\n       \"word\" : \"க்ஷுத்ரஸ்வாஸம்\"\r\n}\r\nPUT tamil_example/_doc/2\r\n{\r\n     \"word\" : \"க்ஷேத்திரம்\"\r\n}\r\nPUT tamil_example/_doc/3\r\n{\r\n    \"word\" : \"க்ஷேமதண்டுலம்\"\r\n}\r\n\r\n 3.run search :-\r\nGET tamil_example/_search\r\n{\r\n  \"query\": {\r\n    \"match_phrase_prefix\": {\r\n      \"word\": \"க்\"\r\n    }\r\n  }\r\n}\r\nOut put ------> Below output is NOT expected., it should return empty search.\r\n{\r\n  \"took\" : 6,\r\n  \"timed_out\" : false,\r\n  \"_shards\" : {\r\n    \"total\" : 5,\r\n    \"successful\" : 5,\r\n    \"skipped\" : 0,\r\n    \"failed\" : 0\r\n  },\r\n  \"hits\" : {\r\n    \"total\" : 3,\r\n    \"max_score\" : 0.2876821,\r\n    \"hits\" : [\r\n      {\r\n        \"_index\" : \"tamil_example\",\r\n        \"_type\" : \"_doc\",\r\n        \"_id\" : \"2\",\r\n        \"_score\" : 0.2876821,\r\n        \"_source\" : {\r\n          \"word\" : \"க்ஷேத்திரம்\"\r\n        }\r\n      },\r\n      {\r\n        \"_index\" : \"tamil_example\",\r\n        \"_type\" : \"_doc\",\r\n        \"_id\" : \"1\",\r\n        \"_score\" : 0.2876821,\r\n        \"_source\" : {\r\n          \"word\" : \"க்ஷுத்ரஸ்வாஸம்\"\r\n        }\r\n      },\r\n      {\r\n        \"_index\" : \"tamil_example\",\r\n        \"_type\" : \"_doc\",\r\n        \"_id\" : \"3\",\r\n        \"_score\" : 0.2876821,\r\n        \"_source\" : {\r\n          \"word\" : \"க்ஷேமதண்டுலம்\"\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}