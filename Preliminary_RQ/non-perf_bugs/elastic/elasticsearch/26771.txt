{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26771","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26771/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26771/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26771/events","html_url":"https://github.com/elastic/elasticsearch/issues/26771","id":260234900,"node_id":"MDU6SXNzdWUyNjAyMzQ5MDA=","number":26771,"title":"Beider_morse phonetic encoder silently fails when languageset not specified","user":{"login":"bkazez","id":64005,"node_id":"MDQ6VXNlcjY0MDA1","avatar_url":"https://avatars2.githubusercontent.com/u/64005?v=4","gravatar_id":"","url":"https://api.github.com/users/bkazez","html_url":"https://github.com/bkazez","followers_url":"https://api.github.com/users/bkazez/followers","following_url":"https://api.github.com/users/bkazez/following{/other_user}","gists_url":"https://api.github.com/users/bkazez/gists{/gist_id}","starred_url":"https://api.github.com/users/bkazez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkazez/subscriptions","organizations_url":"https://api.github.com/users/bkazez/orgs","repos_url":"https://api.github.com/users/bkazez/repos","events_url":"https://api.github.com/users/bkazez/events{/privacy}","received_events_url":"https://api.github.com/users/bkazez/received_events","type":"User","site_admin":false},"labels":[{"id":142001965,"node_id":"MDU6TGFiZWwxNDIwMDE5NjU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Analysis","name":":Search/Analysis","color":"0e8a16","default":false,"description":"How text is split into tokens"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"assignees":[{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2017-09-25T11:00:36Z","updated_at":"2017-10-27T08:07:37Z","closed_at":"2017-10-27T08:07:37Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: `Version: 5.6.0, Build: 781a835/2017-09-07T03:09:58.087Z, JVM: 1.8.0_144`\r\n\r\n**Plugins installed**: `[\"analysis-phonetic\"]`\r\n\r\n**JVM version**: `java version \"1.8.0_144\"`\r\n\r\n**OS version** : `16.7.0 Darwin Kernel Version 16.7.0 (OS X 10.12.6)`\r\n\r\n**Description of the problem including expected versus actual behavior**: Beider-Morse encoding fails silently (returns original string as token) if the languageset is not specified.\r\n\r\n**Steps to reproduce**:\r\n\r\n```\r\ncurl -XPUT 'http://localhost:9200/phonetictest?pretty' -d'{\r\n  \"settings\": {\r\n    \"analysis\": {\r\n      \"filter\": {\r\n        \"beider_morse_filter\": { \r\n          \"type\":    \"phonetic\",\r\n          \"encoder\": \"beider_morse\",\r\n          \"name_type\": \"generic\"\r\n        }\r\n      },\r\n      \"analyzer\": {\r\n        \"my_beider_morse\": {\r\n          \"tokenizer\": \"standard\",\r\n          \"filter\":    \"beider_morse_filter\" \r\n        }\r\n      }\r\n    }\r\n  }\r\n}'\r\n\r\ncurl -XGET 'http://localhost:9200/phonetictest/_analyze?pretty&analyzer=my_beider_morse' -d'ABADIAS'\r\n```\r\n\r\nIncorrectly returns:\r\n\r\n```\r\n{\r\n  \"tokens\" : [\r\n    {\r\n      \"token\" : \"ABADIAS\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 7,\r\n      \"type\" : \"<ALPHANUM>\",\r\n      \"position\" : 0\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nExpected token list based on the current BMPM PHP code at http://stevemorse.org/phoneticinfo.htm :\r\n\r\n```\r\nabadias abadia abadios abadio abodias abodia abodios abodio abYdias abYdios avadias avadios avodias avodios obadias obadia obadios obadio obodias obodia obodios obodio obYdias obYdios ovadias ovadios ovodias ovodios Ybadias Ybadios Ybodias Ybodios YbYdias YbYdios abadiaS abadioS abodiaS abodioS obadiaS obadioS obodiaS obodioS\r\n```\r\n\r\nSimilar failures occurred with all other attempts.","closed_by":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"performed_via_github_app":null}