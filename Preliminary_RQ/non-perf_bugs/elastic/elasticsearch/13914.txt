{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/13914","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13914/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13914/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13914/events","html_url":"https://github.com/elastic/elasticsearch/issues/13914","id":109543892,"node_id":"MDU6SXNzdWUxMDk1NDM4OTI=","number":13914,"title":"more consistency with IDE configuration for tests.","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-10-02T18:14:19Z","updated_at":"2020-11-11T21:44:08Z","closed_at":"2016-01-28T18:39:40Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"People want to be able to run tests from their IDE (and maybe use the debugger and so on). I get it.\n\nBut tests behave differently depending on how you run them, and its a huge hassle to deal with this stuff.\n\nThe problem is we have to support too many runtime environments:\n- bin/elasticsearch (aka running for real). distribution and plugin REST tests go against an external server in this environment. They are the most realistic tests.\n- \"unit test environment from maven\". in this situation, things are less realistic. We have multiple nodes within the same jvm, and we just do our best to approximate reality. With maven there are even differences depending on whether its in a \"reactor build\" or not.\n- Intellij IDE. There might even be multiple environments, depending on how people configure it (e.g. mvn idea:idea versus something within the IDE itself). This is less realistic even than unit tests.\n- Eclipse IDE. Currently this is the least realistic of all.\n\nHaving to make all these configurations \"work\" or \"kind of work\" is incredibly frustrating and complex. In many cases I throw out designs completely, or push back against changes, because it won't work in all these scenarios. Instead, I think we should put a little work into the IDE configuration to make it easier.\n\nFor example, eclipse puts _all generated classes_ piled together in `eclipse/build`. Instead of:\n\n```\n<classpathentry kind=\"src\" path=\"src/main/java\"/>\n<classpathentry kind=\"src\" path=\"src/test/java\"/>\n```\n\nWe can do:\n\n```\n<classpathentry kind=\"src\" path=\"src/main/java\" output=\"eclipse-build/target/classes\"/>\n<classpathentry kind=\"src\" path=\"src/test/java output=\"eclipse-build/target/test-classes\"/>\n```\n\nSee how now its closer to the maven build? For example when testing lang-groovy plugin it means test-framework can assign src/main/java all the scary permissions groovy needs, but not src/test/java code. This means tests will fail in the IDE if security logic is wrong.\n\nI'm setting adopt me: folks come to me with questions if their IDE does not do what they want, but I basically have to throw up my hands until we simplify some stuff: improve these IDE configs.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}