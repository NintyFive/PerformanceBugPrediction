{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22435","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22435/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22435/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22435/events","html_url":"https://github.com/elastic/elasticsearch/issues/22435","id":198764053,"node_id":"MDU6SXNzdWUxOTg3NjQwNTM=","number":22435,"title":"5.1 Unable to use index templates to reindex into daily indexes.","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"assignees":[{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2017-01-04T17:27:37Z","updated_at":"2017-01-18T20:18:32Z","closed_at":"2017-01-18T20:18:32Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"From the docs (https://www.elastic.co/guide/en/elasticsearch/reference/5.1/docs-reindex.html#_reindex_daily_indices) it sounds like this is possible but I run into issues using an index template.  This might also reference: #18654 and #20465\r\n\r\nMy issue is simple, I am upgrading our oss project from 1.x to 5.x using external reindex. We are moving from monthly indexes to daily indexes and I have no clue how many indexes should be created (this needs to run on everyones machine and we are calculating it with a inline script based on a doc's utc time). So an index template would work perfectly just for the reindex. The problem is, I get index not found exceptions on reindex...\r\n\r\n\r\n```\r\nPUT _template/events-v1\r\n{\r\n  \"template\": \"events-v1-*\"\r\n  ........\r\n}\r\n```\r\n\r\n```\r\nPOST _reindex?wait_for_completion=false\r\n{\r\n  \"source\": {\r\n    \"remote\": {\r\n      \"host\": \"http://localhost:9201\"\r\n    },\r\n    \"index\": \"events-v1-*\",\r\n    \"sort\": { \"date\": \"desc\" }\r\n  },\r\n  \"dest\": {\r\n    \"index\": \"events-v1-error\"\r\n  },\r\n  \"script\": {\r\n    \"lang\": \"painless\",\r\n    \"inline\": \"ctx._index = 'events-v1-' + DateTimeFormatter.ofPattern('yyyy.MM.dd').format(OffsetDateTime.parse(ctx._source.date).toInstant().atZone(ZoneOffset.UTC));\"\r\n  }\r\n}\r\n```\r\n\r\nresults in millions and millions of these errors:\r\n\r\n```\r\n{\r\n      \"index\": \"events-v1-2016.12.30\",\r\n      \"type\": \"events\",\r\n      \"id\": \"586651aba5abbe018465d6b6\",\r\n      \"cause\": {\r\n        \"type\": \"index_not_found_exception\",\r\n        \"reason\": \"no such index\",\r\n        \"resource.type\": \"index_expression\",\r\n        \"resource.id\": \"events-v1-2016.12.30\",\r\n        \"index_uuid\": \"_na_\",\r\n        \"index\": \"events-v1-2016.12.30\"\r\n      },\r\n      \"status\": 404\r\n    }\r\n```","closed_by":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"performed_via_github_app":null}