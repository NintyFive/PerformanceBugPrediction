{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2786","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2786/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2786/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2786/events","html_url":"https://github.com/elastic/elasticsearch/issues/2786","id":12082907,"node_id":"MDU6SXNzdWUxMjA4MjkwNw==","number":2786,"title":"RecoveryWhileUnderLoadTests fail","user":{"login":"jjYBdx4IL","id":491220,"node_id":"MDQ6VXNlcjQ5MTIyMA==","avatar_url":"https://avatars2.githubusercontent.com/u/491220?v=4","gravatar_id":"","url":"https://api.github.com/users/jjYBdx4IL","html_url":"https://github.com/jjYBdx4IL","followers_url":"https://api.github.com/users/jjYBdx4IL/followers","following_url":"https://api.github.com/users/jjYBdx4IL/following{/other_user}","gists_url":"https://api.github.com/users/jjYBdx4IL/gists{/gist_id}","starred_url":"https://api.github.com/users/jjYBdx4IL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjYBdx4IL/subscriptions","organizations_url":"https://api.github.com/users/jjYBdx4IL/orgs","repos_url":"https://api.github.com/users/jjYBdx4IL/repos","events_url":"https://api.github.com/users/jjYBdx4IL/events{/privacy}","received_events_url":"https://api.github.com/users/jjYBdx4IL/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2013-03-15T21:43:25Z","updated_at":"2013-06-06T14:46:43Z","closed_at":"2013-06-06T14:46:43Z","author_association":"NONE","active_lock_reason":null,"body":"in particular:\n# recoverWhileUnderLoadAllocateBackupsTest in latest master and v0.20.5 and v0.90.0 beta1.\n\nWould be great to have a continuous integration server so everybody could check if test failures are \"ok\". ;-) How about builds.apache.org?\n\nOutput:\n\n---\n##  T E S T S\n\nRunning org.elasticsearch.test.integration.recovery.RecoveryWhileUnderLoadTests\nConfiguring TestNG with: org.apache.maven.surefire.testng.conf.TestNG652Configurator@4d86d315\n[2013-03-15 21:39:18,323][INFO ][test                     ] ==> Test Starting [integration.recovery.RecoveryWhileUnderLoadTests#recoverWhileUnderLoadAllocateBackupsTest]\n[2013-03-15 21:39:18,330][INFO ][test.integration.recovery] --> starting [node1] ...\n[2013-03-15 21:39:18,438][INFO ][node                     ] [node1] {0.90.0.Beta2-SNAPSHOT}[7651]: initializing ...\n[2013-03-15 21:39:18,443][INFO ][plugins                  ] [node1] loaded [], sites []\n[2013-03-15 21:39:19,749][INFO ][node                     ] [node1] {0.90.0.Beta2-SNAPSHOT}[7651]: initialized\n[2013-03-15 21:39:19,749][INFO ][node                     ] [node1] {0.90.0.Beta2-SNAPSHOT}[7651]: starting ...\n[2013-03-15 21:39:19,826][INFO ][transport                ] [node1] bound_address {inet[/0:0:0:0:0:0:0:0:9300]}, publish_address {inet[/192.168.0.7:9300]}\n[2013-03-15 21:39:22,877][INFO ][cluster.service          ] [node1] new_master [node1][SqutnFSwQ9ORDlQGFSr3cQ][inet[/192.168.0.7:9300]], reason: zen-disco-join (elected_as_master)\n[2013-03-15 21:39:22,902][INFO ][discovery                ] [node1] test-cluster-i5/SqutnFSwQ9ORDlQGFSr3cQ\n[2013-03-15 21:39:22,910][INFO ][gateway                  ] [node1] recovered [0] indices into cluster_state\n[2013-03-15 21:39:22,911][INFO ][http                     ] [node1] bound_address {inet[/0:0:0:0:0:0:0:0:9200]}, publish_address {inet[/192.168.0.7:9200]}\n[2013-03-15 21:39:22,911][INFO ][node                     ] [node1] {0.90.0.Beta2-SNAPSHOT}[7651]: started\n[2013-03-15 21:39:22,911][INFO ][test.integration.recovery] --> creating test index ...\n[2013-03-15 21:39:23,126][INFO ][cluster.metadata         ] [node1] [test] creating index, cause [api], shards [5]/[1], mappings []\n[2013-03-15 21:39:23,226][INFO ][index.gateway.none       ] [node1] [test][0] deleting shard content\n[2013-03-15 21:39:23,332][INFO ][index.gateway.none       ] [node1] [test][1] deleting shard content\n[2013-03-15 21:39:23,341][INFO ][test.integration.recovery] --> starting 5 indexing threads\n[2013-03-15 21:39:23,343][INFO ][test.integration.recovery] ***\\* starting indexing thread 0\n[2013-03-15 21:39:23,343][INFO ][test.integration.recovery] ***\\* starting indexing thread 1\n[2013-03-15 21:39:23,344][INFO ][test.integration.recovery] ***\\* starting indexing thread 2\n[2013-03-15 21:39:23,345][INFO ][test.integration.recovery] ***\\* starting indexing thread 3\n[2013-03-15 21:39:23,350][INFO ][test.integration.recovery] --> waiting for 2000 docs to be indexed ...\n[2013-03-15 21:39:23,351][INFO ][test.integration.recovery] ***\\* starting indexing thread 4\n[2013-03-15 21:39:23,396][INFO ][index.gateway.none       ] [node1] [test][2] deleting shard content\n[2013-03-15 21:39:23,440][INFO ][index.gateway.none       ] [node1] [test][3] deleting shard content\n[2013-03-15 21:39:23,482][INFO ][index.gateway.none       ] [node1] [test][4] deleting shard content\n[2013-03-15 21:39:23,494][INFO ][cluster.metadata         ] [node1] [test] update_mapping [type1](dynamic)\n[2013-03-15 21:39:24,816][INFO ][test.integration.recovery] --> 2000 docs indexed\n[2013-03-15 21:39:24,816][INFO ][test.integration.recovery] --> flushing the index ....\n[2013-03-15 21:39:26,094][INFO ][test.integration.recovery] --> waiting for 4000 docs to be indexed ...\n[2013-03-15 21:39:26,097][INFO ][test.integration.recovery] --> 4000 docs indexed\n[2013-03-15 21:39:26,098][INFO ][test.integration.recovery] --> starting [node2] ...\n[2013-03-15 21:39:26,101][INFO ][node                     ] [node2] {0.90.0.Beta2-SNAPSHOT}[7651]: initializing ...\n[2013-03-15 21:39:26,101][INFO ][plugins                  ] [node2] loaded [], sites []\n[2013-03-15 21:39:26,430][INFO ][node                     ] [node2] {0.90.0.Beta2-SNAPSHOT}[7651]: initialized\n[2013-03-15 21:39:26,433][INFO ][node                     ] [node2] {0.90.0.Beta2-SNAPSHOT}[7651]: starting ...\n[2013-03-15 21:39:26,590][INFO ][transport                ] [node2] bound_address {inet[/0:0:0:0:0:0:0:0:9301]}, publish_address {inet[/192.168.0.7:9301]}\n[2013-03-15 21:39:29,608][INFO ][cluster.service          ] [node2] new_master [node2][Z3y2EP4OQhSXLMSPAkjDPQ][inet[/192.168.0.7:9301]], reason: zen-disco-join (elected_as_master)\n[2013-03-15 21:39:29,626][INFO ][discovery                ] [node2] test-cluster-i5/Z3y2EP4OQhSXLMSPAkjDPQ\n[2013-03-15 21:39:29,627][INFO ][gateway                  ] [node2] recovered [0] indices into cluster_state\n[2013-03-15 21:39:29,641][INFO ][http                     ] [node2] bound_address {inet[/0:0:0:0:0:0:0:0:9201]}, publish_address {inet[/192.168.0.7:9201]}\n[2013-03-15 21:39:29,641][INFO ][node                     ] [node2] {0.90.0.Beta2-SNAPSHOT}[7651]: started\n[2013-03-15 21:39:29,641][INFO ][test.integration.recovery] --> waiting for GREEN health status ...\n[2013-03-15 21:40:29,670][ERROR][test                     ] ==> Test Failure [integration.recovery.RecoveryWhileUnderLoadTests#recoverWhileUnderLoadAllocateBackupsTest]\n[2013-03-15 21:40:29,672][INFO ][node                     ] [node1] {0.90.0.Beta2-SNAPSHOT}[7651]: stopping ...\n[2013-03-15 21:40:29,674][WARN ][test.integration.recovery] ***\\* failed indexing thread 2\njava.lang.NullPointerException\n    at org.elasticsearch.test.integration.recovery.RecoveryWhileUnderLoadTests$1.run(RecoveryWhileUnderLoadTests.java:77)\n[2013-03-15 21:40:29,750][WARN ][test.integration.recovery] ***\\* failed indexing thread 1\njava.lang.NullPointerException\n    at org.elasticsearch.test.integration.recovery.RecoveryWhileUnderLoadTests$1.run(RecoveryWhileUnderLoadTests.java:77)\n[2013-03-15 21:40:29,797][WARN ][test.integration.recovery] ***\\* failed indexing thread 0\njava.lang.NullPointerException\n    at org.elasticsearch.test.integration.recovery.RecoveryWhileUnderLoadTests$1.run(RecoveryWhileUnderLoadTests.java:77)\n[2013-03-15 21:40:29,860][WARN ][test.integration.recovery] ***\\* failed indexing thread 3\njava.lang.NullPointerException\n    at org.elasticsearch.test.integration.recovery.RecoveryWhileUnderLoadTests$1.run(RecoveryWhileUnderLoadTests.java:77)\n[2013-03-15 21:40:29,982][WARN ][test.integration.recovery] ***\\* failed indexing thread 4\njava.lang.NullPointerException\n    at org.elasticsearch.test.integration.recovery.RecoveryWhileUnderLoadTests$1.run(RecoveryWhileUnderLoadTests.java:77)\n[2013-03-15 21:40:30,003][INFO ][node                     ] [node1] {0.90.0.Beta2-SNAPSHOT}[7651]: stopped\n[2013-03-15 21:40:30,003][INFO ][node                     ] [node1] {0.90.0.Beta2-SNAPSHOT}[7651]: closing ...\n[2013-03-15 21:40:30,012][INFO ][node                     ] [node1] {0.90.0.Beta2-SNAPSHOT}[7651]: closed\n[2013-03-15 21:40:30,012][INFO ][node                     ] [node2] {0.90.0.Beta2-SNAPSHOT}[7651]: stopping ...\n[2013-03-15 21:40:30,019][INFO ][node                     ] [node2] {0.90.0.Beta2-SNAPSHOT}[7651]: stopped\n[2013-03-15 21:40:30,019][INFO ][node                     ] [node2] {0.90.0.Beta2-SNAPSHOT}[7651]: closing ...\n[2013-03-15 21:40:30,021][INFO ][node                     ] [node2] {0.90.0.Beta2-SNAPSHOT}[7651]: closed\nTests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 72.152 sec <<< FAILURE!\nrecoverWhileUnderLoadAllocateBackupsTest(org.elasticsearch.test.integration.recovery.RecoveryWhileUnderLoadTests)  Time elapsed: 71348 sec  <<< FAILURE!\njava.lang.AssertionError: \nExpected: <false>\n     but: was <true>\n    at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\n    at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:8)\n    at org.elasticsearch.test.integration.recovery.RecoveryWhileUnderLoadTests.recoverWhileUnderLoadAllocateBackupsTest(RecoveryWhileUnderLoadTests.java:117)\n\nResults :\n\nFailed tests:   recoverWhileUnderLoadAllocateBackupsTest(org.elasticsearch.test.integration.recovery.RecoveryWhileUnderLoadTests): (..)\n\nTests run: 1, Failures: 1, Errors: 0, Skipped: 0\n\n---\n## BUILD FAILURE\n\nTotal time: 1:16.088s\nFinished at: Fri Mar 15 21:40:30 UTC 2013\n## Final Memory: 17M/337M\n","closed_by":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"performed_via_github_app":null}