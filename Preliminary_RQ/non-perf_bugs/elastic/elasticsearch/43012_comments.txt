[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/500213642","html_url":"https://github.com/elastic/elasticsearch/issues/43012#issuecomment-500213642","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43012","id":500213642,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDIxMzY0Mg==","user":{"login":"ffknob","id":23581855,"node_id":"MDQ6VXNlcjIzNTgxODU1","avatar_url":"https://avatars0.githubusercontent.com/u/23581855?v=4","gravatar_id":"","url":"https://api.github.com/users/ffknob","html_url":"https://github.com/ffknob","followers_url":"https://api.github.com/users/ffknob/followers","following_url":"https://api.github.com/users/ffknob/following{/other_user}","gists_url":"https://api.github.com/users/ffknob/gists{/gist_id}","starred_url":"https://api.github.com/users/ffknob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ffknob/subscriptions","organizations_url":"https://api.github.com/users/ffknob/orgs","repos_url":"https://api.github.com/users/ffknob/repos","events_url":"https://api.github.com/users/ffknob/events{/privacy}","received_events_url":"https://api.github.com/users/ffknob/received_events","type":"User","site_admin":false},"created_at":"2019-06-09T13:46:41Z","updated_at":"2019-06-09T13:46:41Z","author_association":"NONE","body":"I just got it to work by including the type `_doc` in the URL... Actually that's how the examples for the `join` datatype in 7.x are written, but I completely ignored it because I thought types were completely gone in 7.x...\r\n\r\n```\r\nPOST my-index/_doc/1\r\n{\r\n  \"text\": \"test\",\r\n  \"join\": \"question\"\r\n}\r\n``` \r\n\r\nStill a bug?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/500325797","html_url":"https://github.com/elastic/elasticsearch/issues/43012#issuecomment-500325797","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43012","id":500325797,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDMyNTc5Nw==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2019-06-10T07:51:50Z","updated_at":"2019-06-10T07:51:50Z","author_association":"MEMBER","body":"In 7.x `POST my-index/1` means add a document in an index named `my_index` of type `1`. This should result in an error with a message like:\r\n````\r\n\"Rejecting mapping update to [my-index] as the final mapping would have more than 1 type: [_doc, 1]\"\r\n````\r\nbut it seems that we check the field first even though we know that the mapping update will fail (because only one type is allowed per index). This should be considered as a bug because the error message is misleading but as you already noticed the correct syntax is to use `POST my-index/_doc/1`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/500325871","html_url":"https://github.com/elastic/elasticsearch/issues/43012#issuecomment-500325871","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43012","id":500325871,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDMyNTg3MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-06-10T07:52:04Z","updated_at":"2019-06-10T07:52:04Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/520600245","html_url":"https://github.com/elastic/elasticsearch/issues/43012#issuecomment-520600245","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43012","id":520600245,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDYwMDI0NQ==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2019-08-12T21:20:47Z","updated_at":"2019-08-12T21:20:47Z","author_association":"MEMBER","body":"I merged #45157 to address the confusing error message. Thanks @ffknob for filing this!","performed_via_github_app":null}]