{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/18508","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18508/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18508/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18508/events","html_url":"https://github.com/elastic/elasticsearch/issues/18508","id":156155272,"node_id":"MDU6SXNzdWUxNTYxNTUyNzI=","number":18508,"title":"failed to rollback writer on close","user":{"login":"makeyang","id":13898618,"node_id":"MDQ6VXNlcjEzODk4NjE4","avatar_url":"https://avatars2.githubusercontent.com/u/13898618?v=4","gravatar_id":"","url":"https://api.github.com/users/makeyang","html_url":"https://github.com/makeyang","followers_url":"https://api.github.com/users/makeyang/followers","following_url":"https://api.github.com/users/makeyang/following{/other_user}","gists_url":"https://api.github.com/users/makeyang/gists{/gist_id}","starred_url":"https://api.github.com/users/makeyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/makeyang/subscriptions","organizations_url":"https://api.github.com/users/makeyang/orgs","repos_url":"https://api.github.com/users/makeyang/repos","events_url":"https://api.github.com/users/makeyang/events{/privacy}","received_events_url":"https://api.github.com/users/makeyang/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2016-05-22T14:42:55Z","updated_at":"2017-03-15T00:19:14Z","closed_at":"2016-05-22T15:04:53Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"<!--\nGitHub is reserved for bug reports and feature requests. The best place\nto ask a general question is at the Elastic Discourse forums at\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\na feature request, please include one and only one of the below blocks\nin your new issue.\n-->\n\n<!--\nIf you are filing a bug report, please remove the below feature\nrequest block and provide responses for all of the below items.\n-->\n\n**Elasticsearch version**:\n2.1.2\n**JVM version**:\njdk1.8.0_60\n**OS version**:\nCentOS release 6.6 (Final)\n**Description of the problem including expected versus actual behavior**:\n\nrunning a cluster for a long time, rolling update from 2.1.0 to 2.1.2 and one node keeps throw below exception:\n[2016-05-22 22:34:58,678][WARN ][index.engine             ] [d_172.20.122.110:9204] [op_logs_2016-05-26][7] failed to read latest segment infos on flush\njava.nio.file.FileSystemException: /data6/elasticsearch/jiesi-59/jiesi-59/nodes/0/indices/op_logs_2016-05-26/7/index: Input/output error\n        at sun.nio.fs.UnixException.translateToIOException(UnixException.java:91)\n        at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)\n        at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)\n        at sun.nio.fs.UnixFileSystemProvider.newDirectoryStream(UnixFileSystemProvider.java:427)\n        at java.nio.file.Files.newDirectoryStream(Files.java:457)\n        at org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:179)\n        at org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:191)\n        at org.elasticsearch.index.store.FsDirectoryService$1.listAll(FsDirectoryService.java:127)\n        at org.apache.lucene.store.FilterDirectory.listAll(FilterDirectory.java:57)\n        at org.apache.lucene.store.FilterDirectory.listAll(FilterDirectory.java:57)\n        at org.elasticsearch.index.store.Store.failIfCorrupted(Store.java:567)\n        at org.elasticsearch.index.store.Store.failIfCorrupted(Store.java:563)\n        at org.elasticsearch.index.store.Store.readLastCommittedSegmentsInfo(Store.java:146)\n        at org.elasticsearch.index.engine.InternalEngine.flush(InternalEngine.java:783)\n        at org.elasticsearch.index.engine.InternalEngine.flush(InternalEngine.java:732)\n        at org.elasticsearch.index.engine.Engine.flushAndClose(Engine.java:1128)\n        at org.elasticsearch.index.shard.IndexShard.close(IndexShard.java:829)\n        at org.elasticsearch.index.IndexService.closeShardInjector(IndexService.java:443)\n        at org.elasticsearch.index.IndexService.removeShard(IndexService.java:416)\n        at org.elasticsearch.index.IndexService.close(IndexService.java:253)\n        at org.elasticsearch.indices.IndicesService.removeIndex(IndicesService.java:413)\n        at org.elasticsearch.indices.IndicesService.access$000(IndicesService.java:108)\n        at org.elasticsearch.indices.IndicesService$1.run(IndicesService.java:174)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\n**Steps to reproduce**:\n 1.\n 2.\n 3.\n\n**Provide logs (if relevant)**:\n\n<!--\nIf you are filing a feature request, please remove the above bug\nreport block and provide responses for all of the below items.\n-->\n\n**Describe the feature**:\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}