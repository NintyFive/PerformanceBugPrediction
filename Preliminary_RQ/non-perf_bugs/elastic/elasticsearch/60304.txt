{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/60304","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60304/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60304/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60304/events","html_url":"https://github.com/elastic/elasticsearch/issues/60304","id":667133696,"node_id":"MDU6SXNzdWU2NjcxMzM2OTY=","number":60304,"title":"Perform OR operation using two or more script tag","user":{"login":"Mamta92","id":12955134,"node_id":"MDQ6VXNlcjEyOTU1MTM0","avatar_url":"https://avatars1.githubusercontent.com/u/12955134?v=4","gravatar_id":"","url":"https://api.github.com/users/Mamta92","html_url":"https://github.com/Mamta92","followers_url":"https://api.github.com/users/Mamta92/followers","following_url":"https://api.github.com/users/Mamta92/following{/other_user}","gists_url":"https://api.github.com/users/Mamta92/gists{/gist_id}","starred_url":"https://api.github.com/users/Mamta92/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mamta92/subscriptions","organizations_url":"https://api.github.com/users/Mamta92/orgs","repos_url":"https://api.github.com/users/Mamta92/repos","events_url":"https://api.github.com/users/Mamta92/events{/privacy}","received_events_url":"https://api.github.com/users/Mamta92/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-07-28T14:45:58Z","updated_at":"2020-07-28T18:56:22Z","closed_at":"2020-07-28T18:56:22Z","author_association":"NONE","active_lock_reason":null,"body":"I have a use case where a user can perform >=,<=,= operations and their corresponding values using a dropdown.\r\nI want to see results where (SubjectId = 1002 OR SubjectId= 1001) or may be (Grades >= 1 OR Grades <=3).\r\nI have tried the following using ES:-\r\n\r\n`{\r\n  \"size\": 0,\r\n  \"from\": 0,\r\n  \"query\": {\r\n    \"bool\": {\r\n      \"must\": [\r\n        {\r\n          \"script\": {\r\n            \"script\": {\r\n              \"source\": \"InternalSqlScriptUtils.nullSafeFilter(InternalSqlScriptUtils.eq(InternalSqlScriptUtils.cast(InternalSqlScriptUtils.docValue(doc,params.v0),params.v1),params.v2))\",\r\n              \"lang\": \"painless\",\r\n              \"params\": {\r\n                \"v0\": \"SubjectId.keyword\",\r\n                \"v1\": \"DOUBLE\",\r\n                \"v2\": 1002\r\n              }\r\n            }\r\n          }\r\n        }\r\n      ],\r\n      \"should\": [\r\n        {\r\n          \"script\": {\r\n            \"script\": {\r\n              \"source\": \"InternalSqlScriptUtils.nullSafeFilter(InternalSqlScriptUtils.eq(InternalSqlScriptUtils.cast(InternalSqlScriptUtils.docValue(doc,params.v0),params.v1),params.v2))\",\r\n              \"lang\": \"painless\",\r\n              \"params\": {\r\n                \"v0\": \"SubjectId.keyword\",\r\n                \"v1\": \"DOUBLE\",\r\n                \"v2\": 1001\r\n              }\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}`\r\n\r\nAdding a JSON link of query also for reference:- https://jsoneditoronline.org/#left=cloud.6e6573ae5dd14d04ab2132944bb37e19&right=local.rafosu\r\n\r\nUsing the above query returns only results with SubjectId 1002 and not 1001(OR operation should return both). Suppose 1002 SubjectId has total 100 results and 1001 has total 50 results. It only returns 100 results.\r\n\r\nHow can the query be modified to return the addition of both the results?","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}