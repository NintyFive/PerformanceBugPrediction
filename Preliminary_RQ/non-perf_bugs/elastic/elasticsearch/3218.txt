{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3218","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3218/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3218/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3218/events","html_url":"https://github.com/elastic/elasticsearch/issues/3218","id":15916399,"node_id":"MDU6SXNzdWUxNTkxNjM5OQ==","number":3218,"title":"Geohash filter","user":{"login":"chilling","id":2590333,"node_id":"MDQ6VXNlcjI1OTAzMzM=","avatar_url":"https://avatars2.githubusercontent.com/u/2590333?v=4","gravatar_id":"","url":"https://api.github.com/users/chilling","html_url":"https://github.com/chilling","followers_url":"https://api.github.com/users/chilling/followers","following_url":"https://api.github.com/users/chilling/following{/other_user}","gists_url":"https://api.github.com/users/chilling/gists{/gist_id}","starred_url":"https://api.github.com/users/chilling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chilling/subscriptions","organizations_url":"https://api.github.com/users/chilling/orgs","repos_url":"https://api.github.com/users/chilling/repos","events_url":"https://api.github.com/users/chilling/events{/privacy}","received_events_url":"https://api.github.com/users/chilling/received_events","type":"User","site_admin":false},"labels":[{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":41588718,"node_id":"MDU6TGFiZWw0MTU4ODcxOA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.90.2","name":"v0.90.2","color":"DDDDDD","default":false,"description":null},{"id":37906111,"node_id":"MDU6TGFiZWwzNzkwNjExMQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.0.0.Beta1","name":"v1.0.0.Beta1","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2013-06-24T09:58:27Z","updated_at":"2013-06-24T10:48:39Z","closed_at":"2013-06-24T10:42:42Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Geohashes provide a structure for geospatial subdivisions by defining a hierarchical grid. This data structure supports an efficient way to filter data in a hierarchical way which should be supported by the REST API to filter points of certain cell.\nSuch a filter just needs a geohash that defines a cell within the grid and will be used as prefix. In result of filtering data with a geohash filter all geopoints sharing the same prefix as the defined cell must be returned. Also such a filter should allow filtering adjacent cells of the defined cell. For example the cell defined by the geohash `u30` has eight adjacent cells `u1r`, `u32`, `u33`, `u1p`, `u31`, `u0z`, `u2b` and `u2c`. So this kind of filter can be used for a more efficient filtering-process than the simple bounding box filter does.\n# Example\n\nThe most simple setup for such a filter uses two arguments:\n- the field of the document which holds the geohash\n- the actual geohash\n\n```\ncurl -XGET 'http://127.0.0.1:9200/locations/_search?pretty=true' -d '{\n    \"query\": {\n        \"match_all\":{}\n    },\n    \"filter\": {\n        \"geohash_cell\": {\n            \"field\": \"pin\",\n            \"geohash\": \"u30\",\n        }\n    }\n}'\n```\n\nSince each geopoint corresponds to a single geohash it must be possible to index all prefixes of this geohash. For example the geohash `u30` also corresponds to the terms `u3` and `u`. The upper bound of the geohash length is defined by the precision defined in the mapping.\n\n```\ncurl -XPUT 'http://127.0.0.1:9200/locations/?pretty=true' -d '{\n    \"mappings\" : {\n        \"location\": {\n            \"properties\": {\n                \"pin\": {\n                    \"type\": \"geo_point\",\n                    \"geohash\": true,\n                    \"geohash_prefix\": true,\n                    \"geohash_precision\", 12\n                }\n            }\n        }\n    }\n}'\n```\n","closed_by":{"login":"chilling","id":2590333,"node_id":"MDQ6VXNlcjI1OTAzMzM=","avatar_url":"https://avatars2.githubusercontent.com/u/2590333?v=4","gravatar_id":"","url":"https://api.github.com/users/chilling","html_url":"https://github.com/chilling","followers_url":"https://api.github.com/users/chilling/followers","following_url":"https://api.github.com/users/chilling/following{/other_user}","gists_url":"https://api.github.com/users/chilling/gists{/gist_id}","starred_url":"https://api.github.com/users/chilling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chilling/subscriptions","organizations_url":"https://api.github.com/users/chilling/orgs","repos_url":"https://api.github.com/users/chilling/repos","events_url":"https://api.github.com/users/chilling/events{/privacy}","received_events_url":"https://api.github.com/users/chilling/received_events","type":"User","site_admin":false},"performed_via_github_app":null}