{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26440","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26440/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26440/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26440/events","html_url":"https://github.com/elastic/elasticsearch/issues/26440","id":253972013,"node_id":"MDU6SXNzdWUyNTM5NzIwMTM=","number":26440,"title":"Assign shards and Data replication ","user":{"login":"aniked","id":7543420,"node_id":"MDQ6VXNlcjc1NDM0MjA=","avatar_url":"https://avatars3.githubusercontent.com/u/7543420?v=4","gravatar_id":"","url":"https://api.github.com/users/aniked","html_url":"https://github.com/aniked","followers_url":"https://api.github.com/users/aniked/followers","following_url":"https://api.github.com/users/aniked/following{/other_user}","gists_url":"https://api.github.com/users/aniked/gists{/gist_id}","starred_url":"https://api.github.com/users/aniked/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aniked/subscriptions","organizations_url":"https://api.github.com/users/aniked/orgs","repos_url":"https://api.github.com/users/aniked/repos","events_url":"https://api.github.com/users/aniked/events{/privacy}","received_events_url":"https://api.github.com/users/aniked/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-08-30T11:55:26Z","updated_at":"2017-08-30T12:39:25Z","closed_at":"2017-08-30T12:39:25Z","author_association":"NONE","active_lock_reason":null,"body":"Hello , \r\nBy mistake, a folder (index) have been deleted from a node : /data3/data/es/esdartyprd/nodes/0/indices/enc_idx/2/index )\r\n\r\nI can see that data are missed for primary shard in this node (node1) => \r\nfor this index , here what gives me the command curl -XGET http://localhost:9200/_cat/shards \r\n\r\nenc_idx         2 p STARTED    57824815 28.8gb 10.135.8.201 HDPESPRD1\r\nenc_idx         2 r STARTED    57824815 36.5gb 10.135.8.202 HDPESPRD2\r\nenc_idx         2 r STARTED    57824815 36.5gb 10.135.10.15 HDPESPRA1\r\nenc_idx         2 r STARTED    57824815 36.5gb 10.135.8.203 HDPESPRD3\r\nenc_idx         2 r UNASSIGNED\r\n\r\nYou can see that data are missed in the node1 which is master ! And still have problem to assign data to node4 \r\n\r\nAny possibility to recover or replicate missed data from replicate shards ? Is that done automatically? Any solutions to assign the shard which is not assigned ? In the log I find an error that a file is corrupted from this folder : \r\n\r\n [enc_idx][2] Corrupted index [corrupted_1ytPPpKkTZCGG_zQcbBG-w] caused by: CorruptIndexException[codec footer mismatch: actual footer=1063427 vs expected footer=-1071082520 (resource: NIOFSIndexInput(path=\"/data3/data/es/esdartyprd/nodes/0/indices/enc_idx/2/index/_3gv6_es090_0.pos\"))]\r\n ","closed_by":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"performed_via_github_app":null}