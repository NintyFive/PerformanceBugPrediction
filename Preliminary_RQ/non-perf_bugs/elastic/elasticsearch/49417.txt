{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/49417","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49417/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49417/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49417/events","html_url":"https://github.com/elastic/elasticsearch/issues/49417","id":526379275,"node_id":"MDU6SXNzdWU1MjYzNzkyNzU=","number":49417,"title":"Elasticsearch 6.8.5 release archive ownership","user":{"login":"csandanov","id":1058233,"node_id":"MDQ6VXNlcjEwNTgyMzM=","avatar_url":"https://avatars2.githubusercontent.com/u/1058233?v=4","gravatar_id":"","url":"https://api.github.com/users/csandanov","html_url":"https://github.com/csandanov","followers_url":"https://api.github.com/users/csandanov/followers","following_url":"https://api.github.com/users/csandanov/following{/other_user}","gists_url":"https://api.github.com/users/csandanov/gists{/gist_id}","starred_url":"https://api.github.com/users/csandanov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/csandanov/subscriptions","organizations_url":"https://api.github.com/users/csandanov/orgs","repos_url":"https://api.github.com/users/csandanov/repos","events_url":"https://api.github.com/users/csandanov/events{/privacy}","received_events_url":"https://api.github.com/users/csandanov/received_events","type":"User","site_admin":false},"labels":[{"id":114977275,"node_id":"MDU6TGFiZWwxMTQ5NzcyNzU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Packaging","name":":Delivery/Packaging","color":"0e8a16","default":false,"description":"RPM and deb packaging, tar and zip archives, shell and batch scripts"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-11-21T05:49:15Z","updated_at":"2020-11-11T21:55:00Z","closed_at":"2019-11-22T03:27:29Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`): 6.8.5\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): Alpine 3.10.3\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nI'm maintaining elasticsearch docker images where I download the archive (https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.8.5.tar.gz) and extract it via `tar` with `--strip-components` flag. I've noticed that since 6.8.5 release the flag `--strip-components` no longer works. However 7.4.2 works just fine. The only difference I can see is the ownership of the files in the archive which for 6.8.5 is `631:503` (unlike 7.4.2 with `root:root`). I'm not entirely sure though that's the main reason because it still doesn't work with flags `--no-same-owner`, `--user` or even when I add the user/groups with these IDs. That's why I've also [posted this issue on serverfault](https://serverfault.com/questions/992681/why-tar-flag-strip-components-ignored-sometimes)\r\n\r\n**Steps to reproduce**:\r\n\r\n```shell\r\n$ docker run --rm -ti alpine:3.10.3 sh\r\n\r\n### from container\r\n$ apk add --update tar\r\n$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.8.5.tar.gz\r\n$ mkdir elastic\r\n$ tar zxvf elasticsearch-6.8.5.tar.gz --strip-components=1 -C elastic\r\n$ ls -la elastic\r\n```\r\nYou'll see directory elastic/elasticsearch-6.8.5 that shouldn't exist","closed_by":{"login":"csandanov","id":1058233,"node_id":"MDQ6VXNlcjEwNTgyMzM=","avatar_url":"https://avatars2.githubusercontent.com/u/1058233?v=4","gravatar_id":"","url":"https://api.github.com/users/csandanov","html_url":"https://github.com/csandanov","followers_url":"https://api.github.com/users/csandanov/followers","following_url":"https://api.github.com/users/csandanov/following{/other_user}","gists_url":"https://api.github.com/users/csandanov/gists{/gist_id}","starred_url":"https://api.github.com/users/csandanov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/csandanov/subscriptions","organizations_url":"https://api.github.com/users/csandanov/orgs","repos_url":"https://api.github.com/users/csandanov/repos","events_url":"https://api.github.com/users/csandanov/events{/privacy}","received_events_url":"https://api.github.com/users/csandanov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}