[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418314753","html_url":"https://github.com/elastic/elasticsearch/issues/32836#issuecomment-418314753","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32836","id":418314753,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODMxNDc1Mw==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2018-09-04T10:15:05Z","updated_at":"2018-09-04T10:15:05Z","author_association":"CONTRIBUTOR","body":"#29769 could also be considered while changes are being made for this issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/421339407","html_url":"https://github.com/elastic/elasticsearch/issues/32836#issuecomment-421339407","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32836","id":421339407,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMTMzOTQwNw==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2018-09-14T12:11:22Z","updated_at":"2018-09-14T12:11:22Z","author_association":"CONTRIBUTOR","body":"Some other things to consider that we discussed verbally:\r\n\r\n1. Can the deletion task be made a persistent task?  One benefit is that if the node that's deleting the job is killed part way through the deletion then the job won't be left half deleted.  The other benefit is that when job configs have moved to indices we'll have something in cluster state (namely the deletion persistent task) that we can check for to find out if the job is in the process of being deleted.\r\n2. Should we queue up deletes so that we don't have lots running in parallel against the same index?  Maybe the answer should be yes if `wait_for_completion=false` and no if `wait_for_completion=true`?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/425082302","html_url":"https://github.com/elastic/elasticsearch/issues/32836#issuecomment-425082302","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32836","id":425082302,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTA4MjMwMg==","user":{"login":"dimitris-athanasiou","id":9351617,"node_id":"MDQ6VXNlcjkzNTE2MTc=","avatar_url":"https://avatars3.githubusercontent.com/u/9351617?v=4","gravatar_id":"","url":"https://api.github.com/users/dimitris-athanasiou","html_url":"https://github.com/dimitris-athanasiou","followers_url":"https://api.github.com/users/dimitris-athanasiou/followers","following_url":"https://api.github.com/users/dimitris-athanasiou/following{/other_user}","gists_url":"https://api.github.com/users/dimitris-athanasiou/gists{/gist_id}","starred_url":"https://api.github.com/users/dimitris-athanasiou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimitris-athanasiou/subscriptions","organizations_url":"https://api.github.com/users/dimitris-athanasiou/orgs","repos_url":"https://api.github.com/users/dimitris-athanasiou/repos","events_url":"https://api.github.com/users/dimitris-athanasiou/events{/privacy}","received_events_url":"https://api.github.com/users/dimitris-athanasiou/received_events","type":"User","site_admin":false},"created_at":"2018-09-27T13:03:14Z","updated_at":"2018-09-27T13:03:14Z","author_association":"CONTRIBUTOR","body":"The two points above have been discussed. I post remarks here:\r\n\r\n1. Using a persistent task is too big a hammer for this. It brings with it a lot of complexity for dealing with an issue that seems to be an edge case at the moment. Also, delete job is internally using delete-by-query for which there are considerations to turn into a persistent task itself. The result of all the above is we should not proceed with making delete-job a persistent task.\r\n2. It might be a good idea to wait and measure the performance issue after our current changes have baked in (deletion of index for dedicated indices, async task which prevents force-deletes from doing any work even when the first request failed). If we do find we need to further optimize, we should also consider reducing the slices of the delete-by-query.","performed_via_github_app":null}]