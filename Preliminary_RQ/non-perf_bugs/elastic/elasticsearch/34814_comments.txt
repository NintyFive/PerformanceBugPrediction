[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/432795939","html_url":"https://github.com/elastic/elasticsearch/issues/34814#issuecomment-432795939","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34814","id":432795939,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjc5NTkzOQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-10-24T19:26:23Z","updated_at":"2018-10-24T19:26:23Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/433122127","html_url":"https://github.com/elastic/elasticsearch/issues/34814#issuecomment-433122127","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34814","id":433122127,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzEyMjEyNw==","user":{"login":"chrisronline","id":56682,"node_id":"MDQ6VXNlcjU2Njgy","avatar_url":"https://avatars1.githubusercontent.com/u/56682?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisronline","html_url":"https://github.com/chrisronline","followers_url":"https://api.github.com/users/chrisronline/followers","following_url":"https://api.github.com/users/chrisronline/following{/other_user}","gists_url":"https://api.github.com/users/chrisronline/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisronline/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisronline/subscriptions","organizations_url":"https://api.github.com/users/chrisronline/orgs","repos_url":"https://api.github.com/users/chrisronline/repos","events_url":"https://api.github.com/users/chrisronline/events{/privacy}","received_events_url":"https://api.github.com/users/chrisronline/received_events","type":"User","site_admin":false},"created_at":"2018-10-25T16:40:01Z","updated_at":"2018-10-25T16:40:01Z","author_association":"CONTRIBUTOR","body":"Interesting.\r\n\r\nIs there historical reasoning behind this @pickypg?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/433515022","html_url":"https://github.com/elastic/elasticsearch/issues/34814#issuecomment-433515022","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34814","id":433515022,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzUxNTAyMg==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2018-10-26T19:15:31Z","updated_at":"2018-10-26T19:15:31Z","author_association":"MEMBER","body":"@chrisronline It used to be that upon index creation that the cluster would be red, but now it's yellow (https://github.com/elastic/elasticsearch/pull/18737 changed this in 5.0).\r\n\r\nNot to be pedantic, but monitoring is reporting that the cluster stayed yellow long enough for it to catch it. One thing that may be worthwhile is for the existing cluster alert to fetch the _two_ most recent `cluster_stats` documents and only alert if the two consecutive reports of `yellow` status.\r\n\r\nhttps://github.com/elastic/elasticsearch/blob/5e0b524aa5e8e7f6715b4a37288bcebcc98b6fb1/x-pack/plugin/monitoring/src/main/resources/monitoring/watches/elasticsearch_cluster_status.json#L30\r\n\r\nThis would add further complexity to the Watch's `condition`, but it wouldn't be undoable.\r\n\r\nMy only problem with that approach as the default behavior is that it would hide legitimate cases of shards flapping. You would certainly not want that behavior with `red` state. Personally, I think waiting for the planned improvements to Cluster Alerts to fix this behavior by putting the user in more direct control would be superior to tweaking the existing Cluster Alerts, but I can definitely see how that may not be universally agreed upon belief.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/433527778","html_url":"https://github.com/elastic/elasticsearch/issues/34814#issuecomment-433527778","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34814","id":433527778,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzUyNzc3OA==","user":{"login":"DaveyDevOps","id":34562546,"node_id":"MDQ6VXNlcjM0NTYyNTQ2","avatar_url":"https://avatars0.githubusercontent.com/u/34562546?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveyDevOps","html_url":"https://github.com/DaveyDevOps","followers_url":"https://api.github.com/users/DaveyDevOps/followers","following_url":"https://api.github.com/users/DaveyDevOps/following{/other_user}","gists_url":"https://api.github.com/users/DaveyDevOps/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveyDevOps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveyDevOps/subscriptions","organizations_url":"https://api.github.com/users/DaveyDevOps/orgs","repos_url":"https://api.github.com/users/DaveyDevOps/repos","events_url":"https://api.github.com/users/DaveyDevOps/events{/privacy}","received_events_url":"https://api.github.com/users/DaveyDevOps/received_events","type":"User","site_admin":false},"created_at":"2018-10-26T20:05:33Z","updated_at":"2018-10-26T20:05:33Z","author_association":"NONE","body":"> cluster stayed yellow long enough for it to catch it  \r\n\r\nIsn't it more just a matter of timing? If monitoring data is collected right when cluster status returns yellow. We don't see alerts every time a new index is created, just when the \"stars align\".\r\n\r\n> planned improvements to Cluster Alerts [...] putting the user in more direct control \r\n\r\nThose sound lovely, can you provide more information/references?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/433529507","html_url":"https://github.com/elastic/elasticsearch/issues/34814#issuecomment-433529507","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34814","id":433529507,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzUyOTUwNw==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2018-10-26T20:12:12Z","updated_at":"2018-10-26T20:12:12Z","author_association":"MEMBER","body":"> Isn't it more just a matter of timing? If monitoring data is collected right when cluster status returns yellow. We don't see alerts every time a new index is created, just when the \"stars align\".\r\n\r\nCorrect. That's what I meant by \"the cluster stayed yellow long enough for it to catch it\". Under ordinary conditions, the primary should be created in milliseconds, followed by the same story for the replica and the likelihood of catching it should be pretty rare. An overburdened cluster will be slower, which increases the likelihood of this happening.\r\n\r\n> Those sound lovely, can you provide more information/references?\r\n\r\nI don't think the team is quite ready to discuss it, but needless to say the inability to tweak your own Cluster Alerts is a bit of a frustration that we share.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/433536543","html_url":"https://github.com/elastic/elasticsearch/issues/34814#issuecomment-433536543","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34814","id":433536543,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzUzNjU0Mw==","user":{"login":"DaveyDevOps","id":34562546,"node_id":"MDQ6VXNlcjM0NTYyNTQ2","avatar_url":"https://avatars0.githubusercontent.com/u/34562546?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveyDevOps","html_url":"https://github.com/DaveyDevOps","followers_url":"https://api.github.com/users/DaveyDevOps/followers","following_url":"https://api.github.com/users/DaveyDevOps/following{/other_user}","gists_url":"https://api.github.com/users/DaveyDevOps/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveyDevOps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveyDevOps/subscriptions","organizations_url":"https://api.github.com/users/DaveyDevOps/orgs","repos_url":"https://api.github.com/users/DaveyDevOps/repos","events_url":"https://api.github.com/users/DaveyDevOps/events{/privacy}","received_events_url":"https://api.github.com/users/DaveyDevOps/received_events","type":"User","site_admin":false},"created_at":"2018-10-26T20:38:49Z","updated_at":"2018-10-26T20:38:49Z","author_association":"NONE","body":"If the planned improvements are being tracking I think this issue could be closed. If they don't yet have a \"home\" maybe track on this issue (or not). \r\n\r\nOther random thoughts...\r\nWould including the cluster's \"human\" name in alerts be one of those improvements.\r\nMore generally, perhaps watcher could have a check count. Where condition has to be true \"check count\" number of times before action is triggered, maybe set this at action level. That might allow escalation path e.g. if not resolved in an hour start emailing your boss. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/433537474","html_url":"https://github.com/elastic/elasticsearch/issues/34814#issuecomment-433537474","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34814","id":433537474,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzUzNzQ3NA==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2018-10-26T20:42:36Z","updated_at":"2018-10-26T20:42:36Z","author_association":"MEMBER","body":"> Would including the cluster's \"human\" name in alerts be one of those improvements.\r\n\r\nYes. :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/655359733","html_url":"https://github.com/elastic/elasticsearch/issues/34814#issuecomment-655359733","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34814","id":655359733,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTM1OTczMw==","user":{"login":"ypid-geberit","id":36660054,"node_id":"MDQ6VXNlcjM2NjYwMDU0","avatar_url":"https://avatars1.githubusercontent.com/u/36660054?v=4","gravatar_id":"","url":"https://api.github.com/users/ypid-geberit","html_url":"https://github.com/ypid-geberit","followers_url":"https://api.github.com/users/ypid-geberit/followers","following_url":"https://api.github.com/users/ypid-geberit/following{/other_user}","gists_url":"https://api.github.com/users/ypid-geberit/gists{/gist_id}","starred_url":"https://api.github.com/users/ypid-geberit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ypid-geberit/subscriptions","organizations_url":"https://api.github.com/users/ypid-geberit/orgs","repos_url":"https://api.github.com/users/ypid-geberit/repos","events_url":"https://api.github.com/users/ypid-geberit/events{/privacy}","received_events_url":"https://api.github.com/users/ypid-geberit/received_events","type":"User","site_admin":false},"created_at":"2020-07-08T08:05:19Z","updated_at":"2020-07-08T08:07:57Z","author_association":"NONE","body":"Is there any GitHub issue I can \"watch\" for current progress?\r\n\r\nCompared to fully-featured monitoring systems, the watches fall short. Something like max_check_attempts is used for decades to control notification volume. (I tried to write my own watch once to do metrics alerting but see this as a failed attempt. The watcher infrastructure is not ideal for this use case and I am not even sure that it should be extended for it)\r\n\r\nIt seems not deterministic at which second the watch is scheduled. Is this correct? At least I checked two clusters and one schedules the watch \"X-Pack Monitoring: Cluster Status\" at second 17, the other at 32. If there is the possibility that the watch gets scheduled close to second 0, the false positive notification rate will increase.\r\n\r\nThat just to put:\r\n\r\n> Not to be pedantic, but monitoring is reporting that the cluster stayed yellow long enough for it to catch it.\r\n\r\nInto perspective. I am not saying it should not be investigated, I am just saying that admins might not have the time to do this immediately and thus have the option of ignoring this email and potentially miss longer lasting, real issues or possibly get false positives as long as max_check_attempts is not supported.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/655538854","html_url":"https://github.com/elastic/elasticsearch/issues/34814#issuecomment-655538854","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34814","id":655538854,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTUzODg1NA==","user":{"login":"chrisronline","id":56682,"node_id":"MDQ6VXNlcjU2Njgy","avatar_url":"https://avatars1.githubusercontent.com/u/56682?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisronline","html_url":"https://github.com/chrisronline","followers_url":"https://api.github.com/users/chrisronline/followers","following_url":"https://api.github.com/users/chrisronline/following{/other_user}","gists_url":"https://api.github.com/users/chrisronline/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisronline/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisronline/subscriptions","organizations_url":"https://api.github.com/users/chrisronline/orgs","repos_url":"https://api.github.com/users/chrisronline/repos","events_url":"https://api.github.com/users/chrisronline/events{/privacy}","received_events_url":"https://api.github.com/users/chrisronline/received_events","type":"User","site_admin":false},"created_at":"2020-07-08T13:59:49Z","updated_at":"2020-07-08T13:59:49Z","author_association":"CONTRIBUTOR","body":"@ypid-geberit Thanks for your feedback.\r\n\r\nThis would be a good ticket to add this feedback: https://github.com/elastic/kibana/issues/42960\r\n\r\nWe have an [outstanding PR](https://github.com/elastic/kibana/pull/68805) to change the underlying technology powering the alerts and as a result, we will have full control over the alert definition and execution within Kibana. Unfortunately, we are not able to fully convert the existing watches over [until we get resolution here](https://github.com/elastic/elasticsearch/issues/50032). I'd suggest adding your thoughts to the above kibana issue and we will take them into account when fully converting these watches over.","performed_via_github_app":null}]