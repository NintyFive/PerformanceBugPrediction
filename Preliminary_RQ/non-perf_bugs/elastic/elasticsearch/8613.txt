{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8613","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8613/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8613/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8613/events","html_url":"https://github.com/elastic/elasticsearch/issues/8613","id":49813266,"node_id":"MDU6SXNzdWU0OTgxMzI2Ng==","number":8613,"title":"Treatment of special characters in elasticsearch","user":{"login":"prachicsa","id":9909499,"node_id":"MDQ6VXNlcjk5MDk0OTk=","avatar_url":"https://avatars1.githubusercontent.com/u/9909499?v=4","gravatar_id":"","url":"https://api.github.com/users/prachicsa","html_url":"https://github.com/prachicsa","followers_url":"https://api.github.com/users/prachicsa/followers","following_url":"https://api.github.com/users/prachicsa/following{/other_user}","gists_url":"https://api.github.com/users/prachicsa/gists{/gist_id}","starred_url":"https://api.github.com/users/prachicsa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prachicsa/subscriptions","organizations_url":"https://api.github.com/users/prachicsa/orgs","repos_url":"https://api.github.com/users/prachicsa/repos","events_url":"https://api.github.com/users/prachicsa/events{/privacy}","received_events_url":"https://api.github.com/users/prachicsa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2014-11-23T03:33:43Z","updated_at":"2014-11-24T20:20:41Z","closed_at":"2014-11-24T20:20:41Z","author_association":"NONE","active_lock_reason":null,"body":"I use the following analyzer:\n\ncurl -XPUT 'http://localhost:9200/sample/' -d '\n{\n  \"settings\" : {\n  \"index\": {\n    \"analysis\": {\n      \"analyzer\": {\n        \"default\": {\n         \"type\": \"custom\",\n         \"tokenizer\": \"keyword\",\n         \"filter\": [\"trim\", \"lowercase\"]}\n      }\n    }\n  }\n  }\n}'\n\nThen when I try to insert some documents which contain special characters like % and etc, it converts in to hex.\n\n1%2fPJJP3JV2C24iDfEu9XpHBaYxXh%2fdHTbmchB35SDznXO2g8Vz4D7GTIvY54iMiX_149c95f02a8 -> actual value\n\n1&#x25;2fPJJP3JV2C24iDfEu9XpHBaYxXh&#x25;2fdHTbmchB35SDznXO2g8Vz4D7GTIvY54iMiX&#x5f;149c95f02a8 \n\n-> stored value.\n\nSample:\n\ncurl -XPUT 'http://localhost:9200/sample/strom/1' -d '{\n    \"user\" : \"user1\",\n    \"message\" : \"1%2fPJJP3JV2C24iDfEu9XpHBaYxXh%2fdHTbmchB35SDznXO2g8Vz4D7GTIvY54iMiX_149c95f02a8\"\n}'\n\nThe problem started occurring only once the data crossed some million documents. Earlier it used store it as it is.\n\nNow if I try to search using,\n\n1%2fPJJP3JV2C24iDfEu9XpHBaYxXh%2fdHTbmchB35SDznXO2g8Vz4D7GTIvY54iMiX_149c95f02a8\n\nit is not able to retrieve the document. How do I deal with this? The behavior seems to non-deterministic in converting special character to hex.\n\nI am unable to replicate the same issue on localmachine.\n\nCan someone explain the mistake I am making?\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}