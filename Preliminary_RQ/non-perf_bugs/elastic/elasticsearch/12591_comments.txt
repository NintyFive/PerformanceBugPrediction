[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/127973410","html_url":"https://github.com/elastic/elasticsearch/issues/12591#issuecomment-127973410","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12591","id":127973410,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNzk3MzQxMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-08-05T12:04:35Z","updated_at":"2015-08-05T12:04:35Z","author_association":"CONTRIBUTOR","body":"You're getting lat and lon mixed up.  Arrays take [`lon`,`lat`]. See:\n\n```\nPUT test\n{\n  \"mappings\": {\n    \"test\": {\n      \"properties\": {\n        \"location\": {\n          \"type\": \"geo_point\"\n        }\n      }\n    }\n  }\n}\n\nPUT test/test/1\n{\n  \"location\": {\n    \"lat\": 41.6913013,\n    \"lon\": -72.8458687\n  }\n}\n\nGET test/_search\n{\n  \"sort\": [\n    {\n      \"_geo_distance\": {\n        \"location\": {\n          \"lat\": 42.587914999999995,\n          \"lon\": -72.5994104\n        },\n        \"order\": \"asc\",\n        \"unit\": \"miles\",\n        \"distance_type\": \"arc\"\n      }\n    }\n  ]\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/128016512","html_url":"https://github.com/elastic/elasticsearch/issues/12591#issuecomment-128016512","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12591","id":128016512,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODAxNjUxMg==","user":{"login":"intelligentspark","id":1282252,"node_id":"MDQ6VXNlcjEyODIyNTI=","avatar_url":"https://avatars1.githubusercontent.com/u/1282252?v=4","gravatar_id":"","url":"https://api.github.com/users/intelligentspark","html_url":"https://github.com/intelligentspark","followers_url":"https://api.github.com/users/intelligentspark/followers","following_url":"https://api.github.com/users/intelligentspark/following{/other_user}","gists_url":"https://api.github.com/users/intelligentspark/gists{/gist_id}","starred_url":"https://api.github.com/users/intelligentspark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/intelligentspark/subscriptions","organizations_url":"https://api.github.com/users/intelligentspark/orgs","repos_url":"https://api.github.com/users/intelligentspark/repos","events_url":"https://api.github.com/users/intelligentspark/events{/privacy}","received_events_url":"https://api.github.com/users/intelligentspark/received_events","type":"User","site_admin":false},"created_at":"2015-08-05T14:31:40Z","updated_at":"2015-08-05T14:37:12Z","author_association":"NONE","body":"Ok, why is that\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/128018006","html_url":"https://github.com/elastic/elasticsearch/issues/12591#issuecomment-128018006","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12591","id":128018006,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODAxODAwNg==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-08-05T14:34:35Z","updated_at":"2015-08-05T14:34:35Z","author_association":"MEMBER","body":"@fbliss Read the end of https://www.elastic.co/guide/en/elasticsearch/guide/current/lat-lon-formats.html :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/128021308","html_url":"https://github.com/elastic/elasticsearch/issues/12591#issuecomment-128021308","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12591","id":128021308,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODAyMTMwOA==","user":{"login":"intelligentspark","id":1282252,"node_id":"MDQ6VXNlcjEyODIyNTI=","avatar_url":"https://avatars1.githubusercontent.com/u/1282252?v=4","gravatar_id":"","url":"https://api.github.com/users/intelligentspark","html_url":"https://github.com/intelligentspark","followers_url":"https://api.github.com/users/intelligentspark/followers","following_url":"https://api.github.com/users/intelligentspark/following{/other_user}","gists_url":"https://api.github.com/users/intelligentspark/gists{/gist_id}","starred_url":"https://api.github.com/users/intelligentspark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/intelligentspark/subscriptions","organizations_url":"https://api.github.com/users/intelligentspark/orgs","repos_url":"https://api.github.com/users/intelligentspark/repos","events_url":"https://api.github.com/users/intelligentspark/events{/privacy}","received_events_url":"https://api.github.com/users/intelligentspark/received_events","type":"User","site_admin":false},"created_at":"2015-08-05T14:43:06Z","updated_at":"2015-08-05T14:56:30Z","author_association":"NONE","body":"I still am getting incorrect results, namely, results that go to the other extreme like 8,000 miles to San Francisco.  I should note that my mapping has set the geo_point setting lat_lon to TRUE, so that is indicated in the docu as being a way to tell it to reverse the order in which you're storing the data. [see here](https://www.elastic.co/guide/en/elasticsearch/reference/1.6/mapping-geo-point-type.html)\n\n'''\nPUT test\n{\n  \"mappings\": {\n    \"test\": {\n      \"properties\": {\n        \"location\": {\n          \"type\": \"geo_point\",\n          \"lat_lon\": true\n        }\n      }\n    }\n  }\n}\n'''\n\nwhen i index my documents accordingly, I'm getting bad results.  I just rebuilt the index without the lat_lon = true setting and guess what?  all distances are accurate.  I think there is a problem using lat_lon = true in geo_point mappings.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/128086231","html_url":"https://github.com/elastic/elasticsearch/issues/12591#issuecomment-128086231","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12591","id":128086231,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODA4NjIzMQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-08-05T17:38:16Z","updated_at":"2015-08-05T17:38:16Z","author_association":"CONTRIBUTOR","body":">  I should note that my mapping has set the geo_point setting lat_lon to TRUE, so that is indicated in the docu as being a way to tell it to reverse the order in which you're storing the data.\n\nNo, you've completely misunderstood the `lat_lon` option :)\n\nNormally the latitude and longitude values are not indexed, and distance calculations are done in memory.  By setting `lat_lon` to true, you are saying \"also add the lat and lon values to the inverted index\" as sometimes that can perform better.  Nothing to do with order.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/128089748","html_url":"https://github.com/elastic/elasticsearch/issues/12591#issuecomment-128089748","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12591","id":128089748,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODA4OTc0OA==","user":{"login":"intelligentspark","id":1282252,"node_id":"MDQ6VXNlcjEyODIyNTI=","avatar_url":"https://avatars1.githubusercontent.com/u/1282252?v=4","gravatar_id":"","url":"https://api.github.com/users/intelligentspark","html_url":"https://github.com/intelligentspark","followers_url":"https://api.github.com/users/intelligentspark/followers","following_url":"https://api.github.com/users/intelligentspark/following{/other_user}","gists_url":"https://api.github.com/users/intelligentspark/gists{/gist_id}","starred_url":"https://api.github.com/users/intelligentspark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/intelligentspark/subscriptions","organizations_url":"https://api.github.com/users/intelligentspark/orgs","repos_url":"https://api.github.com/users/intelligentspark/repos","events_url":"https://api.github.com/users/intelligentspark/events{/privacy}","received_events_url":"https://api.github.com/users/intelligentspark/received_events","type":"User","site_admin":false},"created_at":"2015-08-05T17:49:42Z","updated_at":"2015-08-05T17:49:42Z","author_association":"NONE","body":"Thanks for clearing that up.  I did get it working.\n","performed_via_github_app":null}]