[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215308156","html_url":"https://github.com/elastic/elasticsearch/issues/18022#issuecomment-215308156","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18022","id":215308156,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTMwODE1Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T04:37:42Z","updated_at":"2016-04-28T04:37:42Z","author_association":"MEMBER","body":"The problem is your max file descriptors are too low. There's even a warning in your logs:\n\n> `[2016-04-27 19:08:27,576][WARN ][env                      ] [Box IV] max file descriptors [4096] for elasticsearch process likely too low, consider increasing to at least [65536]`\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215355899","html_url":"https://github.com/elastic/elasticsearch/issues/18022#issuecomment-215355899","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18022","id":215355899,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTM1NTg5OQ==","user":{"login":"fauria","id":742022,"node_id":"MDQ6VXNlcjc0MjAyMg==","avatar_url":"https://avatars0.githubusercontent.com/u/742022?v=4","gravatar_id":"","url":"https://api.github.com/users/fauria","html_url":"https://github.com/fauria","followers_url":"https://api.github.com/users/fauria/followers","following_url":"https://api.github.com/users/fauria/following{/other_user}","gists_url":"https://api.github.com/users/fauria/gists{/gist_id}","starred_url":"https://api.github.com/users/fauria/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fauria/subscriptions","organizations_url":"https://api.github.com/users/fauria/orgs","repos_url":"https://api.github.com/users/fauria/repos","events_url":"https://api.github.com/users/fauria/events{/privacy}","received_events_url":"https://api.github.com/users/fauria/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T08:50:16Z","updated_at":"2016-04-28T08:50:16Z","author_association":"NONE","body":"Im running elasticsearch from the official docker image: https://hub.docker.com/_/elasticsearch/\n\nOn my host environment, both hard and soft limits are greater than 65536:\n\n`ulimit -Hn && ulimit -Sn`\n\n```\n98304\n98304\n```\n\nHowever inside the container:\n\n`docker run -i -t --rm elasticsearch bash`\n`ulimit -Hn && ulimit -Sn`\n\n```\n4096\n1024\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215376876","html_url":"https://github.com/elastic/elasticsearch/issues/18022#issuecomment-215376876","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18022","id":215376876,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTM3Njg3Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T10:11:27Z","updated_at":"2016-04-28T10:11:27Z","author_association":"MEMBER","body":"There is not an official Docker image that is affiliated with Elastic. To be clear, the \"official\" Docker image on Docker Hub is not affiliated with Elastic.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215413560","html_url":"https://github.com/elastic/elasticsearch/issues/18022#issuecomment-215413560","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18022","id":215413560,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTQxMzU2MA==","user":{"login":"fauria","id":742022,"node_id":"MDQ6VXNlcjc0MjAyMg==","avatar_url":"https://avatars0.githubusercontent.com/u/742022?v=4","gravatar_id":"","url":"https://api.github.com/users/fauria","html_url":"https://github.com/fauria","followers_url":"https://api.github.com/users/fauria/followers","following_url":"https://api.github.com/users/fauria/following{/other_user}","gists_url":"https://api.github.com/users/fauria/gists{/gist_id}","starred_url":"https://api.github.com/users/fauria/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fauria/subscriptions","organizations_url":"https://api.github.com/users/fauria/orgs","repos_url":"https://api.github.com/users/fauria/repos","events_url":"https://api.github.com/users/fauria/events{/privacy}","received_events_url":"https://api.github.com/users/fauria/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T12:51:51Z","updated_at":"2016-04-28T12:51:51Z","author_association":"NONE","body":"I would never have thought that... Already submitted to https://github.com/docker-library/elasticsearch/issues/102 thank you!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215652455","html_url":"https://github.com/elastic/elasticsearch/issues/18022#issuecomment-215652455","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18022","id":215652455,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTY1MjQ1NQ==","user":{"login":"fauria","id":742022,"node_id":"MDQ6VXNlcjc0MjAyMg==","avatar_url":"https://avatars0.githubusercontent.com/u/742022?v=4","gravatar_id":"","url":"https://api.github.com/users/fauria","html_url":"https://github.com/fauria","followers_url":"https://api.github.com/users/fauria/followers","following_url":"https://api.github.com/users/fauria/following{/other_user}","gists_url":"https://api.github.com/users/fauria/gists{/gist_id}","starred_url":"https://api.github.com/users/fauria/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fauria/subscriptions","organizations_url":"https://api.github.com/users/fauria/orgs","repos_url":"https://api.github.com/users/fauria/repos","events_url":"https://api.github.com/users/fauria/events{/privacy}","received_events_url":"https://api.github.com/users/fauria/received_events","type":"User","site_admin":false},"created_at":"2016-04-29T07:55:54Z","updated_at":"2016-04-29T07:55:54Z","author_association":"NONE","body":"Fixed!\n\nIf anyone has the same problem, try running the container with `--ulimit nofile=98304:98304`command line option, i.e.:\n\n`docker run -d --ulimit nofile=98304:98304 --name elasticsearch ...`\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/341144702","html_url":"https://github.com/elastic/elasticsearch/issues/18022#issuecomment-341144702","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18022","id":341144702,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MTE0NDcwMg==","user":{"login":"hcm007","id":19849177,"node_id":"MDQ6VXNlcjE5ODQ5MTc3","avatar_url":"https://avatars1.githubusercontent.com/u/19849177?v=4","gravatar_id":"","url":"https://api.github.com/users/hcm007","html_url":"https://github.com/hcm007","followers_url":"https://api.github.com/users/hcm007/followers","following_url":"https://api.github.com/users/hcm007/following{/other_user}","gists_url":"https://api.github.com/users/hcm007/gists{/gist_id}","starred_url":"https://api.github.com/users/hcm007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcm007/subscriptions","organizations_url":"https://api.github.com/users/hcm007/orgs","repos_url":"https://api.github.com/users/hcm007/repos","events_url":"https://api.github.com/users/hcm007/events{/privacy}","received_events_url":"https://api.github.com/users/hcm007/received_events","type":"User","site_admin":false},"created_at":"2017-11-01T15:41:15Z","updated_at":"2017-11-01T15:41:15Z","author_association":"NONE","body":"there is still same problem, when I use docker stack deploy -c in swarm @fauria ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/650487481","html_url":"https://github.com/elastic/elasticsearch/issues/18022#issuecomment-650487481","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18022","id":650487481,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDQ4NzQ4MQ==","user":{"login":"chovy","id":27381,"node_id":"MDQ6VXNlcjI3Mzgx","avatar_url":"https://avatars1.githubusercontent.com/u/27381?v=4","gravatar_id":"","url":"https://api.github.com/users/chovy","html_url":"https://github.com/chovy","followers_url":"https://api.github.com/users/chovy/followers","following_url":"https://api.github.com/users/chovy/following{/other_user}","gists_url":"https://api.github.com/users/chovy/gists{/gist_id}","starred_url":"https://api.github.com/users/chovy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chovy/subscriptions","organizations_url":"https://api.github.com/users/chovy/orgs","repos_url":"https://api.github.com/users/chovy/repos","events_url":"https://api.github.com/users/chovy/events{/privacy}","received_events_url":"https://api.github.com/users/chovy/received_events","type":"User","site_admin":false},"created_at":"2020-06-27T04:16:18Z","updated_at":"2020-06-27T04:16:18Z","author_association":"NONE","body":"how do i do this with docker-compose?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/690094476","html_url":"https://github.com/elastic/elasticsearch/issues/18022#issuecomment-690094476","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18022","id":690094476,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDA5NDQ3Ng==","user":{"login":"eugenweissbart","id":2291757,"node_id":"MDQ6VXNlcjIyOTE3NTc=","avatar_url":"https://avatars3.githubusercontent.com/u/2291757?v=4","gravatar_id":"","url":"https://api.github.com/users/eugenweissbart","html_url":"https://github.com/eugenweissbart","followers_url":"https://api.github.com/users/eugenweissbart/followers","following_url":"https://api.github.com/users/eugenweissbart/following{/other_user}","gists_url":"https://api.github.com/users/eugenweissbart/gists{/gist_id}","starred_url":"https://api.github.com/users/eugenweissbart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eugenweissbart/subscriptions","organizations_url":"https://api.github.com/users/eugenweissbart/orgs","repos_url":"https://api.github.com/users/eugenweissbart/repos","events_url":"https://api.github.com/users/eugenweissbart/events{/privacy}","received_events_url":"https://api.github.com/users/eugenweissbart/received_events","type":"User","site_admin":false},"created_at":"2020-09-10T08:57:12Z","updated_at":"2020-09-10T08:57:12Z","author_association":"NONE","body":"Hi @chovy, I know it's probably too late, but the [official docs](https://docs.docker.com/compose/compose-file/#ulimits) on docker-compose files say it's pretty straightforward:\r\n```\r\nulimits:\r\n  nofile:\r\n    soft: 98304\r\n    hard: 98304\r\n```\r\nThis should be done in your desired service's section.","performed_via_github_app":null}]