[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85229776","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-85229776","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":85229776,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MjI5Nzc2","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-03-23T22:21:28Z","updated_at":"2015-03-23T22:21:28Z","author_association":"MEMBER","body":"@dennisgorelik Sorry for replying so late. The percolator uses a special in-memory index and this index doesn't support doc values. The doc values workaround I shared in #6806 is incorrect. \n\nIn theory doc values support could be added to this in-memory index. What is the reason behind using doc values in the percolator? The performance should be better since #7081 got in.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85249345","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-85249345","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":85249345,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MjQ5MzQ1","user":{"login":"dennisgorelik","id":4333866,"node_id":"MDQ6VXNlcjQzMzM4NjY=","avatar_url":"https://avatars2.githubusercontent.com/u/4333866?v=4","gravatar_id":"","url":"https://api.github.com/users/dennisgorelik","html_url":"https://github.com/dennisgorelik","followers_url":"https://api.github.com/users/dennisgorelik/followers","following_url":"https://api.github.com/users/dennisgorelik/following{/other_user}","gists_url":"https://api.github.com/users/dennisgorelik/gists{/gist_id}","starred_url":"https://api.github.com/users/dennisgorelik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dennisgorelik/subscriptions","organizations_url":"https://api.github.com/users/dennisgorelik/orgs","repos_url":"https://api.github.com/users/dennisgorelik/repos","events_url":"https://api.github.com/users/dennisgorelik/events{/privacy}","received_events_url":"https://api.github.com/users/dennisgorelik/received_events","type":"User","site_admin":false},"created_at":"2015-03-23T23:48:59Z","updated_at":"2015-03-23T23:48:59Z","author_association":"NONE","body":"@martijnvg \nThe only reason why we even tried doc values was your recommendation (that now you are saying is incorrect).\n\n>  The performance should be better since #7081 got in.\n\nYes, percolator's performance improved ~33% when we migrated from ElasticSearch 1.2.2 to\nElasticSearch 1.4.3.\n\nWe are still looking for further performance improvements and improving stability of ElasticSearch percolator under high load.\nCurrently to much stress (multiple queues) for long time causes ElasticSearch to stop producing results entirely.\nI guess the solution is adding multiple ElasticSearch nodes.\n\nhttp://stackoverflow.com/questions/28864184/how-to-improve-percolator-performance-in-elasticsearch\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85355837","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-85355837","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":85355837,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzU1ODM3","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-03-24T06:05:45Z","updated_at":"2015-03-24T06:05:45Z","author_association":"MEMBER","body":"@dennisgorelik The percolator is CPU intensive and adding more nodes will help to distribute the percolator load better. How much queries do you have stored and how many percolate requests are you executing concurrently?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85372148","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-85372148","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":85372148,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzcyMTQ4","user":{"login":"dennisgorelik","id":4333866,"node_id":"MDQ6VXNlcjQzMzM4NjY=","avatar_url":"https://avatars2.githubusercontent.com/u/4333866?v=4","gravatar_id":"","url":"https://api.github.com/users/dennisgorelik","html_url":"https://github.com/dennisgorelik","followers_url":"https://api.github.com/users/dennisgorelik/followers","following_url":"https://api.github.com/users/dennisgorelik/following{/other_user}","gists_url":"https://api.github.com/users/dennisgorelik/gists{/gist_id}","starred_url":"https://api.github.com/users/dennisgorelik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dennisgorelik/subscriptions","organizations_url":"https://api.github.com/users/dennisgorelik/orgs","repos_url":"https://api.github.com/users/dennisgorelik/repos","events_url":"https://api.github.com/users/dennisgorelik/events{/privacy}","received_events_url":"https://api.github.com/users/dennisgorelik/received_events","type":"User","site_admin":false},"created_at":"2015-03-24T07:12:38Z","updated_at":"2015-03-24T07:20:01Z","author_association":"NONE","body":"We have about 160,000 queries stored.\nWe created 2 shards on our JobIndex that we run percolator against.\nWe have up to 4 concurrent percolate requests.\nIn addition to that there could be other ElasticSearch queries (e.g. searches that are coming from our web server + some other batch searches).\nAll that runs on \"Dual Processor Octo Core Xeon 2650 - 2GHz+HT\" - that's 32 threads CPU.\nWe have single node ElasticSearch.\nWe use:\nES_HEAP_SIZE=6g\nTotally ElasticSearch consumes up to 12GB on our server.\n\nOccasionally (about once every few days) we are getting ElasticSearch entering into \"stupor\" mode where ElasticSearch consumes all available CPU (e.g. 90%) with the following errors in the logs:\n\n```\n[2015-03-24 00:08:01,508][WARN ][monitor.jvm              ] [Cancer] [gc][old][416159][31731] duration [34s], collections [1]/[34.5s], total [34s]/[5.6h], memory [5.7gb]->[4.1gb]/[5.8gb], all_pools {[young] [1.4gb]->[11.4mb]/[1.4gb]}{[survivor] [153.4mb]->[0b]/[191.3mb]}{[old] [4.1gb]->[4.1gb]/[4.1gb]}\n```\n\nElasticSearch reboot helps.\n\nAny suggestions about how can we prevent such ElasticSearch stupor?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85457197","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-85457197","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":85457197,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDU3MTk3","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-03-24T11:29:51Z","updated_at":"2015-03-24T11:29:51Z","author_association":"MEMBER","body":"There can be many reasons why you're running low on heapspace and long gc. It doesn't have to be percolator related. Can you check the node stats api and check if something else is using up the heapspace?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85830780","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-85830780","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":85830780,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODMwNzgw","user":{"login":"dennisgorelik","id":4333866,"node_id":"MDQ6VXNlcjQzMzM4NjY=","avatar_url":"https://avatars2.githubusercontent.com/u/4333866?v=4","gravatar_id":"","url":"https://api.github.com/users/dennisgorelik","html_url":"https://github.com/dennisgorelik","followers_url":"https://api.github.com/users/dennisgorelik/followers","following_url":"https://api.github.com/users/dennisgorelik/following{/other_user}","gists_url":"https://api.github.com/users/dennisgorelik/gists{/gist_id}","starred_url":"https://api.github.com/users/dennisgorelik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dennisgorelik/subscriptions","organizations_url":"https://api.github.com/users/dennisgorelik/orgs","repos_url":"https://api.github.com/users/dennisgorelik/repos","events_url":"https://api.github.com/users/dennisgorelik/events{/privacy}","received_events_url":"https://api.github.com/users/dennisgorelik/received_events","type":"User","site_admin":false},"created_at":"2015-03-25T04:49:24Z","updated_at":"2015-03-25T04:49:24Z","author_association":"NONE","body":"@martijnvg\nWhat kind of node stats are you asking me for?\nDo you need information like that?\n\nSomething like that?\n\n```\ncurl -X GET \"http://elasticsearchserver:9200/_nodes/stats/jvm?pretty=true\"\n```\n\n```\n{\n  \"cluster_name\" : \"elasticsearch\",\n  \"nodes\" : {\n      .....\n      \"jvm\" : {\n        \"timestamp\" : 1427258626635,\n        \"uptime_in_millis\" : 55962324,\n        \"mem\" : {\n          \"heap_used_in_bytes\" : 3744527576,\n          \"heap_used_percent\" : 59,\n          \"heap_committed_in_bytes\" : 6241845248,\n          \"heap_max_in_bytes\" : 6241845248,\n          \"non_heap_used_in_bytes\" : 1371365808,\n          \"non_heap_committed_in_bytes\" : 1805742080,\n          \"pools\" : {\n            \"young\" : {\n              \"used_in_bytes\" : 119134544,\n              \"max_in_bytes\" : 1605304320,\n              \"peak_used_in_bytes\" : 1605304320,\n              \"peak_max_in_bytes\" : 1605304320\n            },\n            \"survivor\" : {\n              \"used_in_bytes\" : 637400,\n              \"max_in_bytes\" : 200605696,\n              \"peak_used_in_bytes\" : 200605696,\n              \"peak_max_in_bytes\" : 200605696\n            },\n            \"old\" : {\n              \"used_in_bytes\" : 3624755632,\n              \"max_in_bytes\" : 4435935232,\n              \"peak_used_in_bytes\" : 3721644784,\n              \"peak_max_in_bytes\" : 4435935232\n            }\n          }\n        },\n        \"threads\" : {\n          \"count\" : 449,\n          \"peak_count\" : 451\n        },\n        \"gc\" : {\n          \"collectors\" : {\n            \"young\" : {\n              \"collection_count\" : 51319,\n              \"collection_time_in_millis\" : 1035200\n            },\n            \"old\" : {\n              \"collection_count\" : 966,\n              \"collection_time_in_millis\" : 896951\n            }\n          }\n        },\n        \"buffer_pools\" : {\n          \"direct\" : {\n            \"count\" : 585,\n            \"used_in_bytes\" : 53303365,\n            \"total_capacity_in_bytes\" : 53303365\n          },\n          \"mapped\" : {\n            \"count\" : 669,\n            \"used_in_bytes\" : 9273195645,\n            \"total_capacity_in_bytes\" : 9273195645\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nThis is node stats api during normal (healthy) operations.\nWould I need to collect the same information when my ElasticSearch node experience problems?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85860536","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-85860536","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":85860536,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODYwNTM2","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-03-25T05:59:20Z","updated_at":"2015-03-25T05:59:20Z","author_association":"MEMBER","body":"@dennisgorelik  Yes, the node stats api, but preferable all the information and when you're seeing the jvm gc warnings. The following request should include all information and show sizes in a human readable way:\n\n```\ncurl -XGET \"http://elasticsearchserver:9200/_nodes/stats?pretty=true&all&human\"\n```\n\nWhat also can be helpful when jvm problems occur is a jvm heapdump, but you can share that with me privately.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85899049","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-85899049","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":85899049,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODk5MDQ5","user":{"login":"dennisgorelik","id":4333866,"node_id":"MDQ6VXNlcjQzMzM4NjY=","avatar_url":"https://avatars2.githubusercontent.com/u/4333866?v=4","gravatar_id":"","url":"https://api.github.com/users/dennisgorelik","html_url":"https://github.com/dennisgorelik","followers_url":"https://api.github.com/users/dennisgorelik/followers","following_url":"https://api.github.com/users/dennisgorelik/following{/other_user}","gists_url":"https://api.github.com/users/dennisgorelik/gists{/gist_id}","starred_url":"https://api.github.com/users/dennisgorelik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dennisgorelik/subscriptions","organizations_url":"https://api.github.com/users/dennisgorelik/orgs","repos_url":"https://api.github.com/users/dennisgorelik/repos","events_url":"https://api.github.com/users/dennisgorelik/events{/privacy}","received_events_url":"https://api.github.com/users/dennisgorelik/received_events","type":"User","site_admin":false},"created_at":"2015-03-25T07:36:42Z","updated_at":"2015-03-25T07:36:42Z","author_association":"NONE","body":"@martijnvg\n1) When our ElasticSearch server hangs again - we'll send you full node stats api response (based on your command).\n2) How do I produce jvm heapdump for ElasticSearch in Windows?\nI tried:\n\n```\njmap -dump:live,format=b,file=heap.bin 2400\n```\n\nand got:\n\n```\n2400: Access is denied\n```\n\n2400 is PID of elasticsearch-service-x64.exe on our server.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87937589","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-87937589","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":87937589,"node_id":"MDEyOklzc3VlQ29tbWVudDg3OTM3NTg5","user":{"login":"dennisgorelik","id":4333866,"node_id":"MDQ6VXNlcjQzMzM4NjY=","avatar_url":"https://avatars2.githubusercontent.com/u/4333866?v=4","gravatar_id":"","url":"https://api.github.com/users/dennisgorelik","html_url":"https://github.com/dennisgorelik","followers_url":"https://api.github.com/users/dennisgorelik/followers","following_url":"https://api.github.com/users/dennisgorelik/following{/other_user}","gists_url":"https://api.github.com/users/dennisgorelik/gists{/gist_id}","starred_url":"https://api.github.com/users/dennisgorelik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dennisgorelik/subscriptions","organizations_url":"https://api.github.com/users/dennisgorelik/orgs","repos_url":"https://api.github.com/users/dennisgorelik/repos","events_url":"https://api.github.com/users/dennisgorelik/events{/privacy}","received_events_url":"https://api.github.com/users/dennisgorelik/received_events","type":"User","site_admin":false},"created_at":"2015-03-31T04:47:03Z","updated_at":"2015-03-31T04:47:03Z","author_association":"NONE","body":"@martijnvg\nWe got our ElasticSearch server entering half-dead state again.\nBasic search queries were taking ~15s (instead of usual 0 to 30 ms).\nPercolation timed out.\nRemoving almost all load from ElasticSearch server for several minutes did NOT help.\nOnly ElasticSearch reboot helped to recover.\n\nPrior to entering half-dead state ElasticSearch was running percolation non-stop for ~6 hours.\n\nSee full node stats api result for our ElasticSearch in half-dead state:\n\n```\n{\n  \"cluster_name\" : \"elasticsearch\",\n  \"nodes\" : {\n    \"gzJr6VoQSGK7mTr7MjfYGQ\" : {\n      \"timestamp\" : 1427771500284,\n.....\n      \"indices\" : {\n        \"docs\" : {\n          \"count\" : 2397045,\n          \"deleted\" : 400923\n        },\n        \"store\" : {\n          \"size\" : \"8.9gb\",\n          \"size_in_bytes\" : 9651063464,\n          \"throttle_time\" : \"1.2m\",\n          \"throttle_time_in_millis\" : 73703\n        },\n        \"indexing\" : {\n          \"index_total\" : 792427,\n          \"index_time\" : \"39.5m\",\n          \"index_time_in_millis\" : 2371584,\n          \"index_current\" : 0,\n          \"delete_total\" : 1917090,\n          \"delete_time\" : \"2.2m\",\n          \"delete_time_in_millis\" : 135614,\n          \"delete_current\" : 0,\n          \"noop_update_total\" : 0,\n          \"is_throttled\" : false,\n          \"throttle_time\" : \"0s\",\n          \"throttle_time_in_millis\" : 0\n        },\n        \"get\" : {\n          \"total\" : 4777,\n          \"get_time\" : \"4.1s\",\n          \"time_in_millis\" : 4192,\n          \"exists_total\" : 4777,\n          \"exists_time\" : \"4.1s\",\n          \"exists_time_in_millis\" : 4192,\n          \"missing_total\" : 0,\n          \"missing_time\" : \"0s\",\n          \"missing_time_in_millis\" : 0,\n          \"current\" : 0\n        },\n        \"search\" : {\n          \"open_contexts\" : 18,\n          \"query_total\" : 9285622,\n          \"query_time\" : \"2.9d\",\n          \"query_time_in_millis\" : 253663579,\n          \"query_current\" : 8,\n          \"fetch_total\" : 8472373,\n          \"fetch_time\" : \"5.6h\",\n          \"fetch_time_in_millis\" : 20164442,\n          \"fetch_current\" : 0\n        },\n        \"merges\" : {\n          \"current\" : 0,\n          \"current_docs\" : 0,\n          \"current_size\" : \"0b\",\n          \"current_size_in_bytes\" : 0,\n          \"total\" : 4148,\n          \"total_time\" : \"39.2m\",\n          \"total_time_in_millis\" : 2353027,\n          \"total_docs\" : 22699407,\n          \"total_size\" : \"15.2gb\",\n          \"total_size_in_bytes\" : 16400873095\n        },\n        \"refresh\" : {\n          \"total\" : 44893,\n          \"total_time\" : \"22.2m\",\n          \"total_time_in_millis\" : 1332971\n        },\n        \"flush\" : {\n          \"total\" : 3138,\n          \"total_time\" : \"2.2m\",\n          \"total_time_in_millis\" : 137586\n        },\n        \"warmer\" : {\n          \"current\" : 0,\n          \"total\" : 87566,\n          \"total_time\" : \"10s\",\n          \"total_time_in_millis\" : 10033\n        },\n        \"filter_cache\" : {\n          \"memory_size\" : \"33.4mb\",\n          \"memory_size_in_bytes\" : 35027716,\n          \"evictions\" : 20064952\n        },\n        \"id_cache\" : {\n          \"memory_size\" : \"0b\",\n          \"memory_size_in_bytes\" : 0\n        },\n        \"fielddata\" : {\n          \"memory_size\" : \"33.9mb\",\n          \"memory_size_in_bytes\" : 35613020,\n          \"evictions\" : 0\n        },\n        \"percolate\" : {\n          \"total\" : 1577725,\n          \"get_time\" : \"20.4d\",\n          \"time_in_millis\" : 1769513471,\n          \"current\" : 27,\n          \"memory_size_in_bytes\" : -1,\n          \"memory_size\" : \"-1b\",\n          \"queries\" : 366200\n        },\n        \"completion\" : {\n          \"size\" : \"0b\",\n          \"size_in_bytes\" : 0\n        },\n        \"segments\" : {\n          \"count\" : 186,\n          \"memory\" : \"20.4mb\",\n          \"memory_in_bytes\" : 21488188,\n          \"index_writer_memory\" : \"1.7mb\",\n          \"index_writer_memory_in_bytes\" : 1863332,\n          \"index_writer_max_memory\" : \"595.2mb\",\n          \"index_writer_max_memory_in_bytes\" : 624184520,\n          \"version_map_memory\" : \"24.8kb\",\n          \"version_map_memory_in_bytes\" : 25396,\n          \"fixed_bit_set\" : \"0b\",\n          \"fixed_bit_set_memory_in_bytes\" : 0\n        },\n        \"translog\" : {\n          \"operations\" : 3439,\n          \"size\" : \"20.6kb\",\n          \"size_in_bytes\" : 21152\n        },\n        \"suggest\" : {\n          \"total\" : 0,\n          \"time\" : \"0s\",\n          \"time_in_millis\" : 0,\n          \"current\" : 0\n        },\n        \"query_cache\" : {\n          \"memory_size\" : \"0b\",\n          \"memory_size_in_bytes\" : 0,\n          \"evictions\" : 0,\n          \"hit_count\" : 0,\n          \"miss_count\" : 0\n        }\n      },\n      \"os\" : {\n        \"timestamp\" : 1427771501003,\n        \"uptime\" : \"9.4m\",\n        \"uptime_in_millis\" : 568846,\n        \"cpu\" : {\n          \"sys\" : 0,\n          \"user\" : 22,\n          \"idle\" : 77,\n          \"usage\" : 22,\n          \"stolen\" : 0\n        },\n        \"mem\" : {\n          \"free\" : \"909.6mb\",\n          \"free_in_bytes\" : 953839616,\n          \"used\" : \"31gb\",\n          \"used_in_bytes\" : 33370476544,\n          \"free_percent\" : 3,\n          \"used_percent\" : 96,\n          \"actual_free\" : \"1002.3mb\",\n          \"actual_free_in_bytes\" : 1051021312,\n          \"actual_used\" : \"30.9gb\",\n          \"actual_used_in_bytes\" : 33273294848\n        },\n        \"swap\" : {\n          \"used\" : \"30.5gb\",\n          \"used_in_bytes\" : 32848777216,\n          \"free\" : \"16.4gb\",\n          \"free_in_bytes\" : 17689870336\n        }\n      },\n      \"process\" : {\n        \"timestamp\" : 1427771501018,\n        \"open_file_descriptors\" : 5960,\n        \"cpu\" : {\n          \"percent\" : 0,\n          \"sys\" : \"5.2m\",\n          \"sys_in_millis\" : 312838,\n          \"user\" : \"7.3s\",\n          \"user_in_millis\" : 7335,\n          \"total\" : \"5.3m\",\n          \"total_in_millis\" : 320173\n        },\n        \"mem\" : {\n          \"resident\" : \"2.1gb\",\n          \"resident_in_bytes\" : 2335469568,\n          \"share\" : \"-1b\",\n          \"share_in_bytes\" : -1,\n          \"total_virtual\" : \"1.8gb\",\n          \"total_virtual_in_bytes\" : 1965916160\n        }\n      },\n      \"jvm\" : {\n        \"timestamp\" : 1427771501018,\n        \"uptime\" : \"6.5d\",\n        \"uptime_in_millis\" : 568852806,\n        \"mem\" : {\n          \"heap_used\" : \"5.6gb\",\n          \"heap_used_in_bytes\" : 6104360960,\n          \"heap_used_percent\" : 97,\n          \"heap_committed\" : \"5.8gb\",\n          \"heap_committed_in_bytes\" : 6241845248,\n          \"heap_max\" : \"5.8gb\",\n          \"heap_max_in_bytes\" : 6241845248,\n          \"non_heap_used\" : \"568.1mb\",\n          \"non_heap_used_in_bytes\" : 595737264,\n          \"non_heap_committed\" : \"1.1gb\",\n          \"non_heap_committed_in_bytes\" : 1272410112,\n          \"pools\" : {\n            \"young\" : {\n              \"used\" : \"1.4gb\",\n              \"used_in_bytes\" : 1605304320,\n              \"max\" : \"1.4gb\",\n              \"max_in_bytes\" : 1605304320,\n              \"peak_used\" : \"1.4gb\",\n              \"peak_used_in_bytes\" : 1605304320,\n              \"peak_max\" : \"1.4gb\",\n              \"peak_max_in_bytes\" : 1605304320\n            },\n            \"survivor\" : {\n              \"used\" : \"60.2mb\",\n              \"used_in_bytes\" : 63160368,\n              \"max\" : \"191.3mb\",\n              \"max_in_bytes\" : 200605696,\n              \"peak_used\" : \"191.3mb\",\n              \"peak_used_in_bytes\" : 200605696,\n              \"peak_max\" : \"191.3mb\",\n              \"peak_max_in_bytes\" : 200605696\n            },\n            \"old\" : {\n              \"used\" : \"4.1gb\",\n              \"used_in_bytes\" : 4435934656,\n              \"max\" : \"4.1gb\",\n              \"max_in_bytes\" : 4435935232,\n              \"peak_used\" : \"4.1gb\",\n              \"peak_used_in_bytes\" : 4435935232,\n              \"peak_max\" : \"4.1gb\",\n              \"peak_max_in_bytes\" : 4435935232\n            }\n          }\n        },\n        \"threads\" : {\n          \"count\" : 471,\n          \"peak_count\" : 474\n        },\n        \"gc\" : {\n          \"collectors\" : {\n            \"young\" : {\n              \"collection_count\" : 556417,\n              \"collection_time\" : \"2.1h\",\n              \"collection_time_in_millis\" : 7611784\n            },\n            \"old\" : {\n              \"collection_count\" : 34576,\n              \"collection_time\" : \"5.5h\",\n              \"collection_time_in_millis\" : 20125610\n            }\n          }\n        },\n        \"buffer_pools\" : {\n          \"direct\" : {\n            \"count\" : 1127,\n            \"used\" : \"61.9mb\",\n            \"used_in_bytes\" : 64991049,\n            \"total_capacity\" : \"61.9mb\",\n            \"total_capacity_in_bytes\" : 64991049\n          },\n          \"mapped\" : {\n            \"count\" : 766,\n            \"used\" : \"8.9gb\",\n            \"used_in_bytes\" : 9608816056,\n            \"total_capacity\" : \"8.9gb\",\n            \"total_capacity_in_bytes\" : 9608816056\n          }\n        }\n      },\n      \"thread_pool\" : {\n        \"percolate\" : {\n          \"threads\" : 32,\n          \"queue\" : 0,\n          \"active\" : 27,\n          \"rejected\" : 0,\n          \"largest\" : 32,\n          \"completed\" : 85311\n        },\n        \"bench\" : {\n          \"threads\" : 0,\n          \"queue\" : 0,\n          \"active\" : 0,\n          \"rejected\" : 0,\n          \"largest\" : 0,\n          \"completed\" : 0\n        },\n        \"listener\" : {\n          \"threads\" : 10,\n          \"queue\" : 0,\n          \"active\" : 0,\n          \"rejected\" : 0,\n          \"largest\" : 10,\n          \"completed\" : 32291\n        },\n        \"index\" : {\n          \"threads\" : 32,\n          \"queue\" : 0,\n          \"active\" : 0,\n          \"rejected\" : 0,\n          \"largest\" : 32,\n          \"completed\" : 84\n        },\n        \"refresh\" : {\n          \"threads\" : 8,\n          \"queue\" : 0,\n          \"active\" : 0,\n          \"rejected\" : 0,\n          \"largest\" : 8,\n          \"completed\" : 44873\n        },\n        \"suggest\" : {\n          \"threads\" : 0,\n          \"queue\" : 0,\n          \"active\" : 0,\n          \"rejected\" : 0,\n          \"largest\" : 0,\n          \"completed\" : 0\n        },\n        \"generic\" : {\n          \"threads\" : 2,\n          \"queue\" : 0,\n          \"active\" : 0,\n          \"rejected\" : 0,\n          \"largest\" : 7,\n          \"completed\" : 69713\n        },\n        \"warmer\" : {\n          \"threads\" : 3,\n          \"queue\" : 0,\n          \"active\" : 0,\n          \"rejected\" : 0,\n          \"largest\" : 4,\n          \"completed\" : 42844\n        },\n        \"search\" : {\n          \"threads\" : 96,\n          \"queue\" : 0,\n          \"active\" : 8,\n          \"rejected\" : 0,\n          \"largest\" : 96,\n          \"completed\" : 20079486\n        },\n        \"flush\" : {\n          \"threads\" : 5,\n          \"queue\" : 0,\n          \"active\" : 0,\n          \"rejected\" : 0,\n          \"largest\" : 5,\n          \"completed\" : 43953\n        },\n        \"optimize\" : {\n          \"threads\" : 0,\n          \"queue\" : 0,\n          \"active\" : 0,\n          \"rejected\" : 0,\n          \"largest\" : 0,\n          \"completed\" : 0\n        },\n        \"management\" : {\n          \"threads\" : 5,\n          \"queue\" : 22,\n          \"active\" : 5,\n          \"rejected\" : 0,\n          \"largest\" : 5,\n          \"completed\" : 344629\n        },\n        \"get\" : {\n          \"threads\" : 32,\n          \"queue\" : 0,\n          \"active\" : 0,\n          \"rejected\" : 0,\n          \"largest\" : 32,\n          \"completed\" : 4778\n        },\n        \"merge\" : {\n          \"threads\" : 5,\n          \"queue\" : 0,\n          \"active\" : 0,\n          \"rejected\" : 0,\n          \"largest\" : 5,\n          \"completed\" : 46789\n        },\n        \"bulk\" : {\n          \"threads\" : 32,\n          \"queue\" : 0,\n          \"active\" : 0,\n          \"rejected\" : 0,\n          \"largest\" : 32,\n          \"completed\" : 42574\n        },\n        \"snapshot\" : {\n          \"threads\" : 0,\n          \"queue\" : 0,\n          \"active\" : 0,\n          \"rejected\" : 0,\n          \"largest\" : 0,\n          \"completed\" : 0\n        }\n      },\n      \"network\" : {\n        \"tcp\" : {\n          \"active_opens\" : 125109,\n          \"passive_opens\" : 1728257,\n          \"curr_estab\" : 706,\n          \"in_segs\" : 911340183,\n          \"out_segs\" : 1034136815,\n          \"retrans_segs\" : 767107,\n          \"estab_resets\" : 429327,\n          \"attempt_fails\" : 128973,\n          \"in_errs\" : 928,\n          \"out_rsts\" : 413521\n        }\n      },\n      \"fs\" : {\n        \"timestamp\" : 1427771501018,\n        \"total\" : {\n          \"total\" : \"744.9gb\",\n          \"total_in_bytes\" : 799925071872,\n          \"free\" : \"510.4gb\",\n          \"free_in_bytes\" : 548089225216,\n          \"available\" : \"510.4gb\",\n          \"available_in_bytes\" : 548089225216,\n          \"disk_reads\" : 50198038,\n          \"disk_writes\" : 131904978,\n          \"disk_io_op\" : 182103016,\n          \"disk_read_size\" : \"1.1gb\",\n          \"disk_read_size_in_bytes\" : 1199022592,\n          \"disk_write_size\" : \"298.8mb\",\n          \"disk_write_size_in_bytes\" : 313397248,\n          \"disk_io_size\" : \"1.4gb\",\n          \"disk_io_size_in_bytes\" : 1512419840,\n          \"disk_queue\" : \"0\"\n        },\n        \"data\" : [ {\n          \"path\" : \"F:\\\\elasticsearch-1.4.3\\\\data\\\\elasticsearch\\\\nodes\\\\0\",\n          \"mount\" : \"F:\\\\\",\n          \"dev\" : \"F:\\\\\",\n          \"total\" : \"744.9gb\",\n          \"total_in_bytes\" : 799925071872,\n          \"free\" : \"510.4gb\",\n          \"free_in_bytes\" : 548089225216,\n          \"available\" : \"510.4gb\",\n          \"available_in_bytes\" : 548089225216,\n          \"disk_reads\" : 50198038,\n          \"disk_writes\" : 131904978,\n          \"disk_io_op\" : 182103016,\n          \"disk_read_size\" : \"1.1gb\",\n          \"disk_read_size_in_bytes\" : 1199022592,\n          \"disk_write_size\" : \"298.8mb\",\n          \"disk_write_size_in_bytes\" : 313397248,\n          \"disk_io_size\" : \"1.4gb\",\n          \"disk_io_size_in_bytes\" : 1512419840,\n          \"disk_queue\" : \"0\"\n        } ]\n      },\n      \"transport\" : {\n        \"server_open\" : 13,\n        \"rx_count\" : 6,\n        \"rx_size\" : \"1.3kb\",\n        \"rx_size_in_bytes\" : 1356,\n        \"tx_count\" : 6,\n        \"tx_size\" : \"1.3kb\",\n        \"tx_size_in_bytes\" : 1356\n      },\n      \"http\" : {\n        \"current_open\" : 38,\n        \"total_opened\" : 5428\n      },\n      \"breakers\" : {\n        \"request\" : {\n          \"limit_size_in_bytes\" : 2496738099,\n          \"limit_size\" : \"2.3gb\",\n          \"estimated_size_in_bytes\" : 32880,\n          \"estimated_size\" : \"32.1kb\",\n          \"overhead\" : 1.0,\n          \"tripped\" : 0\n        },\n        \"fielddata\" : {\n          \"limit_size_in_bytes\" : 3745107148,\n          \"limit_size\" : \"3.4gb\",\n          \"estimated_size_in_bytes\" : 35616584,\n          \"estimated_size\" : \"33.9mb\",\n          \"overhead\" : 1.03,\n          \"tripped\" : 0\n        },\n        \"parent\" : {\n          \"limit_size_in_bytes\" : 4369291673,\n          \"limit_size\" : \"4gb\",\n          \"estimated_size_in_bytes\" : 35649464,\n          \"estimated_size\" : \"33.9mb\",\n          \"overhead\" : 1.0,\n          \"tripped\" : 0\n        }\n      }\n    }\n  }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87955778","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-87955778","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":87955778,"node_id":"MDEyOklzc3VlQ29tbWVudDg3OTU1Nzc4","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-03-31T06:14:28Z","updated_at":"2015-03-31T06:14:28Z","author_association":"MEMBER","body":"@dennisgorelik I see that you in total have `366200` queries stored. That itself may take a big part of of your jvm heap space. What kind of queries are you storing in the percolator? (anything with a wildcard?) I assume that during this 6 hours you also add new percolator queries to ES?\n\nThe percolator parses the queries and keeps the parsed variant of the queries (Lucene queries) in the jvm heapspace. Some queries use more memory than others. But regardless of that a node can only hold a finite amount of queries. So you at some point you need to add another node. Also in your case giving your current node more jvm heap space will also help.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/88329421","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-88329421","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":88329421,"node_id":"MDEyOklzc3VlQ29tbWVudDg4MzI5NDIx","user":{"login":"dennisgorelik","id":4333866,"node_id":"MDQ6VXNlcjQzMzM4NjY=","avatar_url":"https://avatars2.githubusercontent.com/u/4333866?v=4","gravatar_id":"","url":"https://api.github.com/users/dennisgorelik","html_url":"https://github.com/dennisgorelik","followers_url":"https://api.github.com/users/dennisgorelik/followers","following_url":"https://api.github.com/users/dennisgorelik/following{/other_user}","gists_url":"https://api.github.com/users/dennisgorelik/gists{/gist_id}","starred_url":"https://api.github.com/users/dennisgorelik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dennisgorelik/subscriptions","organizations_url":"https://api.github.com/users/dennisgorelik/orgs","repos_url":"https://api.github.com/users/dennisgorelik/repos","events_url":"https://api.github.com/users/dennisgorelik/events{/privacy}","received_events_url":"https://api.github.com/users/dennisgorelik/received_events","type":"User","site_admin":false},"created_at":"2015-04-01T03:15:14Z","updated_at":"2015-04-01T05:25:45Z","author_association":"NONE","body":"@martijnvg\n1) We have 150,909 abandoned job percolators (after we moved job percolators into percolatejobs index that is separate from underlying jobs index).\nWe do not run any queries against these abandoned percolators.\nDo these abandoned percolators still use ElasticSearch memory?\n\n> a node can only hold a finite amount of queries\n\nHow many percolator queries can ElasticSearch node hold?\nOr put it another way: how much memory does typical percolator query (without wildcards) takes from jvm heap?\n\n2) We do not have any wild card queries at all.\nHere is a typical example of percolator queries we have:\n\n```\n \"_source\":{\"query\" : { \"filtered\" : { \"query\" : { \"query_string\" : { \"fields\" : [\"JobTitle\",\"JobDescription\",\"CompanyName\",\"Salary\"], \"query\" : \"\\\"QA.QC\\\" AND MANUFACTURE\", \"analyzer\" : \"pjfqueryanalyzer\" } }, \"filter\" : { \"and\" : [{ \"geo_distance\" : { \"distance\" : \"25mi\", \"Location\" : {\"lat\":40.506772,\"lon\":-74.265423} }}] } } } , \"SystemUpdateDate\": 1406362400409}\n```\n\n3) Yes, during 6 hours of percolation we had some percolator queries being added.\nBut not many. Probably less than 100 new queries.\nOverall ElasticSearch server was running for 6 days since we had to reboot it last time.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/89778353","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-89778353","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":89778353,"node_id":"MDEyOklzc3VlQ29tbWVudDg5Nzc4MzUz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-05T14:19:15Z","updated_at":"2015-04-05T14:19:15Z","author_association":"CONTRIBUTOR","body":"@dennisgorelik I see you have swap enabled.  Do you have mlockall enabled as well?  You can check with:\n\n```\nGET _nodes/process\n```\n\nIf not, then this could be the cause of your slow garbage collections. See http://www.elastic.co/guide/en/elasticsearch/reference/current/setup-configuration.html#setup-configuration-memory for more\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/89908332","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-89908332","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":89908332,"node_id":"MDEyOklzc3VlQ29tbWVudDg5OTA4MzMy","user":{"login":"dennisgorelik","id":4333866,"node_id":"MDQ6VXNlcjQzMzM4NjY=","avatar_url":"https://avatars2.githubusercontent.com/u/4333866?v=4","gravatar_id":"","url":"https://api.github.com/users/dennisgorelik","html_url":"https://github.com/dennisgorelik","followers_url":"https://api.github.com/users/dennisgorelik/followers","following_url":"https://api.github.com/users/dennisgorelik/following{/other_user}","gists_url":"https://api.github.com/users/dennisgorelik/gists{/gist_id}","starred_url":"https://api.github.com/users/dennisgorelik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dennisgorelik/subscriptions","organizations_url":"https://api.github.com/users/dennisgorelik/orgs","repos_url":"https://api.github.com/users/dennisgorelik/repos","events_url":"https://api.github.com/users/dennisgorelik/events{/privacy}","received_events_url":"https://api.github.com/users/dennisgorelik/received_events","type":"User","site_admin":false},"created_at":"2015-04-06T03:50:15Z","updated_at":"2015-04-06T04:06:28Z","author_association":"NONE","body":"@clintongormley\n\nWe are running ElasticSearch on Windows Server 2012.\nUnfortunately the article you suggested only describes how to disable memory swap on Linux.\n\nDo you know how to disable swap for ElasticSearch on Windows?\nThat question left unanswered on StackOverflow for 8 months:\nhttp://stackoverflow.com/questions/25297682/how-to-avoid-elasticsearch-process-being-swapped-on-windows-servers\n\nIn elasticsearch.yml we set:\n\n```\nbootstrap.mlockall: true\n```\n\nHowever under Windows ElasticSearch ignores that setting and has mlockall=false:\n\n```\nGET _nodes/process\n\n{\n   \"cluster_name\": \"elasticsearch\",\n   \"nodes\": {\n      \"XF2RV7JLSvOVpK7QAVPv9Q\": {\n         \"name\": \"Armand Martel\",\n         \"transport_address\": \"inet[/xxx.xxx.xxx.xxx:9300]\",\n         \"host\": \"sv7731\",\n         \"ip\": \"xxx.xxx.xxx.xxx\",\n         \"version\": \"1.4.3\",\n         \"build\": \"36a29a7\",\n         \"http_address\": \"inet[/xxx.xxx.xxx.xxx:9200]\",\n         \"process\": {\n            \"refresh_interval_in_millis\": 1000,\n            \"id\": 24116,\n            \"max_file_descriptors\": -1,\n            \"mlockall\": false\n         }\n      }\n   }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90182019","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-90182019","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":90182019,"node_id":"MDEyOklzc3VlQ29tbWVudDkwMTgyMDE5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-06T18:17:32Z","updated_at":"2015-04-06T18:17:32Z","author_association":"CONTRIBUTOR","body":"@dennisgorelik we're working on it for windows (see https://github.com/elastic/elasticsearch/pull/9186) but you can always disable the page file on windows for now.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90196983","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-90196983","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":90196983,"node_id":"MDEyOklzc3VlQ29tbWVudDkwMTk2OTgz","user":{"login":"dennisgorelik","id":4333866,"node_id":"MDQ6VXNlcjQzMzM4NjY=","avatar_url":"https://avatars2.githubusercontent.com/u/4333866?v=4","gravatar_id":"","url":"https://api.github.com/users/dennisgorelik","html_url":"https://github.com/dennisgorelik","followers_url":"https://api.github.com/users/dennisgorelik/followers","following_url":"https://api.github.com/users/dennisgorelik/following{/other_user}","gists_url":"https://api.github.com/users/dennisgorelik/gists{/gist_id}","starred_url":"https://api.github.com/users/dennisgorelik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dennisgorelik/subscriptions","organizations_url":"https://api.github.com/users/dennisgorelik/orgs","repos_url":"https://api.github.com/users/dennisgorelik/repos","events_url":"https://api.github.com/users/dennisgorelik/events{/privacy}","received_events_url":"https://api.github.com/users/dennisgorelik/received_events","type":"User","site_admin":false},"created_at":"2015-04-06T18:54:30Z","updated_at":"2015-04-06T18:54:30Z","author_association":"NONE","body":"@clintongormley\n1) Do you mean disable the page file for all programs in Windows?\nhttp://lifehacker.com/5426041/understanding-the-windows-pagefile-and-why-you-shouldnt-disable-it\n\n2) When do you think VirtualLock will be supported on Windows?\nCouple of months? A year?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90200584","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-90200584","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":90200584,"node_id":"MDEyOklzc3VlQ29tbWVudDkwMjAwNTg0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-06T19:05:59Z","updated_at":"2015-04-06T19:05:59Z","author_association":"CONTRIBUTOR","body":"> 1) Do you mean disable the page file for all programs in Windows?\n> http://lifehacker.com/5426041/understanding-the-windows-pagefile-and-why-you-shouldnt-disable-it\n\nYes.  If all of you've got running is Elasticsearch, then the advice from that article doesn't apply.\n\n> When do you think VirtualLock will be supported on Windows?Couple of months? A year?\n\nHopefully soon. We've been waiting for feedback from Windows experts, but I think we now have enough info to proceed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90204461","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-90204461","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":90204461,"node_id":"MDEyOklzc3VlQ29tbWVudDkwMjA0NDYx","user":{"login":"dennisgorelik","id":4333866,"node_id":"MDQ6VXNlcjQzMzM4NjY=","avatar_url":"https://avatars2.githubusercontent.com/u/4333866?v=4","gravatar_id":"","url":"https://api.github.com/users/dennisgorelik","html_url":"https://github.com/dennisgorelik","followers_url":"https://api.github.com/users/dennisgorelik/followers","following_url":"https://api.github.com/users/dennisgorelik/following{/other_user}","gists_url":"https://api.github.com/users/dennisgorelik/gists{/gist_id}","starred_url":"https://api.github.com/users/dennisgorelik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dennisgorelik/subscriptions","organizations_url":"https://api.github.com/users/dennisgorelik/orgs","repos_url":"https://api.github.com/users/dennisgorelik/repos","events_url":"https://api.github.com/users/dennisgorelik/events{/privacy}","received_events_url":"https://api.github.com/users/dennisgorelik/received_events","type":"User","site_admin":false},"created_at":"2015-04-06T19:20:26Z","updated_at":"2015-04-06T19:21:36Z","author_association":"NONE","body":"@clintongormley \nAside of ElasticSearch we are running other programs on the same server (IIS, SQL Server).\nIt probably does not make sense to run single ElasticSearch on Windows platform.\nIf/when we move ElasticSearch into separate server then it would be a Linux server (less frequent reboots, no licensing fees, better configuration support in ElasticSearch).\n\nThank you for your reply and looking forward for VirtualLock support on Windows.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/94080598","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-94080598","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":94080598,"node_id":"MDEyOklzc3VlQ29tbWVudDk0MDgwNTk4","user":{"login":"FrederickManley","id":7284643,"node_id":"MDQ6VXNlcjcyODQ2NDM=","avatar_url":"https://avatars3.githubusercontent.com/u/7284643?v=4","gravatar_id":"","url":"https://api.github.com/users/FrederickManley","html_url":"https://github.com/FrederickManley","followers_url":"https://api.github.com/users/FrederickManley/followers","following_url":"https://api.github.com/users/FrederickManley/following{/other_user}","gists_url":"https://api.github.com/users/FrederickManley/gists{/gist_id}","starred_url":"https://api.github.com/users/FrederickManley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FrederickManley/subscriptions","organizations_url":"https://api.github.com/users/FrederickManley/orgs","repos_url":"https://api.github.com/users/FrederickManley/repos","events_url":"https://api.github.com/users/FrederickManley/events{/privacy}","received_events_url":"https://api.github.com/users/FrederickManley/received_events","type":"User","site_admin":false},"created_at":"2015-04-17T21:39:30Z","updated_at":"2015-04-17T21:39:41Z","author_association":"NONE","body":"Disabling the page file and setting mlockall: true in the yml doesn't fix the issue on windows.  mlockall is still set to false (/_nodes/process) and performance is still poor.  swap space used is basically the entire remaining memory of the node (50%).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/94085217","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-94085217","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":94085217,"node_id":"MDEyOklzc3VlQ29tbWVudDk0MDg1MjE3","user":{"login":"dennisgorelik","id":4333866,"node_id":"MDQ6VXNlcjQzMzM4NjY=","avatar_url":"https://avatars2.githubusercontent.com/u/4333866?v=4","gravatar_id":"","url":"https://api.github.com/users/dennisgorelik","html_url":"https://github.com/dennisgorelik","followers_url":"https://api.github.com/users/dennisgorelik/followers","following_url":"https://api.github.com/users/dennisgorelik/following{/other_user}","gists_url":"https://api.github.com/users/dennisgorelik/gists{/gist_id}","starred_url":"https://api.github.com/users/dennisgorelik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dennisgorelik/subscriptions","organizations_url":"https://api.github.com/users/dennisgorelik/orgs","repos_url":"https://api.github.com/users/dennisgorelik/repos","events_url":"https://api.github.com/users/dennisgorelik/events{/privacy}","received_events_url":"https://api.github.com/users/dennisgorelik/received_events","type":"User","site_admin":false},"created_at":"2015-04-17T22:01:30Z","updated_at":"2015-04-17T23:55:08Z","author_association":"NONE","body":"We moved our ElasticSearch job percolation functionality from Windows server to ElasticSearch cluster on two Linux VPS-es (3GB RAM + 2GB RAM).\nPercolation performance improved at a fraction of hosting price (relative to price of dedicated Windows server).\nWe can also increase cluster performance just by adding more nodes to our ElasticSearch cluster.\n\n<a href=\"http://dennisgorelik.livejournal.com/85071.html\">More details here</a>\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/96215979","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-96215979","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":96215979,"node_id":"MDEyOklzc3VlQ29tbWVudDk2MjE1OTc5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-25T14:35:01Z","updated_at":"2015-04-25T14:35:01Z","author_association":"CONTRIBUTOR","body":"@FrederickManley mlockall is linux only.  See https://github.com/elastic/elasticsearch/pull/9186 for support for something similar coming in Windows\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162213570","html_url":"https://github.com/elastic/elasticsearch/issues/9714#issuecomment-162213570","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9714","id":162213570,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjIxMzU3MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-12-05T15:53:47Z","updated_at":"2015-12-05T15:53:47Z","author_association":"CONTRIBUTOR","body":"The original issue appears to have been fixed. Closing\n","performed_via_github_app":null}]