[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/654504814","html_url":"https://github.com/elastic/elasticsearch/issues/58634#issuecomment-654504814","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58634","id":654504814,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDUwNDgxNA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-07-06T22:58:43Z","updated_at":"2020-07-06T22:58:43Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/Allocation)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/654651517","html_url":"https://github.com/elastic/elasticsearch/issues/58634#issuecomment-654651517","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58634","id":654651517,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDY1MTUxNw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-07-07T07:21:06Z","updated_at":"2020-07-07T07:21:06Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search (:Search/Search)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/667210576","html_url":"https://github.com/elastic/elasticsearch/issues/58634#issuecomment-667210576","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58634","id":667210576,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NzIxMDU3Ng==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2020-07-31T16:22:29Z","updated_at":"2020-07-31T16:22:29Z","author_association":"CONTRIBUTOR","body":">     2\\. Store documents in 2 different indices\r\n\r\nWhen I had a similar problem many years ago that is what I did. In my case, though, documents could never \"move\" from one partition to the other. They were forever \"public\" or \"admin\". \"Moving\" a document from on index to another isn't something you can do atomically so it would have been sad.\r\n\r\nFor what it is worth I'm against allowing folks to directly control the target shard because I think it is likely to be surprisingly \"breaky\". It'd be fairly incompatible with the work we've done to split and join shards. \r\n\r\nIf documents frequently change from public to private and back then you probably should use a flag on the document. Anything else is not going to be atomic. And you shouldn't try to route based on public or private because `_rounting` can't change. If you change the routing for a document then you'll end up with two copies and a sad index.\r\n\r\nIf you are super concerned about keeping the statistics for those indices separate (I was) then two indices still might be the best approach here.\r\n\r\nI guess the problem with trying to set the routing is that if you did you'd *still* have to send a `delete` and reindex with the new routing. You'd still have to change your application. I don't think it'd end up much simpler than just having two indices.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/682247859","html_url":"https://github.com/elastic/elasticsearch/issues/58634#issuecomment-682247859","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58634","id":682247859,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjI0Nzg1OQ==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2020-08-27T23:52:37Z","updated_at":"2020-08-27T23:52:37Z","author_association":"MEMBER","body":"Because of the concerns that @nik9000 has highlighted, I plan to close out the issue.\r\n\r\n@halaei please feel free to reopen or file a new issue if you we think missed something important. The [discuss forums](https://discuss.elastic.co/) could also be a good place to gather more feedback on your use case.","performed_via_github_app":null}]