{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/13370","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13370/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13370/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13370/events","html_url":"https://github.com/elastic/elasticsearch/issues/13370","id":105160497,"node_id":"MDU6SXNzdWUxMDUxNjA0OTc=","number":13370,"title":"Referencing previous initialised variables raises a NullPointerException","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2015-09-07T07:17:24Z","updated_at":"2017-04-19T07:20:58Z","closed_at":"2017-04-19T07:20:58Z","author_association":"MEMBER","active_lock_reason":null,"body":"_From @pedrocunha on March 26, 2015 15:5_\n\nHello,\n\nThe following search request raises a NullPointerException complaining foo is not defined:\n\n```\ncurl -XPOST \"http://localhost:9200/index/model/_search\" -d'\n{\n  \"query\": {\n    \"function_score\": {\n      \"script_score\": {\n        \"script\": \"foo = 2; foo + 2\",\n        \"lang\": \"python\"\n      }\n    }\n  }\n}'\n```\n\nThis is similar to https://github.com/elastic/elasticsearch-lang-python/issues/19 but in this case I'm trying to reference the variable just initialised. I'm using ES 1.4.3 and python plugin 2.4.1. I've tried both 1.5 ES version and the plugin snapshot versions, and the behaviour is the same.\n\nNote that the above is totally valid if we change \"lang\" to \"groovy\".\n\nAm I missing out something ?\n\nPlease help,\nThank you\n\n_Copied from original issue: elastic/elasticsearch-lang-python#29_\n","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}