{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/47771","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47771/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47771/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47771/events","html_url":"https://github.com/elastic/elasticsearch/issues/47771","id":504466717,"node_id":"MDU6SXNzdWU1MDQ0NjY3MTc=","number":47771,"title":"Centos7 SimpleFSIndexInput error when installing 7.3.2","user":{"login":"TuulaP","id":3314750,"node_id":"MDQ6VXNlcjMzMTQ3NTA=","avatar_url":"https://avatars1.githubusercontent.com/u/3314750?v=4","gravatar_id":"","url":"https://api.github.com/users/TuulaP","html_url":"https://github.com/TuulaP","followers_url":"https://api.github.com/users/TuulaP/followers","following_url":"https://api.github.com/users/TuulaP/following{/other_user}","gists_url":"https://api.github.com/users/TuulaP/gists{/gist_id}","starred_url":"https://api.github.com/users/TuulaP/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TuulaP/subscriptions","organizations_url":"https://api.github.com/users/TuulaP/orgs","repos_url":"https://api.github.com/users/TuulaP/repos","events_url":"https://api.github.com/users/TuulaP/events{/privacy}","received_events_url":"https://api.github.com/users/TuulaP/received_events","type":"User","site_admin":false},"labels":[{"id":114977275,"node_id":"MDU6TGFiZWwxMTQ5NzcyNzU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Packaging","name":":Delivery/Packaging","color":"0e8a16","default":false,"description":"RPM and deb packaging, tar and zip archives, shell and batch scripts"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-10-09T07:26:29Z","updated_at":"2020-11-11T21:55:09Z","closed_at":"2019-10-16T11:33:36Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** : 7.3.2 \r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`):\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\n3.10.0-1062.1.1.el7.x86_64 #1 SMP Fri Sep 13 22:55:44 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n`more /etc/centos-release`\r\nCentOS Linux release 7.7.1908 (Core)\r\n\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nTried installing ElasticSearch 7.3.2 with this command\r\n\r\n`sudo rpm -ivh elasticsearch-7.3.2-x86_64.rpm`\r\n\r\nActual behavior:\r\n\r\nAt the end got this kind of error:\r\n\r\n```\r\n\r\nPreparing...                          ################################# [100%]\r\nCreating elasticsearch group... OK\r\nCreating elasticsearch user... OK\r\nUpdating / installing...\r\n   1:elasticsearch-0:7.3.2-1          ################################# [100%]\r\n### NOT starting on installation, please execute the following statements to configure elasticsearch service to start automatically using systemd\r\n sudo systemctl daemon-reload\r\n sudo systemctl enable elasticsearch.service\r\n### You can start elasticsearch service by executing\r\n sudo systemctl start elasticsearch.service\r\nException in thread \"main\" java.io.EOFException: read past EOF: SimpleFSIndexInput(path=\"/etc/elasticsearch/elasticsearch.keystore\")\r\n        at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:336)\r\n        at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:54)\r\n        at org.apache.lucene.store.BufferedChecksumIndexInput.readByte(BufferedChecksumIndexInput.java:41)\r\n        at org.apache.lucene.store.DataInput.readInt(DataInput.java:101)\r\n        at org.apache.lucene.codecs.CodecUtil.checkHeader(CodecUtil.java:194)\r\n        at org.elasticsearch.common.settings.KeyStoreWrapper.load(KeyStoreWrapper.java:220)\r\n        at org.elasticsearch.common.settings.UpgradeKeyStoreCommand.execute(UpgradeKeyStoreCommand.java:40)\r\n        at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86)\r\n        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124)\r\n        at org.elasticsearch.cli.MultiCommand.execute(MultiCommand.java:77)\r\n        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124)\r\n        at org.elasticsearch.cli.Command.main(Command.java:90)\r\n        at org.elasticsearch.common.settings.KeyStoreCli.main(KeyStoreCli.java:41)\r\nwarning: %posttrans(elasticsearch-0:7.3.2-1.x86_64) scriptlet failed, exit status 1\r\n\r\n```\r\n\r\n(we didn't have that keystore file earlier, so should it exist as a empty file and with which rights?)\r\n\r\n\r\n**Steps to reproduce**:\r\n\r\n 1.  sudo rpm -ivh elasticsearch-7.3.2-x86_64.rpm\r\n 2.\r\n 3.\r\n\r\n(although we did have earlier version of elasticsearch installed, but that I did uninstall with `sudo yum remove elasticsearch` before attempting to install this newer version, but it might have left some directories with wrong permissions.)\r\n\r\nIt seems that finally elasticsearch service did start up, but I had to change the rights of the /etc/elasticsearch to let it create the keystore there. \r\n\r\n\r\n","closed_by":{"login":"TuulaP","id":3314750,"node_id":"MDQ6VXNlcjMzMTQ3NTA=","avatar_url":"https://avatars1.githubusercontent.com/u/3314750?v=4","gravatar_id":"","url":"https://api.github.com/users/TuulaP","html_url":"https://github.com/TuulaP","followers_url":"https://api.github.com/users/TuulaP/followers","following_url":"https://api.github.com/users/TuulaP/following{/other_user}","gists_url":"https://api.github.com/users/TuulaP/gists{/gist_id}","starred_url":"https://api.github.com/users/TuulaP/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TuulaP/subscriptions","organizations_url":"https://api.github.com/users/TuulaP/orgs","repos_url":"https://api.github.com/users/TuulaP/repos","events_url":"https://api.github.com/users/TuulaP/events{/privacy}","received_events_url":"https://api.github.com/users/TuulaP/received_events","type":"User","site_admin":false},"performed_via_github_app":null}