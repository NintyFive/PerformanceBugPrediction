{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3922","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3922/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3922/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3922/events","html_url":"https://github.com/elastic/elasticsearch/issues/3922","id":21100254,"node_id":"MDU6SXNzdWUyMTEwMDI1NA==","number":3922,"title":"Don't honor lowercase expanded terms in regex query generated from query string query","user":{"login":"mattweber","id":173955,"node_id":"MDQ6VXNlcjE3Mzk1NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/173955?v=4","gravatar_id":"","url":"https://api.github.com/users/mattweber","html_url":"https://github.com/mattweber","followers_url":"https://api.github.com/users/mattweber/followers","following_url":"https://api.github.com/users/mattweber/following{/other_user}","gists_url":"https://api.github.com/users/mattweber/gists{/gist_id}","starred_url":"https://api.github.com/users/mattweber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattweber/subscriptions","organizations_url":"https://api.github.com/users/mattweber/orgs","repos_url":"https://api.github.com/users/mattweber/repos","events_url":"https://api.github.com/users/mattweber/events{/privacy}","received_events_url":"https://api.github.com/users/mattweber/received_events","type":"User","site_admin":false},"labels":[{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2013-10-16T18:36:21Z","updated_at":"2015-08-24T11:19:10Z","closed_at":"2015-08-24T11:19:10Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"On the mailing list a user was using a query string query against an unanalyzed field that contained values such as:\n\n5.2\n5.3-SNAPSHOT\n\nHe wanted to return all documents that were not a snapshot version so they used a query string like `-version:/.*SNAPSHOT/`.  This did not work.  Turns out that `lowercase_expanded_terms` was turning the regex into `-version:/.*snapshot/` which doesn't match the unanalyzed field due to case.\n\nHe was using Kibana which does not currently expose the lowercaseExpandedTerms option, so the user really had no way to fix this without changing the mapping and reindexing or patching kibana.\n\nShould the lowercase_expanded_terms option even be honored in a regex query?  I would think no.\n\nI did not see a way to set a case insensitive flag on the lucene regex query and the `(?i)` flag from java regex did not work.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}