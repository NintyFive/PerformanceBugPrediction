[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/96409833","html_url":"https://github.com/elastic/elasticsearch/issues/10791#issuecomment-96409833","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10791","id":96409833,"node_id":"MDEyOklzc3VlQ29tbWVudDk2NDA5ODMz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-26T17:09:18Z","updated_at":"2015-04-26T17:09:18Z","author_association":"CONTRIBUTOR","body":"@ppf2 can you suggest one?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/98086049","html_url":"https://github.com/elastic/elasticsearch/issues/10791#issuecomment-98086049","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10791","id":98086049,"node_id":"MDEyOklzc3VlQ29tbWVudDk4MDg2MDQ5","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-05-01T09:42:19Z","updated_at":"2015-05-01T09:42:19Z","author_association":"MEMBER","body":"I think if `size` is set to `0` we should just return a `hits` that only contains a total count and if a negative value is specified we should fail with a parse exception or something like that.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/98189830","html_url":"https://github.com/elastic/elasticsearch/issues/10791#issuecomment-98189830","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10791","id":98189830,"node_id":"MDEyOklzc3VlQ29tbWVudDk4MTg5ODMw","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2015-05-01T18:06:00Z","updated_at":"2015-05-01T18:06:00Z","author_association":"MEMBER","body":"I agree, it makes sense to allow size=0, and a parse error for size < 0 is helpful.  Maybe indicate in the error message what is the range of size that is allowed (or even warn users about setting size to something very large like integer max, etc..)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/143598976","html_url":"https://github.com/elastic/elasticsearch/issues/10791#issuecomment-143598976","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10791","id":143598976,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MzU5ODk3Ng==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-09-27T22:32:06Z","updated_at":"2015-09-27T22:32:06Z","author_association":"CONTRIBUTOR","body":"When counting when the size is 0 is what we do for regular search operations. However for aggregations, you already know the match count anyway thanks to the parent aggregation, to I think it's right to raise an error is `size` is less than or equal to 0 as it's almost certainly a user error.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/221690721","html_url":"https://github.com/elastic/elasticsearch/issues/10791#issuecomment-221690721","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10791","id":221690721,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMTY5MDcyMQ==","user":{"login":"linkwoman","id":2505005,"node_id":"MDQ6VXNlcjI1MDUwMDU=","avatar_url":"https://avatars2.githubusercontent.com/u/2505005?v=4","gravatar_id":"","url":"https://api.github.com/users/linkwoman","html_url":"https://github.com/linkwoman","followers_url":"https://api.github.com/users/linkwoman/followers","following_url":"https://api.github.com/users/linkwoman/following{/other_user}","gists_url":"https://api.github.com/users/linkwoman/gists{/gist_id}","starred_url":"https://api.github.com/users/linkwoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linkwoman/subscriptions","organizations_url":"https://api.github.com/users/linkwoman/orgs","repos_url":"https://api.github.com/users/linkwoman/repos","events_url":"https://api.github.com/users/linkwoman/events{/privacy}","received_events_url":"https://api.github.com/users/linkwoman/received_events","type":"User","site_admin":false},"created_at":"2016-05-25T20:05:03Z","updated_at":"2016-05-25T20:05:03Z","author_association":"NONE","body":"This would be useful to have size:0 allowed.  Why? Because I want the max_score for each bucket which I can only get when I return at least 1 top_hit.  I do not want to see the top_hit - I just want a report of all buckets, doc counts in each bucket, and max score.  Is there another way to get max_score of each bucket?  Also, I need min_score.  Is there a way to get that @clintongormley ?  \nthanks.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/221692941","html_url":"https://github.com/elastic/elasticsearch/issues/10791#issuecomment-221692941","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10791","id":221692941,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMTY5Mjk0MQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-05-25T20:13:12Z","updated_at":"2016-05-25T20:13:12Z","author_association":"CONTRIBUTOR","body":"@linkwoman you could use a max aggregation on a script that just consists of `_score` for that. This would also be much more efficient.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/444017455","html_url":"https://github.com/elastic/elasticsearch/issues/10791#issuecomment-444017455","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10791","id":444017455,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDAxNzQ1NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-12-04T08:42:50Z","updated_at":"2018-12-04T08:42:50Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-analytics-geo","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/484397983","html_url":"https://github.com/elastic/elasticsearch/issues/10791#issuecomment-484397983","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10791","id":484397983,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDM5Nzk4Mw==","user":{"login":"rmadisonhaynie","id":15270726,"node_id":"MDQ6VXNlcjE1MjcwNzI2","avatar_url":"https://avatars0.githubusercontent.com/u/15270726?v=4","gravatar_id":"","url":"https://api.github.com/users/rmadisonhaynie","html_url":"https://github.com/rmadisonhaynie","followers_url":"https://api.github.com/users/rmadisonhaynie/followers","following_url":"https://api.github.com/users/rmadisonhaynie/following{/other_user}","gists_url":"https://api.github.com/users/rmadisonhaynie/gists{/gist_id}","starred_url":"https://api.github.com/users/rmadisonhaynie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmadisonhaynie/subscriptions","organizations_url":"https://api.github.com/users/rmadisonhaynie/orgs","repos_url":"https://api.github.com/users/rmadisonhaynie/repos","events_url":"https://api.github.com/users/rmadisonhaynie/events{/privacy}","received_events_url":"https://api.github.com/users/rmadisonhaynie/received_events","type":"User","site_admin":false},"created_at":"2019-04-18T08:03:09Z","updated_at":"2019-04-18T08:03:09Z","author_association":"NONE","body":"> When counting when the size is 0 is what we do for regular search operations. However for aggregations, you already know the match count anyway thanks to the parent aggregation, to I think it's right to raise an error is `size` is less than or equal to 0 as it's almost certainly a user error.\r\n\r\n@jpountz Is it possible to reference the match count in the same query or would I need to perform 2 requests? I would like to get all my hits, not just the top N\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/514115854","html_url":"https://github.com/elastic/elasticsearch/issues/10791#issuecomment-514115854","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10791","id":514115854,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDExNTg1NA==","user":{"login":"OneCodeMonkey","id":19618280,"node_id":"MDQ6VXNlcjE5NjE4Mjgw","avatar_url":"https://avatars3.githubusercontent.com/u/19618280?v=4","gravatar_id":"","url":"https://api.github.com/users/OneCodeMonkey","html_url":"https://github.com/OneCodeMonkey","followers_url":"https://api.github.com/users/OneCodeMonkey/followers","following_url":"https://api.github.com/users/OneCodeMonkey/following{/other_user}","gists_url":"https://api.github.com/users/OneCodeMonkey/gists{/gist_id}","starred_url":"https://api.github.com/users/OneCodeMonkey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OneCodeMonkey/subscriptions","organizations_url":"https://api.github.com/users/OneCodeMonkey/orgs","repos_url":"https://api.github.com/users/OneCodeMonkey/repos","events_url":"https://api.github.com/users/OneCodeMonkey/events{/privacy}","received_events_url":"https://api.github.com/users/OneCodeMonkey/received_events","type":"User","site_admin":false},"created_at":"2019-07-23T08:47:50Z","updated_at":"2019-07-23T08:47:50Z","author_association":"NONE","body":"Probably because you assign an negative value to the `from` parameter, coz I 'm encounter the same mistake...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/650225000","html_url":"https://github.com/elastic/elasticsearch/issues/10791#issuecomment-650225000","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10791","id":650225000,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDIyNTAwMA==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2020-06-26T14:57:52Z","updated_at":"2020-06-26T14:57:52Z","author_association":"MEMBER","body":"I cannot reproduce it in master anymore. I am getting the following error message:\r\n```\r\n{\r\n  \"error\" : {\r\n    \"root_cause\" : [\r\n      {\r\n        \"type\" : \"illegal_argument_exception\",\r\n        \"reason\" : \"[from] must be greater than or equal to 0. Found [-1] in [top_tag_hits]\"\r\n      }\r\n    ],\r\n    \"type\" : \"illegal_argument_exception\",\r\n    \"reason\" : \"[from] must be greater than or equal to 0. Found [-1] in [top_tag_hits]\"\r\n  },\r\n  \"status\" : 400\r\n}\r\n```\r\n\r\nIf it is still reproducible somewhere, please free to reopen.","performed_via_github_app":null}]