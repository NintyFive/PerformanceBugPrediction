[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/631792153","html_url":"https://github.com/elastic/elasticsearch/issues/57019#issuecomment-631792153","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57019","id":631792153,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTc5MjE1Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-05-20T23:33:10Z","updated_at":"2020-05-20T23:33:10Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search (:Search/Mapping)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/631792156","html_url":"https://github.com/elastic/elasticsearch/issues/57019#issuecomment-631792156","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57019","id":631792156,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTc5MjE1Ng==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-05-20T23:33:11Z","updated_at":"2020-05-20T23:33:11Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Core)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/631907837","html_url":"https://github.com/elastic/elasticsearch/issues/57019#issuecomment-631907837","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57019","id":631907837,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTkwNzgzNw==","user":{"login":"gaobinlong","id":15811131,"node_id":"MDQ6VXNlcjE1ODExMTMx","avatar_url":"https://avatars2.githubusercontent.com/u/15811131?v=4","gravatar_id":"","url":"https://api.github.com/users/gaobinlong","html_url":"https://github.com/gaobinlong","followers_url":"https://api.github.com/users/gaobinlong/followers","following_url":"https://api.github.com/users/gaobinlong/following{/other_user}","gists_url":"https://api.github.com/users/gaobinlong/gists{/gist_id}","starred_url":"https://api.github.com/users/gaobinlong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaobinlong/subscriptions","organizations_url":"https://api.github.com/users/gaobinlong/orgs","repos_url":"https://api.github.com/users/gaobinlong/repos","events_url":"https://api.github.com/users/gaobinlong/events{/privacy}","received_events_url":"https://api.github.com/users/gaobinlong/received_events","type":"User","site_admin":false},"created_at":"2020-05-21T06:23:55Z","updated_at":"2020-05-21T06:26:03Z","author_association":"CONTRIBUTOR","body":"This issue maybe come from the difference between `STRICT_DATE_PRINTER `and `STRICT_DATE_OPTIONAL_TIME_PRINTER `:\r\nhttps://github.com/elastic/elasticsearch/blob/21f18e02c26a40140f5c8708bfa0cd52df0bf2e8/server/src/main/java/org/elasticsearch/common/time/DateFormatters.java#L593\r\nhttps://github.com/elastic/elasticsearch/blob/21f18e02c26a40140f5c8708bfa0cd52df0bf2e8/server/src/main/java/org/elasticsearch/common/time/DateFormatters.java#L96\r\n\r\nCan we simply make them consistent?\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/634261900","html_url":"https://github.com/elastic/elasticsearch/issues/57019#issuecomment-634261900","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57019","id":634261900,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDI2MTkwMA==","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"created_at":"2020-05-26T20:29:50Z","updated_at":"2020-05-26T20:29:50Z","author_association":"CONTRIBUTOR","body":"`strict_date_optional_time`  is a format that was always parsing and printing up to 3  digits on `fraction of second` part. \r\nOn the other hand `strict_date_time` was actually allowing parsing and printing up to 9 digits - even when it was not supported with joda (additional digits were dropped)\r\nsee https://github.com/elastic/elasticsearch/blob/master/server/src/main/java/org/joda/time/format/StrictISODateTimeFormat.java#L2020\r\n\r\nChanging this now would surely break some users.\r\n\r\nwould  you consider using `strict_date_optional_time_nanos` ?  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/634337720","html_url":"https://github.com/elastic/elasticsearch/issues/57019#issuecomment-634337720","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57019","id":634337720,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDMzNzcyMA==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2020-05-26T23:43:11Z","updated_at":"2020-05-26T23:52:45Z","author_association":"MEMBER","body":"> `strict_date_optional_time` is a format that was always parsing and printing up to 3 digits on `fraction of second` part.\r\n\r\nTo clarify, in my testing I saw that `strict_date_optional_time` accepts dates with nanosecond precision, but only formats them at millisecond precision. This leads to confusing behavior where you can successfully index a `date_nanos` field using `strict_date_optional_time` (the default), but when you go to retrieve it through `docvalue_fields` with this same format, the nanosecond precision is lost.\r\n\r\n> would you consider using `strict_date_optional_time_nanos` ?\r\n\r\nI'm not up to speed on the details of date formatting and backwards compatibility, but to me it'd be better to fix the inconsistency (or explicitly choose not to fix it) instead of introducing this new type.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/634438740","html_url":"https://github.com/elastic/elasticsearch/issues/57019#issuecomment-634438740","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57019","id":634438740,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDQzODc0MA==","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"created_at":"2020-05-27T05:34:28Z","updated_at":"2020-05-27T05:34:28Z","author_association":"CONTRIBUTOR","body":"> I'm not up to speed on the details of date formatting and backwards compatibility, but to me it'd be better to fix the inconsistency (or explicitly choose not to fix it) instead of introducing this new type.\r\n\r\nI am also not sure on backwards compatibility implication on changing `strict_date_optional_time`. @rjernst do you happen to remember?\r\nI guess there must be some, as the only alternative to modifying `strict_date_optional_time` would be to add a new date format. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/634715164","html_url":"https://github.com/elastic/elasticsearch/issues/57019#issuecomment-634715164","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57019","id":634715164,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDcxNTE2NA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2020-05-27T14:52:18Z","updated_at":"2020-05-27T14:52:18Z","author_association":"MEMBER","body":"I don't remember why the allowed digits were extended for `strict_date_optional_time`. The nanos variant was added for the `date_nanos` field type, which is what should be used IMO. I don't think we should change the behavior of `strict_date_optional_time` unless it can be conditionalized on the field type, so that users of regular `date` fields continue to get the same behavior.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/634806751","html_url":"https://github.com/elastic/elasticsearch/issues/57019#issuecomment-634806751","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57019","id":634806751,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDgwNjc1MQ==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2020-05-27T17:05:45Z","updated_at":"2020-05-27T17:30:52Z","author_association":"MEMBER","body":"Sorry for the confusion, I actually didn't realize that `strict_date_optional_time_nanos` already existed (I thought you were proposing a new format). I'm happy to go with whatever you think is best in terms of the behavior.\r\n\r\nFor me, a takeaway from this discussion is that we could improve the docs: `strict_date_optional_time_nanos` isn't listed on the [date formats](https://www.elastic.co/guide/en/elasticsearch/reference/7.7/mapping-date-format.html) page. We could also mention it on the [date_nanos](https://www.elastic.co/guide/en/elasticsearch/reference/7.7/date_nanos.html) page and give clearer guidance around formats.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/634842873","html_url":"https://github.com/elastic/elasticsearch/issues/57019#issuecomment-634842873","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57019","id":634842873,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDg0Mjg3Mw==","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"created_at":"2020-05-27T18:04:05Z","updated_at":"2020-05-27T18:04:05Z","author_association":"CONTRIBUTOR","body":"@jtibshirani good idea - I will keep this item open and update the docs\r\nWe are intending actually to limit number of named formats in the future, but `strict_date_optional_time*` are likely to stay I think.","performed_via_github_app":null}]