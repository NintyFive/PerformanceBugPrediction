[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/56046126","html_url":"https://github.com/elastic/elasticsearch/issues/7788#issuecomment-56046126","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7788","id":56046126,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDQ2MTI2","user":{"login":"phjardas","id":1437300,"node_id":"MDQ6VXNlcjE0MzczMDA=","avatar_url":"https://avatars0.githubusercontent.com/u/1437300?v=4","gravatar_id":"","url":"https://api.github.com/users/phjardas","html_url":"https://github.com/phjardas","followers_url":"https://api.github.com/users/phjardas/followers","following_url":"https://api.github.com/users/phjardas/following{/other_user}","gists_url":"https://api.github.com/users/phjardas/gists{/gist_id}","starred_url":"https://api.github.com/users/phjardas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phjardas/subscriptions","organizations_url":"https://api.github.com/users/phjardas/orgs","repos_url":"https://api.github.com/users/phjardas/repos","events_url":"https://api.github.com/users/phjardas/events{/privacy}","received_events_url":"https://api.github.com/users/phjardas/received_events","type":"User","site_admin":false},"created_at":"2014-09-18T14:29:11Z","updated_at":"2014-09-18T14:29:11Z","author_association":"CONTRIBUTOR","body":"IMHO the problem lies in DecayFunctionParser returning 0 as the distance, if no fields are found:\n\nhttps://github.com/elasticsearch/elasticsearch/blob/9addac830089e48bdcd77a5cc972d85808d863e5/src/main/java/org/elasticsearch/index/query/functionscore/DecayFunctionParser.java#L376\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/56052922","html_url":"https://github.com/elastic/elasticsearch/issues/7788#issuecomment-56052922","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7788","id":56052922,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDUyOTIy","user":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"created_at":"2014-09-18T15:11:45Z","updated_at":"2014-09-18T15:11:45Z","author_association":"CONTRIBUTOR","body":"Yes, it is like you say. It is also [documented](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-function-score-query.html#_what_if_a_field_is_missing) but rather hidden at the very end of the docs.\n\n> My expectation would be that the decay function does not even receive the input but the function score query automatically returns a score of 0 if the field is missing.\n\nI am not convinced that this is always expected. Also, there is an easy workaround: Just add additional function with a missing filter and put in whatever value you like. Would that work for you?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/56663521","html_url":"https://github.com/elastic/elasticsearch/issues/7788#issuecomment-56663521","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7788","id":56663521,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjYzNTIx","user":{"login":"phjardas","id":1437300,"node_id":"MDQ6VXNlcjE0MzczMDA=","avatar_url":"https://avatars0.githubusercontent.com/u/1437300?v=4","gravatar_id":"","url":"https://api.github.com/users/phjardas","html_url":"https://github.com/phjardas","followers_url":"https://api.github.com/users/phjardas/followers","following_url":"https://api.github.com/users/phjardas/following{/other_user}","gists_url":"https://api.github.com/users/phjardas/gists{/gist_id}","starred_url":"https://api.github.com/users/phjardas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phjardas/subscriptions","organizations_url":"https://api.github.com/users/phjardas/orgs","repos_url":"https://api.github.com/users/phjardas/repos","events_url":"https://api.github.com/users/phjardas/events{/privacy}","received_events_url":"https://api.github.com/users/phjardas/received_events","type":"User","site_admin":false},"created_at":"2014-09-24T12:40:26Z","updated_at":"2014-09-24T12:40:26Z","author_association":"CONTRIBUTOR","body":"@brwe could you please explain how this workaround would look like? I'm not sure I understand your proposal correcly. Thanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/57196342","html_url":"https://github.com/elastic/elasticsearch/issues/7788#issuecomment-57196342","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7788","id":57196342,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTk2MzQy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-09-29T17:25:43Z","updated_at":"2014-09-29T17:25:43Z","author_association":"CONTRIBUTOR","body":"@phjardas this is what @brwe means:\n\n```\n{\n  \"query\": {\n    \"function_score\": {\n      \"score_mode\": \"first\",\n      \"functions\": [\n        {\n          \"filter\": {\n            \"exists\": {\n              \"field\": \"age\"\n            }\n          },\n          \"gauss\": {\n            \"age\": {\n              \"origin\": 22,\n              \"scale\": 5,\n              \"decay\": 0.5\n            }\n          }\n        },\n        {\n          \"script_score\": {\n            \"script\": \"0\"\n          }\n        }\n      ]\n    }\n  }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/57289553","html_url":"https://github.com/elastic/elasticsearch/issues/7788#issuecomment-57289553","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7788","id":57289553,"node_id":"MDEyOklzc3VlQ29tbWVudDU3Mjg5NTUz","user":{"login":"phjardas","id":1437300,"node_id":"MDQ6VXNlcjE0MzczMDA=","avatar_url":"https://avatars0.githubusercontent.com/u/1437300?v=4","gravatar_id":"","url":"https://api.github.com/users/phjardas","html_url":"https://github.com/phjardas","followers_url":"https://api.github.com/users/phjardas/followers","following_url":"https://api.github.com/users/phjardas/following{/other_user}","gists_url":"https://api.github.com/users/phjardas/gists{/gist_id}","starred_url":"https://api.github.com/users/phjardas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phjardas/subscriptions","organizations_url":"https://api.github.com/users/phjardas/orgs","repos_url":"https://api.github.com/users/phjardas/repos","events_url":"https://api.github.com/users/phjardas/events{/privacy}","received_events_url":"https://api.github.com/users/phjardas/received_events","type":"User","site_admin":false},"created_at":"2014-09-30T09:40:22Z","updated_at":"2014-09-30T09:40:22Z","author_association":"CONTRIBUTOR","body":"Thanks @clintongormley for the explanation!\n\nNB: this would require dynamic scripts to be enabled, of course.\n","performed_via_github_app":null}]