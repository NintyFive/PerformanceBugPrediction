{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/898","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/898/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/898/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/898/events","html_url":"https://github.com/elastic/elasticsearch/issues/898","id":841880,"node_id":"MDU6SXNzdWU4NDE4ODA=","number":898,"title":"Silent failure when heap larger than available memory","user":{"login":"cloudartisan","id":295402,"node_id":"MDQ6VXNlcjI5NTQwMg==","avatar_url":"https://avatars2.githubusercontent.com/u/295402?v=4","gravatar_id":"","url":"https://api.github.com/users/cloudartisan","html_url":"https://github.com/cloudartisan","followers_url":"https://api.github.com/users/cloudartisan/followers","following_url":"https://api.github.com/users/cloudartisan/following{/other_user}","gists_url":"https://api.github.com/users/cloudartisan/gists{/gist_id}","starred_url":"https://api.github.com/users/cloudartisan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cloudartisan/subscriptions","organizations_url":"https://api.github.com/users/cloudartisan/orgs","repos_url":"https://api.github.com/users/cloudartisan/repos","events_url":"https://api.github.com/users/cloudartisan/events{/privacy}","received_events_url":"https://api.github.com/users/cloudartisan/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"assignees":[{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2011-05-03T05:18:34Z","updated_at":"2013-08-09T11:22:28Z","closed_at":"2013-08-09T11:22:28Z","author_association":"NONE","active_lock_reason":null,"body":"Simple issue...\n\nIf I set the heap min greater than available memory (eg, 8GB on a 7.5GB instance) elasticsearch will quietly fail to start.\n\n```\nPROFILING: Search 4:ubuntu@ip-10-72-65-201:/var/assistly/elasticsearch/logs$ \"/var/assistly/elasticsearch/bin/service/exec/elasticsearch-linux-x86-64\" \"/var/assistly/elasticsearch/bin/service/elasticsearch.conf\" wrapper.syslog.ident=\"elasticsearch\" wrapper.pidfile=\"/var/assistly/elasticsearch-0.16.0-SNAPSHOT/bin/../../elasticsearch-servicewrapper/service/./elasticsearch.pid\" wrapper.name=\"elasticsearch\" wrapper.displayname=\"ElasticSearch\" wrapper.daemonize=TRUE   wrapper.statusfile=\"/var/assistly/elasticsearch-0.16.0-SNAPSHOT/bin/../../elasticsearch-servicewrapper/service/./elasticsearch.status\" wrapper.java.statusfile=\"/var/assistly/elasticsearch-0.16.0-SNAPSHOT/bin/../../elasticsearch-servicewrapper/service/./elasticsearch.java.status\"\nPROFILING: Search 4:ubuntu@ip-10-72-65-201:/var/assistly/elasticsearch/logs$ echo $?\n0\nPROFILING: Search 4:ubuntu@ip-10-72-65-201:/var/assistly/elasticsearch/logs$ ps auxw | grep elastic | grep -v grep\nPROFILING: Search 4:ubuntu@ip-10-72-65-201:/var/assistly/elasticsearch/logs$ ls /mnt/elasticsearch/profiling/\nPROFILING: Search 4:ubuntu@ip-10-72-65-201:/var/assistly/elasticsearch/logs$ tail elasticsearch.log\n[2011-05-03 04:18:25,593][INFO ][node                     ] [Anvil] {elasticsearch/0.16.0-SNAPSHOT/2011-03-12T19:52:17}[8622]: stopping ...\n[2011-05-03 04:18:25,631][INFO ][node                     ] [Anvil] {elasticsearch/0.16.0-SNAPSHOT/2011-03-12T19:52:17}[8622]: stopped\n[2011-05-03 04:18:25,632][INFO ][node                     ] [Anvil] {elasticsearch/0.16.0-SNAPSHOT/2011-03-12T19:52:17}[8622]: closing ...\n[2011-05-03 04:18:26,047][INFO ][node                     ] [Anvil] {elasticsearch/0.16.0-SNAPSHOT/2011-03-12T19:52:17}[8622]: closed\nPROFILING: Search 4:ubuntu@ip-10-72-65-201:/var/assistly/elasticsearch/logs$ date\nTue May  3 05:14:56 UTC 2011\n```\n\nThe command line I used is the same command line generated by the service wrapper.\n\nNotice the exit status is 0, there are no errors logged, etc.  I assume this is to do with the fact that the JVM itself is the one taking care of the allocation?\n\nIf that's the case, is it possible to pass additional options to the JVM to tell it to complain loudly so that the service wrapper will pick it up?\n\nCheers,\nDavid.\n","closed_by":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"performed_via_github_app":null}