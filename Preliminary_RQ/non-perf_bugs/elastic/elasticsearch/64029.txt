{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/64029","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/64029/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/64029/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/64029/events","html_url":"https://github.com/elastic/elasticsearch/issues/64029","id":727046134,"node_id":"MDU6SXNzdWU3MjcwNDYxMzQ=","number":64029,"title":"Unable to Install ES7.9.2 as Windows Service with ES_JAVA_OPTS in env var","user":{"login":"dbakti7","id":12818002,"node_id":"MDQ6VXNlcjEyODE4MDAy","avatar_url":"https://avatars0.githubusercontent.com/u/12818002?v=4","gravatar_id":"","url":"https://api.github.com/users/dbakti7","html_url":"https://github.com/dbakti7","followers_url":"https://api.github.com/users/dbakti7/followers","following_url":"https://api.github.com/users/dbakti7/following{/other_user}","gists_url":"https://api.github.com/users/dbakti7/gists{/gist_id}","starred_url":"https://api.github.com/users/dbakti7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbakti7/subscriptions","organizations_url":"https://api.github.com/users/dbakti7/orgs","repos_url":"https://api.github.com/users/dbakti7/repos","events_url":"https://api.github.com/users/dbakti7/events{/privacy}","received_events_url":"https://api.github.com/users/dbakti7/received_events","type":"User","site_admin":false},"labels":[{"id":114977275,"node_id":"MDU6TGFiZWwxMTQ5NzcyNzU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Packaging","name":":Delivery/Packaging","color":"0e8a16","default":false,"description":"RPM and deb packaging, tar and zip archives, shell and batch scripts"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":{"login":"williamrandolph","id":3253644,"node_id":"MDQ6VXNlcjMyNTM2NDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/3253644?v=4","gravatar_id":"","url":"https://api.github.com/users/williamrandolph","html_url":"https://github.com/williamrandolph","followers_url":"https://api.github.com/users/williamrandolph/followers","following_url":"https://api.github.com/users/williamrandolph/following{/other_user}","gists_url":"https://api.github.com/users/williamrandolph/gists{/gist_id}","starred_url":"https://api.github.com/users/williamrandolph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/williamrandolph/subscriptions","organizations_url":"https://api.github.com/users/williamrandolph/orgs","repos_url":"https://api.github.com/users/williamrandolph/repos","events_url":"https://api.github.com/users/williamrandolph/events{/privacy}","received_events_url":"https://api.github.com/users/williamrandolph/received_events","type":"User","site_admin":false},"assignees":[{"login":"williamrandolph","id":3253644,"node_id":"MDQ6VXNlcjMyNTM2NDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/3253644?v=4","gravatar_id":"","url":"https://api.github.com/users/williamrandolph","html_url":"https://github.com/williamrandolph","followers_url":"https://api.github.com/users/williamrandolph/followers","following_url":"https://api.github.com/users/williamrandolph/following{/other_user}","gists_url":"https://api.github.com/users/williamrandolph/gists{/gist_id}","starred_url":"https://api.github.com/users/williamrandolph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/williamrandolph/subscriptions","organizations_url":"https://api.github.com/users/williamrandolph/orgs","repos_url":"https://api.github.com/users/williamrandolph/repos","events_url":"https://api.github.com/users/williamrandolph/events{/privacy}","received_events_url":"https://api.github.com/users/williamrandolph/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2020-10-22T04:58:31Z","updated_at":"2020-11-11T22:03:11Z","closed_at":"2020-10-30T18:13:18Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\nGitHub is reserved for bug reports and feature requests; it is not the place\r\nfor general questions. If you have a question or an unconfirmed bug , please\r\nvisit the [forums](https://discuss.elastic.co/c/elasticsearch).  Please also\r\ncheck your OS is [supported](https://www.elastic.co/support/matrix#show_os).\r\nIf it is not, the issue is likely to be closed.\r\n\r\nFor security vulnerabilities please only send reports to security@elastic.co.\r\nSee https://www.elastic.co/community/security for more information.\r\n\r\nPlease fill in the following details to help us reproduce the bug:\r\n-->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): ES 7.9.2\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`): Bundled JDK\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): Windows 10\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nUnable to install elasticsearch as windows service when we set Xms and Xmx via windows env var ES_JAVA_OPTS\r\ninstallation is okay if heap is set via jvm_options file.\r\n\r\n\r\n**Steps to reproduce**:\r\n\r\n\r\n1. Set ES_JAVA_OPTS env var with: `-Xms4g -Xmx4g`\r\n2. Try to install Elasticsearch as a Windows service with\r\n`elasticsearch-service.bat install`\r\n3. Installation failed due to semicolon being added in between the heap config.\r\n\r\n**Provide logs (if relevant)**:\r\n```\r\nD:\\ES7_test\\elasticsearch-7.9.2\\bin>echo %ES_JAVA_OPTS%\r\n-Xms4g -Xmx4g\r\n\r\nD:\\ES7_test\\elasticsearch-7.9.2\\bin>elasticsearch-service.bat install\r\nInstalling service      :  \"elasticsearch-service-x64\"\r\nUsing JAVA_HOME (64-bit):  \"\"D:\\ES7_test\\elasticsearch-7.9.2\\jdk\"\"\r\nException in thread \"main\" java.lang.RuntimeException: starting java failed with [1]\r\noutput:\r\n\r\nerror:\r\nInvalid initial heap size: -Xms4g;-Xmx4g\r\nError: Could not create the Java Virtual Machine.\r\nError: A fatal exception has occurred. Program will exit.\r\n        at org.elasticsearch.tools.launchers.JvmErgonomics.flagsFinal(JvmErgonomics.java:126)\r\n        at org.elasticsearch.tools.launchers.JvmErgonomics.finalJvmOptions(JvmErgonomics.java:88)\r\n        at org.elasticsearch.tools.launchers.JvmErgonomics.choose(JvmErgonomics.java:59)\r\n        at org.elasticsearch.tools.launchers.JvmOptionsParser.jvmOptions(JvmOptionsParser.java:137)\r\n        at org.elasticsearch.tools.launchers.JvmOptionsParser.main(JvmOptionsParser.java:95)\r\n```\r\n\r\n","closed_by":{"login":"williamrandolph","id":3253644,"node_id":"MDQ6VXNlcjMyNTM2NDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/3253644?v=4","gravatar_id":"","url":"https://api.github.com/users/williamrandolph","html_url":"https://github.com/williamrandolph","followers_url":"https://api.github.com/users/williamrandolph/followers","following_url":"https://api.github.com/users/williamrandolph/following{/other_user}","gists_url":"https://api.github.com/users/williamrandolph/gists{/gist_id}","starred_url":"https://api.github.com/users/williamrandolph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/williamrandolph/subscriptions","organizations_url":"https://api.github.com/users/williamrandolph/orgs","repos_url":"https://api.github.com/users/williamrandolph/repos","events_url":"https://api.github.com/users/williamrandolph/events{/privacy}","received_events_url":"https://api.github.com/users/williamrandolph/received_events","type":"User","site_admin":false},"performed_via_github_app":null}