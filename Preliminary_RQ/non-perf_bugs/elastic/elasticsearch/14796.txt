{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14796","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14796/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14796/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14796/events","html_url":"https://github.com/elastic/elasticsearch/issues/14796","id":117300051,"node_id":"MDU6SXNzdWUxMTczMDAwNTE=","number":14796,"title":"Unable to use dynamic mapping and patch_match with mapper-attachment plugin","user":{"login":"bdbogjoe","id":1301462,"node_id":"MDQ6VXNlcjEzMDE0NjI=","avatar_url":"https://avatars0.githubusercontent.com/u/1301462?v=4","gravatar_id":"","url":"https://api.github.com/users/bdbogjoe","html_url":"https://github.com/bdbogjoe","followers_url":"https://api.github.com/users/bdbogjoe/followers","following_url":"https://api.github.com/users/bdbogjoe/following{/other_user}","gists_url":"https://api.github.com/users/bdbogjoe/gists{/gist_id}","starred_url":"https://api.github.com/users/bdbogjoe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdbogjoe/subscriptions","organizations_url":"https://api.github.com/users/bdbogjoe/orgs","repos_url":"https://api.github.com/users/bdbogjoe/repos","events_url":"https://api.github.com/users/bdbogjoe/events{/privacy}","received_events_url":"https://api.github.com/users/bdbogjoe/received_events","type":"User","site_admin":false},"labels":[{"id":141145460,"node_id":"MDU6TGFiZWwxNDExNDU0NjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Mapping","name":":Search/Mapping","color":"0e8a16","default":false,"description":"How fields should be indexed"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2015-11-17T07:28:07Z","updated_at":"2018-02-13T20:49:24Z","closed_at":"2015-12-19T14:18:11Z","author_association":"NONE","active_lock_reason":null,"body":"here my mapping : \n\n```\nPUT my_index\n{\n  \"mappings\": {\n    \"my_type\": {\n      \"dynamic_templates\": [\n        {\n          \"attachment\": {\n            \"path_match\": \"*.my_attachment\",\n            \"match_mapping_type\": \"string\",\n            \"mapping\": {\n              \"type\": \"attachment\",\n              \"fields\": {\n                \"content_length\": {\n                  \"type\": \"integer\",\n                  \"store\": \"yes\"\n                },\n                \"content_type\": {\n                  \"type\": \"string\",\n                  \"store\": \"yes\"\n                },\n                \"date\": {\n                  \"type\": \"date\",\n                  \"store\": \"yes\"\n                },\n                \"name\": {\n                  \"type\": \"string\",\n                  \"store\": \"yes\"\n                },\n                \"author\": {\n                  \"type\": \"string\",\n                  \"store\": \"yes\"\n                },\n                \"title\": {\n                  \"type\": \"string\",\n                  \"store\": \"yes\"\n                },\n                \"keywords\": {\n                  \"type\": \"string\",\n                  \"store\": \"yes\"\n                },\n                \"language\": {\n                  \"type\": \"string\",\n                  \"store\": \"yes\"\n                },\n                \"content\": {\n                  \"type\": \"string\",\n                  \"term_vector\": \"with_positions_offsets\",\n                  \"store\": \"yes\"\n                }\n              }\n            }\n          }\n        }\n      ]\n    }\n  }\n}\n```\n\nwhen i try to put one document\n\n```\nPUT /my_index/my_type/my_id\n{\n  \"joe\": {\n    \"my_attachment\": \"IkdvZCBTYXZlIHRoZSBRdWVlbiIgKGFsdGVybmF0aXZlbHkgIkdvZCBTYXZlIHRoZSBLaW5nIg==\"\n  }\n}\n```\n\ni receive error : \n\n```\n{\n   \"error\": {\n      \"root_cause\": [\n         {\n            \"type\": \"mapper_parsing_exception\",\n            \"reason\": \"Field name [joe.my_attachment] cannot contain '.'\"\n         }\n      ],\n      \"type\": \"mapper_parsing_exception\",\n      \"reason\": \"Field name [joe.my_attachment] cannot contain '.'\"\n   },\n   \"status\": 400\n}\n```\n\nThe mapping works find if i don't use path_match see #14794\n","closed_by":{"login":"bdbogjoe","id":1301462,"node_id":"MDQ6VXNlcjEzMDE0NjI=","avatar_url":"https://avatars0.githubusercontent.com/u/1301462?v=4","gravatar_id":"","url":"https://api.github.com/users/bdbogjoe","html_url":"https://github.com/bdbogjoe","followers_url":"https://api.github.com/users/bdbogjoe/followers","following_url":"https://api.github.com/users/bdbogjoe/following{/other_user}","gists_url":"https://api.github.com/users/bdbogjoe/gists{/gist_id}","starred_url":"https://api.github.com/users/bdbogjoe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdbogjoe/subscriptions","organizations_url":"https://api.github.com/users/bdbogjoe/orgs","repos_url":"https://api.github.com/users/bdbogjoe/repos","events_url":"https://api.github.com/users/bdbogjoe/events{/privacy}","received_events_url":"https://api.github.com/users/bdbogjoe/received_events","type":"User","site_admin":false},"performed_via_github_app":null}