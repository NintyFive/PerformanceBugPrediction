[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/389441395","html_url":"https://github.com/elastic/elasticsearch/issues/30614#issuecomment-389441395","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30614","id":389441395,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTQ0MTM5NQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2018-05-16T08:38:47Z","updated_at":"2018-05-16T08:38:47Z","author_association":"MEMBER","body":"> Is this to be expected? Or is this an issue?\r\n\r\nYour recreation in 5.x gives different result (`appmies`) because this is a 6.x change, starting in 6.0 synonyms are analyzed with whatever tokenizer and token filters appear before it in the chain:\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/breaking_60_analysis_changes.html#_synonym_token_filter\r\nThis is an important change that makes sure that the synonym forms registered in the dictionary match the form of the tokens after the transformation of the previous filters. If you have a stemmer in your chain then all tokens should be stemmed otherwise you'll miss synonym hits and matches (what happens if you search for `appmies` directly). \r\nI see this behavior as an enhancement, you don't need to apply the filters to your synonyms manually and that simplifies the creation of synonym rules greatly. Can you explain why do you think it's an issue ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/389454815","html_url":"https://github.com/elastic/elasticsearch/issues/30614#issuecomment-389454815","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30614","id":389454815,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTQ1NDgxNQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-16T09:24:47Z","updated_at":"2018-05-16T09:24:47Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/389920444","html_url":"https://github.com/elastic/elasticsearch/issues/30614#issuecomment-389920444","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30614","id":389920444,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTkyMDQ0NA==","user":{"login":"byronvoorbach","id":4427161,"node_id":"MDQ6VXNlcjQ0MjcxNjE=","avatar_url":"https://avatars1.githubusercontent.com/u/4427161?v=4","gravatar_id":"","url":"https://api.github.com/users/byronvoorbach","html_url":"https://github.com/byronvoorbach","followers_url":"https://api.github.com/users/byronvoorbach/followers","following_url":"https://api.github.com/users/byronvoorbach/following{/other_user}","gists_url":"https://api.github.com/users/byronvoorbach/gists{/gist_id}","starred_url":"https://api.github.com/users/byronvoorbach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/byronvoorbach/subscriptions","organizations_url":"https://api.github.com/users/byronvoorbach/orgs","repos_url":"https://api.github.com/users/byronvoorbach/repos","events_url":"https://api.github.com/users/byronvoorbach/events{/privacy}","received_events_url":"https://api.github.com/users/byronvoorbach/received_events","type":"User","site_admin":false},"created_at":"2018-05-17T16:05:33Z","updated_at":"2018-05-17T16:05:58Z","author_association":"CONTRIBUTOR","body":"But `aapmies` is on the right-hand side & I'm only using `synonym_graph` during search-time. \r\nIf I have `aapmies` in my index, I will never match it. I get that you'd parse the tokens on the left-hand side, but with search-time synonyms I don't think you should stem the ones on the right side?\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/389924574","html_url":"https://github.com/elastic/elasticsearch/issues/30614#issuecomment-389924574","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30614","id":389924574,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTkyNDU3NA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2018-05-17T16:18:26Z","updated_at":"2018-05-17T16:18:26Z","author_association":"MEMBER","body":"> But aapmies is on the right-hand side & I'm only using synonym_graph during search-time.\r\nIf I have aapmies in my index, I will never match it.\r\n\r\nIsn't it the opposite ? If we don't apply stemming to `appmies` at query time (whether it comes from a synonym or is queried directly) then it will never match anything since stemming is also applied at index time ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/389938520","html_url":"https://github.com/elastic/elasticsearch/issues/30614#issuecomment-389938520","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30614","id":389938520,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTkzODUyMA==","user":{"login":"byronvoorbach","id":4427161,"node_id":"MDQ6VXNlcjQ0MjcxNjE=","avatar_url":"https://avatars1.githubusercontent.com/u/4427161?v=4","gravatar_id":"","url":"https://api.github.com/users/byronvoorbach","html_url":"https://github.com/byronvoorbach","followers_url":"https://api.github.com/users/byronvoorbach/followers","following_url":"https://api.github.com/users/byronvoorbach/following{/other_user}","gists_url":"https://api.github.com/users/byronvoorbach/gists{/gist_id}","starred_url":"https://api.github.com/users/byronvoorbach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/byronvoorbach/subscriptions","organizations_url":"https://api.github.com/users/byronvoorbach/orgs","repos_url":"https://api.github.com/users/byronvoorbach/repos","events_url":"https://api.github.com/users/byronvoorbach/events{/privacy}","received_events_url":"https://api.github.com/users/byronvoorbach/received_events","type":"User","site_admin":false},"created_at":"2018-05-17T17:03:30Z","updated_at":"2018-05-17T17:06:03Z","author_association":"CONTRIBUTOR","body":"But what if I don’t use stemming on index-time? It feels like I’m less in control now, since I was already able to do stemming by placing a stemming filter after my synonym filter.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/389941352","html_url":"https://github.com/elastic/elasticsearch/issues/30614#issuecomment-389941352","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30614","id":389941352,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTk0MTM1Mg==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2018-05-17T17:13:02Z","updated_at":"2018-05-17T17:13:02Z","author_association":"MEMBER","body":"> But what if I don’t use stemming on index-time?\r\n\r\nWhy would you do that ? Stemming is not like synonyms, if you apply it it should be at index **and** query time. Again I really see this behavior as an enhancement that simplifies things. What happens if you add a synonym output with uppercase characters or characters that are rewritten by a char filter ?Without this behavior you need to ensure that the synonym output matches the output that you index. \r\nSorry but I don't see a valid use case where this behavior is not wanted and without it you'd need to perform the transformation manually before setting your synonym rules.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/479395037","html_url":"https://github.com/elastic/elasticsearch/issues/30614#issuecomment-479395037","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30614","id":479395037,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3OTM5NTAzNw==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2019-04-03T08:37:58Z","updated_at":"2019-04-03T08:37:58Z","author_association":"CONTRIBUTOR","body":"Closing as we don't believe this to be an issue.  Please re-open if you feel there are still problems to be discussed.","performed_via_github_app":null}]