[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256788","html_url":"https://github.com/elastic/elasticsearch/issues/198#issuecomment-256788","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/198","id":256788,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Njc4OA==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-05-28T15:08:54Z","updated_at":"2010-05-28T15:08:54Z","author_association":"MEMBER","body":"Hey,\n\n  Very, very strange. Lets start with the second failures. Is there a chance that you get a long search requests or load that is higher than 5 minutes? The default timeout between a query phase and a fetch phase is 5 minutes (or controlled by setting the keep alive parameter).\n\nSecond, regarding the first problem. This is very very strange. I think your assumption is correct, and for some reason, requests got mixed up. I don't see where it can happen in elasticsearch, but I will investigate further. It must be in the HTTP layer, and thats pretty straightforward. It might also be on the http client side..., trying to think how best to nail down where and why this happens.... (well, it can also be in the logging layer :) )\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256792","html_url":"https://github.com/elastic/elasticsearch/issues/198#issuecomment-256792","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/198","id":256792,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Njc5Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2010-05-28T15:15:42Z","updated_at":"2010-05-28T15:15:42Z","author_association":"CONTRIBUTOR","body":"Re long search requests - I don't honestly know.  I haven't seen that happening, but my app times out requests after 15 seconds, then retries, so it may well be hidden.\n\nI'm certainly not seeing anything unusual regarding CPU or memory use in jvisualvm.\n\nI think you'll need to add some more logging to nail it down.  Also, this is v 0.7.1 - I haven't upgraded yet.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257108","html_url":"https://github.com/elastic/elasticsearch/issues/198#issuecomment-257108","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/198","id":257108,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NzEwOA==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-05-28T20:34:12Z","updated_at":"2010-05-28T20:34:12Z","author_association":"MEMBER","body":"When I said client side, I meant the perl http client, which might mix messages up, if that was not obvious :). I am trying to think of the best logging to add. I can generate a unique id for each rest request when it is received, and log the request, and then, log the response sent under that unique id, what do you think?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257423","html_url":"https://github.com/elastic/elasticsearch/issues/198#issuecomment-257423","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/198","id":257423,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NzQyMw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2010-05-29T08:50:54Z","updated_at":"2010-05-29T08:50:54Z","author_association":"CONTRIBUTOR","body":"I think it is highly unlikely that it is happening on the Perl side. I'm using a core module that has been stable for many years - something as obvious as this would have been noticed before.  Also, it is not an async request, so nothing to mix up there.\n\nRe logging - you can add that if you like, but i think you're probably looking in the wrong place.  The reason I posted the errors was that they happened at the same time as the bad results (i can't be certain that they were generated by the same request or not).  I think it is likelier that the problem is node communication getting mixed up, while retrieving results from the other shards.\n\nbut what do I know :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257593","html_url":"https://github.com/elastic/elasticsearch/issues/198#issuecomment-257593","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/198","id":257593,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NzU5Mw==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-05-29T14:09:39Z","updated_at":"2010-05-29T14:09:39Z","author_association":"MEMBER","body":"I agree with you, the perl side is probably not to blame. \n\nSo, some background. You execute a dfs query then fetch. Thats three phases, first, the dfs, that goes to all shards. Then, query, that goes to all shards with the dfs result. Last, the fetch, that goes to the relevant shards.\n\nA certain shard communication might have got messes up, which I am trying to understand if can happen. In your response (if you still have all of it) does it look like some of the response are correct, while others are wrong?\n\nIf the response looks like simply a response for a another query, then its more high level then that, if its a mixed result, with some good and some bad, then its a messed up specific shard communication in the search.\n\nWhen do you plan to upgrade to 0.8? It will be easier to help with that version.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257606","html_url":"https://github.com/elastic/elasticsearch/issues/198#issuecomment-257606","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/198","id":257606,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NzYwNg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2010-05-29T14:33:42Z","updated_at":"2010-05-29T14:33:42Z","author_association":"CONTRIBUTOR","body":"I don't have the full results any more, but looking at the above, the second hit matches the query correctly, but all the others (i think it was all) were from the wrong index.\n\nHopefully I'll be on 0.8 next weekend. It won't be this weekend.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257702","html_url":"https://github.com/elastic/elasticsearch/issues/198#issuecomment-257702","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/198","id":257702,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NzcwMg==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-05-29T17:04:58Z","updated_at":"2010-05-29T17:04:58Z","author_association":"MEMBER","body":"Yea, missed the second hit. Ok, I will look into this more try and see why this might happen. Ping me when you upgrade to 0.8.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/271664","html_url":"https://github.com/elastic/elasticsearch/issues/198#issuecomment-271664","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/198","id":271664,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTY2NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2010-06-11T09:11:55Z","updated_at":"2010-06-11T09:11:55Z","author_association":"CONTRIBUTOR","body":"Bad news, kimchy - i'm still getting this error on v 0.8\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/272350","html_url":"https://github.com/elastic/elasticsearch/issues/198#issuecomment-272350","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/198","id":272350,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjM1MA==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-06-11T19:57:32Z","updated_at":"2010-06-11T19:57:32Z","author_association":"MEMBER","body":"Do you still get the exceptions in the logs?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/272847","html_url":"https://github.com/elastic/elasticsearch/issues/198#issuecomment-272847","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/198","id":272847,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Mjg0Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2010-06-12T11:33:31Z","updated_at":"2010-06-12T11:33:31Z","author_association":"CONTRIBUTOR","body":"There are still exceptions in the logs, but the times don't coincide, so I'm not sure that they're related:\n\n```\n[02:20:53,165][DEBUG][action.search.type       ] [Fontanelle] [12798594] Failed to execute fetch phase\norg.elasticsearch.transport.RemoteTransportException: [Blue Bullet][inet[/192.168.10.41:9300]][search/phase/fetch/id]\nCaused by: org.elasticsearch.search.SearchContextMissingException: No search context found for id [12798594], timed out\n    at org.elasticsearch.search.SearchService.findContext(SearchService.java:274)\n    at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:257)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchFetchByIdTransportHandler.messageReceived(SearchServiceTransportAction.java:444)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchFetchByIdTransportHandler.messageReceived(SearchServiceTransportAction.java:435)\n    at org.elasticsearch.transport.netty.MessageChannelHandler$3.run(MessageChannelHandler.java:175)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\n[02:41:38,114][DEBUG][action.search.type       ] [Fontanelle] [6167654] Failed to execute fetch phase\norg.elasticsearch.search.SearchContextMissingException: No search context found for id [6167654], timed out\n    at org.elasticsearch.search.SearchService.findContext(SearchService.java:274)\n    at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:257)\n    at org.elasticsearch.search.action.SearchServiceTransportAction.sendExecuteFetch(SearchServiceTransportAction.java:309)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction.executeFetch(TransportSearchDfsQueryThenFetchAction.java:226)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction.access$700(TransportSearchDfsQueryThenFetchAction.java:64)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction$4.run(TransportSearchDfsQueryThenFetchAction.java:199)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\n[02:41:38,114][DEBUG][action.search.type       ] [Fontanelle] [6167652] Failed to execute fetch phase\norg.elasticsearch.search.SearchContextMissingException: No search context found for id [6167652], timed out\n    at org.elasticsearch.search.SearchService.findContext(SearchService.java:274)\n    at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:257)\n    at org.elasticsearch.search.action.SearchServiceTransportAction.sendExecuteFetch(SearchServiceTransportAction.java:309)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction.executeFetch(TransportSearchDfsQueryThenFetchAction.java:226)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction.access$700(TransportSearchDfsQueryThenFetchAction.java:64)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction$4.run(TransportSearchDfsQueryThenFetchAction.java:199)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\n[02:41:38,115][DEBUG][action.search.type       ] [Fontanelle] [6167653] Failed to execute fetch phase\norg.elasticsearch.search.SearchContextMissingException: No search context found for id [6167653], timed out\n    at org.elasticsearch.search.SearchService.findContext(SearchService.java:274)\n    at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:257)\n    at org.elasticsearch.search.action.SearchServiceTransportAction.sendExecuteFetch(SearchServiceTransportAction.java:309)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction.executeFetch(TransportSearchDfsQueryThenFetchAction.java:226)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction.access$700(TransportSearchDfsQueryThenFetchAction.java:64)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction$4.run(TransportSearchDfsQueryThenFetchAction.java:199)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\n[02:41:38,160][DEBUG][action.search.type       ] [Fontanelle] [12820997] Failed to execute fetch phase\norg.elasticsearch.transport.RemoteTransportException: [Blue Bullet][inet[/192.168.10.41:9300]][search/phase/fetch/id]\nCaused by: org.elasticsearch.search.SearchContextMissingException: No search context found for id [12820997], timed out\n    at org.elasticsearch.search.SearchService.findContext(SearchService.java:274)\n    at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:257)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchFetchByIdTransportHandler.messageReceived(SearchServiceTransportAction.java:444)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchFetchByIdTransportHandler.messageReceived(SearchServiceTransportAction.java:435)\n    at org.elasticsearch.transport.netty.MessageChannelHandler$3.run(MessageChannelHandler.java:175)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\n[03:38:57,733][DEBUG][action.search.type       ] [Fontanelle] [12872042] Failed to execute fetch phase\norg.elasticsearch.transport.RemoteTransportException: [Blue Bullet][inet[/192.168.10.41:9300]][search/phase/fetch/id]\nCaused by: java.lang.NullPointerException\n[03:40:05,941][DEBUG][action.search.type       ] [Fontanelle] [6193567] Failed to execute query phase\norg.elasticsearch.search.query.QueryPhaseExecutionException: [iannounce_object_1275333493][0]: query[filtered((name:\"pamela goody\"~7 | filtered(short_text:\"pamela goody\"~7^1.3)->FilterCacheFilterWrapper(org.elasticsearch.util.lucene.search.TermFilter@3e3f4f7) | (_all:pamela _all:goody))~0.7)->FilterCacheFilterWrapper(BooleanFilter( +FilterCacheFilterWrapper(org.elasticsearch.util.lucene.search.TermFilter@33d4352b) +FilterCacheFilterWrapper(org.elasticsearch.util.lucene.search.TermFilter@3a1bb115) +FilterCacheFilterWrapper(org.elasticsearch.util.lucene.search.TermFilter@40ea8cf6) +FilterCacheFilterWrapper(parent_id:[1 TO 1])))],from[0],size[300],sort[<score>]: Query Failed []\n    at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:103)\n    at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:193)\n    at org.elasticsearch.search.action.SearchServiceTransportAction.sendExecuteQuery(SearchServiceTransportAction.java:159)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction.executeQuery(TransportSearchDfsQueryThenFetchAction.java:141)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction.access$200(TransportSearchDfsQueryThenFetchAction.java:64)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction$1.run(TransportSearchDfsQueryThenFetchAction.java:114)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\nCaused by: java.lang.IllegalArgumentException: df for term pamela not available\n    at org.elasticsearch.search.dfs.CachedDfSource.docFreq(CachedDfSource.java:51)\n    at org.apache.lucene.search.Similarity.idfExplain(Similarity.java:769)\n    at org.apache.lucene.search.PhraseQuery$PhraseWeight.<init>(PhraseQuery.java:122)\n    at org.apache.lucene.search.PhraseQuery.createWeight(PhraseQuery.java:264)\n    at org.apache.lucene.search.DisjunctionMaxQuery$DisjunctionMaxWeight.<init>(DisjunctionMaxQuery.java:107)\n    at org.apache.lucene.search.DisjunctionMaxQuery.createWeight(DisjunctionMaxQuery.java:184)\n    at org.apache.lucene.search.FilteredQuery.createWeight(FilteredQuery.java:63)\n    at org.apache.lucene.search.FilteredQuery.createWeight(FilteredQuery.java:63)\n    at org.apache.lucene.search.Query.weight(Query.java:101)\n    at org.elasticsearch.search.internal.ContextIndexSearcher.createWeight(ContextIndexSearcher.java:78)\n    at org.apache.lucene.search.Searcher.search(Searcher.java:49)\n    at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:97)\n    ... 8 more\n[03:52:03,125][DEBUG][action.search.type       ] [Fontanelle] [12881061] Failed to execute fetch phase\norg.elasticsearch.transport.RemoteTransportException: [Blue Bullet][inet[/192.168.10.41:9300]][search/phase/fetch/id]\nCaused by: java.lang.ArrayIndexOutOfBoundsException\n[03:52:03,142][DEBUG][action.search.type       ] [Fontanelle] [12881063] Failed to execute fetch phase\norg.elasticsearch.transport.RemoteTransportException: [Blue Bullet][inet[/192.168.10.41:9300]][search/phase/fetch/id]\nCaused by: org.elasticsearch.search.SearchContextMissingException: No search context found for id [12881063], timed out\n    at org.elasticsearch.search.SearchService.findContext(SearchService.java:274)\n    at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:257)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchFetchByIdTransportHandler.messageReceived(SearchServiceTransportAction.java:444)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchFetchByIdTransportHandler.messageReceived(SearchServiceTransportAction.java:435)\n    at org.elasticsearch.transport.netty.MessageChannelHandler$3.run(MessageChannelHandler.java:175)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\n[13:15:55,961][DEBUG][index.gateway            ] [Fontanelle][iannounce_object_1275333493][3] Snapshotting on close ...\n[13:15:56,470][DEBUG][index.shard.recovery     ] [Fontanelle][iannounce_object_1275333493][3] Starting recovery from [Blue Bullet][b6b87b7e-89da-4644-b17a-2fb638b16041][inet[/192.168.10.41:9300]]\n[13:16:50,518][DEBUG][index.shard.recovery     ] [Fontanelle][iannounce_object_1275333493][3] Recovery completed from [Blue Bullet][b6b87b7e-89da-4644-b17a-2fb638b16041][inet[/192.168.10.41:9300]], took[54s], throttling_wait [0s]\n   Phase1: recovered [27] files with total size of [1.2g], took [53.5s], throttling_wait [0s]\n   Phase2: recovered [1644] transaction log operations, took [390ms]\n   Phase3: recovered [0] transaction log operations, took [65ms]\n[22:34:33,612][DEBUG][action.search.type       ] [Fontanelle] [14161052] Failed to execute query phase\norg.elasticsearch.transport.RemoteTransportException: [Blue Bullet][inet[/192.168.10.41:9300]][search/phase/query/id]\nCaused by: org.elasticsearch.search.SearchContextMissingException: No search context found for id [14161052], timed out\n    at org.elasticsearch.search.SearchService.findContext(SearchService.java:274)\n    at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:185)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryByIdTransportHandler.messageReceived(SearchServiceTransportAction.java:388)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryByIdTransportHandler.messageReceived(SearchServiceTransportAction.java:379)\n    at org.elasticsearch.transport.netty.MessageChannelHandler$3.run(MessageChannelHandler.java:175)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\n[22:34:33,630][DEBUG][action.search.type       ] [Fontanelle] [6837580] Failed to execute fetch phase\norg.elasticsearch.search.SearchContextMissingException: No search context found for id [6837580], timed out\n    at org.elasticsearch.search.SearchService.findContext(SearchService.java:274)\n    at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:257)\n    at org.elasticsearch.search.action.SearchServiceTransportAction.sendExecuteFetch(SearchServiceTransportAction.java:309)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction.executeFetch(TransportSearchDfsQueryThenFetchAction.java:226)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction.access$700(TransportSearchDfsQueryThenFetchAction.java:64)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction$4.run(TransportSearchDfsQueryThenFetchAction.java:199)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\n[22:34:33,630][DEBUG][action.search.type       ] [Fontanelle] [6837581] Failed to execute fetch phase\norg.elasticsearch.search.SearchContextMissingException: No search context found for id [6837581], timed out\n    at org.elasticsearch.search.SearchService.findContext(SearchService.java:274)\n    at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:257)\n    at org.elasticsearch.search.action.SearchServiceTransportAction.sendExecuteFetch(SearchServiceTransportAction.java:309)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction.executeFetch(TransportSearchDfsQueryThenFetchAction.java:226)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction.access$700(TransportSearchDfsQueryThenFetchAction.java:64)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction$4.run(TransportSearchDfsQueryThenFetchAction.java:199)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\n[22:34:33,631][DEBUG][action.search.type       ] [Fontanelle] [6837579] Failed to execute fetch phase\norg.elasticsearch.search.SearchContextMissingException: No search context found for id [6837579], timed out\n    at org.elasticsearch.search.SearchService.findContext(SearchService.java:274)\n    at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:257)\n    at org.elasticsearch.search.action.SearchServiceTransportAction.sendExecuteFetch(SearchServiceTransportAction.java:309)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction.executeFetch(TransportSearchDfsQueryThenFetchAction.java:226)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction.access$700(TransportSearchDfsQueryThenFetchAction.java:64)\n    at org.elasticsearch.action.search.type.TransportSearchDfsQueryThenFetchAction$AsyncAction$4.run(TransportSearchDfsQueryThenFetchAction.java:199)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\n[22:34:33,720][DEBUG][action.search.type       ] [Fontanelle] [14161053] Failed to execute fetch phase\norg.elasticsearch.transport.RemoteTransportException: [Blue Bullet][inet[/192.168.10.41:9300]][search/phase/fetch/id]\nCaused by: org.elasticsearch.search.SearchContextMissingException: No search context found for id [14161053], timed out\n    at org.elasticsearch.search.SearchService.findContext(SearchService.java:274)\n    at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:257)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchFetchByIdTransportHandler.messageReceived(SearchServiceTransportAction.java:444)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchFetchByIdTransportHandler.messageReceived(SearchServiceTransportAction.java:435)\n    at org.elasticsearch.transport.netty.MessageChannelHandler$3.run(MessageChannelHandler.java:175)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\n[22:34:33,722][DEBUG][action.search.type       ] [Fontanelle] [14161054] Failed to execute fetch phase\norg.elasticsearch.transport.RemoteTransportException: [Blue Bullet][inet[/192.168.10.41:9300]][search/phase/fetch/id]\nCaused by: org.elasticsearch.search.SearchContextMissingException: No search context found for id [14161054], timed out\n    at org.elasticsearch.search.SearchService.findContext(SearchService.java:274)\n    at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:257)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchFetchByIdTransportHandler.messageReceived(SearchServiceTransportAction.java:444)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchFetchByIdTransportHandler.messageReceived(SearchServiceTransportAction.java:435)\n    at org.elasticsearch.transport.netty.MessageChannelHandler$3.run(MessageChannelHandler.java:175)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1210291","html_url":"https://github.com/elastic/elasticsearch/issues/198#issuecomment-1210291","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/198","id":1210291,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMTAyOTE=","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2011-05-20T14:26:04Z","updated_at":"2011-05-20T14:26:04Z","author_association":"CONTRIBUTOR","body":"In 0.16.2, an occurrence of this problem (ie ES returning the wrong results) coincided with this error in the logs:\n\nCaught exception while handling client http traffic, closing connection\njava.lang.IllegalStateException: cannot send more responses than requests\n\nFull logs https://gist.github.com/85a707a6edf8e8534b4a\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1665551","html_url":"https://github.com/elastic/elasticsearch/issues/198#issuecomment-1665551","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/198","id":1665551,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjU1NTE=","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2011-07-27T16:59:15Z","updated_at":"2011-07-27T16:59:15Z","author_association":"CONTRIBUTOR","body":"Fixed in issue #1152\n","performed_via_github_app":null}]