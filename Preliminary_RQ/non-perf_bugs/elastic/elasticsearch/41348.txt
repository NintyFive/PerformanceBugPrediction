{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/41348","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41348/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41348/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41348/events","html_url":"https://github.com/elastic/elasticsearch/issues/41348","id":434807890,"node_id":"MDU6SXNzdWU0MzQ4MDc4OTA=","number":41348,"title":"Stack Security Tutorial Documentation Improvement","user":{"login":"nerophon","id":4341829,"node_id":"MDQ6VXNlcjQzNDE4Mjk=","avatar_url":"https://avatars1.githubusercontent.com/u/4341829?v=4","gravatar_id":"","url":"https://api.github.com/users/nerophon","html_url":"https://github.com/nerophon","followers_url":"https://api.github.com/users/nerophon/followers","following_url":"https://api.github.com/users/nerophon/following{/other_user}","gists_url":"https://api.github.com/users/nerophon/gists{/gist_id}","starred_url":"https://api.github.com/users/nerophon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nerophon/subscriptions","organizations_url":"https://api.github.com/users/nerophon/orgs","repos_url":"https://api.github.com/users/nerophon/repos","events_url":"https://api.github.com/users/nerophon/events{/privacy}","received_events_url":"https://api.github.com/users/nerophon/received_events","type":"User","site_admin":false},"labels":[{"id":912841668,"node_id":"MDU6TGFiZWw5MTI4NDE2Njg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/License","name":":Security/License","color":"0e8a16","default":false,"description":"License functionality for commercial features"},{"id":912838655,"node_id":"MDU6TGFiZWw5MTI4Mzg2NTU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/Network","name":":Security/Network","color":"0e8a16","default":false,"description":"SSL/TLS, Security for NIO/Netty"},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"}],"state":"closed","locked":false,"assignee":{"login":"lcawl","id":26471269,"node_id":"MDQ6VXNlcjI2NDcxMjY5","avatar_url":"https://avatars0.githubusercontent.com/u/26471269?v=4","gravatar_id":"","url":"https://api.github.com/users/lcawl","html_url":"https://github.com/lcawl","followers_url":"https://api.github.com/users/lcawl/followers","following_url":"https://api.github.com/users/lcawl/following{/other_user}","gists_url":"https://api.github.com/users/lcawl/gists{/gist_id}","starred_url":"https://api.github.com/users/lcawl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lcawl/subscriptions","organizations_url":"https://api.github.com/users/lcawl/orgs","repos_url":"https://api.github.com/users/lcawl/repos","events_url":"https://api.github.com/users/lcawl/events{/privacy}","received_events_url":"https://api.github.com/users/lcawl/received_events","type":"User","site_admin":false},"assignees":[{"login":"lcawl","id":26471269,"node_id":"MDQ6VXNlcjI2NDcxMjY5","avatar_url":"https://avatars0.githubusercontent.com/u/26471269?v=4","gravatar_id":"","url":"https://api.github.com/users/lcawl","html_url":"https://github.com/lcawl","followers_url":"https://api.github.com/users/lcawl/followers","following_url":"https://api.github.com/users/lcawl/following{/other_user}","gists_url":"https://api.github.com/users/lcawl/gists{/gist_id}","starred_url":"https://api.github.com/users/lcawl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lcawl/subscriptions","organizations_url":"https://api.github.com/users/lcawl/orgs","repos_url":"https://api.github.com/users/lcawl/repos","events_url":"https://api.github.com/users/lcawl/events{/privacy}","received_events_url":"https://api.github.com/users/lcawl/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2019-04-18T14:44:33Z","updated_at":"2019-10-12T01:36:53Z","closed_at":"2019-10-12T01:36:53Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`): 7.0.0\r\n**JVM version** (`java -version`): 1.8\r\n**OS version** (`uname -a` if on a Unix-like system): OS X 10.14.3\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nThe stack security tutorial documentation is here:\r\nhttps://www.elastic.co/guide/en/elastic-stack-overview/current/security-getting-started.html\r\n\r\nExperimenting with this process on a fresh install, I discovered that if one uses a platinum license instead of a trial license (one of the earliest steps), the tutorial can no longer be followed because Elasticsearch refuses to start properly without TLS. In particular, this causes it to become impossible to run the setup passwords utility.\r\n\r\nIt also makes it impossible to follow the stack TLS tutorial (which might be a reasonable thing for a user to attempt at given the error mentions TLS). That tutorial involves multiple nodes and has as a prerequisite that security already be setup and working, including initial passwords being generated.\r\n\r\nIt is of course fully possible to generate the TLS certificates for the first node, and configure it to use them, according to instructions elsewhere. However, in terms of the tutorials, this deviation prevents following them further.\r\n\r\nIt might be an idea to rethink the order in which the steps are run, perhaps even going so far as to ditch the separation between the two tutorials and include TLS setup early on. This would permit platinum license holders to participate, should they feel uncomfortable using a trial license. I have experienced issues in the past when moving from the trial license to the platinum license, particularly around TLS. So I advocate early exposure. Moreover I think even non-platinum users should be getting to grips with TLS; you can't really have a secure cluster without it!","closed_by":{"login":"debadair","id":362578,"node_id":"MDQ6VXNlcjM2MjU3OA==","avatar_url":"https://avatars1.githubusercontent.com/u/362578?v=4","gravatar_id":"","url":"https://api.github.com/users/debadair","html_url":"https://github.com/debadair","followers_url":"https://api.github.com/users/debadair/followers","following_url":"https://api.github.com/users/debadair/following{/other_user}","gists_url":"https://api.github.com/users/debadair/gists{/gist_id}","starred_url":"https://api.github.com/users/debadair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/debadair/subscriptions","organizations_url":"https://api.github.com/users/debadair/orgs","repos_url":"https://api.github.com/users/debadair/repos","events_url":"https://api.github.com/users/debadair/events{/privacy}","received_events_url":"https://api.github.com/users/debadair/received_events","type":"User","site_admin":false},"performed_via_github_app":null}