[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401287494","html_url":"https://github.com/elastic/elasticsearch/issues/31668#issuecomment-401287494","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31668","id":401287494,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTI4NzQ5NA==","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2018-06-29T08:33:01Z","updated_at":"2018-06-29T08:33:01Z","author_association":"MEMBER","body":"is this reproducible all the time you invoke the plugin installation? I just tried with a 6.2.3 installation and it worked, under osx:\r\n\r\n```\r\n bin/elasticsearch-plugin install repository-s3 --verbose\r\nChecking if url exists: https://artifacts.elastic.co/downloads/elasticsearch-plugins/repository-s3/repository-s3-darwin-x86_64-6.2.3.zip\r\n-> Downloading repository-s3 from elastic\r\nRetrieving zip from https://artifacts.elastic.co/downloads/elasticsearch-plugins/repository-s3/repository-s3-6.2.3.zip\r\n[=================================================] 100%\r\n- Plugin information:\r\nName: repository-s3\r\nDescription: The S3 repository plugin adds S3 repositories\r\nVersion: 6.2.3\r\nNative Controller: false\r\nRequires Keystore: false\r\nExtended Plugins: []\r\n * Classname: org.elasticsearch.repositories.s3.S3RepositoryPlugin\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@     WARNING: plugin requires additional permissions     @\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n* java.lang.RuntimePermission accessDeclaredMembers\r\n* java.lang.RuntimePermission getClassLoader\r\n* java.lang.reflect.ReflectPermission suppressAccessChecks\r\n* java.net.SocketPermission * connect,resolve\r\nSee http://docs.oracle.com/javase/8/docs/technotes/guides/security/permissions.html\r\nfor descriptions of what these permissions allow and the associated risks.\r\n\r\nContinue with installation? [y/N]y\r\n-> Installed repository-s3\r\n```\r\n\r\nI also tried this with a centos vagrant box\r\n\r\n```\r\n[root@localhost elasticsearch-6.2.3]# cat /etc/redhat-release\r\nCentOS Linux release 7.5.1804 (Core)\r\n\r\n[root@localhost elasticsearch-6.2.3]# bin/elasticsearch-plugin install repository-s3 --verbose\r\nChecking if url exists: https://artifacts.elastic.co/downloads/elasticsearch-plugins/repository-s3/repository-s3-linux-x86_64-6.2.3.zip\r\n-> Downloading repository-s3 from elastic\r\nRetrieving zip from https://artifacts.elastic.co/downloads/elasticsearch-plugins/repository-s3/repository-s3-6.2.3.zip\r\n[=================================================] 100%\r\n```\r\n\r\nAre you using a proxy or do you have a direct connection?\r\n\r\nAlso, it looks as if you aborted the plugin installation command hitting ctrl+C, did something get stuck?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401287546","html_url":"https://github.com/elastic/elasticsearch/issues/31668#issuecomment-401287546","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31668","id":401287546,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTI4NzU0Ng==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-06-29T08:33:13Z","updated_at":"2018-06-29T08:33:13Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401426935","html_url":"https://github.com/elastic/elasticsearch/issues/31668#issuecomment-401426935","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31668","id":401426935,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTQyNjkzNQ==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2018-06-29T17:50:53Z","updated_at":"2018-06-29T17:51:38Z","author_association":"NONE","body":"This is taken from your _centos vagrant box_ code block\r\n\r\n`Checking if url exists: https://artifacts.elastic.co/downloads/elasticsearch-plugins/repository-s3/repository-s3-linux-x86_64-6.2.3.zip\r\n-> Downloading repository-s3 from elastic\r\nRetrieving zip from https://artifacts.elastic.co/downloads/elasticsearch-plugins/repository-s3/repository-s3-6.2.3.zip`\r\n\r\nIf you look the URLs are actually different.  The check shows _repository-s3-linux-x86_64-6.2.3.zip_ but the retrieve shows _repository-s3-6.2.3.zip_","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401999833","html_url":"https://github.com/elastic/elasticsearch/issues/31668#issuecomment-401999833","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31668","id":401999833,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTk5OTgzMw==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2018-07-03T03:09:10Z","updated_at":"2018-07-03T03:10:14Z","author_association":"NONE","body":"Any update on this?  I _am_ behind a proxy, but I can wget the correct file path from behind the proxy no problem.  So I don't know if it's a redirect problem somewhere, or...?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402004467","html_url":"https://github.com/elastic/elasticsearch/issues/31668#issuecomment-402004467","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31668","id":402004467,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjAwNDQ2Nw==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2018-07-03T03:45:14Z","updated_at":"2018-07-03T03:45:14Z","author_association":"CONTRIBUTOR","body":"I don't see any bug here, so I'm going to close this issue (with an explanation of what's going on below).\r\n\r\nIf you would like to continue the discusison, or need any other assistance, please ask on our  [discuss forum](https://discuss.elastic.co/c/elasticsearch) where we can provide better support. Those forums are designed to support the kinds of conversations that are necessary for this sort of troubleshooting and problem diagnosis.\r\n\r\nYou need to tell the plugin command to make use of your proxy.\r\nPlease read https://docs.oracle.com/javase/8/docs/api/java/net/doc-files/net-properties.html#Proxies for the options, but it may be as simple as running\r\n```\r\nES_JAVA_OPTS=\"-Djava.net.useSystemProxies=true\" /usr/share/elasticsearch/bin/elasticsearch-plugin install repository-s3\r\n```\r\nOr, depending on your system configuration, you may need to explicitly set `https.proxyHost` and `https.proxyPort` in `ES_JAVA_OPTS`\r\n\r\nYour screenshot clearly shows that you had to kill (`^C`) the plugin install because it was hanging while trying to check whether a URL exists. That's because it doesn't know about the proxy, so it's trying to make a direct connection, but isn't able to. It should eventually time out if you leave it.\r\n\r\n> `wget https://artifacts.elastic.co/downloads/elasticsearch-plugins/repository-s3/repository-s3-linux-x86_64-6.2.3.zip` should throw 404\r\n\r\nThis correct. Your `wget` is obviously configured to use the proxy, so it can resolve that URL and determine that it is has a 404 response. The plugin install process will also get a 404 once it can get through the proxy.\r\n\r\nThen when the plugin install determines that there isn't a platform specific plugin for repository-s3 it will then look for the platform independent one:\r\n\r\n> `wget https://artifacts.elastic.co/downloads/elasticsearch-plugins/repository-s3/repository-s3-6.2.3.zip`\r\n\r\nThis is what the plugin install command will download and install once it can get out to the network.\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402005540","html_url":"https://github.com/elastic/elasticsearch/issues/31668#issuecomment-402005540","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31668","id":402005540,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjAwNTU0MA==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2018-07-03T03:53:39Z","updated_at":"2018-07-03T03:53:39Z","author_association":"NONE","body":"I'm sure you're right.  I was _assuming_ that with my proxies set in the current shell, as opposed to the java service, that ES would work and obviously this is an incorrect assumption.  Sorry for wasting your time and I appreciate the prompt response :-)","performed_via_github_app":null}]