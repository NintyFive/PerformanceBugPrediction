{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/49147","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49147/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49147/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49147/events","html_url":"https://github.com/elastic/elasticsearch/issues/49147","id":523398461,"node_id":"MDU6SXNzdWU1MjMzOTg0NjE=","number":49147,"title":"ml/get_datafeed_stats/Test get stats for started datafeed contains timing stats CI failures","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"assignees":[{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2019-11-15T10:49:50Z","updated_at":"2019-11-19T12:38:32Z","closed_at":"2019-11-19T12:38:32Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"This failed today in 7.5 intake with : \r\n```\r\norg.elasticsearch.xpack.test.rest.XPackRestIT > test {p0=ml/get_datafeed_stats/Test get stats for started datafeed contains timing stats} FAILED\r\n--\r\njava.lang.AssertionError: Failure at [ml/get_datafeed_stats:186]: datafeeds.0.timing_stats.search_count didn't match expected value:\r\ndatafeeds.0.timing_stats.search_count: expected Integer [0] but was Integer [1]\r\nÂ \r\nCaused by:\r\njava.lang.AssertionError: datafeeds.0.timing_stats.search_count didn't match expected value:\r\ndatafeeds.0.timing_stats.search_count: expected Integer [0] but was Integer [1]\r\n```\r\n\r\n```\r\n[2019-11-15T07:33:34,003][INFO ][o.e.x.t.r.XPackRestIT    ] [test] Stash dump on test failure [{\r\n  \"stash\" : {\r\n    \"body\" : {\r\n      \"count\" : 1,\r\n      \"datafeeds\" : [\r\n        {\r\n          \"datafeed_id\" : \"datafeed-1\",\r\n          \"state\" : \"started\",\r\n          \"node\" : {\r\n            \"id\" : \"ury_dGfgTrWQHwSdwF15yA\",\r\n            \"name\" : \"integTest-0\",\r\n            \"ephemeral_id\" : \"l9Jj-4fqRvOua2aPOlVnXw\",\r\n            \"transport_address\" : \"127.0.0.1:34871\",\r\n            \"attributes\" : {\r\n              \"ml.machine_memory\" : \"101371891712\",\r\n              \"ml.max_open_jobs\" : \"20\"\r\n            }\r\n          },\r\n          \"assignment_explanation\" : \"\",\r\n          \"timing_stats\" : {\r\n            \"job_id\" : \"get-datafeed-stats-1\",\r\n            \"search_count\" : 1,\r\n            \"bucket_count\" : 0,\r\n            \"total_search_time_ms\" : 1.0,\r\n            \"exponential_average_search_time_per_hour_ms\" : 1.0\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}]\r\n```\r\n\r\nThis has failed once in a while with this Assertion Error since October 15th: https://build-stats.elastic.co/app/kibana#/discover?_g=(refreshInterval:(pause:!t,value:0),time:(from:now-60d,mode:quick,to:now))&_a=(columns:!(_source),index:e58bf320-7efd-11e8-bf69-63c8ef516157,interval:auto,query:(language:lucene,query:'%22get_datafeed_stats%2FTest%20get%20stats%20for%20started%20datafeed%20contains%20timing%20stats%22'),sort:!(time,desc))","closed_by":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"performed_via_github_app":null}