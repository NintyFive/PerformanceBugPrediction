{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/12121","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12121/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12121/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12121/events","html_url":"https://github.com/elastic/elasticsearch/issues/12121","id":93727661,"node_id":"MDU6SXNzdWU5MzcyNzY2MQ==","number":12121,"title":"sort by script_file using java client","user":{"login":"mouzt","id":1528204,"node_id":"MDQ6VXNlcjE1MjgyMDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1528204?v=4","gravatar_id":"","url":"https://api.github.com/users/mouzt","html_url":"https://github.com/mouzt","followers_url":"https://api.github.com/users/mouzt/followers","following_url":"https://api.github.com/users/mouzt/following{/other_user}","gists_url":"https://api.github.com/users/mouzt/gists{/gist_id}","starred_url":"https://api.github.com/users/mouzt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouzt/subscriptions","organizations_url":"https://api.github.com/users/mouzt/orgs","repos_url":"https://api.github.com/users/mouzt/repos","events_url":"https://api.github.com/users/mouzt/events{/privacy}","received_events_url":"https://api.github.com/users/mouzt/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-07-08T08:07:21Z","updated_at":"2015-07-08T09:07:20Z","closed_at":"2015-07-08T09:07:19Z","author_association":"NONE","active_lock_reason":null,"body":"I can use script_file query.\n\n``` json\n{\n     \"sort\" : {\n     \"_script\" : {\n         \"script_file\" : \"stationdistance\",\n             \"lang\" : \"javascript\",\n             \"type\" : \"number\",\n             \"params\" : {\n                 \"lat\" : 39.915631,\n                 \"lon\" : 116.581696\n             },\n             \"order\" : \"asc\"\n         }\n     }\n }\n```\n\nI got correct result,In this way.\n\nWhen using java client, It have errors. :\n\n``` java\n ScriptSortBuilder stationSort = SortBuilders.scriptSort(\"stationdistance\", \"number\").setParams(depParams)\n                    .order(SortOrder.ASC);\n            SearchResponse searchResponse = client.prepareSearch(index)\n                    .setTypes(type)\n                    .setQuery(queryBuilder)\n                    .addSort(stationSort)\n                    .setSize(size)\n                    .execute().actionGet();\n\n```\n\nit has a exception : \n\n``` java\nScriptException[scripts of type [inline], operation [search] and lang [groovy] are disabled]; \n```\n\nIn java, how I use script_file? I can not find the api supported script_file\n\nThank you for your help.\nBest regards,\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}