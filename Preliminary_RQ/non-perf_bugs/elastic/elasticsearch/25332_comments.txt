[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/310044803","html_url":"https://github.com/elastic/elasticsearch/issues/25332#issuecomment-310044803","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25332","id":310044803,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDA0NDgwMw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-06-21T11:04:36Z","updated_at":"2017-06-21T11:04:36Z","author_association":"CONTRIBUTOR","body":"This is a feature we have been wondering how to expose, it's a bit tricky.\r\n\r\n> the efficiency of updating in-place is unaffected by the size of the documents that are updated\r\n\r\nThis is correct, however it depends on the number of docs of the segment that contains the updated doc, since all values for that segment need to be rewritten. So doc-values updates are no silver bullet. This is quite a complicated trade-off actually.\r\n\r\n> only when the fields to be updated meet these three conditions: are non-indexed (indexed=\"false\") [...]\r\n\r\nIt is quite an uncommon case to have fields that have doc values but are not indexed. Not only because fields are indexed by default, but also because one you aggregate a field, the next step is often to filter documents that match a particular bucket.\r\n\r\nAlso Elasticsearch makes this feature more tricky to expose due to the `_source` field. The update of doc-values updates would mean that `_source` and doc values could go out of sync.\r\n\r\nI'm curious on what fields you want to use this feature?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/310298779","html_url":"https://github.com/elastic/elasticsearch/issues/25332#issuecomment-310298779","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25332","id":310298779,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDI5ODc3OQ==","user":{"login":"makeyang","id":13898618,"node_id":"MDQ6VXNlcjEzODk4NjE4","avatar_url":"https://avatars2.githubusercontent.com/u/13898618?v=4","gravatar_id":"","url":"https://api.github.com/users/makeyang","html_url":"https://github.com/makeyang","followers_url":"https://api.github.com/users/makeyang/followers","following_url":"https://api.github.com/users/makeyang/following{/other_user}","gists_url":"https://api.github.com/users/makeyang/gists{/gist_id}","starred_url":"https://api.github.com/users/makeyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/makeyang/subscriptions","organizations_url":"https://api.github.com/users/makeyang/orgs","repos_url":"https://api.github.com/users/makeyang/repos","events_url":"https://api.github.com/users/makeyang/events{/privacy}","received_events_url":"https://api.github.com/users/makeyang/received_events","type":"User","site_admin":false},"created_at":"2017-06-22T07:26:31Z","updated_at":"2017-06-22T07:26:31Z","author_association":"CONTRIBUTOR","body":"@jpountz \r\nIt is quite an uncommon case to have fields that have doc values but are not indexed. \r\nhere is the thing: in the database fields, there is a query optimizer sitting there to rewrite query based on cost. if one index is poorly selective, then the execution plan will go throgh the table scan rather than using index. \r\nactually I borrowed this idea when using elasticsearch: my use case is I have to search some products in e-commerce business with certain price range. but the price is update very frequently and it is poorly selective. so yes, I don't index it, yes I have to update it, yes I have to use it to post filter out results. And all these yes combined together, we do need this in place update feature. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312829411","html_url":"https://github.com/elastic/elasticsearch/issues/25332#issuecomment-312829411","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25332","id":312829411,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjgyOTQxMQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-07-04T09:24:11Z","updated_at":"2017-07-04T09:24:11Z","author_association":"CONTRIBUTOR","body":"Thanks for the explanation. This is one of the use-cases that would make sense for this feature. But it still remains pretty tricky to expose and use right. I'm adding the `discuss` label to get more eyes on it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/313685139","html_url":"https://github.com/elastic/elasticsearch/issues/25332#issuecomment-313685139","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25332","id":313685139,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzY4NTEzOQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-07-07T13:46:58Z","updated_at":"2017-07-07T13:46:58Z","author_association":"CONTRIBUTOR","body":"> So I'd like to see if ES will provide this feature or not.\r\n\r\nLemme try to explain the issue with this feature. If you update a document in es today everything will be consistent. your source will be updated, the values will be searchable, you can use it for scoring etc. With the  doc values updates you would loose all this. This has a significant impact on how the system works which we are not willing to take at this point without a clear path forward. That said, even if we had a clear plan the implementation in lucene (segments are updated in a copy-on-write fashion) will very likely have a significant impact on the systems stability since users might wanna use this as counters etc. or values that frequently change. in such a case we will rewrite segments on a constant basis which is a showstopper at this point. if the internals of the feature changes we might reconsider exposing it.","performed_via_github_app":null}]