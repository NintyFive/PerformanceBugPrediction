{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/21232","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21232/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21232/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21232/events","html_url":"https://github.com/elastic/elasticsearch/issues/21232","id":186469836,"node_id":"MDU6SXNzdWUxODY0Njk4MzY=","number":21232,"title":"Avoid NPE in RestClient#buildUri()","user":{"login":"biyuhao","id":1197310,"node_id":"MDQ6VXNlcjExOTczMTA=","avatar_url":"https://avatars3.githubusercontent.com/u/1197310?v=4","gravatar_id":"","url":"https://api.github.com/users/biyuhao","html_url":"https://github.com/biyuhao","followers_url":"https://api.github.com/users/biyuhao/followers","following_url":"https://api.github.com/users/biyuhao/following{/other_user}","gists_url":"https://api.github.com/users/biyuhao/gists{/gist_id}","starred_url":"https://api.github.com/users/biyuhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/biyuhao/subscriptions","organizations_url":"https://api.github.com/users/biyuhao/orgs","repos_url":"https://api.github.com/users/biyuhao/repos","events_url":"https://api.github.com/users/biyuhao/events{/privacy}","received_events_url":"https://api.github.com/users/biyuhao/received_events","type":"User","site_admin":false},"labels":[{"id":407508641,"node_id":"MDU6TGFiZWw0MDc1MDg2NDE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Java%20Low%20Level%20REST%20Client","name":":Core/Features/Java Low Level REST Client","color":"0e8a16","default":false,"description":"Minimal dependencies Java Client for Elasticsearch"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"assignees":[{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2016-11-01T06:45:50Z","updated_at":"2016-11-02T08:32:15Z","closed_at":"2016-11-02T08:32:15Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Elasticsearch version**:5.0.0\r\n\r\n**Plugins installed**: [none]\r\n\r\n**JVM version**:openjdk version \"1.8.0_91\"\r\n\r\n**OS version**:Linux Mint 18\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\n1. If we perform a request with null path in RestClient we may got NPE and no hint message.\r\nSince the pathPrefix should not be null, maybe we can treat null path as empty and continue to request.\r\n2. By the way, I have a little question here. Should we encode the URI which composed of pathPrefix and path?\r\n\r\n**Steps to reproduce**:\r\n 1.Construct arbitrary valid RestClient.\r\n 2.Perform request with null path.\r\n```restClient.performRequest(method, null);```\r\n\r\n**Exception Caught**:\r\n```\r\njava.lang.NullPointerException\r\n\tat __randomizedtesting.SeedInfo.seed([D6503272CE20A134:63A320640CEEA8AF]:0)\r\n\tat java.net.URI$Parser.parse(URI.java:3042)\r\n\tat java.net.URI.<init>(URI.java:588)\r\n\tat org.apache.http.client.utils.URIBuilder.<init>(URIBuilder.java:82)\r\n\tat org.elasticsearch.client.RestClient.buildUri(RestClient.java:525)\r\n\tat org.elasticsearch.client.RestClient.performRequestAsync(RestClient.java:285)\r\n\tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:211)\r\n\tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:185)\r\n\tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:146)\r\n......\r\n```","closed_by":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"performed_via_github_app":null}