[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288092587","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-288092587","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":288092587,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODA5MjU4Nw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-03-21T14:19:35Z","updated_at":"2017-03-21T14:19:59Z","author_association":"MEMBER","body":"How are the scroll times that large to begin with, that's a cumulative scroll time of at least 292,277,266 years? That is, maybe there is something else going on here?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288093883","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-288093883","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":288093883,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODA5Mzg4Mw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-03-21T14:23:42Z","updated_at":"2017-03-21T14:23:42Z","author_association":"CONTRIBUTOR","body":"Impressive!\n\n\n\nOn Tue, Mar 21, 2017 at 10:19 AM Jason Tedor <notifications@github.com>\nwrote:\n\n> How are the scroll times that large to begin with, that's a cumulative\n> scroll time of 292,277,266 years?\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/elastic/elasticsearch/issues/23675#issuecomment-288092587>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AANLohEr6QltkdcaDa0Hxf-5G5onac91ks5rn9x8gaJpZM4Mj3Ru>\n> .\n>\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288136377","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-288136377","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":288136377,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODEzNjM3Nw==","user":{"login":"DrMurx","id":1222566,"node_id":"MDQ6VXNlcjEyMjI1NjY=","avatar_url":"https://avatars3.githubusercontent.com/u/1222566?v=4","gravatar_id":"","url":"https://api.github.com/users/DrMurx","html_url":"https://github.com/DrMurx","followers_url":"https://api.github.com/users/DrMurx/followers","following_url":"https://api.github.com/users/DrMurx/following{/other_user}","gists_url":"https://api.github.com/users/DrMurx/gists{/gist_id}","starred_url":"https://api.github.com/users/DrMurx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DrMurx/subscriptions","organizations_url":"https://api.github.com/users/DrMurx/orgs","repos_url":"https://api.github.com/users/DrMurx/repos","events_url":"https://api.github.com/users/DrMurx/events{/privacy}","received_events_url":"https://api.github.com/users/DrMurx/received_events","type":"User","site_admin":false},"created_at":"2017-03-21T16:30:30Z","updated_at":"2017-03-21T16:30:30Z","author_association":"NONE","body":"@jasontedor I know that the number is insanely great, and I doubt it can be reached in regular operation. Still, the exception clearly indicates a negative value, and assuming that `scrollTimeInMillis` is always positive, I can give no better explanation than a numeric overflow.\r\n\r\nThis is the stacked Grafana graph of `scrollTimeInMillis` of our 12 node setup. The overflow happens at 292 years (approx at 9222842861407 ms).\r\n\r\n![Grafana Metrics ES5 scrollTimeInMillis](https://cloud.githubusercontent.com/assets/1222566/24157363/77e62342-0e59-11e7-8d90-caf54b915e2c.png)\r\n\r\nThe metrics are polled from the first node which is still able to return the negative value. But the inter-cluster communication to sync the local stats between the nodes is obviously broken by the exception thrown in `SearchStats$Stats.writeTo`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288138483","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-288138483","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":288138483,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODEzODQ4Mw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-03-21T16:36:51Z","updated_at":"2017-03-21T16:36:51Z","author_association":"MEMBER","body":"> Still, the exception clearly indicates a negative value, and assuming that `scrollTimeInMillis` is always positive, I can give no better explanation than a numeric overflow.\r\n\r\nYes, I understand the bug, and it's clear how to address. My concern is that there is a deeper issue here so I don't want to fix the bug until I understand where these overflowed values are coming from because addressing the serialization issue will just paper over the potentially deeper issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288139723","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-288139723","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":288139723,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODEzOTcyMw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-03-21T16:40:38Z","updated_at":"2017-03-24T13:42:55Z","author_association":"MEMBER","body":"> The overflow happens at 292 years (approx at 9222842861407 ms).\r\n\r\nThis is off by a factor of 10^6. If this is right, it indicates maybe a unit conversion bug somewhere. I'll dig.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288159109","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-288159109","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":288159109,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODE1OTEwOQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-03-21T17:38:34Z","updated_at":"2017-03-21T17:38:34Z","author_association":"MEMBER","body":"Are you sure about the units on your chart?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288174582","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-288174582","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":288174582,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODE3NDU4Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-03-21T18:27:12Z","updated_at":"2017-03-21T18:27:12Z","author_association":"MEMBER","body":"Do you also track `scroll_total` historically. If so, can you share it on the same timeline that you shared `scroll_time_in_millis`? Can you also share the current output of `/_stats/search?level=shards`?\r\n\r\nI do not see any unit conversion bugs behind this (I do think you might have a unit conversion problem in your chart; that doesn't explain the overflow though).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/289051989","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-289051989","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":289051989,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTA1MTk4OQ==","user":{"login":"DrMurx","id":1222566,"node_id":"MDQ6VXNlcjEyMjI1NjY=","avatar_url":"https://avatars3.githubusercontent.com/u/1222566?v=4","gravatar_id":"","url":"https://api.github.com/users/DrMurx","html_url":"https://github.com/DrMurx","followers_url":"https://api.github.com/users/DrMurx/followers","following_url":"https://api.github.com/users/DrMurx/following{/other_user}","gists_url":"https://api.github.com/users/DrMurx/gists{/gist_id}","starred_url":"https://api.github.com/users/DrMurx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DrMurx/subscriptions","organizations_url":"https://api.github.com/users/DrMurx/orgs","repos_url":"https://api.github.com/users/DrMurx/repos","events_url":"https://api.github.com/users/DrMurx/events{/privacy}","received_events_url":"https://api.github.com/users/DrMurx/received_events","type":"User","site_admin":false},"created_at":"2017-03-24T15:16:52Z","updated_at":"2017-03-24T15:16:52Z","author_association":"NONE","body":"Here's the graph for elastic-node131, with the plain numbers to rule out any potential Grafana related unit conversion issue.\r\n\r\n![screen shot 2017-03-24 at 4 04 38 pm](https://cloud.githubusercontent.com/assets/1222566/24300104/a35231de-10ab-11e7-9702-1cc175b6b6ab.png)\r\n\r\nThat's the output of `/_stats/search?level=shards` and it matches the numbers from the graphs. It's also again close to the overflow situation (might happen tonight):\r\n\r\n[_stats/search](https://github.com/elastic/elasticsearch/files/868316/esdump.txt)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/289091798","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-289091798","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":289091798,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTA5MTc5OA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-03-24T17:37:50Z","updated_at":"2017-03-24T17:44:36Z","author_association":"MEMBER","body":"Your stats are rather interesting. For example, you show 502,385,516 scrolls executed in total, and show 579,306 currently open scrolls? This seems abnormally high, does it sound right to you?  What is your workload? Why so many open scrolls? Are you closing your scrolls when you're done with them? Your shards all show ~50000 scrolls open each. Why? The average time a scroll is open seems reasonable (which leads to me believe that you're not forgetting to close them, but it's worth checking, especially given the number of currently open scrolls). However with your average scroll duration of 200,000 milliseconds, you need only 46 trillion scrolls of this duration to overflow. Yeah, only. It reminds me of the joke where someone is attending an astronomy lecture where the speaker says \"in a billion years, our star, the Sun, will run out of fuel and die\" and so this attendee raises his hand and says, panicking, \"how long did you say we had?\" and the lecturer repeats a billion years to which the attendee says \"I was getting worried, I thought you said a million years!\"","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/289787403","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-289787403","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":289787403,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTc4NzQwMw==","user":{"login":"marcdeop","id":3227746,"node_id":"MDQ6VXNlcjMyMjc3NDY=","avatar_url":"https://avatars0.githubusercontent.com/u/3227746?v=4","gravatar_id":"","url":"https://api.github.com/users/marcdeop","html_url":"https://github.com/marcdeop","followers_url":"https://api.github.com/users/marcdeop/followers","following_url":"https://api.github.com/users/marcdeop/following{/other_user}","gists_url":"https://api.github.com/users/marcdeop/gists{/gist_id}","starred_url":"https://api.github.com/users/marcdeop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcdeop/subscriptions","organizations_url":"https://api.github.com/users/marcdeop/orgs","repos_url":"https://api.github.com/users/marcdeop/repos","events_url":"https://api.github.com/users/marcdeop/events{/privacy}","received_events_url":"https://api.github.com/users/marcdeop/received_events","type":"User","site_admin":false},"created_at":"2017-03-28T14:26:32Z","updated_at":"2017-03-28T14:26:32Z","author_association":"NONE","body":"Hello,\r\n\r\nThese numbers are all expected: under normal operations, each node has 45-50k open contexts. On the current cluster, this adds up to ~600k open contexts on 12 nodes.\r\n\r\nWe do not close scrolls ourselves: we just wait until they expire and according to what @jasontedor  is saying, they’re expiring correctly.\r\n\r\nRegardless of the optimizations that we have planned, lowering down to 30k-40k open contexts on average in total, we might still hit these limits that we are seeing.\r\n\r\nNow we reach them in a few days, we will be reaching them in a few weeks. I would still consider this a bug.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/289792719","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-289792719","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":289792719,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTc5MjcxOQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-03-28T14:43:19Z","updated_at":"2017-03-28T14:43:19Z","author_association":"MEMBER","body":"> These numbers are all expected: under normal operations, each node has 45-50k open contexts. \r\n\r\nWhy so many?\r\n\r\n> We do not close scrolls ourselves\r\n\r\nYou should close these when you're done with them.\r\n\r\n> I would still consider this a bug.\r\n\r\nYou say this like this is under dispute. This is not under dispute. Instead, I am trying to understand the situation.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/289802411","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-289802411","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":289802411,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTgwMjQxMQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-03-28T15:12:38Z","updated_at":"2017-03-28T15:12:38Z","author_association":"MEMBER","body":"> You say this like this is under dispute. This is not under dispute. Instead, I am trying to understand the situation.\r\n\r\nSo, to be clear here, it [can overflow](https://github.com/elastic/elasticsearch/issues/23675#issuecomment-288138483), that is not open to dispute. Instead, we need to understand the circumstances under which it can before concluding what to do about it (for which there are many options).\r\n\r\n> You should close these when you're done with them.\r\n\r\nI maintain that you should be doing this and I want to see what impact that has on your cumulative scroll times.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/289815221","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-289815221","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":289815221,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTgxNTIyMQ==","user":{"login":"marcdeop","id":3227746,"node_id":"MDQ6VXNlcjMyMjc3NDY=","avatar_url":"https://avatars0.githubusercontent.com/u/3227746?v=4","gravatar_id":"","url":"https://api.github.com/users/marcdeop","html_url":"https://github.com/marcdeop","followers_url":"https://api.github.com/users/marcdeop/followers","following_url":"https://api.github.com/users/marcdeop/following{/other_user}","gists_url":"https://api.github.com/users/marcdeop/gists{/gist_id}","starred_url":"https://api.github.com/users/marcdeop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcdeop/subscriptions","organizations_url":"https://api.github.com/users/marcdeop/orgs","repos_url":"https://api.github.com/users/marcdeop/repos","events_url":"https://api.github.com/users/marcdeop/events{/privacy}","received_events_url":"https://api.github.com/users/marcdeop/received_events","type":"User","site_admin":false},"created_at":"2017-03-28T15:51:39Z","updated_at":"2017-03-28T15:51:39Z","author_association":"NONE","body":">>These numbers are all expected: under normal operations, each node has 45-50k open contexts.\r\n\r\n>Why so many?\r\n\r\nBy how our search is designed and our load, this is expected. Again, we plan on optimizing this to have 30k-40k open contexts in total\r\n\r\n>>We do not close scrolls ourselves\r\n\r\n>You should close these when you're done with them.\r\n\r\nDue to how the application is designed, we cannot really know when we are \"done\" with them. That is why we are relying on the expire time ( We have on the roadmap to reduce this expire time though ).\r\n\r\n\r\n>>I would still consider this a bug.\r\n\r\n> You say this like this is under dispute. This is not under dispute. Instead, I am trying to understand the situation.\r\n\r\nI apologize, in fact, we really appreciate the effort that you are putting into figuring out what is happening here. Thank you :-)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/338381818","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-338381818","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":338381818,"node_id":"MDEyOklzc3VlQ29tbWVudDMzODM4MTgxOA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-10-21T10:32:07Z","updated_at":"2017-10-21T10:32:07Z","author_association":"MEMBER","body":"This will be fixed by #27068.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/338382156","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-338382156","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":338382156,"node_id":"MDEyOklzc3VlQ29tbWVudDMzODM4MjE1Ng==","user":{"login":"marcdeop","id":3227746,"node_id":"MDQ6VXNlcjMyMjc3NDY=","avatar_url":"https://avatars0.githubusercontent.com/u/3227746?v=4","gravatar_id":"","url":"https://api.github.com/users/marcdeop","html_url":"https://github.com/marcdeop","followers_url":"https://api.github.com/users/marcdeop/followers","following_url":"https://api.github.com/users/marcdeop/following{/other_user}","gists_url":"https://api.github.com/users/marcdeop/gists{/gist_id}","starred_url":"https://api.github.com/users/marcdeop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcdeop/subscriptions","organizations_url":"https://api.github.com/users/marcdeop/orgs","repos_url":"https://api.github.com/users/marcdeop/repos","events_url":"https://api.github.com/users/marcdeop/events{/privacy}","received_events_url":"https://api.github.com/users/marcdeop/received_events","type":"User","site_admin":false},"created_at":"2017-10-21T10:38:49Z","updated_at":"2017-10-21T10:38:49Z","author_association":"NONE","body":"Looking forward to seeing it fixed! \r\n\r\nThanks a lot @jasontedor ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/338384521","html_url":"https://github.com/elastic/elasticsearch/issues/23675#issuecomment-338384521","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23675","id":338384521,"node_id":"MDEyOklzc3VlQ29tbWVudDMzODM4NDUyMQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-10-21T11:19:39Z","updated_at":"2017-10-21T11:19:39Z","author_association":"MEMBER","body":"Closed by #27068","performed_via_github_app":null}]