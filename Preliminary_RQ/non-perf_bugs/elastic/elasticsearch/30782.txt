{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/30782","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30782/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30782/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30782/events","html_url":"https://github.com/elastic/elasticsearch/issues/30782","id":325326221,"node_id":"MDU6SXNzdWUzMjUzMjYyMjE=","number":30782,"title":"Remove hardcoded ports in security vagrant tests","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":912838879,"node_id":"MDU6TGFiZWw5MTI4Mzg4Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/Security","name":":Security/Security","color":"0e8a16","default":false,"description":"Security issues without another label"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-05-22T14:41:55Z","updated_at":"2020-11-11T21:41:41Z","closed_at":"2019-07-12T14:03:45Z","author_association":"MEMBER","active_lock_reason":null,"body":"In practice hardcoded ports are a bad idea and lead to conflicts and spurious CI failures. We should try to minimize the use of these as much as possible. To that end, there are a few security test suites that rely on hardcoded port values with vagrant fixtures. \r\n\r\nThe idp-fixture hardcodes the following port forwards:\r\n\r\nhttps://github.com/elastic/elasticsearch/blob/5f172b6795c2d7917144c535542ad521698016c5/x-pack/test/idp-fixture/Vagrantfile#L13-L16\r\n\r\nThe smb-fixture hardcodes the following port forwards:\r\n\r\nhttps://github.com/elastic/elasticsearch/blob/5f172b6795c2d7917144c535542ad521698016c5/x-pack/test/smb-fixture/Vagrantfile#L13-L16\r\n\r\nThese hardcoded ports are ephemeral ports and could be in use already. We can make use of dynamic port mapping and use [vagrant port](https://www.vagrantup.com/docs/cli/port.html) to get the forwarded port and pass this along to tests.","closed_by":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"performed_via_github_app":null}