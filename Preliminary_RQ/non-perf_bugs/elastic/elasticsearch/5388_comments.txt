[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/37297014","html_url":"https://github.com/elastic/elasticsearch/issues/5388#issuecomment-37297014","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5388","id":37297014,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mjk3MDE0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-03-11T13:52:06Z","updated_at":"2014-03-11T13:52:06Z","author_association":"CONTRIBUTOR","body":"Hiya @jfiedler \n\nIt'd be great if you could reduce this to a smaller example, preferably using curl rather than Java (or maybe one of the Java guys will take a look at it).\n\nOne thing I noticed: your custom analyzer file is missing the `i` in `index`: https://gist.github.com/jfiedler/9485429#file-custom-analyzer-1-yml-L1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/37297148","html_url":"https://github.com/elastic/elasticsearch/issues/5388#issuecomment-37297148","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5388","id":37297148,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mjk3MTQ4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-03-11T13:53:13Z","updated_at":"2014-03-11T13:53:13Z","author_association":"CONTRIBUTOR","body":"Also, the syntax of multi-fields has changed in 1.0: http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/_multi_fields.html\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/37297639","html_url":"https://github.com/elastic/elasticsearch/issues/5388#issuecomment-37297639","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5388","id":37297639,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mjk3NjM5","user":{"login":"jfiedler","id":584682,"node_id":"MDQ6VXNlcjU4NDY4Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/584682?v=4","gravatar_id":"","url":"https://api.github.com/users/jfiedler","html_url":"https://github.com/jfiedler","followers_url":"https://api.github.com/users/jfiedler/followers","following_url":"https://api.github.com/users/jfiedler/following{/other_user}","gists_url":"https://api.github.com/users/jfiedler/gists{/gist_id}","starred_url":"https://api.github.com/users/jfiedler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jfiedler/subscriptions","organizations_url":"https://api.github.com/users/jfiedler/orgs","repos_url":"https://api.github.com/users/jfiedler/repos","events_url":"https://api.github.com/users/jfiedler/events{/privacy}","received_events_url":"https://api.github.com/users/jfiedler/received_events","type":"User","site_admin":false},"created_at":"2014-03-11T13:57:52Z","updated_at":"2014-03-11T13:58:21Z","author_association":"CONTRIBUTOR","body":"I fixed the analyzer file. I was not able to reproduce this in curl. I believe this might be a problem of the Java client (which makes it impossible to re-create via curl). I know the multi-field mapping changed but I used the old notation to have the same test run on 0.20.6 and 1.0.1. Using the new notation on 1.0.1 does not make a difference - the test still fails.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/37372954","html_url":"https://github.com/elastic/elasticsearch/issues/5388#issuecomment-37372954","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5388","id":37372954,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MzcyOTU0","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2014-03-12T03:45:39Z","updated_at":"2014-03-12T03:45:39Z","author_association":"MEMBER","body":"Here is the [curl repro](https://gist.github.com/imotov/9500276). It looks like the issue is caused by the change in the way query_string query is dealing with tokens with the same position. The generated tokens are the same in both cases (master and 0.20.6). \n\n``` js\n{\n    \"token\": \"1111\",\n    \"start_offset\": 0,\n    \"end_offset\": 4,\n    \"type\": \"word\",\n    \"position\": 1\n}, {\n    \"token\": \"1111\",\n    \"start_offset\": 0,\n    \"end_offset\": 4,\n    \"type\": \"word\",\n    \"position\": 2\n}, {\n    \"token\": \"2222\",\n    \"start_offset\": 5,\n    \"end_offset\": 9,\n    \"type\": \"word\",\n    \"position\": 3\n}, {\n    \"token\": \"11112222\",\n    \"start_offset\": 0,\n    \"end_offset\": 9,\n    \"type\": \"word\",\n    \"position\": 3\n}\n```\n\nBut 0.20.6 was generating the following query:\n`+myString.text:2222 +myString.text:2222 +myString.text:1111 +myString.text:22221111`\n\nwhile master is generating:\n`+myString.text:2222 +myString.text:2222 +(myString.text:1111 myString.text:22221111)`\n\nSo, I would say it might be inappropriate choice of token filter, but it doesn't seem like a regression to me.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68358278","html_url":"https://github.com/elastic/elasticsearch/issues/5388#issuecomment-68358278","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5388","id":68358278,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzU4Mjc4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-30T14:02:52Z","updated_at":"2014-12-30T14:02:52Z","author_association":"CONTRIBUTOR","body":"Agreed - this change was added to support query-time synonyms in the same position.  Closing\n","performed_via_github_app":null}]