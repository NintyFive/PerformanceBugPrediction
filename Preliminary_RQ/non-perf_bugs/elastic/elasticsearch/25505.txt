{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25505","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25505/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25505/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25505/events","html_url":"https://github.com/elastic/elasticsearch/issues/25505","id":239939652,"node_id":"MDU6SXNzdWUyMzk5Mzk2NTI=","number":25505,"title":"elasticsearch.service: main process exited, code=exited, status=1/FAILURE","user":{"login":"521xueweihan","id":8255800,"node_id":"MDQ6VXNlcjgyNTU4MDA=","avatar_url":"https://avatars3.githubusercontent.com/u/8255800?v=4","gravatar_id":"","url":"https://api.github.com/users/521xueweihan","html_url":"https://github.com/521xueweihan","followers_url":"https://api.github.com/users/521xueweihan/followers","following_url":"https://api.github.com/users/521xueweihan/following{/other_user}","gists_url":"https://api.github.com/users/521xueweihan/gists{/gist_id}","starred_url":"https://api.github.com/users/521xueweihan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/521xueweihan/subscriptions","organizations_url":"https://api.github.com/users/521xueweihan/orgs","repos_url":"https://api.github.com/users/521xueweihan/repos","events_url":"https://api.github.com/users/521xueweihan/events{/privacy}","received_events_url":"https://api.github.com/users/521xueweihan/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2017-07-01T09:48:45Z","updated_at":"2020-10-20T03:39:40Z","closed_at":"2017-07-01T10:02:01Z","author_association":"NONE","active_lock_reason":null,"body":"## desciption\r\nI use rpm installed elasticsearch-1.7.3, It work, then I use rpm uninstall it. Because I want to install 5.xx.\r\nSo I use the same way to install elasticsearch-5.4.3, But when I restart  elasticsearch, It don't work.\r\n\r\n## elasticsearch.yml\r\n```\r\n# ======================== Elasticsearch Configuration =========================       \r\n#                                                                                      \r\n# NOTE: Elasticsearch comes with reasonable defaults for most settings.                \r\n#       Before you set out to tweak and tune the configuration, make sure you          \r\n#       understand what are you trying to accomplish and the consequences.             \r\n#                                                                                      \r\n# The primary way of configuring a node is via this file. This template lists          \r\n# the most important settings you may want to configure for a production cluster.      \r\n#                                                                                      \r\n# Please consult the documentation for further information on configuration options:   \r\n# https://www.elastic.co/guide/en/elasticsearch/reference/index.html                   \r\n#                                                                                      \r\n# ---------------------------------- Cluster -----------------------------------       \r\n#                                                                                      \r\n# Use a descriptive name for your cluster:                                             \r\n#                                                                                      \r\n#cluster.name: my-application                                                          \r\n#                                                                                      \r\n# ------------------------------------ Node ------------------------------------       \r\n#                                                                                      \r\n# Use a descriptive name for the node:                                                 \r\n#                                                                                      \r\n#node.name: node-1                                                                     \r\n#                                                                                      \r\n# Add custom attributes to the node:                                                   \r\n#                                                                                      \r\n#node.attr.rack: r1                                                                    \r\n#                                                                                      \r\n# ----------------------------------- Paths ------------------------------------       \r\n#                                                                                      \r\n# Path to directory where to store the data (separate multiple locations by comma):    \r\n#                                                                                      \r\n#path.data: /path/to/data                                                              \r\n#                                                                                      \r\n# Path to log files:                                                                   \r\n#                                                                                      \r\n#path.logs: /path/to/logs                                                              \r\n#                                                                                      \r\n# ----------------------------------- Memory -----------------------------------\r\n#\r\n# Lock the memory on startup:\r\n#\r\n#bootstrap.memory_lock: true\r\n#\r\n# Make sure that the heap size is set to about half the memory available\r\n# on the system and that the owner of the process is allowed to use this\r\n# limit.\r\n#\r\n# Elasticsearch performs poorly when the system is swapping the memory.\r\n#\r\n# ---------------------------------- Network -----------------------------------\r\n#\r\n# Set the bind address to a specific IP (IPv4 or IPv6):\r\n#\r\n#network.host: 192.168.0.1\r\n#\r\n# Set a custom port for HTTP:\r\n#\r\n#http.port: 9200\r\n#\r\n# For more information, consult the network module documentation.\r\n#\r\n# --------------------------------- Discovery ----------------------------------\r\n#\r\n# Pass an initial list of hosts to perform discovery when new node is started:\r\n# The default list of hosts is [\"127.0.0.1\", \"[::1]\"]\r\n#\r\n#discovery.zen.ping.unicast.hosts: [\"host1\", \"host2\"]\r\n#\r\n# Prevent the \"split brain\" by configuring the majority of nodes (total number of master-eligible nodes / 2 + 1):\r\n#\r\n#discovery.zen.minimum_master_nodes: 3\r\n#\r\n# For more information, consult the zen discovery module documentation.\r\n# ---------------------------------- Gateway -----------------------------------\r\n#\r\n# Block initial recovery after a full cluster restart until N nodes are started:\r\n#\r\n#gateway.recover_after_nodes: 3\r\n#\r\n# For more information, consult the gateway module documentation.\r\n#\r\n# ---------------------------------- Various -----------------------------------\r\n#\r\n# Require explicit names when deleting indices:\r\n#\r\n#action.destructive_requires_name: true                                                                                       \r\n```\r\n\r\n## elasticsearch.log\r\n```\r\n[2017-07-01T17:52:12,513][ERROR][o.e.g.GatewayMetaState ] [YPTbq-O] failed to read local state, exiting... org.elasticsearch.ElasticsearchException: java.io.IOException: failed to read [id:0, legacy:false, file:/var/lib/elasticsearch/elasticsearch/nodes/0/indices/jobbole/_state/state-0.st]\r\n```\r\n\r\n## Status\r\n```\r\n● elasticsearch.service - Elasticsearch\r\n   Loaded: loaded (/usr/lib/systemd/system/elasticsearch.service; enabled; vendor preset: disabled)\r\n   Active: failed (Result: exit-code) since 六 2017-07-01 17:25:19 CST; 55s ago\r\n     Docs: http://www.elastic.co\r\n  Process: 2100 ExecStart=/usr/share/elasticsearch/bin/elasticsearch -p ${PID_DIR}/elasticsearch.pid --quiet -Edefault.path.logs=${LOG_DIR} -Edefault.path.data=${DATA_DIR} -Edefault.path.conf=${CONF_DIR} (code=exited, status=1/FAILURE)\r\n  Process: 2086 ExecStartPre=/usr/share/elasticsearch/bin/elasticsearch-systemd-pre-exec (code=exited, status=0/SUCCESS)\r\n Main PID: 2100 (code=exited, status=1/FAILURE)\r\n\r\n7月 01 17:24:14 localhost.localdomain systemd[1]: Starting Elasticsearch...\r\n7月 01 17:24:15 localhost.localdomain systemd[1]: Started Elasticsearch.\r\n7月 01 17:25:19 localhost.localdomain systemd[1]: elasticsearch.service: main process exited, code=exited, status=1/FAILURE\r\n7月 01 17:25:19 localhost.localdomain systemd[1]: Unit elasticsearch.service entered failed state.\r\n7月 01 17:25:19 localhost.localdomain systemd[1]: elasticsearch.service failed.\r\n```\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}