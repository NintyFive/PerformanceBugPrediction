{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/52311","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52311/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52311/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52311/events","html_url":"https://github.com/elastic/elasticsearch/issues/52311","id":564624308,"node_id":"MDU6SXNzdWU1NjQ2MjQzMDg=","number":52311,"title":"Add metadata to exception when ApiKey/Token services are not enabled","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"labels":[{"id":912837951,"node_id":"MDU6TGFiZWw5MTI4Mzc5NTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/Authentication","name":":Security/Authentication","color":"0e8a16","default":false,"description":"Logging in, Usernames/passwords, Realms (Native/LDAP/AD/SAML/PKI/etc)"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-02-13T11:36:14Z","updated_at":"2020-03-05T05:44:49Z","closed_at":"2020-03-05T05:44:49Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Replaces: #51585\r\nRelates: https://github.com/elastic/kibana/pull/55255\r\n\r\nThere are cases where the ApiKeyService and TokenService throw exceptions if they are disabled (e.g. you cannot list API Keys, or create an API Key if the service is disabled).\r\n\r\nIn these cases we should add a metadata field to the thrown exception (e.g. `\"es.disabled.feature\" : \"API-Key-Service\"`) so that consumers of the REST API can detect this root cause without needing to parse error messages.\r\n","closed_by":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"performed_via_github_app":null}