[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16127549","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16127549","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16127549,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTI3NTQ5","user":{"login":"devoncrouse","id":1114734,"node_id":"MDQ6VXNlcjExMTQ3MzQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1114734?v=4","gravatar_id":"","url":"https://api.github.com/users/devoncrouse","html_url":"https://github.com/devoncrouse","followers_url":"https://api.github.com/users/devoncrouse/followers","following_url":"https://api.github.com/users/devoncrouse/following{/other_user}","gists_url":"https://api.github.com/users/devoncrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/devoncrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devoncrouse/subscriptions","organizations_url":"https://api.github.com/users/devoncrouse/orgs","repos_url":"https://api.github.com/users/devoncrouse/repos","events_url":"https://api.github.com/users/devoncrouse/events{/privacy}","received_events_url":"https://api.github.com/users/devoncrouse/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T17:30:57Z","updated_at":"2013-04-09T17:30:57Z","author_association":"NONE","body":"Also, on another node:\n\n[2013-04-09 11:30:08,583][WARN ][cluster.action.shard     ] [search-02] sending failed shard for [messages_20130222][2], node[1EDq4kQjQqKkf2TPARuEdA], [P], s[STARTED], reason [master [search-m01][sHJuCwGzSqSFeDjyLo-Cmg][inet[/10.2.34.52:9300]]{data=false} marked shard as started, but shard have not been created, mark shard as failed]\n[2013-04-09 11:30:08,583][WARN ][indices.cluster          ] [search-02] [messages_20130304][0] master [[search-m01][sHJuCwGzSqSFeDjyLo-Cmg][inet[/10.2.34.52:9300]]{data=false}] marked shard as started, but shard have not been created, mark shard as failed\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16127622","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16127622","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16127622,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTI3NjIy","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T17:32:07Z","updated_at":"2013-04-09T17:32:07Z","author_association":"MEMBER","body":"Did you upgrade or restart the cluster before it happend? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16127717","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16127717","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16127717,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTI3NzE3","user":{"login":"devoncrouse","id":1114734,"node_id":"MDQ6VXNlcjExMTQ3MzQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1114734?v=4","gravatar_id":"","url":"https://api.github.com/users/devoncrouse","html_url":"https://github.com/devoncrouse","followers_url":"https://api.github.com/users/devoncrouse/followers","following_url":"https://api.github.com/users/devoncrouse/following{/other_user}","gists_url":"https://api.github.com/users/devoncrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/devoncrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devoncrouse/subscriptions","organizations_url":"https://api.github.com/users/devoncrouse/orgs","repos_url":"https://api.github.com/users/devoncrouse/repos","events_url":"https://api.github.com/users/devoncrouse/events{/privacy}","received_events_url":"https://api.github.com/users/devoncrouse/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T17:33:26Z","updated_at":"2013-04-09T17:33:26Z","author_association":"NONE","body":"Yes, this happened just after a cluster restart.  We've had the same issue during previous restarts as well (using the shutdown API, then starting back up with service wrapper).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16127811","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16127811","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16127811,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTI3ODEx","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T17:35:21Z","updated_at":"2013-04-09T17:35:21Z","author_association":"MEMBER","body":"Could you post somewhere all log files since cluster restart from all nodes and your configuration? You can send me a link via IRC or email if you don't want to post them here.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16127943","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16127943","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16127943,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTI3OTQz","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T17:37:38Z","updated_at":"2013-04-09T17:37:38Z","author_association":"MEMBER","body":"... and output of `curl localhost:9200/_nodes/hot_threads`.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16128143","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16128143","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16128143,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTI4MTQz","user":{"login":"devoncrouse","id":1114734,"node_id":"MDQ6VXNlcjExMTQ3MzQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1114734?v=4","gravatar_id":"","url":"https://api.github.com/users/devoncrouse","html_url":"https://github.com/devoncrouse","followers_url":"https://api.github.com/users/devoncrouse/followers","following_url":"https://api.github.com/users/devoncrouse/following{/other_user}","gists_url":"https://api.github.com/users/devoncrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/devoncrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devoncrouse/subscriptions","organizations_url":"https://api.github.com/users/devoncrouse/orgs","repos_url":"https://api.github.com/users/devoncrouse/repos","events_url":"https://api.github.com/users/devoncrouse/events{/privacy}","received_events_url":"https://api.github.com/users/devoncrouse/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T17:41:05Z","updated_at":"2013-04-09T17:41:05Z","author_association":"NONE","body":"Hot threads: http://sprunge.us/heHR\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16128319","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16128319","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16128319,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTI4MzE5","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T17:44:05Z","updated_at":"2013-04-09T17:44:05Z","author_association":"MEMBER","body":"Great! Could you run hot threads again, wait for a few minutes and run it again?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16128355","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16128355","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16128355,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTI4MzU1","user":{"login":"devoncrouse","id":1114734,"node_id":"MDQ6VXNlcjExMTQ3MzQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1114734?v=4","gravatar_id":"","url":"https://api.github.com/users/devoncrouse","html_url":"https://github.com/devoncrouse","followers_url":"https://api.github.com/users/devoncrouse/followers","following_url":"https://api.github.com/users/devoncrouse/following{/other_user}","gists_url":"https://api.github.com/users/devoncrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/devoncrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devoncrouse/subscriptions","organizations_url":"https://api.github.com/users/devoncrouse/orgs","repos_url":"https://api.github.com/users/devoncrouse/repos","events_url":"https://api.github.com/users/devoncrouse/events{/privacy}","received_events_url":"https://api.github.com/users/devoncrouse/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T17:44:39Z","updated_at":"2013-04-09T17:44:39Z","author_association":"NONE","body":"Master node config: http://sprunge.us/IfeP\nData node config: http://sprunge.us/Pida\n\nTopology: 3 dedicated master nodes (VMs) running Zookeeper, 6 data nodes (physical)\n\nWe've seen the issue before implementing Zookeeper and Jetty plugins, too.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16128676","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16128676","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16128676,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTI4Njc2","user":{"login":"devoncrouse","id":1114734,"node_id":"MDQ6VXNlcjExMTQ3MzQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1114734?v=4","gravatar_id":"","url":"https://api.github.com/users/devoncrouse","html_url":"https://github.com/devoncrouse","followers_url":"https://api.github.com/users/devoncrouse/followers","following_url":"https://api.github.com/users/devoncrouse/following{/other_user}","gists_url":"https://api.github.com/users/devoncrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/devoncrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devoncrouse/subscriptions","organizations_url":"https://api.github.com/users/devoncrouse/orgs","repos_url":"https://api.github.com/users/devoncrouse/repos","events_url":"https://api.github.com/users/devoncrouse/events{/privacy}","received_events_url":"https://api.github.com/users/devoncrouse/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T17:49:47Z","updated_at":"2013-04-09T17:49:47Z","author_association":"NONE","body":"Hot threads t+0: http://sprunge.us/AihU\nHot threads t+3: http://sprunge.us/BaKK\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16128818","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16128818","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16128818,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTI4ODE4","user":{"login":"devoncrouse","id":1114734,"node_id":"MDQ6VXNlcjExMTQ3MzQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1114734?v=4","gravatar_id":"","url":"https://api.github.com/users/devoncrouse","html_url":"https://github.com/devoncrouse","followers_url":"https://api.github.com/users/devoncrouse/followers","following_url":"https://api.github.com/users/devoncrouse/following{/other_user}","gists_url":"https://api.github.com/users/devoncrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/devoncrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devoncrouse/subscriptions","organizations_url":"https://api.github.com/users/devoncrouse/orgs","repos_url":"https://api.github.com/users/devoncrouse/repos","events_url":"https://api.github.com/users/devoncrouse/events{/privacy}","received_events_url":"https://api.github.com/users/devoncrouse/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T17:52:20Z","updated_at":"2013-04-09T17:52:20Z","author_association":"NONE","body":"Working on logs - we have a lot of them and this started a couple days ago :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16128891","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16128891","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16128891,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTI4ODkx","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T17:53:31Z","updated_at":"2013-04-09T17:53:31Z","author_association":"MEMBER","body":"Let's start with the logs from the day when it started. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16133588","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16133588","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16133588,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTMzNTg4","user":{"login":"devoncrouse","id":1114734,"node_id":"MDQ6VXNlcjExMTQ3MzQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1114734?v=4","gravatar_id":"","url":"https://api.github.com/users/devoncrouse","html_url":"https://github.com/devoncrouse","followers_url":"https://api.github.com/users/devoncrouse/followers","following_url":"https://api.github.com/users/devoncrouse/following{/other_user}","gists_url":"https://api.github.com/users/devoncrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/devoncrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devoncrouse/subscriptions","organizations_url":"https://api.github.com/users/devoncrouse/orgs","repos_url":"https://api.github.com/users/devoncrouse/repos","events_url":"https://api.github.com/users/devoncrouse/events{/privacy}","received_events_url":"https://api.github.com/users/devoncrouse/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T19:10:15Z","updated_at":"2013-04-09T19:10:34Z","author_association":"NONE","body":"Sorry for the delay.  The failures start appearing at 07:35:10:\n\nhttps://docs.google.com/file/d/0B21kqDCdcF2ONXNlcmxiVExiWTQ/edit?usp=sharing\n\nLet me know if you want earlier/later logs.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16136071","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16136071","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16136071,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTM2MDcx","user":{"login":"devoncrouse","id":1114734,"node_id":"MDQ6VXNlcjExMTQ3MzQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1114734?v=4","gravatar_id":"","url":"https://api.github.com/users/devoncrouse","html_url":"https://github.com/devoncrouse","followers_url":"https://api.github.com/users/devoncrouse/followers","following_url":"https://api.github.com/users/devoncrouse/following{/other_user}","gists_url":"https://api.github.com/users/devoncrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/devoncrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devoncrouse/subscriptions","organizations_url":"https://api.github.com/users/devoncrouse/orgs","repos_url":"https://api.github.com/users/devoncrouse/repos","events_url":"https://api.github.com/users/devoncrouse/events{/privacy}","received_events_url":"https://api.github.com/users/devoncrouse/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T19:54:58Z","updated_at":"2013-04-09T19:54:58Z","author_association":"NONE","body":"Also, I do have ~250GB of data still in volumes across our data nodes, plus state files on our masters for this index.  Is there something I can do to analyze and validate the state files (i.e. stored location/hash of data files on each node, etc?)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16138235","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16138235","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16138235,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTM4MjM1","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T20:32:52Z","updated_at":"2013-04-09T20:32:52Z","author_association":"MEMBER","body":"The most likely reason for this error is that your shard got corrupted. Unfortunately, files for this shard are not stored in a single directory, which complicates things. In cases like this, I typically suggest copying shard to another directory and running Lucene's CheckIndex on it and if it's successful, copying the shard back. In your case, you will have to collect all pieces and then bring them back, which might be quite cumbersome. There is build-in support for running CheckIndex in elasticsearch but I am not sure how well it can handle multi data directory setup - I never had a chance to try it on a multi data directory index. Moreover, it will run CheckIndex in place, which is risky. How difficult would it be to reindex data for this index?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16138758","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16138758","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16138758,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTM4NzU4","user":{"login":"devoncrouse","id":1114734,"node_id":"MDQ6VXNlcjExMTQ3MzQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1114734?v=4","gravatar_id":"","url":"https://api.github.com/users/devoncrouse","html_url":"https://github.com/devoncrouse","followers_url":"https://api.github.com/users/devoncrouse/followers","following_url":"https://api.github.com/users/devoncrouse/following{/other_user}","gists_url":"https://api.github.com/users/devoncrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/devoncrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devoncrouse/subscriptions","organizations_url":"https://api.github.com/users/devoncrouse/orgs","repos_url":"https://api.github.com/users/devoncrouse/repos","events_url":"https://api.github.com/users/devoncrouse/events{/privacy}","received_events_url":"https://api.github.com/users/devoncrouse/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T20:41:46Z","updated_at":"2013-04-09T20:41:46Z","author_association":"NONE","body":"It's kind of a pain to re-index.  My concern is that we had increased replicas to 2 after we ran into this previously, and they all appear to have been corrupted somehow?  Is there a way to confirm that they are all, indeed, corrupted?  And is it worth trying the CheckIndex feature described in https://github.com/elasticsearch/elasticsearch/pull/1890?  Worst case scenario, it doesn't work and we're still left with that one index unrecovered, correct?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16139936","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16139936","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16139936,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTM5OTM2","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T21:01:40Z","updated_at":"2013-04-09T21:01:40Z","author_association":"MEMBER","body":"From the log file it looks like it tried to recover messages_20130405 only from search-00 and search-01. It never tried search-03 for some reason. So, in theory the shard on search-03 might be still OK. \n\nYou mentioned that you had these types of issues before. Did you notice if they are related to having multiple data directories or not?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16143643","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16143643","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16143643,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTQzNjQz","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T22:11:39Z","updated_at":"2013-04-09T22:11:39Z","author_association":"MEMBER","body":"Regarding checkIndex, I think it might make sense to do a dry run. Start a node with index.shard.check_on_startup set to \"true\" (don't set it to \"fix\" just yet). It will log the error message on startup. Please post these error message here and we will try to figure out if it's possible to restore the shard without data loss.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16143689","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16143689","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16143689,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTQzNjg5","user":{"login":"devoncrouse","id":1114734,"node_id":"MDQ6VXNlcjExMTQ3MzQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1114734?v=4","gravatar_id":"","url":"https://api.github.com/users/devoncrouse","html_url":"https://github.com/devoncrouse","followers_url":"https://api.github.com/users/devoncrouse/followers","following_url":"https://api.github.com/users/devoncrouse/following{/other_user}","gists_url":"https://api.github.com/users/devoncrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/devoncrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devoncrouse/subscriptions","organizations_url":"https://api.github.com/users/devoncrouse/orgs","repos_url":"https://api.github.com/users/devoncrouse/repos","events_url":"https://api.github.com/users/devoncrouse/events{/privacy}","received_events_url":"https://api.github.com/users/devoncrouse/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T22:12:42Z","updated_at":"2013-04-09T22:12:42Z","author_association":"NONE","body":"This is...weird:\n\nThe borked index was affecting one of our applications, so I decided to cut our losses and axe it.\n\ncurl -XDELETE 'http://localhost:9200/messages_20130405'\ncurl -XPUT 'http://localhost:9200/messages_20130405' # To create empty index so queries against the date wouldn't fail\n\nI confirmed the new index was created, and empty in Head plugin.  Later, I restarted the cluster to make a heap adjustment (shutdown API, start with service wrapper).\n\nThe index is now back, with data.  I'm looking at the logs now to see if I can figure out how this worked.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16144273","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16144273","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16144273,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTQ0Mjcz","user":{"login":"devoncrouse","id":1114734,"node_id":"MDQ6VXNlcjExMTQ3MzQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1114734?v=4","gravatar_id":"","url":"https://api.github.com/users/devoncrouse","html_url":"https://github.com/devoncrouse","followers_url":"https://api.github.com/users/devoncrouse/followers","following_url":"https://api.github.com/users/devoncrouse/following{/other_user}","gists_url":"https://api.github.com/users/devoncrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/devoncrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devoncrouse/subscriptions","organizations_url":"https://api.github.com/users/devoncrouse/orgs","repos_url":"https://api.github.com/users/devoncrouse/repos","events_url":"https://api.github.com/users/devoncrouse/events{/privacy}","received_events_url":"https://api.github.com/users/devoncrouse/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T22:25:56Z","updated_at":"2013-04-09T22:25:56Z","author_association":"NONE","body":"It's also worth noting that the cluster had been restarted after the issue started, with no change in that index's recoverability.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16144610","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16144610","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16144610,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTQ0NjEw","user":{"login":"devoncrouse","id":1114734,"node_id":"MDQ6VXNlcjExMTQ3MzQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1114734?v=4","gravatar_id":"","url":"https://api.github.com/users/devoncrouse","html_url":"https://github.com/devoncrouse","followers_url":"https://api.github.com/users/devoncrouse/followers","following_url":"https://api.github.com/users/devoncrouse/following{/other_user}","gists_url":"https://api.github.com/users/devoncrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/devoncrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devoncrouse/subscriptions","organizations_url":"https://api.github.com/users/devoncrouse/orgs","repos_url":"https://api.github.com/users/devoncrouse/repos","events_url":"https://api.github.com/users/devoncrouse/events{/privacy}","received_events_url":"https://api.github.com/users/devoncrouse/received_events","type":"User","site_admin":false},"created_at":"2013-04-09T22:32:46Z","updated_at":"2013-04-09T22:32:46Z","author_association":"NONE","body":"The index's size is now lower, and I realize now that shard 1 and 2 are pretty much empty - only 0 has the data from before.  This is still better than nothing...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16270263","html_url":"https://github.com/elastic/elasticsearch/issues/2879#issuecomment-16270263","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2879","id":16270263,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjcwMjYz","user":{"login":"devoncrouse","id":1114734,"node_id":"MDQ6VXNlcjExMTQ3MzQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1114734?v=4","gravatar_id":"","url":"https://api.github.com/users/devoncrouse","html_url":"https://github.com/devoncrouse","followers_url":"https://api.github.com/users/devoncrouse/followers","following_url":"https://api.github.com/users/devoncrouse/following{/other_user}","gists_url":"https://api.github.com/users/devoncrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/devoncrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devoncrouse/subscriptions","organizations_url":"https://api.github.com/users/devoncrouse/orgs","repos_url":"https://api.github.com/users/devoncrouse/repos","events_url":"https://api.github.com/users/devoncrouse/events{/privacy}","received_events_url":"https://api.github.com/users/devoncrouse/received_events","type":"User","site_admin":false},"created_at":"2013-04-12T00:41:18Z","updated_at":"2013-04-12T00:41:18Z","author_association":"NONE","body":"Not sure where to go from here, so closing.\n","performed_via_github_app":null}]