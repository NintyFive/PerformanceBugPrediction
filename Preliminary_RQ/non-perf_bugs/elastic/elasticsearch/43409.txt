{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43409","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43409/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43409/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43409/events","html_url":"https://github.com/elastic/elasticsearch/issues/43409","id":458414620,"node_id":"MDU6SXNzdWU0NTg0MTQ2MjA=","number":43409,"title":"rollover index mac_docs property not working as expected?","user":{"login":"kleinlain","id":15013266,"node_id":"MDQ6VXNlcjE1MDEzMjY2","avatar_url":"https://avatars1.githubusercontent.com/u/15013266?v=4","gravatar_id":"","url":"https://api.github.com/users/kleinlain","html_url":"https://github.com/kleinlain","followers_url":"https://api.github.com/users/kleinlain/followers","following_url":"https://api.github.com/users/kleinlain/following{/other_user}","gists_url":"https://api.github.com/users/kleinlain/gists{/gist_id}","starred_url":"https://api.github.com/users/kleinlain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kleinlain/subscriptions","organizations_url":"https://api.github.com/users/kleinlain/orgs","repos_url":"https://api.github.com/users/kleinlain/repos","events_url":"https://api.github.com/users/kleinlain/events{/privacy}","received_events_url":"https://api.github.com/users/kleinlain/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-06-20T08:06:35Z","updated_at":"2019-06-20T10:37:28Z","closed_at":"2019-06-20T10:37:28Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Feature request -->\r\n\r\n**Describe the feature**:\r\n\r\n<!-- Bug report -->\r\n\r\nHello,\r\n\r\nI attended Elastic{on} in Berlin yesterday, and was asked the nice people at the AMA booth, but they could not instantly help me and told me to reproduce it, and post it here, so here goes:\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): 5.6.2\r\n\r\n**Plugins installed**: XPack Security\r\n\r\n**JVM version** (`java -version`): 1.8.0_191-b12\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): 18.04.2 LTS (GNU/Linux 4.15.0-50-generic x86_64)\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n- create an index\r\n- limit rollover only by document count\r\n- insert documents\r\n- rollover does not happen at expected doc count\r\n- it seems necessary to repeat the index rollover setting once the amount of documents is reached?\r\n\r\n\r\n\r\n**Steps to reproduce**:\r\nI used the developer console for these steps\r\n\r\n`PUT /rollovertest-000001\r\n{\r\n\t\"aliases\": {\r\n\t\t\"rollovertest\": {}\r\n\t},\r\n\t\"mappings\": {\r\n\t  \"user\": { \r\n      \"_all\":       { \"enabled\": false  }, \r\n      \"properties\": { \r\n        \"title\":    { \"type\": \"keyword\"  }, \r\n        \"name\":     { \"type\": \"text\"  }, \r\n        \"age\":      { \"type\": \"integer\" }  \r\n      }\r\n    }\r\n\t}\r\n}`\r\n\r\n\r\n`POST /rollovertest/_rollover\r\n{\r\n\t\"conditions\": {\r\n\t\t\"max_docs\" : 10\r\n\t}\r\n}\r\n`\r\n- insert documents at least 10, I did this in single posts on purpose, to ensure it's not a job-still-running issue\r\n\r\n`\r\nPOST rollovertest/user\r\n{\r\n    \"title\" : \"some\",\r\n    \"name\" : \"tom\",\r\n    \"age\" : 14\r\n}\r\n`\r\n\r\nIs there a basic misunderstanding on my side when to apply the rollover conditions?\r\n\r\nthanks a lot and kind regards\r\n/Anja\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}