[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76476686","html_url":"https://github.com/elastic/elasticsearch/issues/9766#issuecomment-76476686","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9766","id":76476686,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NDc2Njg2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-02-27T21:38:56Z","updated_at":"2015-02-27T21:38:56Z","author_association":"CONTRIBUTOR","body":"The NPE sounds like a bug, because inner hits is expecting the source to be there.  You should be able to use the `fields` parameter to retrieve stored fields though (at least according to the docs: http://www.elasticsearch.org/guide/en/elasticsearch/reference/1.x/search-request-inner-hits.html#nested-inner-hits )\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77339551","html_url":"https://github.com/elastic/elasticsearch/issues/9766#issuecomment-77339551","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9766","id":77339551,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzM5NTUx","user":{"login":"tstibbs","id":4869014,"node_id":"MDQ6VXNlcjQ4NjkwMTQ=","avatar_url":"https://avatars1.githubusercontent.com/u/4869014?v=4","gravatar_id":"","url":"https://api.github.com/users/tstibbs","html_url":"https://github.com/tstibbs","followers_url":"https://api.github.com/users/tstibbs/followers","following_url":"https://api.github.com/users/tstibbs/following{/other_user}","gists_url":"https://api.github.com/users/tstibbs/gists{/gist_id}","starred_url":"https://api.github.com/users/tstibbs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstibbs/subscriptions","organizations_url":"https://api.github.com/users/tstibbs/orgs","repos_url":"https://api.github.com/users/tstibbs/repos","events_url":"https://api.github.com/users/tstibbs/events{/privacy}","received_events_url":"https://api.github.com/users/tstibbs/received_events","type":"User","site_admin":false},"created_at":"2015-03-05T10:20:16Z","updated_at":"2015-03-05T10:20:16Z","author_association":"CONTRIBUTOR","body":"@clintongormley yeah, I noticed the docs say you can use fields, but it doesn't tell you where to put the `fields` element within the `inner_hits` element - I've tried a whole bunch of different places but can't make any of them do anything other than give me a parse error. Looking at `InnerHitsParseElement` and `InnerHitsQueryParserHelper` etc I can't see it looking for fields so I think probably the docs are wrong in this case.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85383596","html_url":"https://github.com/elastic/elasticsearch/issues/9766#issuecomment-85383596","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9766","id":85383596,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzgzNTk2","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-03-24T07:50:59Z","updated_at":"2015-03-24T07:50:59Z","author_association":"MEMBER","body":"@tstibbs I referred to disabling the entire source and I think in your case you only leave out the nested part of your source. I see how this can result into the NPE you're describing.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85387399","html_url":"https://github.com/elastic/elasticsearch/issues/9766#issuecomment-85387399","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9766","id":85387399,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Mzg3Mzk5","user":{"login":"tstibbs","id":4869014,"node_id":"MDQ6VXNlcjQ4NjkwMTQ=","avatar_url":"https://avatars1.githubusercontent.com/u/4869014?v=4","gravatar_id":"","url":"https://api.github.com/users/tstibbs","html_url":"https://github.com/tstibbs","followers_url":"https://api.github.com/users/tstibbs/followers","following_url":"https://api.github.com/users/tstibbs/following{/other_user}","gists_url":"https://api.github.com/users/tstibbs/gists{/gist_id}","starred_url":"https://api.github.com/users/tstibbs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstibbs/subscriptions","organizations_url":"https://api.github.com/users/tstibbs/orgs","repos_url":"https://api.github.com/users/tstibbs/repos","events_url":"https://api.github.com/users/tstibbs/events{/privacy}","received_events_url":"https://api.github.com/users/tstibbs/received_events","type":"User","site_admin":false},"created_at":"2015-03-24T07:57:38Z","updated_at":"2015-03-24T07:57:38Z","author_association":"CONTRIBUTOR","body":"@martijnvg yep, I noticed that, just thought I'd report the NPE as it's presumably a bug (though a pretty minor one).\n\nMy original point about not being able to retrieve stored fields (e.g. if you disable the entire source) is still valid though I think.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85433181","html_url":"https://github.com/elastic/elasticsearch/issues/9766#issuecomment-85433181","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9766","id":85433181,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDMzMTgx","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-03-24T10:08:56Z","updated_at":"2015-03-24T10:08:56Z","author_association":"MEMBER","body":"@tstibbs I opened #10235 in order to fix the stored field support in inner hits (it was supported, but forgot to add the parsing support for stored fields) and address the NPE you have found.\n","performed_via_github_app":null}]