{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/6325","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6325/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6325/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6325/events","html_url":"https://github.com/elastic/elasticsearch/issues/6325","id":34451204,"node_id":"MDU6SXNzdWUzNDQ1MTIwNA==","number":6325,"title":"Serialization of queue size is broken","user":{"login":"maf23","id":1116021,"node_id":"MDQ6VXNlcjExMTYwMjE=","avatar_url":"https://avatars2.githubusercontent.com/u/1116021?v=4","gravatar_id":"","url":"https://api.github.com/users/maf23","html_url":"https://github.com/maf23","followers_url":"https://api.github.com/users/maf23/followers","following_url":"https://api.github.com/users/maf23/following{/other_user}","gists_url":"https://api.github.com/users/maf23/gists{/gist_id}","starred_url":"https://api.github.com/users/maf23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maf23/subscriptions","organizations_url":"https://api.github.com/users/maf23/orgs","repos_url":"https://api.github.com/users/maf23/repos","events_url":"https://api.github.com/users/maf23/events{/privacy}","received_events_url":"https://api.github.com/users/maf23/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"assignees":[{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2014-05-28T09:49:51Z","updated_at":"2014-07-16T13:27:15Z","closed_at":"2014-07-16T13:27:15Z","author_association":"NONE","active_lock_reason":null,"body":"This issue exists in both in the 1.1 branch and head.\n\nI have set the threadpool.get.queue_size to -1 using the REST API.\nI am running the elasticsearch server with assertions enable (-ea).\nIf then a TransportClient with \"sniff=false\" connects and tries to send a query it gets a org.elasticsearch.client.transport.NoNodeAvailableException\nThe underlying exception is:\nCaused by: java.lang.AssertionError\n    at org.elasticsearch.common.io.stream.StreamOutput.writeVLong(StreamOutput.java:176)\n    at org.elasticsearch.common.io.stream.AdapterStreamOutput.writeVLong(AdapterStreamOutput.java:126)\n    at org.elasticsearch.common.unit.SizeValue.writeTo(SizeValue.java:211)\n    at org.elasticsearch.threadpool.ThreadPool$Info.writeTo(ThreadPool.java:643)\n    at org.elasticsearch.threadpool.ThreadPoolInfo.writeTo(ThreadPoolInfo.java:74)\n    at org.elasticsearch.action.admin.cluster.node.info.NodeInfo.writeTo(NodeInfo.java:291)\n    at org.elasticsearch.action.admin.cluster.node.info.NodesInfoResponse.writeTo(NodesInfoResponse.java:68)\n    at org.elasticsearch.transport.netty.NettyTransportChannel.sendResponse(NettyTransportChannel.java:83)\n    at org.elasticsearch.action.support.nodes.TransportNodesOperationAction$TransportHandler$1.onResponse(TransportNodesOperationAction.java:246)\n    at org.elasticsearch.action.support.nodes.TransportNodesOperationAction$TransportHandler$1.onResponse(TransportNodesOperationAction.java:241)\n    at org.elasticsearch.action.support.nodes.TransportNodesOperationAction$AsyncAction.finishHim(TransportNodesOperationAction.java:227)\n    at org.elasticsearch.action.support.nodes.TransportNodesOperationAction$AsyncAction.onOperation(TransportNodesOperationAction.java:202)\n    at org.elasticsearch.action.support.nodes.TransportNodesOperationAction$AsyncAction.access$900(TransportNodesOperationAction.java:102)\n    at org.elasticsearch.action.support.nodes.TransportNodesOperationAction$AsyncAction$2.run(TransportNodesOperationAction.java:146)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:724)\n\nThat is the server tries to use OutputStream.writeVLong on a negative number.\n\nPlease let me know if you need more information.\n","closed_by":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"performed_via_github_app":null}