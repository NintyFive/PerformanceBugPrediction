{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/31698","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31698/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31698/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31698/events","html_url":"https://github.com/elastic/elasticsearch/issues/31698","id":337116241,"node_id":"MDU6SXNzdWUzMzcxMTYyNDE=","number":31698,"title":" 'Test typed keys parameter for suggesters' in CoreWithSecurityClientYamlTestSuiteIT fails with an assertion error.","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"labels":[{"id":146833729,"node_id":"MDU6TGFiZWwxNDY4MzM3Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Suggesters","name":":Search/Suggesters","color":"0e8a16","default":false,"description":"\"Did you mean\" and suggestions as you type"},{"id":912838879,"node_id":"MDU6TGFiZWw5MTI4Mzg4Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/Security","name":":Security/Security","color":"0e8a16","default":false,"description":"Security issues without another label"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"assignees":[{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2018-06-29T19:45:38Z","updated_at":"2018-08-03T13:43:08Z","closed_at":"2018-08-03T13:43:08Z","author_association":"MEMBER","active_lock_reason":null,"body":"I haven't been able to reproduce this failure locally, but it's come up twice in the last week. Given the assertion error, it may have the same underlying cause as the failures in https://github.com/elastic/elasticsearch/issues/31116.\r\n\r\n---\r\n\r\nLink to the build: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+matrix-java-periodic/ES_BUILD_JAVA=java10,ES_RUNTIME_JAVA=java8,nodes=virtual&&linux/135/console\r\n\r\nCommand to reproduce: \r\n```\r\n./gradlew :x-pack:qa:core-rest-tests-with-security:integTestRunner \\\r\n  -Dtests.seed=F4C38CCFC8C542E8 \\\r\n  -Dtests.class=org.elasticsearch.xpack.security.CoreWithSecurityClientYamlTestSuiteIT \\\r\n  -Dtests.method=\"test {yaml=suggest/40_typed_keys/Test typed keys parameter for suggesters}\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=sr-BA \\\r\n  -Dtests.timezone=SystemV/YST9 \\\r\n  -Dtests.rest.blacklist=cat.aliases/10_basic/Empty cluster,index/10_with_id/Index with ID,indices.get_alias/10_basic/Get alias against closed indices,indices.get_alias/20_empty/Check empty aliases when getting all aliases via /_alias,cat.templates/10_basic/No templates,cat.templates/10_basic/Sort templates,cat.templates/10_basic/Multiple template\r\n```\r\n\r\nRelevant excerpt from the logs:\r\n```\r\nFAILURE 0.21s | CoreWithSecurityClientYamlTestSuiteIT.test {yaml=suggest/40_typed_keys/Test typed keys parameter for suggesters} <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: Failure at [suggest/40_typed_keys:21]: did not get expected warning header [\r\n   > \tThe ability to index a suggestion with no context on a context enabled completion field is deprecated and will be removed in the next major release.\r\n   > ]\r\n   > \tat __randomizedtesting.SeedInfo.seed([21EAC823C8CE8E82:A9BEF7F96632E37A]:0)\r\n   > \tat org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:394)\r\n   > \tat org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.test(ESClientYamlSuiteTestCase.java:362)\r\n   > \tat java.lang.Thread.run(Thread.java:748)\r\n   > Caused by: java.lang.AssertionError: did not get expected warning header [\r\n   > \tThe ability to index a suggestion with no context on a context enabled completion field is deprecated and will be removed in the next major release.\r\n   > ]\r\n   > \tat org.elasticsearch.test.rest.yaml.section.DoSection.checkWarningHeaders(DoSection.java:323)\r\n   > \tat org.elasticsearch.test.rest.yaml.section.DoSection.execute(DoSection.java:256)\r\n   > \tat org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:387)\r\n   > \t... 37 more\r\n```","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}