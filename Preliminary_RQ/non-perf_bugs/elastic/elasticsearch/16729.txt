{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/16729","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16729/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16729/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16729/events","html_url":"https://github.com/elastic/elasticsearch/issues/16729","id":134752327,"node_id":"MDU6SXNzdWUxMzQ3NTIzMjc=","number":16729,"title":"Why es cluster stop to work until i delete the old index?","user":{"login":"zhuqunzhou","id":10348876,"node_id":"MDQ6VXNlcjEwMzQ4ODc2","avatar_url":"https://avatars2.githubusercontent.com/u/10348876?v=4","gravatar_id":"","url":"https://api.github.com/users/zhuqunzhou","html_url":"https://github.com/zhuqunzhou","followers_url":"https://api.github.com/users/zhuqunzhou/followers","following_url":"https://api.github.com/users/zhuqunzhou/following{/other_user}","gists_url":"https://api.github.com/users/zhuqunzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/zhuqunzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhuqunzhou/subscriptions","organizations_url":"https://api.github.com/users/zhuqunzhou/orgs","repos_url":"https://api.github.com/users/zhuqunzhou/repos","events_url":"https://api.github.com/users/zhuqunzhou/events{/privacy}","received_events_url":"https://api.github.com/users/zhuqunzhou/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-02-19T02:12:25Z","updated_at":"2016-02-19T04:41:07Z","closed_at":"2016-02-19T04:41:07Z","author_association":"NONE","active_lock_reason":null,"body":"In [es document](https://www.elastic.co/guide/en/elasticsearch/guide/master/_coping_with_failure.html),it introduce that,`If we restart Node 1,If Node 1 still has copies of the old shards, it will try to reuse them, copying over from the primary shard only the files that have changed in the meantime`.\n\nSo I did an experiment.\n\nHere are 5 nodes in my cluster,Primary shards `1` is saved in node `1`,and replica shards `1` is saved in node `2`.When i restart node `1` and node `2`,Primary shards `1`'s state become `UNASSIGNED`,and replica shards `1`'s state become `UNASSIGNED` too,the health of the cluster become `red`,and the health never become `green`.And the cluster stop to work until i delete the old index.\n","closed_by":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"performed_via_github_app":null}