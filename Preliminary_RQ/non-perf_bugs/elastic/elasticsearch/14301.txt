{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14301","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14301/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14301/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14301/events","html_url":"https://github.com/elastic/elasticsearch/issues/14301","id":113557675,"node_id":"MDU6SXNzdWUxMTM1NTc2NzU=","number":14301,"title":"Field stats query","user":{"login":"pjcard","id":8281121,"node_id":"MDQ6VXNlcjgyODExMjE=","avatar_url":"https://avatars2.githubusercontent.com/u/8281121?v=4","gravatar_id":"","url":"https://api.github.com/users/pjcard","html_url":"https://github.com/pjcard","followers_url":"https://api.github.com/users/pjcard/followers","following_url":"https://api.github.com/users/pjcard/following{/other_user}","gists_url":"https://api.github.com/users/pjcard/gists{/gist_id}","starred_url":"https://api.github.com/users/pjcard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjcard/subscriptions","organizations_url":"https://api.github.com/users/pjcard/orgs","repos_url":"https://api.github.com/users/pjcard/repos","events_url":"https://api.github.com/users/pjcard/events{/privacy}","received_events_url":"https://api.github.com/users/pjcard/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-10-27T10:59:28Z","updated_at":"2015-10-30T09:37:28Z","closed_at":"2015-10-29T19:37:52Z","author_association":"NONE","active_lock_reason":null,"body":"Currently, I use a pattern based indices in order to segregate my data. I use one per day per data set, and when searching supply the set of indices I want either as an index query (as a filter) or on the URL. This can be a little unwieldy with large non-month-aligned ranges due to the simple nature of the pattern matching available.\n\nThe fields API would allow me to index based on something other than a date pattern, but would mean I now required two lookups instead of one, i.e.\n1/ Use field API to ascertain which indices I need for a given query\n2/ Pass the index names in the URI for the search or within an indices query in the DSL.\n\nWhat would be great would be if there was a field stats query that could be used as a filter in a search DSL order to perform the above steps within a single query. That would mean I neither had to rely on patterns nor pass index names in URLs or Filters. (My assumption is that the field stats api call to ascertain the minimum set of indices is far cheaper than searching without limiting the set of indices in the first place). I would have thought this might represent a useful approach for Kibana to use internally, too, unless it's caching the results for the field stats api requests separately to elasticsearch.\n\nThis suggestion was based upon a discussion in #10523 \n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}