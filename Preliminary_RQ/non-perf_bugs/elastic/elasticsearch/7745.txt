{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/7745","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7745/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7745/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7745/events","html_url":"https://github.com/elastic/elasticsearch/issues/7745","id":42891365,"node_id":"MDU6SXNzdWU0Mjg5MTM2NQ==","number":7745,"title":"1.3.2 - MapperParsingException on a previously valid mapping","user":{"login":"stesteau","id":191202,"node_id":"MDQ6VXNlcjE5MTIwMg==","avatar_url":"https://avatars1.githubusercontent.com/u/191202?v=4","gravatar_id":"","url":"https://api.github.com/users/stesteau","html_url":"https://github.com/stesteau","followers_url":"https://api.github.com/users/stesteau/followers","following_url":"https://api.github.com/users/stesteau/following{/other_user}","gists_url":"https://api.github.com/users/stesteau/gists{/gist_id}","starred_url":"https://api.github.com/users/stesteau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stesteau/subscriptions","organizations_url":"https://api.github.com/users/stesteau/orgs","repos_url":"https://api.github.com/users/stesteau/repos","events_url":"https://api.github.com/users/stesteau/events{/privacy}","received_events_url":"https://api.github.com/users/stesteau/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2014-09-16T14:55:04Z","updated_at":"2014-09-16T15:09:53Z","closed_at":"2014-09-16T15:09:53Z","author_association":"NONE","active_lock_reason":null,"body":"Json is valid, mapping was valid in 1.2.1, now i can't create it in 1.3.2\n\n_REQUEST:_\n\n``` json\ncurl -XPOST 'http://.../collection' -d '\n{\n    \"settings\": {\n        \"number_of_shards\": 5,\n        \"number_of_replicas\": 1,\n        \"index\": {\n            \"analysis\": {\n                \"analyzer\": {\n                    \"custom_analyzer_en\": {\n                        \"type\": \"custom\",\n                        \"tokenizer\": \"standard\",\n                        \"char_filter\": [\"html_striper\"],\n                        \"filter\": [\n                            \"standard\",\n                            \"lowercase\",\n                            \"stop\",\n                            \"asciifolding\",\n                            \"elision\",\n                            \"snowball\"\n                        ]\n                    },\n                    \"custom_analyzer_fr\": {\n                        \"type\": \"custom\",\n                        \"tokenizer\": \"standard\",\n                        \"char_filter\": [\"html_striper\"],\n                        \"filter\": [\n                            \"standard\",\n                            \"lowercase\",\n                            \"french_stop\",\n                            \"french_stemmer\",\n                            \"asciifolding\",\n                            \"french_elision\",\n                            \"french_snowball\"\n                        ]\n                    },\n                    \"custom_analyzer_combo\": {\n                        \"type\": \"combo\",\n                        \"sub_analyzers\": [\"custom_analyzer_fr\", \"custom_analyzer_en\"]\n                    }\n                },\n                \"filter\": {\n                    \"snowball\": {\n                        \"type\": \"snowball\",\n                        \"language\": \"English\"\n                    },\n                    \"french_snowball\": {\n                        \"type\": \"snowball\",\n                        \"language\": \"French\"\n                    },\n                    \"french_elision\": {\n                        \"type\": \"elision\",\n                        \"articles\": [\"l\", \"m\", \"t\", \"qu\", \"n\", \"s\", \"j\", \"d\", \"c\", \"jusqu\", \"quoiqu\", \"lorsqu\", \"puisqu\"]\n                    },\n                    \"french_stop\": {\n                        \"type\": \"stop\",\n                        \"stopwords\": [\n                            \"_french_\"\n                        ]\n                    },\n                    \"french_stemmer\": {\n                        \"type\": \"stemmer\",\n                        \"language\": \"french\"\n                    }\n                },\n                \"char_filter\": {\n                    \"html_striper\": {\n                        \"type\": \"html_strip\"\n                    }\n                }\n            }\n        }\n    },\n    \"mappings\": {\n        \"oeuvre\": {\n            \"dynamic\": \"strict\",\n            \"workId\": {\n                \"type\": \"long\"\n            },\n            \"sgoId\": {\n                \"type\": \"long\"\n            },\n            \"status\": {\n                \"type\": \"string\",\n                \"index\": \"not_analyzed\"\n            },\n            \"primaryCompositionId\": {\n                \"type\": \"long\"\n            },\n            \"primaryCompositionType\": {\n                \"type\": \"string\",\n                \"index\": \"not_analyzed\"\n            },\n            \"compositions\": {\n                \"properties\": {\n                    \"id\": {\n                        \"type\": \"long\"\n                    },\n                    \"title_fr\": {\n                        \"type\": \"multi_field\",\n                        \"fields\": {\n                            \"raw\": {\n                                \"type\": \"string\",\n                                \"index\": \"not_analyzed\"\n                            },\n                            \"title\": {\n                                \"type\": \"string\",\n                                \"analyzer\": \"custom_analyzer_fr\"\n                            },\n                            \"title_bilingual\": {\n                                \"type\": \"string\",\n                                \"analyzer\": \"custom_analyzer_combo\"\n                            }\n                        }\n                    },\n                    \"title_en\": {\n                        \"type\": \"multi_field\",\n                        \"fields\": {\n                            \"raw\": {\n                                \"type\": \"string\",\n                                \"index\": \"not_analyzed\"\n                            },\n                            \"title\": {\n                                \"type\": \"string\",\n                                \"analyzer\": \"custom_analyzer_fr\"\n                            },\n                            \"title_bilingual\": {\n                                \"type\": \"string\",\n                                \"analyzer\": \"custom_analyzer_combo\"\n                            }\n                        }\n                    },\n                    \"length\": {\n                        \"type\": \"date\",\n                        \"format\": \"hour_minute_second_millis\"\n                    },\n                    \"compositionType\": {\n                        \"type\": \"multi_field\",\n                        \"fields\": {\n                            \"raw\": {\n                                \"type\": \"string\",\n                                \"index\": \"not_analyzed\"\n                            },\n                            \"text\": {\n                                \"type\": \"string\",\n                                \"analyzer\": \"custom_analyzer_combo\"\n                            }\n                        }\n                    },\n                    \"primaryLanguage\": {\n                        \"type\": \"string\",\n                        \"index\": \"not_analyzed\"\n                    }\n                }\n            }\n        }\n    }\n}'\n```\n\n_RESPONSE:_\n\n``` json\n{\n    \"error\": \"MapperParsingException[mapping [oeuvre]]; nested: MapperParsingException[Root type mapping not empty after parsing! Remaining fields:   [status : {index=not_analyzed, type=string}] [workId : {type=long}] [sgoId : {type=long}] [primaryCompositionId : {type=long}] [primaryCompositionType : {index=not_analyzed, type=string}] [compositions : {properties={id={type=long}, title_en={type=multi_field, fields={raw={index=not_analyzed, type=string}, title={analyzer=custom_analyzer_fr, type=string}, title_bilingual={analyzer=custom_analyzer_combo, type=string}}}, title_fr={type=multi_field, fields={raw={index=not_analyzed, type=string}, title={analyzer=custom_analyzer_fr, type=string}, title_bilingual={analyzer=custom_analyzer_combo, type=string}}}, length={format=hour_minute_second_millis, type=date}, compositionType={type=multi_field, fields={raw={index=not_analyzed, type=string}, text={analyzer=custom_analyzer_combo, type=string}}}, primaryLanguage={index=not_analyzed, type=string}}}]]; \",\n    \"status\": 400\n}\n```\n","closed_by":{"login":"stesteau","id":191202,"node_id":"MDQ6VXNlcjE5MTIwMg==","avatar_url":"https://avatars1.githubusercontent.com/u/191202?v=4","gravatar_id":"","url":"https://api.github.com/users/stesteau","html_url":"https://github.com/stesteau","followers_url":"https://api.github.com/users/stesteau/followers","following_url":"https://api.github.com/users/stesteau/following{/other_user}","gists_url":"https://api.github.com/users/stesteau/gists{/gist_id}","starred_url":"https://api.github.com/users/stesteau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stesteau/subscriptions","organizations_url":"https://api.github.com/users/stesteau/orgs","repos_url":"https://api.github.com/users/stesteau/repos","events_url":"https://api.github.com/users/stesteau/events{/privacy}","received_events_url":"https://api.github.com/users/stesteau/received_events","type":"User","site_admin":false},"performed_via_github_app":null}