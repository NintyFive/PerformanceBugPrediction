{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/11502","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11502/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11502/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11502/events","html_url":"https://github.com/elastic/elasticsearch/issues/11502","id":85252222,"node_id":"MDU6SXNzdWU4NTI1MjIyMg==","number":11502,"title":"[1.3.7] shard fails to start IllegalArgumentException[No type mapped for [0]]","user":{"login":"AVVS","id":1713617,"node_id":"MDQ6VXNlcjE3MTM2MTc=","avatar_url":"https://avatars1.githubusercontent.com/u/1713617?v=4","gravatar_id":"","url":"https://api.github.com/users/AVVS","html_url":"https://github.com/AVVS","followers_url":"https://api.github.com/users/AVVS/followers","following_url":"https://api.github.com/users/AVVS/following{/other_user}","gists_url":"https://api.github.com/users/AVVS/gists{/gist_id}","starred_url":"https://api.github.com/users/AVVS/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AVVS/subscriptions","organizations_url":"https://api.github.com/users/AVVS/orgs","repos_url":"https://api.github.com/users/AVVS/repos","events_url":"https://api.github.com/users/AVVS/events{/privacy}","received_events_url":"https://api.github.com/users/AVVS/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2015-06-04T19:57:06Z","updated_at":"2015-07-24T15:14:50Z","closed_at":"2015-06-05T08:44:40Z","author_association":"NONE","active_lock_reason":null,"body":"i can say that my mappings suck for this index, since every random payload that gets indexed from headers (indexing parsed emails) are set dynamically to \"index\": \"no\" instead of being ignored and not added to the mappings, but, at the same time, this is not something that should make 1/3 of shards fail after a power outage in the data center, where I had 2 replicas of each shard. Can some1 shed some light into this error and whether you want to examine the mapping with all the weird headers that people set on their emails?\n\n``` java\n[2015-06-04 12:53:08,633][WARN ][indices.cluster          ] [storage.01] [messages][9] failed to start shard\norg.elasticsearch.index.gateway.IndexShardGatewayRecoveryException: [messages][9] failed to recover shard\n    at org.elasticsearch.index.gateway.local.LocalIndexShardGateway.recover(LocalIndexShardGateway.java:269)\n    at org.elasticsearch.index.gateway.IndexShardGatewayService$1.run(IndexShardGatewayService.java:132)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.lang.IllegalArgumentException: No type mapped for [0]\n    at org.elasticsearch.index.translog.Translog$Operation$Type.fromId(Translog.java:224)\n    at org.elasticsearch.index.translog.TranslogStreams.readTranslogOperation(TranslogStreams.java:34)\n    at org.elasticsearch.index.gateway.local.LocalIndexShardGateway.recover(LocalIndexShardGateway.java:241)\n    ... 4 more\n[2015-06-04 12:53:08,654][WARN ][cluster.action.shard     ] [storage.01] [messages][9] sending failed shard for [messages][9], node[Rus251Q6T5Ko5LhObmMzrA], [P], s[INITIALIZING], indexUUID [WgO6d6KnRQ6eNgw5CK7_Rw], reason [Failed to start shard, message [IndexShardGatewayRecoveryException[[messages][9] failed to recover shard]; nested: IllegalArgumentException[No type mapped for [0]]; ]]\n```\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}