[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170391866","html_url":"https://github.com/elastic/elasticsearch/issues/15542#issuecomment-170391866","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15542","id":170391866,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDM5MTg2Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-10T20:39:34Z","updated_at":"2016-01-10T20:39:34Z","author_association":"CONTRIBUTOR","body":"@colings86 what do you think?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170475569","html_url":"https://github.com/elastic/elasticsearch/issues/15542#issuecomment-170475569","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15542","id":170475569,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDQ3NTU2OQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-01-11T09:05:09Z","updated_at":"2016-01-11T09:05:09Z","author_association":"MEMBER","body":"I wonder if we should treat a negative derivative as a non-value/null and let the gap policy decide what to do.\n\n> On 10 Jan 2016, at 21:39, Clinton Gormley notifications@github.com wrote:\n> \n> @colings86 what do you think?\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170496154","html_url":"https://github.com/elastic/elasticsearch/issues/15542#issuecomment-170496154","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15542","id":170496154,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDQ5NjE1NA==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2016-01-11T10:05:17Z","updated_at":"2016-01-11T10:05:17Z","author_association":"MEMBER","body":"Personally I would like to keep the logic in the derivative simple and have it working out the derivative in the standard way (where the result can be positive or negative). This makes it very easy for users to know what the derivative aggregation does. For cases such as this we already have a couple of options which could be used to :\n- Use the `bucket_selector` aggregation to only keep the buckets which have a non-negative value for the derivative\n- Use the `bucket_script` aggregation to run a script on each bucket which outputs the value of the aggregation if the derivative value is non-negative or a default value (could be zero) for negative values\n- Use the `bucket_script` aggregation to detect the wrap_around/reset and calculate the actual change in the counter. By this I mean, if you know your values go up to 1000 before they wrap around and you have a value of the derivative of -900 and a value for the counter value of 50 then you know the previous buckets value was 950 and the corrected derivative value (accounting for the wrap_around) should be 100.\n\nIMO they are many things that you might want to do in this (and other use-cases) with the output of the derivative and it would be better to support the various possibilities using other aggregations to process the derivatives output then to try to support everything in the derivative aggregation\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170553287","html_url":"https://github.com/elastic/elasticsearch/issues/15542#issuecomment-170553287","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15542","id":170553287,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDU1MzI4Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-11T13:47:01Z","updated_at":"2016-01-11T13:47:01Z","author_association":"CONTRIBUTOR","body":"@colings86 ++  makes sense, thanks.  Closing\n","performed_via_github_app":null}]