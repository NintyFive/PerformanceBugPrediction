[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/236233380","html_url":"https://github.com/elastic/elasticsearch/issues/19690#issuecomment-236233380","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19690","id":236233380,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjIzMzM4MA==","user":{"login":"LeeDr","id":13542669,"node_id":"MDQ6VXNlcjEzNTQyNjY5","avatar_url":"https://avatars1.githubusercontent.com/u/13542669?v=4","gravatar_id":"","url":"https://api.github.com/users/LeeDr","html_url":"https://github.com/LeeDr","followers_url":"https://api.github.com/users/LeeDr/followers","following_url":"https://api.github.com/users/LeeDr/following{/other_user}","gists_url":"https://api.github.com/users/LeeDr/gists{/gist_id}","starred_url":"https://api.github.com/users/LeeDr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LeeDr/subscriptions","organizations_url":"https://api.github.com/users/LeeDr/orgs","repos_url":"https://api.github.com/users/LeeDr/repos","events_url":"https://api.github.com/users/LeeDr/events{/privacy}","received_events_url":"https://api.github.com/users/LeeDr/received_events","type":"User","site_admin":false},"created_at":"2016-07-29T16:52:45Z","updated_at":"2016-07-29T16:52:45Z","author_association":"CONTRIBUTOR","body":"It's an out of memory issue;\n\n```\n[2016-07-29 11:49:30,030][INFO ][cluster.routing.allocation] [Sauron] Cluster health status changed from [RED] to [YELLOW] (reason: [shards started [[logstash-2016.07.29][0]] ...]).\njava.lang.OutOfMemoryError: GC overhead limit exceeded\nDumping heap to java_pid136212.hprof ...\nHeap dump file created [1202950405 bytes in 9.270 secs]\n[2016-07-29 11:51:45,979][DEBUG][action.admin.indices.stats] [Sauron] failed to execute [indices:monitor/stats] on node [aVa1p_8zSCKK3gbdJEOrJw]\nRemoteTransportException[[Sauron][127.0.0.1:9300][indices:monitor/stats[n]]]; nested: OutOfMemoryError[GC overhead limit exceeded];\nCaused by: java.lang.OutOfMemoryError: GC overhead limit exceeded\n        at org.elasticsearch.action.support.ChildTaskRequest.createTask(ChildTaskRequest.java:72)\n        at org.elasticsearch.action.support.ChildTaskRequest.createTask(ChildTaskRequest.java:68)\n        at org.elasticsearch.tasks.TaskManager.register(TaskManager.java:67)\n        at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:69)\n        at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:376)\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\n[2016-07-29 11:51:45,979][DEBUG][action.search            ] [Sauron] [logstash-2016.07.29][0]: Failed to execute [org.elasticsearch.action.search.SearchRequest@4d631ce9] while moving to second phase\njava.lang.OutOfMemoryError: GC overhead limit exceeded\n        at org.elasticsearch.search.aggregations.bucket.histogram.InternalHistogram$Factory.createBucket(InternalHistogram.java:261)\n        at org.elasticsearch.search.aggregations.bucket.histogram.InternalHistogram.addEmptyBuckets(InternalHistogram.java:437)\n        at org.elasticsearch.search.aggregations.bucket.histogram.InternalHistogram.doReduce(InternalHistogram.java:466)\n        at org.elasticsearch.search.aggregations.InternalAggregation.reduce(InternalAggregation.java:153)\n        at org.elasticsearch.search.aggregations.InternalAggregations.reduce(InternalAggregations.java:170)\n        at org.elasticsearch.search.aggregations.bucket.histogram.InternalHistogram$Bucket.reduce(InternalHistogram.java:146)\n        at org.elasticsearch.search.aggregations.bucket.histogram.InternalHistogram.reduceBuckets(InternalHistogram.java:363)\n        at org.elasticsearch.search.aggregations.bucket.histogram.InternalHistogram.doReduce(InternalHistogram.java:462)\n        at org.elasticsearch.search.aggregations.InternalAggregation.reduce(InternalAggregation.java:153)\n        at org.elasticsearch.search.aggregations.InternalAggregations.reduce(InternalAggregations.java:170)\n        at org.elasticsearch.search.controller.SearchPhaseController.merge(SearchPhaseController.java:411)\n        at org.elasticsearch.action.search.SearchCountAsyncAction.moveToSecondPhase(SearchCountAsyncAction.java:59)\n        at org.elasticsearch.action.search.AbstractSearchAsyncAction.innerMoveToSecondPhase(AbstractSearchAsyncAction.java:374)\n        at org.elasticsearch.action.search.AbstractSearchAsyncAction.onFirstPhaseResult(AbstractSearchAsyncAction.java:171)\n        at org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onResponse(AbstractSearchAsyncAction.java:147)\n        at org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onResponse(AbstractSearchAsyncAction.java:144)\n        at org.elasticsearch.action.ActionListenerResponseHandler.handleResponse(ActionListenerResponseHandler.java:41)\n        at org.elasticsearch.transport.TransportService$DirectResponseChannel.processResponse(TransportService.java:819)\n        at org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:803)\n        at org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:793)\n        at org.elasticsearch.transport.DelegatingTransportChannel.sendResponse(DelegatingTransportChannel.java:58)\n        at org.elasticsearch.transport.RequestHandlerRegistry$TransportChannelWrapper.sendResponse(RequestHandlerRegistry.java:134)\n        at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:369)\n        at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:365)\n        at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)\n        at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)\n        at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:376)\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\n[2016-07-29 11:51:53,332][INFO ][node                     ] [Sauron] stopping ...\n[2016-07-29 11:51:53,399][INFO ][node                     ] [Sauron] stopped\n[2016-07-29 11:51:53,402][INFO ][node                     ] [Sauron] closing ...\n[2016-07-29 11:51:53,431][INFO ][node                     ] [Sauron] closed\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/236309068","html_url":"https://github.com/elastic/elasticsearch/issues/19690#issuecomment-236309068","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19690","id":236309068,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjMwOTA2OA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-07-29T22:25:18Z","updated_at":"2016-07-29T22:25:18Z","author_association":"MEMBER","body":"In #18419 we added GC overhead logging and in #19272 we changed Elasticsearch so that it will immediately die on OOM instead of being an undead zombie. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/236312587","html_url":"https://github.com/elastic/elasticsearch/issues/19690#issuecomment-236312587","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19690","id":236312587,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjMxMjU4Nw==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2016-07-29T22:48:18Z","updated_at":"2016-07-29T22:48:18Z","author_association":"MEMBER","body":"@jasontedor aren't you supposed to be on vacation?  Get out of here :P\n\nIt ended up being an issue with too many buckets.  A large (but sparse) range which was blowing out the heap due to 2.x's default `min_doc_count: 0`.  The chart in question which was causing the issue was originally built on 1.x where `min_doc_count: 1` so it masked the issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/236347626","html_url":"https://github.com/elastic/elasticsearch/issues/19690#issuecomment-236347626","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19690","id":236347626,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjM0NzYyNg==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-07-30T06:31:43Z","updated_at":"2016-07-30T06:31:43Z","author_association":"MEMBER","body":"Is it interesting to see if the new 5.0 circuit break will prevent this?\n\nOn 30 jul. 2016 12:48 AM +0200, Zachary Tong notifications@github.com, wrote:\n\n> @jasontedor (https://github.com/jasontedor) aren't you supposed to be on vacation? Get out of here :P\n> \n> It ended up being an issue with too many buckets. A large (but sparse) range which was blowing out the heap due to 2.x's default min_doc_count: 0. The chart in question which was causing the issue was originally built on 1.x where min_doc_count: 1 so it masked the issue.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub (https://github.com/elastic/elasticsearch/issues/19690#issuecomment-236312587), or mute the thread (https://github.com/notifications/unsubscribe-auth/AA9bJzaRq2olOOnQ-PPX8gr3UboJLXJwks5qaoM_gaJpZM4JYXu6).\n","performed_via_github_app":null}]