[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372743798","html_url":"https://github.com/elastic/elasticsearch/issues/29024#issuecomment-372743798","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29024","id":372743798,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mjc0Mzc5OA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-13T17:10:23Z","updated_at":"2018-03-13T17:10:23Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/417613851","html_url":"https://github.com/elastic/elasticsearch/issues/29024#issuecomment-417613851","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29024","id":417613851,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNzYxMzg1MQ==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2018-08-31T09:49:54Z","updated_at":"2018-08-31T09:49:54Z","author_association":"CONTRIBUTOR","body":"@polyfractal I have just opened an issue with the opposite case (slow `took`and fast profile) , the question is if profiling should use the cache at all?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/419414377","html_url":"https://github.com/elastic/elasticsearch/issues/29024#issuecomment-419414377","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29024","id":419414377,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTQxNDM3Nw==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2018-09-07T11:44:34Z","updated_at":"2018-09-07T11:44:34Z","author_association":"MEMBER","body":"Hiya @iverase, sorry for the delay.  \r\n\r\nI may be missing the distinction between the two issues, but that was my intention with this one:  do not cache the profile response in the Elasticsearch query cache (to prevent results from being served from cache), and try to prevent Lucene from caching the query components by flagging the whole thing as not-cacheable.\r\n\r\nI probably just explained myself poorly in the first post :)  I agree... we should prevent profiling from being affected by various caches as much as possible since it makes comparisons difficult.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/419422347","html_url":"https://github.com/elastic/elasticsearch/issues/29024#issuecomment-419422347","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29024","id":419422347,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTQyMjM0Nw==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2018-09-07T12:20:43Z","updated_at":"2018-09-07T12:20:43Z","author_association":"CONTRIBUTOR","body":"I see three cases:\r\n\r\n1) query is profiled and shows a slow execution time. Then it is executed outside the profiler and it has a fast `took` because it is is served by the cache (this case).\r\n2) The opposite is possible. You run a query and has a fairly big `took`. Then you profile it and it shows a fast profile because it is profiling the query served by the cache.\r\n3) It is possible even to run the profiler to the same query twice and the results being totally different (2nd is served by the cache).\r\n\r\nMy point is that maybe the profiler should never see the queries served by the cache nor those queries being put on the cache. A fancy addition would be to mark the parts of the query which are sensitive for caching. \r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542609001","html_url":"https://github.com/elastic/elasticsearch/issues/29024#issuecomment-542609001","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29024","id":542609001,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjYwOTAwMQ==","user":{"login":"silbertmonaphia","id":17708548,"node_id":"MDQ6VXNlcjE3NzA4NTQ4","avatar_url":"https://avatars0.githubusercontent.com/u/17708548?v=4","gravatar_id":"","url":"https://api.github.com/users/silbertmonaphia","html_url":"https://github.com/silbertmonaphia","followers_url":"https://api.github.com/users/silbertmonaphia/followers","following_url":"https://api.github.com/users/silbertmonaphia/following{/other_user}","gists_url":"https://api.github.com/users/silbertmonaphia/gists{/gist_id}","starred_url":"https://api.github.com/users/silbertmonaphia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/silbertmonaphia/subscriptions","organizations_url":"https://api.github.com/users/silbertmonaphia/orgs","repos_url":"https://api.github.com/users/silbertmonaphia/repos","events_url":"https://api.github.com/users/silbertmonaphia/events{/privacy}","received_events_url":"https://api.github.com/users/silbertmonaphia/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T09:17:10Z","updated_at":"2019-10-16T09:17:10Z","author_association":"NONE","body":"Is there any progress? get same issue(case 3) while profiling es query","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/548071315","html_url":"https://github.com/elastic/elasticsearch/issues/29024#issuecomment-548071315","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29024","id":548071315,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODA3MTMxNQ==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2019-10-30T19:16:49Z","updated_at":"2019-10-30T19:16:49Z","author_association":"MEMBER","body":"Hi @silbertmonaphia, there is a (just-opened) PR that I believe will fix this issue: https://github.com/elastic/elasticsearch/pull/48195","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/578858701","html_url":"https://github.com/elastic/elasticsearch/issues/29024#issuecomment-578858701","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29024","id":578858701,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODg1ODcwMQ==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2020-01-27T17:24:45Z","updated_at":"2020-01-27T17:24:45Z","author_association":"MEMBER","body":"Closed by https://github.com/elastic/elasticsearch/pull/48195","performed_via_github_app":null}]