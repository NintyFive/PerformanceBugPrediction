{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/64194","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/64194/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/64194/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/64194/events","html_url":"https://github.com/elastic/elasticsearch/issues/64194","id":730270708,"node_id":"MDU6SXNzdWU3MzAyNzA3MDg=","number":64194,"title":"Timeout connecting to [/localhost:9200]","user":{"login":"carolcoral","id":8952687,"node_id":"MDQ6VXNlcjg5NTI2ODc=","avatar_url":"https://avatars1.githubusercontent.com/u/8952687?v=4","gravatar_id":"","url":"https://api.github.com/users/carolcoral","html_url":"https://github.com/carolcoral","followers_url":"https://api.github.com/users/carolcoral/followers","following_url":"https://api.github.com/users/carolcoral/following{/other_user}","gists_url":"https://api.github.com/users/carolcoral/gists{/gist_id}","starred_url":"https://api.github.com/users/carolcoral/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carolcoral/subscriptions","organizations_url":"https://api.github.com/users/carolcoral/orgs","repos_url":"https://api.github.com/users/carolcoral/repos","events_url":"https://api.github.com/users/carolcoral/events{/privacy}","received_events_url":"https://api.github.com/users/carolcoral/received_events","type":"User","site_admin":false},"labels":[{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-10-27T09:26:00Z","updated_at":"2020-10-27T09:34:47Z","closed_at":"2020-10-27T09:34:47Z","author_association":"NONE","active_lock_reason":null,"body":"es version:7.9.2\r\njava:1.8\r\nmaven:\r\n```java\r\n<dependency>\r\n    <groupId>org.elasticsearch.client</groupId>\r\n    <artifactId>elasticsearch-rest-high-level-client</artifactId>\r\n    <version>7.9.2</version>\r\n</dependency>\r\n<dependency>\r\n    <groupId>org.elasticsearch.client</groupId>\r\n    <artifactId>elasticsearch-rest-client</artifactId>\r\n    <version>7.9.2</version>\r\n</dependency>\r\n```\r\nWhen i use \"curl\" to get source ,it worked and success.But when i use it in my program,it always \"timeout\".\r\n![image](https://user-images.githubusercontent.com/8952687/97282074-32f5a180-1879-11eb-8f41-53b5cc61f7c2.png)\r\nHere is my code, teach me how can i resolve it, please.\r\n```java\r\n        RestClientBuilder restClientBuilder = RestClient.builder(\r\n                new HttpHost(\"localhost\", 9200, \"http\")\r\n        ).setRequestConfigCallback(new RestClientBuilder.RequestConfigCallback() {\r\n            public RequestConfig.Builder customizeRequestConfig(RequestConfig.Builder builder) {\r\n                builder.setConnectTimeout(5000);\r\n                builder.setSocketTimeout(60000);\r\n                return builder;\r\n            }\r\n        });\r\n        Header[] defaultHeaders = new Header[]{new BasicHeader(\"Content-type\", \"application/json\")};\r\n        restClientBuilder.setDefaultHeaders(defaultHeaders);\r\n        RestHighLevelClient restHighLevelClient = new RestHighLevelClient(restClientBuilder);\r\n        ClusterHealthRequest clusterHealthRequest = new ClusterHealthRequest();\r\n        clusterHealthRequest.indices();\r\n        System.out.println(clusterHealthRequest.toString());\r\n        try {\r\n            restHighLevelClient.cluster().health(clusterHealthRequest, RequestOptions.DEFAULT);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n```\r\nWhen i want to search source from it, it note me \"Caused by: java.net.ConnectException: Connection timed out: no further information\".\r\n![image](https://user-images.githubusercontent.com/8952687/97282980-481f0000-187a-11eb-888a-ad34acf66def.png)\r\nHere is my code:\r\n```java\r\n            String index = \"test-*\";\r\n            //Timeout (seconds)\r\n            int elasticsearchTimeout = 1000 * 60;\r\n            final Scroll scroll = new Scroll(TimeValue.timeValueMinutes(10L));\r\n            SearchRequest searchRequest = new SearchRequest(index);\r\n\r\n            SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder();\r\n            searchSourceBuilder.query(\r\n                    QueryBuilders.boolQuery()\r\n                            .must(QueryBuilders.matchPhraseQuery(\"phone.keyword\", phone))\r\n                            .must(QueryBuilders.rangeQuery(\"@timestamp\").gte(startTime).lte(endTime))\r\n            )\r\n                    .timeout(new TimeValue(elasticsearchTimeout,TimeUnit.SECONDS))\r\n                    .size(10);\r\n\r\n            //TermsAggregationBuilder termsAggregationBuilder = AggregationBuilders.terms()\r\n            System.out.println(searchSourceBuilder.toString());\r\n\r\n            searchRequest.scroll(scroll);\r\n            searchRequest.source(searchSourceBuilder);\r\n            System.out.println(restHighLevelClient.getLowLevelClient().getNodes());\r\n            SearchResponse searchResponse = restHighLevelClient.search(searchRequest, RequestOptions.DEFAULT);\r\n            String scrollId = searchResponse.getScrollId();\r\n            SearchScrollRequest searchScrollRequest = new SearchScrollRequest(scrollId);\r\n            searchScrollRequest.scroll(scroll);\r\n            restHighLevelClient.scroll(searchScrollRequest, RequestOptions.DEFAULT);\r\n```","closed_by":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"performed_via_github_app":null}