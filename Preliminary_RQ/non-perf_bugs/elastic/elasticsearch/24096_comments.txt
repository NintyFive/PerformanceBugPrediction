[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/324944885","html_url":"https://github.com/elastic/elasticsearch/issues/24096#issuecomment-324944885","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24096","id":324944885,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNDk0NDg4NQ==","user":{"login":"jpcarey","id":5118470,"node_id":"MDQ6VXNlcjUxMTg0NzA=","avatar_url":"https://avatars2.githubusercontent.com/u/5118470?v=4","gravatar_id":"","url":"https://api.github.com/users/jpcarey","html_url":"https://github.com/jpcarey","followers_url":"https://api.github.com/users/jpcarey/followers","following_url":"https://api.github.com/users/jpcarey/following{/other_user}","gists_url":"https://api.github.com/users/jpcarey/gists{/gist_id}","starred_url":"https://api.github.com/users/jpcarey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpcarey/subscriptions","organizations_url":"https://api.github.com/users/jpcarey/orgs","repos_url":"https://api.github.com/users/jpcarey/repos","events_url":"https://api.github.com/users/jpcarey/events{/privacy}","received_events_url":"https://api.github.com/users/jpcarey/received_events","type":"User","site_admin":false},"created_at":"2017-08-25T14:55:55Z","updated_at":"2017-08-25T14:55:55Z","author_association":"MEMBER","body":"This through me for a loop. I had set the limit to 10, in which it is impossible to post a document to an index. If you use a limit of 20, you can have a total of 4 fields in your document. Not entirely sure how we have 16 meta type fields...\r\n\r\n```\r\nDELETE test\r\nPUT test\r\n{\r\n  \"settings\": {\r\n    \"index.mapping.total_fields.limit\": 20\r\n  }\r\n}\r\nPOST test/t/1\r\n{\r\n  \"0\": \"hello\",\r\n  \"1\": \"hello\",\r\n  \"2\": \"hello\",\r\n  \"3\": \"hello\"\r\n}\r\n# ^ works\r\nPOST test/t/2\r\n{\r\n  \"0\": \"hello\",\r\n  \"1\": \"hello\",\r\n  \"2\": \"hello\",\r\n  \"3\": \"hello\",\r\n  \"4\": \"hello\"\r\n}\r\n# hits the 20 field limit\r\n```\r\n\r\nWhat is also confusing: Using the 20 field limit (4 real fields), you can create 4 unique fields for as many types as you can create. The field limit is being applied to the _type, not the total _mapping.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/324950606","html_url":"https://github.com/elastic/elasticsearch/issues/24096#issuecomment-324950606","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24096","id":324950606,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNDk1MDYwNg==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-08-25T15:15:38Z","updated_at":"2017-08-25T15:15:38Z","author_association":"MEMBER","body":"> This through me for a loop. I had set the limit to 10, in which it is impossible to post a document to an index. If you use a limit of 20, you can have a total of 4 fields in your document. Not entirely sure how we have 16 meta type fields...\r\n\r\nSince you use dynamic mapping in your example, each field will create an extra \".raw\" field.\r\nSo you have 8 fields in your mapping and there are 12 metadata fields in es 5.x:\r\n  * _routing\r\n  * _ttl\r\n  * _index\r\n  * _type\r\n  * _all\r\n  * _parent\r\n  * _field_names \r\n  * _source\r\n  * _id\r\n  * _version\r\n  * _timestamp\r\n  * _uid\r\n\r\nSome of these fields are deprecated or not activated by default but we count them in the limit.\r\n\r\n> This is because index.mapping.total_fields.limit includes the count of meta fields and most of these will not show up in the mappings api output. It will be nice to clarify this in the documentation, similar to how we do clarify that index.mapping.depth.limit counts also the root level as 1 level.\r\n\r\nMaybe it would be simpler if we remove the metadata fields from the computation. We don't want to list all metadata fields in this doc just for the sake of counting and they are in the mapping anyway.\r\n\r\n> What is also confusing: Using the 20 field limit (4 real fields), you can create 4 unique fields for as many types as you can create. The field limit is being applied to the _type, not the total _mapping.\r\n\r\nThis will fix itself with the removal of types so not sure if we should do something here.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/383871466","html_url":"https://github.com/elastic/elasticsearch/issues/24096#issuecomment-383871466","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24096","id":383871466,"node_id":"MDEyOklzc3VlQ29tbWVudDM4Mzg3MTQ2Ng==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-24T09:46:14Z","updated_at":"2018-04-24T09:46:14Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402853209","html_url":"https://github.com/elastic/elasticsearch/issues/24096#issuecomment-402853209","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24096","id":402853209,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjg1MzIwOQ==","user":{"login":"nfsec","id":15172919,"node_id":"MDQ6VXNlcjE1MTcyOTE5","avatar_url":"https://avatars0.githubusercontent.com/u/15172919?v=4","gravatar_id":"","url":"https://api.github.com/users/nfsec","html_url":"https://github.com/nfsec","followers_url":"https://api.github.com/users/nfsec/followers","following_url":"https://api.github.com/users/nfsec/following{/other_user}","gists_url":"https://api.github.com/users/nfsec/gists{/gist_id}","starred_url":"https://api.github.com/users/nfsec/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nfsec/subscriptions","organizations_url":"https://api.github.com/users/nfsec/orgs","repos_url":"https://api.github.com/users/nfsec/repos","events_url":"https://api.github.com/users/nfsec/events{/privacy}","received_events_url":"https://api.github.com/users/nfsec/received_events","type":"User","site_admin":false},"created_at":"2018-07-05T21:08:28Z","updated_at":"2018-07-05T21:08:28Z","author_association":"CONTRIBUTOR","body":"A moment ago I had the same problem and only information from github clarified the principle of operation.","performed_via_github_app":null}]