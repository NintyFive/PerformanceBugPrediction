{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/27645","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27645/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27645/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27645/events","html_url":"https://github.com/elastic/elasticsearch/issues/27645","id":279008341,"node_id":"MDU6SXNzdWUyNzkwMDgzNDE=","number":27645,"title":"Provide an option to disable SecurityManager and an option to cache directory.","user":{"login":"xiezhenye","id":2225688,"node_id":"MDQ6VXNlcjIyMjU2ODg=","avatar_url":"https://avatars3.githubusercontent.com/u/2225688?v=4","gravatar_id":"","url":"https://api.github.com/users/xiezhenye","html_url":"https://github.com/xiezhenye","followers_url":"https://api.github.com/users/xiezhenye/followers","following_url":"https://api.github.com/users/xiezhenye/following{/other_user}","gists_url":"https://api.github.com/users/xiezhenye/gists{/gist_id}","starred_url":"https://api.github.com/users/xiezhenye/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiezhenye/subscriptions","organizations_url":"https://api.github.com/users/xiezhenye/orgs","repos_url":"https://api.github.com/users/xiezhenye/repos","events_url":"https://api.github.com/users/xiezhenye/events{/privacy}","received_events_url":"https://api.github.com/users/xiezhenye/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2017-12-04T14:09:15Z","updated_at":"2019-12-11T13:50:21Z","closed_at":"2018-01-17T16:43:53Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Feature request -->\r\nWe meets performance problem in refresh. We found many lstat syscall while refresh operation, and dentry cache is exhausted.\r\n\r\nThe problem is caused mainly by two issue.\r\n1 While SecurityManager check permission of a file, it calls java.io.FileSystem.canonicalize and it will trace from root dir to the end of path and lstat every node.\r\n\r\n2 In org.apache.lucene.store.FSDirectory construct, it calls java.nio.Path.toRealPath and it will also do the same thing.\r\n\r\nCaching FSDirectory object and disable SecurityManager will save many unnecessary lstat syscall and improve performance.\r\n\r\nProviding an option to disable  SecurityManager will also make it easy to trace the code by such as  btrace.\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}