[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66174747","html_url":"https://github.com/elastic/elasticsearch/issues/8827#issuecomment-66174747","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8827","id":66174747,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTc0NzQ3","user":{"login":"bobrik","id":89186,"node_id":"MDQ6VXNlcjg5MTg2","avatar_url":"https://avatars0.githubusercontent.com/u/89186?v=4","gravatar_id":"","url":"https://api.github.com/users/bobrik","html_url":"https://github.com/bobrik","followers_url":"https://api.github.com/users/bobrik/followers","following_url":"https://api.github.com/users/bobrik/following{/other_user}","gists_url":"https://api.github.com/users/bobrik/gists{/gist_id}","starred_url":"https://api.github.com/users/bobrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobrik/subscriptions","organizations_url":"https://api.github.com/users/bobrik/orgs","repos_url":"https://api.github.com/users/bobrik/repos","events_url":"https://api.github.com/users/bobrik/events{/privacy}","received_events_url":"https://api.github.com/users/bobrik/received_events","type":"User","site_admin":false},"created_at":"2014-12-08T19:48:23Z","updated_at":"2014-12-08T19:48:23Z","author_association":"CONTRIBUTOR","body":"Found some info about cluster status during shard movement:\n\n```\nepoch      timestamp cluster    status node.total node.data shards  pri relo init unassign\n1418059931 21:32:11  statistics green           4         4   2347 2231    6    0        0\n```\n\n```\nepoch      timestamp cluster    status node.total node.data shards  pri relo init unassign\n1418065863 23:11:03  statistics red             4         4   2346 2230    0    0        1\n```\n\nShard relocation started ~19:00:\n\n```\nepoch      timestamp cluster    status node.total node.data shards  pri relo init unassign\n1418050789 18:59:49  statistics green           4         4   2347 2231    0    0        0\n```\n\n```\nepoch      timestamp cluster    status node.total node.data shards  pri relo init unassign\n1418050845 19:00:45  statistics green           4         4   2347 2231    6    0        0\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66175515","html_url":"https://github.com/elastic/elasticsearch/issues/8827#issuecomment-66175515","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8827","id":66175515,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTc1NTE1","user":{"login":"bobrik","id":89186,"node_id":"MDQ6VXNlcjg5MTg2","avatar_url":"https://avatars0.githubusercontent.com/u/89186?v=4","gravatar_id":"","url":"https://api.github.com/users/bobrik","html_url":"https://github.com/bobrik","followers_url":"https://api.github.com/users/bobrik/followers","following_url":"https://api.github.com/users/bobrik/following{/other_user}","gists_url":"https://api.github.com/users/bobrik/gists{/gist_id}","starred_url":"https://api.github.com/users/bobrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobrik/subscriptions","organizations_url":"https://api.github.com/users/bobrik/orgs","repos_url":"https://api.github.com/users/bobrik/repos","events_url":"https://api.github.com/users/bobrik/events{/privacy}","received_events_url":"https://api.github.com/users/bobrik/received_events","type":"User","site_admin":false},"created_at":"2014-12-08T19:52:31Z","updated_at":"2014-12-08T19:52:31Z","author_association":"CONTRIBUTOR","body":"Shard is currently trying to restore, loading at least one core 100%:\n\n```\ncurl http://web607:9200/_nodes/_local/hot_threads\n::: [statistics08][Ai0OIXsCTgO_YE1MhJLRiQ][web607][inet[/192.168.2.96:9300]]\n\n   92.2% (461.1ms out of 500ms) cpu usage by thread 'elasticsearch[statistics08][clusterService#updateTask][T#1]'\n     5/10 snapshots sharing following 15 elements\n       org.elasticsearch.cluster.routing.IndexShardRoutingTable.shardsWithState(IndexShardRoutingTable.java:515)\n       org.elasticsearch.cluster.routing.IndexRoutingTable.shardsWithState(IndexRoutingTable.java:268)\n       org.elasticsearch.cluster.routing.RoutingTable.shardsWithState(RoutingTable.java:114)\n       org.elasticsearch.cluster.routing.allocation.decider.DiskThresholdDecider.sizeOfRelocatingShards(DiskThresholdDecider.java:225)\n       org.elasticsearch.cluster.routing.allocation.decider.DiskThresholdDecider.canRemain(DiskThresholdDecider.java:434)\n       org.elasticsearch.cluster.routing.allocation.decider.AllocationDeciders.canRemain(AllocationDeciders.java:105)\n       org.elasticsearch.cluster.routing.allocation.AllocationService.moveShards(AllocationService.java:257)\n       org.elasticsearch.cluster.routing.allocation.AllocationService.reroute(AllocationService.java:223)\n       org.elasticsearch.cluster.routing.allocation.AllocationService.applyFailedShards(AllocationService.java:113)\n       org.elasticsearch.cluster.action.shard.ShardStateAction$3.execute(ShardStateAction.java:183)\n       org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:329)\n       org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:153)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:722)\n     2/10 snapshots sharing following 20 elements\n       sun.misc.Unsafe.park(Native Method)\n       java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n       java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1033)\n       java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1326)\n       java.util.concurrent.CountDownLatch.await(CountDownLatch.java:282)\n       org.elasticsearch.discovery.BlockingClusterStatePublishResponseHandler.awaitAllNodes(BlockingClusterStatePublishResponseHandler.java:58)\n       org.elasticsearch.discovery.zen.publish.PublishClusterStateAction.publish(PublishClusterStateAction.java:153)\n       org.elasticsearch.discovery.zen.publish.PublishClusterStateAction.publish(PublishClusterStateAction.java:86)\n       org.elasticsearch.discovery.zen.ZenDiscovery.publish(ZenDiscovery.java:318)\n       sun.reflect.GeneratedMethodAccessor33.invoke(Unknown Source)\n       sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n       java.lang.reflect.Method.invoke(Method.java:601)\n       org.elasticsearch.common.inject.internal.ConstructionContext$DelegatingInvocationHandler.invoke(ConstructionContext.java:110)\n       com.sun.proxy.$Proxy12.publish(Unknown Source)\n       org.elasticsearch.discovery.DiscoveryService.publish(DiscoveryService.java:137)\n       org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:423)\n       org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:153)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:722)\n     3/10 snapshots sharing following 4 elements\n       org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:153)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:722)\n\n    9.3% (46.7ms out of 500ms) cpu usage by thread 'elasticsearch[statistics08][bulk][T#8]'\n     10/10 snapshots sharing following 10 elements\n       sun.misc.Unsafe.park(Native Method)\n       java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n       java.util.concurrent.LinkedTransferQueue.awaitMatch(LinkedTransferQueue.java:735)\n       java.util.concurrent.LinkedTransferQueue.xfer(LinkedTransferQueue.java:644)\n       java.util.concurrent.LinkedTransferQueue.take(LinkedTransferQueue.java:1137)\n       org.elasticsearch.common.util.concurrent.SizeBlockingQueue.take(SizeBlockingQueue.java:162)\n       java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:722)\n\n    3.2% (16ms out of 500ms) cpu usage by thread 'elasticsearch[statistics08][bulk][T#9]'\n     10/10 snapshots sharing following 10 elements\n       sun.misc.Unsafe.park(Native Method)\n       java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)\n       java.util.concurrent.LinkedTransferQueue.awaitMatch(LinkedTransferQueue.java:735)\n       java.util.concurrent.LinkedTransferQueue.xfer(LinkedTransferQueue.java:644)\n       java.util.concurrent.LinkedTransferQueue.take(LinkedTransferQueue.java:1137)\n       org.elasticsearch.common.util.concurrent.SizeBlockingQueue.take(SizeBlockingQueue.java:162)\n       java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:722)\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66179975","html_url":"https://github.com/elastic/elasticsearch/issues/8827#issuecomment-66179975","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8827","id":66179975,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTc5OTc1","user":{"login":"bobrik","id":89186,"node_id":"MDQ6VXNlcjg5MTg2","avatar_url":"https://avatars0.githubusercontent.com/u/89186?v=4","gravatar_id":"","url":"https://api.github.com/users/bobrik","html_url":"https://github.com/bobrik","followers_url":"https://api.github.com/users/bobrik/followers","following_url":"https://api.github.com/users/bobrik/following{/other_user}","gists_url":"https://api.github.com/users/bobrik/gists{/gist_id}","starred_url":"https://api.github.com/users/bobrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobrik/subscriptions","organizations_url":"https://api.github.com/users/bobrik/orgs","repos_url":"https://api.github.com/users/bobrik/repos","events_url":"https://api.github.com/users/bobrik/events{/privacy}","received_events_url":"https://api.github.com/users/bobrik/received_events","type":"User","site_admin":false},"created_at":"2014-12-08T20:20:41Z","updated_at":"2014-12-08T20:20:41Z","author_association":"CONTRIBUTOR","body":"This index actually was fully scrolled with spark a couple of days ago and there were no issues. I have logs from this node for a year (since 0.90.5), hope that could help with investigation.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158686348","html_url":"https://github.com/elastic/elasticsearch/issues/8827#issuecomment-158686348","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8827","id":158686348,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODY4NjM0OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-21T22:17:59Z","updated_at":"2015-11-21T22:17:59Z","author_association":"CONTRIBUTOR","body":"Sorry, this issue got lost.  Given that it is from a year ago, I assume you've resolved the issue already.  So much has changed since then, that there's no point in investigating further.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/159067150","html_url":"https://github.com/elastic/elasticsearch/issues/8827#issuecomment-159067150","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8827","id":159067150,"node_id":"MDEyOklzc3VlQ29tbWVudDE1OTA2NzE1MA==","user":{"login":"bobrik","id":89186,"node_id":"MDQ6VXNlcjg5MTg2","avatar_url":"https://avatars0.githubusercontent.com/u/89186?v=4","gravatar_id":"","url":"https://api.github.com/users/bobrik","html_url":"https://github.com/bobrik","followers_url":"https://api.github.com/users/bobrik/followers","following_url":"https://api.github.com/users/bobrik/following{/other_user}","gists_url":"https://api.github.com/users/bobrik/gists{/gist_id}","starred_url":"https://api.github.com/users/bobrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobrik/subscriptions","organizations_url":"https://api.github.com/users/bobrik/orgs","repos_url":"https://api.github.com/users/bobrik/repos","events_url":"https://api.github.com/users/bobrik/events{/privacy}","received_events_url":"https://api.github.com/users/bobrik/received_events","type":"User","site_admin":false},"created_at":"2015-11-23T21:18:13Z","updated_at":"2015-11-23T21:18:13Z","author_association":"CONTRIBUTOR","body":"Yeah, fixed that by changing company and country, thanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/160316636","html_url":"https://github.com/elastic/elasticsearch/issues/8827#issuecomment-160316636","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8827","id":160316636,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MDMxNjYzNg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-28T16:29:22Z","updated_at":"2015-11-28T16:29:22Z","author_association":"CONTRIBUTOR","body":":D \n","performed_via_github_app":null}]