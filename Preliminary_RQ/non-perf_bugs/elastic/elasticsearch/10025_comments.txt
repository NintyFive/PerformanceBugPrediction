[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77656996","html_url":"https://github.com/elastic/elasticsearch/issues/10025#issuecomment-77656996","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10025","id":77656996,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjU2OTk2","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-03-06T23:44:41Z","updated_at":"2015-03-06T23:44:41Z","author_association":"MEMBER","body":"@cbuescher can you take a look?\n\n@greenboxal You should absolutely never be running on master (or 1.x).  These are based on snapshots of Lucene, and those snapshots use as yet unreleased versions of Lucene's index format.  There are zero backcompat guarantees when you do this. \n\nOnly use officially released versions of Elasticsearch (which are based on officially released version of Lucene).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77658282","html_url":"https://github.com/elastic/elasticsearch/issues/10025#issuecomment-77658282","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10025","id":77658282,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjU4Mjgy","user":{"login":"greenboxal","id":1245785,"node_id":"MDQ6VXNlcjEyNDU3ODU=","avatar_url":"https://avatars1.githubusercontent.com/u/1245785?v=4","gravatar_id":"","url":"https://api.github.com/users/greenboxal","html_url":"https://github.com/greenboxal","followers_url":"https://api.github.com/users/greenboxal/followers","following_url":"https://api.github.com/users/greenboxal/following{/other_user}","gists_url":"https://api.github.com/users/greenboxal/gists{/gist_id}","starred_url":"https://api.github.com/users/greenboxal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greenboxal/subscriptions","organizations_url":"https://api.github.com/users/greenboxal/orgs","repos_url":"https://api.github.com/users/greenboxal/repos","events_url":"https://api.github.com/users/greenboxal/events{/privacy}","received_events_url":"https://api.github.com/users/greenboxal/received_events","type":"User","site_admin":false},"created_at":"2015-03-06T23:57:28Z","updated_at":"2015-03-06T23:57:42Z","author_association":"NONE","body":"I can't use a stable release as #9491 fix didn't land in any released version(at least when we started using master).\nWithout that fix when the DST went off all date histograms(interval=1d) broke showing one day with 24 hours and another day on the same date with 1 hour of duration.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77767973","html_url":"https://github.com/elastic/elasticsearch/issues/10025#issuecomment-77767973","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10025","id":77767973,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NzY3OTcz","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2015-03-08T19:05:02Z","updated_at":"2015-03-12T06:09:40Z","author_association":"MEMBER","body":"We started to use Joda times utility method for local to UTC time conversions in the Rounding classes. It seems that doing this with the \"strict\" option set to true makes Joda time to throw exceptions when using this conversion on local time stamps that would fall in the DST gaps when DST is switched on. I could reproduce this on 1.x, but it also seems to affect the 1.4 and master branch where we now use DateTimeTone#convertLocalToUTC().\nI think it is save to switch the \"strict\" option when using this method to \"false\" to prevent it from throwing the exception. I will open a PR with tests and the changes in the Rounding classes.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95288504","html_url":"https://github.com/elastic/elasticsearch/issues/10025#issuecomment-95288504","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10025","id":95288504,"node_id":"MDEyOklzc3VlQ29tbWVudDk1Mjg4NTA0","user":{"login":"nullbuddy1243","id":3485446,"node_id":"MDQ6VXNlcjM0ODU0NDY=","avatar_url":"https://avatars1.githubusercontent.com/u/3485446?v=4","gravatar_id":"","url":"https://api.github.com/users/nullbuddy1243","html_url":"https://github.com/nullbuddy1243","followers_url":"https://api.github.com/users/nullbuddy1243/followers","following_url":"https://api.github.com/users/nullbuddy1243/following{/other_user}","gists_url":"https://api.github.com/users/nullbuddy1243/gists{/gist_id}","starred_url":"https://api.github.com/users/nullbuddy1243/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nullbuddy1243/subscriptions","organizations_url":"https://api.github.com/users/nullbuddy1243/orgs","repos_url":"https://api.github.com/users/nullbuddy1243/repos","events_url":"https://api.github.com/users/nullbuddy1243/events{/privacy}","received_events_url":"https://api.github.com/users/nullbuddy1243/received_events","type":"User","site_admin":false},"created_at":"2015-04-22T18:12:30Z","updated_at":"2015-04-22T18:13:54Z","author_association":"NONE","body":"@cbuescher Do you think that the commit referenced above would handle this exception as well?\n\n```\norg.elasticsearch.index.mapper.MapperParsingException: failed to parse [day_timeinterval]\n        at org.elasticsearch.index.mapper.core.AbstractFieldMapper.parse(AbstractFieldMapper.java:416)\n        at org.elasticsearch.index.mapper.object.ObjectMapper.serializeValue(ObjectMapper.java:709)\n        at org.elasticsearch.index.mapper.object.ObjectMapper.parse(ObjectMapper.java:500)\n        at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:542)\n        at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:491)\n        at org.elasticsearch.index.shard.service.InternalIndexShard.prepareCreate(InternalIndexShard.java:392)\n        at org.elasticsearch.action.bulk.TransportShardBulkAction.shardIndexOperation(TransportShardBulkAction.java:444)\n        at org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:150)\n        at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:512)\n        at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: org.elasticsearch.index.mapper.MapperParsingException: failed to parse date field [2015-03-08 02:15:00 EST], tried both date format [yyyy-MM-dd HH:mm:ss z], and timestamp number with locale []\n        at org.elasticsearch.index.mapper.core.DateFieldMapper.parseStringValue(DateFieldMapper.java:621)\n        at org.elasticsearch.index.mapper.core.DateFieldMapper.innerParseCreateField(DateFieldMapper.java:549)\n        at org.elasticsearch.index.mapper.core.NumberFieldMapper.parseCreateField(NumberFieldMapper.java:235)\n        at org.elasticsearch.index.mapper.core.AbstractFieldMapper.parse(AbstractFieldMapper.java:406)\n        ... 12 more\nCaused by: org.elasticsearch.common.joda.time.IllegalInstantException: Cannot parse \"2015-03-08 02:15:00 EST\": Illegal instant due to time zone offset transition (America/New_York)\n        at org.elasticsearch.common.joda.time.format.DateTimeParserBucket.computeMillis(DateTimeParserBucket.java:390)\n        at org.elasticsearch.common.joda.time.format.DateTimeFormatter.parseMillis(DateTimeFormatter.java:749)\n        at org.elasticsearch.index.mapper.core.DateFieldMapper.parseStringValue(DateFieldMapper.java:615)\n\n```\n\nI know its pretty similar, but I want to make sure it would be solved by upgrading ES before I go about doing that.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95320647","html_url":"https://github.com/elastic/elasticsearch/issues/10025#issuecomment-95320647","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10025","id":95320647,"node_id":"MDEyOklzc3VlQ29tbWVudDk1MzIwNjQ3","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2015-04-22T20:03:41Z","updated_at":"2015-04-22T20:03:41Z","author_association":"MEMBER","body":"@deusofnull Thanks, from a first glance I would not say that this is related. IllegaInstantException is used in various places in joda time. This issue concerns a case where it is raised when converting time zones in DateTimeZone that fall into the DST gap. Your issue seems to be related to parsing a date that falls into the DST gap, thats why they look similar, but the rest of the stack trace is different. It would be great if you could open a separate issue and report what you are doing and which version of ES you are running there.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95321632","html_url":"https://github.com/elastic/elasticsearch/issues/10025#issuecomment-95321632","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10025","id":95321632,"node_id":"MDEyOklzc3VlQ29tbWVudDk1MzIxNjMy","user":{"login":"nullbuddy1243","id":3485446,"node_id":"MDQ6VXNlcjM0ODU0NDY=","avatar_url":"https://avatars1.githubusercontent.com/u/3485446?v=4","gravatar_id":"","url":"https://api.github.com/users/nullbuddy1243","html_url":"https://github.com/nullbuddy1243","followers_url":"https://api.github.com/users/nullbuddy1243/followers","following_url":"https://api.github.com/users/nullbuddy1243/following{/other_user}","gists_url":"https://api.github.com/users/nullbuddy1243/gists{/gist_id}","starred_url":"https://api.github.com/users/nullbuddy1243/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nullbuddy1243/subscriptions","organizations_url":"https://api.github.com/users/nullbuddy1243/orgs","repos_url":"https://api.github.com/users/nullbuddy1243/repos","events_url":"https://api.github.com/users/nullbuddy1243/events{/privacy}","received_events_url":"https://api.github.com/users/nullbuddy1243/received_events","type":"User","site_admin":false},"created_at":"2015-04-22T20:06:24Z","updated_at":"2015-04-22T20:08:51Z","author_association":"NONE","body":"@cbuescher  Ill bring up a new issue then!  Thanks!  \n\nWhat is strange is that I was parsing 90 days back of timestamps and I got this error for all of them.  All 15k of the timestamps.  If I'm correct, DST started about a month ago... So why did those dates still elicit the error?\n","performed_via_github_app":null}]