[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/601742620","html_url":"https://github.com/elastic/elasticsearch/issues/53876#issuecomment-601742620","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53876","id":601742620,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMTc0MjYyMA==","user":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"created_at":"2020-03-20T14:56:21Z","updated_at":"2020-03-20T14:56:21Z","author_association":"CONTRIBUTOR","body":"This reproduces easily in integration test.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/601750692","html_url":"https://github.com/elastic/elasticsearch/issues/53876#issuecomment-601750692","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53876","id":601750692,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMTc1MDY5Mg==","user":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"created_at":"2020-03-20T15:12:24Z","updated_at":"2020-03-20T15:14:14Z","author_association":"CONTRIBUTOR","body":"Ok, I was able to track down the root cause of this issue. As part of starting the analysis, we first perform `cardinality` aggregation on `dependent_variable` field to use it later for limit verification (see line 125 in `ExtractedFieldsDetectorFactory.java`) and only then we verify supported `dependent_variable` types in `ExtractedFieldsDetector`\r\n\r\nThis order is problematic as we simply cannot perform `cardinality` aggregation on a `text` field (it yields the error I provided in the first post).\r\nSo we would need to reverse this order and **first** check for supported types and **then** check cardinality.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/601794347","html_url":"https://github.com/elastic/elasticsearch/issues/53876#issuecomment-601794347","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53876","id":601794347,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMTc5NDM0Nw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2020-03-20T16:33:14Z","updated_at":"2020-03-20T16:33:14Z","author_association":"MEMBER","body":"heya @przemekwitek may I ask you to add labels to this issue please? Thanks!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/602430811","html_url":"https://github.com/elastic/elasticsearch/issues/53876#issuecomment-602430811","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53876","id":602430811,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMjQzMDgxMQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-03-23T07:32:46Z","updated_at":"2020-03-23T07:32:46Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core (:ml)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/602431039","html_url":"https://github.com/elastic/elasticsearch/issues/53876#issuecomment-602431039","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53876","id":602431039,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMjQzMTAzOQ==","user":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"created_at":"2020-03-23T07:33:27Z","updated_at":"2020-03-23T07:33:27Z","author_association":"CONTRIBUTOR","body":"> heya @przemekwitek may I ask you to add labels to this issue please? Thanks!\r\n\r\nDone.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/602783204","html_url":"https://github.com/elastic/elasticsearch/issues/53876#issuecomment-602783204","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53876","id":602783204,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMjc4MzIwNA==","user":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"created_at":"2020-03-23T18:37:43Z","updated_at":"2020-03-23T18:37:43Z","author_association":"CONTRIBUTOR","body":"PR #53874 makes the error message more understandable for the user.","performed_via_github_app":null}]