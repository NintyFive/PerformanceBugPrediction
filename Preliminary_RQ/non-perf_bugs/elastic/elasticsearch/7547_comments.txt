[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54255961","html_url":"https://github.com/elastic/elasticsearch/issues/7547#issuecomment-54255961","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7547","id":54255961,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjU1OTYx","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2014-09-03T06:10:55Z","updated_at":"2014-09-03T06:10:55Z","author_association":"MEMBER","body":"Are you talking about things like this: http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html#_script_11\n\nI think IMHO that we already have that for many aggregations.\n\nClosing. Feel free to reopen and add more details about what you expect if needed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54270130","html_url":"https://github.com/elastic/elasticsearch/issues/7547#issuecomment-54270130","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7547","id":54270130,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjcwMTMw","user":{"login":"awkysam","id":7943760,"node_id":"MDQ6VXNlcjc5NDM3NjA=","avatar_url":"https://avatars2.githubusercontent.com/u/7943760?v=4","gravatar_id":"","url":"https://api.github.com/users/awkysam","html_url":"https://github.com/awkysam","followers_url":"https://api.github.com/users/awkysam/followers","following_url":"https://api.github.com/users/awkysam/following{/other_user}","gists_url":"https://api.github.com/users/awkysam/gists{/gist_id}","starred_url":"https://api.github.com/users/awkysam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/awkysam/subscriptions","organizations_url":"https://api.github.com/users/awkysam/orgs","repos_url":"https://api.github.com/users/awkysam/repos","events_url":"https://api.github.com/users/awkysam/events{/privacy}","received_events_url":"https://api.github.com/users/awkysam/received_events","type":"User","site_admin":false},"created_at":"2014-09-03T09:08:55Z","updated_at":"2014-09-03T09:08:55Z","author_association":"NONE","body":"to put it in simple words stored procedure kind of feature where we can store aggregated values in variable and then do some complex logic over that.\nWhatever I have seen in the examples it is row by row operation for each value like functions in traditional SQL (_value \\* .8 or log(_value)).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54332280","html_url":"https://github.com/elastic/elasticsearch/issues/7547#issuecomment-54332280","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7547","id":54332280,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzMyMjgw","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2014-09-03T17:18:46Z","updated_at":"2014-09-03T17:18:46Z","author_association":"NONE","body":"I think it may already being considered but I would like agg metrics to support expressions based on other metrics in the same bucket. Say I want to calculate special kind of average based on several sums and  counts\n\nIf calculated metrics could refernce outside of their bucket to child buckets or parent ones it would be even mote powerful but will require 2 step processing I guess\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62128630","html_url":"https://github.com/elastic/elasticsearch/issues/7547#issuecomment-62128630","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7547","id":62128630,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTI4NjMw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-07T11:10:12Z","updated_at":"2014-11-07T11:10:12Z","author_association":"CONTRIBUTOR","body":"Given that documents are distributed, the only efficient way to execute document level scripts is \"row by row\".  We provide a scripted metric aggregation, and will probably add a scripted bucket aggregation, plus #8110 will add post-agg manipulation. \n\nWe don't want to allow arbitrary script execution, especially scripts that could maintain state, as they could be very costly indeed.  Whatever we add needs to work efficiently in a distributed system.\n\nUnless you have suggestions for types of scripts, I think this ticket is already solved by the above.  thanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62129091","html_url":"https://github.com/elastic/elasticsearch/issues/7547#issuecomment-62129091","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7547","id":62129091,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTI5MDkx","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2014-11-07T11:15:04Z","updated_at":"2014-11-07T11:15:04Z","author_association":"CONTRIBUTOR","body":"Scripted upserts also allow you to perform aggregation of multiple events (e.g. web accesses) into a single document that aggregates them based on a common key (e.g. a  session ID). The scripts can include logic that derives attributes for this entity based on new data and existing data e.g. update a web session duration or flag if the user looks to be a bot (accessed robots.txt, downloads no CSS/images)\nIt is then possible to perform query-time aggregations on these higher-level entities and their attributes such as `isBot` or `duration`.\n","performed_via_github_app":null}]