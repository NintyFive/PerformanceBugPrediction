{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/40201","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40201/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40201/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40201/events","html_url":"https://github.com/elastic/elasticsearch/issues/40201","id":422661149,"node_id":"MDU6SXNzdWU0MjI2NjExNDk=","number":40201,"title":"searchAfter cannot work with terminateAfter properly","user":{"login":"ujfjhz","id":1305628,"node_id":"MDQ6VXNlcjEzMDU2Mjg=","avatar_url":"https://avatars0.githubusercontent.com/u/1305628?v=4","gravatar_id":"","url":"https://api.github.com/users/ujfjhz","html_url":"https://github.com/ujfjhz","followers_url":"https://api.github.com/users/ujfjhz/followers","following_url":"https://api.github.com/users/ujfjhz/following{/other_user}","gists_url":"https://api.github.com/users/ujfjhz/gists{/gist_id}","starred_url":"https://api.github.com/users/ujfjhz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ujfjhz/subscriptions","organizations_url":"https://api.github.com/users/ujfjhz/orgs","repos_url":"https://api.github.com/users/ujfjhz/repos","events_url":"https://api.github.com/users/ujfjhz/events{/privacy}","received_events_url":"https://api.github.com/users/ujfjhz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-03-19T10:46:14Z","updated_at":"2019-03-20T08:45:23Z","closed_at":"2019-03-20T08:45:23Z","author_association":"NONE","active_lock_reason":null,"body":"elastic version : 6.4.2\r\n\r\nLet's say page size is 10, shard count is 1, the matched total hits is 100.\r\nIf we set terminateAfter to 10, we can optain the first page. Then we use searchAfter to get the second page, will get nothing. It seems the docs before searchAfter offset also increased the collect count, so it terminate more earlier than it should be.","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}