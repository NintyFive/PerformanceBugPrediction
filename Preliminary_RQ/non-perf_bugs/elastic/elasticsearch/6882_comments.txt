[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49079760","html_url":"https://github.com/elastic/elasticsearch/issues/6882#issuecomment-49079760","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6882","id":49079760,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MDc5NzYw","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-07-15T19:20:22Z","updated_at":"2014-07-15T19:20:22Z","author_association":"CONTRIBUTOR","body":"Hmm are you sure it didn't \"work\" though?  E.g. if you get stack traces for all threads do you see that they are still busy merging vs waiting for other merge threads to finish first?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49085092","html_url":"https://github.com/elastic/elasticsearch/issues/6882#issuecomment-49085092","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6882","id":49085092,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MDg1MDky","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2014-07-15T20:05:37Z","updated_at":"2014-07-15T20:05:37Z","author_association":"CONTRIBUTOR","body":"I had some long running merges on the box that were eating all the IO.  I ended up restarting Elasticsearch on that machine after it didn't look like anything changed so I don't have good records.  The stack traces I saw didn't look to have changed.  I had imagined some of the merges would finish and new ones wouldn't start/block but without some log I wasn't going to wait another twenty minutes of brownout to be sure. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49137872","html_url":"https://github.com/elastic/elasticsearch/issues/6882#issuecomment-49137872","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6882","id":49137872,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MTM3ODcy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-16T08:42:50Z","updated_at":"2014-07-16T08:42:50Z","author_association":"CONTRIBUTOR","body":"We have a test that shows that this works (#6842), so the thing that is missing is a log message to inform the user that their change has been accepted.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49144382","html_url":"https://github.com/elastic/elasticsearch/issues/6882#issuecomment-49144382","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6882","id":49144382,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MTQ0Mzgy","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-07-16T09:58:47Z","updated_at":"2014-07-16T09:58:47Z","author_association":"CONTRIBUTOR","body":"Actually, this issue (changing index.merge.scheduler.max_thread_count) is different from #6842 (changing index.store.throttle_type).  We should first add a test here; the test could probably just peek at the lucene.iw TRACE logs to confirm merges are being paused.\n\n@nik9000 the max_thread_count just controls how many merges are allowed to run at once, not how many merges are \"pending\".  I don't think anything is logged at the default verbosity, so you wouldn't know things had actually changed.  The simplest way to verify might be to take a full thread dump and then count how many merge threads (Lucene Merge Thread #XXX) are actually doing something vs. paused waiting \"their turn\" to run.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49227374","html_url":"https://github.com/elastic/elasticsearch/issues/6882#issuecomment-49227374","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6882","id":49227374,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MjI3Mzc0","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2014-07-16T21:08:42Z","updated_at":"2014-07-16T21:08:42Z","author_association":"CONTRIBUTOR","body":"@mikemccand yeah - when I did that I still got quite a few threads but I imagine that is because they were in flight when I changed the setting.  I'm happy to call the issue settled.  I was mostly panicking when I filed the bug because servers were falling over because they were merging when we were close to the edge.\n\nIn addition to the log, it'd be nice if the result of the curl command contained what was changed like it usually does.  That parameter just didn't come back to me which is normally the signal I use to know that changing something dynamically works.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49450303","html_url":"https://github.com/elastic/elasticsearch/issues/6882#issuecomment-49450303","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6882","id":49450303,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDUwMzAz","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-07-18T16:20:21Z","updated_at":"2014-07-18T16:20:21Z","author_association":"CONTRIBUTOR","body":"OK I dug into this, and when I made a test, it hit an exception claiming index.merge.scheduler.max_thread_count is not a dynamic setting.  @nik9000 did you see any error when you tried?\n\nYet, in ConcurrentMergeSchedulerProvider, it's clearly prepared to update these settings, so I added them to IndexDynamicSettingsModule and the test passes.  The test also verifies that an INFO message is logged with the change.  I'll open a PR.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49451403","html_url":"https://github.com/elastic/elasticsearch/issues/6882#issuecomment-49451403","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6882","id":49451403,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDUxNDAz","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-07-18T16:30:27Z","updated_at":"2014-07-18T16:30:27Z","author_association":"CONTRIBUTOR","body":"OK I opened #6925\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49452155","html_url":"https://github.com/elastic/elasticsearch/issues/6882#issuecomment-49452155","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6882","id":49452155,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDUyMTU1","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2014-07-18T16:37:09Z","updated_at":"2014-07-18T16:37:09Z","author_association":"CONTRIBUTOR","body":"> OK I dug into this, and when I made a test, it hit an exception claiming index.merge.scheduler.max_thread_count is not a dynamic setting. @nik9000 did you see any error when you tried?\n\nNo BUT I didn't look at all the nodes.  I imagine it'd have been on the master?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49453133","html_url":"https://github.com/elastic/elasticsearch/issues/6882#issuecomment-49453133","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6882","id":49453133,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDUzMTMz","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-07-18T16:46:30Z","updated_at":"2014-07-18T16:46:30Z","author_association":"CONTRIBUTOR","body":"Hmm I'm honestly not sure how the error would have propagated back to how you requested; my test case just uses the Java client API (I think!) and somehow the error came back through there.\n\nMaybe there's another issue, that the error fails to properly propagate back to the HTTP response to your curl request?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49456008","html_url":"https://github.com/elastic/elasticsearch/issues/6882#issuecomment-49456008","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6882","id":49456008,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDU2MDA4","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2014-07-18T17:13:35Z","updated_at":"2014-07-18T17:13:35Z","author_association":"CONTRIBUTOR","body":"That is certainly possible.  I don't really use the Java api at all except\nwhen I'm working on Elasticsearch itself.\n\nOn Fri, Jul 18, 2014 at 12:46 PM, Michael McCandless <\nnotifications@github.com> wrote:\n\n> Hmm I'm honestly not sure how the error would have propagated back to how\n> you requested; my test case just uses the Java client API (I think!) and\n> somehow the error came back through there.\n> \n> Maybe there's another issue, that the error fails to properly propagate\n> back to the HTTP response to your curl request?\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/elasticsearch/elasticsearch/issues/6882#issuecomment-49453133\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50865734","html_url":"https://github.com/elastic/elasticsearch/issues/6882#issuecomment-50865734","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6882","id":50865734,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODY1NzM0","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-08-01T09:27:09Z","updated_at":"2014-08-01T09:27:09Z","author_association":"CONTRIBUTOR","body":"This was fixed with #6925\n","performed_via_github_app":null}]