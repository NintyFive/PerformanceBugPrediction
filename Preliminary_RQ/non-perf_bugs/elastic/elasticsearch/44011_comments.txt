[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/508754340","html_url":"https://github.com/elastic/elasticsearch/issues/44011#issuecomment-508754340","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44011","id":508754340,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODc1NDM0MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-07-05T13:12:02Z","updated_at":"2019-07-05T13:12:02Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/508757120","html_url":"https://github.com/elastic/elasticsearch/issues/44011#issuecomment-508757120","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44011","id":508757120,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODc1NzEyMA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-07-05T13:22:08Z","updated_at":"2019-07-05T13:22:08Z","author_association":"CONTRIBUTOR","body":"\"Failed to retrieve checkpointing info\" is probably related to https://github.com/elastic/elasticsearch/issues/43992#issuecomment-508745427.  But then it appears that there's an additional problem with the HLRC when that happens, presumably because the stats object returned doesn't have the expected structure in this case.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/508800634","html_url":"https://github.com/elastic/elasticsearch/issues/44011#issuecomment-508800634","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44011","id":508800634,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODgwMDYzNA==","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"created_at":"2019-07-05T15:50:55Z","updated_at":"2019-07-05T15:50:55Z","author_association":"MEMBER","body":"The 'Failed to retrieve checkpointing info' error is an outstanding issue the problem here is the failure to parse the response. \r\n\r\nThe response object extends `BaseTasksResponse` and the data frame client knows how to parse that the problem is in [this logic I added](https://github.com/elastic/elasticsearch/blob/f6df9286bd340a1fb08970a4ce573be9da41e43a/x-pack/plugin/data-frame/src/main/java/org/elasticsearch/xpack/dataframe/rest/action/BaseTasksResponseToXContentListener.java#L24) which says if there are task or node failures (even if some of the tasks responded correctly) then return a 500 status code. The rest client expects some kind of parseable exception in this case but it has something that extends `BaseTasksResponse` and doesn't know how to read it. \r\n\r\nThe options are to always return a code in the 2xx range and let the data frame client read any errors or add `GetDataFrameTransformsStatsAction.Response` as a named xcontent readable by the client. No doubt returning a 500 code made sense at the time but looking elsewhere in the code that is not the pattern used. I'll change the response to be 200 which conforms with other usages.\r\n\r\nBest also modify the test to check for node and task failures. \r\n\r\n\r\n","performed_via_github_app":null}]