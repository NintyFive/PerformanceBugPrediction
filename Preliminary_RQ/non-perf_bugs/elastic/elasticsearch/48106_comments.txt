[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542577766","html_url":"https://github.com/elastic/elasticsearch/issues/48106#issuecomment-542577766","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48106","id":542577766,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjU3Nzc2Ng==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T08:05:11Z","updated_at":"2019-10-16T08:05:11Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/Allocation)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542582729","html_url":"https://github.com/elastic/elasticsearch/issues/48106#issuecomment-542582729","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48106","id":542582729,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjU4MjcyOQ==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T08:16:53Z","updated_at":"2019-10-16T08:16:53Z","author_association":"CONTRIBUTOR","body":"Dangling indices are checking for unreferenced index metadata, so they can arise on dedicated master nodes just as on data nodes. The optimization in 6.5 (#34349) reduces this check to little more than listing the `indices` directory on nodes with no dangling indices, so I think we can close this as a duplicate.\r\n\r\nIf you can reproduce a significant performance issue on a version after 6.5 then please provide more details and we'll re-open this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542595383","html_url":"https://github.com/elastic/elasticsearch/issues/48106#issuecomment-542595383","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48106","id":542595383,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjU5NTM4Mw==","user":{"login":"Bukhtawar","id":12809319,"node_id":"MDQ6VXNlcjEyODA5MzE5","avatar_url":"https://avatars0.githubusercontent.com/u/12809319?v=4","gravatar_id":"","url":"https://api.github.com/users/Bukhtawar","html_url":"https://github.com/Bukhtawar","followers_url":"https://api.github.com/users/Bukhtawar/followers","following_url":"https://api.github.com/users/Bukhtawar/following{/other_user}","gists_url":"https://api.github.com/users/Bukhtawar/gists{/gist_id}","starred_url":"https://api.github.com/users/Bukhtawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bukhtawar/subscriptions","organizations_url":"https://api.github.com/users/Bukhtawar/orgs","repos_url":"https://api.github.com/users/Bukhtawar/repos","events_url":"https://api.github.com/users/Bukhtawar/events{/privacy}","received_events_url":"https://api.github.com/users/Bukhtawar/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T08:45:53Z","updated_at":"2019-10-16T08:45:53Z","author_association":"CONTRIBUTOR","body":"@DaveCTurner sure we'll run benchmarks but can you help me understand why this check is needed on active master on every cluster state update. Isn't that wasteful","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542598050","html_url":"https://github.com/elastic/elasticsearch/issues/48106#issuecomment-542598050","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48106","id":542598050,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjU5ODA1MA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T08:51:57Z","updated_at":"2019-10-16T08:51:57Z","author_association":"CONTRIBUTOR","body":"I'm not sure how to put it in a different way from my previous statement:\r\n\r\n> Dangling indices are checking for unreferenced index metadata, so they can arise on dedicated master nodes just as on data nodes.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542602275","html_url":"https://github.com/elastic/elasticsearch/issues/48106#issuecomment-542602275","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48106","id":542602275,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjYwMjI3NQ==","user":{"login":"Bukhtawar","id":12809319,"node_id":"MDQ6VXNlcjEyODA5MzE5","avatar_url":"https://avatars0.githubusercontent.com/u/12809319?v=4","gravatar_id":"","url":"https://api.github.com/users/Bukhtawar","html_url":"https://github.com/Bukhtawar","followers_url":"https://api.github.com/users/Bukhtawar/followers","following_url":"https://api.github.com/users/Bukhtawar/following{/other_user}","gists_url":"https://api.github.com/users/Bukhtawar/gists{/gist_id}","starred_url":"https://api.github.com/users/Bukhtawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bukhtawar/subscriptions","organizations_url":"https://api.github.com/users/Bukhtawar/orgs","repos_url":"https://api.github.com/users/Bukhtawar/repos","events_url":"https://api.github.com/users/Bukhtawar/events{/privacy}","received_events_url":"https://api.github.com/users/Bukhtawar/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T09:01:29Z","updated_at":"2019-10-16T09:01:29Z","author_association":"CONTRIBUTOR","body":"Putting it differently just for my understanding. Under what cases do we expect `unreferenced index metadata` to change post a node joining the cluster or active master getting changed. To be specific when do we actually see index metadata change if the cluster is all stable with no node drops/restarts.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542615788","html_url":"https://github.com/elastic/elasticsearch/issues/48106#issuecomment-542615788","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48106","id":542615788,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjYxNTc4OA==","user":{"login":"Bukhtawar","id":12809319,"node_id":"MDQ6VXNlcjEyODA5MzE5","avatar_url":"https://avatars0.githubusercontent.com/u/12809319?v=4","gravatar_id":"","url":"https://api.github.com/users/Bukhtawar","html_url":"https://github.com/Bukhtawar","followers_url":"https://api.github.com/users/Bukhtawar/followers","following_url":"https://api.github.com/users/Bukhtawar/following{/other_user}","gists_url":"https://api.github.com/users/Bukhtawar/gists{/gist_id}","starred_url":"https://api.github.com/users/Bukhtawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bukhtawar/subscriptions","organizations_url":"https://api.github.com/users/Bukhtawar/orgs","repos_url":"https://api.github.com/users/Bukhtawar/repos","events_url":"https://api.github.com/users/Bukhtawar/events{/privacy}","received_events_url":"https://api.github.com/users/Bukhtawar/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T09:32:59Z","updated_at":"2019-10-16T09:32:59Z","author_association":"CONTRIBUTOR","body":"@DaveCTurner This is what I am referring to\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/master/modules-gateway-dangling-indices.html#modules-gateway-dangling-indices","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542616486","html_url":"https://github.com/elastic/elasticsearch/issues/48106#issuecomment-542616486","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48106","id":542616486,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjYxNjQ4Ng==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T09:34:41Z","updated_at":"2019-10-16T09:35:02Z","author_association":"CONTRIBUTOR","body":"The reasons for this feature are quite historical. In early versions of Elasticsearch you could add index metadata to the data path of a running node and it would be imported as a dangling index. This is deeply unsafe and thoroughly unsupported today, but we must maintain it anyway since it would be a breaking change to remove it.\r\n\r\nIf there were a more compelling case to make the change you are suggesting (e.g. a quantifiable performance issue) then we might take a different view, but I don't think there's any such case. Cluster state updates are not that frequent, and we don't have any evidence that this check is adding any significant burden in recent versions.","performed_via_github_app":null}]