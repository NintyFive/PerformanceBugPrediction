{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/30770","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30770/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30770/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30770/events","html_url":"https://github.com/elastic/elasticsearch/issues/30770","id":325105022,"node_id":"MDU6SXNzdWUzMjUxMDUwMjI=","number":30770,"title":"[ci] ClusterStatsTests.testClusterStats","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"labels":[{"id":912834056,"node_id":"MDU6TGFiZWw5MTI4MzQwNTY=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Monitoring","name":":Core/Features/Monitoring","color":"0e8a16","default":false,"description":""},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-22T00:51:04Z","updated_at":"2018-10-25T15:25:18Z","closed_at":"2018-10-25T15:23:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"On 5.6, doesn't reproduce. Opening this because I'm pretty sure I've triaged this test a couple of times\r\n\r\nhttps://internal-ci.elastic.co/job/elastic+x-pack-elasticsearch+5.6+multijob-windows-compatibility/1703\r\n\r\n[build-1703.txt](https://github.com/elastic/elasticsearch/files/2024512/build-1703.txt)\r\n\r\n```\r\ngradlew :x-pack-elasticsearch:plugin:test -Dtests.seed=388A867F89019B8C -Dtests.class=org.elasticsearch.xpack.monitoring.resolver.cluster.ClusterStatsTests -Dtests.method=\"testClusterStats\" -Dtests.security.manager=true -Dtests.locale=hu -Dtests.timezone=Antarctica/DumontDUrvill\r\n```\r\n\r\nThe exception that bubbles up\r\n\r\n```\r\n   > Throwable #1: Failed to execute phase [query], all shards failed^M\r\n   >    at __randomizedtesting.SeedInfo.seed([388A867F89019B8C:3CB91C12F761DFA]:0)^M\r\n   >    at org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:272)^M\r\n^M\r\n   >    at org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:130)^M\r\n   >    at org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:241)^M\r\n```\r\n\r\nFrom node logs\r\n\r\n```\r\n  1> Caused by: org.elasticsearch.xpack.monitoring.exporter.ExportException: failed to flush export bulks^M\r\n  1>    at org.elasticsearch.xpack.monitoring.exporter.ExportBulk$Compound.lambda$null$0(ExportBulk.java:167) ~[main/:?]^M\r\n  1>    ... 65 more^M\r\n  1> Caused by: org.elasticsearch.xpack.monitoring.exporter.ExportException: bulk [default_local] reports failures when exporting documents^M\r\n  1>    at org.elasticsearch.xpack.monitoring.exporter.local.LocalBulk.throwExportException(LocalBulk.java:126) ~[main/:?]^M\r\n  1>    ... 63 more^M\r\n```","closed_by":{"login":"gwbrown","id":1522844,"node_id":"MDQ6VXNlcjE1MjI4NDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1522844?v=4","gravatar_id":"","url":"https://api.github.com/users/gwbrown","html_url":"https://github.com/gwbrown","followers_url":"https://api.github.com/users/gwbrown/followers","following_url":"https://api.github.com/users/gwbrown/following{/other_user}","gists_url":"https://api.github.com/users/gwbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gwbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwbrown/subscriptions","organizations_url":"https://api.github.com/users/gwbrown/orgs","repos_url":"https://api.github.com/users/gwbrown/repos","events_url":"https://api.github.com/users/gwbrown/events{/privacy}","received_events_url":"https://api.github.com/users/gwbrown/received_events","type":"User","site_admin":false},"performed_via_github_app":null}