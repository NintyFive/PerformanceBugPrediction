[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261943629","html_url":"https://github.com/elastic/elasticsearch/issues/21703#issuecomment-261943629","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21703","id":261943629,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTk0MzYyOQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-11-21T13:52:10Z","updated_at":"2016-11-21T13:52:15Z","author_association":"CONTRIBUTOR","body":"I am not sure how we can fix it. One way would be to only support this special notation on numeric fields. For keyword fields, it would always be ambiguous whether these characters are a range operator or part of the keyword? Another way would be to make escaping work like for other special characters but that looks much harder at first sight.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276426167","html_url":"https://github.com/elastic/elasticsearch/issues/21703#issuecomment-276426167","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21703","id":276426167,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjQyNjE2Nw==","user":{"login":"mrec","id":4206148,"node_id":"MDQ6VXNlcjQyMDYxNDg=","avatar_url":"https://avatars0.githubusercontent.com/u/4206148?v=4","gravatar_id":"","url":"https://api.github.com/users/mrec","html_url":"https://github.com/mrec","followers_url":"https://api.github.com/users/mrec/followers","following_url":"https://api.github.com/users/mrec/following{/other_user}","gists_url":"https://api.github.com/users/mrec/gists{/gist_id}","starred_url":"https://api.github.com/users/mrec/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrec/subscriptions","organizations_url":"https://api.github.com/users/mrec/orgs","repos_url":"https://api.github.com/users/mrec/repos","events_url":"https://api.github.com/users/mrec/events{/privacy}","received_events_url":"https://api.github.com/users/mrec/received_events","type":"User","site_admin":false},"created_at":"2017-01-31T17:08:02Z","updated_at":"2017-01-31T17:08:02Z","author_association":"NONE","body":"I appreciate that the fix is tricky, but would it be possible to at least update the [documentation](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#_reserved_characters) to make it clear that these characters currently can't be escaped?\r\n\r\nI lost a lot of time and hair to headscratching when I [first ran into this](https://discuss.elastic.co/t/surprising-behaviour-when-escaping-reserved-char-in-query-string-1-3-4/32088) as an Elastic newbie in 2015, and I've just run into it again today. Accurate docs would have saved a lot of that. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276426775","html_url":"https://github.com/elastic/elasticsearch/issues/21703#issuecomment-276426775","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21703","id":276426775,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjQyNjc3NQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-01-31T17:10:02Z","updated_at":"2017-01-31T17:10:02Z","author_association":"CONTRIBUTOR","body":"> I appreciate that the fix is tricky, but would it be possible to at least update the documentation to make it clear that these characters currently can't be escaped?\r\n\r\nYes. I'll do that now. I hit the same problem many years ago as well. I remember writing a very perplexed comment about it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276432058","html_url":"https://github.com/elastic/elasticsearch/issues/21703#issuecomment-276432058","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21703","id":276432058,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjQzMjA1OA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-01-31T17:28:09Z","updated_at":"2017-01-31T17:28:09Z","author_association":"CONTRIBUTOR","body":"I added a note to the docs. Hopefully this will help some. The docs should be updated in about 30 minutes.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276435221","html_url":"https://github.com/elastic/elasticsearch/issues/21703#issuecomment-276435221","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21703","id":276435221,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjQzNTIyMQ==","user":{"login":"mrec","id":4206148,"node_id":"MDQ6VXNlcjQyMDYxNDg=","avatar_url":"https://avatars0.githubusercontent.com/u/4206148?v=4","gravatar_id":"","url":"https://api.github.com/users/mrec","html_url":"https://github.com/mrec","followers_url":"https://api.github.com/users/mrec/followers","following_url":"https://api.github.com/users/mrec/following{/other_user}","gists_url":"https://api.github.com/users/mrec/gists{/gist_id}","starred_url":"https://api.github.com/users/mrec/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrec/subscriptions","organizations_url":"https://api.github.com/users/mrec/orgs","repos_url":"https://api.github.com/users/mrec/repos","events_url":"https://api.github.com/users/mrec/events{/privacy}","received_events_url":"https://api.github.com/users/mrec/received_events","type":"User","site_admin":false},"created_at":"2017-01-31T17:39:09Z","updated_at":"2017-01-31T17:39:09Z","author_association":"NONE","body":"@nik9000 - thanks!\r\n\r\nBTW, the downsides of the quoting workaround @jpountz mentions are:\r\n\r\n1. Where the term gets analyzed to multiple tokens it imposes a phrase ordering the caller didn't ask for, and\r\n2. It disables any *other* special features (e.g. wildcards etc) in the term\r\n\r\nIf you're only using `standard`-ish analyzers (i.e. `<` and `>` are always nontoken chars) and you know you *never* want the range interpretation, manually trimming off any leading culprit from the term might be a safer bet. I hadn't realized before that this bug only hits you when it's the first character.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/376036801","html_url":"https://github.com/elastic/elasticsearch/issues/21703#issuecomment-376036801","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21703","id":376036801,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NjAzNjgwMQ==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2018-03-26T03:30:54Z","updated_at":"2018-03-26T03:30:54Z","author_association":"CONTRIBUTOR","body":"We prefer to close this issue as a clear indication that we do not foresee further developments in the near-term around this. Looks like the documentation was updated to make things clearer. despite this issue being closed please feel free to leave feedback on the proposal (including +1s).","performed_via_github_app":null}]