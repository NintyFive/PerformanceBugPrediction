[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/466411655","html_url":"https://github.com/elastic/elasticsearch/issues/39315#issuecomment-466411655","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39315","id":466411655,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjQxMTY1NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-02-22T14:20:31Z","updated_at":"2019-02-22T14:20:31Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/466412070","html_url":"https://github.com/elastic/elasticsearch/issues/39315#issuecomment-466412070","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39315","id":466412070,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjQxMjA3MA==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2019-02-22T14:21:45Z","updated_at":"2019-02-22T14:21:45Z","author_association":"CONTRIBUTOR","body":"The odd thing here is that immediately before the suggestion is sent, a document is indexed with a `text` field, and then `refresh()` is called, which ought to ensure that either the mapping exists or adding the document fails.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/466449308","html_url":"https://github.com/elastic/elasticsearch/issues/39315#issuecomment-466449308","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39315","id":466449308,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjQ0OTMwOA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2019-02-22T16:05:42Z","updated_at":"2019-02-22T16:05:42Z","author_association":"MEMBER","body":"> The odd thing here is that immediately before the suggestion is sent, a document is indexed with a `text` field, and then `refresh()` is called, which ought to ensure that either the mapping exists or adding the document fails.\r\n\r\nNot necessarily, mapping updates are asynchronous and so the document could be indexed and refreshed without the cluster state update reaching the node.","performed_via_github_app":null}]