{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/12275","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12275/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12275/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12275/events","html_url":"https://github.com/elastic/elasticsearch/issues/12275","id":95275453,"node_id":"MDU6SXNzdWU5NTI3NTQ1Mw==","number":12275,"title":"Projection and De-normalization of nested relationships","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2015-07-15T19:52:23Z","updated_at":"2015-07-20T13:42:43Z","closed_at":"2015-07-19T10:46:17Z","author_association":"NONE","active_lock_reason":null,"body":"I find that it is quite often that we need to de-normalize (produce a cartesian join) on nested data and apply filter on the resulting data set (on both to parent and nested fields). We also need to support a case of multiple unrelated nested fields being de-normalized. It would need to go together with projections API because we would only want to include necessary parts of data avoiding repetition of complete parent or other nested (in case of multiple independent nested fields) data.\n\nOne of the main use cases is export of subsets of data by end users from our systems for further analysis and reporting. We have an engine that provides basic de-normalization and projection functionality but filtering of nested data is really challenging as we would have to replicate elastic filtering logic for that. So I was wondering if elastic team would find it to be a potentially interesting feature.\n\nAs an aspect of projection functionality (apart from denormalization) it would be nice to be able to apply nested filters to returned sources nested elements collection. That would go long way towards achieving complete goal as denormalization could be still done on client as long as filtering of nested collections in source is done in elastic\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}