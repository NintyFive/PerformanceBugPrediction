{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/11708","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11708/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11708/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11708/events","html_url":"https://github.com/elastic/elasticsearch/issues/11708","id":88824031,"node_id":"MDU6SXNzdWU4ODgyNDAzMQ==","number":11708,"title":"Can index but not search when cluster name changed from \"elasticsearch\"","user":{"login":"imarsman","id":7159803,"node_id":"MDQ6VXNlcjcxNTk4MDM=","avatar_url":"https://avatars1.githubusercontent.com/u/7159803?v=4","gravatar_id":"","url":"https://api.github.com/users/imarsman","html_url":"https://github.com/imarsman","followers_url":"https://api.github.com/users/imarsman/followers","following_url":"https://api.github.com/users/imarsman/following{/other_user}","gists_url":"https://api.github.com/users/imarsman/gists{/gist_id}","starred_url":"https://api.github.com/users/imarsman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imarsman/subscriptions","organizations_url":"https://api.github.com/users/imarsman/orgs","repos_url":"https://api.github.com/users/imarsman/repos","events_url":"https://api.github.com/users/imarsman/events{/privacy}","received_events_url":"https://api.github.com/users/imarsman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-06-16T19:50:18Z","updated_at":"2015-06-16T21:20:49Z","closed_at":"2015-06-16T21:20:48Z","author_association":"NONE","active_lock_reason":null,"body":"Changing our cluster name from \"elasticsearch\" has resulted in being\n- Able to index new documents\n- Able to check to see if an index exists\n- NOT able to do searches\n\nWe are using Elasticsearch 1.5.2 from the elatic.co debian repository on Ubuntu 14.04 using java version 1.8.0_45.\n\nHere is the TransportClient setup code:\n\n<pre>\nfinal Settings settings = ImmutableSettings\n        .settingsBuilder()\n        .put(\"cluster.name\", CLUSTER_NAME)\n        // .put(\"client.transport.ignore_cluster_name\", true)\n        .build();\nfinal TransportClient tcClient = new TransportClient(settings);\n\nfor (final String ip : IPS.get()) {\n    client.addTransportAddress(new InetSocketTransportAddress(ip, 9300));\n}\n</pre>\n\n\nHere is the code to do a simple search\n\n<pre>\nfinal AndFilterBuilder afb = new AndFilterBuilder();\nafb.add(FilterBuilders.termFilter(\"document.file-path\", path));\nresponse = transportClient.prepareSearch(index)\n        .setTypes(\"document\")\n        .setPostFilter(afb)\n        .execute()\n        .get();\n</pre>\n\n\nThe cluster name was switched to \"elasticsearch-staging\". I also tested a name without hyphens. The staging cluster is actually just a single node. I did, however, get the same results on a system in testing having 3 no data master nodes and 2 data non-master nodes. \n\nSwitching the cluster name back to \"elasticsearch\"\n","closed_by":{"login":"imarsman","id":7159803,"node_id":"MDQ6VXNlcjcxNTk4MDM=","avatar_url":"https://avatars1.githubusercontent.com/u/7159803?v=4","gravatar_id":"","url":"https://api.github.com/users/imarsman","html_url":"https://github.com/imarsman","followers_url":"https://api.github.com/users/imarsman/followers","following_url":"https://api.github.com/users/imarsman/following{/other_user}","gists_url":"https://api.github.com/users/imarsman/gists{/gist_id}","starred_url":"https://api.github.com/users/imarsman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imarsman/subscriptions","organizations_url":"https://api.github.com/users/imarsman/orgs","repos_url":"https://api.github.com/users/imarsman/repos","events_url":"https://api.github.com/users/imarsman/events{/privacy}","received_events_url":"https://api.github.com/users/imarsman/received_events","type":"User","site_admin":false},"performed_via_github_app":null}