[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/223091196","html_url":"https://github.com/elastic/elasticsearch/issues/18688#issuecomment-223091196","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18688","id":223091196,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMzA5MTE5Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-06-01T18:57:59Z","updated_at":"2016-06-01T18:57:59Z","author_association":"MEMBER","body":"Sorry for the chaos here. Elasticsearch previously permitted multiple ways of specifying settings and system properties, and entangled system properties and settings (each got converted to the other). Additionally, settings use to be extremely lenient.\n\nIn Elasticsearch 5.0.0, we are attempting to make progress on these fronts. Now, all settings must be registered. Additionally, we have removed some of the multiple ways of specifying settings and system properties, and removed the entanglement between settings and system properties. Some of that work was in-progress when 5.0.0-alpha2 shipped. That's what you're running into here.\n\nIn particular, you can't pass system properties as `-D` arguments to Elasticsearch anymore. Instead, you have to pass them as Java options, as you figured out. The next problem though is the system properties and settings entanglement. In particular, system properties would get converted to Elasticsearch settings. But all settings must be registered, and `insecure.allow.root` is not a registered setting. Thus, the failure.\n\nIn 5.0.0-alpha3, all of this has been cleaned up. The entanglement between system properties and settings has been removed. This means that the system property `es.insecure.allow.root` will not automatically be converted to a setting which means it's no longer a problem that it's not registered.\n\nThe 5.0.0-alpha3 was released yesterday and is free of this problem. If you have a chance to download and try it out, I'd appreciate feedback on whether or not it worked out for you.\n\nThat said, I would like to know your use case for running as root? I think that eventually it would be nice if we could remove this functionality while continuing to disallow running as root.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/223093081","html_url":"https://github.com/elastic/elasticsearch/issues/18688#issuecomment-223093081","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18688","id":223093081,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMzA5MzA4MQ==","user":{"login":"dayjavid","id":1752343,"node_id":"MDQ6VXNlcjE3NTIzNDM=","avatar_url":"https://avatars3.githubusercontent.com/u/1752343?v=4","gravatar_id":"","url":"https://api.github.com/users/dayjavid","html_url":"https://github.com/dayjavid","followers_url":"https://api.github.com/users/dayjavid/followers","following_url":"https://api.github.com/users/dayjavid/following{/other_user}","gists_url":"https://api.github.com/users/dayjavid/gists{/gist_id}","starred_url":"https://api.github.com/users/dayjavid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dayjavid/subscriptions","organizations_url":"https://api.github.com/users/dayjavid/orgs","repos_url":"https://api.github.com/users/dayjavid/repos","events_url":"https://api.github.com/users/dayjavid/events{/privacy}","received_events_url":"https://api.github.com/users/dayjavid/received_events","type":"User","site_admin":false},"created_at":"2016-06-01T19:04:49Z","updated_at":"2016-06-01T19:04:49Z","author_association":"NONE","body":"I'll DL apha3 right now and re-test. Sorry about that.\n\nAs for my use case, I wish I had a great one for you. I ended up running into a lot of one-off issues that were just more easily resolved by running as root. If I recall it had something to do with the fact that I was installing via the tar/zip files, and they did not include init scripts (like the Repo versions do), so I had written my own, and wasn't able, at the time, to figure out how to get an init script to run the process as a different user other than root. \nOnce I got into a working state, I've worked on more pressing issues. The risks did not outweigh the time it would take to fix. It's something I will probably change eventually - possibly even for my 5.0 migration when that times comes. As for right now, I've just been shooting for as close to 'backwards compatible' as I can get for my testing. \nI do have on my to-do list to drop in the init scripts delievered with the repo versions, (and eventually switch over to installing from the repo instead of the downloaded packages), and I imagine that will be a big step for me to be able to use without root.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/223096044","html_url":"https://github.com/elastic/elasticsearch/issues/18688#issuecomment-223096044","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18688","id":223096044,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMzA5NjA0NA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-06-01T19:16:34Z","updated_at":"2016-06-01T19:16:48Z","author_association":"MEMBER","body":"Thanks for the feedback @dayjavid! :smile:\n\n> I had written my own, and wasn't able, at the time, to figure out how to get an init script to run the process as a different user other than root. \n\nThe reason that the services must be started as the root user is exactly so that the scripts can launch the processes as the elasticsearch user.\n\n> I imagine that will be a big step for me to be able to use without root.\n\nIt sounds like it might be okay then if we push to remove this sooner rather than later. Am I reading you correctly?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/223098047","html_url":"https://github.com/elastic/elasticsearch/issues/18688#issuecomment-223098047","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18688","id":223098047,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMzA5ODA0Nw==","user":{"login":"dayjavid","id":1752343,"node_id":"MDQ6VXNlcjE3NTIzNDM=","avatar_url":"https://avatars3.githubusercontent.com/u/1752343?v=4","gravatar_id":"","url":"https://api.github.com/users/dayjavid","html_url":"https://github.com/dayjavid","followers_url":"https://api.github.com/users/dayjavid/followers","following_url":"https://api.github.com/users/dayjavid/following{/other_user}","gists_url":"https://api.github.com/users/dayjavid/gists{/gist_id}","starred_url":"https://api.github.com/users/dayjavid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dayjavid/subscriptions","organizations_url":"https://api.github.com/users/dayjavid/orgs","repos_url":"https://api.github.com/users/dayjavid/repos","events_url":"https://api.github.com/users/dayjavid/events{/privacy}","received_events_url":"https://api.github.com/users/dayjavid/received_events","type":"User","site_admin":false},"created_at":"2016-06-01T19:24:26Z","updated_at":"2016-06-01T19:24:26Z","author_association":"NONE","body":"I will make sure that when I migrate to 5.0 I will be able to run as non-root, yes.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/223235543","html_url":"https://github.com/elastic/elasticsearch/issues/18688#issuecomment-223235543","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18688","id":223235543,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMzIzNTU0Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-06-02T09:02:45Z","updated_at":"2016-06-02T09:02:45Z","author_association":"CONTRIBUTOR","body":"Sounds like there is nothing left to do here, closing\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/223235625","html_url":"https://github.com/elastic/elasticsearch/issues/18688#issuecomment-223235625","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18688","id":223235625,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMzIzNTYyNQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-06-02T09:03:04Z","updated_at":"2016-06-02T09:03:04Z","author_association":"MEMBER","body":"> I will make sure that when I migrate to 5.0 I will be able to run as non-root, yes.\n\nThanks @dayjavid. :smile:\n","performed_via_github_app":null}]