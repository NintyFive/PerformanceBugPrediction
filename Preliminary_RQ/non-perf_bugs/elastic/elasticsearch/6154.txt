{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/6154","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6154/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6154/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6154/events","html_url":"https://github.com/elastic/elasticsearch/issues/6154","id":33406915,"node_id":"MDU6SXNzdWUzMzQwNjkxNQ==","number":6154,"title":"GET document is ignoring the TTL value","user":{"login":"sspilleman","id":592486,"node_id":"MDQ6VXNlcjU5MjQ4Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/592486?v=4","gravatar_id":"","url":"https://api.github.com/users/sspilleman","html_url":"https://github.com/sspilleman","followers_url":"https://api.github.com/users/sspilleman/followers","following_url":"https://api.github.com/users/sspilleman/following{/other_user}","gists_url":"https://api.github.com/users/sspilleman/gists{/gist_id}","starred_url":"https://api.github.com/users/sspilleman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sspilleman/subscriptions","organizations_url":"https://api.github.com/users/sspilleman/orgs","repos_url":"https://api.github.com/users/sspilleman/repos","events_url":"https://api.github.com/users/sspilleman/events{/privacy}","received_events_url":"https://api.github.com/users/sspilleman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2014-05-13T15:04:58Z","updated_at":"2014-12-30T18:35:51Z","closed_at":"2014-12-30T18:35:51Z","author_association":"NONE","active_lock_reason":null,"body":"When enabling TTL using a mapping and publishing docs to the index,  TTL is \"ignored\" when using GET/id to retrieve it. The TTL value is \"only\" used by the purger thread, thus setting a value for TTL lower than the configured \"indices.ttl.interval\" doesn't make sense. \"indices.ttl.interval\" controls the interval the purge thread is ran. \n\nDocumentation states that TTL can be configured in milliseconds (its the default actually). I believe it doesn't make sense to configure the purge interval to run every x milliseconds.\n\nMy 2 cents:\n- 1) Keep running the purge thread interval like it is. But honour the TTL value when a doc is retrieved (i.e. NOT return it). \n- 2) If you set a TTL, it SHOULD be honoured at all times, irregardless of purge threads running. You will get unexpected results otherwise. \n\nSander\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}