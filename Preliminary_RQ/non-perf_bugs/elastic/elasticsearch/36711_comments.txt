[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/447905081","html_url":"https://github.com/elastic/elasticsearch/issues/36711#issuecomment-447905081","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36711","id":447905081,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzkwNTA4MQ==","user":{"login":"albertzaharovits","id":4568420,"node_id":"MDQ6VXNlcjQ1Njg0MjA=","avatar_url":"https://avatars2.githubusercontent.com/u/4568420?v=4","gravatar_id":"","url":"https://api.github.com/users/albertzaharovits","html_url":"https://github.com/albertzaharovits","followers_url":"https://api.github.com/users/albertzaharovits/followers","following_url":"https://api.github.com/users/albertzaharovits/following{/other_user}","gists_url":"https://api.github.com/users/albertzaharovits/gists{/gist_id}","starred_url":"https://api.github.com/users/albertzaharovits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertzaharovits/subscriptions","organizations_url":"https://api.github.com/users/albertzaharovits/orgs","repos_url":"https://api.github.com/users/albertzaharovits/repos","events_url":"https://api.github.com/users/albertzaharovits/events{/privacy}","received_events_url":"https://api.github.com/users/albertzaharovits/received_events","type":"User","site_admin":false},"created_at":"2018-12-17T16:23:07Z","updated_at":"2018-12-17T16:23:07Z","author_association":"CONTRIBUTOR","body":"@bittusarkar this setting has been removed in https://github.com/elastic/elasticsearch/pull/25734 . See https://www.elastic.co/guide/en/elasticsearch/reference/6.x/removal-of-types.html#_schedule_for_removal_of_mapping_types for the plan. I think this explains the behavior you're seeing, the only type the index will have is named \"test_mapping\" . Trying to add another type will make ES complain:\r\n```\r\n{\r\n  \"error\" : {\r\n    \"root_cause\" : [\r\n      {\r\n        \"type\" : \"illegal_argument_exception\",\r\n        \"reason\" : \"Rejecting mapping update to [test_index] as the final mapping would have more than 1 type: [test_mapping, test_mapping2]\"\r\n      }\r\n    ],\r\n    \"type\" : \"illegal_argument_exception\",\r\n    \"reason\" : \"Rejecting mapping update to [test_index] as the final mapping would have more than 1 type: [test_mapping, test_mapping2]\"\r\n  },\r\n  \"status\" : 400\r\n}\r\n```\r\nThe setting is ignored because sadly there is no setting validation under the `index.mapping` namespace.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/447907094","html_url":"https://github.com/elastic/elasticsearch/issues/36711#issuecomment-447907094","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36711","id":447907094,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzkwNzA5NA==","user":{"login":"bittusarkar","id":860447,"node_id":"MDQ6VXNlcjg2MDQ0Nw==","avatar_url":"https://avatars0.githubusercontent.com/u/860447?v=4","gravatar_id":"","url":"https://api.github.com/users/bittusarkar","html_url":"https://github.com/bittusarkar","followers_url":"https://api.github.com/users/bittusarkar/followers","following_url":"https://api.github.com/users/bittusarkar/following{/other_user}","gists_url":"https://api.github.com/users/bittusarkar/gists{/gist_id}","starred_url":"https://api.github.com/users/bittusarkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bittusarkar/subscriptions","organizations_url":"https://api.github.com/users/bittusarkar/orgs","repos_url":"https://api.github.com/users/bittusarkar/repos","events_url":"https://api.github.com/users/bittusarkar/events{/privacy}","received_events_url":"https://api.github.com/users/bittusarkar/received_events","type":"User","site_admin":false},"created_at":"2018-12-17T16:28:23Z","updated_at":"2018-12-17T16:28:23Z","author_association":"NONE","body":"Also, this setting is deprecated in Elasticsearch 6.x and removed in Elasticsearch 7.x. The deprecation message is `Setting index.mapper.dynamic is deprecated since indices may not have more than one type anymore.`. But that does not make sense as long as creation of index without a mapping is supported. I verified that creation of index without mapping is still supported in Elasticsearch 7.0.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/447908327","html_url":"https://github.com/elastic/elasticsearch/issues/36711#issuecomment-447908327","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36711","id":447908327,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzkwODMyNw==","user":{"login":"bittusarkar","id":860447,"node_id":"MDQ6VXNlcjg2MDQ0Nw==","avatar_url":"https://avatars0.githubusercontent.com/u/860447?v=4","gravatar_id":"","url":"https://api.github.com/users/bittusarkar","html_url":"https://github.com/bittusarkar","followers_url":"https://api.github.com/users/bittusarkar/followers","following_url":"https://api.github.com/users/bittusarkar/following{/other_user}","gists_url":"https://api.github.com/users/bittusarkar/gists{/gist_id}","starred_url":"https://api.github.com/users/bittusarkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bittusarkar/subscriptions","organizations_url":"https://api.github.com/users/bittusarkar/orgs","repos_url":"https://api.github.com/users/bittusarkar/repos","events_url":"https://api.github.com/users/bittusarkar/events{/privacy}","received_events_url":"https://api.github.com/users/bittusarkar/received_events","type":"User","site_admin":false},"created_at":"2018-12-17T16:31:44Z","updated_at":"2018-12-17T16:31:44Z","author_association":"NONE","body":"@albertzaharovits See my comment above. I would understand the setting is useless if the only configuration possible was an index having a single mapping. But that is not true. An index can also have **zero** mapping as I have shown above. As long as a zero mapping index configuration is allowed, having this setting makes sense.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/447909368","html_url":"https://github.com/elastic/elasticsearch/issues/36711#issuecomment-447909368","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36711","id":447909368,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzkwOTM2OA==","user":{"login":"albertzaharovits","id":4568420,"node_id":"MDQ6VXNlcjQ1Njg0MjA=","avatar_url":"https://avatars2.githubusercontent.com/u/4568420?v=4","gravatar_id":"","url":"https://api.github.com/users/albertzaharovits","html_url":"https://github.com/albertzaharovits","followers_url":"https://api.github.com/users/albertzaharovits/followers","following_url":"https://api.github.com/users/albertzaharovits/following{/other_user}","gists_url":"https://api.github.com/users/albertzaharovits/gists{/gist_id}","starred_url":"https://api.github.com/users/albertzaharovits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertzaharovits/subscriptions","organizations_url":"https://api.github.com/users/albertzaharovits/orgs","repos_url":"https://api.github.com/users/albertzaharovits/repos","events_url":"https://api.github.com/users/albertzaharovits/events{/privacy}","received_events_url":"https://api.github.com/users/albertzaharovits/received_events","type":"User","site_admin":false},"created_at":"2018-12-17T16:34:41Z","updated_at":"2018-12-17T16:34:41Z","author_association":"CONTRIBUTOR","body":"@bittusarkar are you complaining that you can add the mapping to an index after it has been created?\r\n\r\nSome might consider this a feature, but you're politely invited to open a new issue and state your case for how this behavior is causing unexpected behavior.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/447912907","html_url":"https://github.com/elastic/elasticsearch/issues/36711#issuecomment-447912907","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36711","id":447912907,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzkxMjkwNw==","user":{"login":"bittusarkar","id":860447,"node_id":"MDQ6VXNlcjg2MDQ0Nw==","avatar_url":"https://avatars0.githubusercontent.com/u/860447?v=4","gravatar_id":"","url":"https://api.github.com/users/bittusarkar","html_url":"https://github.com/bittusarkar","followers_url":"https://api.github.com/users/bittusarkar/followers","following_url":"https://api.github.com/users/bittusarkar/following{/other_user}","gists_url":"https://api.github.com/users/bittusarkar/gists{/gist_id}","starred_url":"https://api.github.com/users/bittusarkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bittusarkar/subscriptions","organizations_url":"https://api.github.com/users/bittusarkar/orgs","repos_url":"https://api.github.com/users/bittusarkar/repos","events_url":"https://api.github.com/users/bittusarkar/events{/privacy}","received_events_url":"https://api.github.com/users/bittusarkar/received_events","type":"User","site_admin":false},"created_at":"2018-12-17T16:44:07Z","updated_at":"2018-12-17T16:46:36Z","author_association":"NONE","body":"I understand why the setting is removed. To make this deprecation air tight, I am proposing the index creation logic should fail if mapping is not provided. This setting disallows creation of mapping **automatically**. Now, say I create an index with no mapping. Then due to some bug, a mapping gets created automatically (this has happened to us in the past). Then when I actually try to create the correct mapping explicitly, it would fail saying I cannot add multiple mappings. If this setting works as it did in Elasticsearch 5.x, a mapping would not get created due to the bug and my explicit mapping creation would succeed. I hope I was able to explain the scenario. We won't hit this issue because we always create an index with the mapping. I reported this issue because I felt this was a bug in Elasticsearch.","performed_via_github_app":null}]