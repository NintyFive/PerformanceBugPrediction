{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15270","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15270/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15270/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15270/events","html_url":"https://github.com/elastic/elasticsearch/issues/15270","id":120706827,"node_id":"MDU6SXNzdWUxMjA3MDY4Mjc=","number":15270,"title":"Highlight not working along with term lookup filter","user":{"login":"shagga","id":16184439,"node_id":"MDQ6VXNlcjE2MTg0NDM5","avatar_url":"https://avatars0.githubusercontent.com/u/16184439?v=4","gravatar_id":"","url":"https://api.github.com/users/shagga","html_url":"https://github.com/shagga","followers_url":"https://api.github.com/users/shagga/followers","following_url":"https://api.github.com/users/shagga/following{/other_user}","gists_url":"https://api.github.com/users/shagga/gists{/gist_id}","starred_url":"https://api.github.com/users/shagga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shagga/subscriptions","organizations_url":"https://api.github.com/users/shagga/orgs","repos_url":"https://api.github.com/users/shagga/repos","events_url":"https://api.github.com/users/shagga/events{/privacy}","received_events_url":"https://api.github.com/users/shagga/received_events","type":"User","site_admin":false},"labels":[{"id":111549183,"node_id":"MDU6TGFiZWwxMTE1NDkxODM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Highlighting","name":":Search/Highlighting","color":"0e8a16","default":false,"description":"How a query matched a document"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-12-07T06:21:30Z","updated_at":"2015-12-09T02:42:25Z","closed_at":"2015-12-09T02:42:25Z","author_association":"NONE","active_lock_reason":null,"body":"Hi All,\nI'm new to elastic search and have started exploring it from the past few days. My requirement is to get the matched keywords using term lookup highlighted.    \n\nSo have 2 indices \n\nhttp://localhost:9200/lookup/type/1?pretty\nOutput\n{\n  \"_index\" : \"lookup\",\n  \"_type\" : \"type\",\n  \"_id\" : \"1\",\n  \"_version\" : 1,\n  \"found\" : true,\n  \"_source\":{\"terms\":[\"Apache\nStorm\",\"Kafka\",\"MR\",\"Pig\",\"Hive\",\"Hadoop\",\"Mahout\"]}\n}\n\nAnd another one as following:-\n\nhttp://localhost:9200/skillsetanalyzer/resume/_search?fields=keySkills\noutput\n{\"took\":19,\"timed_out\":false,\"_shards\":{\"total\":5,\"successful\":5,\"failed\":0},\"hits\":{\"total\":3,\"max_score\":1.0,\"hits\":[{\"_index\":\"skillsetanalyzer\",\"_type\":\"resume\",\"_id\":\"1\",\"_score\":1.0,\"fields\":{\"keySkills\":[\"Core\nJava\",\"J2EE\",\"Struts 1.x\",\"SOAP based\nWeb Services using JAX-WS\",\"Maven\",\"Ant\",\"JMS\",\"Apache\nStorm\",\"Kafka\",\"RDBMS\n(MySQL\",\"Tomcat\",\"Weblogic\",\"Eclipse\",\"Toad\",\"TIBCO\nproduct Suite (Administrator\",\"Business\nWork\",\"Designer\",\"EMS)\",\"CVS\",\"SVN\"]}},\n\nAnd below query returns the correct results but does not highlight the matched keywords. \n\ncurl -XGET 'localhost:9200/skillsetanalyzer/resume/_search?pretty' -d '\n{ \n\n\"query\":\n   {\"filtered\": \n       {\"filter\":\n            {\"terms\":\n                   {\"keySkills\":\n                         {\"index\":\"lookup\", \n                           \"type\":\"type\",\n                            \"id\":\"1\",\n                             \"path\":\"terms\"\n                   },\n                   \"_cache_key\":\"1\"\n             }\n         }\n     }\n },\n\"highlight\": {\n           \"fields\":{\n                \"keySkills\":{}\n                }\n        }\n}'\n\nField \"KeySkills\" is not analyzed and its type is String. I'm not able to make out what is wrong with the\nquery.\nPlease help in providing the necessary pointers.\n\nThanks !!\n","closed_by":{"login":"shagga","id":16184439,"node_id":"MDQ6VXNlcjE2MTg0NDM5","avatar_url":"https://avatars0.githubusercontent.com/u/16184439?v=4","gravatar_id":"","url":"https://api.github.com/users/shagga","html_url":"https://github.com/shagga","followers_url":"https://api.github.com/users/shagga/followers","following_url":"https://api.github.com/users/shagga/following{/other_user}","gists_url":"https://api.github.com/users/shagga/gists{/gist_id}","starred_url":"https://api.github.com/users/shagga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shagga/subscriptions","organizations_url":"https://api.github.com/users/shagga/orgs","repos_url":"https://api.github.com/users/shagga/repos","events_url":"https://api.github.com/users/shagga/events{/privacy}","received_events_url":"https://api.github.com/users/shagga/received_events","type":"User","site_admin":false},"performed_via_github_app":null}