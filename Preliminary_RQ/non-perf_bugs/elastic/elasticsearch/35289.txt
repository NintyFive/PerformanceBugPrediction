{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/35289","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35289/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35289/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35289/events","html_url":"https://github.com/elastic/elasticsearch/issues/35289","id":377762029,"node_id":"MDU6SXNzdWUzNzc3NjIwMjk=","number":35289,"title":"network.host:0.0.0.0 BUG?","user":{"login":"ipv4sec","id":29883657,"node_id":"MDQ6VXNlcjI5ODgzNjU3","avatar_url":"https://avatars0.githubusercontent.com/u/29883657?v=4","gravatar_id":"","url":"https://api.github.com/users/ipv4sec","html_url":"https://github.com/ipv4sec","followers_url":"https://api.github.com/users/ipv4sec/followers","following_url":"https://api.github.com/users/ipv4sec/following{/other_user}","gists_url":"https://api.github.com/users/ipv4sec/gists{/gist_id}","starred_url":"https://api.github.com/users/ipv4sec/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ipv4sec/subscriptions","organizations_url":"https://api.github.com/users/ipv4sec/orgs","repos_url":"https://api.github.com/users/ipv4sec/repos","events_url":"https://api.github.com/users/ipv4sec/events{/privacy}","received_events_url":"https://api.github.com/users/ipv4sec/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-11-06T09:37:25Z","updated_at":"2018-11-06T11:06:30Z","closed_at":"2018-11-06T11:06:30Z","author_association":"NONE","active_lock_reason":null,"body":"\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\n```\r\nVersion: 6.4.2, Build: default/zip/04711c2/2018-09-26T13:34:09.098244Z, JVM: 1.8.0_181\r\n```\r\n\r\n**Plugins installed**: \r\n[elasticsearch-analysis-ik](https://github.com/medcl/elasticsearch-analysis-ik/)\r\n\r\n**JVM version** (`java -version`):\r\n```\r\nopenjdk version \"1.8.0_181\"\r\nOpenJDK Runtime Environment (build 1.8.0_181-b13)\r\nOpenJDK 64-Bit Server VM (build 25.181-b13, mixed mode)\r\n```\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\n```\r\nLinux NodeA 3.10.0-514.10.2.el7.x86_64 #1 SMP Fri Mar 3 00:04:05 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n```\r\n**Description of the problem including expected versus actual behavior**:\r\nMy Master(192.168.64.184) ES config is:\r\n```\r\ncluster.name: zed\r\nnode.name: zed-184\r\nnode.master: true\r\nnode.data: true\r\nnetwork.host: 0.0.0.0\r\npath.data: /data/cluster/elasticsearch/datas\r\npath.logs: /data/cluster/elasticsearch/logs\r\nhttp.port: 9200\r\nhttp.cors.enabled: true\r\nhttp.cors.allow-origin: \"*\"\r\ntransport.tcp.port: 9300\r\ndiscovery.zen.ping.unicast.hosts: [\"192.168.64.184\"]\r\n```\r\nMy Slave (192.168.64.185) ES config is:\r\n```\r\ncluster.name: zed\r\nnode.name: zed-185\r\nnode.master: false\r\nnode.data: true\r\nnetwork.host: 0.0.0.0\r\npath.data: /data/cluster/elasticsearch/datas\r\npath.logs: /data/cluster/elasticsearch/logs\r\nhttp.port: 9200\r\nhttp.cors.enabled: true\r\nhttp.cors.allow-origin: \"*\"\r\ntransport.tcp.port: 9300\r\ndiscovery.zen.ping.unicast.hosts: [\"192.168.64.184\"]\r\n```\r\n\r\nThe Cluster cont work because slave (192.168.64.185) log show: \r\n```\r\npublish_address {10.10.10.185:9200}, bound_addresses {[::]:9200\r\n```\r\n\r\nWhen i change slave(192.168.64.185) ES config ```network.host: 0.0.0.0``` to \r\n```\r\nnetwork.host: 192.168.64.185\r\n```\r\nThe Cluster work !\r\n\r\nBUG ?\r\n\r\nMy Ip Address:\r\n```\r\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN qlen 1\r\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\r\n    inet 127.0.0.1/8 scope host lo\r\n       valid_lft forever preferred_lft forever\r\n    inet6 ::1/128 scope host\r\n       valid_lft forever preferred_lft forever\r\n2: em1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP qlen 1000\r\n    link/ether 84:2b:2b:68:4c:92 brd ff:ff:ff:ff:ff:ff\r\n    inet 192.168.64.185/24 brd 192.168.64.255 scope global em1\r\n       valid_lft forever preferred_lft forever\r\n    inet 10.10.10.185/24 brd 10.10.10.255 scope global em1:0\r\n       valid_lft forever preferred_lft forever\r\n    inet6 fe80::862b:2bff:fe68:4c92/64 scope link\r\n       valid_lft forever preferred_lft forever\r\n3: em2: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc mq state DOWN qlen 1000\r\n    link/ether 84:2b:2b:68:4c:94 brd ff:ff:ff:ff:ff:ff\r\n4: em3: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc mq state DOWN qlen 1000\r\n    link/ether 84:2b:2b:68:4c:96 brd ff:ff:ff:ff:ff:ff\r\n5: em4: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc mq state DOWN qlen 1000\r\n    link/ether 84:2b:2b:68:4c:98 brd ff:ff:ff:ff:ff:ff\r\n```\r\n\r\n\r\n**Provide logs (if relevant)**:\r\n```\r\n[es@NodeA elasticsearch]$ ./bin/elasticsearch\r\n[2018-11-06T17:10:04,700][INFO ][o.e.n.Node               ] [zed-185] initializing ...\r\n[2018-11-06T17:10:04,820][INFO ][o.e.e.NodeEnvironment    ] [zed-185] using [1] data paths, mounts [[/data (/dev/mapper/rootvg01-data)]], net usable_spac1.1tb], net total_space [1.2tb], types [xfs]\r\n[2018-11-06T17:10:04,820][INFO ][o.e.e.NodeEnvironment    ] [zed-185] heap size [989.8mb], compressed ordinary object pointers [true]\r\n[2018-11-06T17:10:04,842][INFO ][o.e.n.Node               ] [zed-185] node name [zed-185], node ID [bo4dkag-Q3mxAsvc4PrtKg]\r\n[2018-11-06T17:10:04,843][INFO ][o.e.n.Node               ] [zed-185] version[6.4.2], pid[19893], build[default/zip/04711c2/2018-09-26T13:34:09.098244Z],[Linux/3.10.0-514.10.2.el7.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/1.8.0_181/25.181-b13]\r\n[2018-11-06T17:10:04,843][INFO ][o.e.n.Node               ] [zed-185] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFtion=75, -XX:+UseCMSInitiatingOccupancyOnly, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStaraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=se, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/tmp/elasticsearch.8m6j52ZV, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hrr_pid%p.log, -XX:+PrintGCDetails, -XX:+PrintGCDateStamps, -XX:+PrintTenuringDistribution, -XX:+PrintGCApplicationStoppedTime, -Xloggc:logs/gc.log, -XX:+GCLogFileRotation, -XX:NumberOfGCLogFiles=32, -XX:GCLogFileSize=64m, -Des.path.home=/data/cluster/elasticsearch, -Des.path.conf=/data/cluster/elasticsearconfig, -Des.distribution.flavor=default, -Des.distribution.type=zip]\r\n[2018-11-06T17:10:07,024][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [aggs-matrix-stats]\r\n[2018-11-06T17:10:07,024][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [analysis-common]\r\n[2018-11-06T17:10:07,024][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [ingest-common]\r\n[2018-11-06T17:10:07,024][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [lang-expression]\r\n[2018-11-06T17:10:07,025][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [lang-mustache]\r\n[2018-11-06T17:10:07,025][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [lang-painless]\r\n[2018-11-06T17:10:07,025][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [mapper-extras]\r\n[2018-11-06T17:10:07,025][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [parent-join]\r\n[2018-11-06T17:10:07,025][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [percolator]\r\n[2018-11-06T17:10:07,025][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [rank-eval]\r\n[2018-11-06T17:10:07,026][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [reindex]\r\n[2018-11-06T17:10:07,026][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [repository-url]\r\n[2018-11-06T17:10:07,026][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [transport-netty4]\r\n[2018-11-06T17:10:07,026][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [tribe]\r\n[2018-11-06T17:10:07,026][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [x-pack-core]\r\n[2018-11-06T17:10:07,026][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [x-pack-deprecation]\r\n[2018-11-06T17:10:07,026][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [x-pack-graph]\r\n[2018-11-06T17:10:07,026][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [x-pack-logstash]\r\n[2018-11-06T17:10:07,027][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [x-pack-ml]\r\n[2018-11-06T17:10:07,027][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [x-pack-monitoring]\r\n[2018-11-06T17:10:07,027][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [x-pack-rollup]\r\n[2018-11-06T17:10:07,027][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [x-pack-security]\r\n[2018-11-06T17:10:07,027][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [x-pack-sql]\r\n[2018-11-06T17:10:07,027][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [x-pack-upgrade]\r\n[2018-11-06T17:10:07,027][INFO ][o.e.p.PluginsService     ] [zed-185] loaded module [x-pack-watcher]\r\n[2018-11-06T17:10:07,028][INFO ][o.e.p.PluginsService     ] [zed-185] loaded plugin [analysis-ik]\r\n[2018-11-06T17:10:11,936][INFO ][o.e.x.s.a.s.FileRolesStore] [zed-185] parsed [0] roles from file [/data/cluster/elasticsearch/config/roles.yml]\r\n[2018-11-06T17:10:12,595][INFO ][o.e.x.m.j.p.l.CppLogMessageHandler] [controller/20061] [Main.cc@109] controller (64 bit): Version 6.4.2 (Build 660eefe6f55) Copyright (c) 2018 Elasticsearch BV\r\n[2018-11-06T17:10:13,016][DEBUG][o.e.a.ActionModule       ] Using REST wrapper from plugin org.elasticsearch.xpack.security.Security\r\n[2018-11-06T17:10:13,273][INFO ][o.e.d.DiscoveryModule    ] [zed-185] using discovery type [zen]\r\n[2018-11-06T17:10:14,185][INFO ][o.e.n.Node               ] [zed-185] initialized\r\n[2018-11-06T17:10:14,186][INFO ][o.e.n.Node               ] [zed-185] starting ...\r\n[2018-11-06T17:10:14,423][INFO ][o.e.t.TransportService   ] [zed-185] publish_address {10.10.10.185:9300}, bound_addresses {[::]:9300}\r\n[2018-11-06T17:10:14,461][INFO ][o.e.b.BootstrapChecks    ] [zed-185] bound or publishing to a non-loopback address, enforcing bootstrap checks\r\n[2018-11-06T17:10:44,565][WARN ][o.e.n.Node               ] [zed-185] timed out while waiting for initial discovery state - timeout: 30s\r\n[2018-11-06T17:10:44,588][INFO ][o.e.x.s.t.n.SecurityNetty4HttpServerTransport] [zed-185] publish_address {10.10.10.185:9200}, bound_addresses {[::]:9200\r\n[2018-11-06T17:10:44,589][INFO ][o.e.n.Node               ] [zed-185] started\r\n[2018-11-06T17:10:47,863][INFO ][o.e.d.z.ZenDiscovery     ] [zed-185] failed to send join request to master [{zed-184}{cSo1fVhYTnKBUPre_Ytb_w}{VYn8p9UhR3YhFnimiRQ}{192.168.64.184}{192.168.64.184:9300}{ml.machine_memory=33545191424, ml.max_open_jobs=20, xpack.installed=true, ml.enabled=true}], reason [RemoransportException[[zed-184][192.168.64.184:9300][internal:discovery/zen/join]]; nested: ConnectTransportException[[zed-185][10.10.10.185:9300] connect_tiut[30s]]; ]\r\n[2018-11-06T17:11:21,089][INFO ][o.e.d.z.ZenDiscovery     ] [zed-185] failed to send join request to master [{zed-184}{cSo1fVhYTnKBUPre_Ytb_w}{VYn8p9UhR3YhFnimiRQ}{192.168.64.184}{192.168.64.184:9300}{ml.machine_memory=33545191424, ml.max_open_jobs=20, xpack.installed=true, ml.enabled=true}], reason [RemoransportException[[zed-184][192.168.64.184:9300][internal:discovery/zen/join]]; nested: ConnectTransportException[[zed-185][10.10.10.185:9300] connect_tiut[30s]]; ]\r\n[2018-11-06T17:11:54,312][INFO ][o.e.d.z.ZenDiscovery     ] [zed-185] failed to send join request to master [{zed-184}{cSo1fVhYTnKBUPre_Ytb_w}{VYn8p9UhR3YhFnimiRQ}{192.168.64.184}{192.168.64.184:9300}{ml.machine_memory=33545191424, ml.max_open_jobs=20, xpack.installed=true, ml.enabled=true}], reason [RemoransportException[[zed-184][192.168.64.184:9300][internal:discovery/zen/join]]; nested: ConnectTransportException[[zed-185][10.10.10.185:9300] connect_tiut[30s]]; ]\r\n[2018-11-06T17:12:27,533][INFO ][o.e.d.z.ZenDiscovery     ] [zed-185] failed to send join request to master [{zed-184}{cSo1fVhYTnKBUPre_Ytb_w}{VYn8p9UhR3YhFnimiRQ}{192.168.64.184}{192.168.64.184:9300}{ml.machine_memory=33545191424, ml.max_open_jobs=20, xpack.installed=true, ml.enabled=true}], reason [RemoransportException[[zed-184][192.168.64.184:9300][internal:discovery/zen/join]]; nested: ConnectTransportException[[zed-185][10.10.10.185:9300] connect_tiut[30s]]; ]\r\n^C[2018-11-06T17:12:32,808][INFO ][o.e.x.m.j.p.NativeController] Native controller process has stopped - no new native processes can be started\r\n[2018-11-06T17:12:32,810][INFO ][o.e.n.Node               ] [zed-185] stopping ...\r\n[2018-11-06T17:12:32,827][INFO ][o.e.d.z.ZenDiscovery     ] [zed-185] failed to send join request to master [{zed-184}{cSo1fVhYTnKBUPre_Ytb_w}{VYn8p9UhR3YhFnimiRQ}{192.168.64.184}{192.168.64.184:9300}{ml.machine_memory=33545191424, ml.max_open_jobs=20, xpack.installed=true, ml.enabled=true}], reason [IlleStateException[Future got interrupted]; nested: InterruptedException; ]\r\n[2018-11-06T17:12:32,828][INFO ][o.e.x.w.WatcherService   ] [zed-185] stopping watch service, reason [shutdown initiated]\r\n^C[2018-11-06T17:12:33,123][INFO ][o.e.n.Node               ] [zed-185] stopped\r\n[2018-11-06T17:12:33,123][INFO ][o.e.n.Node               ] [zed-185] closing ...\r\n[2018-11-06T17:12:33,141][INFO ][o.e.n.Node               ] [zed-185] closed\r\n```\r\n","closed_by":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"performed_via_github_app":null}