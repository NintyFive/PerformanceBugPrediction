{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/54671","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54671/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54671/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54671/events","html_url":"https://github.com/elastic/elasticsearch/issues/54671","id":592821865,"node_id":"MDU6SXNzdWU1OTI4MjE4NjU=","number":54671,"title":"SQL: SYS TABLES to list indices as TABLE for internal clients","user":{"login":"bpintea","id":1562801,"node_id":"MDQ6VXNlcjE1NjI4MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1562801?v=4","gravatar_id":"","url":"https://api.github.com/users/bpintea","html_url":"https://github.com/bpintea","followers_url":"https://api.github.com/users/bpintea/followers","following_url":"https://api.github.com/users/bpintea/following{/other_user}","gists_url":"https://api.github.com/users/bpintea/gists{/gist_id}","starred_url":"https://api.github.com/users/bpintea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bpintea/subscriptions","organizations_url":"https://api.github.com/users/bpintea/orgs","repos_url":"https://api.github.com/users/bpintea/repos","events_url":"https://api.github.com/users/bpintea/events{/privacy}","received_events_url":"https://api.github.com/users/bpintea/received_events","type":"User","site_admin":false},"labels":[{"id":912794284,"node_id":"MDU6TGFiZWw5MTI3OTQyODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Query%20Languages/SQL","name":":Query Languages/SQL","color":"0e8a16","default":false,"description":"SQL querying"},{"id":1967501040,"node_id":"MDU6TGFiZWwxOTY3NTAxMDQw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:QL","name":"Team:QL","color":"fef2c0","default":false,"description":"Meta label for query languages team"},{"id":929267538,"node_id":"MDU6TGFiZWw5MjkyNjc1Mzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/team-discuss","name":"team-discuss","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"bpintea","id":1562801,"node_id":"MDQ6VXNlcjE1NjI4MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1562801?v=4","gravatar_id":"","url":"https://api.github.com/users/bpintea","html_url":"https://github.com/bpintea","followers_url":"https://api.github.com/users/bpintea/followers","following_url":"https://api.github.com/users/bpintea/following{/other_user}","gists_url":"https://api.github.com/users/bpintea/gists{/gist_id}","starred_url":"https://api.github.com/users/bpintea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bpintea/subscriptions","organizations_url":"https://api.github.com/users/bpintea/orgs","repos_url":"https://api.github.com/users/bpintea/repos","events_url":"https://api.github.com/users/bpintea/events{/privacy}","received_events_url":"https://api.github.com/users/bpintea/received_events","type":"User","site_admin":false},"assignees":[{"login":"bpintea","id":1562801,"node_id":"MDQ6VXNlcjE1NjI4MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1562801?v=4","gravatar_id":"","url":"https://api.github.com/users/bpintea","html_url":"https://github.com/bpintea","followers_url":"https://api.github.com/users/bpintea/followers","following_url":"https://api.github.com/users/bpintea/following{/other_user}","gists_url":"https://api.github.com/users/bpintea/gists{/gist_id}","starred_url":"https://api.github.com/users/bpintea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bpintea/subscriptions","organizations_url":"https://api.github.com/users/bpintea/orgs","repos_url":"https://api.github.com/users/bpintea/repos","events_url":"https://api.github.com/users/bpintea/events{/privacy}","received_events_url":"https://api.github.com/users/bpintea/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2020-04-02T17:57:24Z","updated_at":"2020-05-05T16:18:35Z","closed_at":"2020-05-05T16:18:35Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The current (c495d220ac8f) implementation will report the indices as `BASE TABLE` unless a legacy mode is enabled; this mode is triggered by a listing of the tables with a ~wildcard (`%`)~ `TABLE` type filter. In case this filter is absent, the listing will be done with the table type of `BASE TABLE`.\r\n\r\nHowever:\r\n* the [ODBC documentation](https://docs.microsoft.com/en-us/sql/odbc/reference/syntax/sqltables-function#comments) requires the listing to always be `TABLE` (among other types), `or a data source-specific type name` (see the comments for the `TABLE_TYPE` columns).\r\n* the JDBC documentation for [getTables()](https://docs.oracle.com/javase/10/docs/api/java/sql/DatabaseMetaData.html#getTables(java.lang.String,java.lang.String,java.lang.String,java.lang.String%5B%5D)) and [getTableTypes()](https://docs.oracle.com/javase/10/docs/api/java/sql/DatabaseMetaData.html#getTableTypes()) hint towards the same types as the ODBC docs.\r\n\r\nWhile there is no obvious ODBC enforcement on the table type and more modern non-Microsoft applications will happily accept `BASE TABLE`, the older apps (ex.: SQL Server Integration Services' Linked Servers) and modern Microsoft ones (recent Excells, PowerBI) will **not work** with `BASE TABLE`, i.e. the \"data source-specific type\" tables are just ignored, not listed as available to the users. \r\nNote that some of these \"not-working\" apps don't make use of the wildcard (i.e. use a `NULL` filter), neither specifically query for `TABLE` type, so the legacy mode is not triggered.\r\n\r\nThis proposal is to always enable the legacy mode for ODBC clients in the server (and potentially for JDBC too).\r\n\r\n(This is a respin of the #30398 issue.)","closed_by":{"login":"bpintea","id":1562801,"node_id":"MDQ6VXNlcjE1NjI4MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1562801?v=4","gravatar_id":"","url":"https://api.github.com/users/bpintea","html_url":"https://github.com/bpintea","followers_url":"https://api.github.com/users/bpintea/followers","following_url":"https://api.github.com/users/bpintea/following{/other_user}","gists_url":"https://api.github.com/users/bpintea/gists{/gist_id}","starred_url":"https://api.github.com/users/bpintea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bpintea/subscriptions","organizations_url":"https://api.github.com/users/bpintea/orgs","repos_url":"https://api.github.com/users/bpintea/repos","events_url":"https://api.github.com/users/bpintea/events{/privacy}","received_events_url":"https://api.github.com/users/bpintea/received_events","type":"User","site_admin":false},"performed_via_github_app":null}