[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/527425012","html_url":"https://github.com/elastic/elasticsearch/issues/46262#issuecomment-527425012","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46262","id":527425012,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzQyNTAxMg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-09-03T11:50:38Z","updated_at":"2019-09-03T11:50:38Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/527435232","html_url":"https://github.com/elastic/elasticsearch/issues/46262#issuecomment-527435232","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46262","id":527435232,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzQzNTIzMg==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-09-03T12:24:39Z","updated_at":"2019-09-03T12:24:39Z","author_association":"CONTRIBUTOR","body":"The PR that implements the conversion is #46265","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/565038794","html_url":"https://github.com/elastic/elasticsearch/issues/46262#issuecomment-565038794","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46262","id":565038794,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTAzODc5NA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-12-12T14:51:37Z","updated_at":"2019-12-12T14:51:37Z","author_association":"CONTRIBUTOR","body":"For the record, this test is muted in 7.5 through to master.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/565077543","html_url":"https://github.com/elastic/elasticsearch/issues/46262#issuecomment-565077543","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46262","id":565077543,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTA3NzU0Mw==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-12-12T16:21:03Z","updated_at":"2019-12-12T16:21:03Z","author_association":"CONTRIBUTOR","body":"The problem is this:\r\n\r\n```\r\n[2019-12-12T15:40:11,596][ERROR][o.e.x.m.p.l.CppLogMessageHandler] [v7.6.0-0] [controller/4715] [CDetachedProcessSpawner.cc@184] Child process with PID 4863 was terminated by signal 9\r\n[2019-12-12T15:40:11,733][INFO ][o.e.x.m.j.p.a.AutodetectProcessManager] [v7.6.0-0] Successfully set job state to [failed] for job [ml-mappings-upgrade-job]\r\n```\r\n\r\nThe test clusters code is killing the ML jobs before it kills the ES JVM.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/565092277","html_url":"https://github.com/elastic/elasticsearch/issues/46262#issuecomment-565092277","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46262","id":565092277,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTA5MjI3Nw==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-12-12T16:56:48Z","updated_at":"2019-12-12T16:56:48Z","author_association":"CONTRIBUTOR","body":"The code that causes the problem is https://github.com/elastic/elasticsearch/blob/d442ff9223d3fab8ab8aa7e2dd2a494d43adf81f/buildSrc/src/main/java/org/elasticsearch/gradle/testclusters/ElasticsearchNode.java#L840-L841\r\n\r\nIt needs to kill the ES JVM before the ML processes.  Otherwise the ES JVM thinks the ML processes have crashed, records them as failed and then they don't start again automatically during the rolling upgrade.","performed_via_github_app":null}]