[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/226660777","html_url":"https://github.com/elastic/elasticsearch/issues/14798#issuecomment-226660777","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14798","id":226660777,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjY2MDc3Nw==","user":{"login":"mtraynham","id":5741321,"node_id":"MDQ6VXNlcjU3NDEzMjE=","avatar_url":"https://avatars0.githubusercontent.com/u/5741321?v=4","gravatar_id":"","url":"https://api.github.com/users/mtraynham","html_url":"https://github.com/mtraynham","followers_url":"https://api.github.com/users/mtraynham/followers","following_url":"https://api.github.com/users/mtraynham/following{/other_user}","gists_url":"https://api.github.com/users/mtraynham/gists{/gist_id}","starred_url":"https://api.github.com/users/mtraynham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtraynham/subscriptions","organizations_url":"https://api.github.com/users/mtraynham/orgs","repos_url":"https://api.github.com/users/mtraynham/repos","events_url":"https://api.github.com/users/mtraynham/events{/privacy}","received_events_url":"https://api.github.com/users/mtraynham/received_events","type":"User","site_admin":false},"created_at":"2016-06-17T01:46:21Z","updated_at":"2016-06-17T02:01:58Z","author_association":"NONE","body":"It'd be nice to have [BulkProcessor#L348](https://github.com/elastic/elasticsearch/blob/1.7/src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java#L348) fixed back in 1.7.  I just ran into this today, as I have multiple data source threads running (using ExecutorService), all which populate a single BulkProcessor.  We `cancel` the source thread in some cases, which triggers an interrupt and thus the BulkProcessor may sometimes swallow it (more often than not).\n\nIt does look like the Throwable is returned back to the BulkListener, so maybe I can check if it's an InterruptedException and re-interrupt?  Thoughts?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/226685161","html_url":"https://github.com/elastic/elasticsearch/issues/14798#issuecomment-226685161","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14798","id":226685161,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjY4NTE2MQ==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-06-17T05:42:15Z","updated_at":"2016-06-17T05:42:15Z","author_association":"MEMBER","body":"> It'd be nice to have BulkProcessor#L348 fixed back in 1.7.\n\nWe only fix critical bugs (e.g. ones that lead to data loss) in 1.7 and I'd not consider this one critical enough.\n\n> It does look like the Throwable is returned back to the BulkListener, so maybe I can check if it's an InterruptedException and re-interrupt? Thoughts?\n\nAdmittedly, this is just a workaround but this should work. Just don't forget to remove it once you upgrade. ;) It won't hurt calling `Thread.currentThread().interrupt()` again in your listener but it is not necessary on newer versions of Elasticsearch (starting with Elasticsearch 2.2.0)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/226768130","html_url":"https://github.com/elastic/elasticsearch/issues/14798#issuecomment-226768130","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14798","id":226768130,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjc2ODEzMA==","user":{"login":"mtraynham","id":5741321,"node_id":"MDQ6VXNlcjU3NDEzMjE=","avatar_url":"https://avatars0.githubusercontent.com/u/5741321?v=4","gravatar_id":"","url":"https://api.github.com/users/mtraynham","html_url":"https://github.com/mtraynham","followers_url":"https://api.github.com/users/mtraynham/followers","following_url":"https://api.github.com/users/mtraynham/following{/other_user}","gists_url":"https://api.github.com/users/mtraynham/gists{/gist_id}","starred_url":"https://api.github.com/users/mtraynham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtraynham/subscriptions","organizations_url":"https://api.github.com/users/mtraynham/orgs","repos_url":"https://api.github.com/users/mtraynham/repos","events_url":"https://api.github.com/users/mtraynham/events{/privacy}","received_events_url":"https://api.github.com/users/mtraynham/received_events","type":"User","site_admin":false},"created_at":"2016-06-17T13:26:12Z","updated_at":"2016-06-17T13:26:12Z","author_association":"NONE","body":"Seems to work ok.  Thanks for the feedback @danielmitterdorfer !\n","performed_via_github_app":null}]