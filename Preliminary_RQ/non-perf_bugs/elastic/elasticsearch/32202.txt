{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/32202","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32202/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32202/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32202/events","html_url":"https://github.com/elastic/elasticsearch/issues/32202","id":342782308,"node_id":"MDU6SXNzdWUzNDI3ODIzMDg=","number":32202,"title":"Geo Context suggester not working in version 5.5.2","user":{"login":"vandanachadha","id":982568,"node_id":"MDQ6VXNlcjk4MjU2OA==","avatar_url":"https://avatars3.githubusercontent.com/u/982568?v=4","gravatar_id":"","url":"https://api.github.com/users/vandanachadha","html_url":"https://github.com/vandanachadha","followers_url":"https://api.github.com/users/vandanachadha/followers","following_url":"https://api.github.com/users/vandanachadha/following{/other_user}","gists_url":"https://api.github.com/users/vandanachadha/gists{/gist_id}","starred_url":"https://api.github.com/users/vandanachadha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vandanachadha/subscriptions","organizations_url":"https://api.github.com/users/vandanachadha/orgs","repos_url":"https://api.github.com/users/vandanachadha/repos","events_url":"https://api.github.com/users/vandanachadha/events{/privacy}","received_events_url":"https://api.github.com/users/vandanachadha/received_events","type":"User","site_admin":false},"labels":[{"id":146833729,"node_id":"MDU6TGFiZWwxNDY4MzM3Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Suggesters","name":":Search/Suggesters","color":"0e8a16","default":false,"description":"\"Did you mean\" and suggestions as you type"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"assignees":[{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2018-07-19T15:36:43Z","updated_at":"2018-08-17T15:13:17Z","closed_at":"2018-08-17T15:13:17Z","author_association":"NONE","active_lock_reason":null,"body":"I ned to use the geo context for my autocomplete. But it is not returning any results. When I run the autocomplete query without the context, results are returned.\r\n\r\n1. Autocomplete query with context:\r\n===============================\r\nGET staging/_search\r\n{\r\n     \"suggest\": {\r\n        \"suggestion\": {\r\n          \"prefix\": \"S端dsteiermark\",\r\n          \"completion\": {\r\n            \"field\": \"autoCompleteName\",\r\n            \"size\": 10,\r\n            \"contexts\": {\r\n              \"locationContext\": [{\r\n                \"lat\": \"40.74164831951294\",\r\n                \"lon\": \"-73.98714780807495\",\r\n                \"precision\": 12\r\n              }]\r\n            }\r\n          }\r\n        }\r\n     }\r\n}\r\n==================================\r\nRESULT of Autocomplete query with context\r\n====================================\r\n{\r\n  \"took\": 0,\r\n  \"timed_out\": false,\r\n  \"_shards\": {\r\n    \"total\": 1,\r\n    \"successful\": 1,\r\n    \"failed\": 0\r\n  },\r\n  \"hits\": {\r\n    \"total\": 0,\r\n    \"max_score\": 0,\r\n    \"hits\": []\r\n  },\r\n  \"suggest\": {\r\n    \"suggestion\": [\r\n      {\r\n        \"text\": \"S端dsteiermark\",\r\n        \"offset\": 0,\r\n        \"length\": 13,\r\n        \"options\": []\r\n      }\r\n    ]\r\n  }\r\n}\r\n===================================\r\n\r\n3. RESULT OF QUERY WITHOUT CONTEXT:\r\n===========================\r\n  \"took\": 1713,\r\n  \"timed_out\": false,\r\n  \"_shards\": {\r\n    \"total\": 1,\r\n    \"successful\": 1,\r\n    \"failed\": 0\r\n  },\r\n  \"hits\": {\r\n    \"total\": 0,\r\n    \"max_score\": 0,\r\n    \"hits\": []\r\n  },\r\n  \"suggest\": {\r\n    \"suggestion\": [\r\n      {\r\n        \"text\": \"S端dsteiermark\",\r\n        \"offset\": 0,\r\n        \"length\": 13,\r\n        \"options\": [\r\n          {\r\n            \"text\": \"S端dsteiermark, Tement, Zieregg 2008\",\r\n            \"_index\": \"staging\",\r\n            \"_type\": \"menuitemES\",\r\n            \"_id\": \"591df0affa035585189619510x3bc\",\r\n            \"_score\": 1,\r\n            \"_source\": {\r\n              \"venueId\": \"457ebeaaf964a5203f3f1fe3\",\r\n              \"name\": \"Eleven Madison Park\",\r\n              \"locP\": {\r\n                \"type\": \"Point\",\r\n                \"coordinates\": [\r\n                  40.74164831951294,\r\n                  -73.98714780807495\r\n                ]\r\n\r\n========================================\r\n\r\n\r\n4. Mapping portion:\r\n          \"autoCompleteName\": {\r\n            \"type\": \"completion\",\r\n            \"analyzer\": \"standard\",\r\n            \"preserve_separators\": true,\r\n            \"preserve_position_increments\": false,\r\n            \"max_input_length\": 50,\r\n            \"contexts\": [\r\n                {\r\n                    \"name\":\"locationContext\",\r\n                    \"type\":\"geo\",\r\n                    \"precision\":\"25m\",\r\n                    \"path\":\"locP\"\r\n                }\r\n            ]\r\n=====================================\r\n\r\nPlease suggest what is wrong. ","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}