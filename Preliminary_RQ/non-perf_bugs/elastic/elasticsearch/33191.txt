{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/33191","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33191/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33191/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33191/events","html_url":"https://github.com/elastic/elasticsearch/issues/33191","id":354607946,"node_id":"MDU6SXNzdWUzNTQ2MDc5NDY=","number":33191,"title":"/_nodes/stats/indices/query_cache query_cache always empty","user":{"login":"leeeboo","id":877939,"node_id":"MDQ6VXNlcjg3NzkzOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/877939?v=4","gravatar_id":"","url":"https://api.github.com/users/leeeboo","html_url":"https://github.com/leeeboo","followers_url":"https://api.github.com/users/leeeboo/followers","following_url":"https://api.github.com/users/leeeboo/following{/other_user}","gists_url":"https://api.github.com/users/leeeboo/gists{/gist_id}","starred_url":"https://api.github.com/users/leeeboo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leeeboo/subscriptions","organizations_url":"https://api.github.com/users/leeeboo/orgs","repos_url":"https://api.github.com/users/leeeboo/repos","events_url":"https://api.github.com/users/leeeboo/events{/privacy}","received_events_url":"https://api.github.com/users/leeeboo/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":912838879,"node_id":"MDU6TGFiZWw5MTI4Mzg4Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/Security","name":":Security/Security","color":"0e8a16","default":false,"description":"Security issues without another label"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":753477051,"node_id":"MDU6TGFiZWw3NTM0NzcwNTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.3.0","name":"v6.3.0","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"assignees":[{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2018-08-28T07:39:10Z","updated_at":"2018-09-04T21:50:31Z","closed_at":"2018-09-04T21:50:31Z","author_association":"NONE","active_lock_reason":null,"body":"Elasticsearch version (bin/elasticsearch --version):6.4.0\r\n\r\nPlugins installed: [analysis-ik]\r\n\r\nJVM version (java -version):1.8.0_181\r\n\r\nOS version (uname -a if on a Unix-like system):CentOS 7 4.18.3-1.el7.elrepo.x86_64\r\n\r\nDescription of the problem including expected versus actual behavior:\r\n\r\nWe have all cache metrics 0, such as:\r\n\r\n/_nodes/stats/indices/query_cache\r\n\r\n```\r\n{\r\n  \"_nodes\" : {\r\n    \"total\" : 3,\r\n    \"successful\" : 3,\r\n    \"failed\" : 0\r\n  },\r\n  \"cluster_name\" : \"weixinhost\",\r\n  \"nodes\" : {\r\n    \"6f0Kvy9VQf6pUdKpGc55_w\" : {\r\n      \"timestamp\" : 1535441875213,\r\n      \"name\" : \"node-2\",\r\n      \"transport_address\" : \"172.31.100.174:9300\",\r\n      \"host\" : \"172.31.100.174\",\r\n      \"ip\" : \"172.31.100.174:9300\",\r\n      \"roles\" : [\r\n        \"master\",\r\n        \"data\",\r\n        \"ingest\"\r\n      ],\r\n      \"attributes\" : {\r\n        \"ml.machine_memory\" : \"16026021888\",\r\n        \"hdsize\" : \"300Gb\",\r\n        \"xpack.installed\" : \"true\",\r\n        \"az\" : \"cn-north-1a\",\r\n        \"vmsize\" : \"r4.large\",\r\n        \"ml.max_open_jobs\" : \"20\",\r\n        \"ml.enabled\" : \"true\"\r\n      },\r\n      \"indices\" : {\r\n        \"query_cache\" : {\r\n          \"memory_size_in_bytes\" : 0,\r\n          \"total_count\" : 0,\r\n          \"hit_count\" : 0,\r\n          \"miss_count\" : 0,\r\n          \"cache_size\" : 0,\r\n          \"cache_count\" : 0,\r\n          \"evictions\" : 0\r\n        }\r\n      }\r\n    },\r\n    ...\r\n}\r\n```\r\n**Steps to reproduce**:\r\n\r\nelasticsearch.yml\r\n\r\n```\r\ncluster.name:XXX\r\nnode.name: node-1\r\npath.data: /elasticsearch/data\r\npath.logs: /elasticsearch/log\r\nnetwork.host: 0.0.0.0\r\nhttp.port: 9200\r\ndiscovery.zen.ping.unicast.hosts: [.............]\r\ndiscovery.zen.minimum_master_nodes: 2\r\nbootstrap.memory_lock: true\r\n```\r\n\r\n/INDEX/_settings\r\n\r\n```\r\n{\r\n  \"INDEX\" : {\r\n    \"settings\" : {\r\n      \"index\" : {\r\n        \"refresh_interval\" : \"10s\",\r\n        \"number_of_shards\" : \"9\",\r\n        \"provided_name\" : \"follower-v2\",\r\n        \"creation_date\" : \"1535191750932\",\r\n        \"requests\" : {\r\n          \"cache\" : {\r\n            \"enable\" : \"true\"\r\n          }\r\n        },\r\n        \"unassigned\" : {\r\n          \"node_left\" : {\r\n            \"delayed_timeout\" : \"5m\"\r\n          }\r\n        },\r\n        \"number_of_replicas\" : \"0\",\r\n        \"queries\" : {\r\n          \"cache\" : {\r\n            \"enabled\" : \"true\"\r\n          }\r\n        },\r\n        \"uuid\" : \"CeBrVgGRQ42NA4QlgQNiLA\",\r\n        \"version\" : {\r\n          \"created\" : \"6030299\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}