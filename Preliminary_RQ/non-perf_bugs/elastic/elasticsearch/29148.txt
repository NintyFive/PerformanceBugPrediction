{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/29148","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29148/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29148/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29148/events","html_url":"https://github.com/elastic/elasticsearch/issues/29148","id":306622245,"node_id":"MDU6SXNzdWUzMDY2MjIyNDU=","number":29148,"title":"Confusing documentation on Query String Query on the split by whitespace behaviour","user":{"login":"WydD","id":1183799,"node_id":"MDQ6VXNlcjExODM3OTk=","avatar_url":"https://avatars1.githubusercontent.com/u/1183799?v=4","gravatar_id":"","url":"https://api.github.com/users/WydD","html_url":"https://github.com/WydD","followers_url":"https://api.github.com/users/WydD/followers","following_url":"https://api.github.com/users/WydD/following{/other_user}","gists_url":"https://api.github.com/users/WydD/gists{/gist_id}","starred_url":"https://api.github.com/users/WydD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WydD/subscriptions","organizations_url":"https://api.github.com/users/WydD/orgs","repos_url":"https://api.github.com/users/WydD/repos","events_url":"https://api.github.com/users/WydD/events{/privacy}","received_events_url":"https://api.github.com/users/WydD/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"},{"id":830619020,"node_id":"MDU6TGFiZWw4MzA2MTkwMjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.2.2","name":"v6.2.2","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-03-19T20:28:16Z","updated_at":"2018-07-31T03:42:21Z","closed_at":"2018-03-27T09:28:10Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: 6.2.2 (but all 6.x is affected)\r\n\r\nHi everyone,\r\n\r\nIn the reference documentation for Query String Queries https://www.elastic.co/guide/en/elasticsearch/reference/6.2/query-dsl-query-string-query.html it is said the following\r\n\r\n> Whitespaces are not considered operators, this means that new york city will be passed \"as is\" to the analyzer configured for the field. If the field is a keyword field the analyzer will create a single term new york city and the query builder will use this term in the query. If you want to query each term separately you need to add explicit operators around the terms (e.g. new AND york AND city).\r\n\r\nAnd right after this, we can find the documentation of the default_operator parameter:\r\n\r\n> The default operator used if no explicit operator is specified. For example, with a default operator of OR, the query capital of Hungary is translated to capital OR of OR Hungary, and with default operator of AND, the same query is translated to capital AND of AND Hungary. The default value is OR.\r\n\r\nBecause the split by whitespace is not available anymore directly (see https://github.com/elastic/elasticsearch/issues/25574), only queries with explicit separations like `(new) (york) (city)` would be indeed parsed as `new AND york AND city` (with default_operator=AND) but not `new york city` which would be sent as one query to the target analyzer(s). The documentation is confusing on that regard.\r\n\r\nI'm not sure of the exact implications here but it broke one of our multi field (multi analyzer) unit test when we tried to migrate as is the query string we did.","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}