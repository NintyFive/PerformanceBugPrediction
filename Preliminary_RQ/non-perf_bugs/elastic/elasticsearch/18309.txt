{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/18309","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18309/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18309/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18309/events","html_url":"https://github.com/elastic/elasticsearch/issues/18309","id":154606585,"node_id":"MDU6SXNzdWUxNTQ2MDY1ODU=","number":18309,"title":"unable to index trivial dataset without entering GC hell","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"},{"id":158399402,"node_id":"MDU6TGFiZWwxNTgzOTk0MDI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Meta","name":"Meta","color":"e11d21","default":false,"description":null},{"id":92913658,"node_id":"MDU6TGFiZWw5MjkxMzY1OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/blocker","name":"blocker","color":"e11d21","default":false,"description":null},{"id":364411189,"node_id":"MDU6TGFiZWwzNjQ0MTExODk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v5.0.0-alpha3","name":"v5.0.0-alpha3","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-05-12T23:54:11Z","updated_at":"2016-05-15T11:04:03Z","closed_at":"2016-05-15T11:04:03Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Followup to https://github.com/elastic/elasticsearch/pull/16334\n\nIn previous releases, elasticsearch would use up to 1GB of ram by default. With this change, it will only use 512MB. The problem is, elasticsearch is not ready for this, and our own benchmarks show it: https://benchmarks.elastic.co/index.html#gc_time\n\nYou can easily see the ~ **25x** increase in old GC time with this change, for this trivial dataset.\n\nThere are two ways to fix this:\n1. go back to using a 1GB heap by default\n2. fix ES to not waste so much RAM.\n\nI don't care which one we do, but the defaults should support indexing a trivial dataset. I've indexed this dataset enough times with lucene to know exactly how trivial it is, disputing that point will not be productive.\n\nThe way I see it, ES isn't ready for a 512mb default heap for a number of reasons:\n- explosive bombs like fielddata still exist in some shape or form\n- trappy RecylingXYZPools of this form or another hogging RAM\n- use of netty as a library for networking\n- creation of far too many threads, beyond the point of being wasteful.\n\nThis list could go on and on. Most of these are simply bad tradeoffs. It may be easier to just go back to a 1GB heap for 5.0 than to try to address these things. But lets not blame @jasontedor for trying to reduce the memory, it is a good goal.\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}