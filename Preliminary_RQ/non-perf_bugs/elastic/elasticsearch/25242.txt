{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25242","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25242/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25242/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25242/events","html_url":"https://github.com/elastic/elasticsearch/issues/25242","id":236105281,"node_id":"MDU6SXNzdWUyMzYxMDUyODE=","number":25242,"title":"[docs] Document keystore eligible settings on S3 repository plugin and AWS discovery plugin","user":{"login":"bczifra","id":19267722,"node_id":"MDQ6VXNlcjE5MjY3NzIy","avatar_url":"https://avatars1.githubusercontent.com/u/19267722?v=4","gravatar_id":"","url":"https://api.github.com/users/bczifra","html_url":"https://github.com/bczifra","followers_url":"https://api.github.com/users/bczifra/followers","following_url":"https://api.github.com/users/bczifra/following{/other_user}","gists_url":"https://api.github.com/users/bczifra/gists{/gist_id}","starred_url":"https://api.github.com/users/bczifra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bczifra/subscriptions","organizations_url":"https://api.github.com/users/bczifra/orgs","repos_url":"https://api.github.com/users/bczifra/repos","events_url":"https://api.github.com/users/bczifra/events{/privacy}","received_events_url":"https://api.github.com/users/bczifra/received_events","type":"User","site_admin":false},"labels":[{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"},{"id":92913658,"node_id":"MDU6TGFiZWw5MjkxMzY1OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/blocker","name":"blocker","color":"e11d21","default":false,"description":null},{"id":699760326,"node_id":"MDU6TGFiZWw2OTk3NjAzMjY=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.0.0-rc1","name":"v6.0.0-rc1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"assignees":[{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2017-06-15T07:51:06Z","updated_at":"2017-09-22T07:17:30Z","closed_at":"2017-09-11T19:07:29Z","author_association":"MEMBER","active_lock_reason":null,"body":"The [AWS discovery](https://www.elastic.co/guide/en/elasticsearch/plugins/current/discovery-ec2-usage.html) and [S3 repository](https://www.elastic.co/guide/en/elasticsearch/plugins/current/repository-s3-repository.html) pages make no reference to the fact that the AWS credentials can be retrieved from the keystore, despite the fact that the [secure settings documentation](https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html) indicates:`See documentation for each setting to see if it is supported as part of the keystore.` \r\n\r\nI can't seem to find any setting at all that includes any keystore-related information as part of its document.  Right now I think this is pretty confusing for our users.  Additionally, @rjernst [indicated](https://discuss.elastic.co/t/getting-aws-credentials-from-keystore-for-discovery-ec2-plugin/87958/7) that \r\n\r\n> setting discovery.ec2.access_key in elasticsearch.yml should not work. This setting should only be allowed in the keystore\r\n\r\nso, if I understand that correctly, we shouldn't be [showing](https://www.elastic.co/guide/en/elasticsearch/plugins/current/discovery-ec2-usage.html) that this can be set in the elasticsearch.yml file.  \r\n\r\nAlso, based on [this](https://discuss.elastic.co/t/getting-aws-credentials-from-keystore-for-discovery-ec2-plugin/87958/5) post I think the `cloud.aws.*` settings need to be updated everywhere to instead be `discovery.ec2.*`, and `cloud.aws.region` should be `discovery.ec2.endpoint`.","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}