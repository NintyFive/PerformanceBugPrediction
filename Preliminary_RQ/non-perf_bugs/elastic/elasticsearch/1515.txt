{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1515","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1515/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1515/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1515/events","html_url":"https://github.com/elastic/elasticsearch/issues/1515","id":2414513,"node_id":"MDU6SXNzdWUyNDE0NTEz","number":1515,"title":"Bug Slf4j with log4j-over-slf4j in ESLoggerFactory => java.lang.NoSuchMethodError: org.apache.log4j.Logger.setLevel","user":{"login":"jmorille","id":538320,"node_id":"MDQ6VXNlcjUzODMyMA==","avatar_url":"https://avatars1.githubusercontent.com/u/538320?v=4","gravatar_id":"","url":"https://api.github.com/users/jmorille","html_url":"https://github.com/jmorille","followers_url":"https://api.github.com/users/jmorille/followers","following_url":"https://api.github.com/users/jmorille/following{/other_user}","gists_url":"https://api.github.com/users/jmorille/gists{/gist_id}","starred_url":"https://api.github.com/users/jmorille/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmorille/subscriptions","organizations_url":"https://api.github.com/users/jmorille/orgs","repos_url":"https://api.github.com/users/jmorille/repos","events_url":"https://api.github.com/users/jmorille/events{/privacy}","received_events_url":"https://api.github.com/users/jmorille/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2011-12-01T13:38:45Z","updated_at":"2013-06-26T16:08:38Z","closed_at":"2013-06-26T16:08:38Z","author_association":"NONE","active_lock_reason":null,"body":"Hello, \n\nWith this combination of slf4j-api +   logback + log4j-over-slf4j,\n the ESLoggerFactory was select (as wrong)  an Log4jESLoggerFactory.\n\nAs you known  log4j-over-slf4j,  is just a wrapper of log4j api in logback logger,  to catch it. \nThat not good to log by log4j redirection, in this case.\n\nIn more, the result is an exception with method Log4jESLogger.setLevel(Log4jESLogger.java:48 \n\nWhy did you open the isssue https://github.com/elasticsearch/elasticsearch/issues/1265 , that create this bug on  August 20, 2011 ?  \n\nCould you revert the issue a83c45b ?\n\ncf exception\n14:17:26.781 [elasticsearch[Colonel America]clusterService#updateTask-pool-11-thread-1] WARN  org.elasticsearch.indices.cluster - [Colonel America] [phonetic][0] failed to create shard\norg.elasticsearch.index.shard.IndexShardCreationException: [phonetic][0] failed to create shard\n    at org.elasticsearch.index.service.InternalIndexService.createShard(InternalIndexService.java:300) [elasticsearch-0.18.5.jar:na]\n    at org.elasticsearch.indices.cluster.IndicesClusterStateService.applyInitializingShard(IndicesClusterStateService.java:532) [elasticsearch-0.18.5.jar:na]\n    at org.elasticsearch.indices.cluster.IndicesClusterStateService.applyNewOrUpdatedShards(IndicesClusterStateService.java:501) [elasticsearch-0.18.5.jar:na]\n    at org.elasticsearch.indices.cluster.IndicesClusterStateService.clusterChanged(IndicesClusterStateService.java:173) [elasticsearch-0.18.5.jar:na]\n    at org.elasticsearch.cluster.service.InternalClusterService$2.run(InternalClusterService.java:271) [elasticsearch-0.18.5.jar:na]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [na:1.6.0_27]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [na:1.6.0_27]\n    at java.lang.Thread.run(Thread.java:662) [na:1.6.0_27]\nCaused by: java.lang.NoSuchMethodError: org.apache.log4j.Logger.setLevel(Lorg/apache/log4j/Level;)V\n    at org.elasticsearch.common.logging.log4j.Log4jESLogger.setLevel(Log4jESLogger.java:48) [elasticsearch-0.18.5.jar:na]\n    at org.elasticsearch.index.search.slowlog.ShardSlowLogSearchService.<init>(ShardSlowLogSearchService.java:144) [elasticsearch-0.18.5.jar:na]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [na:1.6.0_27]\n\nThank you\n\nJerome\n","closed_by":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"performed_via_github_app":null}