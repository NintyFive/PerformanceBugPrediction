[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/259471871","html_url":"https://github.com/elastic/elasticsearch/issues/21432#issuecomment-259471871","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21432","id":259471871,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTQ3MTg3MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-09T17:23:19Z","updated_at":"2016-11-09T17:23:19Z","author_association":"CONTRIBUTOR","body":"@nik9000 isn't it just about specifying `sort: _score` if you want to enable that?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/259530194","html_url":"https://github.com/elastic/elasticsearch/issues/21432#issuecomment-259530194","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21432","id":259530194,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTUzMDE5NA==","user":{"login":"avencar","id":8647679,"node_id":"MDQ6VXNlcjg2NDc2Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/8647679?v=4","gravatar_id":"","url":"https://api.github.com/users/avencar","html_url":"https://github.com/avencar","followers_url":"https://api.github.com/users/avencar/followers","following_url":"https://api.github.com/users/avencar/following{/other_user}","gists_url":"https://api.github.com/users/avencar/gists{/gist_id}","starred_url":"https://api.github.com/users/avencar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avencar/subscriptions","organizations_url":"https://api.github.com/users/avencar/orgs","repos_url":"https://api.github.com/users/avencar/repos","events_url":"https://api.github.com/users/avencar/events{/privacy}","received_events_url":"https://api.github.com/users/avencar/received_events","type":"User","site_admin":false},"created_at":"2016-11-09T21:21:58Z","updated_at":"2016-11-09T21:21:58Z","author_association":"NONE","body":"@clintongormley I've tried that and still no luck.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/259530993","html_url":"https://github.com/elastic/elasticsearch/issues/21432#issuecomment-259530993","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21432","id":259530993,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTUzMDk5Mw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-11-09T21:25:22Z","updated_at":"2016-11-09T21:25:22Z","author_association":"CONTRIBUTOR","body":"> @nik9000 isn't it just about specifying sort: _score if you want to enable that?\n\nI suspect so. I'll try and get it working locally soon and make an example in the reindex docs. If not, well, I'll fix it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/259804586","html_url":"https://github.com/elastic/elasticsearch/issues/21432#issuecomment-259804586","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21432","id":259804586,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTgwNDU4Ng==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-11-10T20:54:20Z","updated_at":"2016-11-10T20:54:20Z","author_association":"CONTRIBUTOR","body":"This works for me:\n\n```\ncurl -XDELETE localhost:9200/test\nfor i in $(seq 1 1000); do\n  curl -XPOST localhost:9200/test/test -d'{\"test\": \"test\"}'; echo\ndone\ncurl localhost:9200/_refresh?pretty\n\nfor i in $(seq 1 50); do\n  curl -XPOST localhost:9200/_reindex?filter_path=created,updated -d'{\n    \"size\": 10,\n    \"source\": {\n      \"index\": \"test\",\n      \"query\": {\n        \"function_score\" : {\n          \"query\" : { \"match_all\": {} },\n          \"random_score\" : {}\n        }\n      },\n      \"sort\": \"_score\"\n    },\n    \"dest\": {\n      \"index\": \"random-1\"\n    }\n  }'\n  curl localhost:9200/_refresh\n\n  curl 'localhost:9200/random-1/_search?size=0&filter_path=hits.total'; echo\ndone\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/259804685","html_url":"https://github.com/elastic/elasticsearch/issues/21432#issuecomment-259804685","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21432","id":259804685,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTgwNDY4NQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-11-10T20:54:45Z","updated_at":"2016-11-10T20:54:45Z","author_association":"CONTRIBUTOR","body":"The second loop selects more and more random documents.\n\nI'll push an update to the docs and close this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/259810960","html_url":"https://github.com/elastic/elasticsearch/issues/21432#issuecomment-259810960","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21432","id":259810960,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTgxMDk2MA==","user":{"login":"avencar","id":8647679,"node_id":"MDQ6VXNlcjg2NDc2Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/8647679?v=4","gravatar_id":"","url":"https://api.github.com/users/avencar","html_url":"https://github.com/avencar","followers_url":"https://api.github.com/users/avencar/followers","following_url":"https://api.github.com/users/avencar/following{/other_user}","gists_url":"https://api.github.com/users/avencar/gists{/gist_id}","starred_url":"https://api.github.com/users/avencar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avencar/subscriptions","organizations_url":"https://api.github.com/users/avencar/orgs","repos_url":"https://api.github.com/users/avencar/repos","events_url":"https://api.github.com/users/avencar/events{/privacy}","received_events_url":"https://api.github.com/users/avencar/received_events","type":"User","site_admin":false},"created_at":"2016-11-10T21:21:36Z","updated_at":"2016-11-10T21:21:36Z","author_association":"NONE","body":"I ran your script and it still didn't work for me. I should mention we're running an older version of elasticsearch (2.3.4). I end up with 20 documents in the random-1 index. It seems like it possibly worked correctly the first few iterations of reindex (10 new, 4 new, 6 new) but the next 47 iterations produced documents already in previous set of 20. Not as random as I would expect.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/259811724","html_url":"https://github.com/elastic/elasticsearch/issues/21432#issuecomment-259811724","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21432","id":259811724,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTgxMTcyNA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-11-10T21:24:53Z","updated_at":"2016-11-10T21:24:53Z","author_association":"CONTRIBUTOR","body":"Master: eeb6602c985aacb09fb679db6b0557ba9b901c5f\n5.x: adc794781a68a36d057ffacd1c2a9a196824bc73\n5.0: d24bd5de1e03f6232cbced36c5551cfc8376e760\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/259813357","html_url":"https://github.com/elastic/elasticsearch/issues/21432#issuecomment-259813357","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21432","id":259813357,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTgxMzM1Nw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-11-10T21:31:26Z","updated_at":"2016-11-10T21:31:26Z","author_association":"CONTRIBUTOR","body":"> I ran your script and it still didn't work for me. I should mention we're running an older version of elasticsearch (2.3.4).\n\nI just tried it on 2.3.4 and it looks like it doesn't work there. I don't think it is particularly likely we'll fix it in 2.x though.\n","performed_via_github_app":null}]