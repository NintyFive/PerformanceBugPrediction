[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52707217","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-52707217","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":52707217,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzA3MjE3","user":{"login":"OlegYch","id":268312,"node_id":"MDQ6VXNlcjI2ODMxMg==","avatar_url":"https://avatars1.githubusercontent.com/u/268312?v=4","gravatar_id":"","url":"https://api.github.com/users/OlegYch","html_url":"https://github.com/OlegYch","followers_url":"https://api.github.com/users/OlegYch/followers","following_url":"https://api.github.com/users/OlegYch/following{/other_user}","gists_url":"https://api.github.com/users/OlegYch/gists{/gist_id}","starred_url":"https://api.github.com/users/OlegYch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlegYch/subscriptions","organizations_url":"https://api.github.com/users/OlegYch/orgs","repos_url":"https://api.github.com/users/OlegYch/repos","events_url":"https://api.github.com/users/OlegYch/events{/privacy}","received_events_url":"https://api.github.com/users/OlegYch/received_events","type":"User","site_admin":false},"created_at":"2014-08-19T22:15:09Z","updated_at":"2014-08-19T22:15:09Z","author_association":"NONE","body":"the ticket about 1.3.2 is #7341 \nbefore an upgrade to 1.3.2 i was also getting random ClassCastExceptions inside org.apache.lucene.search.TopDocs#merge when sorting on that field\nnot sure if all of this is an indication of one issue\nCheckIndex does not report any errors\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52715789","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-52715789","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":52715789,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzE1Nzg5","user":{"login":"OlegYch","id":268312,"node_id":"MDQ6VXNlcjI2ODMxMg==","avatar_url":"https://avatars1.githubusercontent.com/u/268312?v=4","gravatar_id":"","url":"https://api.github.com/users/OlegYch","html_url":"https://github.com/OlegYch","followers_url":"https://api.github.com/users/OlegYch/followers","following_url":"https://api.github.com/users/OlegYch/following{/other_user}","gists_url":"https://api.github.com/users/OlegYch/gists{/gist_id}","starred_url":"https://api.github.com/users/OlegYch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlegYch/subscriptions","organizations_url":"https://api.github.com/users/OlegYch/orgs","repos_url":"https://api.github.com/users/OlegYch/repos","events_url":"https://api.github.com/users/OlegYch/events{/privacy}","received_events_url":"https://api.github.com/users/OlegYch/received_events","type":"User","site_admin":false},"created_at":"2014-08-19T23:42:48Z","updated_at":"2014-08-19T23:42:48Z","author_association":"NONE","body":"same failure is observed when querying multiple indexes instead of alias, i.e GET myindex_7,users_idx3/mytype/_search\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52744071","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-52744071","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":52744071,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzQ0MDcx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-20T07:46:50Z","updated_at":"2014-08-20T07:46:50Z","author_association":"CONTRIBUTOR","body":"OK, looking at this issue and #7341, it looks like you have fields with the same name in different types in the same index.  When you try to load these field values into fielddata, it chooses one of the field mappings (whichever one it finds first) and loads in that format.\n\nThis is not new - it has been like this since the beginning.  Fields with the same name should be mapped in the same way.\n\nWe're planning on enforcing this in the future.  See #4081 \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52763915","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-52763915","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":52763915,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzYzOTE1","user":{"login":"OlegYch","id":268312,"node_id":"MDQ6VXNlcjI2ODMxMg==","avatar_url":"https://avatars1.githubusercontent.com/u/268312?v=4","gravatar_id":"","url":"https://api.github.com/users/OlegYch","html_url":"https://github.com/OlegYch","followers_url":"https://api.github.com/users/OlegYch/followers","following_url":"https://api.github.com/users/OlegYch/following{/other_user}","gists_url":"https://api.github.com/users/OlegYch/gists{/gist_id}","starred_url":"https://api.github.com/users/OlegYch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlegYch/subscriptions","organizations_url":"https://api.github.com/users/OlegYch/orgs","repos_url":"https://api.github.com/users/OlegYch/repos","events_url":"https://api.github.com/users/OlegYch/events{/privacy}","received_events_url":"https://api.github.com/users/OlegYch/received_events","type":"User","site_admin":false},"created_at":"2014-08-20T11:38:05Z","updated_at":"2014-08-20T11:38:05Z","author_association":"NONE","body":"why does it work when searching through single index?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52776359","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-52776359","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":52776359,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzc2MzU5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-20T13:19:35Z","updated_at":"2014-08-20T13:19:35Z","author_association":"CONTRIBUTOR","body":"It just depends on which field it happens to see first.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52780385","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-52780385","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":52780385,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzgwMzg1","user":{"login":"OlegYch","id":268312,"node_id":"MDQ6VXNlcjI2ODMxMg==","avatar_url":"https://avatars1.githubusercontent.com/u/268312?v=4","gravatar_id":"","url":"https://api.github.com/users/OlegYch","html_url":"https://github.com/OlegYch","followers_url":"https://api.github.com/users/OlegYch/followers","following_url":"https://api.github.com/users/OlegYch/following{/other_user}","gists_url":"https://api.github.com/users/OlegYch/gists{/gist_id}","starred_url":"https://api.github.com/users/OlegYch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlegYch/subscriptions","organizations_url":"https://api.github.com/users/OlegYch/orgs","repos_url":"https://api.github.com/users/OlegYch/repos","events_url":"https://api.github.com/users/OlegYch/events{/privacy}","received_events_url":"https://api.github.com/users/OlegYch/received_events","type":"User","site_admin":false},"created_at":"2014-08-20T13:51:06Z","updated_at":"2014-08-20T13:51:06Z","author_association":"NONE","body":"thanks, got it\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52932999","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-52932999","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":52932999,"node_id":"MDEyOklzc3VlQ29tbWVudDUyOTMyOTk5","user":{"login":"OlegYch","id":268312,"node_id":"MDQ6VXNlcjI2ODMxMg==","avatar_url":"https://avatars1.githubusercontent.com/u/268312?v=4","gravatar_id":"","url":"https://api.github.com/users/OlegYch","html_url":"https://github.com/OlegYch","followers_url":"https://api.github.com/users/OlegYch/followers","following_url":"https://api.github.com/users/OlegYch/following{/other_user}","gists_url":"https://api.github.com/users/OlegYch/gists{/gist_id}","starred_url":"https://api.github.com/users/OlegYch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlegYch/subscriptions","organizations_url":"https://api.github.com/users/OlegYch/orgs","repos_url":"https://api.github.com/users/OlegYch/repos","events_url":"https://api.github.com/users/OlegYch/events{/privacy}","received_events_url":"https://api.github.com/users/OlegYch/received_events","type":"User","site_admin":false},"created_at":"2014-08-21T15:04:59Z","updated_at":"2014-08-21T15:04:59Z","author_association":"NONE","body":"i made sure all types in all indexes from that alias use the same type for that field but the sorting is still wrong when querying through alias, how can that be ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52933164","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-52933164","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":52933164,"node_id":"MDEyOklzc3VlQ29tbWVudDUyOTMzMTY0","user":{"login":"OlegYch","id":268312,"node_id":"MDQ6VXNlcjI2ODMxMg==","avatar_url":"https://avatars1.githubusercontent.com/u/268312?v=4","gravatar_id":"","url":"https://api.github.com/users/OlegYch","html_url":"https://github.com/OlegYch","followers_url":"https://api.github.com/users/OlegYch/followers","following_url":"https://api.github.com/users/OlegYch/following{/other_user}","gists_url":"https://api.github.com/users/OlegYch/gists{/gist_id}","starred_url":"https://api.github.com/users/OlegYch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlegYch/subscriptions","organizations_url":"https://api.github.com/users/OlegYch/orgs","repos_url":"https://api.github.com/users/OlegYch/repos","events_url":"https://api.github.com/users/OlegYch/events{/privacy}","received_events_url":"https://api.github.com/users/OlegYch/received_events","type":"User","site_admin":false},"created_at":"2014-08-21T15:05:55Z","updated_at":"2014-08-21T15:05:55Z","author_association":"NONE","body":"even cleared the cache for all indexes\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52937495","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-52937495","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":52937495,"node_id":"MDEyOklzc3VlQ29tbWVudDUyOTM3NDk1","user":{"login":"OlegYch","id":268312,"node_id":"MDQ6VXNlcjI2ODMxMg==","avatar_url":"https://avatars1.githubusercontent.com/u/268312?v=4","gravatar_id":"","url":"https://api.github.com/users/OlegYch","html_url":"https://github.com/OlegYch","followers_url":"https://api.github.com/users/OlegYch/followers","following_url":"https://api.github.com/users/OlegYch/following{/other_user}","gists_url":"https://api.github.com/users/OlegYch/gists{/gist_id}","starred_url":"https://api.github.com/users/OlegYch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlegYch/subscriptions","organizations_url":"https://api.github.com/users/OlegYch/orgs","repos_url":"https://api.github.com/users/OlegYch/repos","events_url":"https://api.github.com/users/OlegYch/events{/privacy}","received_events_url":"https://api.github.com/users/OlegYch/received_events","type":"User","site_admin":false},"created_at":"2014-08-21T15:35:15Z","updated_at":"2014-08-21T15:35:15Z","author_association":"NONE","body":"```\ncurl -XGET myserver:9200/myalias/_mapping?pretty 2>/bla  |grep -A3 start_date\n              \"start_date\" : {\n                \"type\" : \"double\"\n              },\n              \"terrain\" : {\n--\n              \"start_date\" : {\n                \"type\" : \"double\"\n              }\n            }\n\nGET myalias/mytype/_search\n{\n  \"query\": {\n    \"constant_score\": {\n      \"filter\": {\n        \"and\": {\n\"filters\": [\n              {\"term\": {\n                \"user_id\": 582313\n              }}\n\n          ]\n        }\n      }\n    }\n  },\n  \"sort\": [\n    {\n      \"data.start_date\": {\n        \"order\": \"asc\",\n        \"ignore_unmapped\": \"true\"\n      }\n    }\n  ]\n,\n\"aggs\": {\n  \"max\": {\n    \"max\": {\n      \"field\": \"data.start_date\"\n    }\n  }\n},\n  \"size\": 1100\n}\n\n{\n   \"took\": 19,\n   \"timed_out\": false,\n   \"_shards\": {\n      \"total\": 20,\n      \"successful\": 20,\n      \"failed\": 0\n   },\n   \"hits\": {\n      \"total\": 5,\n      \"max_score\": null,\n      \"hits\": [\n         {\n            \"_index\": \"myindex\",\n            \"_type\": \"mytype\",\n            \"_id\": \"582313_F5114468-DA0E-4E9F-A195-5122AAEBC475\",\n            \"_score\": null,\n            \"_source\": {\n               \"_id\": \"582313_F5114468-DA0E-4E9F-A195-5122AAEBC475\",\n               \"data\": {\n                  \"id\": \"F5114468-DA0E-4E9F-A195-5122AAEBC475\",\n                  \"duration\": 897.5677289962769,\n                  \"end_date\": 1408444861.339127,\n                  \"category\": \"sleep\",\n                  \"deep_duration\": 0,\n                  \"quality\": 0.05621061269658856,\n                  \"light_duration\": 50.45283198356628,\n                  \"phases\": [\n                     {\n                        \"duration\": 850.4915599822998,\n                        \"type\": \"awake\",\n                        \"date\": 1408443960.083729\n                     },\n                     {\n                        \"duration\": 50.45283198356628,\n                        \"type\": \"light\",\n                        \"date\": 1408444810.575289\n                     },\n                     {\n                        \"duration\": 0.3110060691833496,\n                        \"type\": \"awake\",\n                        \"date\": 1408444861.028121\n                     }\n                  ],\n                  \"awake_duration\": 850.8025660514832,\n                  \"order_date\": 1408444861.339127,\n                  \"start_date\": 1408443963.771398,\n                  \"editable\": true\n               },\n               \"user_id\": 582313\n            },\n            \"sort\": [\n               1408443963.771398\n            ]\n         },\n         {\n            \"_index\": \"myindex\",\n            \"_type\": \"mytype\",\n            \"_id\": \"582313_61647662-2738-4C6B-A0BD-1536F1EAA313\",\n            \"_score\": null,\n            \"_source\": {\n               \"_id\": \"582313_61647662-2738-4C6B-A0BD-1536F1EAA313\",\n               \"data\": {\n                  \"id\": \"61647662-2738-4C6B-A0BD-1536F1EAA313\",\n                  \"duration\": 780,\n                  \"end_date\": 1408531044,\n                  \"distance\": 200,\n                  \"category\": \"running\",\n                  \"calories\": 292.11,\n                  \"order_date\": 1408531044,\n                  \"start_date\": 1408530264,\n                  \"editable\": true\n               },\n               \"user_id\": 582313\n            },\n            \"sort\": [\n               1408530264\n            ]\n         },\n         {\n            \"_index\": \"myindex\",\n            \"_type\": \"mytype\",\n            \"_id\": \"582313_2FEA2D8A-4B2A-4C71-8A8D-AE0921B3AAAD\",\n            \"_score\": null,\n            \"_source\": {\n               \"_id\": \"582313_2FEA2D8A-4B2A-4C71-8A8D-AE0921B3AAAD\",\n               \"data\": {\n                  \"id\": \"2FEA2D8A-4B2A-4C71-8A8D-AE0921B3AAAD\",\n                  \"duration\": 7505.24406504631,\n                  \"end_date\": 1408541467.491296,\n                  \"category\": \"sleep\",\n                  \"deep_duration\": 0,\n                  \"quality\": 0,\n                  \"light_duration\": 0,\n                  \"phases\": [\n                     {\n                        \"duration\": 7505.244183063507,\n                        \"type\": \"awake\",\n                        \"date\": 1408533962.247113\n                     }\n                  ],\n                  \"awake_duration\": 7505.244183063507,\n                  \"order_date\": 1408541467.491296,\n                  \"start_date\": 1408533962.247231,\n                  \"editable\": false\n               },\n               \"user_id\": 582313\n            },\n            \"sort\": [\n               1408533962.247231\n            ]\n         },\n         {\n            \"_index\": \"myindex\",\n            \"_type\": \"mytype\",\n            \"_id\": \"582313_71F810C0-2290-46F5-84FE-36AE390B06FA\",\n            \"_score\": null,\n            \"_source\": {\n               \"_id\": \"582313_71F810C0-2290-46F5-84FE-36AE390B06FA\",\n               \"data\": {\n                  \"id\": \"71F810C0-2290-46F5-84FE-36AE390B06FA\",\n                  \"duration\": 7620,\n                  \"end_date\": 1408557945.435768,\n                  \"distance\": 100,\n                  \"category\": \"cycling\",\n                  \"calories\": 1189.0375,\n                  \"order_date\": 1408557945.435768,\n                  \"start_date\": 1408550325.435768,\n                  \"editable\": true\n               },\n               \"user_id\": 582313\n            },\n            \"sort\": [\n               1408550325.435768\n            ]\n         },\n         {\n            \"_index\": \"myindex\",\n            \"_type\": \"mytype\",\n            \"_id\": \"582313_5C2797AA-7BFD-40AD-99FF-35278E719293\",\n            \"_score\": null,\n            \"_source\": {\n               \"_id\": \"582313_5C2797AA-7BFD-40AD-99FF-35278E719293\",\n               \"data\": {\n                  \"id\": \"5C2797AA-7BFD-40AD-99FF-35278E719293\",\n                  \"duration\": 3600,\n                  \"end_date\": 1408548615,\n                  \"is_deleted\": true,\n                  \"distance\": 100,\n                  \"category\": \"cycling\",\n                  \"calories\": 561.7500000000001,\n                  \"order_date\": 1408548615,\n                  \"start_date\": 1408545015,\n                  \"editable\": true\n               },\n               \"user_id\": 582313\n            },\n            \"sort\": [\n               1408545015\n            ]\n         }\n      ]\n   },\n   \"aggregations\": {\n      \"max\": {\n         \"value\": 1408550325.435768\n      }\n   }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/53065633","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-53065633","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":53065633,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDY1NjMz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-22T14:18:28Z","updated_at":"2014-08-22T14:18:28Z","author_association":"CONTRIBUTOR","body":"@OlegYch Apologies - I was wrong here, didn't read carefully enough, and was confused by the ClassCastException, which is usually related to the problem I described before.\n\nThis does indeed look like a bug. Do you have the stack trace emitted when merging? Also, could you provide:\n\n```\nGET /_settings\nGET /_mapping\nGET /_aliases\n```\n\nthanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/53282563","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-53282563","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":53282563,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjgyNTYz","user":{"login":"OlegYch","id":268312,"node_id":"MDQ6VXNlcjI2ODMxMg==","avatar_url":"https://avatars1.githubusercontent.com/u/268312?v=4","gravatar_id":"","url":"https://api.github.com/users/OlegYch","html_url":"https://github.com/OlegYch","followers_url":"https://api.github.com/users/OlegYch/followers","following_url":"https://api.github.com/users/OlegYch/following{/other_user}","gists_url":"https://api.github.com/users/OlegYch/gists{/gist_id}","starred_url":"https://api.github.com/users/OlegYch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlegYch/subscriptions","organizations_url":"https://api.github.com/users/OlegYch/orgs","repos_url":"https://api.github.com/users/OlegYch/repos","events_url":"https://api.github.com/users/OlegYch/events{/privacy}","received_events_url":"https://api.github.com/users/OlegYch/received_events","type":"User","site_admin":false},"created_at":"2014-08-25T15:49:44Z","updated_at":"2014-08-25T15:49:44Z","author_association":"NONE","body":"@clintongormley there doesn't seem to be any exceptions caused by query\ni've sent you the results of those requests on email, please let me know if there is anything else i can do to diagnoze it\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54456558","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-54456558","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":54456558,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDU2NTU4","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-09-04T11:26:16Z","updated_at":"2014-09-04T11:26:16Z","author_association":"CONTRIBUTOR","body":"I'm not sure the bug is related to aliases. The sort values look wrong in both cases (even when querying a single index), see:\n\n``` json\n        {\n            \"_index\": \"myindex_7\",\n            \"_type\": \"mytype\",\n            \"_id\": \"582313_1408387971.543879-0\",\n            \"_score\": null,\n            \"_source\": {\n               \"data\": {\n                  \"distance\": 871.749,\n                  \"end_date\": 1408395600,\n                  \"calories\": 0,\n                  \"motion_type\": \"stationary\",\n                  \"start_date\": 1408387971.543879,\n                  \"number_of_steps\": 1167,\n                  \"duration\": 7628.456121563911,\n                  \"order_date\": 1408395600,\n                  \"id\": \"1408387971.543879-0\"\n               },\n               \"user_id\": 582313\n            },\n            \"sort\": [\n               6.958361125e-315\n            ]\n         }\n```\n\nThe value in `sort` should be equal to the value in `start_date` but they are completely different. But it happens that if you interpret the bits of `1408387971` (the integer part of start date) as double bits, you get `6.958361125E-315`, which is the sort value.\n\nSo in spite of the fact that the field is mapped as a double in the mappings, it looks like it has been indexed as a long. I will try to dig more...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54522399","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-54522399","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":54522399,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTIyMzk5","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-09-04T18:25:19Z","updated_at":"2014-09-04T18:25:19Z","author_association":"CONTRIBUTOR","body":"The only explanation I can find is that the same field has been dynamically mapped as a long on some shards and as a double on other shards (before mappings propagation  replicated the mappings to all nodes).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54621726","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-54621726","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":54621726,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjIxNzI2","user":{"login":"OlegYch","id":268312,"node_id":"MDQ6VXNlcjI2ODMxMg==","avatar_url":"https://avatars1.githubusercontent.com/u/268312?v=4","gravatar_id":"","url":"https://api.github.com/users/OlegYch","html_url":"https://github.com/OlegYch","followers_url":"https://api.github.com/users/OlegYch/followers","following_url":"https://api.github.com/users/OlegYch/following{/other_user}","gists_url":"https://api.github.com/users/OlegYch/gists{/gist_id}","starred_url":"https://api.github.com/users/OlegYch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlegYch/subscriptions","organizations_url":"https://api.github.com/users/OlegYch/orgs","repos_url":"https://api.github.com/users/OlegYch/repos","events_url":"https://api.github.com/users/OlegYch/events{/privacy}","received_events_url":"https://api.github.com/users/OlegYch/received_events","type":"User","site_admin":false},"created_at":"2014-09-05T13:02:46Z","updated_at":"2014-09-05T13:02:46Z","author_association":"NONE","body":"i explicitly put the mapping for that type before putting any data in it, so i doubt that is the case\ni believe the sort value was borked because there were different types in different mappings for that field\ncurrently the value in sort is correct (as i made sure there are no conflicts, and use full field path including type name), but the sorting is still wrong\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158662944","html_url":"https://github.com/elastic/elasticsearch/issues/7343#issuecomment-158662944","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7343","id":158662944,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODY2Mjk0NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-21T17:16:17Z","updated_at":"2015-11-21T17:16:17Z","author_association":"CONTRIBUTOR","body":"This should have been resolved by the changes in #8870 in 2.0.  Closing\n","performed_via_github_app":null}]