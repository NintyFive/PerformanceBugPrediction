{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/50199","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50199/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50199/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50199/events","html_url":"https://github.com/elastic/elasticsearch/issues/50199","id":537805904,"node_id":"MDU6SXNzdWU1Mzc4MDU5MDQ=","number":50199,"title":"[doc request]execution order of one bulk operation","user":{"login":"riverbuilding","id":7370717,"node_id":"MDQ6VXNlcjczNzA3MTc=","avatar_url":"https://avatars1.githubusercontent.com/u/7370717?v=4","gravatar_id":"","url":"https://api.github.com/users/riverbuilding","html_url":"https://github.com/riverbuilding","followers_url":"https://api.github.com/users/riverbuilding/followers","following_url":"https://api.github.com/users/riverbuilding/following{/other_user}","gists_url":"https://api.github.com/users/riverbuilding/gists{/gist_id}","starred_url":"https://api.github.com/users/riverbuilding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/riverbuilding/subscriptions","organizations_url":"https://api.github.com/users/riverbuilding/orgs","repos_url":"https://api.github.com/users/riverbuilding/repos","events_url":"https://api.github.com/users/riverbuilding/events{/privacy}","received_events_url":"https://api.github.com/users/riverbuilding/received_events","type":"User","site_admin":false},"labels":[{"id":145572580,"node_id":"MDU6TGFiZWwxNDU1NzI1ODA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/CRUD","name":":Distributed/CRUD","color":"0e8a16","default":false,"description":"A catch all label for issues around indexing, updating and getting a doc by id. Not search."},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"},{"id":176784422,"node_id":"MDU6TGFiZWwxNzY3ODQ0MjI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/won't%20fix","name":"won't fix","color":"f7c6c7","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2019-12-13T22:28:55Z","updated_at":"2019-12-16T11:31:05Z","closed_at":"2019-12-16T11:30:46Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"according to this discuss:\r\nhttps://discuss.elastic.co/t/order-of--bulk-request-operations/98124\r\nYou can rely on the fact that operations on the same document (same _index, _type and _id) will be in order. However you can't assume anything for documents that have different indices/types/ids.\r\n\r\naccording to this discuss:\r\nhttps://discuss.elastic.co/t/is-the-execution-order-guaranteed-in-a-single-bulk-request/100412\r\nIf they are on the same shard, then yes.\r\nIf they aren't then we cannot guarantee that as far as I know.\r\n\r\naccording to this discuss:\r\nhttps://discuss.elastic.co/t/elastic-search-bulk-request-api-is-the-order-of-document-writing-guaranteed/208055\r\nYour bulk indexing request is received by a coordinating node. That node must then, document by document, determine the correct shard routing for each document, and then forward the documents to the nodes where each relevant shard is allocated.\r\n\r\nOnce the documents are distributed among the nodes, there can be no guarantees from node to node what order the indexing operations will be completed in, as the nodes are then working in parallel at whatever rate their available resources allow.\r\n\r\nso can these facts be clearly put into doc:\r\n1. (same _index, _type and _id) in same bulk will be in order\r\n2. operations in same shard same bulk will be in order \r\n3. operations in same bulk but different shard has no order\r\n4. operations in different bulk has no order","closed_by":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"performed_via_github_app":null}