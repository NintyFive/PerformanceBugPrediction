{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/4937","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4937/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4937/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4937/events","html_url":"https://github.com/elastic/elasticsearch/issues/4937","id":26507237,"node_id":"MDU6SXNzdWUyNjUwNzIzNw==","number":4937,"title":"Impact of the “_id” field in the search method (0.90.10)","user":{"login":"pierallard","id":1590933,"node_id":"MDQ6VXNlcjE1OTA5MzM=","avatar_url":"https://avatars1.githubusercontent.com/u/1590933?v=4","gravatar_id":"","url":"https://api.github.com/users/pierallard","html_url":"https://github.com/pierallard","followers_url":"https://api.github.com/users/pierallard/followers","following_url":"https://api.github.com/users/pierallard/following{/other_user}","gists_url":"https://api.github.com/users/pierallard/gists{/gist_id}","starred_url":"https://api.github.com/users/pierallard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pierallard/subscriptions","organizations_url":"https://api.github.com/users/pierallard/orgs","repos_url":"https://api.github.com/users/pierallard/repos","events_url":"https://api.github.com/users/pierallard/events{/privacy}","received_events_url":"https://api.github.com/users/pierallard/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2014-01-29T09:22:32Z","updated_at":"2014-01-29T10:32:39Z","closed_at":"2014-01-29T10:32:39Z","author_association":"NONE","active_lock_reason":null,"body":"I have some trouble with elasticsearch... I managed to create a reproducible example on my machine, the code is at the end of the post.\n\nI just create 6 users, \"Roger Sand\", \"Roger Gilbert\", \"Cindy Sand\", \"Cindy Gilbert\", \"Jean-Roger Sands\", \"Sand Roger\", and index it by its names.\n\nThen I run a query to match \"Roger Sand\", and display the associated score.\n\nHere is the executions of the same script, with 2 set of differents ids : 84046 to 84051 and 84047 to 84052 (just shifted by 1).\n\nThe results are not in the same order, and have not the same score :\n\nExecution with 84046...84051\n\nSand Roger => 0.8838835\nRoger Sand => 0.2712221\nCindy Sand => 0.22097087\nJean-Roger Sands => 0.17677669\nRoger Gilbert => 0.028130025\nExecution with 84047..84052\n\nRoger Sand => 0.2712221\nSand Roger => 0.2712221\nCindy Sand => 0.22097087\nJean-Roger Sands => 0.17677669\nRoger Gilbert => 0.15891947\n\nHere is the code\n\ncurl -XDELETE 'http://localhost:9200/test' \ncurl -XPUT 'http://localhost:9200/test' \ncurl -XPOST 'http://localhost:9200/test/_refresh' \ncurl -XPUT 'http://localhost:9200/test/user/84047?op_type=create' -d '{\"full_name\":\"Roger Sand\"}'\ncurl -XPUT 'http://localhost:9200/test/user/84048?op_type=create' -d '{\"full_name\":\"Roger Gilbert\"}'\ncurl -XPUT 'http://localhost:9200/test/user/84049?op_type=create' -d '{\"full_name\":\"Cindy Sand\"}'\ncurl -XPUT 'http://localhost:9200/test/user/84050?op_type=create' -d '{\"full_name\":\"Cindy Gilbert\"}'\ncurl -XPUT 'http://localhost:9200/test/user/84051?op_type=create' -d '{\"full_name\":\"Jean-Roger Sands\"}'\ncurl -XPUT 'http://localhost:9200/test/user/84052?op_type=create' -d '{\"full_name\":\"Sand Roger\"}'\ncurl -XPOST 'http://localhost:9200/test/_refresh' \ncurl -XPOST 'http://localhost:9200/test/user/_search?pretty' -d '{\"query\":{\"match\":{\"full_name\":\"Roger Sand\"}}}'\n\ncurl -XDELETE 'http://localhost:9200/test'\ncurl -XPUT 'http://localhost:9200/test'\ncurl -XPOST 'http://localhost:9200/test/_refresh'\ncurl -XPUT 'http://localhost:9200/test/user/84046?op_type=create' -d '{\"full_name\":\"Roger Sand\"}'\ncurl -XPUT 'http://localhost:9200/test/user/84047?op_type=create' -d '{\"full_name\":\"Roger Gilbert\"}'\ncurl -XPUT 'http://localhost:9200/test/user/84048?op_type=create' -d '{\"full_name\":\"Cindy Sand\"}'\ncurl -XPUT 'http://localhost:9200/test/user/84049?op_type=create' -d '{\"full_name\":\"Cindy Gilbert\"}'\ncurl -XPUT 'http://localhost:9200/test/user/84050?op_type=create' -d '{\"full_name\":\"Jean-Roger Sands\"}'\ncurl -XPUT 'http://localhost:9200/test/user/84051?op_type=create' -d '{\"full_name\":\"Sand Roger\"}'\ncurl -XPOST 'http://localhost:9200/test/_refresh'\ncurl -XPOST 'http://localhost:9200/test/user/_search?pretty' -d '{\"query\":{\"match\":{\"full_name\":\"Roger Sand\"}}}'\n\nLink to Stackoverflow : http://stackoverflow.com/questions/21426166/impact-of-the-id-field-in-elasticsearch-in-the-search-method\n","closed_by":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}