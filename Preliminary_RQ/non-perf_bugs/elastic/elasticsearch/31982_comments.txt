[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/404416097","html_url":"https://github.com/elastic/elasticsearch/issues/31982#issuecomment-404416097","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31982","id":404416097,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDQxNjA5Nw==","user":{"login":"vladimirdolzhenko","id":209440,"node_id":"MDQ6VXNlcjIwOTQ0MA==","avatar_url":"https://avatars0.githubusercontent.com/u/209440?v=4","gravatar_id":"","url":"https://api.github.com/users/vladimirdolzhenko","html_url":"https://github.com/vladimirdolzhenko","followers_url":"https://api.github.com/users/vladimirdolzhenko/followers","following_url":"https://api.github.com/users/vladimirdolzhenko/following{/other_user}","gists_url":"https://api.github.com/users/vladimirdolzhenko/gists{/gist_id}","starred_url":"https://api.github.com/users/vladimirdolzhenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vladimirdolzhenko/subscriptions","organizations_url":"https://api.github.com/users/vladimirdolzhenko/orgs","repos_url":"https://api.github.com/users/vladimirdolzhenko/repos","events_url":"https://api.github.com/users/vladimirdolzhenko/events{/privacy}","received_events_url":"https://api.github.com/users/vladimirdolzhenko/received_events","type":"User","site_admin":false},"created_at":"2018-07-12T07:27:00Z","updated_at":"2018-07-12T07:27:00Z","author_association":"CONTRIBUTOR","body":"@TrumanDu can you please provide stats about that specific jvm like\r\nnumber of threads `ps -o nlwp -p $PID`  (where `$PID` is the pid of that jvm - you can find pid with `jps -lvm`)\r\nand memory details of process `top -p $PID`  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/404425907","html_url":"https://github.com/elastic/elasticsearch/issues/31982#issuecomment-404425907","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31982","id":404425907,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDQyNTkwNw==","user":{"login":"TrumanDu","id":16727775,"node_id":"MDQ6VXNlcjE2NzI3Nzc1","avatar_url":"https://avatars0.githubusercontent.com/u/16727775?v=4","gravatar_id":"","url":"https://api.github.com/users/TrumanDu","html_url":"https://github.com/TrumanDu","followers_url":"https://api.github.com/users/TrumanDu/followers","following_url":"https://api.github.com/users/TrumanDu/following{/other_user}","gists_url":"https://api.github.com/users/TrumanDu/gists{/gist_id}","starred_url":"https://api.github.com/users/TrumanDu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TrumanDu/subscriptions","organizations_url":"https://api.github.com/users/TrumanDu/orgs","repos_url":"https://api.github.com/users/TrumanDu/repos","events_url":"https://api.github.com/users/TrumanDu/events{/privacy}","received_events_url":"https://api.github.com/users/TrumanDu/received_events","type":"User","site_admin":false},"created_at":"2018-07-12T08:03:49Z","updated_at":"2018-07-12T08:03:49Z","author_association":"NONE","body":"@vladimirdolzhenko thanks for you reply!\r\n\r\ntop \r\n\r\n```\r\n  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND\r\n 9566 1000      20   0  2.624t 0.036t 2.631g S 120.3 29.3  20:04.17 java\r\n```\r\n\r\nps -o nlwp -p \r\n\r\n```\r\n296\r\n```\r\n\r\nThis is the current situation\r\n\r\nAfter running for a while, it will down.\r\n\r\nthis node size of the data is probably 2.6 T","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/404768655","html_url":"https://github.com/elastic/elasticsearch/issues/31982#issuecomment-404768655","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31982","id":404768655,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDc2ODY1NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-07-13T08:44:36Z","updated_at":"2018-07-13T08:44:36Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/404789712","html_url":"https://github.com/elastic/elasticsearch/issues/31982#issuecomment-404789712","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31982","id":404789712,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDc4OTcxMg==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2018-07-13T10:09:56Z","updated_at":"2018-07-13T10:09:56Z","author_association":"MEMBER","body":"I think `OutOfMemoryError` is a bit misleading choice by the JVM in this case. You are hitting a limit on the number of processes that this user is allowed to run which is almost certainly unrelated to the amount of free memory in your case. As limits can be configured in a variety of places it can take a bit of time to find out what exactly is causing it.\r\n\r\nA while back we had a similar issue in our CI environment and our blog post [We are out of memory](https://www.elastic.co/blog/we-are-out-of-memory-systemd-process-limits) provides pointers on what you should check.\r\n\r\nHaving that said, this is an issue that is related to the configuration of the environment and thus I think we should close this and take further discussion to our [Discuss forum](https://discuss.elastic.co/c/elasticsearch).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/464614331","html_url":"https://github.com/elastic/elasticsearch/issues/31982#issuecomment-464614331","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31982","id":464614331,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDYxNDMzMQ==","user":{"login":"perlun","id":630613,"node_id":"MDQ6VXNlcjYzMDYxMw==","avatar_url":"https://avatars2.githubusercontent.com/u/630613?v=4","gravatar_id":"","url":"https://api.github.com/users/perlun","html_url":"https://github.com/perlun","followers_url":"https://api.github.com/users/perlun/followers","following_url":"https://api.github.com/users/perlun/following{/other_user}","gists_url":"https://api.github.com/users/perlun/gists{/gist_id}","starred_url":"https://api.github.com/users/perlun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/perlun/subscriptions","organizations_url":"https://api.github.com/users/perlun/orgs","repos_url":"https://api.github.com/users/perlun/repos","events_url":"https://api.github.com/users/perlun/events{/privacy}","received_events_url":"https://api.github.com/users/perlun/received_events","type":"User","site_admin":false},"created_at":"2019-02-18T07:19:31Z","updated_at":"2019-02-18T07:19:31Z","author_association":"NONE","body":"@vladimirdolzhenko @danielmitterdorfer Thanks for writing this! It helped me debug a similar (but likely unrelated) issue in our app (which is using the ES client). For whatever reason, it had gone berserk during the weekend, spawning 9400 threads which made the machine fail in new thread creation for the same user account.\r\n\r\n`ps -o nlwp,pid -fe` helped me spot this, so I could kill the bad process and get the system back to a usable state. Greatly appreciated!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/464631783","html_url":"https://github.com/elastic/elasticsearch/issues/31982#issuecomment-464631783","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31982","id":464631783,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDYzMTc4Mw==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2019-02-18T08:21:46Z","updated_at":"2019-02-18T08:21:46Z","author_association":"MEMBER","body":"Thanks for the kind feedback @perlun and glad to hear this has helped you. :)","performed_via_github_app":null}]