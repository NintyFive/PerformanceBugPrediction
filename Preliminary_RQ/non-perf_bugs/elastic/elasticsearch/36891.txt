{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/36891","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36891/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36891/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36891/events","html_url":"https://github.com/elastic/elasticsearch/issues/36891","id":393027215,"node_id":"MDU6SXNzdWUzOTMwMjcyMTU=","number":36891,"title":"[ML] Delayed data annotation - repeated audit messages","user":{"login":"pheyos","id":1945390,"node_id":"MDQ6VXNlcjE5NDUzOTA=","avatar_url":"https://avatars0.githubusercontent.com/u/1945390?v=4","gravatar_id":"","url":"https://api.github.com/users/pheyos","html_url":"https://github.com/pheyos","followers_url":"https://api.github.com/users/pheyos/followers","following_url":"https://api.github.com/users/pheyos/following{/other_user}","gists_url":"https://api.github.com/users/pheyos/gists{/gist_id}","starred_url":"https://api.github.com/users/pheyos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pheyos/subscriptions","organizations_url":"https://api.github.com/users/pheyos/orgs","repos_url":"https://api.github.com/users/pheyos/repos","events_url":"https://api.github.com/users/pheyos/events{/privacy}","received_events_url":"https://api.github.com/users/pheyos/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"assignees":[{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2018-12-20T12:32:20Z","updated_at":"2019-01-03T13:25:58Z","closed_at":"2019-01-03T13:25:58Z","author_association":"NONE","active_lock_reason":null,"body":"**Found in version**\r\n- 7.0.0 b3838\r\n\r\n**Steps to reproduce**\r\nFor easy reference, let's name consecutive buckets `bucket 1`, `bucket 2`, ... (in the example screenshot `bucket 1` is `10:30 - 10:45`, `bucket 2` is `10:45 - 11:00`, `bucket 3` is `11:00 - 11:15`, ...)\r\n- In a real time job add 1 document to the already processed `bucket 1`\r\n- Wait until `bucket 1`, `bucket 2` and `bucket 3` are processed\r\n- Add 2 documents to `bucket 3`\r\n- Wait until the delayed data check for `bucket 3` is done\r\n- Look at the job audit messages\r\n\r\n**Expected result**\r\n- There is one audit message about 1 missing document in `bucket 1`\r\n- There is one audit message about 2 missing documents in `bucket 3`\r\n\r\n**Actual result**\r\n- :heavy_check_mark: There is one audit message about 1 missing document in `bucket 1`\r\n- :x: There are three audit messages about 3 missing documents in `bucket3`:\r\n\r\n![image](https://user-images.githubusercontent.com/1945390/50284674-135de880-045a-11e9-9a35-eb6d9eb12030.png)\r\n","closed_by":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"performed_via_github_app":null}