[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/165780897","html_url":"https://github.com/elastic/elasticsearch/issues/15529#issuecomment-165780897","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15529","id":165780897,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTc4MDg5Nw==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2015-12-18T13:41:12Z","updated_at":"2015-12-18T13:41:12Z","author_association":"CONTRIBUTOR","body":"I cannot reproduce this (repo is preserved).\n\nCan you share full configs (elasticsearch.yml)?\n\nWhat does your upgrade process look like?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/165801016","html_url":"https://github.com/elastic/elasticsearch/issues/15529#issuecomment-165801016","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15529","id":165801016,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTgwMTAxNg==","user":{"login":"robin13","id":174291,"node_id":"MDQ6VXNlcjE3NDI5MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/174291?v=4","gravatar_id":"","url":"https://api.github.com/users/robin13","html_url":"https://github.com/robin13","followers_url":"https://api.github.com/users/robin13/followers","following_url":"https://api.github.com/users/robin13/following{/other_user}","gists_url":"https://api.github.com/users/robin13/gists{/gist_id}","starred_url":"https://api.github.com/users/robin13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robin13/subscriptions","organizations_url":"https://api.github.com/users/robin13/orgs","repos_url":"https://api.github.com/users/robin13/repos","events_url":"https://api.github.com/users/robin13/events{/privacy}","received_events_url":"https://api.github.com/users/robin13/received_events","type":"User","site_admin":false},"created_at":"2015-12-18T15:13:38Z","updated_at":"2015-12-18T15:13:38Z","author_association":"MEMBER","body":"I haven't been able to reproduce either, other than on the one cluster.  I have heard of others with the same experience though.\nUpgrade process:\n- update apt repository settings, apt-get update, apt-get upgrade\n- stop elasticsearch\n- uninstall and re-install plugins (watcher, license)\n- start elasticsearch\n\nConfig: mostly defaults accept for memory and number of shards/replicas.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/165845048","html_url":"https://github.com/elastic/elasticsearch/issues/15529#issuecomment-165845048","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15529","id":165845048,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTg0NTA0OA==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-12-18T17:19:19Z","updated_at":"2015-12-18T17:19:19Z","author_association":"MEMBER","body":"@robin13 did you have any templates or licenses registered in cluster? If yes, have they survived the upgrade in which repository definition disappeared? You can verify this by looking at the log file and checking if the new trail license was generated. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166241667","html_url":"https://github.com/elastic/elasticsearch/issues/15529#issuecomment-166241667","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15529","id":166241667,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjI0MTY2Nw==","user":{"login":"robin13","id":174291,"node_id":"MDQ6VXNlcjE3NDI5MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/174291?v=4","gravatar_id":"","url":"https://api.github.com/users/robin13","html_url":"https://github.com/robin13","followers_url":"https://api.github.com/users/robin13/followers","following_url":"https://api.github.com/users/robin13/following{/other_user}","gists_url":"https://api.github.com/users/robin13/gists{/gist_id}","starred_url":"https://api.github.com/users/robin13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robin13/subscriptions","organizations_url":"https://api.github.com/users/robin13/orgs","repos_url":"https://api.github.com/users/robin13/repos","events_url":"https://api.github.com/users/robin13/events{/privacy}","received_events_url":"https://api.github.com/users/robin13/received_events","type":"User","site_admin":false},"created_at":"2015-12-21T09:06:51Z","updated_at":"2015-12-21T09:06:51Z","author_association":"MEMBER","body":"Yes - templates (logstash and beats), and license (using watcher).  License survived the upgrade.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166268554","html_url":"https://github.com/elastic/elasticsearch/issues/15529#issuecomment-166268554","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15529","id":166268554,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjI2ODU1NA==","user":{"login":"robin13","id":174291,"node_id":"MDQ6VXNlcjE3NDI5MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/174291?v=4","gravatar_id":"","url":"https://api.github.com/users/robin13","html_url":"https://github.com/robin13","followers_url":"https://api.github.com/users/robin13/followers","following_url":"https://api.github.com/users/robin13/following{/other_user}","gists_url":"https://api.github.com/users/robin13/gists{/gist_id}","starred_url":"https://api.github.com/users/robin13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robin13/subscriptions","organizations_url":"https://api.github.com/users/robin13/orgs","repos_url":"https://api.github.com/users/robin13/repos","events_url":"https://api.github.com/users/robin13/events{/privacy}","received_events_url":"https://api.github.com/users/robin13/received_events","type":"User","site_admin":false},"created_at":"2015-12-21T10:46:31Z","updated_at":"2015-12-21T10:46:31Z","author_association":"MEMBER","body":"Found root cause / method to reproduce:\nIf disk is spun down (`hdparm -Y /dev/sdX`) and Elasticsearch is restarted, the repository will be (silently - no entry in the log) removed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166340625","html_url":"https://github.com/elastic/elasticsearch/issues/15529#issuecomment-166340625","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15529","id":166340625,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjM0MDYyNQ==","user":{"login":"robin13","id":174291,"node_id":"MDQ6VXNlcjE3NDI5MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/174291?v=4","gravatar_id":"","url":"https://api.github.com/users/robin13","html_url":"https://github.com/robin13","followers_url":"https://api.github.com/users/robin13/followers","following_url":"https://api.github.com/users/robin13/following{/other_user}","gists_url":"https://api.github.com/users/robin13/gists{/gist_id}","starred_url":"https://api.github.com/users/robin13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robin13/subscriptions","organizations_url":"https://api.github.com/users/robin13/orgs","repos_url":"https://api.github.com/users/robin13/repos","events_url":"https://api.github.com/users/robin13/events{/privacy}","received_events_url":"https://api.github.com/users/robin13/received_events","type":"User","site_admin":false},"created_at":"2015-12-21T15:59:25Z","updated_at":"2015-12-21T15:59:25Z","author_association":"MEMBER","body":"To elaborate ^^ : The disk being spun down is the disk of the repository, not elasticsearch data.  The repository definition is removed, but the data remains (and is usable when the repository is re-created).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166341964","html_url":"https://github.com/elastic/elasticsearch/issues/15529#issuecomment-166341964","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15529","id":166341964,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjM0MTk2NA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2015-12-21T16:03:31Z","updated_at":"2015-12-21T16:03:31Z","author_association":"CONTRIBUTOR","body":"I think I found the issue. Seems to be the caused by the custom metadata parsing of the license plugin (still need to investigate). My observations so far:\n- repositories were sometimes removed after restart of cluster\n- the issue occured only when repository metadata was written after license metadata. As the order of writing custom metadata is undefined, this led to the bug occurring only sometimes (on my machine very rarely, especially NOT when I tried to reproduce it 3 days ago).\n\nI'll have a closer look tomorrow at this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166661333","html_url":"https://github.com/elastic/elasticsearch/issues/15529#issuecomment-166661333","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15529","id":166661333,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjY2MTMzMw==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2015-12-22T16:08:24Z","updated_at":"2015-12-22T16:08:24Z","author_association":"CONTRIBUTOR","body":"Issue fixed in plugin.\n","performed_via_github_app":null}]