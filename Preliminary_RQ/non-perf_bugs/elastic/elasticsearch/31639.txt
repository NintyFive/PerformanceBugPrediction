{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/31639","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31639/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31639/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31639/events","html_url":"https://github.com/elastic/elasticsearch/issues/31639","id":336419943,"node_id":"MDU6SXNzdWUzMzY0MTk5NDM=","number":31639,"title":"ES 6.3: X-Pack Licence is \"Expired\" on New Install","user":{"login":"JonathanHourany","id":12027634,"node_id":"MDQ6VXNlcjEyMDI3NjM0","avatar_url":"https://avatars1.githubusercontent.com/u/12027634?v=4","gravatar_id":"","url":"https://api.github.com/users/JonathanHourany","html_url":"https://github.com/JonathanHourany","followers_url":"https://api.github.com/users/JonathanHourany/followers","following_url":"https://api.github.com/users/JonathanHourany/following{/other_user}","gists_url":"https://api.github.com/users/JonathanHourany/gists{/gist_id}","starred_url":"https://api.github.com/users/JonathanHourany/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonathanHourany/subscriptions","organizations_url":"https://api.github.com/users/JonathanHourany/orgs","repos_url":"https://api.github.com/users/JonathanHourany/repos","events_url":"https://api.github.com/users/JonathanHourany/events{/privacy}","received_events_url":"https://api.github.com/users/JonathanHourany/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-06-27T23:17:05Z","updated_at":"2019-02-22T03:24:17Z","closed_at":"2018-06-27T23:35:14Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: 6.3\r\n\r\n**JVM version** (`java -version`): 1.8.0_171\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): Ubuntu 16.04.4 LTS (GNU/Linux 4.4.0-128-generic x86_64)\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nFollowing the steps provided at [Install Elasticsearch with Debian Package](https://www.elastic.co/guide/en/elasticsearch/reference/current/deb.htmlh) I downloaded and installed the DEB files for both Elasticsearch 6.3 and Kibana. I continued following the steps and at some point (I'm no longer able to find them) the steps recommended using `bin/elasticsearch-setup-passwords interactive` to setup passwords across packages. On running this script I got the following error\r\n\r\n```\r\nUnexpected response code [403] from calling GET http://127.0.0.1:9200/_xpack/security/_authenticate?pretty\r\nIt doesn't look like the X-Pack security feature is available on this Elasticsearch node.\r\nPlease check if you have installed a license that allows access to X-Pack Security feature.\r\n\r\nERROR: X-Pack Security is not available.`\r\n```\r\nFollowing the trail I sent out a `GET` to `_xpack/security/_authenticate\r\n\r\n```\r\nGET \"http://127.0.0.1:9200/_xpack/security/_authenticate?pretty\"\r\n{\r\n  \"error\" : {\r\n    \"root_cause\" : [\r\n      {\r\n        \"type\" : \"security_exception\",\r\n        \"reason\" : \"current license is non-compliant for [security]\",\r\n        \"license.expired.feature\" : \"security\"\r\n      }\r\n    ],\r\n    \"type\" : \"security_exception\",\r\n    \"reason\" : \"current license is non-compliant for [security]\",\r\n    \"license.expired.feature\" : \"security\"\r\n  },\r\n  \"status\" : 403\r\n}\r\n```\r\n\r\nAnd querying the X-Pack licence API get me this:\r\n\r\n```\r\nGET \"http://localhost:9200/_xpack/license\"{\r\n  \"license\" : {\r\n    \"status\" : \"active\",\r\n    \"uid\" : \"a5100a6a-cce1-4d51-b197-97fc2304e50a\",\r\n    \"type\" : \"basic\",\r\n    \"issue_date\" : \"2018-06-20T22:13:12.053Z\",\r\n    \"issue_date_in_millis\" : 1529532792053,\r\n    \"max_nodes\" : 1000,\r\n    \"issued_to\" : \"elasticsearch\",\r\n    \"issuer\" : \"elasticsearch\",\r\n    \"start_date_in_millis\" : -1\r\n  }\r\n}\r\n````\r\nIt looks like X-Pack thinks the licence is expired for some reason. Like the `.deb` version might be shipping with expired licenses. There's a thread going on the [Elasticsearch forums](https://discuss.elastic.co/t/elasticsearch-6-3-x-pack-and-remote-connection-doesnt-work/136618) with other useres experiancing this issue.","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}