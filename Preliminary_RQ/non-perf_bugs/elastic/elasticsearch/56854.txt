{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/56854","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56854/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56854/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56854/events","html_url":"https://github.com/elastic/elasticsearch/issues/56854","id":619310310,"node_id":"MDU6SXNzdWU2MTkzMTAzMTA=","number":56854,"title":"org.elasticsearch.xpack.sql.client.VersionTests.testVersionFromJar failure ","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"labels":[{"id":912794284,"node_id":"MDU6TGFiZWw5MTI3OTQyODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Query%20Languages/SQL","name":":Query Languages/SQL","color":"0e8a16","default":false,"description":"SQL querying"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":1967501040,"node_id":"MDU6TGFiZWwxOTY3NTAxMDQw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:QL","name":"Team:QL","color":"fef2c0","default":false,"description":"Meta label for query languages team"}],"state":"closed","locked":false,"assignee":{"login":"bpintea","id":1562801,"node_id":"MDQ6VXNlcjE1NjI4MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1562801?v=4","gravatar_id":"","url":"https://api.github.com/users/bpintea","html_url":"https://github.com/bpintea","followers_url":"https://api.github.com/users/bpintea/followers","following_url":"https://api.github.com/users/bpintea/following{/other_user}","gists_url":"https://api.github.com/users/bpintea/gists{/gist_id}","starred_url":"https://api.github.com/users/bpintea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bpintea/subscriptions","organizations_url":"https://api.github.com/users/bpintea/orgs","repos_url":"https://api.github.com/users/bpintea/repos","events_url":"https://api.github.com/users/bpintea/events{/privacy}","received_events_url":"https://api.github.com/users/bpintea/received_events","type":"User","site_admin":false},"assignees":[{"login":"bpintea","id":1562801,"node_id":"MDQ6VXNlcjE1NjI4MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1562801?v=4","gravatar_id":"","url":"https://api.github.com/users/bpintea","html_url":"https://github.com/bpintea","followers_url":"https://api.github.com/users/bpintea/followers","following_url":"https://api.github.com/users/bpintea/following{/other_user}","gists_url":"https://api.github.com/users/bpintea/gists{/gist_id}","starred_url":"https://api.github.com/users/bpintea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bpintea/subscriptions","organizations_url":"https://api.github.com/users/bpintea/orgs","repos_url":"https://api.github.com/users/bpintea/repos","events_url":"https://api.github.com/users/bpintea/events{/privacy}","received_events_url":"https://api.github.com/users/bpintea/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2020-05-15T22:40:18Z","updated_at":"2020-05-18T09:40:06Z","closed_at":"2020-05-18T09:40:06Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Build scan**:\r\n\r\nhttps://gradle-enterprise.elastic.co/s/ebqtvj3nve2cs\r\n\r\n**Repro line**:\r\n\r\n```\r\n./gradlew ':x-pack:plugin:sql:sql-client:test' --tests \"org.elasticsearch.xpack.sql.client.VersionTests.testVersionFromJar\" -Dtests.seed=E68F964D035DA7B7 -Dtests.security.manager=true -Dtests.locale=zh-TW -Dtests.timezone=America/Port-au-Prince -Dcompiler.java=14 -Druntime.java=8\r\n```\r\n\r\n**Reproduces locally?**:\r\nYES. with the given test seed. (tested against latest 7.x 813609b47c5b9916be0acb5ff56a89a504f5185b)\r\n\r\n\r\n**Applicable branches**:\r\ndiscovered and reproduced on 7.x, not sure about other branches.\r\n\r\n**Failure history**:\r\nIt looks like it this code changed yesterday via https://github.com/elastic/elasticsearch/pull/56797 \r\n\r\ncc: @bpintea \r\n\r\n**Failure excerpt**:\r\n\r\n```\r\n> Task :x-pack:plugin:sql:sql-client:test FAILED\r\n\r\n\r\norg.elasticsearch.xpack.sql.client.VersionTests > testVersionFromJar FAILED\r\n    java.security.InvalidParameterException: Invalid version initialisers [72, 100, 34]\r\n        at __randomizedtesting.SeedInfo.seed([E68F964D035DA7B7:7AF4088C5B66BB7E]:0)\r\n        at org.elasticsearch.xpack.sql.proto.SqlVersion.<init>(SqlVersion.java:53)\r\n        at org.elasticsearch.xpack.sql.proto.SqlVersion.fromString(SqlVersion.java:65)\r\n        at org.elasticsearch.xpack.sql.client.ClientVersion.extractVersion(ClientVersion.java:108)\r\n        at org.elasticsearch.xpack.sql.client.VersionTests.testVersionFromJar(VersionTests.java:90)\r\nREPRODUCE WITH: ./gradlew ':x-pack:plugin:sql:sql-client:test' --tests \"org.elasticsearch.xpack.sql.client.VersionTests.testVersionFromJar\" -Dtests.seed=E68F964D035DA7B7 -Dtests.security.manager=true -Dtests.locale=zh-TW -Dtests.timezone=America/Port-au-Prince -Dcompiler.java=14 -Druntime.java=8\r\n\r\nSuite: Test class org.elasticsearch.xpack.sql.client.VersionTests\r\n  1> [2020-05-15T18:37:19,131][INFO ][o.e.x.s.c.VersionTests   ] [testVersionFromJar] before test\r\n  1> [2020-05-15T18:37:19,623][INFO ][o.e.x.s.c.VersionTests   ] [testVersionFromJar] after test\r\n  2> REPRODUCE WITH: ./gradlew ':x-pack:plugin:sql:sql-client:test' --tests \"org.elasticsearch.xpack.sql.client.VersionTests.testVersionFromJar\" -Dtests.seed=E68F964D035DA7B7 -Dtests.security.manager=true -Dtests.locale=zh-TW -Dtests.timezone=America/Port-au-Prince -Dcompiler.java=14 -Druntime.java=8\r\n  2> java.security.InvalidParameterException: Invalid version initialisers [72, 100, 34]\r\n        at __randomizedtesting.SeedInfo.seed([E68F964D035DA7B7:7AF4088C5B66BB7E]:0)\r\n        at org.elasticsearch.xpack.sql.proto.SqlVersion.<init>(SqlVersion.java:53)\r\n        at org.elasticsearch.xpack.sql.proto.SqlVersion.fromString(SqlVersion.java:65)\r\n        at org.elasticsearch.xpack.sql.client.ClientVersion.extractVersion(ClientVersion.java:108)\r\n        at org.elasticsearch.xpack.sql.client.VersionTests.testVersionFromJar(VersionTests.java:90)\r\n  2> NOTE: leaving temporary files on disk at: /Users/jakelandis/workspace/7x/elasticsearch/x-pack/plugin/sql/sql-client/build/testrun/test/temp/org.elasticsearch.xpack.sql.client.VersionTests_E68F964D035DA7B7-005\r\n  2> NOTE: test params are: codec=Asserting(Lucene84): {}, docValues:{}, maxPointsInLeafNode=1185, maxMBSortInHeap=6.418052244289037, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@2f30aa51), locale=zh-TW, timezone=America/Port-au-Prince\r\n  2> NOTE: Mac OS X 10.15.3 x86_64/Oracle Corporation 1.8.0_211 (64-bit)/cpus=16,threads=1,free=490339424,total=514850816\r\n  2> NOTE: All tests run in this JVM: [VersionTests]\r\n\r\n1 test completed, 1 failed\r\n\r\nTests with failures:\r\n - org.elasticsearch.xpack.sql.client.VersionTests.testVersionFromJar\r\n```","closed_by":{"login":"bpintea","id":1562801,"node_id":"MDQ6VXNlcjE1NjI4MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/1562801?v=4","gravatar_id":"","url":"https://api.github.com/users/bpintea","html_url":"https://github.com/bpintea","followers_url":"https://api.github.com/users/bpintea/followers","following_url":"https://api.github.com/users/bpintea/following{/other_user}","gists_url":"https://api.github.com/users/bpintea/gists{/gist_id}","starred_url":"https://api.github.com/users/bpintea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bpintea/subscriptions","organizations_url":"https://api.github.com/users/bpintea/orgs","repos_url":"https://api.github.com/users/bpintea/repos","events_url":"https://api.github.com/users/bpintea/events{/privacy}","received_events_url":"https://api.github.com/users/bpintea/received_events","type":"User","site_admin":false},"performed_via_github_app":null}