[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/301683542","html_url":"https://github.com/elastic/elasticsearch/issues/24694#issuecomment-301683542","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24694","id":301683542,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTY4MzU0Mg==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2017-05-16T05:59:16Z","updated_at":"2017-05-16T05:59:16Z","author_association":"MEMBER","body":"@nknize Can you please have a look at this one?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/301996619","html_url":"https://github.com/elastic/elasticsearch/issues/24694#issuecomment-301996619","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24694","id":301996619,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTk5NjYxOQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-05-17T06:19:17Z","updated_at":"2017-05-17T06:19:17Z","author_association":"CONTRIBUTOR","body":"This is the expected behaviour as aggregations have a document-level granularity. Once a document enters a bucket, all its values can still be seen. A workaround could be to use `nested` documents so that each nested document only has one `geo_point` value and then put the geohash grid aggregation under a nested aggregation at search time.\r\n\r\nI'm labelling this `discuss` as another option would be for us to make the geohash grid aggregation compute the centroid as well: this way it could only take into account points that fell into the bucket. But the trade-off is not obvious to me as I have not seen many use-cases for multivalued geo-points and computing centroids would make the geo hash grid more memory-intensive.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/302107803","html_url":"https://github.com/elastic/elasticsearch/issues/24694#issuecomment-302107803","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24694","id":302107803,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjEwNzgwMw==","user":{"login":"trevan","id":2044248,"node_id":"MDQ6VXNlcjIwNDQyNDg=","avatar_url":"https://avatars2.githubusercontent.com/u/2044248?v=4","gravatar_id":"","url":"https://api.github.com/users/trevan","html_url":"https://github.com/trevan","followers_url":"https://api.github.com/users/trevan/followers","following_url":"https://api.github.com/users/trevan/following{/other_user}","gists_url":"https://api.github.com/users/trevan/gists{/gist_id}","starred_url":"https://api.github.com/users/trevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevan/subscriptions","organizations_url":"https://api.github.com/users/trevan/orgs","repos_url":"https://api.github.com/users/trevan/repos","events_url":"https://api.github.com/users/trevan/events{/privacy}","received_events_url":"https://api.github.com/users/trevan/received_events","type":"User","site_admin":false},"created_at":"2017-05-17T14:27:57Z","updated_at":"2017-05-17T14:27:57Z","author_association":"NONE","body":"@jpountz, our use case is that we track communication between two different physical locations. So the document has a start and end location and we want to show where communication is happening.  We can show just the start or just the end (as we have separate fields to store those geo points) but if we want to see both start and end, we get these wrong locations.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/302110307","html_url":"https://github.com/elastic/elasticsearch/issues/24694#issuecomment-302110307","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24694","id":302110307,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjExMDMwNw==","user":{"login":"trevan","id":2044248,"node_id":"MDQ6VXNlcjIwNDQyNDg=","avatar_url":"https://avatars2.githubusercontent.com/u/2044248?v=4","gravatar_id":"","url":"https://api.github.com/users/trevan","html_url":"https://github.com/trevan","followers_url":"https://api.github.com/users/trevan/followers","following_url":"https://api.github.com/users/trevan/following{/other_user}","gists_url":"https://api.github.com/users/trevan/gists{/gist_id}","starred_url":"https://api.github.com/users/trevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevan/subscriptions","organizations_url":"https://api.github.com/users/trevan/orgs","repos_url":"https://api.github.com/users/trevan/repos","events_url":"https://api.github.com/users/trevan/events{/privacy}","received_events_url":"https://api.github.com/users/trevan/received_events","type":"User","site_admin":false},"created_at":"2017-05-17T14:35:07Z","updated_at":"2017-05-17T14:35:07Z","author_association":"NONE","body":"@jpountz, since Kibana doesn't support nested documents, we can't use the nested document work around.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/302135189","html_url":"https://github.com/elastic/elasticsearch/issues/24694#issuecomment-302135189","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24694","id":302135189,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjEzNTE4OQ==","user":{"login":"trevan","id":2044248,"node_id":"MDQ6VXNlcjIwNDQyNDg=","avatar_url":"https://avatars2.githubusercontent.com/u/2044248?v=4","gravatar_id":"","url":"https://api.github.com/users/trevan","html_url":"https://github.com/trevan","followers_url":"https://api.github.com/users/trevan/followers","following_url":"https://api.github.com/users/trevan/following{/other_user}","gists_url":"https://api.github.com/users/trevan/gists{/gist_id}","starred_url":"https://api.github.com/users/trevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevan/subscriptions","organizations_url":"https://api.github.com/users/trevan/orgs","repos_url":"https://api.github.com/users/trevan/repos","events_url":"https://api.github.com/users/trevan/events{/privacy}","received_events_url":"https://api.github.com/users/trevan/received_events","type":"User","site_admin":false},"created_at":"2017-05-17T15:53:44Z","updated_at":"2017-05-17T15:53:44Z","author_association":"NONE","body":"One possible work around would be to have the geohash_grid clamp the location to within the grid's bounding box.  That should look a little better.  Kibana could possibly do that on the client side.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/323356588","html_url":"https://github.com/elastic/elasticsearch/issues/24694#issuecomment-323356588","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24694","id":323356588,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzM1NjU4OA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-08-18T13:40:33Z","updated_at":"2017-08-18T13:40:33Z","author_association":"CONTRIBUTOR","body":"Closing: We don't want to make the geo centroid or geo hash grid aggregations more complex than they are today.","performed_via_github_app":null}]