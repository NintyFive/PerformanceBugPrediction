[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/164471132","html_url":"https://github.com/elastic/elasticsearch/issues/15409#issuecomment-164471132","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15409","id":164471132,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDQ3MTEzMg==","user":{"login":"danielschonfeld","id":522598,"node_id":"MDQ6VXNlcjUyMjU5OA==","avatar_url":"https://avatars2.githubusercontent.com/u/522598?v=4","gravatar_id":"","url":"https://api.github.com/users/danielschonfeld","html_url":"https://github.com/danielschonfeld","followers_url":"https://api.github.com/users/danielschonfeld/followers","following_url":"https://api.github.com/users/danielschonfeld/following{/other_user}","gists_url":"https://api.github.com/users/danielschonfeld/gists{/gist_id}","starred_url":"https://api.github.com/users/danielschonfeld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielschonfeld/subscriptions","organizations_url":"https://api.github.com/users/danielschonfeld/orgs","repos_url":"https://api.github.com/users/danielschonfeld/repos","events_url":"https://api.github.com/users/danielschonfeld/events{/privacy}","received_events_url":"https://api.github.com/users/danielschonfeld/received_events","type":"User","site_admin":false},"created_at":"2015-12-14T15:43:21Z","updated_at":"2015-12-14T15:43:21Z","author_association":"NONE","body":"Update: this issue is not related to kubernetes in any way.  Also not specific to my company image, this problem occurs with the docker hub elasticsearch:2.1.0 image + CoreOS >= 835.9.0.\n\nSteps to reproduce:\n1) Need at least 2 machines of CoreOS, 1 should be release >= 835.9.0 and the other a release before that. IE `CoreOS 766.5.0`.\n\nNotes: \n- You will need an ES cluster > 1 node.  2 Nodes is fine as long as they join into a cluster together.\n- Machine number 1 will be the one with CoreOS >= 835.9.0\n- Machine number 2 will be the one with CoreOS = 766.5.0\n\n2) We happen to use flanneld so for the sake of the experiment please utilize flannel\n3) On machine number 1 start ES with the following: `docker run --name es -i -t elasticsearch:2.1.0 /bin/bash`\n4) Do the same on machine number 2.\n5) On both machines, inside the shell install the license and marvel-agent plugins:\n\n```\n/usr/share/elasticsearch/bin/plugin install license\n/usr/share/elasticsearch/bin/plugin install marvel-agent\n```\n\n6) On machine number 2 edit the `elasticsearch.yaml` and add the discovery line with the IP of machine number 1, i.e.: `discovery.zen.ping.unicast.hosts: [10.244.61.148]`\n\n7) Start ES on machine number 1 `/docker-entry.sh elasticsearch`\n8) Do the same on machine number 2\n9) Allow both machines to agree they've connected and joined into a cluster\n\n10) Go back to machine number 1 and try to `ping google.com`... You will see the name can't even be resolved. And generally the whole network on the host machine is trashed and so is ES.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/164540287","html_url":"https://github.com/elastic/elasticsearch/issues/15409#issuecomment-164540287","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15409","id":164540287,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDU0MDI4Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-12-14T19:50:06Z","updated_at":"2015-12-14T19:50:06Z","author_association":"CONTRIBUTOR","body":"I doubt Marvel is making lots of DNS request (@tlrx could you confirm?)\n\nWhat about looking at what network sockets are in use?  Also, it seems very weird that this requires two different versions of CoreOs... sounds like it might be an issue with CoreOs then, no?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/164544996","html_url":"https://github.com/elastic/elasticsearch/issues/15409#issuecomment-164544996","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15409","id":164544996,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDU0NDk5Ng==","user":{"login":"danielschonfeld","id":522598,"node_id":"MDQ6VXNlcjUyMjU5OA==","avatar_url":"https://avatars2.githubusercontent.com/u/522598?v=4","gravatar_id":"","url":"https://api.github.com/users/danielschonfeld","html_url":"https://github.com/danielschonfeld","followers_url":"https://api.github.com/users/danielschonfeld/followers","following_url":"https://api.github.com/users/danielschonfeld/following{/other_user}","gists_url":"https://api.github.com/users/danielschonfeld/gists{/gist_id}","starred_url":"https://api.github.com/users/danielschonfeld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielschonfeld/subscriptions","organizations_url":"https://api.github.com/users/danielschonfeld/orgs","repos_url":"https://api.github.com/users/danielschonfeld/repos","events_url":"https://api.github.com/users/danielschonfeld/events{/privacy}","received_events_url":"https://api.github.com/users/danielschonfeld/received_events","type":"User","site_admin":false},"created_at":"2015-12-14T20:08:58Z","updated_at":"2015-12-14T20:08:58Z","author_association":"NONE","body":"@clintongormley it requires two versions because in my reproduction steps, I want you to be left with one machine that actually works while the other is trashed.\n\nusing an older version archives just that...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/164545208","html_url":"https://github.com/elastic/elasticsearch/issues/15409#issuecomment-164545208","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15409","id":164545208,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDU0NTIwOA==","user":{"login":"danielschonfeld","id":522598,"node_id":"MDQ6VXNlcjUyMjU5OA==","avatar_url":"https://avatars2.githubusercontent.com/u/522598?v=4","gravatar_id":"","url":"https://api.github.com/users/danielschonfeld","html_url":"https://github.com/danielschonfeld","followers_url":"https://api.github.com/users/danielschonfeld/followers","following_url":"https://api.github.com/users/danielschonfeld/following{/other_user}","gists_url":"https://api.github.com/users/danielschonfeld/gists{/gist_id}","starred_url":"https://api.github.com/users/danielschonfeld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielschonfeld/subscriptions","organizations_url":"https://api.github.com/users/danielschonfeld/orgs","repos_url":"https://api.github.com/users/danielschonfeld/repos","events_url":"https://api.github.com/users/danielschonfeld/events{/privacy}","received_events_url":"https://api.github.com/users/danielschonfeld/received_events","type":"User","site_admin":false},"created_at":"2015-12-14T20:09:51Z","updated_at":"2015-12-14T20:09:51Z","author_association":"NONE","body":"@clintongormley also see the linked docker bug... this might not be directly the fault of ES but rather my steps just find a proven way to reproduce a docker bug.  So it might not be ES's fault per say.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/183957653","html_url":"https://github.com/elastic/elasticsearch/issues/15409#issuecomment-183957653","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15409","id":183957653,"node_id":"MDEyOklzc3VlQ29tbWVudDE4Mzk1NzY1Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-14T19:13:31Z","updated_at":"2016-02-14T19:13:31Z","author_association":"CONTRIBUTOR","body":"This sounds like a docker problem rather than an ES problem, so I'm going to close this\n","performed_via_github_app":null}]