[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/2788171","html_url":"https://github.com/elastic/elasticsearch/issues/1478#issuecomment-2788171","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1478","id":2788171,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODgxNzE=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-11-18T11:37:13Z","updated_at":"2011-11-18T11:37:13Z","author_association":"MEMBER","body":"I pushed a fix for this in both 0.18 and master branch, it would be great if you can test it with bigcouch.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/2791828","html_url":"https://github.com/elastic/elasticsearch/issues/1478#issuecomment-2791828","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1478","id":2791828,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTE4Mjg=","user":{"login":"opie4624","id":6883,"node_id":"MDQ6VXNlcjY4ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/6883?v=4","gravatar_id":"","url":"https://api.github.com/users/opie4624","html_url":"https://github.com/opie4624","followers_url":"https://api.github.com/users/opie4624/followers","following_url":"https://api.github.com/users/opie4624/following{/other_user}","gists_url":"https://api.github.com/users/opie4624/gists{/gist_id}","starred_url":"https://api.github.com/users/opie4624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opie4624/subscriptions","organizations_url":"https://api.github.com/users/opie4624/orgs","repos_url":"https://api.github.com/users/opie4624/repos","events_url":"https://api.github.com/users/opie4624/events{/privacy}","received_events_url":"https://api.github.com/users/opie4624/received_events","type":"User","site_admin":false},"created_at":"2011-11-18T17:33:07Z","updated_at":"2011-11-20T18:11:30Z","author_association":"NONE","body":"Pulling and compiling now... I'll let you know in a bit.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/2792901","html_url":"https://github.com/elastic/elasticsearch/issues/1478#issuecomment-2792901","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1478","id":2792901,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTI5MDE=","user":{"login":"opie4624","id":6883,"node_id":"MDQ6VXNlcjY4ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/6883?v=4","gravatar_id":"","url":"https://api.github.com/users/opie4624","html_url":"https://github.com/opie4624","followers_url":"https://api.github.com/users/opie4624/followers","following_url":"https://api.github.com/users/opie4624/following{/other_user}","gists_url":"https://api.github.com/users/opie4624/gists{/gist_id}","starred_url":"https://api.github.com/users/opie4624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opie4624/subscriptions","organizations_url":"https://api.github.com/users/opie4624/orgs","repos_url":"https://api.github.com/users/opie4624/repos","events_url":"https://api.github.com/users/opie4624/events{/privacy}","received_events_url":"https://api.github.com/users/opie4624/received_events","type":"User","site_admin":false},"created_at":"2011-11-18T19:03:57Z","updated_at":"2011-11-18T19:03:57Z","author_association":"NONE","body":"No dice. It can't consume the _changes stream at all:\n\n```\n\n[2011-11-18 11:00:45,540][WARN ][river.couchdb            ] [Ravage 2099] [couchdb][stream-data] failed to executefailure in bulk execution:\n[100]: index [_river], type [stream-data], id [_seq], message [MapperParsingException[Failed to parse [couchdb.last_seq]]; nested: NumberFormatException[For input string: \"g1AAAAH-eJyV0M0NgkAQBeDx52IHJpLYAVc52oNSwLKiLNkICJrQgiBtaGhDI1qFJhSijzXRgx7WvbzL-zKzI4mo53VmZDhiwYM198bhSmxY4po8dVJpyoAzKdFqM1p2aVBFhu8QtbIG9T9ozr8A6gbqiFFRW0pdtJSFOmJi27ZSZ70FQaYgiABzlcwbOXzLOHS5YFLEyS8cQiGy2ioU3motm6OO2JdlqdRVe9kDCOIYGZWSO615J9QRNxzpz3l3EMQD7_U__wndgqMv\"]; ]\n[2011-11-18 11:00:45,637][DEBUG][action.bulk              ] [Ravage 2099] [_river][0] failed to bulk item (index) index {[_river][stream-data][_seq], source[{\"couchdb\":{\"last_seq\":[3900,\"g1AAAAH-eJzLYWBg4MxgTmGQScpMT84vTc5wKCjKLEssSdVLrkyqzNHLyU9OzMkBqmJKZMhjYZA-XiiTlcTAwDgVpEkCoSktGUMDULkMUDmQMu97bAHWdYUoXRZA5UAqODQ0FKzrEnEOBGoJAWoBUvlAe8E6p4F0ysN1FhekJmcm5mQWl2DTXADUBaS6H1v0keDFHqByILV81apVYF3XiHbsCqAWIHW4UOY4WOd0ouw7AlQOpO4DAwms6yrR9j0AagFS_4EArHNKFgA3I6OT\"]}}]}\norg.elasticsearch.index.mapper.MapperParsingException: Failed to parse [couchdb.last_seq]\n    at org.elasticsearch.index.mapper.core.AbstractFieldMapper.parse(AbstractFieldMapper.java:308)\n    at org.elasticsearch.index.mapper.object.ObjectMapper.serializeValue(ObjectMapper.java:577)\n    at org.elasticsearch.index.mapper.object.ObjectMapper.serializeArray(ObjectMapper.java:565)\n    at org.elasticsearch.index.mapper.object.ObjectMapper.parse(ObjectMapper.java:435)\n    at org.elasticsearch.index.mapper.object.ObjectMapper.serializeObject(ObjectMapper.java:491)\n    at org.elasticsearch.index.mapper.object.ObjectMapper.parse(ObjectMapper.java:433)\n    at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:475)\n    at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:416)\n    at org.elasticsearch.index.shard.service.InternalIndexShard.prepareIndex(InternalIndexShard.java:302)\n    at org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:136)\n    at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:487)\n    at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:400)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:680)\nCaused by: java.lang.NumberFormatException: For input string: \"g1AAAAH-eJzLYWBg4MxgTmGQScpMT84vTc5wKCjKLEssSdVLrkyqzNHLyU9OzMkBqmJKZMhjYZA-XiiTlcTAwDgVpEkCoSktGUMDULkMUDmQMu97bAHWdYUoXRZA5UAqODQ0FKzrEnEOBGoJAWoBUvlAe8E6p4F0ysN1FhekJmcm5mQWl2DTXADUBaS6H1v0keDFHqByILV81apVYF3XiHbsCqAWIHW4UOY4WOd0ouw7AlQOpO4DAwms6yrR9j0AagFS_4EArHNKFgA3I6OT\"\n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)\n    at java.lang.Long.parseLong(Long.java:410)\n    at java.lang.Long.parseLong(Long.java:468)\n    at org.elasticsearch.common.xcontent.support.AbstractXContentParser.longValue(AbstractXContentParser.java:68)\n    at org.elasticsearch.index.mapper.core.LongFieldMapper.parseCreateField(LongFieldMapper.java:231)\n    at org.elasticsearch.index.mapper.core.AbstractFieldMapper.parse(AbstractFieldMapper.java:295)\n    ... 14 more\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/2798526","html_url":"https://github.com/elastic/elasticsearch/issues/1478#issuecomment-2798526","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1478","id":2798526,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTg1MjY=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-11-19T12:12:13Z","updated_at":"2011-11-19T12:12:13Z","author_association":"MEMBER","body":"You need to delete the river first, since last_seq got identified as numeric (maybe you worked with local couchdb), and then changed to an array when you moved to bigcoudh.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/2800074","html_url":"https://github.com/elastic/elasticsearch/issues/1478#issuecomment-2800074","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1478","id":2800074,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDAwNzQ=","user":{"login":"opie4624","id":6883,"node_id":"MDQ6VXNlcjY4ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/6883?v=4","gravatar_id":"","url":"https://api.github.com/users/opie4624","html_url":"https://github.com/opie4624","followers_url":"https://api.github.com/users/opie4624/followers","following_url":"https://api.github.com/users/opie4624/following{/other_user}","gists_url":"https://api.github.com/users/opie4624/gists{/gist_id}","starred_url":"https://api.github.com/users/opie4624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opie4624/subscriptions","organizations_url":"https://api.github.com/users/opie4624/orgs","repos_url":"https://api.github.com/users/opie4624/repos","events_url":"https://api.github.com/users/opie4624/events{/privacy}","received_events_url":"https://api.github.com/users/opie4624/received_events","type":"User","site_admin":false},"created_at":"2011-11-19T18:15:06Z","updated_at":"2011-11-20T18:11:20Z","author_association":"NONE","body":"I'm starting over with a fresh data directory and recreating the river\nevery time I test.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/2802746","html_url":"https://github.com/elastic/elasticsearch/issues/1478#issuecomment-2802746","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1478","id":2802746,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDI3NDY=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-11-20T06:38:21Z","updated_at":"2011-11-20T06:38:21Z","author_association":"MEMBER","body":"Can you set `river.couchdb` in logging.yml file to TRACE and run it? It seems like the seq stored under the `_river` index is identified as numeric for some reason. The trace level logging will show what gets indexed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/2806472","html_url":"https://github.com/elastic/elasticsearch/issues/1478#issuecomment-2806472","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1478","id":2806472,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDY0NzI=","user":{"login":"opie4624","id":6883,"node_id":"MDQ6VXNlcjY4ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/6883?v=4","gravatar_id":"","url":"https://api.github.com/users/opie4624","html_url":"https://github.com/opie4624","followers_url":"https://api.github.com/users/opie4624/followers","following_url":"https://api.github.com/users/opie4624/following{/other_user}","gists_url":"https://api.github.com/users/opie4624/gists{/gist_id}","starred_url":"https://api.github.com/users/opie4624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opie4624/subscriptions","organizations_url":"https://api.github.com/users/opie4624/orgs","repos_url":"https://api.github.com/users/opie4624/repos","events_url":"https://api.github.com/users/opie4624/events{/privacy}","received_events_url":"https://api.github.com/users/opie4624/received_events","type":"User","site_admin":false},"created_at":"2011-11-20T18:10:52Z","updated_at":"2011-11-20T18:10:52Z","author_association":"NONE","body":"Log file is about 17MB: http://ge.tt/8QErZBA?c\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/2840708","html_url":"https://github.com/elastic/elasticsearch/issues/1478#issuecomment-2840708","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1478","id":2840708,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDA3MDg=","user":{"login":"opie4624","id":6883,"node_id":"MDQ6VXNlcjY4ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/6883?v=4","gravatar_id":"","url":"https://api.github.com/users/opie4624","html_url":"https://github.com/opie4624","followers_url":"https://api.github.com/users/opie4624/followers","following_url":"https://api.github.com/users/opie4624/following{/other_user}","gists_url":"https://api.github.com/users/opie4624/gists{/gist_id}","starred_url":"https://api.github.com/users/opie4624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opie4624/subscriptions","organizations_url":"https://api.github.com/users/opie4624/orgs","repos_url":"https://api.github.com/users/opie4624/repos","events_url":"https://api.github.com/users/opie4624/events{/privacy}","received_events_url":"https://api.github.com/users/opie4624/received_events","type":"User","site_admin":false},"created_at":"2011-11-22T21:09:03Z","updated_at":"2011-11-23T01:25:36Z","author_association":"NONE","body":"https://gist.github.com/69c5cc6d2f214d3a5204\n\nLooks like elasticsearch is parsing the json sequence info out properly for indexing, but is not storing it properly in the river/_seq document.\n\nIf I look at what's in elasticsearch there is no _seq document for the given river.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/2845713","html_url":"https://github.com/elastic/elasticsearch/issues/1478#issuecomment-2845713","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1478","id":2845713,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDU3MTM=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-11-23T07:12:49Z","updated_at":"2011-11-23T07:12:49Z","author_association":"MEMBER","body":"I see where the problem is, its because of the format of array, where it includes string and numeric types internally. Can I say again that this format BigCouch uses is quite atrocious...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/2845767","html_url":"https://github.com/elastic/elasticsearch/issues/1478#issuecomment-2845767","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1478","id":2845767,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDU3Njc=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-11-23T07:21:19Z","updated_at":"2011-11-23T07:21:19Z","author_association":"MEMBER","body":"ok, I pushed another effort in trying to solve it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/2854220","html_url":"https://github.com/elastic/elasticsearch/issues/1478#issuecomment-2854220","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1478","id":2854220,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTQyMjA=","user":{"login":"opie4624","id":6883,"node_id":"MDQ6VXNlcjY4ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/6883?v=4","gravatar_id":"","url":"https://api.github.com/users/opie4624","html_url":"https://github.com/opie4624","followers_url":"https://api.github.com/users/opie4624/followers","following_url":"https://api.github.com/users/opie4624/following{/other_user}","gists_url":"https://api.github.com/users/opie4624/gists{/gist_id}","starred_url":"https://api.github.com/users/opie4624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opie4624/subscriptions","organizations_url":"https://api.github.com/users/opie4624/orgs","repos_url":"https://api.github.com/users/opie4624/repos","events_url":"https://api.github.com/users/opie4624/events{/privacy}","received_events_url":"https://api.github.com/users/opie4624/received_events","type":"User","site_admin":false},"created_at":"2011-11-23T20:11:01Z","updated_at":"2011-11-23T20:11:01Z","author_association":"NONE","body":"Getting the \"failed to convert\" error.\nLog: https://gist.github.com/d215005dc57a77adee49\n","performed_via_github_app":null}]