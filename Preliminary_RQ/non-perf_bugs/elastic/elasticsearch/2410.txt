{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2410","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2410/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2410/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2410/events","html_url":"https://github.com/elastic/elasticsearch/issues/2410","id":8359092,"node_id":"MDU6SXNzdWU4MzU5MDky","number":2410,"title":"Allow facet counts to return count for 'MISSING' term","user":{"login":"electric-al","id":149461,"node_id":"MDQ6VXNlcjE0OTQ2MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/149461?v=4","gravatar_id":"","url":"https://api.github.com/users/electric-al","html_url":"https://github.com/electric-al","followers_url":"https://api.github.com/users/electric-al/followers","following_url":"https://api.github.com/users/electric-al/following{/other_user}","gists_url":"https://api.github.com/users/electric-al/gists{/gist_id}","starred_url":"https://api.github.com/users/electric-al/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/electric-al/subscriptions","organizations_url":"https://api.github.com/users/electric-al/orgs","repos_url":"https://api.github.com/users/electric-al/repos","events_url":"https://api.github.com/users/electric-al/events{/privacy}","received_events_url":"https://api.github.com/users/electric-al/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2012-11-14T16:27:17Z","updated_at":"2014-01-22T11:43:34Z","closed_at":"2014-01-22T11:43:34Z","author_association":"NONE","active_lock_reason":null,"body":"Hi there.\n\nI am using the term_stats facets to sum the value of a field 'grouped by' a facet key. Not all records in the index have a value for this facet key.\n\nThe only problem is dealing with these 'empty' facet keys.\n\nBy default, I get a histogram of available facet keys and sum(count). However the question is how to work out sum(count) for those records without the facet key?\n\nIf I were using a simple counting (term) facet (as opposed to term_stats with a sum) I could use the 'missing' value that is returned. However, that does not help as I need the sum(count field) for the missing records.\n\nIdeally it would be possible to:\n- Ask ES to sum the count field for the records without that facet field and return as missing_total\n- (Maybe cleaner) Signal that I would like ES to consider a virtual 'MISSING' facet that gets stats applied, ranked and returned if applicable.\n","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}