{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/4719","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4719/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4719/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4719/events","html_url":"https://github.com/elastic/elasticsearch/issues/4719","id":25549051,"node_id":"MDU6SXNzdWUyNTU0OTA1MQ==","number":4719,"title":"Can't modify mapping if it has a parent","user":{"login":"kzwang","id":2177991,"node_id":"MDQ6VXNlcjIxNzc5OTE=","avatar_url":"https://avatars3.githubusercontent.com/u/2177991?v=4","gravatar_id":"","url":"https://api.github.com/users/kzwang","html_url":"https://github.com/kzwang","followers_url":"https://api.github.com/users/kzwang/followers","following_url":"https://api.github.com/users/kzwang/following{/other_user}","gists_url":"https://api.github.com/users/kzwang/gists{/gist_id}","starred_url":"https://api.github.com/users/kzwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kzwang/subscriptions","organizations_url":"https://api.github.com/users/kzwang/orgs","repos_url":"https://api.github.com/users/kzwang/repos","events_url":"https://api.github.com/users/kzwang/events{/privacy}","received_events_url":"https://api.github.com/users/kzwang/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2014-01-14T02:27:29Z","updated_at":"2014-02-01T03:20:18Z","closed_at":"2014-02-01T03:20:18Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"If a type mapping with a parent is already exist, it can't be updated even if we are not modify the parent.\n\nSeems related to https://github.com/elasticsearch/elasticsearch/issues/3849\n\nI think that issue should be not allow to update the parent field in the mapping, however it will throw this exception even if we are updating other fields for mapping with parent\n\n``` sh\norg.elasticsearch.index.mapper.MergeMappingException: Merge failed with failures {[The _parent field can't be added or updated]}\" \n```\n\nExample:\n\n``` sh\n\n# create mapping for tweet\ncurl -XPUT localhost:9200/test/tweet/_mapping -d '{\n    \"tweet\" : {\n        \"properties\" : {\n            \"message\" : {\"type\" : \"string\", \"store\" : \"yes\"}\n        }\n    }\n}'\n\n# create mapping for tweet2 with parent tweet\ncurl -XPUT localhost:9200/test/tweet2/_mapping -d '{\n    \"tweet2\": {\n        \"_parent\": {\"type\": \"tweet\"},\n        \"properties\": {\n            \"message\": {\"type\": \"string\", \"store\": \"yes\"}\n        }\n    }\n}'\n\n# add a new property to tweet2 mapping, it's not modifying the parent but still got exception\ncurl -XPUT localhost:9200/test/tweet2/_mapping -d '{\n    \"tweet2\" : {\n        \"properties\" : {\n            \"message2\" : {\"type\" : \"string\", \"store\" : \"yes\"}\n        }\n    }\n}'\n```\n","closed_by":{"login":"kzwang","id":2177991,"node_id":"MDQ6VXNlcjIxNzc5OTE=","avatar_url":"https://avatars3.githubusercontent.com/u/2177991?v=4","gravatar_id":"","url":"https://api.github.com/users/kzwang","html_url":"https://github.com/kzwang","followers_url":"https://api.github.com/users/kzwang/followers","following_url":"https://api.github.com/users/kzwang/following{/other_user}","gists_url":"https://api.github.com/users/kzwang/gists{/gist_id}","starred_url":"https://api.github.com/users/kzwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kzwang/subscriptions","organizations_url":"https://api.github.com/users/kzwang/orgs","repos_url":"https://api.github.com/users/kzwang/repos","events_url":"https://api.github.com/users/kzwang/events{/privacy}","received_events_url":"https://api.github.com/users/kzwang/received_events","type":"User","site_admin":false},"performed_via_github_app":null}