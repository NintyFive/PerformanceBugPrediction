[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188201783","html_url":"https://github.com/elastic/elasticsearch/issues/16793#issuecomment-188201783","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16793","id":188201783,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODIwMTc4Mw==","user":{"login":"jrots","id":195346,"node_id":"MDQ6VXNlcjE5NTM0Ng==","avatar_url":"https://avatars1.githubusercontent.com/u/195346?v=4","gravatar_id":"","url":"https://api.github.com/users/jrots","html_url":"https://github.com/jrots","followers_url":"https://api.github.com/users/jrots/followers","following_url":"https://api.github.com/users/jrots/following{/other_user}","gists_url":"https://api.github.com/users/jrots/gists{/gist_id}","starred_url":"https://api.github.com/users/jrots/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrots/subscriptions","organizations_url":"https://api.github.com/users/jrots/orgs","repos_url":"https://api.github.com/users/jrots/repos","events_url":"https://api.github.com/users/jrots/events{/privacy}","received_events_url":"https://api.github.com/users/jrots/received_events","type":"User","site_admin":false},"created_at":"2016-02-24T11:18:41Z","updated_at":"2016-02-24T11:18:50Z","author_association":"NONE","body":"Ok seems like #16789 is related and I'm not the only one experiencing this\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188356614","html_url":"https://github.com/elastic/elasticsearch/issues/16793#issuecomment-188356614","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16793","id":188356614,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODM1NjYxNA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-02-24T17:09:35Z","updated_at":"2016-02-24T17:09:35Z","author_association":"CONTRIBUTOR","body":"Hey @jrots thanks for reporting this, lemme ask some questions:\n-  do you still have that \"corrupt_\" file by any chance? \n- Can you also check you logs to tell what lead to this corruption in the first place? \n- Did you have replicas before and one of them got corrupted? \n- Do you know when that corruption file was written vs. when the index files were written?\n- have you done a restore by any chance?\n\nthanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188439052","html_url":"https://github.com/elastic/elasticsearch/issues/16793#issuecomment-188439052","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16793","id":188439052,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODQzOTA1Mg==","user":{"login":"jrots","id":195346,"node_id":"MDQ6VXNlcjE5NTM0Ng==","avatar_url":"https://avatars1.githubusercontent.com/u/195346?v=4","gravatar_id":"","url":"https://api.github.com/users/jrots","html_url":"https://github.com/jrots","followers_url":"https://api.github.com/users/jrots/followers","following_url":"https://api.github.com/users/jrots/following{/other_user}","gists_url":"https://api.github.com/users/jrots/gists{/gist_id}","starred_url":"https://api.github.com/users/jrots/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrots/subscriptions","organizations_url":"https://api.github.com/users/jrots/orgs","repos_url":"https://api.github.com/users/jrots/repos","events_url":"https://api.github.com/users/jrots/events{/privacy}","received_events_url":"https://api.github.com/users/jrots/received_events","type":"User","site_admin":false},"created_at":"2016-02-24T20:20:19Z","updated_at":"2016-02-24T20:20:19Z","author_association":"NONE","body":"Hi @s1monw \n- afraid I have deleted the corrupt file :/ If it would reoccur I'll make sure I have a copy of it. \n- log file of when it occurred : https://gist.github.com/MassiveMedia/18014fc75c7fbd6cf0eb\n- I didn't have any replicas enabled on that index.. so can't answer on that one \n- no afraid I didn't do an `ls -lsha` at that time, just a simple `ls` .. :/ so can't provide you that info.. will keep this in mind when it would happen again. \n- no I didn't do a restore \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188467093","html_url":"https://github.com/elastic/elasticsearch/issues/16793#issuecomment-188467093","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16793","id":188467093,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODQ2NzA5Mw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-02-24T21:48:03Z","updated_at":"2016-02-24T21:48:03Z","author_association":"CONTRIBUTOR","body":"@jrots I have the suspicion that this is a compression bug in lucene. Do you see any chance to upload this shards index somewhere so we can investigate.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188467416","html_url":"https://github.com/elastic/elasticsearch/issues/16793#issuecomment-188467416","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16793","id":188467416,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODQ2NzQxNg==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-02-24T21:49:04Z","updated_at":"2016-02-24T21:49:04Z","author_association":"CONTRIBUTOR","body":"@jpountz @rmuir @mikemccand just pinging you here to get your attention as well\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188471830","html_url":"https://github.com/elastic/elasticsearch/issues/16793#issuecomment-188471830","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16793","id":188471830,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODQ3MTgzMA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-02-24T22:01:54Z","updated_at":"2016-02-24T22:01:54Z","author_association":"CONTRIBUTOR","body":"Hmm that looks like a bug in the index on top of stored fields. Maybe an overflow?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188492496","html_url":"https://github.com/elastic/elasticsearch/issues/16793#issuecomment-188492496","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16793","id":188492496,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODQ5MjQ5Ng==","user":{"login":"jrots","id":195346,"node_id":"MDQ6VXNlcjE5NTM0Ng==","avatar_url":"https://avatars1.githubusercontent.com/u/195346?v=4","gravatar_id":"","url":"https://api.github.com/users/jrots","html_url":"https://github.com/jrots","followers_url":"https://api.github.com/users/jrots/followers","following_url":"https://api.github.com/users/jrots/following{/other_user}","gists_url":"https://api.github.com/users/jrots/gists{/gist_id}","starred_url":"https://api.github.com/users/jrots/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrots/subscriptions","organizations_url":"https://api.github.com/users/jrots/orgs","repos_url":"https://api.github.com/users/jrots/repos","events_url":"https://api.github.com/users/jrots/events{/privacy}","received_events_url":"https://api.github.com/users/jrots/received_events","type":"User","site_admin":false},"created_at":"2016-02-24T22:39:59Z","updated_at":"2016-02-24T22:44:38Z","author_association":"NONE","body":"Ok I've uploaded the index, but I rather not post the link here as it contains some sensitive data. Is there an email adres I can sent it to?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188494634","html_url":"https://github.com/elastic/elasticsearch/issues/16793#issuecomment-188494634","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16793","id":188494634,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODQ5NDYzNA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-02-24T22:48:01Z","updated_at":"2016-02-24T22:48:01Z","author_association":"CONTRIBUTOR","body":"you can send it to simon at elastic dot co\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188509754","html_url":"https://github.com/elastic/elasticsearch/issues/16793#issuecomment-188509754","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16793","id":188509754,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODUwOTc1NA==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2016-02-24T23:17:08Z","updated_at":"2016-02-24T23:17:08Z","author_association":"CONTRIBUTOR","body":"It does sounds like maybe a Lucene bug, especially if `CheckIndex` can't find anything wrong with the segment, but a search thread did.  The JVM is modern (1.8.0_66).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188675387","html_url":"https://github.com/elastic/elasticsearch/issues/16793#issuecomment-188675387","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16793","id":188675387,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODY3NTM4Nw==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2016-02-25T08:57:45Z","updated_at":"2016-02-25T08:57:45Z","author_association":"CONTRIBUTOR","body":"Hi @jrots, I ran `CheckIndex` from both 5.4.x and 5.5.x Lucene on your index, but it did in fact detect a checksum mismatch on that one segment (`_69l`): https://gist.github.com/mikemccand/1be773920096ede16481\n\nAlso, this index has 33 segments but your `CheckIndex` output shows 19.\n\nAre you sure you copied up exactly the same index you had successfully run `CheckIndex` on?  Otherwise I can't explain why your `CheckIndex` runs fine but when I run it, it detects corruption.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188730094","html_url":"https://github.com/elastic/elasticsearch/issues/16793#issuecomment-188730094","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16793","id":188730094,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODczMDA5NA==","user":{"login":"jrots","id":195346,"node_id":"MDQ6VXNlcjE5NTM0Ng==","avatar_url":"https://avatars1.githubusercontent.com/u/195346?v=4","gravatar_id":"","url":"https://api.github.com/users/jrots","html_url":"https://github.com/jrots","followers_url":"https://api.github.com/users/jrots/followers","following_url":"https://api.github.com/users/jrots/following{/other_user}","gists_url":"https://api.github.com/users/jrots/gists{/gist_id}","starred_url":"https://api.github.com/users/jrots/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrots/subscriptions","organizations_url":"https://api.github.com/users/jrots/orgs","repos_url":"https://api.github.com/users/jrots/repos","events_url":"https://api.github.com/users/jrots/events{/privacy}","received_events_url":"https://api.github.com/users/jrots/received_events","type":"User","site_admin":false},"created_at":"2016-02-25T11:03:53Z","updated_at":"2016-02-25T11:03:53Z","author_association":"NONE","body":"Hi, \nWell the index data was from almost 10 hours after I removed the _corrupted file.. and there have been updates to the data in that index in the meanwhile. So could be that the segment was merged internally already. I also copied the data with a simple `cp` command while elastic was still running, which probably was not the best idea (need to shutdown the node first). \nIf I run `CheckIndex` on that copied data I also get the same warning, https://gist.github.com/jrots/c4087c8fab52a81d346d\nI made a new backup now of this shard, while ES was shutdown and `CheckIndex` also ran fine on it.. \nbut it probably doesn't make sense to send you that data over? \nIf I ever hit this issue again, I'll make sure I make a backup of the data at that point. Because atm it's probably hard to investigate what exactly was corrupt. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191391191","html_url":"https://github.com/elastic/elasticsearch/issues/16793#issuecomment-191391191","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16793","id":191391191,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTM5MTE5MQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-03-02T19:38:02Z","updated_at":"2016-03-02T19:38:02Z","author_association":"CONTRIBUTOR","body":"I think it turns out that the index is actually corrupted @mikemccand checkindex failed for you on the shard no? I am closing for now\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191421337","html_url":"https://github.com/elastic/elasticsearch/issues/16793#issuecomment-191421337","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16793","id":191421337,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTQyMTMzNw==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2016-03-02T20:44:00Z","updated_at":"2016-03-02T20:44:00Z","author_association":"CONTRIBUTOR","body":"> @mikemccand checkindex failed for you on the shard no\n\nYeah.\n","performed_via_github_app":null}]