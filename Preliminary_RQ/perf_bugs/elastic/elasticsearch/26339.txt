{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26339","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26339/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26339/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26339/events","html_url":"https://github.com/elastic/elasticsearch/issues/26339","id":252230074,"node_id":"MDU6SXNzdWUyNTIyMzAwNzQ=","number":26339,"title":"Indexing performance degradation in 6.0.0-beta1","user":{"login":"muralikpbhat","id":9718411,"node_id":"MDQ6VXNlcjk3MTg0MTE=","avatar_url":"https://avatars3.githubusercontent.com/u/9718411?v=4","gravatar_id":"","url":"https://api.github.com/users/muralikpbhat","html_url":"https://github.com/muralikpbhat","followers_url":"https://api.github.com/users/muralikpbhat/followers","following_url":"https://api.github.com/users/muralikpbhat/following{/other_user}","gists_url":"https://api.github.com/users/muralikpbhat/gists{/gist_id}","starred_url":"https://api.github.com/users/muralikpbhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muralikpbhat/subscriptions","organizations_url":"https://api.github.com/users/muralikpbhat/orgs","repos_url":"https://api.github.com/users/muralikpbhat/repos","events_url":"https://api.github.com/users/muralikpbhat/events{/privacy}","received_events_url":"https://api.github.com/users/muralikpbhat/received_events","type":"User","site_admin":false},"labels":[{"id":836542781,"node_id":"MDU6TGFiZWw4MzY1NDI3ODE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Engine","name":":Distributed/Engine","color":"0e8a16","default":false,"description":"Anything around managing Lucene and the Translog in an open shard."},{"id":30486044,"node_id":"MDU6TGFiZWwzMDQ4NjA0NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eregression","name":">regression","color":"d7e102","default":false,"description":null},{"id":356863226,"node_id":"MDU6TGFiZWwzNTY4NjMyMjY=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Pioneer%20Program","name":"Pioneer Program","color":"b60205","default":false,"description":null},{"id":654498781,"node_id":"MDU6TGFiZWw2NTQ0OTg3ODE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.0.0-beta1","name":"v6.0.0-beta1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":19,"created_at":"2017-08-23T10:12:21Z","updated_at":"2018-02-14T14:07:21Z","closed_at":"2017-09-25T06:54:36Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Feature request -->\r\n\r\n**Describe the feature**: Indexing performance\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): 6.0.0-beta1\r\n\r\n**Plugins installed**: none\r\n\r\n**JVM version** (`java -version`): openjdk version \"1.8.0_131\"\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): Linux  4.9.32-15.41.amzn1.x86_64 # 1 SMP Thu Jun 22 06:20:54 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Host**:  i3.16xl EC2 instance with 31GB heap configured, indexing buffer size of 50%, and data.path spread across 8 disks.\r\n\r\n**Description of the problem including expected versus actual behavior**: Indexing throughput is degraded by up to 50% compared to 5.5.2. Seeing hotspots in LocalCheckpointTracker.margSeqNoAsCompleted(), generetaSeqNo() etc. Following shows the results for different tracks :\r\n\r\nES   versions | 5.5.2 | 6.0.0-beta1\r\n-- | -- | --\r\ngenomes | 178940 docs/s  |  88310   docs/s  \r\nnyc_taxis | 208638 docs/s   | 150481  docs/s  \r\nlogging | 363691   docs/s    | 289247   docs/s \r\n\r\n**Steps to reproduce**:\r\n\r\n1. Restrict the rally challenge of each track to the following:\r\n{\r\n      \"name\": \"append-no-conflicts-just-index\",\r\n      \"description\": \"benchmark\",\r\n      \"index-settings\": {\r\n        \"index.number_of_replicas\": 0,\r\n        \"index.number_of_shards\": 8,\r\n        \"index.refresh_interval\": \"100s\",\r\n        \"index.translog.flush_threshold_size\": \"4gb\",\r\n        \"index.translog.durability\": \"async\",\r\n        \"index.translog.sync_interval\": \"240s\"\r\n        },\r\n      \"schedule\": [\r\n        {\r\n          \"operation\": \"index\",\r\n          \"warmup-time-period\": 240,\r\n          \"clients\": 48\r\n        }\r\n      ]\r\n    }\r\n\r\n2. Run the challenge against 5.5.2 and 6.0.0-beta1 versions. \r\nesrally --pipeline benchmark-only --track=nyc_taxis --challenge append-no-conflicts-just-index --target-hosts=XX.XX.XX.XX:9200","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}