[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/386577566","html_url":"https://github.com/elastic/elasticsearch/issues/30385#issuecomment-386577566","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30385","id":386577566,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NjU3NzU2Ng==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2018-05-04T11:49:51Z","updated_at":"2018-05-04T11:49:51Z","author_association":"MEMBER","body":"I'm surprised by this. I'm using myself the bulk processor from the high level rest client and I can easily index locally 12k+ doc/s. \r\nYou should open a discussion on discuss.elastic.co where we can better help I think.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387025305","html_url":"https://github.com/elastic/elasticsearch/issues/30385#issuecomment-387025305","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30385","id":387025305,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzAyNTMwNQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2018-05-07T10:31:48Z","updated_at":"2018-05-07T10:31:48Z","author_association":"MEMBER","body":"hi @kervin521 , where do you measure the times that you posted?\r\n\r\nIt is expected that the high-level client is not as fast as the low-level client, as it uses the same low-level client that you have in your code but it also serializes the bulk request and parses back the bulk response. That said, the difference that you see is quite big so we do want to understand what causes it.\r\n\r\nDo you use the same low-level client instance for the comparison in both scenarios? Why did you set the IOThreadCount to 100? Also, have you looked at the BulkProcessor? That one is much handier for bulk requests when using the high-level REST client.  See https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-document-bulk.html#java-rest-high-document-bulk-processor .\r\n\r\n@danielmitterdorfer time to work on a benchmark for the high-level REST client :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387025995","html_url":"https://github.com/elastic/elasticsearch/issues/30385#issuecomment-387025995","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30385","id":387025995,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzAyNTk5NQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2018-05-07T10:35:13Z","updated_at":"2018-05-07T10:35:13Z","author_association":"MEMBER","body":"Also, @kervin521 note that if you already use a json library, it makes little sense to take the json, convert it into a string and feed the high-level client with that string. That's certainly going to slow things down, and that's also why I asked where you measured those times, I don't see log lines in your code or variables to keep track of time. Another question, could you post your bulk request? How many items is it made of?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387026042","html_url":"https://github.com/elastic/elasticsearch/issues/30385#issuecomment-387026042","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30385","id":387026042,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzAyNjA0Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-07T10:35:27Z","updated_at":"2018-05-07T10:35:27Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402135766","html_url":"https://github.com/elastic/elasticsearch/issues/30385#issuecomment-402135766","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30385","id":402135766,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjEzNTc2Ng==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2018-07-03T12:19:37Z","updated_at":"2018-07-03T12:19:37Z","author_association":"MEMBER","body":"Closing this for lack of feedback. Would be nice to have some of the info we asked for, so we can better understand what caused the performance issue. Feel free to reopen if/once you get back to this with the needed info.","performed_via_github_app":null}]