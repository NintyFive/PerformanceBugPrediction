{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/21583","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21583/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21583/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21583/events","html_url":"https://github.com/elastic/elasticsearch/issues/21583","id":189504259,"node_id":"MDU6SXNzdWUxODk1MDQyNTk=","number":21583,"title":"Performance Regression on Bulk Insert from 1.7.5 to 5.0.0","user":{"login":"sallgeud","id":3811646,"node_id":"MDQ6VXNlcjM4MTE2NDY=","avatar_url":"https://avatars3.githubusercontent.com/u/3811646?v=4","gravatar_id":"","url":"https://api.github.com/users/sallgeud","html_url":"https://github.com/sallgeud","followers_url":"https://api.github.com/users/sallgeud/followers","following_url":"https://api.github.com/users/sallgeud/following{/other_user}","gists_url":"https://api.github.com/users/sallgeud/gists{/gist_id}","starred_url":"https://api.github.com/users/sallgeud/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sallgeud/subscriptions","organizations_url":"https://api.github.com/users/sallgeud/orgs","repos_url":"https://api.github.com/users/sallgeud/repos","events_url":"https://api.github.com/users/sallgeud/events{/privacy}","received_events_url":"https://api.github.com/users/sallgeud/received_events","type":"User","site_admin":false},"labels":[{"id":145572580,"node_id":"MDU6TGFiZWwxNDU1NzI1ODA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/CRUD","name":":Distributed/CRUD","color":"0e8a16","default":false,"description":"A catch all label for issues around indexing, updating and getting a doc by id. Not search."},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2016-11-15T20:56:14Z","updated_at":"2018-02-13T19:39:17Z","closed_at":"2017-03-31T14:46:19Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: 5.0.0\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version**: 1.8.0\r\n\r\n**OS version**: Windows Server 2012 R2\r\n\r\n**Description of the problem including expected versus actual behavior**: While upgrading our code from 1.7.5 to 5.0.0, we performed our standard set of indexing tests. Most regular, single item indexing tasks appears to be as quick as before (though we can't be entirely sure, because it's so fast). However, bulk indexing of 50 at a time, in a highly multi-threaded environment was approximately 55% slower in 5.0 than it is in 1.7.\r\n\r\nWe are unable to determine if this might be related to the underlying C# driver. However, ANTS suggests we're not using more CPU clocks other than waiting. We are using the LowLevel client (Formerly known as Raw), and submitting raw JSON. As such, the only changes between the two tests were the driver and the version of elasticsearch\r\n\r\n**Steps to reproduce**:\r\n 1. Write code with NEST 1.7 and Elastic 1.7 to multi-thread a bulk insert across several multi-dimensional types in the same index\r\n 2. Test\r\n 3. Modify the written code to work with NEST 5.0 and Elastic 5.0 and repeat \r\n\r\n**Provide logs (if relevant)**: The logs only include basic information about new type mappings being created. No errors or other information. ","closed_by":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"performed_via_github_app":null}