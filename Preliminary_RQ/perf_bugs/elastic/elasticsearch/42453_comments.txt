[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/495285818","html_url":"https://github.com/elastic/elasticsearch/issues/42453#issuecomment-495285818","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42453","id":495285818,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NTI4NTgxOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-05-23T16:14:46Z","updated_at":"2019-05-23T16:14:46Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/495299659","html_url":"https://github.com/elastic/elasticsearch/issues/42453#issuecomment-495299659","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42453","id":495299659,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NTI5OTY1OQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2019-05-23T16:54:40Z","updated_at":"2019-05-23T16:54:40Z","author_association":"MEMBER","body":"I think the buildexample plugins IT needs to be removed. It should be a separate type of test, done within each plugin example. and it shouldn't run tests, it should only run compilation because it's all about whether the project will build once it is extracted into its own project. Right now we are running all the example plugin tests (including integ test clusters) twice, but due to dependency ordering, the first time is within this monster \"example plugins IT\" and it has zero visibility into what actually goes wrong.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/495300565","html_url":"https://github.com/elastic/elasticsearch/issues/42453#issuecomment-495300565","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42453","id":495300565,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NTMwMDU2NQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2019-05-23T16:57:16Z","updated_at":"2019-05-23T16:57:16Z","author_association":"MEMBER","body":"Additionally, I think there should not be any dependency within build-tools on a built version of ES. All the integ tests need to use dummy/mock distributions/tools and such to test eg whether testclusters works. These need to be lightweight tests that get us 95% of the way to have confidence the build infrastructure will work. If we have gaps, they will be covered by the actual build running.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/495301252","html_url":"https://github.com/elastic/elasticsearch/issues/42453#issuecomment-495301252","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42453","id":495301252,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NTMwMTI1Mg==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-05-23T16:59:24Z","updated_at":"2019-05-23T16:59:24Z","author_association":"CONTRIBUTOR","body":"> These need to be lightweight tests that get us 95% of the way to have confidence the build infrastructure will work.\r\n\r\nAbsolutely. We need to mock out as much of this stuff as possible for these tests. Right now they are _way_ too heavy. We are essentially running a ton of mini ES builds as part of this test suite.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/496091123","html_url":"https://github.com/elastic/elasticsearch/issues/42453#issuecomment-496091123","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42453","id":496091123,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjA5MTEyMw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-05-27T06:14:16Z","updated_at":"2019-05-27T06:14:16Z","author_association":"CONTRIBUTOR","body":"Build example plugins also tests that build-tools works when applied to an external project. \r\nThis is also something we will have to cover when we remove it.\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/501304928","html_url":"https://github.com/elastic/elasticsearch/issues/42453#issuecomment-501304928","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42453","id":501304928,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTMwNDkyOA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-06-12T14:41:37Z","updated_at":"2019-06-12T14:41:37Z","author_association":"CONTRIBUTOR","body":"After giving it more taught, i think we do need to run tests for example plugins, or at least for one of them, we don't have a way to test that the  infrastructure to do so ( cluster formation, testclsuters, etc ) works when used in an external project. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/501387715","html_url":"https://github.com/elastic/elasticsearch/issues/42453#issuecomment-501387715","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42453","id":501387715,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTM4NzcxNQ==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-06-12T17:58:27Z","updated_at":"2019-06-12T17:58:27Z","author_association":"CONTRIBUTOR","body":"I'm fine with keeping the coverage in some form. But it should be outside of normal of the normal CI intake pipeline so we aren't paying that cost for the majority of work that doesn't affect `build-tools`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/501563082","html_url":"https://github.com/elastic/elasticsearch/issues/42453#issuecomment-501563082","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42453","id":501563082,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTU2MzA4Mg==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-06-13T06:11:50Z","updated_at":"2019-06-13T06:11:50Z","author_association":"CONTRIBUTOR","body":"I'm not entirely convinced. One could make a point for a number of other features or plugins resulting in each plugin having it's own CI setup.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/501766431","html_url":"https://github.com/elastic/elasticsearch/issues/42453#issuecomment-501766431","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42453","id":501766431,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTc2NjQzMQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2019-06-13T16:01:07Z","updated_at":"2019-06-13T16:01:07Z","author_association":"MEMBER","body":"I agree with @mark-vieira this should be a separate CI job. This is not something likely to break very often. We can have simple integ tests that check the build tools work as expected which are run always, that use fake projects in testkit, mimicking external behavior, and have a separate test task for running the example plugins builds in this way. This is similar to how we have `packagingTest` that is not run for most builds. The new test task can also be triggered on PRs by using the `:Core/Infra/Build` label, like how we trigger full packaging tests for `:Core/Infra/Packaging` PRs.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/501771299","html_url":"https://github.com/elastic/elasticsearch/issues/42453#issuecomment-501771299","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42453","id":501771299,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTc3MTI5OQ==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-06-13T16:13:23Z","updated_at":"2019-06-13T16:13:23Z","author_association":"CONTRIBUTOR","body":"> One could make a point for a number of other features or plugins resulting in each plugin having it's own CI setup.\r\n\r\nYou say this in jest, but honestly I would be in favor of moving this direction and away from such a monolithic CI setup as we have now üòâ ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/501771638","html_url":"https://github.com/elastic/elasticsearch/issues/42453#issuecomment-501771638","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42453","id":501771638,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTc3MTYzOA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-06-13T16:14:12Z","updated_at":"2019-06-13T16:14:12Z","author_association":"CONTRIBUTOR","body":"> The new test task can also be triggered on PRs by using the :Core/Infra/Build label, like how we trigger full packaging tests for :Core/Infra/Packaging PRs.\r\n\r\nüëç ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/540470118","html_url":"https://github.com/elastic/elasticsearch/issues/42453#issuecomment-540470118","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42453","id":540470118,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDQ3MDExOA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-10T08:54:38Z","updated_at":"2019-10-10T08:54:38Z","author_association":"CONTRIBUTOR","body":"Closing this as we switched to unit tests","performed_via_github_app":null}]