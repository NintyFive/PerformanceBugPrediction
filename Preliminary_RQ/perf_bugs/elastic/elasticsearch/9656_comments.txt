[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73931232","html_url":"https://github.com/elastic/elasticsearch/issues/9656#issuecomment-73931232","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9656","id":73931232,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTMxMjMy","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-02-11T18:05:56Z","updated_at":"2015-02-11T18:05:56Z","author_association":"CONTRIBUTOR","body":"Here's a first cut: https://github.com/mikemccand/elasticsearch/commit/5b7b9a50359ac902b45a9790f317ff166a3e3f84\n\nI added a new setting \"index.store.fs.log_slow_io\", defaults to false.  If you set it to true, we wrap with SlowIOLoggingDirectoryWrapper which logs if any ops take >= 50 msec.\n\nI only log the Directory ops and not ops off of the IndexInput/Output opened from the wrapped directory for starters.\n\nWe could also extend this to do metrics tracking and expose them in node stats but I think that's a bigger change...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73932272","html_url":"https://github.com/elastic/elasticsearch/issues/9656#issuecomment-73932272","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9656","id":73932272,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTMyMjcy","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-02-11T18:11:31Z","updated_at":"2015-02-11T18:11:31Z","author_association":"CONTRIBUTOR","body":"One concern i have is when its not slowness of any individual operation, but instead the aggregate. This could happen if File.exists() takes 6ms but something calls it for 10,000 files. I know this means adding some counters but it would be great if we could do something for this case.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73933051","html_url":"https://github.com/elastic/elasticsearch/issues/9656#issuecomment-73933051","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9656","id":73933051,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTMzMDUx","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-02-11T18:15:58Z","updated_at":"2015-02-11T18:15:58Z","author_association":"MEMBER","body":"@rmuir I believe that was part of the plan - add counters for total ops  / total time  and capture any above >Xms op . \n\n@mikemccand i'll do my best look asap . Can't do it in the coming hours. I think the the IndexInput/output is important for what we need now.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73939732","html_url":"https://github.com/elastic/elasticsearch/issues/9656#issuecomment-73939732","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9656","id":73939732,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTM5NzMy","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-02-11T18:51:36Z","updated_at":"2015-02-11T18:51:36Z","author_association":"CONTRIBUTOR","body":"> One concern i have is when its not slowness of any individual operation, but instead the aggregate.\n\nI agree this is a limitation with the \"log horribly slow single events only\" approach, but I'm leary of adding lots of low-level node stats here.  It would be N ops \\* M shards \\* O store.data's of raw stats.\n\nAdditional node stats have a real cost, that all future users who look at node stats will now see them, have to dig through them trying to figure out if the results are good or bad or what.\n\nThat said, since this would be opt-in, maybe it's OK?\n\nOr, then again, if you run ES on a box with horribly slow IO ... things will be slow.  There are OS-level tools for watching IO performance...\n\n>  I think the the IndexInput/output is important for what we need now.\n\nThinking about this more ... it worries me: I think wrapping at this level can impact indexing and searching performance.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/94722956","html_url":"https://github.com/elastic/elasticsearch/issues/9656#issuecomment-94722956","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9656","id":94722956,"node_id":"MDEyOklzc3VlQ29tbWVudDk0NzIyOTU2","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-04-21T09:44:35Z","updated_at":"2015-04-21T09:44:35Z","author_association":"CONTRIBUTOR","body":"Won't fix ...\n","performed_via_github_app":null}]