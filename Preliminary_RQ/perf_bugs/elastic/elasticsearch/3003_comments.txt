[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17526427","html_url":"https://github.com/elastic/elasticsearch/issues/3003#issuecomment-17526427","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3003","id":17526427,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NTI2NDI3","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-05-07T07:00:19Z","updated_at":"2013-05-07T07:00:19Z","author_association":"CONTRIBUTOR","body":"Hey,\n\ncould it be that your `search_type` makes a difference here:\n\n`curl -XGET 'http://127.0.0.1:9200/meercat/parent/_search?scroll=1m&pretty=1&search_type=scan'` \nvs.\n`curl -XGET 'http://127.0.0.1:9200/meercat/parent/_search?scroll=1m&pretty=1&search_type=query_then_fetch'`\n\nthe scan execution is by definition much faster since it stops collection once it has enough docs found while `query_then_fetch` scores all matching docs and takes the the top N.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17527402","html_url":"https://github.com/elastic/elasticsearch/issues/3003#issuecomment-17527402","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3003","id":17527402,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NTI3NDAy","user":{"login":"nicolasfranck","id":494636,"node_id":"MDQ6VXNlcjQ5NDYzNg==","avatar_url":"https://avatars0.githubusercontent.com/u/494636?v=4","gravatar_id":"","url":"https://api.github.com/users/nicolasfranck","html_url":"https://github.com/nicolasfranck","followers_url":"https://api.github.com/users/nicolasfranck/followers","following_url":"https://api.github.com/users/nicolasfranck/following{/other_user}","gists_url":"https://api.github.com/users/nicolasfranck/gists{/gist_id}","starred_url":"https://api.github.com/users/nicolasfranck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicolasfranck/subscriptions","organizations_url":"https://api.github.com/users/nicolasfranck/orgs","repos_url":"https://api.github.com/users/nicolasfranck/repos","events_url":"https://api.github.com/users/nicolasfranck/events{/privacy}","received_events_url":"https://api.github.com/users/nicolasfranck/received_events","type":"User","site_admin":false},"created_at":"2013-05-07T07:28:37Z","updated_at":"2013-05-07T07:28:37Z","author_association":"NONE","body":"Thanks for your quick reply!\n\nYes, that sounds reasonable. But we cannot set the search_type to \"scan\" because of the sorting we would\nlike to apply. Probably the weight of the index is an issue here. Thanks anyway!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17527489","html_url":"https://github.com/elastic/elasticsearch/issues/3003#issuecomment-17527489","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3003","id":17527489,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NTI3NDg5","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-05-07T07:31:45Z","updated_at":"2013-05-07T07:31:45Z","author_association":"MEMBER","body":"@nicolasfranck one thing to note is that hte first time you execute the search request on a shard with has_child / sort, it requires loading data into memory (the sort values, and the ids for the has_child query/filter, regardless of the query values itself). So, make sure execute it a few times and then see how long it takes. To make sure those are loaded in the background for a live index (that keeps on being indexed to), you can use the warmers feature.\n","performed_via_github_app":null}]