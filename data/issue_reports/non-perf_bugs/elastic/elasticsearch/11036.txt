{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/11036","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11036/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11036/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11036/events","html_url":"https://github.com/elastic/elasticsearch/issues/11036","id":73972785,"node_id":"MDU6SXNzdWU3Mzk3Mjc4NQ==","number":11036,"title":"GET /pattern-*/_mapping/field/* kills the server","user":{"login":"zde","id":644743,"node_id":"MDQ6VXNlcjY0NDc0Mw==","avatar_url":"https://avatars2.githubusercontent.com/u/644743?v=4","gravatar_id":"","url":"https://api.github.com/users/zde","html_url":"https://github.com/zde","followers_url":"https://api.github.com/users/zde/followers","following_url":"https://api.github.com/users/zde/following{/other_user}","gists_url":"https://api.github.com/users/zde/gists{/gist_id}","starred_url":"https://api.github.com/users/zde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zde/subscriptions","organizations_url":"https://api.github.com/users/zde/orgs","repos_url":"https://api.github.com/users/zde/repos","events_url":"https://api.github.com/users/zde/events{/privacy}","received_events_url":"https://api.github.com/users/zde/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-05-07T12:40:01Z","updated_at":"2015-05-07T13:19:56Z","closed_at":"2015-05-07T13:19:55Z","author_association":"NONE","active_lock_reason":null,"body":"# server\n\n  \"version\" : {\n    \"number\" : \"1.4.4\",\n    \"build_hash\" : \"c88f77ffc81301dfa9dfd81ca2232f09588bd512\",\n    \"build_timestamp\" : \"2015-02-19T13:05:36Z\",\n    \"build_snapshot\" : false,\n    \"lucene_version\" : \"4.10.3\"\n  },\n#1. put a template with some type=nested properties\n\n$ curl -X PUT localhost:9200/_template/salesorder --data-binary @salesorder.mapping\n{\"acknowledged\":true}\n#2. add some documents (1681 documents in 96 salesorder-\\* indexes)\n\n$ for i in data*; do curl localhost:9200/_bulk --data-binary @$i; done\n$ curl 2>/dev/null localhost:9200/_aliases?format=yaml|grep ^salesorder-|wc -l\n96\n#3. run this request (used by kibana4 metadata discovery)\n\n$ curl 'localhost:9200/salesorder-*/_mapping/field/*?ignore_unavailable=false&allow_no_indices=false&include_defaults=true'\n\nServer immediately becomes irresponsive, java process rss size hits the roof and after some time this starts showing up in the log:\n\n[2015-05-07 05:06:11,806][DEBUG][action.admin.indices.mapping.get] [Soldier X] failed to execute [org.elasticsearch.action.admin.indices.mapping.get.GetFieldMappingsIndexRequest@3844bde7]\njava.lang.OutOfMemoryError: Java heap space\n","closed_by":{"login":"zde","id":644743,"node_id":"MDQ6VXNlcjY0NDc0Mw==","avatar_url":"https://avatars2.githubusercontent.com/u/644743?v=4","gravatar_id":"","url":"https://api.github.com/users/zde","html_url":"https://github.com/zde","followers_url":"https://api.github.com/users/zde/followers","following_url":"https://api.github.com/users/zde/following{/other_user}","gists_url":"https://api.github.com/users/zde/gists{/gist_id}","starred_url":"https://api.github.com/users/zde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zde/subscriptions","organizations_url":"https://api.github.com/users/zde/orgs","repos_url":"https://api.github.com/users/zde/repos","events_url":"https://api.github.com/users/zde/events{/privacy}","received_events_url":"https://api.github.com/users/zde/received_events","type":"User","site_admin":false},"performed_via_github_app":null}