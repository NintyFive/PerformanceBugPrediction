{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1123","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1123/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1123/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1123/events","html_url":"https://github.com/elastic/elasticsearch/issues/1123","id":1228805,"node_id":"MDU6SXNzdWUxMjI4ODA1","number":1123,"title":"problematic queries with normal search","user":{"login":"medcl","id":64487,"node_id":"MDQ6VXNlcjY0NDg3","avatar_url":"https://avatars0.githubusercontent.com/u/64487?v=4","gravatar_id":"","url":"https://api.github.com/users/medcl","html_url":"https://github.com/medcl","followers_url":"https://api.github.com/users/medcl/followers","following_url":"https://api.github.com/users/medcl/following{/other_user}","gists_url":"https://api.github.com/users/medcl/gists{/gist_id}","starred_url":"https://api.github.com/users/medcl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/medcl/subscriptions","organizations_url":"https://api.github.com/users/medcl/orgs","repos_url":"https://api.github.com/users/medcl/repos","events_url":"https://api.github.com/users/medcl/events{/privacy}","received_events_url":"https://api.github.com/users/medcl/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2011-07-15T07:12:11Z","updated_at":"2011-07-18T01:47:58Z","closed_at":"2011-07-18T01:47:58Z","author_association":"MEMBER","active_lock_reason":null,"body":"that happends under version 0.16.2\n\nworks fine：\n\ncurl -XDELETE localhost:9200/index2\ncurl -XPOST http://localhost:9200/index2/bc8c7a80c2fc4d629de3ec6b9f59ba95/0a219cd6a07b410fa73eb11b47e3d6a9 -d'{  \"_tenantid\": 100001}'\ncurl -XPOST http://localhost:9200/index2/bc8c7a80c2fc4d629de3ec6b9f59ba95/0045e39df84b47adb154644ee1b1c513 -d'{  \"_tenantid\": 100001}'\ncurl -XPOST http://localhost:9200/index2/bc8c7a80c2fc4d629de3ec6b9f59ba95/0cf2b835275a48ef8769a5eac7569756 -d'{  \"_tenantid\": 100001}'\ncurl -XGET http://localhost:9200/index2/bc8c7a80c2fc4d629de3ec6b9f59ba95/_search?q=_tenantid:100001\n{\"took\":10,\"timed_out\":false,\"_shards\":{\"total\":3,\"successful\":3,\"failed\":0},\"hi\nts\":{\"total\":3,\"max_score\":1.0,\"hits\":[{\"_index\":\"index2\",\"_type\":\"bc8c7a80c2fc4\nd629de3ec6b9f59ba95\",\"_id\":\"0045e39df84b47adb154644ee1b1c513\",\"_score\":1.0, \"_so\nurce\" : {  \"_tenantid\": 100001}},{\"_index\":\"index2\",\"_type\":\"bc8c7a80c2fc4d629de\n3ec6b9f59ba95\",\"_id\":\"0cf2b835275a48ef8769a5eac7569756\",\"_score\":1.0, \"_source\"\n: {  \"_tenantid\": 100001}},{\"_index\":\"index2\",\"_type\":\"bc8c7a80c2fc4d629de3ec6b9\nf59ba95\",\"_id\":\"0a219cd6a07b410fa73eb11b47e3d6a9\",\"_score\":1.0, \"_source\" : {  \"\n_tenantid\": 100001}}]}}\n\nand here are the problematic queries：\n\ncurl -XDELETE localhost:9200/index2\n\ncurl -XPOST http://localhost:9200/index2/e3ebce3f49624eae9993031e391ae877/05a1dd8eb70a4e01908a836d14929dfe -d'{  \"_tenantid\": \"201276\"}'\ncurl -XPOST http://localhost:9200/index2/7544eeae89f945af9e34299f657130b0/8def98cc942b46f9bff4e50c16178ba3 -d'{  \"_tenantid\": \"201276\"}'\ncurl -XPOST http://localhost:9200/index2/e3ebce3f49624eae9993031e391ae877/a61f84b9c2254e4ea9bda2b0585f180e -d'{  \"_tenantid\": 100001}'\n\ncurl -XPOST http://localhost:9200/index2/bc8c7a80c2fc4d629de3ec6b9f59ba95/0a219cd6a07b410fa73eb11b47e3d6a9 -d'{  \"_tenantid\": 100001}'\ncurl -XPOST http://localhost:9200/index2/bc8c7a80c2fc4d629de3ec6b9f59ba95/0045e39df84b47adb154644ee1b1c513 -d'{  \"_tenantid\": 100001}'\ncurl -XPOST http://localhost:9200/index2/bc8c7a80c2fc4d629de3ec6b9f59ba95/0cf2b835275a48ef8769a5eac7569756 -d'{  \"_tenantid\": 100001}'\n\ncurl -XGET  http://localhost:9200/index2/bc8c7a80c2fc4d629de3ec6b9f59ba95/_search?q=_tenantid:100001\n{\"took\":0,\"timed_out\":false,\"_shards\":{\"total\":3,\"successful\":3,\"failed\":0},\"hits\":{\"total\":0,\"max_score\":null,\"hits\":[]}}\n\nhttp://localhost:9200/index2/bc8c7a80c2fc4d629de3ec6b9f59ba95/_mapping\n{\"bc8c7a80c2fc4d629de3ec6b9f59ba95\":{\"_source\":{\"compress\":true},\"properties\":{\"_tenantid\":{\"type\":\"long\"}}}}\n\nnote, i just index some docs with another type,but the previous query(should works fine) failed to get right hits.that's a little weird ~\n\nif i query with:\n curl -XGET  http://localhost:9200/index2/bc8c7a80c2fc4d629de3ec6b9f59ba95/_search?q=_tenantid:*\nwill return all result,seems query is fine\n","closed_by":{"login":"medcl","id":64487,"node_id":"MDQ6VXNlcjY0NDg3","avatar_url":"https://avatars0.githubusercontent.com/u/64487?v=4","gravatar_id":"","url":"https://api.github.com/users/medcl","html_url":"https://github.com/medcl","followers_url":"https://api.github.com/users/medcl/followers","following_url":"https://api.github.com/users/medcl/following{/other_user}","gists_url":"https://api.github.com/users/medcl/gists{/gist_id}","starred_url":"https://api.github.com/users/medcl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/medcl/subscriptions","organizations_url":"https://api.github.com/users/medcl/orgs","repos_url":"https://api.github.com/users/medcl/repos","events_url":"https://api.github.com/users/medcl/events{/privacy}","received_events_url":"https://api.github.com/users/medcl/received_events","type":"User","site_admin":false},"performed_via_github_app":null}