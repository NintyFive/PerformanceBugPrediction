[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/112374662","html_url":"https://github.com/elastic/elasticsearch/issues/11609#issuecomment-112374662","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11609","id":112374662,"node_id":"MDEyOklzc3VlQ29tbWVudDExMjM3NDY2Mg==","user":{"login":"Xylakant","id":337823,"node_id":"MDQ6VXNlcjMzNzgyMw==","avatar_url":"https://avatars0.githubusercontent.com/u/337823?v=4","gravatar_id":"","url":"https://api.github.com/users/Xylakant","html_url":"https://github.com/Xylakant","followers_url":"https://api.github.com/users/Xylakant/followers","following_url":"https://api.github.com/users/Xylakant/following{/other_user}","gists_url":"https://api.github.com/users/Xylakant/gists{/gist_id}","starred_url":"https://api.github.com/users/Xylakant/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xylakant/subscriptions","organizations_url":"https://api.github.com/users/Xylakant/orgs","repos_url":"https://api.github.com/users/Xylakant/repos","events_url":"https://api.github.com/users/Xylakant/events{/privacy}","received_events_url":"https://api.github.com/users/Xylakant/received_events","type":"User","site_admin":false},"created_at":"2015-06-16T10:17:54Z","updated_at":"2015-06-16T10:17:54Z","author_association":"NONE","body":"I'd consider a fixed user/group ID a bug. For example we assign ranges for user accounts depending on whether it's a \"system\" account or a \"real user\" account and 9200 would fall smack into our \"real user\" account range and probably conflict. I know of more organizations that use a similar scheme, so whatever value you choose you'll step on somebodies toe.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/172644492","html_url":"https://github.com/elastic/elasticsearch/issues/11609#issuecomment-172644492","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11609","id":172644492,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MjY0NDQ5Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-18T20:21:49Z","updated_at":"2016-01-18T20:21:49Z","author_association":"CONTRIBUTOR","body":"Let's opt for documenting it\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/266718948","html_url":"https://github.com/elastic/elasticsearch/issues/11609#issuecomment-266718948","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11609","id":266718948,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjcxODk0OA==","user":{"login":"gogularaja","id":14348828,"node_id":"MDQ6VXNlcjE0MzQ4ODI4","avatar_url":"https://avatars2.githubusercontent.com/u/14348828?v=4","gravatar_id":"","url":"https://api.github.com/users/gogularaja","html_url":"https://github.com/gogularaja","followers_url":"https://api.github.com/users/gogularaja/followers","following_url":"https://api.github.com/users/gogularaja/following{/other_user}","gists_url":"https://api.github.com/users/gogularaja/gists{/gist_id}","starred_url":"https://api.github.com/users/gogularaja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gogularaja/subscriptions","organizations_url":"https://api.github.com/users/gogularaja/orgs","repos_url":"https://api.github.com/users/gogularaja/repos","events_url":"https://api.github.com/users/gogularaja/events{/privacy}","received_events_url":"https://api.github.com/users/gogularaja/received_events","type":"User","site_admin":false},"created_at":"2016-12-13T11:49:40Z","updated_at":"2016-12-13T11:49:40Z","author_association":"NONE","body":"Hi All,\r\n\r\nI am facing an issue while taking elasticsearch snapshot in cluster. I found it is because of different permission of elasticsearch user in one of my node.\r\n\r\nI have 2 servers. Configured as cluster\r\nserver1: 10.0.0.0\r\nserver2: 10.0.0.1\r\n\r\nI have changed the userid & groupid of elasticsearch user in server2. So that to keep it same across all the nodes.\r\nBut after changing it, i am unable to start the elasticsearch service in server2. Also log file is also not getting updated.\r\n\r\n\r\nPlease guide me in solving this issue..\r\n\r\n\r\nThanks,\r\nGogul","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372588700","html_url":"https://github.com/elastic/elasticsearch/issues/11609#issuecomment-372588700","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11609","id":372588700,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MjU4ODcwMA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-03-13T08:44:04Z","updated_at":"2018-03-13T08:44:04Z","author_association":"MEMBER","body":"This has been open for almost 3 years with no other reports of similar issues. I'm going to close this as the filesystem snapshots seem to be used far less than cloud based snapshots, and for those that do use snapshots they seem to have not had similar problems. If someone does run into this issue again, we would happily accept a docs change for filesystem snapshot/restore docs.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/374698828","html_url":"https://github.com/elastic/elasticsearch/issues/11609#issuecomment-374698828","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11609","id":374698828,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NDY5ODgyOA==","user":{"login":"ropetin","id":5324292,"node_id":"MDQ6VXNlcjUzMjQyOTI=","avatar_url":"https://avatars3.githubusercontent.com/u/5324292?v=4","gravatar_id":"","url":"https://api.github.com/users/ropetin","html_url":"https://github.com/ropetin","followers_url":"https://api.github.com/users/ropetin/followers","following_url":"https://api.github.com/users/ropetin/following{/other_user}","gists_url":"https://api.github.com/users/ropetin/gists{/gist_id}","starred_url":"https://api.github.com/users/ropetin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ropetin/subscriptions","organizations_url":"https://api.github.com/users/ropetin/orgs","repos_url":"https://api.github.com/users/ropetin/repos","events_url":"https://api.github.com/users/ropetin/events{/privacy}","received_events_url":"https://api.github.com/users/ropetin/received_events","type":"User","site_admin":false},"created_at":"2018-03-20T18:03:30Z","updated_at":"2018-03-20T18:03:30Z","author_association":"NONE","body":"FYI, this is still an on-going issue.  I have just run into it with 6.2.2 about 30 minutes ago.  Filesystem snapshots are still a supported feature, correct?  So unless anyone fixed the root issue (they haven't) the problem will still be there.   I can't fix the code, but I can fix the documentation maybe.  Which documentation are you referring to when you mention accepting changes?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/386490619","html_url":"https://github.com/elastic/elasticsearch/issues/11609#issuecomment-386490619","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11609","id":386490619,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NjQ5MDYxOQ==","user":{"login":"l0ca1h0st","id":22948540,"node_id":"MDQ6VXNlcjIyOTQ4NTQw","avatar_url":"https://avatars0.githubusercontent.com/u/22948540?v=4","gravatar_id":"","url":"https://api.github.com/users/l0ca1h0st","html_url":"https://github.com/l0ca1h0st","followers_url":"https://api.github.com/users/l0ca1h0st/followers","following_url":"https://api.github.com/users/l0ca1h0st/following{/other_user}","gists_url":"https://api.github.com/users/l0ca1h0st/gists{/gist_id}","starred_url":"https://api.github.com/users/l0ca1h0st/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/l0ca1h0st/subscriptions","organizations_url":"https://api.github.com/users/l0ca1h0st/orgs","repos_url":"https://api.github.com/users/l0ca1h0st/repos","events_url":"https://api.github.com/users/l0ca1h0st/events{/privacy}","received_events_url":"https://api.github.com/users/l0ca1h0st/received_events","type":"User","site_admin":false},"created_at":"2018-05-04T02:22:41Z","updated_at":"2018-05-04T02:22:41Z","author_association":"NONE","body":"when you change uid/gid ,the new uid/gid will have no permission to the origin directory/files owned by elastic.  so you should rechange owner of these directories/files to elasticsearch.\r\ncommand: chown -R elasticsearch:elasticsearch /paths/es's  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/394742136","html_url":"https://github.com/elastic/elasticsearch/issues/11609#issuecomment-394742136","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11609","id":394742136,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NDc0MjEzNg==","user":{"login":"GoodMirek","id":7804468,"node_id":"MDQ6VXNlcjc4MDQ0Njg=","avatar_url":"https://avatars1.githubusercontent.com/u/7804468?v=4","gravatar_id":"","url":"https://api.github.com/users/GoodMirek","html_url":"https://github.com/GoodMirek","followers_url":"https://api.github.com/users/GoodMirek/followers","following_url":"https://api.github.com/users/GoodMirek/following{/other_user}","gists_url":"https://api.github.com/users/GoodMirek/gists{/gist_id}","starred_url":"https://api.github.com/users/GoodMirek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GoodMirek/subscriptions","organizations_url":"https://api.github.com/users/GoodMirek/orgs","repos_url":"https://api.github.com/users/GoodMirek/repos","events_url":"https://api.github.com/users/GoodMirek/events{/privacy}","received_events_url":"https://api.github.com/users/GoodMirek/received_events","type":"User","site_admin":false},"created_at":"2018-06-05T14:58:47Z","updated_at":"2018-06-05T14:58:47Z","author_association":"CONTRIBUTOR","body":"I have solved this issue by creating the elasticsearch user and group prior installation of elasticsearch, thus setting it to a fixed value throughout all the nodes. If Ansible is used for provisioning, ansible-elasticsearch role is capable of doing it automatically.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/463245553","html_url":"https://github.com/elastic/elasticsearch/issues/11609#issuecomment-463245553","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11609","id":463245553,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MzI0NTU1Mw==","user":{"login":"tegansnyder","id":1200195,"node_id":"MDQ6VXNlcjEyMDAxOTU=","avatar_url":"https://avatars2.githubusercontent.com/u/1200195?v=4","gravatar_id":"","url":"https://api.github.com/users/tegansnyder","html_url":"https://github.com/tegansnyder","followers_url":"https://api.github.com/users/tegansnyder/followers","following_url":"https://api.github.com/users/tegansnyder/following{/other_user}","gists_url":"https://api.github.com/users/tegansnyder/gists{/gist_id}","starred_url":"https://api.github.com/users/tegansnyder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tegansnyder/subscriptions","organizations_url":"https://api.github.com/users/tegansnyder/orgs","repos_url":"https://api.github.com/users/tegansnyder/repos","events_url":"https://api.github.com/users/tegansnyder/events{/privacy}","received_events_url":"https://api.github.com/users/tegansnyder/received_events","type":"User","site_admin":false},"created_at":"2019-02-13T15:36:24Z","updated_at":"2019-02-13T15:36:24Z","author_association":"NONE","body":"I also ran into this issue. I installed ES on six nodes a few months back, then replaced three of them with new nodes a few weeks ago. Since then ES hasn't been able to write to the NFS for snapshotting. It looks like the only way to fix this is to make sure the uid and gid are the same across all nodes. This looks like a chore because i will need to find a non-used uid and gid that will work across all nodes then do the:\r\n\r\n```sh\r\n# make sure uid doesn't exist\r\nid -nu NEW_UID\r\n# make sure new guid doesn't exist\r\ngetent group NEW_GUID\r\n# this command will take forever to complete (just tried it on 9TB and took like an hour)\r\n/bin/chown --changes --silent --no-dereference --recursive --from=OLD_UID:OLD_GUID NEW_UID:NEW_GUID /\r\n# then ensure chown'd directories elasticsearch:elasticsearch\r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/486014505","html_url":"https://github.com/elastic/elasticsearch/issues/11609#issuecomment-486014505","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11609","id":486014505,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjAxNDUwNQ==","user":{"login":"hellosputnik","id":4950179,"node_id":"MDQ6VXNlcjQ5NTAxNzk=","avatar_url":"https://avatars1.githubusercontent.com/u/4950179?v=4","gravatar_id":"","url":"https://api.github.com/users/hellosputnik","html_url":"https://github.com/hellosputnik","followers_url":"https://api.github.com/users/hellosputnik/followers","following_url":"https://api.github.com/users/hellosputnik/following{/other_user}","gists_url":"https://api.github.com/users/hellosputnik/gists{/gist_id}","starred_url":"https://api.github.com/users/hellosputnik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hellosputnik/subscriptions","organizations_url":"https://api.github.com/users/hellosputnik/orgs","repos_url":"https://api.github.com/users/hellosputnik/repos","events_url":"https://api.github.com/users/hellosputnik/events{/privacy}","received_events_url":"https://api.github.com/users/hellosputnik/received_events","type":"User","site_admin":false},"created_at":"2019-04-23T23:48:00Z","updated_at":"2019-04-23T23:48:00Z","author_association":"NONE","body":"What about adding a [bootstrap check](https://www.elastic.co/guide/en/elasticsearch/reference/current/bootstrap-checks.html) that ensures the elasticsearch UID and GID are consistent (or at least a warning when there is inconsistency)?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576267724","html_url":"https://github.com/elastic/elasticsearch/issues/11609#issuecomment-576267724","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11609","id":576267724,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjI2NzcyNA==","user":{"login":"Plop","id":876470,"node_id":"MDQ6VXNlcjg3NjQ3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/876470?v=4","gravatar_id":"","url":"https://api.github.com/users/Plop","html_url":"https://github.com/Plop","followers_url":"https://api.github.com/users/Plop/followers","following_url":"https://api.github.com/users/Plop/following{/other_user}","gists_url":"https://api.github.com/users/Plop/gists{/gist_id}","starred_url":"https://api.github.com/users/Plop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Plop/subscriptions","organizations_url":"https://api.github.com/users/Plop/orgs","repos_url":"https://api.github.com/users/Plop/repos","events_url":"https://api.github.com/users/Plop/events{/privacy}","received_events_url":"https://api.github.com/users/Plop/received_events","type":"User","site_admin":false},"created_at":"2020-01-20T13:10:58Z","updated_at":"2020-01-20T13:10:58Z","author_association":"NONE","body":"> This has been open for almost 3 years with no other reports of similar issues. I'm going to close this as the filesystem snapshots seem to be used far less than cloud based snapshots, and for those that do use snapshots they seem to have not had similar problems. If someone does run into this issue again, we would happily accept a docs change for filesystem snapshot/restore docs.\r\n\r\nI'm still running into this issue. Please make some changes.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576302387","html_url":"https://github.com/elastic/elasticsearch/issues/11609#issuecomment-576302387","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11609","id":576302387,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjMwMjM4Nw==","user":{"login":"GoodMirek","id":7804468,"node_id":"MDQ6VXNlcjc4MDQ0Njg=","avatar_url":"https://avatars1.githubusercontent.com/u/7804468?v=4","gravatar_id":"","url":"https://api.github.com/users/GoodMirek","html_url":"https://github.com/GoodMirek","followers_url":"https://api.github.com/users/GoodMirek/followers","following_url":"https://api.github.com/users/GoodMirek/following{/other_user}","gists_url":"https://api.github.com/users/GoodMirek/gists{/gist_id}","starred_url":"https://api.github.com/users/GoodMirek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GoodMirek/subscriptions","organizations_url":"https://api.github.com/users/GoodMirek/orgs","repos_url":"https://api.github.com/users/GoodMirek/repos","events_url":"https://api.github.com/users/GoodMirek/events{/privacy}","received_events_url":"https://api.github.com/users/GoodMirek/received_events","type":"User","site_admin":false},"created_at":"2020-01-20T14:37:36Z","updated_at":"2020-01-20T14:37:36Z","author_association":"CONTRIBUTOR","body":"> > This has been open for almost 3 years with no other reports of similar issues. I'm going to close this as the filesystem snapshots seem to be used far less than cloud based snapshots, and for those that do use snapshots they seem to have not had similar problems. If someone does run into this issue again, we would happily accept a docs change for filesystem snapshot/restore docs.\r\n> \r\n> I'm still running into this issue. Please make some changes.\r\n\r\nMe too and probably also other people. We all solve it in house, as apparently nobody fixed that in Elasticsearch.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/583848772","html_url":"https://github.com/elastic/elasticsearch/issues/11609#issuecomment-583848772","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11609","id":583848772,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Mzg0ODc3Mg==","user":{"login":"tocy1","id":27822611,"node_id":"MDQ6VXNlcjI3ODIyNjEx","avatar_url":"https://avatars0.githubusercontent.com/u/27822611?v=4","gravatar_id":"","url":"https://api.github.com/users/tocy1","html_url":"https://github.com/tocy1","followers_url":"https://api.github.com/users/tocy1/followers","following_url":"https://api.github.com/users/tocy1/following{/other_user}","gists_url":"https://api.github.com/users/tocy1/gists{/gist_id}","starred_url":"https://api.github.com/users/tocy1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tocy1/subscriptions","organizations_url":"https://api.github.com/users/tocy1/orgs","repos_url":"https://api.github.com/users/tocy1/repos","events_url":"https://api.github.com/users/tocy1/events{/privacy}","received_events_url":"https://api.github.com/users/tocy1/received_events","type":"User","site_admin":false},"created_at":"2020-02-09T14:01:20Z","updated_at":"2020-02-09T14:02:44Z","author_association":"NONE","body":"For Anyone that comes across this problem, I solved this by running  the following commands on the nodes that had permission issues\r\nid elasticsearch# To Know your elasticsearch gid and uid \r\nservice elasticsearch stop\r\nusermod -u NEWUID elasticsearch\r\ngroupmod -g NEWGID elasticsearch\r\nfind / -user OLDUID -exec chown -h NEWUID {} \\;\r\nfind / -group OLDGID -exec chgrp -h NEWGID {} \\;\r\nservice elasticsearch start","performed_via_github_app":null}]