[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113134497","html_url":"https://github.com/elastic/elasticsearch/issues/11744#issuecomment-113134497","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11744","id":113134497,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzEzNDQ5Nw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T12:14:32Z","updated_at":"2015-06-18T12:14:32Z","author_association":"CONTRIBUTOR","body":"> 1) The main question is where should the _name be supported. Should it always be in the top level object, as I was expecting without looking at the code, or does it make sense to wrap everything in the inner object if present?\n\n+1 on only supporting it at the top level,  like our documentation describes.\n\n> 2) Queries that don't support _name at all: boosting, constant_score, function_score, geohash_cell, limit, match_all, span_multi, type. Support for _name needs to be added to these?\n\nYes.\n\n> 3) Queries that don't support boost: indices, simple_query_string (PR opened), span_multi. Support for boost should be added to these?\n\n+1 on supporting `_boost` on all queries. I'm a bit torn about `indices` however which is not a real query. But on the other hand it would be easy to propagate the boos to the underlying query.\n\n> 4) Filters that don't support boost: and, bool, exists, geo_bbox, geo_distance, geo_distance_range, geohash_cell, geo_polygon, limit, missing, not, or, script, type. Now that filters and queries are merged, can these be used as queries? If so would the boost make sense if it was supported here too?\n\nYes they can be used as queries, and most of them actually return the value of the boost as a score (like match_all) so I think it makes sense to be consistent and add support for `_boost` to these queries.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113263740","html_url":"https://github.com/elastic/elasticsearch/issues/11744#issuecomment-113263740","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11744","id":113263740,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzI2Mzc0MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T19:18:38Z","updated_at":"2015-06-18T19:18:38Z","author_association":"CONTRIBUTOR","body":"> +1 on only supporting it at the top level, like our documentation describes.\n\nI'm not sure about this.  Every other extra parameter is specified in the inner object. What makes `_name` special?  It also means that you can't query a field called `_name` (admittedly an edge case).\n\nOur documentation actually shows two conflicting syntaxes: https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-named-queries-and-filters.html#search-request-named-queries-and-filters\n\nMy feeling is that it should be moved into the inner object for all queries.  It'd be easy to throw an exception if two \"field names\" are present, and an easy change to make in the application.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113424538","html_url":"https://github.com/elastic/elasticsearch/issues/11744#issuecomment-113424538","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11744","id":113424538,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzQyNDUzOA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-06-19T08:07:02Z","updated_at":"2015-06-22T16:44:56Z","author_association":"MEMBER","body":"> My feeling is that it should be moved into the inner object for all queries. \n\nI see your point, but the majority of queries don't have an inner object, which would mean leaving things pretty much as they are? I find the current situation a bit counter intuitive: if there is an inner object, that's where the `_name` goes, otherwise top level (besides bugs and inconsistencies that need to be fixed). The other way around, if we are up for a big change, not sure but lemme throw it on the table, maybe we shouldn't have an inner object at all and have `field: field_name` in all queries instead and `_name` could be safely moved to the top level, maybe together with `boost`? Maybe we should even look into renaming `_name` to `_query_name`?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/114563978","html_url":"https://github.com/elastic/elasticsearch/issues/11744#issuecomment-114563978","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11744","id":114563978,"node_id":"MDEyOklzc3VlQ29tbWVudDExNDU2Mzk3OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-23T16:30:38Z","updated_at":"2015-06-23T16:30:38Z","author_association":"CONTRIBUTOR","body":"Follow up: @javanna and I talked and decided:\n- all queries have a long form\n- some queries (single field leaf queries) also have a short form\n- in the short form, the only top-level parameter should be the field name\n- specifying `_name`, `boost`, and any other parameters should always require the long form\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/117728209","html_url":"https://github.com/elastic/elasticsearch/issues/11744#issuecomment-117728209","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11744","id":117728209,"node_id":"MDEyOklzc3VlQ29tbWVudDExNzcyODIwOQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-07-01T16:02:44Z","updated_at":"2015-07-13T12:22:07Z","author_association":"MEMBER","body":"I decided to do most of the work associated with this issue in the query-refactoring branch, as we have better tools to test these changes there e.g. unit tests and much more coverage. Also, the change has some breaking aspects which are not a problem in the query-refactoring branch as there we will completely change the way queries are sent over the wire anyway: if a builder prints out a new field that wasn't supported before when sending a search request through java api, the corresponding parser from an older node might throw error as it doesn't support that new field in that position.\n\nThe bigger part of this change was done as part of #11974. Besides that what we have left to do is remove/deprecate support for `_name` and `boost` where they are supported but they shouldn't be:\n- don't parse `_name` in short version of prefix query\n- don't parse `_name` in short version of regexp query\n- don't parse `_name` in the top level object of a range query (_name and boost should only be parsed in the inner field)\n- don't parse `_name` and `boost` in short version of term query, only long version should support those\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/130635513","html_url":"https://github.com/elastic/elasticsearch/issues/11744#issuecomment-130635513","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11744","id":130635513,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMDYzNTUxMw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-08-13T11:45:42Z","updated_at":"2015-08-13T11:45:42Z","author_association":"CONTRIBUTOR","body":"Closed by #11974\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/130644857","html_url":"https://github.com/elastic/elasticsearch/issues/11744#issuecomment-130644857","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11744","id":130644857,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMDY0NDg1Nw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-08-13T12:09:27Z","updated_at":"2015-08-13T12:09:27Z","author_association":"MEMBER","body":"sorry @clintongormley I still have a couple of things to do so I can close this :) the four changes left listed above. will reopen and work on this.\n","performed_via_github_app":null}]