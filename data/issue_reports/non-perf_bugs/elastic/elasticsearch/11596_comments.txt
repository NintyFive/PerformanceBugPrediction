[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/111281841","html_url":"https://github.com/elastic/elasticsearch/issues/11596#issuecomment-111281841","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11596","id":111281841,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTI4MTg0MQ==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2015-06-11T21:25:21Z","updated_at":"2015-06-11T21:25:21Z","author_association":"CONTRIBUTOR","body":"After looking at the code, this can't really be accomplished in the short-term.  Expressions is missing numerous features that are specified in the example here (https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-scripted-metric-aggregation.html) including if/else blocks (though it does have conditionals), loops, variable assignment, and different types such as strings or ints.  The expressions architecture is built exclusively to support doubles with other numeric values being converted to doubles when used.  Expressions also have no notion of a long-term variable meaning that the variables passed between scripts would have to be coded in as well.  There are simply too many limitations to overcome before the upcoming beta for 2.0.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/111283258","html_url":"https://github.com/elastic/elasticsearch/issues/11596#issuecomment-111283258","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11596","id":111283258,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTI4MzI1OA==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2015-06-11T21:33:24Z","updated_at":"2015-06-11T21:33:24Z","author_association":"CONTRIBUTOR","body":"@colings86 Also, would you please provide an example aggregation that you're thinking of doing using expressions?  Thanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/111286012","html_url":"https://github.com/elastic/elasticsearch/issues/11596#issuecomment-111286012","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11596","id":111286012,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTI4NjAxMg==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2015-06-11T21:49:36Z","updated_at":"2015-06-11T21:49:57Z","author_association":"CONTRIBUTOR","body":"@colings86 It might be worth looking into what we do with multi-value fields where we allow them have member methods like sum, avg, median, min, and max.  If that could be provided for a single known variable, would that be enough for what you're trying to do?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/111525254","html_url":"https://github.com/elastic/elasticsearch/issues/11596#issuecomment-111525254","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11596","id":111525254,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTUyNTI1NA==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2015-06-12T15:22:55Z","updated_at":"2015-06-12T16:54:30Z","author_association":"CONTRIBUTOR","body":"Just spoke with @colings86 -- My apologies for the misunderstanding, the goal is simply to be able to calculate numeric expressions through an executable script instead of a search script.  I believe this can be done now for the 2.0 beta.  I will always assume that the Objects in the map of vars passed in will be doubles.\n","performed_via_github_app":null}]