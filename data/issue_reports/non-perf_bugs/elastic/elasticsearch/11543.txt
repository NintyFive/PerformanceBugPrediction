{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/11543","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11543/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11543/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11543/events","html_url":"https://github.com/elastic/elasticsearch/issues/11543","id":86346307,"node_id":"MDU6SXNzdWU4NjM0NjMwNw==","number":11543,"title":"failed action with response of 400, dropping action","user":{"login":"PavelPolyakov","id":839290,"node_id":"MDQ6VXNlcjgzOTI5MA==","avatar_url":"https://avatars0.githubusercontent.com/u/839290?v=4","gravatar_id":"","url":"https://api.github.com/users/PavelPolyakov","html_url":"https://github.com/PavelPolyakov","followers_url":"https://api.github.com/users/PavelPolyakov/followers","following_url":"https://api.github.com/users/PavelPolyakov/following{/other_user}","gists_url":"https://api.github.com/users/PavelPolyakov/gists{/gist_id}","starred_url":"https://api.github.com/users/PavelPolyakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PavelPolyakov/subscriptions","organizations_url":"https://api.github.com/users/PavelPolyakov/orgs","repos_url":"https://api.github.com/users/PavelPolyakov/repos","events_url":"https://api.github.com/users/PavelPolyakov/events{/privacy}","received_events_url":"https://api.github.com/users/PavelPolyakov/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2015-06-08T21:54:51Z","updated_at":"2015-09-18T20:07:59Z","closed_at":"2015-06-09T17:09:50Z","author_association":"NONE","active_lock_reason":null,"body":"Today I've updated my ES cluster to the ES version 1.5.2 , as well I've updated the logstash to the 1.5.0 .\nOny of my logstash outputs is elasticsearch.\n\nJava version is 1.8.0_45 .\n\nAnd since today I'm spammed with this kind of messages:\n\n> {:timestamp=>\"2015-06-08T23:37:34.955000+0200\", :message=>\"failed action with response of 400, dropping action: [\\\"index\\\", {:_id=>nil, :_index=>\\\"logstash-2015.06.08\\\", :_type=>\\\"yyy\\\", :_routing=>nil}, #<LogStash::Event:0x36be02ca @metadata={\\\"retry_count\\\"=>0}, @accessors=#<LogStash::Util::Accessors:0x1191c365 @store={\\\"message\\\"=>\\\"iii\\\", \\\"@version\\\"=>\\\"1\\\", \\\"@timestamp\\\"=>\\\"2015-06-08T21:37:31.836Z\\\", \\\"host\\\"=>\\\"www\\\", \\\"type\\\"=>\\\"yyy\\\", \\\"client\\\"=>\\\"qqq\\\", \\\"country\\\"=>\\\"es\\\", \\\"level\\\"=>\\\"INFO\\\", \\\"data\\\"=>{\\\"userUuid\\\"=>\\\"zzz\\\", \\\"appUuid\\\"=>\\\"ppp\\\", \\\"tags\\\"=>#Java::JavaUtil::ArrayList:0x6e500547, \\\"sessionId\\\"=>\\\"63784859\\\", \\\"login\\\"=>\\\"xxx\\\", \\\"result\\\"=>{\\\"passwordMetadata\\\"=>{\\\"name\\\"=>\\\"ooo\\\", \\\"mask\\\"=>false}}}}, @lut={\\\"[message]\\\"=>[{\\\"message\\\"=>\\\"iii\\\", \\\"@version\\\"=>\\\"1\\\", \\\"@timestamp\\\"=>\\\"2015-06-08T21:37:31.836Z\\\", \\\"host\\\"=>\\\"www\\\", \\\"type\\\"=>\\\"yyy\\\", \\\"client\\\"=>\\\"qqq\\\", \\\"country\\\"=>\\\"es\\\", \\\"level\\\"=>\\\"INFO\\\", \\\"data\\\"=>{\\\"userUuid\\\"=>\\\"zzz\\\", \\\"appUuid\\\"=>\\\"ppp\\\", \\\"tags\\\"=>#Java::JavaUtil::ArrayList:0x6e500547, \\\"sessionId\\\"=>\\\"63784859\\\", \\\"login\\\"=>\\\"xxx\\\", \\\"result\\\"=>{\\\"passwordMetadata\\\"=>{\\\"name\\\"=>\\\"ooo\\\", \\\"mask\\\"=>false}}}}, \\\"message\\\"], \\\"[type]\\\"=>[{\\\"message\\\"=>\\\"iii\\\", \\\"@version\\\"=>\\\"1\\\", \\\"@timestamp\\\"=>\\\"2015-06-08T21:37:31.836Z\\\", \\\"host\\\"=>\\\"www\\\", \\\"type\\\"=>\\\"yyy\\\", \\\"client\\\"=>\\\"qqq\\\", \\\"country\\\"=>\\\"es\\\", \\\"level\\\"=>\\\"INFO\\\", \\\"data\\\"=>{\\\"userUuid\\\"=>\\\"zzz\\\", \\\"appUuid\\\"=>\\\"ppp\\\", \\\"tags\\\"=>#Java::JavaUtil::ArrayList:0x6e500547, \\\"sessionId\\\"=>\\\"63784859\\\", \\\"login\\\"=>\\\"xxx\\\", \\\"result\\\"=>{\\\"passwordMetadata\\\"=>{\\\"name\\\"=>\\\"ooo\\\", \\\"mask\\\"=>false}}}}, \\\"type\\\"], \\\"message\\\"=>[{\\\"message\\\"=>\\\"iii\\\", \\\"@version\\\"=>\\\"1\\\", \\\"@timestamp\\\"=>\\\"2015-06-08T21:37:31.836Z\\\", \\\"host\\\"=>\\\"www\\\", \\\"type\\\"=>\\\"yyy\\\", \\\"client\\\"=>\\\"qqq\\\", \\\"country\\\"=>\\\"es\\\", \\\"level\\\"=>\\\"INFO\\\", \\\"data\\\"=>{\\\"userUuid\\\"=>\\\"zzz\\\", \\\"appUuid\\\"=>\\\"ppp\\\", \\\"tags\\\"=>#Java::JavaUtil::ArrayList:0x6e500547, \\\"sessionId\\\"=>\\\"63784859\\\", \\\"login\\\"=>\\\"xxx\\\", \\\"result\\\"=>{\\\"passwordMetadata\\\"=>{\\\"name\\\"=>\\\"ooo\\\", \\\"mask\\\"=>false}}}}, \\\"message\\\"], \\\"[tags]\\\"=>[{\\\"message\\\"=>\\\"iii\\\", \\\"@version\\\"=>\\\"1\\\", \\\"@timestamp\\\"=>\\\"2015-06-08T21:37:31.836Z\\\", \\\"host\\\"=>\\\"www\\\", \\\"type\\\"=>\\\"yyy\\\", \\\"client\\\"=>\\\"qqq\\\", \\\"country\\\"=>\\\"es\\\", \\\"level\\\"=>\\\"INFO\\\", \\\"data\\\"=>{\\\"userUuid\\\"=>\\\"zzz\\\", \\\"appUuid\\\"=>\\\"ppp\\\", \\\"tags\\\"=>#Java::JavaUtil::ArrayList:0x6e500547, \\\"sessionId\\\"=>\\\"63784859\\\", \\\"login\\\"=>\\\"xxx\\\", \\\"result\\\"=>{\\\"passwordMetadata\\\"=>{\\\"name\\\"=>\\\"ooo\\\", \\\"mask\\\"=>false}}}}, \\\"tags\\\"], \\\"type\\\"=>[{\\\"message\\\"=>\\\"iii\\\", \\\"@version\\\"=>\\\"1\\\", \\\"@timestamp\\\"=>\\\"2015-06-08T21:37:31.836Z\\\", \\\"host\\\"=>\\\"www\\\", \\\"type\\\"=>\\\"yyy\\\", \\\"client\\\"=>\\\"qqq\\\", \\\"country\\\"=>\\\"es\\\", \\\"level\\\"=>\\\"INFO\\\", \\\"data\\\"=>{\\\"userUuid\\\"=>\\\"zzz\\\", \\\"appUuid\\\"=>\\\"ppp\\\", \\\"tags\\\"=>#Java::JavaUtil::ArrayList:0x6e500547, \\\"sessionId\\\"=>\\\"63784859\\\", \\\"login\\\"=>\\\"xxx\\\", \\\"result\\\"=>{\\\"passwordMetadata\\\"=>{\\\"name\\\"=>\\\"ooo\\\", \\\"mask\\\"=>false}}}}, \\\"type\\\"]}>, @data={\\\"message\\\"=>\\\"iii\\\", \\\"@version\\\"=>\\\"1\\\", \\\"@timestamp\\\"=>\\\"2015-06-08T21:37:31.836Z\\\", \\\"host\\\"=>\\\"www\\\", \\\"type\\\"=>\\\"yyy\\\", \\\"client\\\"=>\\\"qqq\\\", \\\"country\\\"=>\\\"es\\\", \\\"level\\\"=>\\\"INFO\\\", \\\"data\\\"=>{\\\"userUuid\\\"=>\\\"zzz\\\", \\\"appUuid\\\"=>\\\"ppp\\\", \\\"tags\\\"=>#Java::JavaUtil::ArrayList:0x6e500547, \\\"sessionId\\\"=>\\\"63784859\\\", \\\"login\\\"=>\\\"xxx\\\", \\\"result\\\"=>{\\\"passwordMetadata\\\"=>{\\\"name\\\"=>\\\"ooo\\\", \\\"mask\\\"=>false}}}}, @metadata_accessors=#<LogStash::Util::Accessors:0x777eb8cf @store={\\\"retry_count\\\"=>0}, @lut={}>, @cancelled=false>]\", :level=>:warn}\n\nI have no idea how to overcome that. Some messages are ok, and ES accepts them and indexes, but some lead to this message.\n\nAny idea what should I check to make them pass thorough ES?\nWhy in the error message, the original message takes place several time?\n\nThe same topic takes place [inside the logstash ES plugin](https://github.com/logstash-plugins/logstash-output-elasticsearch/issues/144#issuecomment-110072257), but I haven't found a solution there.\n\nWhy the ES is dropping the action?\n\nAny hint is appreciated.\n\nRegards,\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}