{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/11148","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11148/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11148/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11148/events","html_url":"https://github.com/elastic/elasticsearch/issues/11148","id":76010708,"node_id":"MDU6SXNzdWU3NjAxMDcwOA==","number":11148,"title":"Fine-granular manipulation of snapshots","user":{"login":"ywelsch-t","id":8446609,"node_id":"MDQ6VXNlcjg0NDY2MDk=","avatar_url":"https://avatars0.githubusercontent.com/u/8446609?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch-t","html_url":"https://github.com/ywelsch-t","followers_url":"https://api.github.com/users/ywelsch-t/followers","following_url":"https://api.github.com/users/ywelsch-t/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch-t/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch-t/subscriptions","organizations_url":"https://api.github.com/users/ywelsch-t/orgs","repos_url":"https://api.github.com/users/ywelsch-t/repos","events_url":"https://api.github.com/users/ywelsch-t/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch-t/received_events","type":"User","site_admin":false},"labels":[{"id":143077482,"node_id":"MDU6TGFiZWwxNDMwNzc0ODI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Snapshot/Restore","name":":Distributed/Snapshot/Restore","color":"0e8a16","default":false,"description":"Anything directly related to the `_snapshot/*` APIs"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":16,"created_at":"2015-05-13T14:47:55Z","updated_at":"2018-12-15T21:53:33Z","closed_at":"2018-03-21T16:07:33Z","author_association":"NONE","active_lock_reason":null,"body":"###### Suggestion for more fine-granular manipulation of snapshots:\n\nSnapshots can be partially restored by selecting only a subset of the indices. They can at the moment, however, only be fully deleted. This means that unwanted parts of a snapshot cannot be easily removed. Deleting indices from snapshots would complement the existing functionality.\n\nOther primitive operations such as moving / copying indices between snapshots might be useful. At the moment, only a single snapshot operation can be active in the cluster. This determines the level of concurrency for backing up as well as restoring data. In a large cluster, the backing up of data might be partitioned into smaller snapshot tasks. This is relevant when prioritizing certain indices or backing up indices with different frequencies. It also helps to minimize the interference with re-balancing processes by backing up individual indices as fast as possible (reduces the amount of transfer time for each individual index). Now if I snapshot the first ten indices and then ten more (e.g. to consider priorities), I will not be able to restore index A of the former snapshot and index B of the latter snapshot at the same time. Moving indices between snapshots would allow the combination of both snapshots.\n###### What about immutability of snapshots?\n\nAt the moment, snapshots are immutable (they are created as a fixed set of indices). Adding delete / move / copy operations would change that. However, other operations could be imagined that conform to the \"immutable\" model. For example, creating a new snapshot based on the content of other snapshots (by giving an ordered list of (snapshot, indices) pairs). With the current implementation of snapshots, this would be very fast (only writing meta-data).\n\nI can make a pull request if this is a feature that others deem useful. Also, the specifics of the operations need to be clarified first.\n","closed_by":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"performed_via_github_app":null}