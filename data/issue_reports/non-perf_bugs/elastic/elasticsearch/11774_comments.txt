[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113614684","html_url":"https://github.com/elastic/elasticsearch/issues/11774#issuecomment-113614684","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11774","id":113614684,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzYxNDY4NA==","user":{"login":"askaliuk","id":48947,"node_id":"MDQ6VXNlcjQ4OTQ3","avatar_url":"https://avatars2.githubusercontent.com/u/48947?v=4","gravatar_id":"","url":"https://api.github.com/users/askaliuk","html_url":"https://github.com/askaliuk","followers_url":"https://api.github.com/users/askaliuk/followers","following_url":"https://api.github.com/users/askaliuk/following{/other_user}","gists_url":"https://api.github.com/users/askaliuk/gists{/gist_id}","starred_url":"https://api.github.com/users/askaliuk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/askaliuk/subscriptions","organizations_url":"https://api.github.com/users/askaliuk/orgs","repos_url":"https://api.github.com/users/askaliuk/repos","events_url":"https://api.github.com/users/askaliuk/events{/privacy}","received_events_url":"https://api.github.com/users/askaliuk/received_events","type":"User","site_admin":false},"created_at":"2015-06-19T19:29:38Z","updated_at":"2015-06-19T19:29:38Z","author_association":"NONE","body":"Having the same problem. Debugging now. Let me know if you make any progress.\nMy assumption: `doc['mCount'].value` is something, which we don't expect.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/114545666","html_url":"https://github.com/elastic/elasticsearch/issues/11774#issuecomment-114545666","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11774","id":114545666,"node_id":"MDEyOklzc3VlQ29tbWVudDExNDU0NTY2Ng==","user":{"login":"gkozyryatskyy","id":7124946,"node_id":"MDQ6VXNlcjcxMjQ5NDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7124946?v=4","gravatar_id":"","url":"https://api.github.com/users/gkozyryatskyy","html_url":"https://github.com/gkozyryatskyy","followers_url":"https://api.github.com/users/gkozyryatskyy/followers","following_url":"https://api.github.com/users/gkozyryatskyy/following{/other_user}","gists_url":"https://api.github.com/users/gkozyryatskyy/gists{/gist_id}","starred_url":"https://api.github.com/users/gkozyryatskyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gkozyryatskyy/subscriptions","organizations_url":"https://api.github.com/users/gkozyryatskyy/orgs","repos_url":"https://api.github.com/users/gkozyryatskyy/repos","events_url":"https://api.github.com/users/gkozyryatskyy/events{/privacy}","received_events_url":"https://api.github.com/users/gkozyryatskyy/received_events","type":"User","site_admin":false},"created_at":"2015-06-23T15:27:17Z","updated_at":"2015-06-23T15:27:34Z","author_association":"NONE","body":"@askaliuk This exception throws just with division operator.\nFor exemple `\"script\" : \"_score * doc['mCount'].value\"` working fine.\nLike i sad `\"script\" : \"_score / doc['mCount'].value\"` and `\"script\" : \"_score * (1 / doc['mCount'].value\")\"` do not working, But \"script\" : \"_score \\* (1.0 / doc['mCount'].value\")\" working fine.\nThats why i think the problem is cast from int to double, or from string to double.\nMay be elastic can't represent _score as double for division. Like it can't divide `1 / doc['mCount'].value` but `1.0 / doc['mCount'].value` works fine.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/114618660","html_url":"https://github.com/elastic/elasticsearch/issues/11774#issuecomment-114618660","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11774","id":114618660,"node_id":"MDEyOklzc3VlQ29tbWVudDExNDYxODY2MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-23T19:35:24Z","updated_at":"2015-06-23T19:35:24Z","author_association":"CONTRIBUTOR","body":"@jpountz could we cast integers in script scoring to floats to avoid this issue?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/114620021","html_url":"https://github.com/elastic/elasticsearch/issues/11774#issuecomment-114620021","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11774","id":114620021,"node_id":"MDEyOklzc3VlQ29tbWVudDExNDYyMDAyMQ==","user":{"login":"askaliuk","id":48947,"node_id":"MDQ6VXNlcjQ4OTQ3","avatar_url":"https://avatars2.githubusercontent.com/u/48947?v=4","gravatar_id":"","url":"https://api.github.com/users/askaliuk","html_url":"https://github.com/askaliuk","followers_url":"https://api.github.com/users/askaliuk/followers","following_url":"https://api.github.com/users/askaliuk/following{/other_user}","gists_url":"https://api.github.com/users/askaliuk/gists{/gist_id}","starred_url":"https://api.github.com/users/askaliuk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/askaliuk/subscriptions","organizations_url":"https://api.github.com/users/askaliuk/orgs","repos_url":"https://api.github.com/users/askaliuk/repos","events_url":"https://api.github.com/users/askaliuk/events{/privacy}","received_events_url":"https://api.github.com/users/askaliuk/received_events","type":"User","site_admin":false},"created_at":"2015-06-23T19:39:28Z","updated_at":"2015-06-23T19:39:28Z","author_association":"NONE","body":"@gkozyryatskyy \n\nThis code:\n\n```\ntermInfo=_index['text'].get('something', _POSITIONS);\nfor(pos in termInfo){\n     return 1 / (pos.position.toInteger() + 1) * doc['somefield'].value;\n};\n```\n\nWorks fine for me by some reason.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/172648092","html_url":"https://github.com/elastic/elasticsearch/issues/11774#issuecomment-172648092","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11774","id":172648092,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MjY0ODA5Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-18T20:41:16Z","updated_at":"2016-01-18T20:41:16Z","author_association":"CONTRIBUTOR","body":"I think we've just got to go with using explicit floats.  Closing\n","performed_via_github_app":null}]