{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/11441","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11441/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11441/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11441/events","html_url":"https://github.com/elastic/elasticsearch/issues/11441","id":83373179,"node_id":"MDU6SXNzdWU4MzM3MzE3OQ==","number":11441,"title":"Failed to parse date field with logstash.","user":{"login":"abcfy2","id":5327677,"node_id":"MDQ6VXNlcjUzMjc2Nzc=","avatar_url":"https://avatars3.githubusercontent.com/u/5327677?v=4","gravatar_id":"","url":"https://api.github.com/users/abcfy2","html_url":"https://github.com/abcfy2","followers_url":"https://api.github.com/users/abcfy2/followers","following_url":"https://api.github.com/users/abcfy2/following{/other_user}","gists_url":"https://api.github.com/users/abcfy2/gists{/gist_id}","starred_url":"https://api.github.com/users/abcfy2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abcfy2/subscriptions","organizations_url":"https://api.github.com/users/abcfy2/orgs","repos_url":"https://api.github.com/users/abcfy2/repos","events_url":"https://api.github.com/users/abcfy2/events{/privacy}","received_events_url":"https://api.github.com/users/abcfy2/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-06-01T08:04:14Z","updated_at":"2015-06-01T08:12:00Z","closed_at":"2015-06-01T08:11:59Z","author_association":"NONE","active_lock_reason":null,"body":"Here is logstash rubydebug result:\n\n```\n{\n     \"@timestamp\" => \"2015-06-01T07:56:39.581Z\",\n        \"message\" => \"2015-06-01 15:56:39,213 [vert.x-eventloop-thread-0] INFO  hawkeyes.rtds.monitor.MetricsVerticle  - Metrics of RTDS:\\n{DB Worker={max=2674, min=1, total=2728, count=3, avg=909.3333333333}, Realtime Cacher={max=2349, min=1000, total=2349, count=1, avg=2349}}\",\n       \"@version\" => \"1\",\n           \"tags\" => [\n        [0] \"multiline\",\n        [1] \"rtds_log\",\n        [2] \"vertx\"\n    ],\n           \"type\" => \"rtds\",\n           \"host\" => \"hawkeyesTest\",\n           \"path\" => \"/var/log/rtds/rtds.log\",\n           \"date\" => \"2015-06-01 15:56:39,213\",\n    \"thread_name\" => \"vert.x-eventloop-thread-0\",\n      \"log_level\" => \"INFO\",\n       \"verticle\" => \"hawkeyes.rtds.monitor.MetricsVerticle\",\n        \"content\" => \"Metrics of RTDS:\"\n}\n```\n\nBut elasticsearch raises an error:\n\n```\n[2015-06-01 15:56:29,906][DEBUG][action.bulk              ] [Watcher] [logstash-2015.06.01][2] failed to execute bulk item (index) index {[logstash-2015.06.01][rtds][AU2uHzNIK8Y8pKwZT0pi], source[{\"@timestamp\":\"2015-06-01T15:56:24.560+08:00\",\"message\":\"2015-06-01 15:56:24,213 [vert.x-eventloop-thread-0] INFO  hawkeyes.rtds.monitor.MetricsVerticle  - Metrics of RTDS:\\n{DB Worker={max=2674, min=1, total=2728, count=3, avg=909.3333333333}, Realtime Cacher={max=2349, min=1000, total=2349, count=1, avg=2349}}\",\"@version\":\"1\",\"tags\":[\"multiline\",\"rtds_log\",\"vertx\"],\"type\":\"rtds\",\"host\":\"hawkeyesTest\",\"path\":\"/var/log/rtds/rtds.log\",\"date\":\"2015-06-01 15:56:24,213\",\"thread_name\":\"vert.x-eventloop-thread-0\",\"log_level\":\"INFO\",\"verticle\":\"hawkeyes.rtds.monitor.MetricsVerticle\",\"content\":\"Metrics of RTDS:\"}]}\norg.elasticsearch.index.mapper.MapperParsingException: failed to parse [date]\n    at org.elasticsearch.index.mapper.core.AbstractFieldMapper.parse(AbstractFieldMapper.java:416)\n    at org.elasticsearch.index.mapper.object.ObjectMapper.serializeValue(ObjectMapper.java:709)\n    at org.elasticsearch.index.mapper.object.ObjectMapper.parse(ObjectMapper.java:500)\n    at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:542)\n    at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:491)\n    at org.elasticsearch.index.shard.service.InternalIndexShard.prepareCreate(InternalIndexShard.java:410)\n    at org.elasticsearch.action.bulk.TransportShardBulkAction.shardIndexOperation(TransportShardBulkAction.java:432)\n    at org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:149)\n    at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:512)\n    at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.elasticsearch.index.mapper.MapperParsingException: failed to parse date field [2015-06-01 15:56:24,213], tried both date format [dateOptionalTime], and timestamp number with locale []\n    at org.elasticsearch.index.mapper.core.DateFieldMapper.parseStringValue(DateFieldMapper.java:620)\n    at org.elasticsearch.index.mapper.core.DateFieldMapper.innerParseCreateField(DateFieldMapper.java:548)\n    at org.elasticsearch.index.mapper.core.NumberFieldMapper.parseCreateField(NumberFieldMapper.java:236)\n    at org.elasticsearch.index.mapper.core.AbstractFieldMapper.parse(AbstractFieldMapper.java:406)\n    ... 12 more\nCaused by: java.lang.IllegalArgumentException: Invalid format: \"2015-06-01 15:56:24,213\" is malformed at \" 15:56:24,213\"\n    at org.elasticsearch.common.joda.time.format.DateTimeFormatter.parseMillis(DateTimeFormatter.java:754)\n    at org.elasticsearch.index.mapper.core.DateFieldMapper.parseStringValue(DateFieldMapper.java:614)\n    ... 15 more\n```\n\nlogstash version: 1.4.2\nelasticsearch version: 1.4.5\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}