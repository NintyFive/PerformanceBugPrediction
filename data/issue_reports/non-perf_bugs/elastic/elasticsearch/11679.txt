{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/11679","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11679/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11679/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11679/events","html_url":"https://github.com/elastic/elasticsearch/issues/11679","id":88470384,"node_id":"MDU6SXNzdWU4ODQ3MDM4NA==","number":11679,"title":"Tribe node binding to incorrect interface after upgrade to 1.5.2","user":{"login":"nemonster","id":1417839,"node_id":"MDQ6VXNlcjE0MTc4Mzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1417839?v=4","gravatar_id":"","url":"https://api.github.com/users/nemonster","html_url":"https://github.com/nemonster","followers_url":"https://api.github.com/users/nemonster/followers","following_url":"https://api.github.com/users/nemonster/following{/other_user}","gists_url":"https://api.github.com/users/nemonster/gists{/gist_id}","starred_url":"https://api.github.com/users/nemonster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nemonster/subscriptions","organizations_url":"https://api.github.com/users/nemonster/orgs","repos_url":"https://api.github.com/users/nemonster/repos","events_url":"https://api.github.com/users/nemonster/events{/privacy}","received_events_url":"https://api.github.com/users/nemonster/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2015-06-15T16:08:10Z","updated_at":"2016-01-18T20:29:21Z","closed_at":"2016-01-18T20:29:21Z","author_association":"NONE","active_lock_reason":null,"body":"Current configuration consists of 2 tribe nodes connecting to 3 clusters, with each cluster containing 3 data nodes and a dedicated client instance.  One tribe node connects to clusters 1-2, and one\nconnects to clusters 1-3.  \n\n All the client nodes and Tribe nodes run on the same server..  This server has 2 network\ninterfaces, one is a public interface, the other is on a private interface on bond0.  Each Tribe node and Client node provide http connection via the public interface and and transport connection via the bond0 interface.  This setup works fine for both Tribe and Client in 1.4.2 but only works\nfor the Client node in 1.5.2.  The Tribe node, even when using the exact same elasticsearch.yml file as the 1.4.2 version, wants to bind to the public interface for the both the http and transport when starting up using the 1.5.2 version.\n\nLog comparison (actual values changed)\n\nStarts out:\nINFO ][node                     ] [abc-es-tribe2-t01] starting ...\nINFO ][transport                ] [abc-es-tribe2-t01] bound_address {inet[/192.168.52.62:8550]}, publish_address {inet[/192.168.52.62:8550]}\n\n8 lines later:\n\n[2015-06-02 09:05:22,242][INFO ][node                     ] [abc-es-tribe2-t01/routing] starting ...\n[2015-06-02 09:05:22,314][INFO ][transport                ] [abc-es-tribe2-t01/routing] bound_address {inet[/0.0.0.0:9301]}, publish_address {inet[/xxx.xx.12.82:9301]}\n\nThe Tribe is coming up on the correct interfaces per the elasticsearch.yml file settings.  But, when the routing starts, it binds the transport to the wrong interface, resulting in:\n\nINFO ][discovery.zen            ] [abc-es-tribe2-t01/t1] failed to send join request to master ...internal:discovery/zen/join]]; \nnested: ConnectTransportException[[abc-es-tribe2-t01/t1][inet[/xxx.xx.12.82:9302]] connect_timeout[2m]]; nested: SocketException[Network is unreachable]; ]\n\nnetwork:\n  bind_host:                    _bond0_\n  publish_host:                _bond0_\n\ntransport:\n  host: 192.168.52.62:8550\n  tcp:\n    port:                       8550-8999\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}