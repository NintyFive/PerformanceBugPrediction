{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1111","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1111/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1111/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1111/events","html_url":"https://github.com/elastic/elasticsearch/issues/1111","id":1196013,"node_id":"MDU6SXNzdWUxMTk2MDEz","number":1111,"title":"Cluster re-allocation lock option","user":{"login":"ppearcy","id":307414,"node_id":"MDQ6VXNlcjMwNzQxNA==","avatar_url":"https://avatars3.githubusercontent.com/u/307414?v=4","gravatar_id":"","url":"https://api.github.com/users/ppearcy","html_url":"https://github.com/ppearcy","followers_url":"https://api.github.com/users/ppearcy/followers","following_url":"https://api.github.com/users/ppearcy/following{/other_user}","gists_url":"https://api.github.com/users/ppearcy/gists{/gist_id}","starred_url":"https://api.github.com/users/ppearcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppearcy/subscriptions","organizations_url":"https://api.github.com/users/ppearcy/orgs","repos_url":"https://api.github.com/users/ppearcy/repos","events_url":"https://api.github.com/users/ppearcy/events{/privacy}","received_events_url":"https://api.github.com/users/ppearcy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2011-07-09T21:42:35Z","updated_at":"2011-09-24T08:22:54Z","closed_at":"2011-09-24T08:22:54Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"There is a performance hit when we remove a machine from the cluster due to shard \nreallocation and cold shards coming online. I currently have shard \nallocations throttled, with concurrent_recoveries: 1 and \nconcurrent_streams: 1. \n\nOur response times in a steady state are 25-30ms with maxes at 1-2 \nseconds. During shard reallocation, this increases by 10x, which isn't \nbad, but my clients have gotten spoiled. \n\nWhat I'd like to do is send a command to the cluster to tell it not to \nre-allocate any shards for some amount of time while a server is taken \noffline for maint, since I know that any re-allocations will pretty \nmuch be wasted work. Is this doable in 16.2 and if not would others \nconsider this a viable feature? \n\nThis would mitigate the performance hit when the machine is removed, \nbut I'd still expect some hit when it is added back. \n\nThanks!\n","closed_by":{"login":"ppearcy","id":307414,"node_id":"MDQ6VXNlcjMwNzQxNA==","avatar_url":"https://avatars3.githubusercontent.com/u/307414?v=4","gravatar_id":"","url":"https://api.github.com/users/ppearcy","html_url":"https://github.com/ppearcy","followers_url":"https://api.github.com/users/ppearcy/followers","following_url":"https://api.github.com/users/ppearcy/following{/other_user}","gists_url":"https://api.github.com/users/ppearcy/gists{/gist_id}","starred_url":"https://api.github.com/users/ppearcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppearcy/subscriptions","organizations_url":"https://api.github.com/users/ppearcy/orgs","repos_url":"https://api.github.com/users/ppearcy/repos","events_url":"https://api.github.com/users/ppearcy/events{/privacy}","received_events_url":"https://api.github.com/users/ppearcy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}