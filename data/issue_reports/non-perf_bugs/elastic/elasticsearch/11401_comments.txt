[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/245538537","html_url":"https://github.com/elastic/elasticsearch/issues/11401#issuecomment-245538537","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11401","id":245538537,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTUzODUzNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-09-08T09:08:05Z","updated_at":"2016-09-08T09:08:05Z","author_association":"CONTRIBUTOR","body":"This is at least partially solved by:\n- #17133 - limiting the size of inflight requests\n- #17396 - limiting the number of shards in a request to 1000\n- #9311 - hard limit on `from`/`size`\n- #19394 - circuit break on aggregation buckets\n\nIt would still be possible to overwhelm a client node by requesting too many enormous documents as hits, but the chances are greatly reduced\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274534066","html_url":"https://github.com/elastic/elasticsearch/issues/11401#issuecomment-274534066","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11401","id":274534066,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDUzNDA2Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-01-23T16:18:35Z","updated_at":"2017-01-23T16:18:35Z","author_association":"CONTRIBUTOR","body":"@metacret rather open a pull request where people can review it properly","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274560444","html_url":"https://github.com/elastic/elasticsearch/issues/11401#issuecomment-274560444","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11401","id":274560444,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDU2MDQ0NA==","user":{"login":"metacret","id":1091109,"node_id":"MDQ6VXNlcjEwOTExMDk=","avatar_url":"https://avatars3.githubusercontent.com/u/1091109?v=4","gravatar_id":"","url":"https://api.github.com/users/metacret","html_url":"https://github.com/metacret","followers_url":"https://api.github.com/users/metacret/followers","following_url":"https://api.github.com/users/metacret/following{/other_user}","gists_url":"https://api.github.com/users/metacret/gists{/gist_id}","starred_url":"https://api.github.com/users/metacret/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/metacret/subscriptions","organizations_url":"https://api.github.com/users/metacret/orgs","repos_url":"https://api.github.com/users/metacret/repos","events_url":"https://api.github.com/users/metacret/events{/privacy}","received_events_url":"https://api.github.com/users/metacret/received_events","type":"User","site_admin":false},"created_at":"2017-01-23T17:39:06Z","updated_at":"2017-01-23T17:39:06Z","author_association":"NONE","body":"@clintongormley it was edited on v1.7.5 branch which is the version we're using. This is the urgent hot fix to prevent our tribe nodes from being crashed by long GC pause or OOM error. I just wanted to ask you to verify how feasibly my idea will work before setting up the official PR because making PR will need huge amount of work including writing all unit tests.\r\n\r\nMy summarized idea is TransportResponseHandler should keep recording how many bytes it has processed and if that number is over the threshold, MessageChannelHandler should throw an exception before response deserialization to prevent memory allocation. It was quite tricky how to record this data because TransportResponseHandler is allocated on the fly for every shard request. So I made SearchServiceListener to keep how many bytes are processed and that information is being propagated up to TransportResponseHandler.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274562309","html_url":"https://github.com/elastic/elasticsearch/issues/11401#issuecomment-274562309","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11401","id":274562309,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDU2MjMwOQ==","user":{"login":"metacret","id":1091109,"node_id":"MDQ6VXNlcjEwOTExMDk=","avatar_url":"https://avatars3.githubusercontent.com/u/1091109?v=4","gravatar_id":"","url":"https://api.github.com/users/metacret","html_url":"https://github.com/metacret","followers_url":"https://api.github.com/users/metacret/followers","following_url":"https://api.github.com/users/metacret/following{/other_user}","gists_url":"https://api.github.com/users/metacret/gists{/gist_id}","starred_url":"https://api.github.com/users/metacret/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/metacret/subscriptions","organizations_url":"https://api.github.com/users/metacret/orgs","repos_url":"https://api.github.com/users/metacret/repos","events_url":"https://api.github.com/users/metacret/events{/privacy}","received_events_url":"https://api.github.com/users/metacret/received_events","type":"User","site_admin":false},"created_at":"2017-01-23T17:45:36Z","updated_at":"2017-01-23T17:45:36Z","author_association":"NONE","body":"I couldn't find easy solution to Install the circuit breaker in handleResponse because it was very hard for me find out how to release everything.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/377364716","html_url":"https://github.com/elastic/elasticsearch/issues/11401#issuecomment-377364716","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11401","id":377364716,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NzM2NDcxNg==","user":{"login":"tomcallahan","id":15988488,"node_id":"MDQ6VXNlcjE1OTg4NDg4","avatar_url":"https://avatars1.githubusercontent.com/u/15988488?v=4","gravatar_id":"","url":"https://api.github.com/users/tomcallahan","html_url":"https://github.com/tomcallahan","followers_url":"https://api.github.com/users/tomcallahan/followers","following_url":"https://api.github.com/users/tomcallahan/following{/other_user}","gists_url":"https://api.github.com/users/tomcallahan/gists{/gist_id}","starred_url":"https://api.github.com/users/tomcallahan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomcallahan/subscriptions","organizations_url":"https://api.github.com/users/tomcallahan/orgs","repos_url":"https://api.github.com/users/tomcallahan/repos","events_url":"https://api.github.com/users/tomcallahan/events{/privacy}","received_events_url":"https://api.github.com/users/tomcallahan/received_events","type":"User","site_admin":false},"created_at":"2018-03-29T20:37:49Z","updated_at":"2018-03-29T20:37:49Z","author_association":"CONTRIBUTOR","body":"Closing as a duplicate of #9310 ","performed_via_github_app":null}]