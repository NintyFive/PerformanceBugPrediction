[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/101286877","html_url":"https://github.com/elastic/elasticsearch/issues/11107#issuecomment-101286877","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11107","id":101286877,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMTI4Njg3Nw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-05-12T13:44:57Z","updated_at":"2015-05-12T13:44:57Z","author_association":"CONTRIBUTOR","body":"In general the balance algorithm is \"simple\" in that it doesn't look into the future. It just tries to make the best decision it can at the time and it doesn't try to take a long view. I expect this kind of thing, unfortunately.\n\nNote also that it doesn't take into account the size of the shards except to make sure that it doesn't fill up the disk.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/101348346","html_url":"https://github.com/elastic/elasticsearch/issues/11107#issuecomment-101348346","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11107","id":101348346,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMTM0ODM0Ng==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2015-05-12T17:00:40Z","updated_at":"2015-05-12T17:00:40Z","author_association":"MEMBER","body":"@nik9000 thx\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/102552803","html_url":"https://github.com/elastic/elasticsearch/issues/11107#issuecomment-102552803","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11107","id":102552803,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMjU1MjgwMw==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2015-05-16T00:18:45Z","updated_at":"2015-05-16T00:18:45Z","author_association":"MEMBER","body":"Does it try to balance the # of shards per index across the nodes as part of this \"intermediate\" move?  For this incident, the 2 34Gb shards that got moved to \"6\" in the beginning are 2 replica shards (different shard #s) for the same index.  And this index has 5 shards (1 replica) = 10 shards total, but the cluster has 15 data nodes.  Not sure if it decided to move one of the 2 shards immediately to another node because of the size imbalance, or the shards per index per node imbalance.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/102566247","html_url":"https://github.com/elastic/elasticsearch/issues/11107#issuecomment-102566247","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11107","id":102566247,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMjU2NjI0Nw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-05-16T02:45:05Z","updated_at":"2015-05-16T02:45:05Z","author_association":"CONTRIBUTOR","body":"I'm not sure why. Its sometimes difficult to be sure why the movement code\nmakes the decisions it makes. You should probably have a look at the\ntotal_shards_per_node setting - it might be useful to prevent these large\nshards from moving together.\n\nOn Fri, May 15, 2015 at 8:18 PM, Pius notifications@github.com wrote:\n\n> Does it try to balance the # of shards per index across the nodes as part\n> of this \"intermediate\" move? For this incident, the 2 34Gb shards that got\n> moved to \"6\" in the beginning are 2 replica shards (different shard #s) for\n> the same index. And this index has 5 shards (1 replica) = 10 shards total,\n> but the cluster has 15 data nodes. Not sure if it decided to move one of\n> the 2 shards immediately to another node because of the size imbalance, or\n> the shards per index per node imbalance.\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/elastic/elasticsearch/issues/11107#issuecomment-102552803\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/172625970","html_url":"https://github.com/elastic/elasticsearch/issues/11107#issuecomment-172625970","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11107","id":172625970,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MjYyNTk3MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-18T19:12:41Z","updated_at":"2016-01-18T19:12:41Z","author_association":"CONTRIBUTOR","body":"This process has been greatly improved since 1.4. Closing\n","performed_via_github_app":null}]