[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/112139410","html_url":"https://github.com/elastic/elasticsearch/issues/11681#issuecomment-112139410","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11681","id":112139410,"node_id":"MDEyOklzc3VlQ29tbWVudDExMjEzOTQxMA==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2015-06-15T17:02:14Z","updated_at":"2015-06-15T17:02:14Z","author_association":"MEMBER","body":"@mimiyan which version do you witness this behavior with? It should be much better in 1.6.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/112146380","html_url":"https://github.com/elastic/elasticsearch/issues/11681#issuecomment-112146380","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11681","id":112146380,"node_id":"MDEyOklzc3VlQ29tbWVudDExMjE0NjM4MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-15T17:25:16Z","updated_at":"2015-06-15T17:25:16Z","author_association":"CONTRIBUTOR","body":"@mimiyan also what errors are you seeing in the logs?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/112149906","html_url":"https://github.com/elastic/elasticsearch/issues/11681#issuecomment-112149906","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11681","id":112149906,"node_id":"MDEyOklzc3VlQ29tbWVudDExMjE0OTkwNg==","user":{"login":"mimiyan","id":12898484,"node_id":"MDQ6VXNlcjEyODk4NDg0","avatar_url":"https://avatars2.githubusercontent.com/u/12898484?v=4","gravatar_id":"","url":"https://api.github.com/users/mimiyan","html_url":"https://github.com/mimiyan","followers_url":"https://api.github.com/users/mimiyan/followers","following_url":"https://api.github.com/users/mimiyan/following{/other_user}","gists_url":"https://api.github.com/users/mimiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/mimiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mimiyan/subscriptions","organizations_url":"https://api.github.com/users/mimiyan/orgs","repos_url":"https://api.github.com/users/mimiyan/repos","events_url":"https://api.github.com/users/mimiyan/events{/privacy}","received_events_url":"https://api.github.com/users/mimiyan/received_events","type":"User","site_admin":false},"created_at":"2015-06-15T17:40:57Z","updated_at":"2015-06-15T17:40:57Z","author_association":"NONE","body":"I am using version 1.5.\n\nThe logs show:\n2015-05-22 08:32:25,311][WARN ][indices.cluster ] .....marking and sending shard failed due to [failed recovery]\n[2015-05-22 08:32:25,312][WARN ][cluster.action.shard ] [node1] [messages-20150509][0] received shard failed for [messages-20150509][0], node[8YxdI8jsThuwjUk1qzjvaA], [P], s[INITIALIZING], indexUUID [bHbn-05QSYSB9GTuZxZjHA], reason [shard failure [failed recovery][IndexShardGatewayRecoveryException[messages-20150509][0] failed recovery]; nested: EngineCreationFailureException[messages-20150509][0] failed to upgrade 3x segments]; nested: EOFException[read past EOF: NIOFSIndexInput(path=\"/data/.../index/segments_6\")]; ]]\n\nThe above messages keep popping up every 10 seconds.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/112151507","html_url":"https://github.com/elastic/elasticsearch/issues/11681#issuecomment-112151507","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11681","id":112151507,"node_id":"MDEyOklzc3VlQ29tbWVudDExMjE1MTUwNw==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-06-15T17:48:13Z","updated_at":"2015-06-15T17:48:13Z","author_association":"MEMBER","body":"@mimiyan how many nodes do you have in the cluster? If there is no other node to put the shard, I suspect you run into https://github.com/elastic/elasticsearch/pull/10558 ...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/112159810","html_url":"https://github.com/elastic/elasticsearch/issues/11681#issuecomment-112159810","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11681","id":112159810,"node_id":"MDEyOklzc3VlQ29tbWVudDExMjE1OTgxMA==","user":{"login":"mimiyan","id":12898484,"node_id":"MDQ6VXNlcjEyODk4NDg0","avatar_url":"https://avatars2.githubusercontent.com/u/12898484?v=4","gravatar_id":"","url":"https://api.github.com/users/mimiyan","html_url":"https://github.com/mimiyan","followers_url":"https://api.github.com/users/mimiyan/followers","following_url":"https://api.github.com/users/mimiyan/following{/other_user}","gists_url":"https://api.github.com/users/mimiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/mimiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mimiyan/subscriptions","organizations_url":"https://api.github.com/users/mimiyan/orgs","repos_url":"https://api.github.com/users/mimiyan/repos","events_url":"https://api.github.com/users/mimiyan/events{/privacy}","received_events_url":"https://api.github.com/users/mimiyan/received_events","type":"User","site_admin":false},"created_at":"2015-06-15T18:17:05Z","updated_at":"2015-06-15T18:17:05Z","author_association":"NONE","body":"@bleskes We only have 1 node in our cluster now.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/112449982","html_url":"https://github.com/elastic/elasticsearch/issues/11681#issuecomment-112449982","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11681","id":112449982,"node_id":"MDEyOklzc3VlQ29tbWVudDExMjQ0OTk4Mg==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-06-16T14:27:48Z","updated_at":"2015-06-16T14:27:48Z","author_association":"MEMBER","body":"@mimiyan I see. In this case the no other options and there is no way to recovery. I agree we shouldn't spin with endless attempts. A temporary work around would be to move the corrupted shard folder. Note that your index will stay red as they is no other copy to use. You can issue a manual _reroute command to force allocation of a new _empty_ primary.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/112450853","html_url":"https://github.com/elastic/elasticsearch/issues/11681#issuecomment-112450853","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11681","id":112450853,"node_id":"MDEyOklzc3VlQ29tbWVudDExMjQ1MDg1Mw==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-06-16T14:31:55Z","updated_at":"2015-06-16T14:32:05Z","author_association":"MEMBER","body":"at second thought - https://github.com/elastic/elasticsearch/pull/11269 (released in 1.6.0) should fix this (we will no longer think the shard copy is good during assignment, only to discover it's bad in recovery). I'm going to close this as we got to the root cause of the matter. If upgrading to 1.6.0 somehow doesn't help please do reopen.\n","performed_via_github_app":null}]