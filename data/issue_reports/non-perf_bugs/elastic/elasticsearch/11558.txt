{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/11558","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11558/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11558/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11558/events","html_url":"https://github.com/elastic/elasticsearch/issues/11558","id":86649227,"node_id":"MDU6SXNzdWU4NjY0OTIyNw==","number":11558,"title":"Getting no results while using TermVector API with Transport Client","user":{"login":"apanimesh061","id":3243029,"node_id":"MDQ6VXNlcjMyNDMwMjk=","avatar_url":"https://avatars2.githubusercontent.com/u/3243029?v=4","gravatar_id":"","url":"https://api.github.com/users/apanimesh061","html_url":"https://github.com/apanimesh061","followers_url":"https://api.github.com/users/apanimesh061/followers","following_url":"https://api.github.com/users/apanimesh061/following{/other_user}","gists_url":"https://api.github.com/users/apanimesh061/gists{/gist_id}","starred_url":"https://api.github.com/users/apanimesh061/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apanimesh061/subscriptions","organizations_url":"https://api.github.com/users/apanimesh061/orgs","repos_url":"https://api.github.com/users/apanimesh061/repos","events_url":"https://api.github.com/users/apanimesh061/events{/privacy}","received_events_url":"https://api.github.com/users/apanimesh061/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-06-09T16:02:42Z","updated_at":"2015-06-10T07:23:45Z","closed_at":"2015-06-10T07:23:44Z","author_association":"NONE","active_lock_reason":null,"body":"``` scala\nclass jClient(clusterName: String, ip: String=\"localhost\", port: Int=9300) {\n  def initTC: Client = {\n    val new_setting: ImmutableSettings.Builder = ImmutableSettings.builder().put(\"cluster.name\", clusterName)\n    var transportClient: TransportClient = new TransportClient(new_setting)\n    transportClient = transportClient.addTransportAddress(new InetSocketTransportAddress(ip, port))\n    transportClient\n  }\n  def init: Client = {\n    val new_setting: ImmutableSettings.Builder = ImmutableSettings.builder().put(\"cluster.name\", clusterName)\n    val nodeBuilder: NodeBuilder = NodeBuilder.nodeBuilder().settings(new_setting).local(false)\n    val node: Node = nodeBuilder.node()\n    val client: Client = node.client()\n    client\n  }\n}\n\nclass termVectors {\n  def getTermsVector(client: Client, index: String, `type`: String, id: String, field: String) {\n    val builder = new TermVectorRequestBuilder(client, index, `type`, id).setSelectedFields(field)\n    builder.setTermStatistics(true).setFieldStatistics(true)\n    builder.execute(new ActionListener[TermVectorResponse] {\n      def onResponse(response: TermVectorResponse) {\n        val builder = XContentFactory.contentBuilder(XContentType.JSON).prettyPrint()\n        response.toXContent(builder, ToXContent.EMPTY_PARAMS)\n        println(\"TermsVector: \" + builder.string)\n        client.close()\n      }\n      def onFailure(e: Throwable) {e.printStackTrace}\n    })\n  }\n}\n\nobject TestTV {\n  def main(args: Array[String]) {\n    val client = new jClient(\"elasticsearch\").initTC\n   // val client = new jClient(\"elasticsearch\").init      //this works but very slow\n    val temp = new termVectors()\n    temp.getTermsVector(client, \"new_index\", \"documents\", \"AP890101-0056\", \"text\")\n   }\n}\n```\n\nI am trying to retrieve Term Vector of a document using Scala. I am using Elasticsearch 1.5.2 with Scala 2.10.5.\nHere, if I use `NodeBuilder` I get the answer but it is very slow, like 7-9 seconds for one vector. I do not get any answer using the `TransportClient`. The code compiles correctly in both cases.\n\nWhat should I do to increase speed and make `TransportClient` work?\n","closed_by":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"performed_via_github_app":null}