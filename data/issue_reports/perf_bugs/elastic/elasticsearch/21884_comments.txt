[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/263881520","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-263881520","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":263881520,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzg4MTUyMA==","user":{"login":"gehel","id":1415765,"node_id":"MDQ6VXNlcjE0MTU3NjU=","avatar_url":"https://avatars1.githubusercontent.com/u/1415765?v=4","gravatar_id":"","url":"https://api.github.com/users/gehel","html_url":"https://github.com/gehel","followers_url":"https://api.github.com/users/gehel/followers","following_url":"https://api.github.com/users/gehel/following{/other_user}","gists_url":"https://api.github.com/users/gehel/gists{/gist_id}","starred_url":"https://api.github.com/users/gehel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gehel/subscriptions","organizations_url":"https://api.github.com/users/gehel/orgs","repos_url":"https://api.github.com/users/gehel/repos","events_url":"https://api.github.com/users/gehel/events{/privacy}","received_events_url":"https://api.github.com/users/gehel/received_events","type":"User","site_admin":false},"created_at":"2016-11-30T14:07:13Z","updated_at":"2016-11-30T14:07:13Z","author_association":"NONE","body":"For the record, this is tracked on our side at https://phabricator.wikimedia.org/T145065","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264212202","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-264212202","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":264212202,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDIxMjIwMg==","user":{"login":"boogie-byte","id":1032554,"node_id":"MDQ6VXNlcjEwMzI1NTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/1032554?v=4","gravatar_id":"","url":"https://api.github.com/users/boogie-byte","html_url":"https://github.com/boogie-byte","followers_url":"https://api.github.com/users/boogie-byte/followers","following_url":"https://api.github.com/users/boogie-byte/following{/other_user}","gists_url":"https://api.github.com/users/boogie-byte/gists{/gist_id}","starred_url":"https://api.github.com/users/boogie-byte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/boogie-byte/subscriptions","organizations_url":"https://api.github.com/users/boogie-byte/orgs","repos_url":"https://api.github.com/users/boogie-byte/repos","events_url":"https://api.github.com/users/boogie-byte/events{/privacy}","received_events_url":"https://api.github.com/users/boogie-byte/received_events","type":"User","site_admin":false},"created_at":"2016-12-01T15:59:02Z","updated_at":"2016-12-01T15:59:02Z","author_association":"NONE","body":"We have exactly the same issue.\r\n```\r\n# /usr/share/elasticsearch/bin/elasticsearch --version\r\nVersion: 2.3.2, Build: b9e4a6a/2016-04-21T16:03:47Z, JVM: 1.7.0_79\r\n```\r\nInstalled plugins:\r\n- marvel-agent\r\n- repository-hdfs\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264727749","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-264727749","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":264727749,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDcyNzc0OQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-12-04T20:15:02Z","updated_at":"2016-12-04T20:15:02Z","author_association":"MEMBER","body":"@gehel do you have option to repeat the experiment and debug it? most specifically I'm interested to see if the synced flush in step 2 actually worked. It's a best effort api and it reports it's success in the response - do you check for that? Also, we can validate it worked by looking at shard level stats but any indexing might violate it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264728106","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-264728106","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":264728106,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDcyODEwNg==","user":{"login":"gehel","id":1415765,"node_id":"MDQ6VXNlcjE0MTU3NjU=","avatar_url":"https://avatars1.githubusercontent.com/u/1415765?v=4","gravatar_id":"","url":"https://api.github.com/users/gehel","html_url":"https://github.com/gehel","followers_url":"https://api.github.com/users/gehel/followers","following_url":"https://api.github.com/users/gehel/following{/other_user}","gists_url":"https://api.github.com/users/gehel/gists{/gist_id}","starred_url":"https://api.github.com/users/gehel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gehel/subscriptions","organizations_url":"https://api.github.com/users/gehel/orgs","repos_url":"https://api.github.com/users/gehel/repos","events_url":"https://api.github.com/users/gehel/events{/privacy}","received_events_url":"https://api.github.com/users/gehel/received_events","type":"User","site_admin":false},"created_at":"2016-12-04T20:19:57Z","updated_at":"2016-12-04T20:19:57Z","author_association":"NONE","body":"@bleskes Yes, I can repeat the experiment. I did check the results of synced flush and did not see any issue there. I can check again.\r\n\r\nI have a full cluster restart comping up for this week, if you have a list of things to check during that restart, I'll be more than happy to collect any helpful data!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264728572","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-264728572","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":264728572,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDcyODU3Mg==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-12-04T20:26:58Z","updated_at":"2016-12-04T20:26:58Z","author_association":"MEMBER","body":"Here a few things to try:\r\n\r\n1) Check the output of the synced flush to see all shards were synced flushed\r\n2) Check  `GET {index}/_stats?level=shards` output and look at the `commit` section and you should see the synced flush id . It should be the same between primaries and replicas of the same shard. This can be verbose so maybe use `filter_path` to trim it down.\r\n3) Enable trace logging on `indices.recovery`. This will give us full insights into the decision process made by the recovery logic.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265178863","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-265178863","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":265178863,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTE3ODg2Mw==","user":{"login":"gehel","id":1415765,"node_id":"MDQ6VXNlcjE0MTU3NjU=","avatar_url":"https://avatars1.githubusercontent.com/u/1415765?v=4","gravatar_id":"","url":"https://api.github.com/users/gehel","html_url":"https://github.com/gehel","followers_url":"https://api.github.com/users/gehel/followers","following_url":"https://api.github.com/users/gehel/following{/other_user}","gists_url":"https://api.github.com/users/gehel/gists{/gist_id}","starred_url":"https://api.github.com/users/gehel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gehel/subscriptions","organizations_url":"https://api.github.com/users/gehel/orgs","repos_url":"https://api.github.com/users/gehel/repos","events_url":"https://api.github.com/users/gehel/events{/privacy}","received_events_url":"https://api.github.com/users/gehel/received_events","type":"User","site_admin":false},"created_at":"2016-12-06T15:27:32Z","updated_at":"2016-12-06T15:27:32Z","author_association":"NONE","body":"I'm digging into this and I'm finding a few things. First, I do see failures of flushing some shards, because of \"pending operations\". I see 31 failures on a total of ~3K indices. Unsurprisingly, some of the failures are on our high traffic / large size indices, but some are also on smaller indices.\r\n\r\nIf I understand correctly that probably means that contrary to my belief, we still have some writes going on. I'll continue digging in this direction.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265191551","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-265191551","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":265191551,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTE5MTU1MQ==","user":{"login":"gehel","id":1415765,"node_id":"MDQ6VXNlcjE0MTU3NjU=","avatar_url":"https://avatars1.githubusercontent.com/u/1415765?v=4","gravatar_id":"","url":"https://api.github.com/users/gehel","html_url":"https://github.com/gehel","followers_url":"https://api.github.com/users/gehel/followers","following_url":"https://api.github.com/users/gehel/following{/other_user}","gists_url":"https://api.github.com/users/gehel/gists{/gist_id}","starred_url":"https://api.github.com/users/gehel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gehel/subscriptions","organizations_url":"https://api.github.com/users/gehel/orgs","repos_url":"https://api.github.com/users/gehel/repos","events_url":"https://api.github.com/users/gehel/events{/privacy}","received_events_url":"https://api.github.com/users/gehel/received_events","type":"User","site_admin":false},"created_at":"2016-12-06T16:10:30Z","updated_at":"2016-12-06T16:10:30Z","author_association":"NONE","body":"Digging further, I also see the shard mgwiki_content_first[0]` being recovered from another node\r\n\r\n    [2016-12-06 15:47:31,391][TRACE][indices.recovery         ] [elastic2002] [mgwiki_content_first][0] starting recovery from {elastic2012}{TLb2tIskQlaLTa3ibtQ_og}{10.192.16.148}{10.192.16.148:9300}{rack=B8, row=B, master=false}\r\n\r\nThat shard was flushed without failure:\r\n\r\n    \"mgwiki_content_first\" : {\r\n      \"total\" : 3,\r\n      \"successful\" : 3,\r\n      \"failed\" : 0\r\n    },\r\n\r\nand the `sync_id`s were identical on all copies after the flush:\r\n\r\n    \"mgwiki_content_first\" : {\r\n      \"shards\" : {\r\n        \"0\" : [ {\r\n          \"commit\" : {\r\n            \"id\" : \"TbkUWvbthd6WbrLXrFG1sA==\",\r\n            \"generation\" : 42383,\r\n            \"user_data\" : {\r\n              \"sync_id\" : \"AVjUsu2snwYQ9LxOcJzQ\",\r\n              \"translog_uuid\" : \"iesOxXkjSCiS4O5bW8pE-g\",\r\n              \"translog_generation\" : \"807\"\r\n            },\r\n            \"num_docs\" : 117992\r\n          }\r\n        }, {\r\n          \"commit\" : {\r\n            \"id\" : \"hOeITyQpv6biwUx4OQV06g==\",\r\n            \"generation\" : 42382,\r\n            \"user_data\" : {\r\n              \"sync_id\" : \"AVjUsu2snwYQ9LxOcJzQ\",\r\n              \"translog_uuid\" : \"lFrUP_ZDT9eH3b-JFsrbLA\",\r\n              \"translog_generation\" : \"810\"\r\n            },\r\n            \"num_docs\" : 117992\r\n          }\r\n        }, {\r\n          \"commit\" : {\r\n            \"id\" : \"tIi13S81XgWbMXu5CPv4wQ==\",\r\n            \"generation\" : 42383,\r\n            \"user_data\" : {\r\n              \"sync_id\" : \"AVjUsu2snwYQ9LxOcJzQ\",\r\n              \"translog_uuid\" : \"HWxI6X-cTpyJZrFj2xsrxg\",\r\n              \"translog_generation\" : \"846\"\r\n            },\r\n            \"num_docs\" : 117992\r\n          }\r\n        } ]\r\n      }\r\n    },\r\n\r\nBy the time that shard was being recovered, the `syn_id` had changed, but the number of documents is still the same.\r\n\r\n    \"mgwiki_content_first\" : {\r\n      \"shards\" : {\r\n        \"0\" : [ {\r\n          \"commit\" : {\r\n            \"id\" : \"hOeITyQpv6biwUx4OQV75Q==\",\r\n            \"generation\" : 42386,\r\n            \"user_data\" : {\r\n              \"translog_uuid\" : \"lFrUP_ZDT9eH3b-JFsrbLA\",\r\n              \"sync_id\" : \"AVjUy6z-8YIXoWOFGpQ4\",\r\n              \"translog_generation\" : \"812\"\r\n            },\r\n            \"num_docs\" : 117992\r\n          }\r\n        }, {\r\n          \"commit\" : {\r\n            \"id\" : \"TbkUWvbthd6WbrLXrFG8xQ==\",\r\n            \"generation\" : 42387,\r\n            \"user_data\" : {\r\n              \"translog_uuid\" : \"iesOxXkjSCiS4O5bW8pE-g\",\r\n              \"sync_id\" : \"AVjUy6z-8YIXoWOFGpQ4\",\r\n              \"translog_generation\" : \"809\"\r\n            },\r\n            \"num_docs\" : 117992\r\n          }\r\n        }, {\r\n          \"commit\" : {\r\n            \"id\" : \"hOeITyQpv6biwUx4OQV75Q==\",\r\n            \"generation\" : 42386,\r\n            \"user_data\" : {\r\n              \"translog_uuid\" : \"lFrUP_ZDT9eH3b-JFsrbLA\",\r\n              \"sync_id\" : \"AVjUy6z-8YIXoWOFGpQ4\",\r\n              \"translog_generation\" : \"812\"\r\n            },\r\n            \"num_docs\" : 117992\r\n          }\r\n        } ]\r\n      }\r\n    },\r\n\r\nI'm not really sure what all this means...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265256430","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-265256430","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":265256430,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTI1NjQzMA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-12-06T19:59:27Z","updated_at":"2016-12-06T19:59:27Z","author_association":"MEMBER","body":">being recovered from another node\r\n\r\nShards are still recovered when synced flush (we need to compare the id) but it's very quick.\r\n\r\n> I'm not really sure what all this means...\r\n\r\nThis means that there was another sync flush and the shards got a new `sync_id`. Since the total doc count is the same, I presume some docs were updated and after 5m of inactivity the shards were automatically synced flushed.\r\n\r\nI'm going  to close this for now. Please do reopen if things look wrong again.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265264223","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-265264223","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":265264223,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTI2NDIyMw==","user":{"login":"gehel","id":1415765,"node_id":"MDQ6VXNlcjE0MTU3NjU=","avatar_url":"https://avatars1.githubusercontent.com/u/1415765?v=4","gravatar_id":"","url":"https://api.github.com/users/gehel","html_url":"https://github.com/gehel","followers_url":"https://api.github.com/users/gehel/followers","following_url":"https://api.github.com/users/gehel/following{/other_user}","gists_url":"https://api.github.com/users/gehel/gists{/gist_id}","starred_url":"https://api.github.com/users/gehel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gehel/subscriptions","organizations_url":"https://api.github.com/users/gehel/orgs","repos_url":"https://api.github.com/users/gehel/repos","events_url":"https://api.github.com/users/gehel/events{/privacy}","received_events_url":"https://api.github.com/users/gehel/received_events","type":"User","site_admin":false},"created_at":"2016-12-06T20:33:23Z","updated_at":"2016-12-06T20:33:23Z","author_association":"NONE","body":"We actually still had writes going on. We found the source. I'm going to do another try tomorrow and see if I have the same result.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265459584","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-265459584","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":265459584,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTQ1OTU4NA==","user":{"login":"gehel","id":1415765,"node_id":"MDQ6VXNlcjE0MTU3NjU=","avatar_url":"https://avatars1.githubusercontent.com/u/1415765?v=4","gravatar_id":"","url":"https://api.github.com/users/gehel","html_url":"https://github.com/gehel","followers_url":"https://api.github.com/users/gehel/followers","following_url":"https://api.github.com/users/gehel/following{/other_user}","gists_url":"https://api.github.com/users/gehel/gists{/gist_id}","starred_url":"https://api.github.com/users/gehel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gehel/subscriptions","organizations_url":"https://api.github.com/users/gehel/orgs","repos_url":"https://api.github.com/users/gehel/repos","events_url":"https://api.github.com/users/gehel/events{/privacy}","received_events_url":"https://api.github.com/users/gehel/received_events","type":"User","site_admin":false},"created_at":"2016-12-07T14:23:44Z","updated_at":"2016-12-07T14:23:44Z","author_association":"NONE","body":"With writes properly disabled, it works much better :) We are still having issues with one of our index, but this needs some more investigation on our side.\r\n\r\n@bleskes thanks a lot for the help!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265512954","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-265512954","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":265512954,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTUxMjk1NA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-12-07T17:26:38Z","updated_at":"2016-12-07T17:26:38Z","author_association":"MEMBER","body":"YW! thanks for coming back to report.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/351958494","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-351958494","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":351958494,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTk1ODQ5NA==","user":{"login":"larschri","id":77080,"node_id":"MDQ6VXNlcjc3MDgw","avatar_url":"https://avatars3.githubusercontent.com/u/77080?v=4","gravatar_id":"","url":"https://api.github.com/users/larschri","html_url":"https://github.com/larschri","followers_url":"https://api.github.com/users/larschri/followers","following_url":"https://api.github.com/users/larschri/following{/other_user}","gists_url":"https://api.github.com/users/larschri/gists{/gist_id}","starred_url":"https://api.github.com/users/larschri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/larschri/subscriptions","organizations_url":"https://api.github.com/users/larschri/orgs","repos_url":"https://api.github.com/users/larschri/repos","events_url":"https://api.github.com/users/larschri/events{/privacy}","received_events_url":"https://api.github.com/users/larschri/received_events","type":"User","site_admin":false},"created_at":"2017-12-15T09:34:20Z","updated_at":"2017-12-15T09:42:02Z","author_association":"NONE","body":"> Steps to reproduce:\r\n> \r\n> 1. disable writes to the cluster\r\n> 1. synced flush\r\n> 1. set shard allocation to primaries\r\n> 1. restart a node\r\n> 1. set shard allocation to all\r\n> 1. wait\r\n\r\nManual synced flush is worthless in some cases. The `sync_id`s will be overwritten when shards are marked as inactive, even if a synced flush was executed. This happens after 5 minutes (`indices.memory.shard_inactive_time`) by default, so it might be a lot quicker to wait for all indices to become inactive, instead of relying on synced flush.\r\n\r\nhttps://discuss.elastic.co/t/shard-sync-id-keeps-changing-in-read-only-cluster-es-5-5/110835","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/351983762","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-351983762","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":351983762,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTk4Mzc2Mg==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2017-12-15T11:31:02Z","updated_at":"2017-12-15T11:31:02Z","author_association":"MEMBER","body":"@larschri This is indeed a shortcoming of the current logic. The synced flush triggered by the inactivity forces a new sync id while the node is offline and thus when it comes back online it's marker is different. This is all not an issue with version 6.0 since the new ops based recovery will kick in and and recovery will be just as quick. It is, however, something that we should fix for 5.6. Can you please open a new issue? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/351985394","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-351985394","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":351985394,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTk4NTM5NA==","user":{"login":"larschri","id":77080,"node_id":"MDQ6VXNlcjc3MDgw","avatar_url":"https://avatars3.githubusercontent.com/u/77080?v=4","gravatar_id":"","url":"https://api.github.com/users/larschri","html_url":"https://github.com/larschri","followers_url":"https://api.github.com/users/larschri/followers","following_url":"https://api.github.com/users/larschri/following{/other_user}","gists_url":"https://api.github.com/users/larschri/gists{/gist_id}","starred_url":"https://api.github.com/users/larschri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/larschri/subscriptions","organizations_url":"https://api.github.com/users/larschri/orgs","repos_url":"https://api.github.com/users/larschri/repos","events_url":"https://api.github.com/users/larschri/events{/privacy}","received_events_url":"https://api.github.com/users/larschri/received_events","type":"User","site_admin":false},"created_at":"2017-12-15T11:39:57Z","updated_at":"2017-12-15T11:39:57Z","author_association":"NONE","body":"@bleskes https://github.com/elastic/elasticsearch/issues/27838","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352000527","html_url":"https://github.com/elastic/elasticsearch/issues/21884#issuecomment-352000527","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21884","id":352000527,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjAwMDUyNw==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2017-12-15T13:02:29Z","updated_at":"2017-12-15T13:02:29Z","author_association":"MEMBER","body":"Thanks @larschri!\n\nOn Fri, Dec 15, 2017 at 12:40 PM, Lars Christian Jensen <\nnotifications@github.com> wrote:\n\n> @bleskes <https://github.com/bleskes> #27838\n> <https://github.com/elastic/elasticsearch/issues/27838>\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/elastic/elasticsearch/issues/21884#issuecomment-351985394>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AA9bJ5cjbhQD4Wgf_m0kaNsdfQ1LoFVwks5tAlqagaJpZM4LAOWo>\n> .\n>\n","performed_via_github_app":null}]