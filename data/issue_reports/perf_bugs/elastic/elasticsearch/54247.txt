{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/54247","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54247/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54247/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54247/events","html_url":"https://github.com/elastic/elasticsearch/issues/54247","id":588183060,"node_id":"MDU6SXNzdWU1ODgxODMwNjA=","number":54247,"title":" ILM warm phase is stuck in the segment-count step, but no error log output","user":{"login":"zhousPole","id":38309664,"node_id":"MDQ6VXNlcjM4MzA5NjY0","avatar_url":"https://avatars2.githubusercontent.com/u/38309664?v=4","gravatar_id":"","url":"https://api.github.com/users/zhousPole","html_url":"https://github.com/zhousPole","followers_url":"https://api.github.com/users/zhousPole/followers","following_url":"https://api.github.com/users/zhousPole/following{/other_user}","gists_url":"https://api.github.com/users/zhousPole/gists{/gist_id}","starred_url":"https://api.github.com/users/zhousPole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhousPole/subscriptions","organizations_url":"https://api.github.com/users/zhousPole/orgs","repos_url":"https://api.github.com/users/zhousPole/repos","events_url":"https://api.github.com/users/zhousPole/events{/privacy}","received_events_url":"https://api.github.com/users/zhousPole/received_events","type":"User","site_admin":false},"labels":[{"id":912828538,"node_id":"MDU6TGFiZWw5MTI4Mjg1Mzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/ILM+SLM","name":":Core/Features/ILM+SLM","color":"0e8a16","default":false,"description":"Index and Snapshot lifecycle management"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-03-26T06:17:11Z","updated_at":"2020-03-27T15:32:23Z","closed_at":"2020-03-27T15:32:23Z","author_association":"NONE","active_lock_reason":null,"body":"  (elasticsearch 6.8.0)\r\n   I am using ilm management index,shrink and forcemerge are configured during the warm phase and max_num_segments configured to 1.The index is stuck in a segment-count step, however, changing the log level to trace, background without any error log output, The query is forcemerge the task is empty, my index always has a part shard can not complete. but when i remove the shrink action of warm phase, index can go to the next stage normally.\r\n  My suspicion is that when the shrink is completed shard, it redistributes, causing some of the shard to be migrated to other nodes, but forcemerge does not perform at other nodes,\r\n The final part of the shard can not be completed forcemerge, leading ilm to wait indefinitely for the segment-count step, Is that possible?\r\n  What if shrink affected forcemerge, Then warm phase how to configure shrink and forcemerge, at the same time because after configuration at the same time index may always wait in segment-count steps.\r\n    \r\n","closed_by":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"performed_via_github_app":null}