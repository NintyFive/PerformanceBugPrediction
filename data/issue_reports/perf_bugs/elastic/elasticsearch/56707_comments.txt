[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/628155530","html_url":"https://github.com/elastic/elasticsearch/issues/56707#issuecomment-628155530","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56707","id":628155530,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODE1NTUzMA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-05-13T18:05:06Z","updated_at":"2020-05-13T18:05:06Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/Cluster Coordination)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/628166618","html_url":"https://github.com/elastic/elasticsearch/issues/56707#issuecomment-628166618","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56707","id":628166618,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODE2NjYxOA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-05-13T18:26:09Z","updated_at":"2020-05-13T18:26:09Z","author_association":"CONTRIBUTOR","body":"Thanks @Bukhtawar, I think this is a good observation.\r\n\r\nI don't think we can reasonably cancel the IO on which the publication is waiting, nor can we safely take much further action (e.g. standing down as leader) while waiting for that IO to complete.\r\n\r\nThe thing that concerns me is that the leader continues to report itself as healthy throughout, so the other nodes don't have an opportunity to ditch the faulty leader and elect a healthy one in its place. I think we should strengthen these health checks to account for this failure mode.\r\n\r\nI [still think there's something wrong with your underlying system](https://github.com/elastic/elasticsearch/issues/40326#issuecomment-477193977) that causes IO to hang for such long periods rather than returning an error.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/628472680","html_url":"https://github.com/elastic/elasticsearch/issues/56707#issuecomment-628472680","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56707","id":628472680,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODQ3MjY4MA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-05-14T08:15:59Z","updated_at":"2020-05-14T08:15:59Z","author_association":"CONTRIBUTOR","body":"> I don't think we can reasonably cancel the IO on which the publication is waiting\r\n\r\nI've changed my mind, I think I can see a way to impose a timeout on this IO that's not too invasive. I think we might also need #52680, or else the failing node will cause disruption by repeatedly trying in vain to rejoin.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/628488641","html_url":"https://github.com/elastic/elasticsearch/issues/56707#issuecomment-628488641","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56707","id":628488641,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODQ4ODY0MQ==","user":{"login":"Bukhtawar","id":12809319,"node_id":"MDQ6VXNlcjEyODA5MzE5","avatar_url":"https://avatars0.githubusercontent.com/u/12809319?v=4","gravatar_id":"","url":"https://api.github.com/users/Bukhtawar","html_url":"https://github.com/Bukhtawar","followers_url":"https://api.github.com/users/Bukhtawar/followers","following_url":"https://api.github.com/users/Bukhtawar/following{/other_user}","gists_url":"https://api.github.com/users/Bukhtawar/gists{/gist_id}","starred_url":"https://api.github.com/users/Bukhtawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bukhtawar/subscriptions","organizations_url":"https://api.github.com/users/Bukhtawar/orgs","repos_url":"https://api.github.com/users/Bukhtawar/repos","events_url":"https://api.github.com/users/Bukhtawar/events{/privacy}","received_events_url":"https://api.github.com/users/Bukhtawar/received_events","type":"User","site_admin":false},"created_at":"2020-05-14T08:44:08Z","updated_at":"2020-05-14T08:44:08Z","author_association":"CONTRIBUTOR","body":"Thanks @DaveCTurner once #52680 is reviewed, I'll start to work on this proposal, which is also what makes it super important.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/636024417","html_url":"https://github.com/elastic/elasticsearch/issues/56707#issuecomment-636024417","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56707","id":636024417,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNjAyNDQxNw==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-05-29T15:05:29Z","updated_at":"2020-05-29T15:05:29Z","author_association":"CONTRIBUTOR","body":"We've discussed this internally and once again we feel that your problems with IO that hangs indefinitely are most likely a bug in your infrastructure and not something that Elasticsearch should be working around. This doesn't seem to be a problem we experience in practice on a wide variety of production systems, and we still cannot find evidence that any other software has needed to implement protections against indefinitely unresponsive disks either. Therefore I am closing this issue to indicate that we won't be working on it.","performed_via_github_app":null}]