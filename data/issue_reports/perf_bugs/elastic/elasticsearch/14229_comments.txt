[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/149982536","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-149982536","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":149982536,"node_id":"MDEyOklzc3VlQ29tbWVudDE0OTk4MjUzNg==","user":{"login":"clexmond","id":706094,"node_id":"MDQ6VXNlcjcwNjA5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/706094?v=4","gravatar_id":"","url":"https://api.github.com/users/clexmond","html_url":"https://github.com/clexmond","followers_url":"https://api.github.com/users/clexmond/followers","following_url":"https://api.github.com/users/clexmond/following{/other_user}","gists_url":"https://api.github.com/users/clexmond/gists{/gist_id}","starred_url":"https://api.github.com/users/clexmond/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clexmond/subscriptions","organizations_url":"https://api.github.com/users/clexmond/orgs","repos_url":"https://api.github.com/users/clexmond/repos","events_url":"https://api.github.com/users/clexmond/events{/privacy}","received_events_url":"https://api.github.com/users/clexmond/received_events","type":"User","site_admin":false},"created_at":"2015-10-21T18:14:58Z","updated_at":"2015-10-21T18:14:58Z","author_association":"NONE","body":"Updating `\"size\": 1` with inner_hits on takes roughly the same amount of time as without inner_hits altogether. Increasing the size of the return set increases the query time linearly by roughly 200ms per inner hit.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/150647252","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-150647252","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":150647252,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MDY0NzI1Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-23T17:57:13Z","updated_at":"2015-10-23T17:57:13Z","author_association":"CONTRIBUTOR","body":"It sounds like this query is being rerun for each hit.  I wonder if this could be improved?\n\n@martijnvg what do you think?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/151030067","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-151030067","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":151030067,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MTAzMDA2Nw==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-10-26T05:42:45Z","updated_at":"2015-10-26T05:42:45Z","author_association":"MEMBER","body":"@clintongormley Yes, we run a small search for inner hits (local on the shard during the fetch phase) for each hit we return to include the inner hits per hit. This is okay if only 10 hits (default) are returned, but if the `size` gets increased more time needs to be spent on executing this mini searches to gather the top inner hits per hit. \n\nThis can be improved. In theory we can execute one search in the fetch phase that collects all inner hits for all hits being returned. This reduces the overhead of all these small searches. The fetch phase does have infrastructure to achieve this, so we should look into this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/151274737","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-151274737","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":151274737,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MTI3NDczNw==","user":{"login":"clexmond","id":706094,"node_id":"MDQ6VXNlcjcwNjA5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/706094?v=4","gravatar_id":"","url":"https://api.github.com/users/clexmond","html_url":"https://github.com/clexmond","followers_url":"https://api.github.com/users/clexmond/followers","following_url":"https://api.github.com/users/clexmond/following{/other_user}","gists_url":"https://api.github.com/users/clexmond/gists{/gist_id}","starred_url":"https://api.github.com/users/clexmond/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clexmond/subscriptions","organizations_url":"https://api.github.com/users/clexmond/orgs","repos_url":"https://api.github.com/users/clexmond/repos","events_url":"https://api.github.com/users/clexmond/events{/privacy}","received_events_url":"https://api.github.com/users/clexmond/received_events","type":"User","site_admin":false},"created_at":"2015-10-26T20:28:19Z","updated_at":"2015-10-26T20:28:19Z","author_association":"NONE","body":"@martijnvg It sounds like moving in that direction might also allow us to limit the total number of inner hits returned rather than just on a per hit basis. Is that correct?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/151362929","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-151362929","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":151362929,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MTM2MjkyOQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-10-27T03:35:45Z","updated_at":"2015-10-27T03:35:45Z","author_association":"MEMBER","body":"@clexmond I think that would require an additional setting too in the query dsl? The number of inner hits being returned is based on: `size *  number_of_inner_hits_definition * size_in_inner_hits`. A global limit can be added and would just stop adding inner hits to search hits in the response if more than the specified time is time or more then the specified inner hits have been added.\n\nBut the idea behind this enhancement is to just remove the overhead that comes with the many small searches (which is noticeable when `size` is set to a higher value) by just executing on search for the all inner hits per shard during the fetch phase. This will should speed things up and hopefully listing to the total number of inner hits isn't needed then.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/169269914","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-169269914","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":169269914,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTI2OTkxNA==","user":{"login":"SanZhiYuan","id":12406695,"node_id":"MDQ6VXNlcjEyNDA2Njk1","avatar_url":"https://avatars1.githubusercontent.com/u/12406695?v=4","gravatar_id":"","url":"https://api.github.com/users/SanZhiYuan","html_url":"https://github.com/SanZhiYuan","followers_url":"https://api.github.com/users/SanZhiYuan/followers","following_url":"https://api.github.com/users/SanZhiYuan/following{/other_user}","gists_url":"https://api.github.com/users/SanZhiYuan/gists{/gist_id}","starred_url":"https://api.github.com/users/SanZhiYuan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SanZhiYuan/subscriptions","organizations_url":"https://api.github.com/users/SanZhiYuan/orgs","repos_url":"https://api.github.com/users/SanZhiYuan/repos","events_url":"https://api.github.com/users/SanZhiYuan/events{/privacy}","received_events_url":"https://api.github.com/users/SanZhiYuan/received_events","type":"User","site_admin":false},"created_at":"2016-01-06T08:54:42Z","updated_at":"2016-01-06T08:54:42Z","author_association":"NONE","body":"is this fixed with the latest release? It takes us 10 minutes when querying 50,000+ results -.-\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/169280868","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-169280868","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":169280868,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTI4MDg2OA==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-01-06T09:55:43Z","updated_at":"2016-01-06T09:55:43Z","author_association":"MEMBER","body":"@SanZhiYuan No, this hasn't been fixed. So you set `size` to 50000 in the search api?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/169293944","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-169293944","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":169293944,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTI5Mzk0NA==","user":{"login":"SanZhiYuan","id":12406695,"node_id":"MDQ6VXNlcjEyNDA2Njk1","avatar_url":"https://avatars1.githubusercontent.com/u/12406695?v=4","gravatar_id":"","url":"https://api.github.com/users/SanZhiYuan","html_url":"https://github.com/SanZhiYuan","followers_url":"https://api.github.com/users/SanZhiYuan/followers","following_url":"https://api.github.com/users/SanZhiYuan/following{/other_user}","gists_url":"https://api.github.com/users/SanZhiYuan/gists{/gist_id}","starred_url":"https://api.github.com/users/SanZhiYuan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SanZhiYuan/subscriptions","organizations_url":"https://api.github.com/users/SanZhiYuan/orgs","repos_url":"https://api.github.com/users/SanZhiYuan/repos","events_url":"https://api.github.com/users/SanZhiYuan/events{/privacy}","received_events_url":"https://api.github.com/users/SanZhiYuan/received_events","type":"User","site_admin":false},"created_at":"2016-01-06T10:39:23Z","updated_at":"2016-01-06T10:39:23Z","author_association":"NONE","body":"@martijnvg yep, I was wondering this may work but not working well when querying with size = 50000, which actually too bad, -.-. I have switched to query with 500 results per request, within 10 threads at the same time, and now it is better. It doesn't take much more time than a single request with size = 500, so I guess it is OK for  ES to parallel when running the \"small search\", and in my case, our qps is pretty low, but with more than 100 million docs. ^.^ \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/185039550","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-185039550","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":185039550,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NTAzOTU1MA==","user":{"login":"ljcollins25","id":857364,"node_id":"MDQ6VXNlcjg1NzM2NA==","avatar_url":"https://avatars1.githubusercontent.com/u/857364?v=4","gravatar_id":"","url":"https://api.github.com/users/ljcollins25","html_url":"https://github.com/ljcollins25","followers_url":"https://api.github.com/users/ljcollins25/followers","following_url":"https://api.github.com/users/ljcollins25/following{/other_user}","gists_url":"https://api.github.com/users/ljcollins25/gists{/gist_id}","starred_url":"https://api.github.com/users/ljcollins25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ljcollins25/subscriptions","organizations_url":"https://api.github.com/users/ljcollins25/orgs","repos_url":"https://api.github.com/users/ljcollins25/repos","events_url":"https://api.github.com/users/ljcollins25/events{/privacy}","received_events_url":"https://api.github.com/users/ljcollins25/received_events","type":"User","site_admin":false},"created_at":"2016-02-17T05:50:29Z","updated_at":"2016-02-17T05:50:29Z","author_association":"NONE","body":"+1. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/187350144","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-187350144","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":187350144,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NzM1MDE0NA==","user":{"login":"rpedela","id":1952582,"node_id":"MDQ6VXNlcjE5NTI1ODI=","avatar_url":"https://avatars1.githubusercontent.com/u/1952582?v=4","gravatar_id":"","url":"https://api.github.com/users/rpedela","html_url":"https://github.com/rpedela","followers_url":"https://api.github.com/users/rpedela/followers","following_url":"https://api.github.com/users/rpedela/following{/other_user}","gists_url":"https://api.github.com/users/rpedela/gists{/gist_id}","starred_url":"https://api.github.com/users/rpedela/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rpedela/subscriptions","organizations_url":"https://api.github.com/users/rpedela/orgs","repos_url":"https://api.github.com/users/rpedela/repos","events_url":"https://api.github.com/users/rpedela/events{/privacy}","received_events_url":"https://api.github.com/users/rpedela/received_events","type":"User","site_admin":false},"created_at":"2016-02-22T19:50:02Z","updated_at":"2016-02-22T19:50:02Z","author_association":"NONE","body":"+1\n\nI am having similar performance issues with `inner_hits` with a large-ish index and grandchildren. I have a query that takes about 750 ms without inner hits but takes 7-8 seconds with them using a size of 10.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188893210","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-188893210","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":188893210,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODg5MzIxMA==","user":{"login":"ljcollins25","id":857364,"node_id":"MDQ6VXNlcjg1NzM2NA==","avatar_url":"https://avatars1.githubusercontent.com/u/857364?v=4","gravatar_id":"","url":"https://api.github.com/users/ljcollins25","html_url":"https://github.com/ljcollins25","followers_url":"https://api.github.com/users/ljcollins25/followers","following_url":"https://api.github.com/users/ljcollins25/following{/other_user}","gists_url":"https://api.github.com/users/ljcollins25/gists{/gist_id}","starred_url":"https://api.github.com/users/ljcollins25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ljcollins25/subscriptions","organizations_url":"https://api.github.com/users/ljcollins25/orgs","repos_url":"https://api.github.com/users/ljcollins25/repos","events_url":"https://api.github.com/users/ljcollins25/events{/privacy}","received_events_url":"https://api.github.com/users/ljcollins25/received_events","type":"User","site_admin":false},"created_at":"2016-02-25T17:32:05Z","updated_at":"2016-02-25T17:32:05Z","author_association":"NONE","body":"What I actually want is the nested objects grouped by their parent document. In theory, this shouldn't even require a separate query during the fetch phase because the original query contains the results that I want. It just needs to find the parent document for each nested document (which is already happening during the fetch phase) and group that into the inner hits.\n\nShould I consider a different approach than inner hits? Nested Aggregations? I was worried about the performance of nested aggregations here since my documents have a very large (> 10000) nested documents per parent document.\n\nWhy are nested objects hidden? In theory one could query the nested objects separately and join/group on the client?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/190083713","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-190083713","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":190083713,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDA4MzcxMw==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-02-29T07:55:19Z","updated_at":"2016-02-29T07:55:19Z","author_association":"MEMBER","body":"The time it takes to fetch inner hits during the fetch phase depends on the amount documents being fetched. This is directly based on the regular `size` option and `size` option inside an inner hit definition and the number of inner hit definitions in a search request.\n\n@rpedela How many inner hit definitions are specified in your query? and what is the specified `size` in each of this inner hit definition?\n\n> Should I consider a different approach than inner hits? Nested Aggregations? \n\nYou could try to use a `nested` agg with a `top_hits` as metric agg. \n\n> Why are nested objects hidden? In theory one could query the nested objects separately and join/group on the client?\n\nBecause nested docs are inlined with the main document and don't have an id like normal documents have.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/190292424","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-190292424","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":190292424,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDI5MjQyNA==","user":{"login":"rpedela","id":1952582,"node_id":"MDQ6VXNlcjE5NTI1ODI=","avatar_url":"https://avatars1.githubusercontent.com/u/1952582?v=4","gravatar_id":"","url":"https://api.github.com/users/rpedela","html_url":"https://github.com/rpedela","followers_url":"https://api.github.com/users/rpedela/followers","following_url":"https://api.github.com/users/rpedela/following{/other_user}","gists_url":"https://api.github.com/users/rpedela/gists{/gist_id}","starred_url":"https://api.github.com/users/rpedela/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rpedela/subscriptions","organizations_url":"https://api.github.com/users/rpedela/orgs","repos_url":"https://api.github.com/users/rpedela/repos","events_url":"https://api.github.com/users/rpedela/events{/privacy}","received_events_url":"https://api.github.com/users/rpedela/received_events","type":"User","site_admin":false},"created_at":"2016-02-29T17:07:14Z","updated_at":"2016-02-29T17:10:52Z","author_association":"NONE","body":"I have one `inner_hits` definition for children and one for grandchildren. The `inner_hits` size is set to 1 for both. I just want the top inner child and grandchild for my particular use case.\n\nI originally tried aggregations but the data set has high cardinality and that was much slower.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/200959341","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-200959341","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":200959341,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMDk1OTM0MQ==","user":{"login":"akasper","id":69873,"node_id":"MDQ6VXNlcjY5ODcz","avatar_url":"https://avatars0.githubusercontent.com/u/69873?v=4","gravatar_id":"","url":"https://api.github.com/users/akasper","html_url":"https://github.com/akasper","followers_url":"https://api.github.com/users/akasper/followers","following_url":"https://api.github.com/users/akasper/following{/other_user}","gists_url":"https://api.github.com/users/akasper/gists{/gist_id}","starred_url":"https://api.github.com/users/akasper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akasper/subscriptions","organizations_url":"https://api.github.com/users/akasper/orgs","repos_url":"https://api.github.com/users/akasper/repos","events_url":"https://api.github.com/users/akasper/events{/privacy}","received_events_url":"https://api.github.com/users/akasper/received_events","type":"User","site_admin":false},"created_at":"2016-03-24T18:23:16Z","updated_at":"2016-03-24T18:23:16Z","author_association":"NONE","body":"@martijnvg: I've started working on this issue. Can we discuss some of the details at your earliest convenience? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/201015001","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-201015001","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":201015001,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMTAxNTAwMQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-03-24T20:49:39Z","updated_at":"2016-03-24T20:49:39Z","author_association":"MEMBER","body":"Hey @akasper, the best way to discuss this is by opening a PR with the changes you like to make. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/242612602","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-242612602","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":242612602,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MjYxMjYwMg==","user":{"login":"mitsuh","id":19288861,"node_id":"MDQ6VXNlcjE5Mjg4ODYx","avatar_url":"https://avatars0.githubusercontent.com/u/19288861?v=4","gravatar_id":"","url":"https://api.github.com/users/mitsuh","html_url":"https://github.com/mitsuh","followers_url":"https://api.github.com/users/mitsuh/followers","following_url":"https://api.github.com/users/mitsuh/following{/other_user}","gists_url":"https://api.github.com/users/mitsuh/gists{/gist_id}","starred_url":"https://api.github.com/users/mitsuh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitsuh/subscriptions","organizations_url":"https://api.github.com/users/mitsuh/orgs","repos_url":"https://api.github.com/users/mitsuh/repos","events_url":"https://api.github.com/users/mitsuh/events{/privacy}","received_events_url":"https://api.github.com/users/mitsuh/received_events","type":"User","site_admin":false},"created_at":"2016-08-26T02:49:38Z","updated_at":"2016-08-26T02:49:38Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243062545","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-243062545","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":243062545,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzA2MjU0NQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-08-29T08:25:03Z","updated_at":"2016-08-29T08:25:03Z","author_association":"MEMBER","body":"Inner hits does no magic, it just executes extra fetch operation (during fetch phase) in order to inline inner hits into the regular hits. If inner hits is enabled on queries to retrieve many hits (lets say more than 100) then inner hits adds a significant performance tax to search request. If size=100 and a single inner hits is enabled then in total upto 400 hits are retrieved (100 for main and 300 for inner hits (default size for inner hit is 3) ). And if more inner hits are enabled and more regular hits are requested then this only gets worse.\n\nInner hits has been designed to give insight in the top matching nested document or child / parent documents. It wasn't build to retrieve many hits.\n\nI'm leaning towards adding soft limits here. So that when inner hits is enabled and the regular size is higher than 100 we report an request error. Also when on the individual inner hits more than 10 inner hits are requested then we should report a request error as well. And finally the inner hits default size should be 1 instead of 3.\n\nThe idea that I shared initially to improve the fetching of inner hits during fetch phase would improve things a bit, but when many hits and inner hits are requested would resolve in similar bad performance.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/300744937","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-300744937","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":300744937,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDc0NDkzNw==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2017-05-11T10:07:37Z","updated_at":"2017-05-11T10:07:37Z","author_association":"MEMBER","body":"Update: An improvement has made to inner hits (#24571) that will improve the slowness that is being reported here when inner hits has been enabled. This improvement will be part of the 5.5 release.\r\n\r\nI expect a good improvement with the query shared in the description. The rewrite of the has_parent query is expensive and now this will be executed only once per shard whereas before it would happen upto 500 times.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/300780931","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-300780931","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":300780931,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDc4MDkzMQ==","user":{"login":"clexmond","id":706094,"node_id":"MDQ6VXNlcjcwNjA5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/706094?v=4","gravatar_id":"","url":"https://api.github.com/users/clexmond","html_url":"https://github.com/clexmond","followers_url":"https://api.github.com/users/clexmond/followers","following_url":"https://api.github.com/users/clexmond/following{/other_user}","gists_url":"https://api.github.com/users/clexmond/gists{/gist_id}","starred_url":"https://api.github.com/users/clexmond/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clexmond/subscriptions","organizations_url":"https://api.github.com/users/clexmond/orgs","repos_url":"https://api.github.com/users/clexmond/repos","events_url":"https://api.github.com/users/clexmond/events{/privacy}","received_events_url":"https://api.github.com/users/clexmond/received_events","type":"User","site_admin":false},"created_at":"2017-05-11T12:57:47Z","updated_at":"2017-05-11T12:57:47Z","author_association":"NONE","body":"Thanks @martijnvg exciting news! I've largely refactored away from nested / inner hits, but would love to take advantage of it again with these improvements.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/300819641","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-300819641","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":300819641,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDgxOTY0MQ==","user":{"login":"rpedela","id":1952582,"node_id":"MDQ6VXNlcjE5NTI1ODI=","avatar_url":"https://avatars1.githubusercontent.com/u/1952582?v=4","gravatar_id":"","url":"https://api.github.com/users/rpedela","html_url":"https://github.com/rpedela","followers_url":"https://api.github.com/users/rpedela/followers","following_url":"https://api.github.com/users/rpedela/following{/other_user}","gists_url":"https://api.github.com/users/rpedela/gists{/gist_id}","starred_url":"https://api.github.com/users/rpedela/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rpedela/subscriptions","organizations_url":"https://api.github.com/users/rpedela/orgs","repos_url":"https://api.github.com/users/rpedela/repos","events_url":"https://api.github.com/users/rpedela/events{/privacy}","received_events_url":"https://api.github.com/users/rpedela/received_events","type":"User","site_admin":false},"created_at":"2017-05-11T15:09:34Z","updated_at":"2017-05-11T15:09:34Z","author_association":"NONE","body":"Excellent! I look forward to future performance improvements discussed in the PR as well.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/319289791","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-319289791","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":319289791,"node_id":"MDEyOklzc3VlQ29tbWVudDMxOTI4OTc5MQ==","user":{"login":"dimfeld","id":1369558,"node_id":"MDQ6VXNlcjEzNjk1NTg=","avatar_url":"https://avatars0.githubusercontent.com/u/1369558?v=4","gravatar_id":"","url":"https://api.github.com/users/dimfeld","html_url":"https://github.com/dimfeld","followers_url":"https://api.github.com/users/dimfeld/followers","following_url":"https://api.github.com/users/dimfeld/following{/other_user}","gists_url":"https://api.github.com/users/dimfeld/gists{/gist_id}","starred_url":"https://api.github.com/users/dimfeld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimfeld/subscriptions","organizations_url":"https://api.github.com/users/dimfeld/orgs","repos_url":"https://api.github.com/users/dimfeld/repos","events_url":"https://api.github.com/users/dimfeld/events{/privacy}","received_events_url":"https://api.github.com/users/dimfeld/received_events","type":"User","site_admin":false},"created_at":"2017-08-01T07:21:54Z","updated_at":"2017-08-01T07:21:54Z","author_association":"NONE","body":"If you're having inner_hits performance problems with nested objects, it's may also be worth trying stored fields on the nested object, as the documentation suggests. I saw a performance improvement of more than 10x when I turned off `_source` and started using stored fields, in a case where my search was fetching a hundred objects and extracting about 50 inner hits from each one. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/319295157","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-319295157","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":319295157,"node_id":"MDEyOklzc3VlQ29tbWVudDMxOTI5NTE1Nw==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2017-08-01T07:47:48Z","updated_at":"2017-08-01T07:47:48Z","author_association":"MEMBER","body":"To complement @dimfeld suggestion, instead of using stored fields, [doc values fields](https://www.elastic.co/guide/en/elasticsearch/reference/5.5/search-request-docvalue-fields.html) can also be used. The upside is the doc values are usually already enabled (due to the defaults).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/320737036","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-320737036","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":320737036,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMDczNzAzNg==","user":{"login":"ianomad","id":2311684,"node_id":"MDQ6VXNlcjIzMTE2ODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/2311684?v=4","gravatar_id":"","url":"https://api.github.com/users/ianomad","html_url":"https://github.com/ianomad","followers_url":"https://api.github.com/users/ianomad/followers","following_url":"https://api.github.com/users/ianomad/following{/other_user}","gists_url":"https://api.github.com/users/ianomad/gists{/gist_id}","starred_url":"https://api.github.com/users/ianomad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ianomad/subscriptions","organizations_url":"https://api.github.com/users/ianomad/orgs","repos_url":"https://api.github.com/users/ianomad/repos","events_url":"https://api.github.com/users/ianomad/events{/privacy}","received_events_url":"https://api.github.com/users/ianomad/received_events","type":"User","site_admin":false},"created_at":"2017-08-07T18:05:41Z","updated_at":"2017-08-07T18:05:41Z","author_association":"CONTRIBUTOR","body":"@clexmond great, what version is this going to be part of? also is there any workaround to achieve better performance without this fix?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/320871936","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-320871936","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":320871936,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMDg3MTkzNg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2017-08-08T07:17:12Z","updated_at":"2017-08-08T07:17:12Z","author_association":"MEMBER","body":"> great, what version is this going to be part of?\r\n\r\nVersion 5.5. Also the upcoming 5.5.2 will contain a fix for a performance bug (#25864)\r\n\r\n> also is there any workaround to achieve better performance without this fix?\r\n\r\nNo","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/320938226","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-320938226","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":320938226,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMDkzODIyNg==","user":{"login":"byronvoorbach","id":4427161,"node_id":"MDQ6VXNlcjQ0MjcxNjE=","avatar_url":"https://avatars1.githubusercontent.com/u/4427161?v=4","gravatar_id":"","url":"https://api.github.com/users/byronvoorbach","html_url":"https://github.com/byronvoorbach","followers_url":"https://api.github.com/users/byronvoorbach/followers","following_url":"https://api.github.com/users/byronvoorbach/following{/other_user}","gists_url":"https://api.github.com/users/byronvoorbach/gists{/gist_id}","starred_url":"https://api.github.com/users/byronvoorbach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/byronvoorbach/subscriptions","organizations_url":"https://api.github.com/users/byronvoorbach/orgs","repos_url":"https://api.github.com/users/byronvoorbach/repos","events_url":"https://api.github.com/users/byronvoorbach/events{/privacy}","received_events_url":"https://api.github.com/users/byronvoorbach/received_events","type":"User","site_admin":false},"created_at":"2017-08-08T12:16:29Z","updated_at":"2017-08-08T12:16:29Z","author_association":"CONTRIBUTOR","body":"Hey @martijnvg!\r\nDo you guys have an idea on when you're releasing 5.5.2? At one of my clients, I was just about to upgrade the whole street to 5.5.1 (thinking it contained [#25864](https://github.com/elastic/elasticsearch/pull/25864)). \r\nWould prefer to take the 5.5.2 if release is not too far in the future","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/320968751","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-320968751","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":320968751,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMDk2ODc1MQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2017-08-08T14:14:02Z","updated_at":"2017-08-08T14:14:02Z","author_association":"MEMBER","body":"@byronvoorbach If you're on a version older than 5.5.0 then it makes sense to upgrade to get a performance boost with inner hits, otherwise waiting for 5.5.2 to be released makes sense. I suspect it will be released in a week or two.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/320972637","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-320972637","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":320972637,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMDk3MjYzNw==","user":{"login":"byronvoorbach","id":4427161,"node_id":"MDQ6VXNlcjQ0MjcxNjE=","avatar_url":"https://avatars1.githubusercontent.com/u/4427161?v=4","gravatar_id":"","url":"https://api.github.com/users/byronvoorbach","html_url":"https://github.com/byronvoorbach","followers_url":"https://api.github.com/users/byronvoorbach/followers","following_url":"https://api.github.com/users/byronvoorbach/following{/other_user}","gists_url":"https://api.github.com/users/byronvoorbach/gists{/gist_id}","starred_url":"https://api.github.com/users/byronvoorbach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/byronvoorbach/subscriptions","organizations_url":"https://api.github.com/users/byronvoorbach/orgs","repos_url":"https://api.github.com/users/byronvoorbach/repos","events_url":"https://api.github.com/users/byronvoorbach/events{/privacy}","received_events_url":"https://api.github.com/users/byronvoorbach/received_events","type":"User","site_admin":false},"created_at":"2017-08-08T14:26:58Z","updated_at":"2017-08-08T14:26:58Z","author_association":"CONTRIBUTOR","body":"@martijnvg Thanks for the quick reply, upgrading now it is 👍 ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/347484867","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-347484867","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":347484867,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQ4NDg2Nw==","user":{"login":"ilusharulkov","id":12819360,"node_id":"MDQ6VXNlcjEyODE5MzYw","avatar_url":"https://avatars2.githubusercontent.com/u/12819360?v=4","gravatar_id":"","url":"https://api.github.com/users/ilusharulkov","html_url":"https://github.com/ilusharulkov","followers_url":"https://api.github.com/users/ilusharulkov/followers","following_url":"https://api.github.com/users/ilusharulkov/following{/other_user}","gists_url":"https://api.github.com/users/ilusharulkov/gists{/gist_id}","starred_url":"https://api.github.com/users/ilusharulkov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilusharulkov/subscriptions","organizations_url":"https://api.github.com/users/ilusharulkov/orgs","repos_url":"https://api.github.com/users/ilusharulkov/repos","events_url":"https://api.github.com/users/ilusharulkov/events{/privacy}","received_events_url":"https://api.github.com/users/ilusharulkov/received_events","type":"User","site_admin":false},"created_at":"2017-11-28T10:47:19Z","updated_at":"2017-11-28T10:47:19Z","author_association":"NONE","body":"Hello!\r\nI have ES 5.6.4 and inner_hits query is extremly slow. It takes more then 10 sec. with 200k items in index.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/347521850","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-347521850","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":347521850,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzUyMTg1MA==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2017-11-28T13:23:08Z","updated_at":"2017-11-28T13:23:08Z","author_association":"MEMBER","body":"@ilusharulkov Can you ask the question on the [forum](https://discuss.elastic.co) instead? I'm happy to help there.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/347635296","html_url":"https://github.com/elastic/elasticsearch/issues/14229#issuecomment-347635296","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14229","id":347635296,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzYzNTI5Ng==","user":{"login":"ilusharulkov","id":12819360,"node_id":"MDQ6VXNlcjEyODE5MzYw","avatar_url":"https://avatars2.githubusercontent.com/u/12819360?v=4","gravatar_id":"","url":"https://api.github.com/users/ilusharulkov","html_url":"https://github.com/ilusharulkov","followers_url":"https://api.github.com/users/ilusharulkov/followers","following_url":"https://api.github.com/users/ilusharulkov/following{/other_user}","gists_url":"https://api.github.com/users/ilusharulkov/gists{/gist_id}","starred_url":"https://api.github.com/users/ilusharulkov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilusharulkov/subscriptions","organizations_url":"https://api.github.com/users/ilusharulkov/orgs","repos_url":"https://api.github.com/users/ilusharulkov/repos","events_url":"https://api.github.com/users/ilusharulkov/events{/privacy}","received_events_url":"https://api.github.com/users/ilusharulkov/received_events","type":"User","site_admin":false},"created_at":"2017-11-28T19:24:36Z","updated_at":"2017-11-28T19:24:36Z","author_association":"NONE","body":"[Of course!](https://discuss.elastic.co/t/inner-hits-query-extremly-slow/109459)","performed_via_github_app":null}]