{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25699","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25699/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25699/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25699/events","html_url":"https://github.com/elastic/elasticsearch/issues/25699","id":242585289,"node_id":"MDU6SXNzdWUyNDI1ODUyODk=","number":25699,"title":"Performance of Unified Highlighter is significantly worse than Postings highlighter in Elasticsearch 5.4.1","user":{"login":"ShilpiRachna","id":27772104,"node_id":"MDQ6VXNlcjI3NzcyMTA0","avatar_url":"https://avatars1.githubusercontent.com/u/27772104?v=4","gravatar_id":"","url":"https://api.github.com/users/ShilpiRachna","html_url":"https://github.com/ShilpiRachna","followers_url":"https://api.github.com/users/ShilpiRachna/followers","following_url":"https://api.github.com/users/ShilpiRachna/following{/other_user}","gists_url":"https://api.github.com/users/ShilpiRachna/gists{/gist_id}","starred_url":"https://api.github.com/users/ShilpiRachna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShilpiRachna/subscriptions","organizations_url":"https://api.github.com/users/ShilpiRachna/orgs","repos_url":"https://api.github.com/users/ShilpiRachna/repos","events_url":"https://api.github.com/users/ShilpiRachna/events{/privacy}","received_events_url":"https://api.github.com/users/ShilpiRachna/received_events","type":"User","site_admin":false},"labels":[{"id":111549183,"node_id":"MDU6TGFiZWwxMTE1NDkxODM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Highlighting","name":":Search/Highlighting","color":"0e8a16","default":false,"description":"How a query matched a document"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-07-13T04:55:58Z","updated_at":"2017-07-18T05:15:42Z","closed_at":"2017-07-17T17:10:47Z","author_association":"NONE","active_lock_reason":null,"body":"Elasticsearch version: 5.5.0\r\nJVM version: 1.8.0_72\r\nOS version: Windows 10\r\n\r\nDescription of the problem including expected versus actual behavior: \r\nWe indexed around 1 million documents in a single shard, zero replica index with _source enabled. Each document has around 40 to 50 fields. There is only one mapping used for all documents and it has around 500 fields. We highlight only 12 fields. I did a multi-match query with Unified and Postings highlighter and the performance with Unified is much worse than with Postings highlighter:                                \r\n\r\nComparison of performance for Multi-match query:\r\n\r\nNo highlighter:            4 ms\r\nPostings highlighter:   250 ms\r\nUnified Highlighter:     4.5 - 7 s\r\n\r\nInterestingly, the performance of match_all query with Unified Highlighter is also much worse ( ~ 15 s) - shouldn't the highlighter not impact query performance when there are no terms to highlight?\r\n\r\nThe timings in the table above are fairly consistent even when the same queries are fired back to back multiple times. \r\n\r\nIs this a known issue? We are forced to go back to Postings highlighter till this issue is fixed.\r\n \r\n--\r\n\r\n\r\n","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}