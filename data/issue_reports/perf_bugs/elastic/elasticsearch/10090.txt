{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10090","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10090/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10090/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10090/events","html_url":"https://github.com/elastic/elasticsearch/issues/10090","id":61509355,"node_id":"MDU6SXNzdWU2MTUwOTM1NQ==","number":10090,"title":"How optimize elasticsearch query slow?","user":{"login":"feifeiiiiiiiiiii","id":3310967,"node_id":"MDQ6VXNlcjMzMTA5Njc=","avatar_url":"https://avatars0.githubusercontent.com/u/3310967?v=4","gravatar_id":"","url":"https://api.github.com/users/feifeiiiiiiiiiii","html_url":"https://github.com/feifeiiiiiiiiiii","followers_url":"https://api.github.com/users/feifeiiiiiiiiiii/followers","following_url":"https://api.github.com/users/feifeiiiiiiiiiii/following{/other_user}","gists_url":"https://api.github.com/users/feifeiiiiiiiiiii/gists{/gist_id}","starred_url":"https://api.github.com/users/feifeiiiiiiiiiii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feifeiiiiiiiiiii/subscriptions","organizations_url":"https://api.github.com/users/feifeiiiiiiiiiii/orgs","repos_url":"https://api.github.com/users/feifeiiiiiiiiiii/repos","events_url":"https://api.github.com/users/feifeiiiiiiiiiii/events{/privacy}","received_events_url":"https://api.github.com/users/feifeiiiiiiiiiii/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-03-14T08:47:38Z","updated_at":"2015-03-14T10:34:29Z","closed_at":"2015-03-14T10:34:29Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"In my use scene(5.6TB data, 13 Node),  I will use many \"query_string\" to find result, I hope quickly return query result, query filters as follow,\n\n```\n{\n    \"query\": {\n        \"bool\": {\n            \"must\": [\n                {\n                    \"query_string\": {\n                        \"fields\": [\n                            \"text\"\n                        ],\n                        \"query\": \"\\\"微软\\\" OR \\\"苹果\\\" OR \\\"谷歌\\\" OR \\\"精硕 广告\\\" OR \\\"微软2\\\" OR \\\"google\\\" OR \\\"windows 10\\\" OR \\\"立白\\\" OR \\\"BOE\\\" OR \\\"宝马\\\" OR \\\"奔驰\\\" OR \\\"boe\\\"\"\n                    }\n                },\n                {\n                    \"bool\": {\n                        \"must\": [\n                            {\n                                \"bool\": {\n                                    \"should\": [\n                                        {\n                                            \"bool\": {\n                                                \"must\": [\n                                                    {\n                                                        \"term\": {\n                                                            \"platform\": 0\n                                                        }\n                                                    },\n                                                    {\n                                                        \"query_string\": {\n                                                            \"fields\": [\n                                                                \"text\"\n                                                            ],\n                                                            \"query\": \"\\\"宝马\\\"\"\n                                                        }\n                                                    }\n                                                ]\n                                            }\n                                        }\n                                    ]\n                                }\n                            },\n                            {\n                                \"query_string\": {\n                                    \"fields\": [\n                                        \"text\"\n                                    ],\n                                    \"query\": \"\\\"约会\\\" OR \\\"休闲\\\" OR \\\"散步\\\" OR \\\"电影\\\"\"\n                                }\n                            },\n                            {\n                                \"range\": {\n                                    \"cdate\": {\n                                        \"gte\": \"2015-02-07\",\n                                        \"lte\": \"2015-03-13\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"must_not\": [\n                            {\n                                \"query_string\": {\n                                    \"fields\": [\n                                        \"text\"\n                                    ],\n                                    \"query\": \"test\"\n                                }\n                            }\n                        ]\n                    }\n                },\n                {\n                    \"bool\": {\n                        \"should\": [\n                            {\n                                \"query_string\": {\n                                    \"fields\": [\n                                        \"text\"\n                                    ],\n                                    \"query\": \"\\\"约会\\\" OR \\\"休闲\\\" OR \\\"散步\\\" OR \\\"电影\\\" OR \\\"塞车\\\" OR \\\"打车\\\"\"\n                                }\n                            }\n                        ]\n                    }\n                }\n            ]\n        }\n    },\n    \"aggs\": {},\n    \"highlight\": {\n        \"fields\": {\n            \"text\": {}\n        }\n    }\n}\n```\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}