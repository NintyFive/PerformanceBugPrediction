{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/7461","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7461/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7461/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7461/events","html_url":"https://github.com/elastic/elasticsearch/issues/7461","id":41170265,"node_id":"MDU6SXNzdWU0MTE3MDI2NQ==","number":7461,"title":"ElasticSearch ignores indexing slowlog log level settings","user":{"login":"tdhopper","id":611122,"node_id":"MDQ6VXNlcjYxMTEyMg==","avatar_url":"https://avatars2.githubusercontent.com/u/611122?v=4","gravatar_id":"","url":"https://api.github.com/users/tdhopper","html_url":"https://github.com/tdhopper","followers_url":"https://api.github.com/users/tdhopper/followers","following_url":"https://api.github.com/users/tdhopper/following{/other_user}","gists_url":"https://api.github.com/users/tdhopper/gists{/gist_id}","starred_url":"https://api.github.com/users/tdhopper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tdhopper/subscriptions","organizations_url":"https://api.github.com/users/tdhopper/orgs","repos_url":"https://api.github.com/users/tdhopper/repos","events_url":"https://api.github.com/users/tdhopper/events{/privacy}","received_events_url":"https://api.github.com/users/tdhopper/received_events","type":"User","site_admin":false},"labels":[{"id":151561891,"node_id":"MDU6TGFiZWwxNTE1NjE4OTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Logging","name":":Core/Infra/Logging","color":"0e8a16","default":false,"description":"Log management and logging utilities"},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2014-08-26T13:11:19Z","updated_at":"2018-03-13T22:27:15Z","closed_at":"2018-03-13T22:27:15Z","author_association":"NONE","active_lock_reason":null,"body":"I am trying to tune how my indexing slowlogs are collected. I know that I can [set a threshold](https://github.com/elasticsearch/elasticsearch/blob/fdf1998f390bf1bb7741c133da7ea35e201f9aed/config/elasticsearch.yml#L364-L367) for how long an indexing op on a shard must take before it is logged. I would also like to be choose what level I'm logging at. It would appear that modifying [this line](https://github.com/elasticsearch/elasticsearch/blob/fdf1998f390bf1bb7741c133da7ea35e201f9aed/config/logging.yml#L21) in logging.yml would allow me to do this. However, unless I am misunderstanding the purpose of that setting, it is being ignored by ElasticSearch.\n\nHere is how I came to that conclusion. I have ElasticSearch 1.3.2 running locally on my Mac. I put these [config files](https://gist.github.com/tdhopper/b3f07829ebd55dc5703f) in ~/es-config. This elasticsearch.yml file is bare-bones, as you can see. The logging.yml file only modifies [this line](https://github.com/elasticsearch/elasticsearch/blob/0b76b0bf79d340c8938afb03736f8a17f333939b/config/logging.yml#L21) of the default file. My assumption is that this should mean only WARN level indexing ops are logged. \n\nHowever, if I start an ES instance using \n\n```\nelasticsearch --config=\"/Users/tdhopper/es-config/elasticsearch.yml\"\n```\n\nand then run this Python script\n\n``` python\nimport elasticsearch, time\nes = elasticsearch.Elasticsearch(hosts=\"localhost\")\n\nwhile True:\n    print \".\",\n    es.index(index=\"index1\", doc_type=\"test_doc\", body = {\"hot_body\": 1})\n    time.sleep(.5)\n```\n\nmy ~/es-logs/elasticsearch_index_indexing_slowlog.log file is immediately filled up with lines like \n\n```\n[2014-08-22 10:24:52,162][INFO ][index.indexing.slowlog.index] [War Machine] [index1][2] took[1.4ms], took_millis[1], type[test_doc], id[WH83A0yvRHaQtQ34_6wncg], routing[], source[{\"hot_body\":1}]\n[2014-08-22 10:24:52,666][INFO ][index.indexing.slowlog.index] [War Machine] [index1][1] took[1.5ms], took_millis[1], type[test_doc], id[sErCAr3BR_qWVfp0pnayGw], routing[], source[{\"hot_body\":1}]\n```\n\nThat is, INFO level log statements while I specified WARN as the logging level.\n\nI know that my logging.yml file is being read, because I was able to change the name of the slowlog file with `index_indexing_slow_log_file`. However, nothing seems to change when `index.indexing.slowlog` is modified.\n\n[I brought this up](https://groups.google.com/forum/?fromgroups#!searchin/elasticsearch/tdhopper/elasticsearch/h1D0WkdPcAI/-yJkEJVbFCAJ) on the ES mailing list, but no one replied.\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}