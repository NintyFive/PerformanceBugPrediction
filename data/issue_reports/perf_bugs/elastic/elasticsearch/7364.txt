{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/7364","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7364/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7364/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7364/events","html_url":"https://github.com/elastic/elasticsearch/issues/7364","id":40781699,"node_id":"MDU6SXNzdWU0MDc4MTY5OQ==","number":7364,"title":"Shard stuck in INITIALIZING state","user":{"login":"cpeeyush","id":555114,"node_id":"MDQ6VXNlcjU1NTExNA==","avatar_url":"https://avatars1.githubusercontent.com/u/555114?v=4","gravatar_id":"","url":"https://api.github.com/users/cpeeyush","html_url":"https://github.com/cpeeyush","followers_url":"https://api.github.com/users/cpeeyush/followers","following_url":"https://api.github.com/users/cpeeyush/following{/other_user}","gists_url":"https://api.github.com/users/cpeeyush/gists{/gist_id}","starred_url":"https://api.github.com/users/cpeeyush/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpeeyush/subscriptions","organizations_url":"https://api.github.com/users/cpeeyush/orgs","repos_url":"https://api.github.com/users/cpeeyush/repos","events_url":"https://api.github.com/users/cpeeyush/events{/privacy}","received_events_url":"https://api.github.com/users/cpeeyush/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2014-08-21T08:10:45Z","updated_at":"2015-11-21T17:20:12Z","closed_at":"2015-11-21T17:20:12Z","author_association":"NONE","active_lock_reason":null,"body":"I stopped one of my elastic search node & as a normal behavior elastic search started relocating my shard on that node to another node.\n\nBut even after 15 hours it is still stuck in INITIALIZING state. Also that shard is fluctuating between two nodes,for some time it stays on one node then automatically shift to another node & keep on doing that after every few hours.\n\nMain issue is it is still in INITIALIZING state after so many hours.\n\nI am using version 1.2.1.\n\nThis shard which is stuck, it is a replica.\n\nI am getting this error in logs:\n\n[ERROR][index.engine.internal    ] [mynode] [myindex][3] failed to acquire searcher, source delete_by_query\njava.lang.NullPointerException\n[WARN ][index.engine.internal    ] [mynode] [myindex][3] failed engine [deleteByQuery/shard failed on replica]\n[WARN ][cluster.action.shard     ] [mynode] [myindex][3] sending failed shard for [myindex][3], node[Sp3URfNVQlq2i4i3EjCakw], [R], s[INITIALIZING], indexUUID [kTikCHshQMKEQ_jAuWWWnw], reason [engine failure, message [deleteByQuery/shard failed on replica][EngineException[[myindex][3] failed to acquire searcher, source delete_by_query]; nested: NullPointerException; ]]\n\nOnly fix i got is:\n\nI stopped deleteByQuery from my code.\n\nThen i dropped all replicas & recreated them. Once all got stabilized.\n\nI restarted deleteByQuery in my code.\n\nThat's how it worked for me & all back to normal.\n\nHere is the link for SO question:http://stackoverflow.com/questions/25418094/elasticsearch-shard-stuck-in-initializing-state\n\nMy Delete query is:\n\n{\n    \"query\": {\n        \"filtered\": {\n            \"filter\": {\n                \"term\": {\n                    \"id\": 123\n                }\n            }\n        }\n    }\n}\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}