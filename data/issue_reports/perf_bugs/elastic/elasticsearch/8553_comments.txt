[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63830008","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63830008","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63830008,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODMwMDA4","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T15:57:58Z","updated_at":"2014-11-20T15:57:58Z","author_association":"CONTRIBUTOR","body":"Alex can you explain what your graph shows?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63831955","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63831955","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63831955,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODMxOTU1","user":{"login":"ZeAleks","id":4868394,"node_id":"MDQ6VXNlcjQ4NjgzOTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4868394?v=4","gravatar_id":"","url":"https://api.github.com/users/ZeAleks","html_url":"https://github.com/ZeAleks","followers_url":"https://api.github.com/users/ZeAleks/followers","following_url":"https://api.github.com/users/ZeAleks/following{/other_user}","gists_url":"https://api.github.com/users/ZeAleks/gists{/gist_id}","starred_url":"https://api.github.com/users/ZeAleks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZeAleks/subscriptions","organizations_url":"https://api.github.com/users/ZeAleks/orgs","repos_url":"https://api.github.com/users/ZeAleks/repos","events_url":"https://api.github.com/users/ZeAleks/events{/privacy}","received_events_url":"https://api.github.com/users/ZeAleks/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T16:08:41Z","updated_at":"2014-11-20T16:08:41Z","author_association":"NONE","body":"Yes.\nI have some code that index documents (like an ETL).\nEvery single column is the time taken by one bulk index.\n\nThe most revelant and important for me are greens one. About every 10 minutes, I get a CSV file that I parse and index every single lines. I bulk insert 1 000 lines at a time.\nSo every green column represent the time taken to index 1 000 lines.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63832531","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63832531","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63832531,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODMyNTMx","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T16:11:52Z","updated_at":"2014-11-20T16:11:52Z","author_association":"CONTRIBUTOR","body":"Are you adding new documents, or updating them (replacing previous versions)?  Small or large docs? See this blog post for ways to speed up indexing: http://www.elasticsearch.org/blog/performance-considerations-elasticsearch-indexing/\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63835799","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63835799","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63835799,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODM1Nzk5","user":{"login":"ZeAleks","id":4868394,"node_id":"MDQ6VXNlcjQ4NjgzOTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4868394?v=4","gravatar_id":"","url":"https://api.github.com/users/ZeAleks","html_url":"https://github.com/ZeAleks","followers_url":"https://api.github.com/users/ZeAleks/followers","following_url":"https://api.github.com/users/ZeAleks/following{/other_user}","gists_url":"https://api.github.com/users/ZeAleks/gists{/gist_id}","starred_url":"https://api.github.com/users/ZeAleks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZeAleks/subscriptions","organizations_url":"https://api.github.com/users/ZeAleks/orgs","repos_url":"https://api.github.com/users/ZeAleks/repos","events_url":"https://api.github.com/users/ZeAleks/events{/privacy}","received_events_url":"https://api.github.com/users/ZeAleks/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T16:29:44Z","updated_at":"2014-11-20T16:29:44Z","author_association":"NONE","body":"Hello Michael,\nThank you for your replay.\n\nI do updating existing nested documents to be exact.\nThe problem is that everything was fine until I upgraded Elasticsearch.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63836283","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63836283","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63836283,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODM2Mjgz","user":{"login":"eliasah","id":2973143,"node_id":"MDQ6VXNlcjI5NzMxNDM=","avatar_url":"https://avatars0.githubusercontent.com/u/2973143?v=4","gravatar_id":"","url":"https://api.github.com/users/eliasah","html_url":"https://github.com/eliasah","followers_url":"https://api.github.com/users/eliasah/followers","following_url":"https://api.github.com/users/eliasah/following{/other_user}","gists_url":"https://api.github.com/users/eliasah/gists{/gist_id}","starred_url":"https://api.github.com/users/eliasah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eliasah/subscriptions","organizations_url":"https://api.github.com/users/eliasah/orgs","repos_url":"https://api.github.com/users/eliasah/repos","events_url":"https://api.github.com/users/eliasah/events{/privacy}","received_events_url":"https://api.github.com/users/eliasah/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T16:32:16Z","updated_at":"2014-11-20T16:32:16Z","author_association":"CONTRIBUTOR","body":"It might be an error in the visualization framework. You might want to use a load tester like Tsung or Apache JMeter to benchmark your indexing. That would give more insight about where there bottleneck is. Since we can't reproduce your performance issues as for now that would be a good start.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63845557","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63845557","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63845557,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODQ1NTU3","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T17:25:58Z","updated_at":"2014-11-20T17:25:58Z","author_association":"CONTRIBUTOR","body":"Can you capture hot threads while bulk-indexing one of your set of 1000 docs and post here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63846162","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63846162","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63846162,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODQ2MTYy","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T17:29:48Z","updated_at":"2014-11-20T17:29:48Z","author_association":"CONTRIBUTOR","body":"Also are you using the default index.refresh_interval (1 second)?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63860257","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63860257","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63860257,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODYwMjU3","user":{"login":"ZeAleks","id":4868394,"node_id":"MDQ6VXNlcjQ4NjgzOTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4868394?v=4","gravatar_id":"","url":"https://api.github.com/users/ZeAleks","html_url":"https://github.com/ZeAleks","followers_url":"https://api.github.com/users/ZeAleks/followers","following_url":"https://api.github.com/users/ZeAleks/following{/other_user}","gists_url":"https://api.github.com/users/ZeAleks/gists{/gist_id}","starred_url":"https://api.github.com/users/ZeAleks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZeAleks/subscriptions","organizations_url":"https://api.github.com/users/ZeAleks/orgs","repos_url":"https://api.github.com/users/ZeAleks/repos","events_url":"https://api.github.com/users/ZeAleks/events{/privacy}","received_events_url":"https://api.github.com/users/ZeAleks/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T19:00:36Z","updated_at":"2014-11-20T19:00:36Z","author_association":"NONE","body":"Michael,\n\nEverytime I start indexing a file, I set refresh_interval to \"60s\". \"-1\" was not working for me.\n\nHere is a capture of hot thread (GET /_nodes/hot_threads) :\n\n<tabl>\n<tr><td>::: [S3DEV-BI-ES07][rii902ScRAyuAMiogRhTTQ][S3DEV-BI-ES07][inet[/10.199.67.45:9300]]{master=false}</td></tr>\n   <tr><td>\n   49.4% (246.7ms out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES07][bulk][T#2]'\n     2/10 snapshots sharing following 28 elements\n       java.lang.ClassLoader.defineClass1(Native Method)\n       java.lang.ClassLoader.defineClass(ClassLoader.java:800)\n       java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n       groovy.lang.GroovyClassLoader.access$300(GroovyClassLoader.java:56)\n       groovy.lang.GroovyClassLoader$ClassCollector.createClass(GroovyClassLoader.java:478)\n       groovy.lang.GroovyClassLoader$ClassCollector.onClassNode(GroovyClassLoader.java:495)\n       groovy.lang.GroovyClassLoader$ClassCollector.call(GroovyClassLoader.java:499)\n       org.codehaus.groovy.control.CompilationUnit$16.call(CompilationUnit.java:814)\n       org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:1047)\n       org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:583)\n       org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:561)\n       org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:538)\n       groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:286)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:259)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:245)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:203)\n       org.elasticsearch.script.groovy.GroovyScriptEngineService.compile(GroovyScriptEngineService.java:119)\n       org.elasticsearch.script.ScriptService.getCompiledScript(ScriptService.java:353)\n       org.elasticsearch.script.ScriptService.compile(ScriptService.java:339)\n       org.elasticsearch.script.ScriptService.executable(ScriptService.java:463)\n       org.elasticsearch.action.update.UpdateHelper.prepare(UpdateHelper.java:183)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardUpdateOperation(TransportShardBulkAction.java:535)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:240)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:511)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n     5/10 snapshots sharing following 15 elements\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:257)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:245)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:203)\n       org.elasticsearch.script.groovy.GroovyScriptEngineService.compile(GroovyScriptEngineService.java:119)\n       org.elasticsearch.script.ScriptService.getCompiledScript(ScriptService.java:353)\n       org.elasticsearch.script.ScriptService.compile(ScriptService.java:339)\n       org.elasticsearch.script.ScriptService.executable(ScriptService.java:463)\n       org.elasticsearch.action.update.UpdateHelper.prepare(UpdateHelper.java:183)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardUpdateOperation(TransportShardBulkAction.java:535)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:240)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:511)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n     3/10 snapshots sharing following 38 elements\n       org.codehaus.groovy.control.ResolveVisitor.transform(ResolveVisitor.java:637)\n       org.codehaus.groovy.control.ResolveVisitor.transformBinaryExpression(ResolveVisitor.java:902)\n       org.codehaus.groovy.control.ResolveVisitor.transform(ResolveVisitor.java:641)\n       org.codehaus.groovy.ast.ClassCodeExpressionTransformer.visitExpressionStatement(ClassCodeExpressionTransformer.java:139)\n       org.codehaus.groovy.ast.stmt.ExpressionStatement.visit(ExpressionStatement.java:40)\n       org.codehaus.groovy.ast.CodeVisitorSupport.visitBlockStatement(CodeVisitorSupport.java:35)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitBlockStatement(ClassCodeVisitorSupport.java:163)\n       org.codehaus.groovy.control.ResolveVisitor.visitBlockStatement(ResolveVisitor.java:1259)\n       org.codehaus.groovy.ast.stmt.BlockStatement.visit(BlockStatement.java:69)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClassCodeContainer(ClassCodeVisitorSupport.java:101)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitConstructorOrMethod(ClassCodeVisitorSupport.java:112)\n       org.codehaus.groovy.ast.ClassCodeExpressionTransformer.visitConstructorOrMethod(ClassCodeExpressionTransformer.java:50)\n       org.codehaus.groovy.control.ResolveVisitor.visitConstructorOrMethod(ResolveVisitor.java:167)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitMethod(ClassCodeVisitorSupport.java:123)\n       org.codehaus.groovy.ast.ClassNode.visitContents(ClassNode.java:1063)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClass(ClassCodeVisitorSupport.java:50)\n       org.codehaus.groovy.control.ResolveVisitor.visitClass(ResolveVisitor.java:1202)\n       org.codehaus.groovy.control.ResolveVisitor.startResolving(ResolveVisitor.java:142)\n       org.codehaus.groovy.control.CompilationUnit$11.call(CompilationUnit.java:643)\n       org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:923)\n       org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:585)\n       org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:534)\n       groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:286)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:259)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:245)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:203)\n       org.elasticsearch.script.groovy.GroovyScriptEngineService.compile(GroovyScriptEngineService.java:119)\n       org.elasticsearch.script.ScriptService.getCompiledScript(ScriptService.java:353)\n       org.elasticsearch.script.ScriptService.compile(ScriptService.java:339)\n       org.elasticsearch.script.ScriptService.executable(ScriptService.java:463)\n       org.elasticsearch.action.update.UpdateHelper.prepare(UpdateHelper.java:183)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardUpdateOperation(TransportShardBulkAction.java:535)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:240)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:511)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n   </td></tr>\n   <tr><td>\n   35.1% (175.3ms out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES07][bulk][T#1]'\n     5/10 snapshots sharing following 19 elements\n       groovy.lang.GroovyClassLoader.clearCache(GroovyClassLoader.java:952)\n       org.elasticsearch.script.groovy.GroovyScriptEngineService.scriptRemoved(GroovyScriptEngineService.java:97)\n       org.elasticsearch.script.ScriptService$ScriptCacheRemovalListener.onRemoval(ScriptService.java:509)\n       org.elasticsearch.common.cache.LocalCache.processPendingNotifications(LocalCache.java:1956)\n       org.elasticsearch.common.cache.LocalCache$Segment.runUnlockedCleanup(LocalCache.java:3460)\n       org.elasticsearch.common.cache.LocalCache$Segment.postWriteCleanup(LocalCache.java:3436)\n       org.elasticsearch.common.cache.LocalCache$Segment.put(LocalCache.java:2891)\n       org.elasticsearch.common.cache.LocalCache.put(LocalCache.java:4149)\n       org.elasticsearch.common.cache.LocalCache$LocalManualCache.put(LocalCache.java:4754)\n       org.elasticsearch.script.ScriptService.compile(ScriptService.java:342)\n       org.elasticsearch.script.ScriptService.executable(ScriptService.java:463)\n       org.elasticsearch.action.update.UpdateHelper.prepare(UpdateHelper.java:183)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardUpdateOperation(TransportShardBulkAction.java:535)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:240)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:511)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n     2/10 snapshots sharing following 56 elements\n       java.security.AccessController.doPrivileged(Native Method)\n       java.net.URLClassLoader.findClass(URLClassLoader.java:354)\n       java.lang.ClassLoader.loadClass(ClassLoader.java:425)\n       sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\n       java.lang.ClassLoader.loadClass(ClassLoader.java:412)\n       groovy.lang.GroovyClassLoader.loadClass(GroovyClassLoader.java:655)\n       groovy.lang.GroovyClassLoader.loadClass(GroovyClassLoader.java:523)\n       org.codehaus.groovy.control.ClassNodeResolver.tryAsLoaderClassOrScript(ClassNodeResolver.java:183)\n       org.codehaus.groovy.control.ClassNodeResolver.findClassNode(ClassNodeResolver.java:168)\n       org.codehaus.groovy.control.ClassNodeResolver.resolveName(ClassNodeResolver.java:124)\n       org.codehaus.groovy.control.ResolveVisitor.resolveToOuter(ResolveVisitor.java:617)\n       org.codehaus.groovy.control.ResolveVisitor.resolve(ResolveVisitor.java:269)\n       org.codehaus.groovy.control.ResolveVisitor.resolveFromStaticInnerClasses(ResolveVisitor.java:363)\n       org.codehaus.groovy.control.ResolveVisitor.resolve(ResolveVisitor.java:269)\n       org.codehaus.groovy.control.ResolveVisitor.resolveFromModule(ResolveVisitor.java:579)\n       org.codehaus.groovy.control.ResolveVisitor.resolve(ResolveVisitor.java:269)\n       org.codehaus.groovy.control.ResolveVisitor.resolve(ResolveVisitor.java:237)\n       org.codehaus.groovy.control.ResolveVisitor.transformPropertyExpression(ResolveVisitor.java:774)\n       org.codehaus.groovy.control.ResolveVisitor.transform(ResolveVisitor.java:637)\n       org.codehaus.groovy.control.ResolveVisitor.transformBinaryExpression(ResolveVisitor.java:902)\n       org.codehaus.groovy.control.ResolveVisitor.transform(ResolveVisitor.java:641)\n       org.codehaus.groovy.ast.ClassCodeExpressionTransformer.visitExpressionStatement(ClassCodeExpressionTransformer.java:139)\n       org.codehaus.groovy.ast.stmt.ExpressionStatement.visit(ExpressionStatement.java:40)\n       org.codehaus.groovy.ast.CodeVisitorSupport.visitBlockStatement(CodeVisitorSupport.java:35)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitBlockStatement(ClassCodeVisitorSupport.java:163)\n       org.codehaus.groovy.control.ResolveVisitor.visitBlockStatement(ResolveVisitor.java:1259)\n       org.codehaus.groovy.ast.stmt.BlockStatement.visit(BlockStatement.java:69)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClassCodeContainer(ClassCodeVisitorSupport.java:101)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitConstructorOrMethod(ClassCodeVisitorSupport.java:112)\n       org.codehaus.groovy.ast.ClassCodeExpressionTransformer.visitConstructorOrMethod(ClassCodeExpressionTransformer.java:50)\n       org.codehaus.groovy.control.ResolveVisitor.visitConstructorOrMethod(ResolveVisitor.java:167)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitMethod(ClassCodeVisitorSupport.java:123)\n       org.codehaus.groovy.ast.ClassNode.visitContents(ClassNode.java:1063)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClass(ClassCodeVisitorSupport.java:50)\n       org.codehaus.groovy.control.ResolveVisitor.visitClass(ResolveVisitor.java:1202)\n       org.codehaus.groovy.control.ResolveVisitor.startResolving(ResolveVisitor.java:142)\n       org.codehaus.groovy.control.CompilationUnit$11.call(CompilationUnit.java:643)\n       org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:923)\n       org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:585)\n       org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:534)\n       groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:286)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:259)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:245)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:203)\n       org.elasticsearch.script.groovy.GroovyScriptEngineService.compile(GroovyScriptEngineService.java:119)\n       org.elasticsearch.script.ScriptService.getCompiledScript(ScriptService.java:353)\n       org.elasticsearch.script.ScriptService.compile(ScriptService.java:339)\n       org.elasticsearch.script.ScriptService.executable(ScriptService.java:463)\n       org.elasticsearch.action.update.UpdateHelper.prepare(UpdateHelper.java:183)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardUpdateOperation(TransportShardBulkAction.java:535)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:240)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:511)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n     2/10 snapshots sharing following 41 elements\n       org.codehaus.groovy.control.ResolveVisitor.resolve(ResolveVisitor.java:269)\n       org.codehaus.groovy.control.ResolveVisitor.resolve(ResolveVisitor.java:237)\n       org.codehaus.groovy.control.ResolveVisitor.transformPropertyExpression(ResolveVisitor.java:774)\n       org.codehaus.groovy.control.ResolveVisitor.transform(ResolveVisitor.java:637)\n       org.codehaus.groovy.control.ResolveVisitor.transformBinaryExpression(ResolveVisitor.java:902)\n       org.codehaus.groovy.control.ResolveVisitor.transform(ResolveVisitor.java:641)\n       org.codehaus.groovy.ast.ClassCodeExpressionTransformer.visitExpressionStatement(ClassCodeExpressionTransformer.java:139)\n       org.codehaus.groovy.ast.stmt.ExpressionStatement.visit(ExpressionStatement.java:40)\n       org.codehaus.groovy.ast.CodeVisitorSupport.visitBlockStatement(CodeVisitorSupport.java:35)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitBlockStatement(ClassCodeVisitorSupport.java:163)\n       org.codehaus.groovy.control.ResolveVisitor.visitBlockStatement(ResolveVisitor.java:1259)\n       org.codehaus.groovy.ast.stmt.BlockStatement.visit(BlockStatement.java:69)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClassCodeContainer(ClassCodeVisitorSupport.java:101)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitConstructorOrMethod(ClassCodeVisitorSupport.java:112)\n       org.codehaus.groovy.ast.ClassCodeExpressionTransformer.visitConstructorOrMethod(ClassCodeExpressionTransformer.java:50)\n       org.codehaus.groovy.control.ResolveVisitor.visitConstructorOrMethod(ResolveVisitor.java:167)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitMethod(ClassCodeVisitorSupport.java:123)\n       org.codehaus.groovy.ast.ClassNode.visitContents(ClassNode.java:1063)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClass(ClassCodeVisitorSupport.java:50)\n       org.codehaus.groovy.control.ResolveVisitor.visitClass(ResolveVisitor.java:1202)\n       org.codehaus.groovy.control.ResolveVisitor.startResolving(ResolveVisitor.java:142)\n       org.codehaus.groovy.control.CompilationUnit$11.call(CompilationUnit.java:643)\n       org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:923)\n       org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:585)\n       org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:534)\n       groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:286)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:259)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:245)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:203)\n       org.elasticsearch.script.groovy.GroovyScriptEngineService.compile(GroovyScriptEngineService.java:119)\n       org.elasticsearch.script.ScriptService.getCompiledScript(ScriptService.java:353)\n       org.elasticsearch.script.ScriptService.compile(ScriptService.java:339)\n       org.elasticsearch.script.ScriptService.executable(ScriptService.java:463)\n       org.elasticsearch.action.update.UpdateHelper.prepare(UpdateHelper.java:183)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardUpdateOperation(TransportShardBulkAction.java:535)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:240)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:511)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n     unique snapshot\n       org.codehaus.groovy.control.ResolveVisitor.transform(ResolveVisitor.java:651)\n       org.codehaus.groovy.control.ResolveVisitor.transformPropertyExpression(ResolveVisitor.java:761)\n       org.codehaus.groovy.control.ResolveVisitor.transform(ResolveVisitor.java:637)\n       org.codehaus.groovy.control.ResolveVisitor.transformBinaryExpression(ResolveVisitor.java:902)\n       org.codehaus.groovy.control.ResolveVisitor.transform(ResolveVisitor.java:641)\n       org.codehaus.groovy.ast.ClassCodeExpressionTransformer.visitExpressionStatement(ClassCodeExpressionTransformer.java:139)\n       org.codehaus.groovy.ast.stmt.ExpressionStatement.visit(ExpressionStatement.java:40)\n       org.codehaus.groovy.ast.CodeVisitorSupport.visitBlockStatement(CodeVisitorSupport.java:35)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitBlockStatement(ClassCodeVisitorSupport.java:163)\n       org.codehaus.groovy.control.ResolveVisitor.visitBlockStatement(ResolveVisitor.java:1259)\n       org.codehaus.groovy.ast.stmt.BlockStatement.visit(BlockStatement.java:69)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClassCodeContainer(ClassCodeVisitorSupport.java:101)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitConstructorOrMethod(ClassCodeVisitorSupport.java:112)\n       org.codehaus.groovy.ast.ClassCodeExpressionTransformer.visitConstructorOrMethod(ClassCodeExpressionTransformer.java:50)\n       org.codehaus.groovy.control.ResolveVisitor.visitConstructorOrMethod(ResolveVisitor.java:167)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitMethod(ClassCodeVisitorSupport.java:123)\n       org.codehaus.groovy.ast.ClassNode.visitContents(ClassNode.java:1063)\n       org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClass(ClassCodeVisitorSupport.java:50)\n       org.codehaus.groovy.control.ResolveVisitor.visitClass(ResolveVisitor.java:1202)\n       org.codehaus.groovy.control.ResolveVisitor.startResolving(ResolveVisitor.java:142)\n       org.codehaus.groovy.control.CompilationUnit$11.call(CompilationUnit.java:643)\n       org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:923)\n       org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:585)\n       org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:561)\n       org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:538)\n       groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:286)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:259)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:245)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:203)\n       org.elasticsearch.script.groovy.GroovyScriptEngineService.compile(GroovyScriptEngineService.java:119)\n       org.elasticsearch.script.ScriptService.getCompiledScript(ScriptService.java:353)\n       org.elasticsearch.script.ScriptService.compile(ScriptService.java:339)\n       org.elasticsearch.script.ScriptService.executable(ScriptService.java:463)\n       org.elasticsearch.action.update.UpdateHelper.prepare(UpdateHelper.java:183)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardUpdateOperation(TransportShardBulkAction.java:535)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:240)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:511)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n   </td></tr>\n   <tr><td>\n    0.0% (212.5micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES07][scheduler][T#1]'\n     10/10 snapshots sharing following 9 elements\n       sun.misc.Unsafe.park(Native Method)\n       java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n       java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n       java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1090)\n       java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:807)\n       java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n</td></tr>\n   <tr><td>\n::: [S3DEV-BI-ES03][K0lsh5b4SdOU03R5kQmuEw][S3DEV-BI-ES03][inet[/10.199.31.17:9300]]{master=false}\n   </td></tr>\n   <tr><td>\n    0.0% (99.4micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES03][scheduler][T#1]'\n     10/10 snapshots sharing following 9 elements\n       sun.misc.Unsafe.park(Native Method)\n       java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n       java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n       java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1090)\n       java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:807)\n       java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n   </td></tr>\n   <tr><td>\n    0.0% (86.4micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES03][transport_client_worker][T#3]{New I/O worker #3}'\n     10/10 snapshots sharing following 15 elements\n       sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)\n       sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)\n       sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:79)\n       sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n       sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n       org.elasticsearch.common.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:415)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\n       org.elasticsearch.common.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\n       org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n       org.elasticsearch.common.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n   </td></tr>\n   <tr><td>\n    0.0% (27.4micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES03][transport_client_timer][T#1]{Hashed wheel timer #1}'\n     10/10 snapshots sharing following 5 elements\n       java.lang.Thread.sleep(Native Method)\n       org.elasticsearch.common.netty.util.HashedWheelTimer$Worker.waitForNextTick(HashedWheelTimer.java:445)\n       org.elasticsearch.common.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:364)\n       org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n       java.lang.Thread.run(Thread.java:745)\n</td></tr>\n   <tr><td>\n::: [S3DEV-BI-ES02][zHj9goFrT_C1oBNT2PR6xQ][s3dev-bi-es02][inet[/10.199.31.16:9300]]{data=false, master=true}\n   </td></tr>\n   <tr><td>\n    0.0% (162.6micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES02][scheduler][T#1]'\n     10/10 snapshots sharing following 9 elements\n       sun.misc.Unsafe.park(Native Method)\n       java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n       java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n       java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1090)\n       java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:807)\n       java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n   </td></tr>\n   <tr><td>\n    0.0% (67.7micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES02][transport_client_worker][T#2]{New I/O worker #2}'\n     10/10 snapshots sharing following 15 elements\n       sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)\n       sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)\n       sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:79)\n       sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n       sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n       org.elasticsearch.common.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:415)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\n       org.elasticsearch.common.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\n       org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n       org.elasticsearch.common.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n   </td></tr>\n   <tr><td>\n    0.0% (29.2micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES02][transport_client_timer][T#1]{Hashed wheel timer #1}'\n     10/10 snapshots sharing following 5 elements\n       java.lang.Thread.sleep(Native Method)\n       org.elasticsearch.common.netty.util.HashedWheelTimer$Worker.waitForNextTick(HashedWheelTimer.java:445)\n       org.elasticsearch.common.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:364)\n       org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n       java.lang.Thread.run(Thread.java:745)\n</td></tr>\n   <tr><td>\n::: [S3DEV-BI-ES04][-4gSCl-kQQKHRniQjNjRGw][S3DEV-BI-ES04][inet[/10.199.31.18:9300]]{master=false}\n   </td></tr>\n   <tr><td>\n    0.0% (207.9micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES04][scheduler][T#1]'\n     10/10 snapshots sharing following 9 elements\n       sun.misc.Unsafe.park(Native Method)\n       java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n       java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n       java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1090)\n       java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:807)\n       java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n   </td></tr>\n   <tr><td>\n    0.0% (76.7micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES04][transport_client_worker][T#3]{New I/O worker #3}'\n     10/10 snapshots sharing following 15 elements\n       sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)\n       sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)\n       sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:79)\n       sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n       sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n       org.elasticsearch.common.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:415)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\n       org.elasticsearch.common.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\n       org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n       org.elasticsearch.common.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n   </td></tr>\n   <tr><td>\n    0.0% (28.7micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES04][transport_client_timer][T#1]{Hashed wheel timer #1}'\n     10/10 snapshots sharing following 5 elements\n       java.lang.Thread.sleep(Native Method)\n       org.elasticsearch.common.netty.util.HashedWheelTimer$Worker.waitForNextTick(HashedWheelTimer.java:445)\n       org.elasticsearch.common.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:364)\n       org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n       java.lang.Thread.run(Thread.java:745)\n</td></tr>\n   <tr><td>\n::: [S3DEV-BI-ES06][N2xcaOFLQ2C6F2UcYu7sSA][s3dev-bi-es06][inet[/10.199.31.20:9300]]{master=false}\n   </td></tr>\n   <tr><td>\n   54.5% (272.6ms out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES06][bulk][T#2]'\n     4/10 snapshots sharing following 16 elements\n       groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:286)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:259)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:245)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:203)\n       org.elasticsearch.script.groovy.GroovyScriptEngineService.compile(GroovyScriptEngineService.java:119)\n       org.elasticsearch.script.ScriptService.getCompiledScript(ScriptService.java:353)\n       org.elasticsearch.script.ScriptService.compile(ScriptService.java:339)\n       org.elasticsearch.script.ScriptService.executable(ScriptService.java:463)\n       org.elasticsearch.action.update.UpdateHelper.prepare(UpdateHelper.java:183)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardUpdateOperation(TransportShardBulkAction.java:535)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:240)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:511)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n     2/10 snapshots sharing following 19 elements\n       groovy.lang.GroovyClassLoader.clearCache(GroovyClassLoader.java:952)\n       org.elasticsearch.script.groovy.GroovyScriptEngineService.scriptRemoved(GroovyScriptEngineService.java:97)\n       org.elasticsearch.script.ScriptService$ScriptCacheRemovalListener.onRemoval(ScriptService.java:509)\n       org.elasticsearch.common.cache.LocalCache.processPendingNotifications(LocalCache.java:1956)\n       org.elasticsearch.common.cache.LocalCache$Segment.runUnlockedCleanup(LocalCache.java:3460)\n       org.elasticsearch.common.cache.LocalCache$Segment.postWriteCleanup(LocalCache.java:3436)\n       org.elasticsearch.common.cache.LocalCache$Segment.put(LocalCache.java:2891)\n       org.elasticsearch.common.cache.LocalCache.put(LocalCache.java:4149)\n       org.elasticsearch.common.cache.LocalCache$LocalManualCache.put(LocalCache.java:4754)\n       org.elasticsearch.script.ScriptService.compile(ScriptService.java:342)\n       org.elasticsearch.script.ScriptService.executable(ScriptService.java:463)\n       org.elasticsearch.action.update.UpdateHelper.prepare(UpdateHelper.java:183)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardUpdateOperation(TransportShardBulkAction.java:535)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:240)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:511)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n     2/10 snapshots sharing following 14 elements\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:245)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:203)\n       org.elasticsearch.script.groovy.GroovyScriptEngineService.compile(GroovyScriptEngineService.java:119)\n       org.elasticsearch.script.ScriptService.getCompiledScript(ScriptService.java:353)\n       org.elasticsearch.script.ScriptService.compile(ScriptService.java:339)\n       org.elasticsearch.script.ScriptService.executable(ScriptService.java:463)\n       org.elasticsearch.action.update.UpdateHelper.prepare(UpdateHelper.java:183)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardUpdateOperation(TransportShardBulkAction.java:535)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:240)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:511)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n     2/10 snapshots sharing following 7 elements\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardUpdateOperation(TransportShardBulkAction.java:535)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:240)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:511)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n   </td></tr>\n   <tr><td>\n   50.1% (250.6ms out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES06][bulk][T#1]'\n     8/10 snapshots sharing following 14 elements\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:245)\n       groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:203)\n       org.elasticsearch.script.groovy.GroovyScriptEngineService.compile(GroovyScriptEngineService.java:119)\n       org.elasticsearch.script.ScriptService.getCompiledScript(ScriptService.java:353)\n       org.elasticsearch.script.ScriptService.compile(ScriptService.java:339)\n       org.elasticsearch.script.ScriptService.executable(ScriptService.java:463)\n       org.elasticsearch.action.update.UpdateHelper.prepare(UpdateHelper.java:183)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardUpdateOperation(TransportShardBulkAction.java:535)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:240)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:511)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n     2/10 snapshots sharing following 19 elements\n       groovy.lang.GroovyClassLoader.clearCache(GroovyClassLoader.java:952)\n       org.elasticsearch.script.groovy.GroovyScriptEngineService.scriptRemoved(GroovyScriptEngineService.java:97)\n       org.elasticsearch.script.ScriptService$ScriptCacheRemovalListener.onRemoval(ScriptService.java:509)\n       org.elasticsearch.common.cache.LocalCache.processPendingNotifications(LocalCache.java:1956)\n       org.elasticsearch.common.cache.LocalCache$Segment.runUnlockedCleanup(LocalCache.java:3460)\n       org.elasticsearch.common.cache.LocalCache$Segment.postWriteCleanup(LocalCache.java:3436)\n       org.elasticsearch.common.cache.LocalCache$Segment.put(LocalCache.java:2891)\n       org.elasticsearch.common.cache.LocalCache.put(LocalCache.java:4149)\n       org.elasticsearch.common.cache.LocalCache$LocalManualCache.put(LocalCache.java:4754)\n       org.elasticsearch.script.ScriptService.compile(ScriptService.java:342)\n       org.elasticsearch.script.ScriptService.executable(ScriptService.java:463)\n       org.elasticsearch.action.update.UpdateHelper.prepare(UpdateHelper.java:183)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardUpdateOperation(TransportShardBulkAction.java:535)\n       org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:240)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:511)\n       org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:419)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n   </td></tr>\n   <tr><td>\n    0.0% (58.9micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES06][transport_client_timer][T#1]{Hashed wheel timer #1}'\n     10/10 snapshots sharing following 5 elements\n       java.lang.Thread.sleep(Native Method)\n       org.elasticsearch.common.netty.util.HashedWheelTimer$Worker.waitForNextTick(HashedWheelTimer.java:445)\n       org.elasticsearch.common.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:364)\n       org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n       java.lang.Thread.run(Thread.java:745)\n</td></tr>\n   <tr><td>\n::: [S3DEV-BI-ES05][RCNDd2psQ9mJdqOGjsap5g][S3DEV-BI-ES05][inet[/10.199.31.19:9300]]{master=false}\n   </td></tr>\n   <tr><td>\n    0.0% (189.5micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES05][scheduler][T#1]'\n     10/10 snapshots sharing following 9 elements\n       sun.misc.Unsafe.park(Native Method)\n       java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\n       java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)\n       java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1090)\n       java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:807)\n       java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n   </td></tr>\n   <tr><td>\n    0.0% (73.3micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES05][transport_client_worker][T#3]{New I/O worker #3}'\n     10/10 snapshots sharing following 15 elements\n       sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)\n       sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)\n       sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:79)\n       sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n       sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n       org.elasticsearch.common.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:415)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\n       org.elasticsearch.common.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\n       org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n       org.elasticsearch.common.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n   </td></tr>\n   <tr><td>\n    0.0% (27.8micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES05][transport_client_timer][T#1]{Hashed wheel timer #1}'\n     10/10 snapshots sharing following 5 elements\n       java.lang.Thread.sleep(Native Method)\n       org.elasticsearch.common.netty.util.HashedWheelTimer$Worker.waitForNextTick(HashedWheelTimer.java:445)\n       org.elasticsearch.common.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:364)\n       org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n       java.lang.Thread.run(Thread.java:745)\n</td></tr>\n   <tr><td>\n::: [S3DEV-BI-ES01][ALCO_0FLRsaunFGeC7CkQw][s3dev-bi-es01][inet[/10.199.31.15:9300]]{data=false, master=true}\n   </td></tr>\n   <tr><td>\n    0.0% (102.4micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES01][[transport_server_worker.default]][T#3]{New I/O worker #8}'\n     10/10 snapshots sharing following 15 elements\n       sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)\n       sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)\n       sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:79)\n       sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n       sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n       org.elasticsearch.common.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:415)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\n       org.elasticsearch.common.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\n       org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n       org.elasticsearch.common.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n   </td></tr>\n   <tr><td>\n    0.0% (33.2micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES01][[transport_server_worker.default]][T#1]{New I/O worker #6}'\n     10/10 snapshots sharing following 15 elements\n       sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)\n       sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)\n       sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:79)\n       sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)\n       sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)\n       org.elasticsearch.common.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:415)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)\n       org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\n       org.elasticsearch.common.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\n       org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n       org.elasticsearch.common.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n       java.lang.Thread.run(Thread.java:745)\n   </td></tr>\n   <tr><td>\n    0.0% (30.5micros out of 500ms) cpu usage by thread 'elasticsearch[S3DEV-BI-ES01][transport_client_timer][T#1]{Hashed wheel timer #1}'\n     10/10 snapshots sharing following 5 elements\n       java.lang.Thread.sleep(Native Method)\n       org.elasticsearch.common.netty.util.HashedWheelTimer$Worker.waitForNextTick(HashedWheelTimer.java:445)\n       org.elasticsearch.common.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:364)\n       org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n       java.lang.Thread.run(Thread.java:745)\n</td></tr></table>\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63862884","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63862884","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63862884,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODYyODg0","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T19:17:32Z","updated_at":"2014-11-20T19:17:32Z","author_association":"CONTRIBUTOR","body":"Hi, can you tell us your exact jvm version?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63872308","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63872308","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63872308,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODcyMzA4","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T20:17:48Z","updated_at":"2014-11-20T20:17:48Z","author_association":"MEMBER","body":"@ZeAleks can you also share the script and/or a full request you are using to update the documents?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63875507","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63875507","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63875507,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODc1NTA3","user":{"login":"ZeAleks","id":4868394,"node_id":"MDQ6VXNlcjQ4NjgzOTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4868394?v=4","gravatar_id":"","url":"https://api.github.com/users/ZeAleks","html_url":"https://github.com/ZeAleks","followers_url":"https://api.github.com/users/ZeAleks/followers","following_url":"https://api.github.com/users/ZeAleks/following{/other_user}","gists_url":"https://api.github.com/users/ZeAleks/gists{/gist_id}","starred_url":"https://api.github.com/users/ZeAleks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZeAleks/subscriptions","organizations_url":"https://api.github.com/users/ZeAleks/orgs","repos_url":"https://api.github.com/users/ZeAleks/repos","events_url":"https://api.github.com/users/ZeAleks/events{/privacy}","received_events_url":"https://api.github.com/users/ZeAleks/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T20:39:12Z","updated_at":"2014-11-20T20:39:12Z","author_association":"NONE","body":"@rmuir : Here is the Java version\njava version \"1.7.0_65\"\nOpenJDK Runtime Environment (rhel-2.5.1.2.el6_5-x86_64 u65-b17)\nOpenJDK 64-Bit Server VM (build 24.65-b04, mixed mode)\n\n@dakrone : The script is in C#. Do you really want to see it ? It is just looping to everyline of a CSV file. Lines contains 3 columns with int values. It creates a concatenated string of bulk request that will be send to ES. And Every 1 000 lines, it sends the request, empty the string and continue.\nHere is an example of what is sent to Elasticsearch in bulk (1 line) : \n\n{\"update\":{\"_id\":4242}}\n{\"script\":\"ctx._source.StockEvolution+=part;ctx._source.LastStockMovement='20141120-213620';ctx._source.CurrentInitial=42;ctx._source.CurrentSold=42;ctx._source.CurrentReal=42;\",\"params\":{\"part\":[{Date:\"20141120-213620\",Initial:42,Sold:42,Real:42}]}}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63888297","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63888297","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63888297,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODg4Mjk3","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T22:02:27Z","updated_at":"2014-11-20T22:02:27Z","author_association":"CONTRIBUTOR","body":"@ZeAleks your update scripts change every time?  So they must be recompiled for each update?  It's better to use the same script and just change the params... I think (not certain) ES will compile them once and reuse that for future updates that have the same script.\n\nWith #6571 we switched from mvel to groovy in 1.4.0 so it looks likely that compiling scripts is slower for groovy than it was for mvel, maybe?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63920281","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63920281","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63920281,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTIwMjgx","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2014-11-21T03:37:25Z","updated_at":"2014-11-21T03:37:25Z","author_association":"CONTRIBUTOR","body":"I know that the first point is correct. I'm reasonably sure your second\n(compiling is slower) is also correct.\n\nIts OK to have a couple of different scripts but not one per operation.\nOn Nov 20, 2014 5:02 PM, \"Michael McCandless\" notifications@github.com\nwrote:\n\n> @ZeAleks https://github.com/ZeAleks your update scripts change every\n> time? So they must be recompiled for each update? It's better to use the\n> same script and just change the params... I think (not certain) ES will\n> compile them once and reuse that for future updates that have the same\n> script.\n> \n> With #6571 https://github.com/elasticsearch/elasticsearch/pull/6571 we\n> switched from mvel to groovy in 1.4.0 so it looks likely that compiling\n> scripts is slower for groovy than it was for mvel, maybe?\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/elasticsearch/elasticsearch/issues/8553#issuecomment-63888297\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63939493","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63939493","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63939493,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTM5NDkz","user":{"login":"ZeAleks","id":4868394,"node_id":"MDQ6VXNlcjQ4NjgzOTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4868394?v=4","gravatar_id":"","url":"https://api.github.com/users/ZeAleks","html_url":"https://github.com/ZeAleks","followers_url":"https://api.github.com/users/ZeAleks/followers","following_url":"https://api.github.com/users/ZeAleks/following{/other_user}","gists_url":"https://api.github.com/users/ZeAleks/gists{/gist_id}","starred_url":"https://api.github.com/users/ZeAleks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZeAleks/subscriptions","organizations_url":"https://api.github.com/users/ZeAleks/orgs","repos_url":"https://api.github.com/users/ZeAleks/repos","events_url":"https://api.github.com/users/ZeAleks/events{/privacy}","received_events_url":"https://api.github.com/users/ZeAleks/received_events","type":"User","site_admin":false},"created_at":"2014-11-21T08:29:53Z","updated_at":"2014-11-21T08:29:53Z","author_association":"NONE","body":"OK.\nI will try immediately to use parameters in my script.\n\nBut, if that is true, so that it mean that mvel has better performance than groovy ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63943087","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63943087","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63943087,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTQzMDg3","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2014-11-21T09:07:45Z","updated_at":"2014-11-21T09:07:45Z","author_association":"MEMBER","body":"@ZeAleks MVEL compiles faster than Groovy (which is why you are seeing compilation show up in the hot threads of your system), however Groovy executes much faster than MVEL. Moving all the changing parts of the script to parameters will ensure that ES only compiles the script once per node, and not every time a request is sent\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63949485","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63949485","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63949485,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTQ5NDg1","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-11-21T10:04:38Z","updated_at":"2014-11-21T10:04:38Z","author_association":"CONTRIBUTOR","body":"@ZeAleks can you try to optimize your script to use parameters? I will close the issue for now - if it's a different cause we can reopen...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63955713","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-63955713","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":63955713,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTU1NzEz","user":{"login":"ZeAleks","id":4868394,"node_id":"MDQ6VXNlcjQ4NjgzOTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4868394?v=4","gravatar_id":"","url":"https://api.github.com/users/ZeAleks","html_url":"https://github.com/ZeAleks","followers_url":"https://api.github.com/users/ZeAleks/followers","following_url":"https://api.github.com/users/ZeAleks/following{/other_user}","gists_url":"https://api.github.com/users/ZeAleks/gists{/gist_id}","starred_url":"https://api.github.com/users/ZeAleks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZeAleks/subscriptions","organizations_url":"https://api.github.com/users/ZeAleks/orgs","repos_url":"https://api.github.com/users/ZeAleks/repos","events_url":"https://api.github.com/users/ZeAleks/events{/privacy}","received_events_url":"https://api.github.com/users/ZeAleks/received_events","type":"User","site_admin":false},"created_at":"2014-11-21T11:00:53Z","updated_at":"2014-11-21T11:00:53Z","author_association":"NONE","body":"Hey guys,\n\nYou were right. The problem was cause by my request.\nI change it to : \n{\"update\":{\"_id\":1}}\n{\"script\":\"ctx._source.StockEvolution+=part;ctx._source.LastStockMovement=part[0].Date;ctx._source.CurrentInitial=part[0].Initial;ctx._source.CurrentSold=part[0].Sold;ctx._source.CurrentReal=part[0].Real;\",\"params\":{\"part\":[{Date:\"2009-11-15T16:22:12\",Initial:53,Sold:54,Real:52}]}}\n\nAnd now it is much better :\n\n![capture](https://cloud.githubusercontent.com/assets/4868394/5141434/c122da7e-7175-11e4-969c-1a6a34485620.PNG)\n\nBut, it is not as fast as it was with 1.3.2 and mvel.\nI will try to investigate why.\n\nAnyway, think you all for your support !\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64418374","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-64418374","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":64418374,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NDE4Mzc0","user":{"login":"osykora","id":4713269,"node_id":"MDQ6VXNlcjQ3MTMyNjk=","avatar_url":"https://avatars1.githubusercontent.com/u/4713269?v=4","gravatar_id":"","url":"https://api.github.com/users/osykora","html_url":"https://github.com/osykora","followers_url":"https://api.github.com/users/osykora/followers","following_url":"https://api.github.com/users/osykora/following{/other_user}","gists_url":"https://api.github.com/users/osykora/gists{/gist_id}","starred_url":"https://api.github.com/users/osykora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/osykora/subscriptions","organizations_url":"https://api.github.com/users/osykora/orgs","repos_url":"https://api.github.com/users/osykora/repos","events_url":"https://api.github.com/users/osykora/events{/privacy}","received_events_url":"https://api.github.com/users/osykora/received_events","type":"User","site_admin":false},"created_at":"2014-11-25T15:39:12Z","updated_at":"2014-11-25T15:39:12Z","author_association":"NONE","body":"I experienced the same issue when I switched to ES 1.4, thus to Groovy, since MVEL is no longer supported. The bulk update script executed slowly, so I tried to parameterized the script and it helped, but it's not as fast as it was using MVEL for the very same script.\n\nHere's my pseudo code for a script that is updating a list in a list:\n​{update: {\"_id\" : \"myObjectID\" }} \n{\"script\": \"for(item in ctx._source.myListOfValues){ if(item.get('field1') == param1 && item.get('field2') == param2 && item.get('field3') == param3) {item.innerListOfValues+=list; break; }} ,\"params\":{\"param1\":\"someValue\", \"param2\":\"someValue2\", \"param3\":\"someValue3\", \"list\": ['a', 'b', 'c']}}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64669233","html_url":"https://github.com/elastic/elasticsearch/issues/8553#issuecomment-64669233","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8553","id":64669233,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NjY5MjMz","user":{"login":"ZeAleks","id":4868394,"node_id":"MDQ6VXNlcjQ4NjgzOTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4868394?v=4","gravatar_id":"","url":"https://api.github.com/users/ZeAleks","html_url":"https://github.com/ZeAleks","followers_url":"https://api.github.com/users/ZeAleks/followers","following_url":"https://api.github.com/users/ZeAleks/following{/other_user}","gists_url":"https://api.github.com/users/ZeAleks/gists{/gist_id}","starred_url":"https://api.github.com/users/ZeAleks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZeAleks/subscriptions","organizations_url":"https://api.github.com/users/ZeAleks/orgs","repos_url":"https://api.github.com/users/ZeAleks/repos","events_url":"https://api.github.com/users/ZeAleks/events{/privacy}","received_events_url":"https://api.github.com/users/ZeAleks/received_events","type":"User","site_admin":false},"created_at":"2014-11-26T16:12:24Z","updated_at":"2014-11-26T16:12:24Z","author_association":"NONE","body":"Hi osykora,\n\nWhat I did after my last post was :\n- Upgrade to Java 1.8\n- Restart every node of my cluster\n\nAfter that, my queries are as fast as before.\n","performed_via_github_app":null}]