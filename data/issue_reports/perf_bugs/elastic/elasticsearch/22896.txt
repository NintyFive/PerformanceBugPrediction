{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22896","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22896/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22896/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22896/events","html_url":"https://github.com/elastic/elasticsearch/issues/22896","id":204437475,"node_id":"MDU6SXNzdWUyMDQ0Mzc0NzU=","number":22896,"title":"ElasticSearch 5.1.1 Cluster is slow and timeout","user":{"login":"hailima","id":5522873,"node_id":"MDQ6VXNlcjU1MjI4NzM=","avatar_url":"https://avatars1.githubusercontent.com/u/5522873?v=4","gravatar_id":"","url":"https://api.github.com/users/hailima","html_url":"https://github.com/hailima","followers_url":"https://api.github.com/users/hailima/followers","following_url":"https://api.github.com/users/hailima/following{/other_user}","gists_url":"https://api.github.com/users/hailima/gists{/gist_id}","starred_url":"https://api.github.com/users/hailima/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hailima/subscriptions","organizations_url":"https://api.github.com/users/hailima/orgs","repos_url":"https://api.github.com/users/hailima/repos","events_url":"https://api.github.com/users/hailima/events{/privacy}","received_events_url":"https://api.github.com/users/hailima/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-01-31T22:04:55Z","updated_at":"2018-07-03T09:26:48Z","closed_at":"2017-02-01T08:25:08Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\nGitHub is reserved for bug reports and feature requests. The best place\r\nto ask a general question is at the Elastic Discourse forums at\r\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\r\na feature request, please include one and only one of the below blocks\r\nin your new issue. Note that whether you're filing a bug report or a\r\nfeature request, ensure that your submission is for an\r\n[OS that we support](https://www.elastic.co/support/matrix#show_os).\r\nBug reports on an OS that we do not support or feature requests\r\nspecific to an OS that we do not support will be closed.\r\n-->\r\n\r\n<!--\r\nIf you are filing a bug report, please remove the below feature\r\nrequest block and provide responses for all of the below items.\r\n-->\r\n\r\n**Elasticsearch version**:5.1.1\r\n\r\n**Plugins installed**: [None]\r\n\r\n**JVM version**:1.8\r\n\r\n**OS version**: 101-Ubuntu SMP Tue Jul 15 17:58:37 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nHi, \r\n\r\nI installed two-node ES 5.1.1 cluster, use Java client to create index, update its mapping and indexing sample data. From time to time, I got timeout exception for \"create-index\"  action, if try it again, it could either work or not. Please advise what could be the issue with my cluster?  Is there anyway to change the config for 30s timeout?  Thanks!\r\n\r\norg.elasticsearch.cluster.metadata.ProcessClusterEventTimeoutException: failed to process cluster event (create-index [pwindex], cause [api]) within 30s\r\n\tat org.elasticsearch.cluster.service.ClusterService.lambda$null$4(ClusterService.java:449) ~[elasticsearch-5.1.1.jar:5.1.1]\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:458) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_112]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_112]\r\n\tat java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_112]\r\n\r\n\r\nI also use the remote reindex to migrate indexed data from ES 1.4.4 to 5.1.1. From time to time, got similar exceptions for the action \"put-mapping\".  Any solution or suggestion to it?  The index has 6M docs, each doc has a different doc type, but, all docs have the same field mappings (8 fields)  \r\n\r\norg.elasticsearch.cluster.metadata.ProcessClusterEventTimeoutException: failed to process cluster event (put-mapping) within 30s\r\n\tat org.elasticsearch.cluster.service.ClusterService.lambda$null$4(ClusterService.java:449) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:458) [elasticsearch-5.1.1.jar:5.1.1]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_66]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_66]\r\n\tat java.lang.Thread.run(Thread.java:745) [?:1.8.0_66]\r\n\r\n\r\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}