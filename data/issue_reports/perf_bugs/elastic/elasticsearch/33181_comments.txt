[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/416306923","html_url":"https://github.com/elastic/elasticsearch/issues/33181#issuecomment-416306923","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33181","id":416306923,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjMwNjkyMw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-08-27T17:41:15Z","updated_at":"2018-08-27T17:41:15Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/416882338","html_url":"https://github.com/elastic/elasticsearch/issues/33181#issuecomment-416882338","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33181","id":416882338,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjg4MjMzOA==","user":{"login":"ekalgolas","id":10568682,"node_id":"MDQ6VXNlcjEwNTY4Njgy","avatar_url":"https://avatars3.githubusercontent.com/u/10568682?v=4","gravatar_id":"","url":"https://api.github.com/users/ekalgolas","html_url":"https://github.com/ekalgolas","followers_url":"https://api.github.com/users/ekalgolas/followers","following_url":"https://api.github.com/users/ekalgolas/following{/other_user}","gists_url":"https://api.github.com/users/ekalgolas/gists{/gist_id}","starred_url":"https://api.github.com/users/ekalgolas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekalgolas/subscriptions","organizations_url":"https://api.github.com/users/ekalgolas/orgs","repos_url":"https://api.github.com/users/ekalgolas/repos","events_url":"https://api.github.com/users/ekalgolas/events{/privacy}","received_events_url":"https://api.github.com/users/ekalgolas/received_events","type":"User","site_admin":false},"created_at":"2018-08-29T09:10:06Z","updated_at":"2018-08-29T09:10:06Z","author_association":"CONTRIBUTOR","body":"Can I work on this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418465577","html_url":"https://github.com/elastic/elasticsearch/issues/33181#issuecomment-418465577","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33181","id":418465577,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODQ2NTU3Nw==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2018-09-04T18:10:55Z","updated_at":"2018-09-04T18:10:55Z","author_association":"CONTRIBUTOR","body":"@ekalgolas I had been planning to do it myself, but if you'd like to, you're welcome to it if you're still interested?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418620076","html_url":"https://github.com/elastic/elasticsearch/issues/33181#issuecomment-418620076","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33181","id":418620076,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODYyMDA3Ng==","user":{"login":"ekalgolas","id":10568682,"node_id":"MDQ6VXNlcjEwNTY4Njgy","avatar_url":"https://avatars3.githubusercontent.com/u/10568682?v=4","gravatar_id":"","url":"https://api.github.com/users/ekalgolas","html_url":"https://github.com/ekalgolas","followers_url":"https://api.github.com/users/ekalgolas/followers","following_url":"https://api.github.com/users/ekalgolas/following{/other_user}","gists_url":"https://api.github.com/users/ekalgolas/gists{/gist_id}","starred_url":"https://api.github.com/users/ekalgolas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekalgolas/subscriptions","organizations_url":"https://api.github.com/users/ekalgolas/orgs","repos_url":"https://api.github.com/users/ekalgolas/repos","events_url":"https://api.github.com/users/ekalgolas/events{/privacy}","received_events_url":"https://api.github.com/users/ekalgolas/received_events","type":"User","site_admin":false},"created_at":"2018-09-05T06:56:14Z","updated_at":"2018-09-05T06:56:14Z","author_association":"CONTRIBUTOR","body":"Sure. I will investigate the slowness in the test code and mention my findings here. Is there anything specific you know that is responsible for it which you wanted to address here?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/419789643","html_url":"https://github.com/elastic/elasticsearch/issues/33181#issuecomment-419789643","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33181","id":419789643,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTc4OTY0Mw==","user":{"login":"ekalgolas","id":10568682,"node_id":"MDQ6VXNlcjEwNTY4Njgy","avatar_url":"https://avatars3.githubusercontent.com/u/10568682?v=4","gravatar_id":"","url":"https://api.github.com/users/ekalgolas","html_url":"https://github.com/ekalgolas","followers_url":"https://api.github.com/users/ekalgolas/followers","following_url":"https://api.github.com/users/ekalgolas/following{/other_user}","gists_url":"https://api.github.com/users/ekalgolas/gists{/gist_id}","starred_url":"https://api.github.com/users/ekalgolas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekalgolas/subscriptions","organizations_url":"https://api.github.com/users/ekalgolas/orgs","repos_url":"https://api.github.com/users/ekalgolas/repos","events_url":"https://api.github.com/users/ekalgolas/events{/privacy}","received_events_url":"https://api.github.com/users/ekalgolas/received_events","type":"User","site_admin":false},"created_at":"2018-09-10T05:16:40Z","updated_at":"2018-09-10T05:16:40Z","author_association":"CONTRIBUTOR","body":"I tried to do some refactor work to avoid re computations for date and made some common objects global. This only yields 10-15% performance improvement in best case scenario. This actual bottleneck are the testAll* test which try to test intervals with a huge dataset (~600) and assert on the search and reduce cases with 5-6 variations. Each one of those tests takes about 3-4 secs on my machine, and there are about 5 of those, and total execution time being 20-23 secs.\r\n\r\nAn easy fix would be to either reduce the dataset size or the number of variations, for which I need to know the importance of having these variations and the huge dataset size. If this is absolutely important (which does not seem like for every point in the dataset), we will have to figure out how to run these tests faster keeping these parameters same. Otherwise, we can either rewrite these tests to have the edge data points (with a few regular cases) or reduce the variations tested in a way that the functionality is still tested with less data and assertions\r\n\r\nThoughts @pcsanwald ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/432472917","html_url":"https://github.com/elastic/elasticsearch/issues/33181#issuecomment-432472917","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33181","id":432472917,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQ3MjkxNw==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2018-10-24T00:52:07Z","updated_at":"2018-10-24T00:52:07Z","author_association":"CONTRIBUTOR","body":"Hi @ekalgolas - I apologize for the delayed response on this. If you're still interested in working on this, I think the right approach is to:\r\n\r\n1)  move the unit tests to used randomized parameters (perhaps a randomized range would be good) as opposed to the exhaustive set of variations.\r\n2) move the benchmarking part of this to use rally\r\n\r\nIf you're still interested (I again apologize for the delay in responding), and want to take a crack at the first thing, I can handle the benchmarking on the rally side.\r\n\r\nCC @colings86 for an expert opinion on whether the above seems right :).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/432902952","html_url":"https://github.com/elastic/elasticsearch/issues/33181#issuecomment-432902952","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33181","id":432902952,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjkwMjk1Mg==","user":{"login":"ekalgolas","id":10568682,"node_id":"MDQ6VXNlcjEwNTY4Njgy","avatar_url":"https://avatars3.githubusercontent.com/u/10568682?v=4","gravatar_id":"","url":"https://api.github.com/users/ekalgolas","html_url":"https://github.com/ekalgolas","followers_url":"https://api.github.com/users/ekalgolas/followers","following_url":"https://api.github.com/users/ekalgolas/following{/other_user}","gists_url":"https://api.github.com/users/ekalgolas/gists{/gist_id}","starred_url":"https://api.github.com/users/ekalgolas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekalgolas/subscriptions","organizations_url":"https://api.github.com/users/ekalgolas/orgs","repos_url":"https://api.github.com/users/ekalgolas/repos","events_url":"https://api.github.com/users/ekalgolas/events{/privacy}","received_events_url":"https://api.github.com/users/ekalgolas/received_events","type":"User","site_admin":false},"created_at":"2018-10-25T03:35:08Z","updated_at":"2018-10-25T03:35:08Z","author_association":"CONTRIBUTOR","body":"Sure. I`ll get started and submit a pull request for the same. Thanks for the response","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/434188943","html_url":"https://github.com/elastic/elasticsearch/issues/33181#issuecomment-434188943","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33181","id":434188943,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDE4ODk0Mw==","user":{"login":"ekalgolas","id":10568682,"node_id":"MDQ6VXNlcjEwNTY4Njgy","avatar_url":"https://avatars3.githubusercontent.com/u/10568682?v=4","gravatar_id":"","url":"https://api.github.com/users/ekalgolas","html_url":"https://github.com/ekalgolas","followers_url":"https://api.github.com/users/ekalgolas/followers","following_url":"https://api.github.com/users/ekalgolas/following{/other_user}","gists_url":"https://api.github.com/users/ekalgolas/gists{/gist_id}","starred_url":"https://api.github.com/users/ekalgolas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekalgolas/subscriptions","organizations_url":"https://api.github.com/users/ekalgolas/orgs","repos_url":"https://api.github.com/users/ekalgolas/repos","events_url":"https://api.github.com/users/ekalgolas/events{/privacy}","received_events_url":"https://api.github.com/users/ekalgolas/received_events","type":"User","site_admin":false},"created_at":"2018-10-30T06:41:57Z","updated_at":"2018-10-30T06:41:57Z","author_association":"CONTRIBUTOR","body":"@pcsanwald Created a pull request. I was able to bring down the run-time by 60%","performed_via_github_app":null}]