[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/224706011","html_url":"https://github.com/elastic/elasticsearch/issues/18776#issuecomment-224706011","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18776","id":224706011,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNDcwNjAxMQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-06-08T19:46:47Z","updated_at":"2016-06-08T20:04:13Z","author_association":"MEMBER","body":"> is this a bug?\n\nWhen you create an index, that causes a change to the routing table. A cluster state update task is submitted to the nodes in the cluster. When that cluster state update task arrives, each node must process the new routing table to see if they need to remove indices, delete shards, start shards, etc. Currently, applying deleted shards is O(number of indices \\* number of shards). I opened #18788 to address this.\n\nHowever, you're still going to be hurting here. Having 10000 indices on two nodes with one replica is asking for pain. This means that you have at a minimum 10000 shards on each node if you have one shard per index, and maybe 50000 shards on each node if you're using the default number of shards per index. Either way, this is way too many shards. So #18788 is not meant to address your issue directly, just improve performance for the general case. You'll still need to do something about how many indices and shards that you have.\n\n> Can I avoid this by setting any configuration? \n\nNo.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252394235","html_url":"https://github.com/elastic/elasticsearch/issues/18776#issuecomment-252394235","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18776","id":252394235,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjM5NDIzNQ==","user":{"login":"jilen","id":546573,"node_id":"MDQ6VXNlcjU0NjU3Mw==","avatar_url":"https://avatars3.githubusercontent.com/u/546573?v=4","gravatar_id":"","url":"https://api.github.com/users/jilen","html_url":"https://github.com/jilen","followers_url":"https://api.github.com/users/jilen/followers","following_url":"https://api.github.com/users/jilen/following{/other_user}","gists_url":"https://api.github.com/users/jilen/gists{/gist_id}","starred_url":"https://api.github.com/users/jilen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jilen/subscriptions","organizations_url":"https://api.github.com/users/jilen/orgs","repos_url":"https://api.github.com/users/jilen/repos","events_url":"https://api.github.com/users/jilen/events{/privacy}","received_events_url":"https://api.github.com/users/jilen/received_events","type":"User","site_admin":false},"created_at":"2016-10-08T01:33:15Z","updated_at":"2016-10-08T01:33:15Z","author_association":"NONE","body":"@jasontedor   I suffered from this. Is there any way to improve the index creation speed ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252587762","html_url":"https://github.com/elastic/elasticsearch/issues/18776#issuecomment-252587762","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18776","id":252587762,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjU4Nzc2Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-10-10T11:00:55Z","updated_at":"2016-10-10T11:00:55Z","author_association":"MEMBER","body":"@jilen Creating an index requires a cluster state update which can be a slow thing indeed. The issue here was about the degradation in index-creation speed as the number of indices increased; that's what #18788 addressed. I'd say that if you rely on index creation being fast, you probably have an architecture that needs to be reconsidered.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252599410","html_url":"https://github.com/elastic/elasticsearch/issues/18776#issuecomment-252599410","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18776","id":252599410,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjU5OTQxMA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-10-10T12:04:45Z","updated_at":"2016-10-10T12:04:45Z","author_association":"MEMBER","body":"@jilen to quantify what @jasontedor said (which is very true) - index creation is slow when compared to data level operations like indexing and search. You should expect it to run within a couple of seconds. Also note that we now wait (since 5.0) for the primaries to be fully allocated before responding to the call.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252794397","html_url":"https://github.com/elastic/elasticsearch/issues/18776#issuecomment-252794397","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18776","id":252794397,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjc5NDM5Nw==","user":{"login":"jilen","id":546573,"node_id":"MDQ6VXNlcjU0NjU3Mw==","avatar_url":"https://avatars3.githubusercontent.com/u/546573?v=4","gravatar_id":"","url":"https://api.github.com/users/jilen","html_url":"https://github.com/jilen","followers_url":"https://api.github.com/users/jilen/followers","following_url":"https://api.github.com/users/jilen/following{/other_user}","gists_url":"https://api.github.com/users/jilen/gists{/gist_id}","starred_url":"https://api.github.com/users/jilen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jilen/subscriptions","organizations_url":"https://api.github.com/users/jilen/orgs","repos_url":"https://api.github.com/users/jilen/repos","events_url":"https://api.github.com/users/jilen/events{/privacy}","received_events_url":"https://api.github.com/users/jilen/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T02:22:00Z","updated_at":"2016-10-11T02:22:11Z","author_association":"NONE","body":"@jasontedor  @bleskes I am now applying `one-index-per-user pattern`, there are actually more than 20k shards. \n\nParallel automatically index creationg(via bulk or update api) actually makes the cluster dead(no response).\n\nWhat do you suggest for my situation ? Disable automatically index creation ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252802247","html_url":"https://github.com/elastic/elasticsearch/issues/18776#issuecomment-252802247","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18776","id":252802247,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjgwMjI0Nw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T03:28:03Z","updated_at":"2016-10-11T03:28:03Z","author_association":"CONTRIBUTOR","body":"Don't have an index per user.\n\nOn Oct 10, 2016 10:22 PM, \"jilen\" notifications@github.com wrote:\n\n> @jasontedor https://github.com/jasontedor I am now applying one-index-per-user\n> pattern, there are actually more than 20k shards.\n> \n> Parallel automatically index creationg(via bulk or update api) actually\n> makes the cluster dead(no response).\n> \n> What do you suggest for my situation ? Disable automatically index\n> creation ?\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/elastic/elasticsearch/issues/18776#issuecomment-252794397,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AANLovR2fcqDQQkHcEd0qSWIhqX2DI-9ks5qyvLNgaJpZM4IwrBH\n> .\n","performed_via_github_app":null}]