[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/147778977","html_url":"https://github.com/elastic/elasticsearch/issues/14090#issuecomment-147778977","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14090","id":147778977,"node_id":"MDEyOklzc3VlQ29tbWVudDE0Nzc3ODk3Nw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2015-10-13T17:03:54Z","updated_at":"2015-10-13T17:27:39Z","author_association":"MEMBER","body":"There are two pull requests open to address this issue. The first is #14068 which relaxes the constraint that `Cache#computeIfAbsent` be called at most once per key. The second is #14091 which changes the synchronization mechanism to be the key itself so that loading does not occur under the segment lock.\n\nOnly one of these two pull requests should be merged into master but given the [feedback](https://github.com/elastic/elasticsearch/pull/14068#issuecomment-147525189) on #14068 from @jpountz I wanted to explore a different approach for solving the deadlock issue.\n","performed_via_github_app":null}]