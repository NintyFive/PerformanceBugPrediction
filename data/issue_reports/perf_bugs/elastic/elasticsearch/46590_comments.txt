[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/530334392","html_url":"https://github.com/elastic/elasticsearch/issues/46590#issuecomment-530334392","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46590","id":530334392,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDMzNDM5Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-09-11T11:11:58Z","updated_at":"2019-09-11T11:11:58Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/530335671","html_url":"https://github.com/elastic/elasticsearch/issues/46590#issuecomment-530335671","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46590","id":530335671,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDMzNTY3MQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-09-11T11:16:36Z","updated_at":"2019-09-11T11:18:29Z","author_association":"CONTRIBUTOR","body":"The first commit that was slow is 9e70a8ec5ad207e62dfc2869056a5844a68f54ec which is odd because this one only mutes a test. The one before it ran on \t043f1d41a8e5dcb1b4d526927ee6c9881c595bc2 \r\n\r\nThe fast build scan is https://gradle-enterprise.elastic.co/s/yeqpcyy4wd3sk and the slow one https://gradle-enterprise.elastic.co/s/vmjdbs3bssw5m","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/530428747","html_url":"https://github.com/elastic/elasticsearch/issues/46590#issuecomment-530428747","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46590","id":530428747,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDQyODc0Nw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-09-11T15:17:41Z","updated_at":"2019-09-11T15:17:41Z","author_association":"CONTRIBUTOR","body":"@mark-vieira could you please take a look at this ? I didn't get far with it. I was able to replicate it running slow locally, but the commit that was fast in CI seemed slow locally as well, and there don't seem to be relevant changes on the `7.x` branch either in that time-frame. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/530507711","html_url":"https://github.com/elastic/elasticsearch/issues/46590#issuecomment-530507711","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46590","id":530507711,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDUwNzcxMQ==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-09-11T18:30:47Z","updated_at":"2019-09-11T18:36:03Z","author_association":"CONTRIBUTOR","body":"I've looked into this. Specifically, it's the `UpgradeClusterClientYamlTestSuiteIT` that is suddenly much slower. Here's a look at BWC builds:\r\n\r\n![image](https://user-images.githubusercontent.com/4106672/64724196-df62a180-d486-11e9-9ca6-05d8de1c7f37.png)\r\n\r\nOne thing that stood out to me was the long build that seemed to proceed the sudden jump in _all_ BWC builds. That build was a PR build for [this PR](https://github.com/elastic/elasticsearch/pull/46521), but it hasn't been merged.\r\n\r\nThen looking at the Jenkins build history we see this:\r\n\r\n![image](https://user-images.githubusercontent.com/4106672/64724308-1c2e9880-d487-11e9-9f5f-d66462aa8b0d.png)\r\n\r\nYou'll see before the big jump we see a number of failing builds that are _slightly_ longer than normal. They aren't 1 hour because they failed early. The first build of these included [this commit](https://github.com/elastic/elasticsearch/commit/e5ab12b9ab4c853ac4b57f7a74313aed5bb7822f) which I believe is the culprit. It seems no coincidence that it is also associated with ML auditing.\r\n\r\n@przemekwitek is it possible that https://github.com/elastic/elasticsearch/pull/45967 would result in significantly increased execution times for `UpgradeClusterClientYamlTestSuiteIT`? Also, is https://github.com/elastic/elasticsearch/pull/46521 effectively the same set of changes? Both PRs seem to have the same behavior of exploding BWC build times.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/530539822","html_url":"https://github.com/elastic/elasticsearch/issues/46590#issuecomment-530539822","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46590","id":530539822,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDUzOTgyMg==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-09-11T19:54:10Z","updated_at":"2019-09-11T19:54:27Z","author_association":"CONTRIBUTOR","body":"So locally I could reproduce this running `clean :x-pack:qa:rolling-upgrade:v8.0.0#bwcTest`.\r\n\r\nhttps://github.com/elastic/elasticsearch/commit/043f1d41a8e5dcb1b4d526927ee6c9881c595bc2 - 17 minutes\r\nhttps://github.com/elastic/elasticsearch/commit/e5ab12b9ab4c853ac4b57f7a74313aed5bb7822f - 29 minutes (failed)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/530787019","html_url":"https://github.com/elastic/elasticsearch/issues/46590#issuecomment-530787019","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46590","id":530787019,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDc4NzAxOQ==","user":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"created_at":"2019-09-12T11:41:46Z","updated_at":"2019-09-12T11:41:46Z","author_association":"CONTRIBUTOR","body":"> @przemekwitek is it possible that #45967 would result in significantly increased execution times for UpgradeClusterClientYamlTestSuiteIT? \r\n\r\nWell, definitely it wasn't intended. But since there is time correlation, I need to look at it.\r\n\r\n> Also, is #46521 effectively the same set of changes? Both PRs seem to have the same behavior of exploding BWC build times.\r\n\r\nThese two PRs are dependent but not the same. The one that is not yet merged contains changes from the already merged one. So it makes sense that both are slow provided that it is the already merged PR that is the culprit.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/530791008","html_url":"https://github.com/elastic/elasticsearch/issues/46590#issuecomment-530791008","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46590","id":530791008,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDc5MTAwOA==","user":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"created_at":"2019-09-12T11:55:20Z","updated_at":"2019-09-12T11:55:20Z","author_association":"CONTRIBUTOR","body":"I believe I've found the issue with my PR.\r\nFix is here: https://github.com/elastic/elasticsearch/pull/46657\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/530932624","html_url":"https://github.com/elastic/elasticsearch/issues/46590#issuecomment-530932624","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46590","id":530932624,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDkzMjYyNA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-09-12T17:46:43Z","updated_at":"2019-09-12T17:46:43Z","author_association":"CONTRIBUTOR","body":"Things are looking better:\r\n\r\n![image](https://user-images.githubusercontent.com/4106672/64807684-983de480-d54a-11e9-9942-c9e218bf4b90.png)\r\n\r\nI think we can call this resolved.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/530932848","html_url":"https://github.com/elastic/elasticsearch/issues/46590#issuecomment-530932848","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46590","id":530932848,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDkzMjg0OA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-09-12T17:47:19Z","updated_at":"2019-09-12T17:47:19Z","author_association":"CONTRIBUTOR","body":"Thanks for tracking this down @przemekwitek.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/530981818","html_url":"https://github.com/elastic/elasticsearch/issues/46590#issuecomment-530981818","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46590","id":530981818,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDk4MTgxOA==","user":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"created_at":"2019-09-12T19:58:27Z","updated_at":"2019-09-12T19:58:27Z","author_association":"CONTRIBUTOR","body":"And thanks for the initial investigation. That was very helpful!","performed_via_github_app":null}]