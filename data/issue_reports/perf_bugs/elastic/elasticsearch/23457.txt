{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23457","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23457/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23457/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23457/events","html_url":"https://github.com/elastic/elasticsearch/issues/23457","id":211400210,"node_id":"MDU6SXNzdWUyMTE0MDAyMTA=","number":23457,"title":"Slow rise of jvm heap usage on node in cluster","user":{"login":"randreucetti","id":7765549,"node_id":"MDQ6VXNlcjc3NjU1NDk=","avatar_url":"https://avatars3.githubusercontent.com/u/7765549?v=4","gravatar_id":"","url":"https://api.github.com/users/randreucetti","html_url":"https://github.com/randreucetti","followers_url":"https://api.github.com/users/randreucetti/followers","following_url":"https://api.github.com/users/randreucetti/following{/other_user}","gists_url":"https://api.github.com/users/randreucetti/gists{/gist_id}","starred_url":"https://api.github.com/users/randreucetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/randreucetti/subscriptions","organizations_url":"https://api.github.com/users/randreucetti/orgs","repos_url":"https://api.github.com/users/randreucetti/repos","events_url":"https://api.github.com/users/randreucetti/events{/privacy}","received_events_url":"https://api.github.com/users/randreucetti/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2017-03-02T14:04:59Z","updated_at":"2017-03-09T23:26:38Z","closed_at":"2017-03-09T09:53:05Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\nGitHub is reserved for bug reports and feature requests. The best place\r\nto ask a general question is at the Elastic Discourse forums at\r\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\r\na feature request, please include one and only one of the below blocks\r\nin your new issue. Note that whether you're filing a bug report or a\r\nfeature request, ensure that your submission is for an\r\n[OS that we support](https://www.elastic.co/support/matrix#show_os).\r\nBug reports on an OS that we do not support or feature requests\r\nspecific to an OS that we do not support will be closed.\r\n-->\r\n\r\n<!--\r\nIf you are filing a bug report, please remove the below feature\r\nrequest block and provide responses for all of the below items.\r\n-->\r\n\r\n**Elasticsearch version**: 2.4.1\r\n\r\n**Plugins installed**: [analysis-kuromoji, cloud-aws, license, marvel-agent ]\r\n\r\n**JVM version**: 1.8.110\r\n\r\n**OS version**: ubuntu 14.04\r\n\r\n**Description of the problem including expected versus actual behavior**: Hi, I've recently upgrade from elasticsearch 1.7.5 to 2.4.1 however I'm noticing some strange behaviour around the jvm memory on my cluster. All nodes look healthy when the cluster starts however after a few hours one node's memory becomes high: \r\n\r\n![image](https://cloud.githubusercontent.com/assets/7765549/23510164/66b0c554-ff50-11e6-8875-5e06882ee734.png)\r\n\r\nThe node eventually becomes unresponsive and causes queries and index requests to the cluster to fail. Below is the logs produced as the memory reaches ~98%\r\n\r\n**Steps to reproduce**:\r\n 1. Restart the cluster\r\n 2. Wait some hours\r\n 3. One node will become high in memory, most other nodes appear to be fine\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n```\r\n[2017-03-01 13:43:54,230][WARN ][monitor.jvm              ] [ElasticsearchVpc6] [gc][old][20563][179] duration [45.5s], collections [1]/[45.9s], total [45.5s]/[3.6m], memory [28.9gb]->[24.1gb]/[29.8gb], all_pools {[young] [53mb]->[4.6mb]/[865.3mb]}{[survivor] [24.9mb]->[0b]/[108.1mb]}{[old] [28.8gb]->[24.1gb]/[28.9gb]}\r\n[2017-03-01 13:45:26,368][WARN ][monitor.jvm              ] [ElasticsearchVpc6] [gc][old][20598][181] duration [48.1s], collections [2]/[49s], total [48.1s]/[4.4m], memory [29gb]->[24.2gb]/[29.8gb], all_pools {[young] [172.5mb]->[23.8mb]/[865.3mb]}{[survivor] [75.2mb]->[0b]/[108.1mb]}{[old] [28.8gb]->[24.2gb]/[28.9gb]}\r\n[2017-03-01 17:13:42,211][WARN ][monitor.jvm              ] [ElasticsearchVpc6] [gc][old][32702][751] duration [57.5s], collections [2]/[58.2s], total [57.5s]/[16.9m], memory [29.2gb]->[28.4gb]/[29.8gb], all_pools {[young] [582mb]->[332.6mb]/[865.3mb]}{[survivor] [108.1mb]->[0b]/[108.1mb]}{[old] [28.5gb]->[28.1gb]/[28.9gb]}\r\n```\r\n","closed_by":{"login":"randreucetti","id":7765549,"node_id":"MDQ6VXNlcjc3NjU1NDk=","avatar_url":"https://avatars3.githubusercontent.com/u/7765549?v=4","gravatar_id":"","url":"https://api.github.com/users/randreucetti","html_url":"https://github.com/randreucetti","followers_url":"https://api.github.com/users/randreucetti/followers","following_url":"https://api.github.com/users/randreucetti/following{/other_user}","gists_url":"https://api.github.com/users/randreucetti/gists{/gist_id}","starred_url":"https://api.github.com/users/randreucetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/randreucetti/subscriptions","organizations_url":"https://api.github.com/users/randreucetti/orgs","repos_url":"https://api.github.com/users/randreucetti/repos","events_url":"https://api.github.com/users/randreucetti/events{/privacy}","received_events_url":"https://api.github.com/users/randreucetti/received_events","type":"User","site_admin":false},"performed_via_github_app":null}