{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/24123","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24123/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24123/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24123/events","html_url":"https://github.com/elastic/elasticsearch/issues/24123","id":221942672,"node_id":"MDU6SXNzdWUyMjE5NDI2NzI=","number":24123,"title":"Slow snapshots to S3","user":{"login":"jjfalling","id":1078616,"node_id":"MDQ6VXNlcjEwNzg2MTY=","avatar_url":"https://avatars0.githubusercontent.com/u/1078616?v=4","gravatar_id":"","url":"https://api.github.com/users/jjfalling","html_url":"https://github.com/jjfalling","followers_url":"https://api.github.com/users/jjfalling/followers","following_url":"https://api.github.com/users/jjfalling/following{/other_user}","gists_url":"https://api.github.com/users/jjfalling/gists{/gist_id}","starred_url":"https://api.github.com/users/jjfalling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjfalling/subscriptions","organizations_url":"https://api.github.com/users/jjfalling/orgs","repos_url":"https://api.github.com/users/jjfalling/repos","events_url":"https://api.github.com/users/jjfalling/events{/privacy}","received_events_url":"https://api.github.com/users/jjfalling/received_events","type":"User","site_admin":false},"labels":[{"id":143077482,"node_id":"MDU6TGFiZWwxNDMwNzc0ODI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Snapshot/Restore","name":":Distributed/Snapshot/Restore","color":"0e8a16","default":false,"description":"Anything directly related to the `_snapshot/*` APIs"}],"state":"closed","locked":false,"assignee":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"assignees":[{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false}],"milestone":null,"comments":17,"created_at":"2017-04-15T11:19:32Z","updated_at":"2018-03-26T14:05:53Z","closed_at":"2018-03-26T14:05:52Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Elasticsearch version**: 2.4.2\r\n\r\n**Plugins installed**: [] Cloud AWS / Repository S3\r\n\r\n**JVM version**: OpenJDK 1.8\r\n\r\n**OS version**: Debian 8\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nSnapshots to S3 are significantly slower then transferring files to S3 using the AWS cli. Uploading a test file using the AWS cli gets ~230mb/s but the snapshots get only around an average of 25mb/s. Both of these tests were preformed on the same EC2 instance. The instance was also in the same region as the S3 bucket.  The test index was 10gb with 5 shards and force merged to one segment. The snapshot throttle settings were also set to 10GB.\r\n\r\nI also tested ES 5.2.2 and found the snapshot was significantly faster, however still much slower then using the AWS cli. \r\n\r\n\r\nI've already talked to @tlrx about this issue and we agreed I should open an issue. ","closed_by":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"performed_via_github_app":null}