{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25445","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25445/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25445/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25445/events","html_url":"https://github.com/elastic/elasticsearch/issues/25445","id":239142140,"node_id":"MDU6SXNzdWUyMzkxNDIxNDA=","number":25445,"title":"Improve percolator performance","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"labels":[{"id":156502592,"node_id":"MDU6TGFiZWwxNTY1MDI1OTI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Percolator","name":":Search/Percolator","color":"0e8a16","default":false,"description":"Reverse search: find queries that match a document"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":158399402,"node_id":"MDU6TGFiZWwxNTgzOTk0MDI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Meta","name":"Meta","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-06-28T12:05:00Z","updated_at":"2019-05-01T18:12:15Z","closed_at":"2019-05-01T18:12:14Z","author_association":"MEMBER","active_lock_reason":null,"body":"There are several tasks left around from when the percolator was rewritten in 5.0 that can be done in order to improve the percolator's performance.\r\n\r\n* [x]  ~~support for selecting percolator query candidate matches containing wildcard / prefix queries.~~#25351\r\n* [x] Document how to deal with wildcard and prefix queries. #27831\r\n* [x] Add support for selecting percolator query candidate matches containing range queries. #25647\r\n* [ ] Add support for selecting percolator query candidate matches containing `geo_distance`, `geo_bounding_box`, `geo_polygon` and `geo_shape` queries. #26040\r\n* [ ] Add support for selecting percolator query candidate matches containing `geo_shape` queries.\r\n* [x] Today the percolator query's xcontent representation is stored. Alternatively the percolator could also store the percolator query's `Writable` representation. This could speed up percolating because parsing the latter format has less overhead. I expect the this improvement to be more noticeable when a percolator query is somewhat more complex (bool query with several clauses) compared to a simple `term` query. #25456\r\n* [x] ~~In case of phrase queries and conjunction queries the percolator only extracts the longest term at index time. The idea here is that only a single term needs to be indexed for the selecting of percolator query candidate matches at search time to work and the longest term is picked because in general that is the rarest term. However that may not always be the case and it would be great if that logic is configurable.~~ #26081 (this change has been superseded by #26307)\r\n* [x] Change the `percolate` query the accept multiple documents (via `documents` json object array). This can speed percolation when many documents need to be percolated. The price for parsing and matching percolator queries is only paid once per batch of documents instead of for each document to percolate. #26418\r\n * [x] Improve extraction of conjunctions in order to have fewer false positives. #26307","closed_by":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"performed_via_github_app":null}