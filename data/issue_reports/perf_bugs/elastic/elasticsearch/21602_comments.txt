[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261059749","html_url":"https://github.com/elastic/elasticsearch/issues/21602#issuecomment-261059749","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21602","id":261059749,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTA1OTc0OQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-11-16T20:19:23Z","updated_at":"2016-11-16T21:05:18Z","author_association":"MEMBER","body":"This is controlled by the Log4j 2 configuration. If you open the default log4j2.properties that ships with Elasticsearch you'll see:\n\n```\nappender.index_search_slowlog_rolling.layout.pattern = [%d{ISO8601}][%-5p][%-25c] %marker%.10000m%n\n```\n\nReplace `%.10000m` with `%m`. The former truncates the query from the beginning to the last 10000 characters.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261062656","html_url":"https://github.com/elastic/elasticsearch/issues/21602#issuecomment-261062656","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21602","id":261062656,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTA2MjY1Ng==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2016-11-16T20:30:41Z","updated_at":"2016-11-16T20:30:41Z","author_association":"MEMBER","body":"Nice, thx for the tip @jasontedor !\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261124451","html_url":"https://github.com/elastic/elasticsearch/issues/21602#issuecomment-261124451","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21602","id":261124451,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTEyNDQ1MQ==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2016-11-17T01:09:42Z","updated_at":"2016-11-17T01:09:42Z","author_association":"MEMBER","body":"@jasontedor could there still be an issue here (or an enhancement request)?  Part of the issue here is that by default it uses log4j2's truncation functionality.  It seems like it will be more user friendly to provide some other way to truncate the message that does not also remove the timing, # of shards, information so that the truncated slowlog is more useful?\n\n```\n[2016-11-16T17:01:46,253][DEBUG][index.search.slowlog.query] [H9GIwD1] ax_boost\" : 3.4028235E38,\n      \"boost\" : 1.0\n    }\n  },\n  \"stored_fields\" : [ ],\n  \"ext\" : { }\n}], \n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261125039","html_url":"https://github.com/elastic/elasticsearch/issues/21602#issuecomment-261125039","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21602","id":261125039,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTEyNTAzOQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-11-17T01:13:04Z","updated_at":"2016-11-17T01:13:04Z","author_association":"MEMBER","body":"@ppf2 The reason this pattern is used is to not blow disk space. We could truncate from the beginning; would that help?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261126535","html_url":"https://github.com/elastic/elasticsearch/issues/21602#issuecomment-261126535","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21602","id":261126535,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTEyNjUzNQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-11-17T01:22:43Z","updated_at":"2016-11-17T01:22:43Z","author_association":"MEMBER","body":"> Part of the issue here is that by default it uses log4j2's truncation functionality.\n> \n> The reason this pattern is used is to not blow disk space.\n\nYes, this was added because a user had their hundred-megabyte mapping being written out (repeatedly!) to the log file as a single line. We should definitely not remove the truncation by default, but maybe truncating from the beginning as Jason mentioned would help.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261126565","html_url":"https://github.com/elastic/elasticsearch/issues/21602#issuecomment-261126565","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21602","id":261126565,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTEyNjU2NQ==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2016-11-17T01:22:52Z","updated_at":"2016-11-17T01:22:52Z","author_association":"MEMBER","body":"Yep, I think truncating by default from the beginning will help, at least it will show the took times (will be helpful for perf testing situations where I already know what the queries look like and all you really care about are the took times for aggregating metrics), thx!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261138797","html_url":"https://github.com/elastic/elasticsearch/issues/21602#issuecomment-261138797","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21602","id":261138797,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTEzODc5Nw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-11-17T02:41:25Z","updated_at":"2016-11-17T02:41:25Z","author_association":"MEMBER","body":"I opened #21609.\n","performed_via_github_app":null}]