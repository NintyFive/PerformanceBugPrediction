[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/53130828","html_url":"https://github.com/elastic/elasticsearch/issues/6808#issuecomment-53130828","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6808","id":53130828,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTMwODI4","user":{"login":"OlegYch","id":268312,"node_id":"MDQ6VXNlcjI2ODMxMg==","avatar_url":"https://avatars1.githubusercontent.com/u/268312?v=4","gravatar_id":"","url":"https://api.github.com/users/OlegYch","html_url":"https://github.com/OlegYch","followers_url":"https://api.github.com/users/OlegYch/followers","following_url":"https://api.github.com/users/OlegYch/following{/other_user}","gists_url":"https://api.github.com/users/OlegYch/gists{/gist_id}","starred_url":"https://api.github.com/users/OlegYch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlegYch/subscriptions","organizations_url":"https://api.github.com/users/OlegYch/orgs","repos_url":"https://api.github.com/users/OlegYch/repos","events_url":"https://api.github.com/users/OlegYch/events{/privacy}","received_events_url":"https://api.github.com/users/OlegYch/received_events","type":"User","site_admin":false},"created_at":"2014-08-22T22:46:28Z","updated_at":"2014-08-22T22:46:28Z","author_association":"NONE","body":"was this fixed?\ni think i just experienced this after rolling upgrade from 1.3.1 to 1.3.2\ni disabled cluster.routing.allocation before upgraded then installed new version on each node and set cluster.routing.allocation=all\nthen i waited several hours for cluster to become green (with dogslow response times in the meantime)\nthen i restarted each node one by one again\nthen waited a bit more and noticed there were 4 primary shards stuck in initializing on one of them and killed it - and the cluster went back up green in no time\nthere were errors like this in the failed node log:\n\n```\n[2014-08-22 22:01:45,221][DEBUG][action.search.type       ] [thisnode] [myidx][1], node[oDw5wWJ-S6etTr0cGLNbGw], [P], s[STARTED]: Failed to execute [org.elasticsearch.action.search.SearchRequest@57228563] lastShard [true]\norg.elasticsearch.transport.SendRequestTransportException: [anothernode][inet[/10.35.62.130:9300]][search/phase/query]\nCaused by: org.elasticsearch.transport.NodeNotConnectedException: [anothernode][inet[/10.35.62.130:9300]] Node not connected\n        at org.elasticsearch.transport.netty.NettyTransport.nodeChannel(NettyTransport.java:874)\n        at org.elasticsearch.transport.netty.NettyTransport.sendRequest(NettyTransport.java:556)\n        at org.elasticsearch.transport.TransportService.sendRequest(TransportService.java:206)\n        ... 40 more\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/53137876","html_url":"https://github.com/elastic/elasticsearch/issues/6808#issuecomment-53137876","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6808","id":53137876,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTM3ODc2","user":{"login":"OlegYch","id":268312,"node_id":"MDQ6VXNlcjI2ODMxMg==","avatar_url":"https://avatars1.githubusercontent.com/u/268312?v=4","gravatar_id":"","url":"https://api.github.com/users/OlegYch","html_url":"https://github.com/OlegYch","followers_url":"https://api.github.com/users/OlegYch/followers","following_url":"https://api.github.com/users/OlegYch/following{/other_user}","gists_url":"https://api.github.com/users/OlegYch/gists{/gist_id}","starred_url":"https://api.github.com/users/OlegYch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlegYch/subscriptions","organizations_url":"https://api.github.com/users/OlegYch/orgs","repos_url":"https://api.github.com/users/OlegYch/repos","events_url":"https://api.github.com/users/OlegYch/events{/privacy}","received_events_url":"https://api.github.com/users/OlegYch/received_events","type":"User","site_admin":false},"created_at":"2014-08-23T00:49:26Z","updated_at":"2014-08-23T00:49:26Z","author_association":"NONE","body":"welp there are some shards stuck initializing on that node again (from newly created indexes)\nthe only exceptions in log are\n\n```\n[2014-08-23 00:02:12,622][ERROR][marvel.agent.exporter    ] [thisnode] remote target didn't respond with 200 OK response code [404 Not Found]. content: [:)\n^E�errorrIndexMissingException[[.marvel-2014.08.23] missing]�status$^L��]\n```\n\nnote the garbled strings\nand on other nodes only stuff like\n\n```\n[2014-08-23 00:38:31,588][DEBUG][action.bulk              ] [othernode] observer: timeout notification from cluster service. timeout setting [1m], time since start [1m]\n[2014-08-23 00:38:31,589][ERROR][marvel.agent.exporter    ] [othernode] create failure (index:[.marvel-2014.08.23] type: [node_stats]): UnavailableShardsException[[.marvel-2014.08.23][0] [2] shardIt, [0] active : Timeout waiting for [1m], request: org.elasticsearch.action.bulk.BulkShardRequest@4f0b6ef7]\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/53187062","html_url":"https://github.com/elastic/elasticsearch/issues/6808#issuecomment-53187062","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6808","id":53187062,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTg3MDYy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-24T10:22:32Z","updated_at":"2014-08-24T10:22:32Z","author_association":"CONTRIBUTOR","body":"/cc @bleskes @s1monw \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/53243619","html_url":"https://github.com/elastic/elasticsearch/issues/6808#issuecomment-53243619","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6808","id":53243619,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjQzNjE5","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-08-25T09:19:07Z","updated_at":"2014-08-25T09:19:14Z","author_association":"CONTRIBUTOR","body":"hey @OlegYch I personally can't see really evidence that your issue is related to this. Did you really see a shard initialising that was supposed to recover from a shard that is not actually allocated. You also said:\n\n> then waited a bit more and noticed there were 4 primary shards stuck in initializing on one of them and killed it - and the cluster went back up green in no time\n\nand in this issue the shards that got stuck were replicas in this issue. Can you provide more infos that what you already added?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/53266286","html_url":"https://github.com/elastic/elasticsearch/issues/6808#issuecomment-53266286","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6808","id":53266286,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjY2Mjg2","user":{"login":"OlegYch","id":268312,"node_id":"MDQ6VXNlcjI2ODMxMg==","avatar_url":"https://avatars1.githubusercontent.com/u/268312?v=4","gravatar_id":"","url":"https://api.github.com/users/OlegYch","html_url":"https://github.com/OlegYch","followers_url":"https://api.github.com/users/OlegYch/followers","following_url":"https://api.github.com/users/OlegYch/following{/other_user}","gists_url":"https://api.github.com/users/OlegYch/gists{/gist_id}","starred_url":"https://api.github.com/users/OlegYch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlegYch/subscriptions","organizations_url":"https://api.github.com/users/OlegYch/orgs","repos_url":"https://api.github.com/users/OlegYch/repos","events_url":"https://api.github.com/users/OlegYch/events{/privacy}","received_events_url":"https://api.github.com/users/OlegYch/received_events","type":"User","site_admin":false},"created_at":"2014-08-25T13:55:10Z","updated_at":"2014-08-25T13:55:10Z","author_association":"NONE","body":"oh sorry, didn't understand that this issue was specifically about replica shards as opposed to primary shards, perhaps this is better described in #6816 ?\ni've removed that node from the cluster and stopped elastic, so i can upload files from it if that would help diagnosing\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69019401","html_url":"https://github.com/elastic/elasticsearch/issues/6808#issuecomment-69019401","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6808","id":69019401,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDE5NDAx","user":{"login":"garyelephant","id":2291859,"node_id":"MDQ6VXNlcjIyOTE4NTk=","avatar_url":"https://avatars3.githubusercontent.com/u/2291859?v=4","gravatar_id":"","url":"https://api.github.com/users/garyelephant","html_url":"https://github.com/garyelephant","followers_url":"https://api.github.com/users/garyelephant/followers","following_url":"https://api.github.com/users/garyelephant/following{/other_user}","gists_url":"https://api.github.com/users/garyelephant/gists{/gist_id}","starred_url":"https://api.github.com/users/garyelephant/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyelephant/subscriptions","organizations_url":"https://api.github.com/users/garyelephant/orgs","repos_url":"https://api.github.com/users/garyelephant/repos","events_url":"https://api.github.com/users/garyelephant/events{/privacy}","received_events_url":"https://api.github.com/users/garyelephant/received_events","type":"User","site_admin":false},"created_at":"2015-01-07T13:10:33Z","updated_at":"2015-01-07T13:10:33Z","author_association":"NONE","body":"is this problem resolved after 1.4.0 ? Mine 1.4.0 still has this problem.\n\n```\ncurl es_host:9200/_cat/shards 2>1 |grep [UI]N\ntest-2015.01.07      4 p INITIALIZING                   127.0.0.1 10.71.16.121 \ntest-2015.01.07      4 r UNASSIGNED                                            \ntest-2015.01.07      4 r UNASSIGNED \n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69385080","html_url":"https://github.com/elastic/elasticsearch/issues/6808#issuecomment-69385080","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6808","id":69385080,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Mzg1MDgw","user":{"login":"ioc32","id":1151149,"node_id":"MDQ6VXNlcjExNTExNDk=","avatar_url":"https://avatars3.githubusercontent.com/u/1151149?v=4","gravatar_id":"","url":"https://api.github.com/users/ioc32","html_url":"https://github.com/ioc32","followers_url":"https://api.github.com/users/ioc32/followers","following_url":"https://api.github.com/users/ioc32/following{/other_user}","gists_url":"https://api.github.com/users/ioc32/gists{/gist_id}","starred_url":"https://api.github.com/users/ioc32/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ioc32/subscriptions","organizations_url":"https://api.github.com/users/ioc32/orgs","repos_url":"https://api.github.com/users/ioc32/repos","events_url":"https://api.github.com/users/ioc32/events{/privacy}","received_events_url":"https://api.github.com/users/ioc32/received_events","type":"User","site_admin":false},"created_at":"2015-01-09T19:26:43Z","updated_at":"2015-01-09T19:26:43Z","author_association":"NONE","body":"@garyelephant I just run into this same issue after resetting the number of replicas using the API. 1.4.0, too.\n\nFWIW here's the status of the shards comprising one of the stuck indices:\n\nindex-2015.01.06      0 r INITIALIZING                  10.0.0.162 es2.io.example.com\nindex-2015.01.06      0 r UNASSIGNED\nindex-2015.01.06      1 r UNASSIGNED\nindex-2015.01.06      1 r UNASSIGNED\nindex-2015.01.06      2 r UNASSIGNED\nindex-2015.01.06      2 r UNASSIGNED\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69812782","html_url":"https://github.com/elastic/elasticsearch/issues/6808#issuecomment-69812782","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6808","id":69812782,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODEyNzgy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-01-13T20:22:47Z","updated_at":"2015-01-13T20:22:47Z","author_association":"CONTRIBUTOR","body":"@garyelephant @ioc32 this issue is closed. If you're still seeing problems in 1.4, please open a new issue with more information about the problem.\n","performed_via_github_app":null}]